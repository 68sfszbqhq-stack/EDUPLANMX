var hj=Object.defineProperty;var fj=(t,e,n)=>e in t?hj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ld=(t,e,n)=>fj(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var pj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wC={exports:{}},Xm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gj=Symbol.for("react.transitional.element"),xj=Symbol.for("react.fragment");function AC(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var a in e)a!=="key"&&(n[a]=e[a])}else n=e;return e=n.ref,{$$typeof:gj,type:t,key:s,ref:e!==void 0?e:null,props:n}}Xm.Fragment=xj;Xm.jsx=AC;Xm.jsxs=AC;wC.exports=Xm;var r=wC.exports,IC={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=Symbol.for("react.transitional.element"),vj=Symbol.for("react.portal"),yj=Symbol.for("react.fragment"),bj=Symbol.for("react.strict_mode"),_j=Symbol.for("react.profiler"),Ej=Symbol.for("react.consumer"),Nj=Symbol.for("react.context"),Cj=Symbol.for("react.forward_ref"),Tj=Symbol.for("react.suspense"),Sj=Symbol.for("react.memo"),jC=Symbol.for("react.lazy"),wj=Symbol.for("react.activity"),Ty=Symbol.iterator;function Aj(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var RC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MC=Object.assign,PC={};function Oo(t,e,n){this.props=t,this.context=e,this.refs=PC,this.updater=n||RC}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DC(){}DC.prototype=Oo.prototype;function v0(t,e,n){this.props=t,this.context=e,this.refs=PC,this.updater=n||RC}var y0=v0.prototype=new DC;y0.constructor=v0;MC(y0,Oo.prototype);y0.isPureReactComponent=!0;var Sy=Array.isArray;function wp(){}var Ze={H:null,A:null,T:null,S:null},kC=Object.prototype.hasOwnProperty;function b0(t,e,n){var s=n.ref;return{$$typeof:x0,type:t,key:e,ref:s!==void 0?s:null,props:n}}function Ij(t,e){return b0(t.type,e,t.props)}function _0(t){return typeof t=="object"&&t!==null&&t.$$typeof===x0}function jj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wy=/\/+/g;function Nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jj(""+t.key):e.toString(36)}function Rj(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(wp,wp):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Rr(t,e,n,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case x0:case vj:o=!0;break;case jC:return o=t._init,Rr(o(t._payload),e,n,s,a)}}if(o)return a=a(t),o=s===""?"."+Nf(t,0):s,Sy(a)?(n="",o!=null&&(n=o.replace(wy,"$&/")+"/"),Rr(a,e,n,"",function(d){return d})):a!=null&&(_0(a)&&(a=Ij(a,n+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(wy,"$&/")+"/")+o)),e.push(a)),1;o=0;var l=s===""?".":s+":";if(Sy(t))for(var c=0;c<t.length;c++)s=t[c],i=l+Nf(s,c),o+=Rr(s,e,n,i,a);else if(c=Aj(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,i=l+Nf(s,c++),o+=Rr(s,e,n,i,a);else if(i==="object"){if(typeof t.then=="function")return Rr(Rj(t),e,n,s,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function Vd(t,e,n){if(t==null)return t;var s=[],a=0;return Rr(t,s,"","",function(i){return e.call(n,i,a++)}),s}function Mj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ay=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Pj={map:Vd,forEach:function(t,e,n){Vd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vd(t,function(){e++}),e},toArray:function(t){return Vd(t,function(e){return e})||[]},only:function(t){if(!_0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Activity=wj;xe.Children=Pj;xe.Component=Oo;xe.Fragment=yj;xe.Profiler=_j;xe.PureComponent=v0;xe.StrictMode=bj;xe.Suspense=Tj;xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ze;xe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ze.H.useMemoCache(t)}};xe.cache=function(t){return function(){return t.apply(null,arguments)}};xe.cacheSignal=function(){return null};xe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=MC({},t.props),a=t.key;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)!kC.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(s[i]=e[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];s.children=o}return b0(t.type,a,s)};xe.createContext=function(t){return t={$$typeof:Nj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Ej,_context:t},t};xe.createElement=function(t,e,n){var s,a={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)kC.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(a[s]=e[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return b0(t,i,a)};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:Cj,render:t}};xe.isValidElement=_0;xe.lazy=function(t){return{$$typeof:jC,_payload:{_status:-1,_result:t},_init:Mj}};xe.memo=function(t,e){return{$$typeof:Sj,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ze.T,n={};Ze.T=n;try{var s=t(),a=Ze.S;a!==null&&a(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(wp,Ay)}catch(i){Ay(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ze.T=e}};xe.unstable_useCacheRefresh=function(){return Ze.H.useCacheRefresh()};xe.use=function(t){return Ze.H.use(t)};xe.useActionState=function(t,e,n){return Ze.H.useActionState(t,e,n)};xe.useCallback=function(t,e){return Ze.H.useCallback(t,e)};xe.useContext=function(t){return Ze.H.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t,e){return Ze.H.useDeferredValue(t,e)};xe.useEffect=function(t,e){return Ze.H.useEffect(t,e)};xe.useEffectEvent=function(t){return Ze.H.useEffectEvent(t)};xe.useId=function(){return Ze.H.useId()};xe.useImperativeHandle=function(t,e,n){return Ze.H.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Ze.H.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Ze.H.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Ze.H.useMemo(t,e)};xe.useOptimistic=function(t,e){return Ze.H.useOptimistic(t,e)};xe.useReducer=function(t,e,n){return Ze.H.useReducer(t,e,n)};xe.useRef=function(t){return Ze.H.useRef(t)};xe.useState=function(t){return Ze.H.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Ze.H.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Ze.H.useTransition()};xe.version="19.2.3";IC.exports=xe;var M=IC.exports;const Hc=SC(M);var LC={exports:{}},Wm={},VC={exports:{}},UC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Z){var G=q.length;q.push(Z);e:for(;0<G;){var ee=G-1>>>1,de=q[ee];if(0<a(de,Z))q[ee]=Z,q[G]=de,G=ee;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var Z=q[0],G=q.pop();if(G!==Z){q[0]=G;e:for(var ee=0,de=q.length,Ie=de>>>1;ee<Ie;){var nt=2*(ee+1)-1,ot=q[nt],ie=nt+1,be=q[ie];if(0>a(ot,G))ie<de&&0>a(be,ot)?(q[ee]=be,q[ie]=G,ee=ie):(q[ee]=ot,q[nt]=G,ee=nt);else if(ie<de&&0>a(be,G))q[ee]=be,q[ie]=G,ee=ie;else break e}}return Z}function a(q,Z){var G=q.sortIndex-Z.sortIndex;return G!==0?G:q.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,p=null,g=3,x=!1,y=!1,T=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function D(q){for(var Z=n(d);Z!==null;){if(Z.callback===null)s(d);else if(Z.startTime<=q)s(d),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=n(d)}}function V(q){if(T=!1,D(q),!y)if(n(c)!==null)y=!0,k||(k=!0,P());else{var Z=n(d);Z!==null&&O(V,Z.startTime-q)}}var k=!1,j=-1,_=5,I=-1;function C(){return A?!0:!(t.unstable_now()-I<_)}function E(){if(A=!1,k){var q=t.unstable_now();I=q;var Z=!0;try{e:{y=!1,T&&(T=!1,N(j),j=-1),x=!0;var G=g;try{t:{for(D(q),p=n(c);p!==null&&!(p.expirationTime>q&&C());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,g=p.priorityLevel;var de=ee(p.expirationTime<=q);if(q=t.unstable_now(),typeof de=="function"){p.callback=de,D(q),Z=!0;break t}p===n(c)&&s(c),D(q)}else s(c);p=n(c)}if(p!==null)Z=!0;else{var Ie=n(d);Ie!==null&&O(V,Ie.startTime-q),Z=!1}}break e}finally{p=null,g=G,x=!1}Z=void 0}}finally{Z?P():k=!1}}}var P;if(typeof S=="function")P=function(){S(E)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,H=R.port2;R.port1.onmessage=E,P=function(){H.postMessage(null)}}else P=function(){b(E,0)};function O(q,Z){j=b(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var G=g;g=Z;try{return q()}finally{g=G}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=g;g=q;try{return Z()}finally{g=G}},t.unstable_scheduleCallback=function(q,Z,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,q){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=G+de,q={id:m++,callback:Z,priorityLevel:q,startTime:G,expirationTime:de,sortIndex:-1},G>ee?(q.sortIndex=G,e(d,q),n(c)===null&&q===n(d)&&(T?(N(j),j=-1):T=!0,O(V,G-ee))):(q.sortIndex=de,e(c,q),y||x||(y=!0,k||(k=!0,P()))),q},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(q){var Z=g;return function(){var G=g;g=Z;try{return q.apply(this,arguments)}finally{g=G}}}})(UC);VC.exports=UC;var Dj=VC.exports,OC={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kj=M;function zC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function La(){}var dn={d:{f:La,r:function(){throw Error(zC(522))},D:La,C:La,L:La,m:La,X:La,S:La,M:La},p:0,findDOMNode:null},Lj=Symbol.for("react.portal");function Vj(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lj,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var Wl=kj.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Zm(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dn;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(zC(299));return Vj(t,e,null,n)};hn.flushSync=function(t){var e=Wl.T,n=dn.p;try{if(Wl.T=null,dn.p=2,t)return t()}finally{Wl.T=e,dn.p=n,dn.d.f()}};hn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,dn.d.C(t,e))};hn.prefetchDNS=function(t){typeof t=="string"&&dn.d.D(t)};hn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Zm(n,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?dn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:i}):n==="script"&&dn.d.X(t,{crossOrigin:s,integrity:a,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};hn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Zm(e.as,e.crossOrigin);dn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&dn.d.M(t)};hn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Zm(n,e.crossOrigin);dn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};hn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Zm(e.as,e.crossOrigin);dn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else dn.d.m(t)};hn.requestFormReset=function(t){dn.d.r(t)};hn.unstable_batchedUpdates=function(t,e){return t(e)};hn.useFormState=function(t,e,n){return Wl.H.useFormState(t,e,n)};hn.useFormStatus=function(){return Wl.H.useHostTransitionStatus()};hn.version="19.2.3";function FC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FC)}catch(t){console.error(t)}}FC(),OC.exports=hn;var Uj=OC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=Dj,GC=M,Oj=Uj;function $(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $c(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function HC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Iy(t){if($c(t)!==t)throw Error($(188))}function zj(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Iy(a),t;if(i===s)return Iy(a),e;i=i.sibling}throw Error($(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==s)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function $C(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=$C(t),e!==null)return e;t=t.sibling}return null}var tt=Object.assign,Fj=Symbol.for("react.element"),Ud=Symbol.for("react.transitional.element"),zl=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),YC=Symbol.for("react.strict_mode"),Ap=Symbol.for("react.profiler"),JC=Symbol.for("react.consumer"),Zs=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),N0=Symbol.for("react.memo"),Oa=Symbol.for("react.lazy"),Rp=Symbol.for("react.activity"),Gj=Symbol.for("react.memo_cache_sentinel"),jy=Symbol.iterator;function jl(t){return t===null||typeof t!="object"?null:(t=jy&&t[jy]||t["@@iterator"],typeof t=="function"?t:null)}var qj=Symbol.for("react.client.reference");function Mp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===qj?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zr:return"Fragment";case Ap:return"Profiler";case YC:return"StrictMode";case Ip:return"Suspense";case jp:return"SuspenseList";case Rp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case zl:return"Portal";case Zs:return t.displayName||"Context";case JC:return(t._context.displayName||"Context")+".Consumer";case E0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N0:return e=t.displayName||null,e!==null?e:Mp(t.type)||"Memo";case Oa:e=t._payload,t=t._init;try{return Mp(t(e))}catch{}}return null}var Fl=Array.isArray,ce=GC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve=Oj.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zi={pending:!1,data:null,method:null,action:null},Pp=[],Fr=-1;function zs(t){return{current:t}}function Gt(t){0>Fr||(t.current=Pp[Fr],Pp[Fr]=null,Fr--)}function Je(t,e){Fr++,Pp[Fr]=t.current,t.current=e}var Ds=zs(null),yc=zs(null),ti=zs(null),Hu=zs(null);function $u(t,e){switch(Je(ti,e),Je(yc,t),Je(Ds,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Lb(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Lb(e),t=fw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Gt(Ds),Je(Ds,t)}function xo(){Gt(Ds),Gt(yc),Gt(ti)}function Dp(t){t.memoizedState!==null&&Je(Hu,t);var e=Ds.current,n=fw(e,t.type);e!==n&&(Je(yc,t),Je(Ds,n))}function Yu(t){yc.current===t&&(Gt(Ds),Gt(yc)),Hu.current===t&&(Gt(Hu),jc._currentValue=Zi)}var Cf,Ry;function Bi(t){if(Cf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cf=e&&e[1]||"",Ry=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cf+t+Ry}var Tf=!1;function Sf(t,e){if(!t||Tf)return"";Tf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(x){var g=x}Reflect.construct(t,[],p)}else{try{p.call()}catch(x){g=x}t.call(p.prototype)}}else{try{throw Error()}catch(x){g=x}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(x){if(x&&g&&typeof x.stack=="string")return[x.stack,g.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(a=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(s===c.length||a===d.length)for(s=c.length-1,a=d.length-1;1<=s&&0<=a&&c[s]!==d[a];)a--;for(;1<=s&&0<=a;s--,a--)if(c[s]!==d[a]){if(s!==1||a!==1)do if(s--,a--,0>a||c[s]!==d[a]){var m=`
`+c[s].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=s&&0<=a);break}}}finally{Tf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Bi(n):""}function Bj(t,e){switch(t.tag){case 26:case 27:case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return t.child!==e&&e!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return Sf(t.type,!1);case 11:return Sf(t.type.render,!1);case 1:return Sf(t.type,!0);case 31:return Bi("Activity");default:return""}}function My(t){try{var e="",n=null;do e+=Bj(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var kp=Object.prototype.hasOwnProperty,C0=Dt.unstable_scheduleCallback,wf=Dt.unstable_cancelCallback,Hj=Dt.unstable_shouldYield,$j=Dt.unstable_requestPaint,Pn=Dt.unstable_now,Yj=Dt.unstable_getCurrentPriorityLevel,KC=Dt.unstable_ImmediatePriority,QC=Dt.unstable_UserBlockingPriority,Ju=Dt.unstable_NormalPriority,Jj=Dt.unstable_LowPriority,XC=Dt.unstable_IdlePriority,Kj=Dt.log,Qj=Dt.unstable_setDisableYieldValue,Yc=null,Dn=null;function Ka(t){if(typeof Kj=="function"&&Qj(t),Dn&&typeof Dn.setStrictMode=="function")try{Dn.setStrictMode(Yc,t)}catch{}}var kn=Math.clz32?Math.clz32:Zj,Xj=Math.log,Wj=Math.LN2;function Zj(t){return t>>>=0,t===0?32:31-(Xj(t)/Wj|0)|0}var Od=256,zd=262144,Fd=4194304;function Hi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function eh(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var a=0,i=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?a=Hi(s):(o&=l,o!==0?a=Hi(o):n||(n=l&~t,n!==0&&(a=Hi(n))))):(l=s&~i,l!==0?a=Hi(l):o!==0?a=Hi(o):n||(n=s&~t,n!==0&&(a=Hi(n)))),a===0?0:e!==0&&e!==a&&!(e&i)&&(i=a&-a,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:a}function Jc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function eR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WC(){var t=Fd;return Fd<<=1,!(Fd&62914560)&&(Fd=4194304),t}function Af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kc(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function tR(t,e,n,s,a,i){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=o&~n;0<n;){var m=31-kn(n),p=1<<m;l[m]=0,c[m]=-1;var g=d[m];if(g!==null)for(d[m]=null,m=0;m<g.length;m++){var x=g[m];x!==null&&(x.lane&=-536870913)}n&=~p}s!==0&&ZC(t,s,0),i!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=i&~(o&~e))}function ZC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-kn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function eT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-kn(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}function tT(t,e){var n=e&-e;return n=n&42?1:T0(n),n&(t.suspendedLanes|e)?0:n}function T0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function S0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function nT(){var t=Ve.p;return t!==0?t:(t=window.event,t===void 0?32:Tw(t.type))}function Py(t,e){var n=Ve.p;try{return Ve.p=t,e()}finally{Ve.p=n}}var wi=Math.random().toString(36).slice(2),Jt="__reactFiber$"+wi,En="__reactProps$"+wi,zo="__reactContainer$"+wi,Lp="__reactEvents$"+wi,nR="__reactListeners$"+wi,sR="__reactHandles$"+wi,Dy="__reactResources$"+wi,Qc="__reactMarker$"+wi;function w0(t){delete t[Jt],delete t[En],delete t[Lp],delete t[nR],delete t[sR]}function Gr(t){var e=t[Jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zo]||n[Jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fb(t);t!==null;){if(n=t[Jt])return n;t=Fb(t)}return e}t=n,n=t.parentNode}return null}function Fo(t){if(t=t[Jt]||t[zo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Gl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error($(33))}function to(t){var e=t[Dy];return e||(e=t[Dy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function zt(t){t[Qc]=!0}var sT=new Set,aT={};function gr(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(aT[t]=e,t=0;t<e.length;t++)sT.add(e[t])}var aR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ky={},Ly={};function iR(t){return kp.call(Ly,t)?!0:kp.call(ky,t)?!1:aR.test(t)?Ly[t]=!0:(ky[t]=!0,!1)}function gu(t,e,n){if(iR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Gd(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Hs(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rR(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vp(t){if(!t._valueTracker){var e=iT(t)?"checked":"value";t._valueTracker=rR(t,e,""+t[e])}}function rT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=iT(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var oR=/[\n"\\]/g;function Yn(t){return t.replace(oR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Up(t,e,n,s,a,i,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Bn(e)):t.value!==""+Bn(e)&&(t.value=""+Bn(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?Op(t,o,Bn(e)):n!=null?Op(t,o,Bn(n)):s!=null&&t.removeAttribute("value"),a==null&&i!=null&&(t.defaultChecked=!!i),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Bn(l):t.removeAttribute("name")}function oT(t,e,n,s,a,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){Vp(t);return}n=n!=null?""+Bn(n):"",e=e!=null?""+Bn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??a,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),Vp(t)}function Op(t,e,n){e==="number"&&Ku(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function no(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Bn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function lT(t,e,n){if(e!=null&&(e=""+Bn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Bn(n):""}function cT(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error($(92));if(Fl(s)){if(1<s.length)throw Error($(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Bn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Vp(t)}function yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vy(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||lR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function dT(t,e,n){if(e!=null&&typeof e!="object")throw Error($(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var a in e)s=e[a],e.hasOwnProperty(a)&&n[a]!==s&&Vy(t,a,s)}else for(var i in e)e.hasOwnProperty(i)&&Vy(t,i,e[i])}function A0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xu(t){return dR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ea(){}var zp=null;function I0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qr=null,so=null;function Uy(t){var e=Fo(t);if(e&&(t=e.stateNode)){var n=t[En]||null;e:switch(t=e.stateNode,e.type){case"input":if(Up(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=s[En]||null;if(!a)throw Error($(90));Up(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&rT(s)}break e;case"textarea":lT(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&no(t,!!n.multiple,e,!1)}}}var If=!1;function uT(t,e,n){if(If)return t(e,n);If=!0;try{var s=t(e);return s}finally{if(If=!1,(qr!==null||so!==null)&&(mh(),qr&&(e=qr,t=so,so=qr=null,Uy(e),t)))for(e=0;e<t.length;e++)Uy(t[e])}}function bc(t,e){var n=t.stateNode;if(n===null)return null;var s=n[En]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fp=!1;if(ma)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){Fp=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{Fp=!1}var Qa=null,j0=null,vu=null;function mT(){if(vu)return vu;var t,e=j0,n=e.length,s,a="value"in Qa?Qa.value:Qa.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===a[i-s];s++);return vu=a.slice(t,1<s?1-s:void 0)}function yu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qd(){return!0}function Oy(){return!1}function Nn(t){function e(n,s,a,i,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qd:Oy,this.isPropagationStopped=Oy,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qd)},persist:function(){},isPersistent:qd}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=Nn(xr),Xc=tt({},xr,{view:0,detail:0}),uR=Nn(Xc),jf,Rf,Ml,nh=tt({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ml&&(Ml&&t.type==="mousemove"?(jf=t.screenX-Ml.screenX,Rf=t.screenY-Ml.screenY):Rf=jf=0,Ml=t),jf)},movementY:function(t){return"movementY"in t?t.movementY:Rf}}),zy=Nn(nh),mR=tt({},nh,{dataTransfer:0}),hR=Nn(mR),fR=tt({},Xc,{relatedTarget:0}),Mf=Nn(fR),pR=tt({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),gR=Nn(pR),xR=tt({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vR=Nn(xR),yR=tt({},xr,{data:0}),Fy=Nn(yR),bR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_R={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ER={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ER[t])?!!e[t]:!1}function R0(){return NR}var CR=tt({},Xc,{key:function(t){if(t.key){var e=bR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_R[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(t){return t.type==="keypress"?yu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TR=Nn(CR),SR=tt({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=Nn(SR),wR=tt({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),AR=Nn(wR),IR=tt({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jR=Nn(IR),RR=tt({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MR=Nn(RR),PR=tt({},xr,{newState:0,oldState:0}),DR=Nn(PR),kR=[9,13,27,32],M0=ma&&"CompositionEvent"in window,Zl=null;ma&&"documentMode"in document&&(Zl=document.documentMode);var LR=ma&&"TextEvent"in window&&!Zl,hT=ma&&(!M0||Zl&&8<Zl&&11>=Zl),qy=" ",By=!1;function fT(t,e){switch(t){case"keyup":return kR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Br=!1;function VR(t,e){switch(t){case"compositionend":return pT(e);case"keypress":return e.which!==32?null:(By=!0,qy);case"textInput":return t=e.data,t===qy&&By?null:t;default:return null}}function UR(t,e){if(Br)return t==="compositionend"||!M0&&fT(t,e)?(t=mT(),vu=j0=Qa=null,Br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hT&&e.locale!=="ko"?null:e.data;default:return null}}var OR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OR[t.type]:e==="textarea"}function gT(t,e,n,s){qr?so?so.push(s):so=[s]:qr=s,e=hm(e,"onChange"),0<e.length&&(n=new th("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ec=null,_c=null;function zR(t){uw(t,0)}function sh(t){var e=Gl(t);if(rT(e))return t}function $y(t,e){if(t==="change")return e}var xT=!1;if(ma){var Pf;if(ma){var Df="oninput"in document;if(!Df){var Yy=document.createElement("div");Yy.setAttribute("oninput","return;"),Df=typeof Yy.oninput=="function"}Pf=Df}else Pf=!1;xT=Pf&&(!document.documentMode||9<document.documentMode)}function Jy(){ec&&(ec.detachEvent("onpropertychange",vT),_c=ec=null)}function vT(t){if(t.propertyName==="value"&&sh(_c)){var e=[];gT(e,_c,t,I0(t)),uT(zR,e)}}function FR(t,e,n){t==="focusin"?(Jy(),ec=e,_c=n,ec.attachEvent("onpropertychange",vT)):t==="focusout"&&Jy()}function GR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sh(_c)}function qR(t,e){if(t==="click")return sh(e)}function BR(t,e){if(t==="input"||t==="change")return sh(e)}function HR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:HR;function Ec(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!kp.call(e,a)||!Un(t[a],e[a]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qy(t,e){var n=Ky(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ky(n)}}function yT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Ku(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ku(t.document)}return e}function P0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var $R=ma&&"documentMode"in document&&11>=document.documentMode,Hr=null,Gp=null,tc=null,qp=!1;function Xy(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qp||Hr==null||Hr!==Ku(s)||(s=Hr,"selectionStart"in s&&P0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tc&&Ec(tc,s)||(tc=s,s=hm(Gp,"onSelect"),0<s.length&&(e=new th("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Hr)))}function Gi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $r={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},kf={},_T={};ma&&(_T=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function vr(t){if(kf[t])return kf[t];if(!$r[t])return t;var e=$r[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _T)return kf[t]=e[n];return t}var ET=vr("animationend"),NT=vr("animationiteration"),CT=vr("animationstart"),YR=vr("transitionrun"),JR=vr("transitionstart"),KR=vr("transitioncancel"),TT=vr("transitionend"),ST=new Map,Bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bp.push("scrollEnd");function Es(t,e){ST.set(t,e),gr(e,[t])}var Qu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qn=[],Yr=0,D0=0;function ah(){for(var t=Yr,e=D0=Yr=0;e<t;){var n=qn[e];qn[e++]=null;var s=qn[e];qn[e++]=null;var a=qn[e];qn[e++]=null;var i=qn[e];if(qn[e++]=null,s!==null&&a!==null){var o=s.pending;o===null?a.next=a:(a.next=o.next,o.next=a),s.pending=a}i!==0&&wT(n,a,i)}}function ih(t,e,n,s){qn[Yr++]=t,qn[Yr++]=e,qn[Yr++]=n,qn[Yr++]=s,D0|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function k0(t,e,n,s){return ih(t,e,n,s),Xu(t)}function yr(t,e){return ih(t,null,null,e),Xu(t)}function wT(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var a=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(a=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,a&&e!==null&&(a=31-kn(n),t=i.hiddenUpdates,s=t[a],s===null?t[a]=[e]:s.push(e),e.lane=n|536870912),i):null}function Xu(t){if(50<dc)throw dc=0,ug=null,Error($(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Jr={};function QR(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,s){return new QR(t,e,n,s)}function L0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ia(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function AT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function bu(t,e,n,s,a,i){var o=0;if(s=t,typeof t=="function")L0(t)&&(o=1);else if(typeof t=="string")o=tP(t,n,Ds.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Rp:return t=wn(31,n,e,a),t.elementType=Rp,t.lanes=i,t;case zr:return er(n.children,a,i,e);case YC:o=8,a|=24;break;case Ap:return t=wn(12,n,e,a|2),t.elementType=Ap,t.lanes=i,t;case Ip:return t=wn(13,n,e,a),t.elementType=Ip,t.lanes=i,t;case jp:return t=wn(19,n,e,a),t.elementType=jp,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zs:o=10;break e;case JC:o=9;break e;case E0:o=11;break e;case N0:o=14;break e;case Oa:o=16,s=null;break e}o=29,n=Error($(130,t===null?"null":typeof t,"")),s=null}return e=wn(o,n,e,a),e.elementType=t,e.type=s,e.lanes=i,e}function er(t,e,n,s){return t=wn(7,t,s,e),t.lanes=n,t}function Lf(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function IT(t){var e=wn(18,null,null,0);return e.stateNode=t,e}function Vf(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Wy=new WeakMap;function Jn(t,e){if(typeof t=="object"&&t!==null){var n=Wy.get(t);return n!==void 0?n:(e={value:t,source:e,stack:My(e)},Wy.set(t,e),e)}return{value:t,source:e,stack:My(e)}}var Kr=[],Qr=0,Wu=null,Nc=0,Hn=[],$n=0,gi=null,js=1,Rs="";function Qs(t,e){Kr[Qr++]=Nc,Kr[Qr++]=Wu,Wu=t,Nc=e}function jT(t,e,n){Hn[$n++]=js,Hn[$n++]=Rs,Hn[$n++]=gi,gi=t;var s=js;t=Rs;var a=32-kn(s)-1;s&=~(1<<a),n+=1;var i=32-kn(e)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,js=1<<32-kn(e)+a|n<<a|s,Rs=i+t}else js=1<<i|n<<a|s,Rs=t}function V0(t){t.return!==null&&(Qs(t,1),jT(t,1,0))}function U0(t){for(;t===Wu;)Wu=Kr[--Qr],Kr[Qr]=null,Nc=Kr[--Qr],Kr[Qr]=null;for(;t===gi;)gi=Hn[--$n],Hn[$n]=null,Rs=Hn[--$n],Hn[$n]=null,js=Hn[--$n],Hn[$n]=null}function RT(t,e){Hn[$n++]=js,Hn[$n++]=Rs,Hn[$n++]=gi,js=e.id,Rs=e.overflow,gi=t}var Kt=null,We=null,Ae=!1,ni=null,Kn=!1,Hp=Error($(519));function xi(t){var e=Error($(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cc(Jn(e,t)),Hp}function Zy(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Jt]=t,e[En]=s,n){case"dialog":_e("cancel",e),_e("close",e);break;case"iframe":case"object":case"embed":_e("load",e);break;case"video":case"audio":for(n=0;n<Ac.length;n++)_e(Ac[n],e);break;case"source":_e("error",e);break;case"img":case"image":case"link":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"input":_e("invalid",e),oT(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":_e("invalid",e);break;case"textarea":_e("invalid",e),cT(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||hw(e.textContent,n)?(s.popover!=null&&(_e("beforetoggle",e),_e("toggle",e)),s.onScroll!=null&&_e("scroll",e),s.onScrollEnd!=null&&_e("scrollend",e),s.onClick!=null&&(e.onclick=ea),e=!0):e=!1,e||xi(t,!0)}function eb(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Kt=Kt.return}}function Ar(t){if(t!==Kt)return!1;if(!Ae)return eb(t),Ae=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||gg(t.type,t.memoizedProps)),n=!n),n&&We&&xi(t),eb(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));We=zb(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));We=zb(t)}else e===27?(e=We,Ai(t.type)?(t=bg,bg=null,We=t):We=e):We=Kt?Xn(t.stateNode.nextSibling):null;return!0}function ar(){We=Kt=null,Ae=!1}function Uf(){var t=ni;return t!==null&&(vn===null?vn=t:vn.push.apply(vn,t),ni=null),t}function Cc(t){ni===null?ni=[t]:ni.push(t)}var $p=zs(null),br=null,ta=null;function Ga(t,e,n){Je($p,e._currentValue),e._currentValue=n}function ra(t){t._currentValue=$p.current,Gt($p)}function Yp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Jp(t,e,n,s){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){var o=a.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=a;for(var c=0;c<e.length;c++)if(l.context===e[c]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Yp(i.return,n,t),s||(o=null);break e}i=l.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error($(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),Yp(o,n,t),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Go(t,e,n,s){t=null;for(var a=e,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error($(387));if(o=o.memoizedProps,o!==null){var l=a.type;Un(a.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(a===Hu.current){if(o=a.alternate,o===null)throw Error($(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(jc):t=[jc])}a=a.return}t!==null&&Jp(e,t,n,s),e.flags|=262144}function Zu(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ir(t){br=t,ta=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return MT(br,t)}function Bd(t,e){return br===null&&ir(t),MT(t,e)}function MT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ta===null){if(t===null)throw Error($(308));ta=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ta=ta.next=e;return n}var XR=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},WR=Dt.unstable_scheduleCallback,ZR=Dt.unstable_NormalPriority,St={$$typeof:Zs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function O0(){return{controller:new XR,data:new Map,refCount:0}}function Wc(t){t.refCount--,t.refCount===0&&WR(ZR,function(){t.controller.abort()})}var nc=null,Kp=0,bo=0,ao=null;function eM(t,e){if(nc===null){var n=nc=[];Kp=0,bo=dx(),ao={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Kp++,e.then(tb,tb),e}function tb(){if(--Kp===0&&nc!==null){ao!==null&&(ao.status="fulfilled");var t=nc;nc=null,bo=0,ao=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function tM(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(s.status="rejected",s.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),s}var nb=ce.S;ce.S=function(t,e){$S=Pn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&eM(t,e),nb!==null&&nb(t,e)};var tr=zs(null);function z0(){var t=tr.current;return t!==null?t:He.pooledCache}function _u(t,e){e===null?Je(tr,tr.current):Je(tr,e.pool)}function PT(){var t=z0();return t===null?null:{parent:St._currentValue,pool:t}}var qo=Error($(460)),F0=Error($(474)),rh=Error($(542)),em={then:function(){}};function sb(t){return t=t.status,t==="fulfilled"||t==="rejected"}function DT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ea,ea),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ib(t),t;default:if(typeof e.status=="string")e.then(ea,ea);else{if(t=He,t!==null&&100<t.shellSuspendCounter)throw Error($(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=s}},function(s){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ib(t),t}throw nr=e,qo}}function $i(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(nr=n,qo):n}}var nr=null;function ab(){if(nr===null)throw Error($(459));var t=nr;return nr=null,t}function ib(t){if(t===qo||t===rh)throw Error($(483))}var io=null,Tc=0;function Hd(t){var e=Tc;return Tc+=1,io===null&&(io=[]),DT(io,t,e)}function Pl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function $d(t,e){throw e.$$typeof===Fj?Error($(525)):(t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function kT(t){function e(b,N){if(t){var S=b.deletions;S===null?(b.deletions=[N],b.flags|=16):S.push(N)}}function n(b,N){if(!t)return null;for(;N!==null;)e(b,N),N=N.sibling;return null}function s(b){for(var N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(b,N){return b=ia(b,N),b.index=0,b.sibling=null,b}function i(b,N,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<N?(b.flags|=67108866,N):S):(b.flags|=67108866,N)):(b.flags|=1048576,N)}function o(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function l(b,N,S,D){return N===null||N.tag!==6?(N=Lf(S,b.mode,D),N.return=b,N):(N=a(N,S),N.return=b,N)}function c(b,N,S,D){var V=S.type;return V===zr?m(b,N,S.props.children,D,S.key):N!==null&&(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Oa&&$i(V)===N.type)?(N=a(N,S.props),Pl(N,S),N.return=b,N):(N=bu(S.type,S.key,S.props,null,b.mode,D),Pl(N,S),N.return=b,N)}function d(b,N,S,D){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=Vf(S,b.mode,D),N.return=b,N):(N=a(N,S.children||[]),N.return=b,N)}function m(b,N,S,D,V){return N===null||N.tag!==7?(N=er(S,b.mode,D,V),N.return=b,N):(N=a(N,S),N.return=b,N)}function p(b,N,S){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Lf(""+N,b.mode,S),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ud:return S=bu(N.type,N.key,N.props,null,b.mode,S),Pl(S,N),S.return=b,S;case zl:return N=Vf(N,b.mode,S),N.return=b,N;case Oa:return N=$i(N),p(b,N,S)}if(Fl(N)||jl(N))return N=er(N,b.mode,S,null),N.return=b,N;if(typeof N.then=="function")return p(b,Hd(N),S);if(N.$$typeof===Zs)return p(b,Bd(b,N),S);$d(b,N)}return null}function g(b,N,S,D){var V=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return V!==null?null:l(b,N,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ud:return S.key===V?c(b,N,S,D):null;case zl:return S.key===V?d(b,N,S,D):null;case Oa:return S=$i(S),g(b,N,S,D)}if(Fl(S)||jl(S))return V!==null?null:m(b,N,S,D,null);if(typeof S.then=="function")return g(b,N,Hd(S),D);if(S.$$typeof===Zs)return g(b,N,Bd(b,S),D);$d(b,S)}return null}function x(b,N,S,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return b=b.get(S)||null,l(N,b,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ud:return b=b.get(D.key===null?S:D.key)||null,c(N,b,D,V);case zl:return b=b.get(D.key===null?S:D.key)||null,d(N,b,D,V);case Oa:return D=$i(D),x(b,N,S,D,V)}if(Fl(D)||jl(D))return b=b.get(S)||null,m(N,b,D,V,null);if(typeof D.then=="function")return x(b,N,S,Hd(D),V);if(D.$$typeof===Zs)return x(b,N,S,Bd(N,D),V);$d(N,D)}return null}function y(b,N,S,D){for(var V=null,k=null,j=N,_=N=0,I=null;j!==null&&_<S.length;_++){j.index>_?(I=j,j=null):I=j.sibling;var C=g(b,j,S[_],D);if(C===null){j===null&&(j=I);break}t&&j&&C.alternate===null&&e(b,j),N=i(C,N,_),k===null?V=C:k.sibling=C,k=C,j=I}if(_===S.length)return n(b,j),Ae&&Qs(b,_),V;if(j===null){for(;_<S.length;_++)j=p(b,S[_],D),j!==null&&(N=i(j,N,_),k===null?V=j:k.sibling=j,k=j);return Ae&&Qs(b,_),V}for(j=s(j);_<S.length;_++)I=x(j,b,_,S[_],D),I!==null&&(t&&I.alternate!==null&&j.delete(I.key===null?_:I.key),N=i(I,N,_),k===null?V=I:k.sibling=I,k=I);return t&&j.forEach(function(E){return e(b,E)}),Ae&&Qs(b,_),V}function T(b,N,S,D){if(S==null)throw Error($(151));for(var V=null,k=null,j=N,_=N=0,I=null,C=S.next();j!==null&&!C.done;_++,C=S.next()){j.index>_?(I=j,j=null):I=j.sibling;var E=g(b,j,C.value,D);if(E===null){j===null&&(j=I);break}t&&j&&E.alternate===null&&e(b,j),N=i(E,N,_),k===null?V=E:k.sibling=E,k=E,j=I}if(C.done)return n(b,j),Ae&&Qs(b,_),V;if(j===null){for(;!C.done;_++,C=S.next())C=p(b,C.value,D),C!==null&&(N=i(C,N,_),k===null?V=C:k.sibling=C,k=C);return Ae&&Qs(b,_),V}for(j=s(j);!C.done;_++,C=S.next())C=x(j,b,_,C.value,D),C!==null&&(t&&C.alternate!==null&&j.delete(C.key===null?_:C.key),N=i(C,N,_),k===null?V=C:k.sibling=C,k=C);return t&&j.forEach(function(P){return e(b,P)}),Ae&&Qs(b,_),V}function A(b,N,S,D){if(typeof S=="object"&&S!==null&&S.type===zr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ud:e:{for(var V=S.key;N!==null;){if(N.key===V){if(V=S.type,V===zr){if(N.tag===7){n(b,N.sibling),D=a(N,S.props.children),D.return=b,b=D;break e}}else if(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Oa&&$i(V)===N.type){n(b,N.sibling),D=a(N,S.props),Pl(D,S),D.return=b,b=D;break e}n(b,N);break}else e(b,N);N=N.sibling}S.type===zr?(D=er(S.props.children,b.mode,D,S.key),D.return=b,b=D):(D=bu(S.type,S.key,S.props,null,b.mode,D),Pl(D,S),D.return=b,b=D)}return o(b);case zl:e:{for(V=S.key;N!==null;){if(N.key===V)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){n(b,N.sibling),D=a(N,S.children||[]),D.return=b,b=D;break e}else{n(b,N);break}else e(b,N);N=N.sibling}D=Vf(S,b.mode,D),D.return=b,b=D}return o(b);case Oa:return S=$i(S),A(b,N,S,D)}if(Fl(S))return y(b,N,S,D);if(jl(S)){if(V=jl(S),typeof V!="function")throw Error($(150));return S=V.call(S),T(b,N,S,D)}if(typeof S.then=="function")return A(b,N,Hd(S),D);if(S.$$typeof===Zs)return A(b,N,Bd(b,S),D);$d(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,N!==null&&N.tag===6?(n(b,N.sibling),D=a(N,S),D.return=b,b=D):(n(b,N),D=Lf(S,b.mode,D),D.return=b,b=D),o(b)):n(b,N)}return function(b,N,S,D){try{Tc=0;var V=A(b,N,S,D);return io=null,V}catch(j){if(j===qo||j===rh)throw j;var k=wn(29,j,null,b.mode);return k.lanes=D,k.return=b,k}finally{}}}var rr=kT(!0),LT=kT(!1),za=!1;function G0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function si(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ai(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Le&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,e=Xu(t),wT(t,null,n),e}return ih(t,s,e,n),Xu(t)}function sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,eT(t,n)}}function Of(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Xp=!1;function ac(){if(Xp){var t=ao;if(t!==null)throw t}}function ic(t,e,n,s){Xp=!1;var a=t.updateQueue;za=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;o=0,m=d=c=null,l=i;do{var g=l.lane&-536870913,x=g!==l.lane;if(x?(Se&g)===g:(s&g)===g){g!==0&&g===bo&&(Xp=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var y=t,T=l;g=e;var A=n;switch(T.tag){case 1:if(y=T.payload,typeof y=="function"){p=y.call(A,p,g);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=T.payload,g=typeof y=="function"?y.call(A,p,g):y,g==null)break e;p=tt({},p,g);break e;case 2:za=!0}}g=l.callback,g!==null&&(t.flags|=64,x&&(t.flags|=8192),x=a.callbacks,x===null?a.callbacks=[g]:x.push(g))}else x={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=x,c=p):m=m.next=x,o|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;x=l,l=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);m===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,i===null&&(a.shared.lanes=0),yi|=o,t.lanes=o,t.memoizedState=p}}function VT(t,e){if(typeof t!="function")throw Error($(191,t));t.call(e)}function UT(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)VT(n[t],e)}var _o=zs(null),tm=zs(0);function rb(t,e){t=ga,Je(tm,t),Je(_o,e),ga=t|e.baseLanes}function Wp(){Je(tm,ga),Je(_o,_o.current)}function q0(){ga=tm.current,Gt(_o),Gt(tm)}var On=zs(null),Qn=null;function qa(t){var e=t.alternate;Je(vt,vt.current&1),Je(On,t),Qn===null&&(e===null||_o.current!==null||e.memoizedState!==null)&&(Qn=t)}function Zp(t){Je(vt,vt.current),Je(On,t),Qn===null&&(Qn=t)}function OT(t){t.tag===22?(Je(vt,vt.current),Je(On,t),Qn===null&&(Qn=t)):Ba()}function Ba(){Je(vt,vt.current),Je(On,On.current)}function Sn(t){Gt(On),Qn===t&&(Qn=null),Gt(vt)}var vt=zs(0);function nm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||vg(n)||yg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ha=0,ve=null,Ge=null,Ct=null,sm=!1,ro=!1,or=!1,am=0,Sc=0,oo=null,nM=0;function ft(){throw Error($(321))}function B0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function H0(t,e,n,s,a,i){return ha=i,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ce.H=t===null||t.memoizedState===null?gS:nx,or=!1,i=n(s,a),or=!1,ro&&(i=FT(e,n,s,a)),zT(t),i}function zT(t){ce.H=wc;var e=Ge!==null&&Ge.next!==null;if(ha=0,Ct=Ge=ve=null,sm=!1,Sc=0,oo=null,e)throw Error($(300));t===null||At||(t=t.dependencies,t!==null&&Zu(t)&&(At=!0))}function FT(t,e,n,s){ve=t;var a=0;do{if(ro&&(oo=null),Sc=0,ro=!1,25<=a)throw Error($(301));if(a+=1,Ct=Ge=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ce.H=xS,i=e(n,s)}while(ro);return i}function sM(){var t=ce.H,e=t.useState()[0];return e=typeof e.then=="function"?Zc(e):e,t=t.useState()[0],(Ge!==null?Ge.memoizedState:null)!==t&&(ve.flags|=1024),e}function $0(){var t=am!==0;return am=0,t}function Y0(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function J0(t){if(sm){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}sm=!1}ha=0,Ct=Ge=ve=null,ro=!1,Sc=am=0,oo=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ve.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function yt(){if(Ge===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Ct===null?ve.memoizedState:Ct.next;if(e!==null)Ct=e,Ge=t;else{if(t===null)throw ve.alternate===null?Error($(467)):Error($(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ct===null?ve.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(t){var e=Sc;return Sc+=1,oo===null&&(oo=[]),t=DT(oo,t,e),e=ve,(Ct===null?e.memoizedState:Ct.next)===null&&(e=e.alternate,ce.H=e===null||e.memoizedState===null?gS:nx),t}function lh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zc(t);if(t.$$typeof===Zs)return Qt(t)}throw Error($(438,String(t)))}function K0(t){var e=null,n=ve.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ve.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=oh(),ve.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=Gj;return e.index++,n}function fa(t,e){return typeof e=="function"?e(t):e}function Eu(t){var e=yt();return Q0(e,Ge,t)}function Q0(t,e,n){var s=t.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=n;var a=t.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}e.baseQueue=a=i,s.pending=null}if(i=t.baseState,a===null)t.memoizedState=i;else{e=a.next;var l=o=null,c=null,d=e,m=!1;do{var p=d.lane&-536870913;if(p!==d.lane?(Se&p)===p:(ha&p)===p){var g=d.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p===bo&&(m=!0);else if((ha&g)===g){d=d.next,g===bo&&(m=!0);continue}else p={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,o=i):c=c.next=p,ve.lanes|=g,yi|=g;p=d.action,or&&n(i,p),i=d.hasEagerState?d.eagerState:n(i,p)}else g={lane:p,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=g,o=i):c=c.next=g,ve.lanes|=p,yi|=p;d=d.next}while(d!==null&&d!==e);if(c===null?o=i:c.next=l,!Un(i,t.memoizedState)&&(At=!0,m&&(n=ao,n!==null)))throw n;t.memoizedState=i,t.baseState=o,t.baseQueue=c,s.lastRenderedState=i}return a===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function zf(t){var e=yt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Un(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function GT(t,e,n){var s=ve,a=yt(),i=Ae;if(i){if(n===void 0)throw Error($(407));n=n()}else n=e();var o=!Un((Ge||a).memoizedState,n);if(o&&(a.memoizedState=n,At=!0),a=a.queue,X0(HT.bind(null,s,a,t),[t]),a.getSnapshot!==e||o||Ct!==null&&Ct.memoizedState.tag&1){if(s.flags|=2048,Eo(9,{destroy:void 0},BT.bind(null,s,a,n,e),null),He===null)throw Error($(349));i||ha&127||qT(s,e,n)}return n}function qT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e=oh(),ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BT(t,e,n,s){e.value=n,e.getSnapshot=s,$T(e)&&YT(t)}function HT(t,e,n){return n(function(){$T(e)&&YT(t)})}function $T(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function YT(t){var e=yr(t,2);e!==null&&_n(e,t,2)}function eg(t){var e=ln();if(typeof t=="function"){var n=t;if(t=n(),or){Ka(!0);try{n()}finally{Ka(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:t},e}function JT(t,e,n,s){return t.baseState=n,Q0(t,Ge,typeof s=="function"?s:fa)}function aM(t,e,n,s,a){if(dh(t))throw Error($(485));if(t=e.action,t!==null){var i={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ce.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,KT(e,i)):(i.next=n.next,e.pending=n.next=i)}}function KT(t,e){var n=e.action,s=e.payload,a=t.state;if(e.isTransition){var i=ce.T,o={};ce.T=o;try{var l=n(a,s),c=ce.S;c!==null&&c(o,l),ob(t,e,l)}catch(d){tg(t,e,d)}finally{i!==null&&o.types!==null&&(i.types=o.types),ce.T=i}}else try{i=n(a,s),ob(t,e,i)}catch(d){tg(t,e,d)}}function ob(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){lb(t,e,s)},function(s){return tg(t,e,s)}):lb(t,e,n)}function lb(t,e,n){e.status="fulfilled",e.value=n,QT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,KT(t,n)))}function tg(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,QT(e),e=e.next;while(e!==s)}t.action=null}function QT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function XT(t,e){return e}function cb(t,e){if(Ae){var n=He.formState;if(n!==null){e:{var s=ve;if(Ae){if(We){t:{for(var a=We,i=Kn;a.nodeType!==8;){if(!i){a=null;break t}if(a=Xn(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){We=Xn(a.nextSibling),s=a.data==="F!";break e}}xi(s)}s=!1}s&&(e=n[0])}}return n=ln(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XT,lastRenderedState:e},n.queue=s,n=hS.bind(null,ve,s),s.dispatch=n,s=eg(!1),i=tx.bind(null,ve,!1,s.queue),s=ln(),a={state:e,dispatch:null,action:t,pending:null},s.queue=a,n=aM.bind(null,ve,a,i,n),a.dispatch=n,s.memoizedState=t,[e,n,!1]}function db(t){var e=yt();return WT(e,Ge,t)}function WT(t,e,n){if(e=Q0(t,e,XT)[0],t=Eu(fa)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Zc(e)}catch(o){throw o===qo?rh:o}else s=e;e=yt();var a=e.queue,i=a.dispatch;return n!==e.memoizedState&&(ve.flags|=2048,Eo(9,{destroy:void 0},iM.bind(null,a,n),null)),[s,i,t]}function iM(t,e){t.action=e}function ub(t){var e=yt(),n=Ge;if(n!==null)return WT(e,n,t);yt(),e=e.memoizedState,n=yt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Eo(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ve.updateQueue,e===null&&(e=oh(),ve.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function ZT(){return yt().memoizedState}function Nu(t,e,n,s){var a=ln();ve.flags|=t,a.memoizedState=Eo(1|e,{destroy:void 0},n,s===void 0?null:s)}function ch(t,e,n,s){var a=yt();s=s===void 0?null:s;var i=a.memoizedState.inst;Ge!==null&&s!==null&&B0(s,Ge.memoizedState.deps)?a.memoizedState=Eo(e,i,n,s):(ve.flags|=t,a.memoizedState=Eo(1|e,i,n,s))}function mb(t,e){Nu(8390656,8,t,e)}function X0(t,e){ch(2048,8,t,e)}function rM(t){ve.flags|=4;var e=ve.updateQueue;if(e===null)e=oh(),ve.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function eS(t){var e=yt().memoizedState;return rM({ref:e,nextImpl:t}),function(){if(Le&2)throw Error($(440));return e.impl.apply(void 0,arguments)}}function tS(t,e){return ch(4,2,t,e)}function nS(t,e){return ch(4,4,t,e)}function sS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aS(t,e,n){n=n!=null?n.concat([t]):null,ch(4,4,sS.bind(null,e,t),n)}function W0(){}function iS(t,e){var n=yt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&B0(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function rS(t,e){var n=yt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&B0(e,s[1]))return s[0];if(s=t(),or){Ka(!0);try{t()}finally{Ka(!1)}}return n.memoizedState=[s,e],s}function Z0(t,e,n){return n===void 0||ha&1073741824&&!(Se&261930)?t.memoizedState=e:(t.memoizedState=n,t=JS(),ve.lanes|=t,yi|=t,n)}function oS(t,e,n,s){return Un(n,e)?n:_o.current!==null?(t=Z0(t,n,s),Un(t,e)||(At=!0),t):!(ha&42)||ha&1073741824&&!(Se&261930)?(At=!0,t.memoizedState=n):(t=JS(),ve.lanes|=t,yi|=t,e)}function lS(t,e,n,s,a){var i=Ve.p;Ve.p=i!==0&&8>i?i:8;var o=ce.T,l={};ce.T=l,tx(t,!1,e,n);try{var c=a(),d=ce.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=tM(c,s);rc(t,e,m,Ln(t))}else rc(t,e,s,Ln(t))}catch(p){rc(t,e,{then:function(){},status:"rejected",reason:p},Ln())}finally{Ve.p=i,o!==null&&l.types!==null&&(o.types=l.types),ce.T=o}}function oM(){}function ng(t,e,n,s){if(t.tag!==5)throw Error($(476));var a=cS(t).queue;lS(t,a,e,Zi,n===null?oM:function(){return dS(t),n(s)})}function cS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Zi,baseState:Zi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:Zi},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function dS(t){var e=cS(t);e.next===null&&(e=t.alternate.memoizedState),rc(t,e.next.queue,{},Ln())}function ex(){return Qt(jc)}function uS(){return yt().memoizedState}function mS(){return yt().memoizedState}function lM(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ln();t=si(n);var s=ai(e,t,n);s!==null&&(_n(s,e,n),sc(s,e,n)),e={cache:O0()},t.payload=e;return}e=e.return}}function cM(t,e,n){var s=Ln();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},dh(t)?fS(e,n):(n=k0(t,e,n,s),n!==null&&(_n(n,t,s),pS(n,e,s)))}function hS(t,e,n){var s=Ln();rc(t,e,n,s)}function rc(t,e,n,s){var a={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(dh(t))fS(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Un(l,o))return ih(t,e,a,0),He===null&&ah(),!1}catch{}finally{}if(n=k0(t,e,a,s),n!==null)return _n(n,t,s),pS(n,e,s),!0}return!1}function tx(t,e,n,s){if(s={lane:2,revertLane:dx(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},dh(t)){if(e)throw Error($(479))}else e=k0(t,n,s,2),e!==null&&_n(e,t,2)}function dh(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function fS(t,e){ro=sm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pS(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,eT(t,n)}}var wc={readContext:Qt,use:lh,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};wc.useEffectEvent=ft;var gS={readContext:Qt,use:lh,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:mb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Nu(4194308,4,sS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nu(4194308,4,t,e)},useInsertionEffect:function(t,e){Nu(4,2,t,e)},useMemo:function(t,e){var n=ln();e=e===void 0?null:e;var s=t();if(or){Ka(!0);try{t()}finally{Ka(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=ln();if(n!==void 0){var a=n(e);if(or){Ka(!0);try{n(e)}finally{Ka(!1)}}}else a=e;return s.memoizedState=s.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},s.queue=t,t=t.dispatch=cM.bind(null,ve,t),[s.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:function(t){t=eg(t);var e=t.queue,n=hS.bind(null,ve,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:W0,useDeferredValue:function(t,e){var n=ln();return Z0(n,t,e)},useTransition:function(){var t=eg(!1);return t=lS.bind(null,ve,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ve,a=ln();if(Ae){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),He===null)throw Error($(349));Se&127||qT(s,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,mb(HT.bind(null,s,i,t),[t]),s.flags|=2048,Eo(9,{destroy:void 0},BT.bind(null,s,i,n,e),null),n},useId:function(){var t=ln(),e=He.identifierPrefix;if(Ae){var n=Rs,s=js;n=(s&~(1<<32-kn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=am++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=nM++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:ex,useFormState:cb,useActionState:cb,useOptimistic:function(t){var e=ln();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=tx.bind(null,ve,!0,n),n.dispatch=e,[t,e]},useMemoCache:K0,useCacheRefresh:function(){return ln().memoizedState=lM.bind(null,ve)},useEffectEvent:function(t){var e=ln(),n={impl:t};return e.memoizedState=n,function(){if(Le&2)throw Error($(440));return n.impl.apply(void 0,arguments)}}},nx={readContext:Qt,use:lh,useCallback:iS,useContext:Qt,useEffect:X0,useImperativeHandle:aS,useInsertionEffect:tS,useLayoutEffect:nS,useMemo:rS,useReducer:Eu,useRef:ZT,useState:function(){return Eu(fa)},useDebugValue:W0,useDeferredValue:function(t,e){var n=yt();return oS(n,Ge.memoizedState,t,e)},useTransition:function(){var t=Eu(fa)[0],e=yt().memoizedState;return[typeof t=="boolean"?t:Zc(t),e]},useSyncExternalStore:GT,useId:uS,useHostTransitionStatus:ex,useFormState:db,useActionState:db,useOptimistic:function(t,e){var n=yt();return JT(n,Ge,t,e)},useMemoCache:K0,useCacheRefresh:mS};nx.useEffectEvent=eS;var xS={readContext:Qt,use:lh,useCallback:iS,useContext:Qt,useEffect:X0,useImperativeHandle:aS,useInsertionEffect:tS,useLayoutEffect:nS,useMemo:rS,useReducer:zf,useRef:ZT,useState:function(){return zf(fa)},useDebugValue:W0,useDeferredValue:function(t,e){var n=yt();return Ge===null?Z0(n,t,e):oS(n,Ge.memoizedState,t,e)},useTransition:function(){var t=zf(fa)[0],e=yt().memoizedState;return[typeof t=="boolean"?t:Zc(t),e]},useSyncExternalStore:GT,useId:uS,useHostTransitionStatus:ex,useFormState:ub,useActionState:ub,useOptimistic:function(t,e){var n=yt();return Ge!==null?JT(n,Ge,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:K0,useCacheRefresh:mS};xS.useEffectEvent=eS;function Ff(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sg={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ln(),a=si(s);a.payload=e,n!=null&&(a.callback=n),e=ai(t,a,s),e!==null&&(_n(e,t,s),sc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ln(),a=si(s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ai(t,a,s),e!==null&&(_n(e,t,s),sc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ln(),s=si(n);s.tag=2,e!=null&&(s.callback=e),e=ai(t,s,n),e!==null&&(_n(e,t,n),sc(e,t,n))}};function hb(t,e,n,s,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ec(n,s)||!Ec(a,i):!0}function fb(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&sg.enqueueReplaceState(e,e.state,null)}function lr(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=tt({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}function vS(t){Qu(t)}function yS(t){console.error(t)}function bS(t){Qu(t)}function im(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function pb(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function ag(t,e,n){return n=si(n),n.tag=3,n.payload={element:null},n.callback=function(){im(t,e)},n}function _S(t){return t=si(t),t.tag=3,t}function ES(t,e,n,s){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=s.value;t.payload=function(){return a(i)},t.callback=function(){pb(e,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){pb(e,n,s),typeof a!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function dM(t,e,n,s,a){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Go(e,n,a,!0),n=On.current,n!==null){switch(n.tag){case 31:case 13:return Qn===null?dm():n.alternate===null&&pt===0&&(pt=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===em?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Wf(t,s,a)),!1;case 22:return n.flags|=65536,s===em?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Wf(t,s,a)),!1}throw Error($(435,n.tag))}return Wf(t,s,a),dm(),!1}if(Ae)return e=On.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,s!==Hp&&(t=Error($(422),{cause:s}),Cc(Jn(t,n)))):(s!==Hp&&(e=Error($(423),{cause:s}),Cc(Jn(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,s=Jn(s,n),a=ag(t.stateNode,s,a),Of(t,a),pt!==4&&(pt=2)),!1;var i=Error($(520),{cause:s});if(i=Jn(i,n),cc===null?cc=[i]:cc.push(i),pt!==4&&(pt=2),e===null)return!0;s=Jn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=ag(n.stateNode,s,t),Of(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(ii===null||!ii.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=_S(a),ES(a,t,n,s),Of(n,a),!1}n=n.return}while(n!==null);return!1}var sx=Error($(461)),At=!1;function $t(t,e,n,s){e.child=t===null?LT(e,null,n,s):rr(e,t.child,n,s)}function gb(t,e,n,s,a){n=n.render;var i=e.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return ir(e),s=H0(t,e,n,o,i,a),l=$0(),t!==null&&!At?(Y0(t,e,a),pa(t,e,a)):(Ae&&l&&V0(e),e.flags|=1,$t(t,e,s,a),e.child)}function xb(t,e,n,s,a){if(t===null){var i=n.type;return typeof i=="function"&&!L0(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,NS(t,e,i,s,a)):(t=bu(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!ax(t,a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ec,n(o,s)&&t.ref===e.ref)return pa(t,e,a)}return e.flags|=1,t=ia(i,s),t.ref=e.ref,t.return=e,e.child=t}function NS(t,e,n,s,a){if(t!==null){var i=t.memoizedProps;if(Ec(i,s)&&t.ref===e.ref)if(At=!1,e.pendingProps=s=i,ax(t,a))t.flags&131072&&(At=!0);else return e.lanes=t.lanes,pa(t,e,a)}return ig(t,e,n,s,a)}function CS(t,e,n,s){var a=s.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,a=0;s!==null;)a=a|s.lanes|s.childLanes,s=s.sibling;s=a&~i}else s=0,e.child=null;return vb(t,e,i,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_u(e,i!==null?i.cachePool:null),i!==null?rb(e,i):Wp(),OT(e);else return s=e.lanes=536870912,vb(t,e,i!==null?i.baseLanes|n:n,n,s)}else i!==null?(_u(e,i.cachePool),rb(e,i),Ba(),e.memoizedState=null):(t!==null&&_u(e,null),Wp(),Ba());return $t(t,e,a,n),e.child}function ql(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function vb(t,e,n,s,a){var i=z0();return i=i===null?null:{parent:St._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&_u(e,null),Wp(),OT(e),t!==null&&Go(t,e,s,!0),e.childLanes=a,null}function Cu(t,e){return e=rm({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function yb(t,e,n){return rr(e,t.child,null,n),t=Cu(e,e.pendingProps),t.flags|=2,Sn(e),e.memoizedState=null,t}function uM(t,e,n){var s=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ae){if(s.mode==="hidden")return t=Cu(e,s),e.lanes=536870912,ql(null,t);if(Zp(e),(t=We)?(t=gw(t,Kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gi!==null?{id:js,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},n=IT(t),n.return=e,e.child=n,Kt=e,We=null)):t=null,t===null)throw xi(e);return e.lanes=536870912,null}return Cu(e,s)}var i=t.memoizedState;if(i!==null){var o=i.dehydrated;if(Zp(e),a)if(e.flags&256)e.flags&=-257,e=yb(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error($(558));else if(At||Go(t,e,n,!1),a=(n&t.childLanes)!==0,At||a){if(s=He,s!==null&&(o=tT(s,n),o!==0&&o!==i.retryLane))throw i.retryLane=o,yr(t,o),_n(s,t,o),sx;dm(),e=yb(t,e,n)}else t=i.treeContext,We=Xn(o.nextSibling),Kt=e,Ae=!0,ni=null,Kn=!1,t!==null&&RT(e,t),e=Cu(e,s),e.flags|=4096;return e}return t=ia(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Tu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error($(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function ig(t,e,n,s,a){return ir(e),n=H0(t,e,n,s,void 0,a),s=$0(),t!==null&&!At?(Y0(t,e,a),pa(t,e,a)):(Ae&&s&&V0(e),e.flags|=1,$t(t,e,n,a),e.child)}function bb(t,e,n,s,a,i){return ir(e),e.updateQueue=null,n=FT(e,s,n,a),zT(t),s=$0(),t!==null&&!At?(Y0(t,e,i),pa(t,e,i)):(Ae&&s&&V0(e),e.flags|=1,$t(t,e,n,i),e.child)}function _b(t,e,n,s,a){if(ir(e),e.stateNode===null){var i=Jr,o=n.contextType;typeof o=="object"&&o!==null&&(i=Qt(o)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=sg,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},G0(e),o=n.contextType,i.context=typeof o=="object"&&o!==null?Qt(o):Jr,i.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Ff(e,n,o,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&sg.enqueueReplaceState(i,i.state,null),ic(e,s,i,a),ac(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var l=e.memoizedProps,c=lr(n,l);i.props=c;var d=i.context,m=n.contextType;o=Jr,typeof m=="object"&&m!==null&&(o=Qt(m));var p=n.getDerivedStateFromProps;m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||d!==o)&&fb(e,i,s,o),za=!1;var g=e.memoizedState;i.state=g,ic(e,s,i,a),ac(),d=e.memoizedState,l||g!==d||za?(typeof p=="function"&&(Ff(e,n,p,s),d=e.memoizedState),(c=za||hb(e,n,c,s,g,d,o))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),i.props=s,i.state=d,i.context=o,s=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Qp(t,e),o=e.memoizedProps,m=lr(n,o),i.props=m,p=e.pendingProps,g=i.context,d=n.contextType,c=Jr,typeof d=="object"&&d!==null&&(c=Qt(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==p||g!==c)&&fb(e,i,s,c),za=!1,g=e.memoizedState,i.state=g,ic(e,s,i,a),ac();var x=e.memoizedState;o!==p||g!==x||za||t!==null&&t.dependencies!==null&&Zu(t.dependencies)?(typeof l=="function"&&(Ff(e,n,l,s),x=e.memoizedState),(m=za||hb(e,n,m,s,g,x,c)||t!==null&&t.dependencies!==null&&Zu(t.dependencies))?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,x,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),i.props=s,i.state=x,i.context=c,s=m):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,Tu(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=rr(e,t.child,null,a),e.child=rr(e,null,n,a)):$t(t,e,n,a),e.memoizedState=i.state,t=e.child):t=pa(t,e,a),t}function Eb(t,e,n,s){return ar(),e.flags|=256,$t(t,e,n,s),e.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qf(t){return{baseLanes:t,cachePool:PT()}}function Bf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=jn),t}function TS(t,e,n){var s=e.pendingProps,a=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(vt.current&2)!==0),o&&(a=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ae){if(a?qa(e):Ba(),(t=We)?(t=gw(t,Kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gi!==null?{id:js,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},n=IT(t),n.return=e,e.child=n,Kt=e,We=null)):t=null,t===null)throw xi(e);return yg(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,a?(Ba(),a=e.mode,l=rm({mode:"hidden",children:l},a),s=er(s,a,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=qf(n),s.childLanes=Bf(t,o,n),e.memoizedState=Gf,ql(null,s)):(qa(e),rg(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(i)e.flags&256?(qa(e),e.flags&=-257,e=Hf(t,e,n)):e.memoizedState!==null?(Ba(),e.child=t.child,e.flags|=128,e=null):(Ba(),l=s.fallback,a=e.mode,s=rm({mode:"visible",children:s.children},a),l=er(l,a,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,rr(e,t.child,null,n),s=e.child,s.memoizedState=qf(n),s.childLanes=Bf(t,o,n),e.memoizedState=Gf,e=ql(null,s));else if(qa(e),yg(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,s=Error($(419)),s.stack="",s.digest=o,Cc({value:s,source:null,stack:null}),e=Hf(t,e,n)}else if(At||Go(t,e,n,!1),o=(n&t.childLanes)!==0,At||o){if(o=He,o!==null&&(s=tT(o,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,yr(t,s),_n(o,t,s),sx;vg(l)||dm(),e=Hf(t,e,n)}else vg(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,We=Xn(l.nextSibling),Kt=e,Ae=!0,ni=null,Kn=!1,t!==null&&RT(e,t),e=rg(e,s.children),e.flags|=4096);return e}return a?(Ba(),l=s.fallback,a=e.mode,c=t.child,d=c.sibling,s=ia(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=ia(d,l):(l=er(l,a,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,ql(null,s),s=e.child,l=t.child.memoizedState,l===null?l=qf(n):(a=l.cachePool,a!==null?(c=St._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=PT(),l={baseLanes:l.baseLanes|n,cachePool:a}),s.memoizedState=l,s.childLanes=Bf(t,o,n),e.memoizedState=Gf,ql(t.child,s)):(qa(e),n=t.child,t=n.sibling,n=ia(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function rg(t,e){return e=rm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function rm(t,e){return t=wn(22,t,null,e),t.lanes=0,t}function Hf(t,e,n){return rr(e,t.child,null,n),t=rg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Nb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Yp(t.return,e,n)}function $f(t,e,n,s,a,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function SS(t,e,n){var s=e.pendingProps,a=s.revealOrder,i=s.tail;s=s.children;var o=vt.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,Je(vt,o),$t(t,e,s,n),s=Ae?Nc:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nb(t,n,e);else if(t.tag===19)Nb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&nm(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),$f(e,!1,a,n,i,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&nm(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}$f(e,!0,n,null,i,s);break;case"together":$f(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function pa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Go(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ia(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ia(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ax(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Zu(t)))}function mM(t,e,n){switch(e.tag){case 3:$u(e,e.stateNode.containerInfo),Ga(e,St,t.memoizedState.cache),ar();break;case 27:case 5:Dp(e);break;case 4:$u(e,e.stateNode.containerInfo);break;case 10:Ga(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Zp(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(qa(e),e.flags|=128,null):n&e.child.childLanes?TS(t,e,n):(qa(e),t=pa(t,e,n),t!==null?t.sibling:null);qa(e);break;case 19:var a=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Go(t,e,n,!1),s=(n&e.childLanes)!==0),a){if(s)return SS(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Je(vt,vt.current),s)break;return null;case 22:return e.lanes=0,CS(t,e,n,e.pendingProps);case 24:Ga(e,St,t.memoizedState.cache)}return pa(t,e,n)}function wS(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)At=!0;else{if(!ax(t,n)&&!(e.flags&128))return At=!1,mM(t,e,n);At=!!(t.flags&131072)}else At=!1,Ae&&e.flags&1048576&&jT(e,Nc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=$i(e.elementType),e.type=t,typeof t=="function")L0(t)?(s=lr(t,s),e.tag=1,e=_b(null,e,t,s,n)):(e.tag=0,e=ig(null,e,t,s,n));else{if(t!=null){var a=t.$$typeof;if(a===E0){e.tag=11,e=gb(null,e,t,s,n);break e}else if(a===N0){e.tag=14,e=xb(null,e,t,s,n);break e}}throw e=Mp(t)||t,Error($(306,e,""))}}return e;case 0:return ig(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,a=lr(s,e.pendingProps),_b(t,e,s,a,n);case 3:e:{if($u(e,e.stateNode.containerInfo),t===null)throw Error($(387));s=e.pendingProps;var i=e.memoizedState;a=i.element,Qp(t,e),ic(e,s,null,n);var o=e.memoizedState;if(s=o.cache,Ga(e,St,s),s!==i.cache&&Jp(e,[St],n,!0),ac(),s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=Eb(t,e,s,n);break e}else if(s!==a){a=Jn(Error($(424)),e),Cc(a),e=Eb(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(We=Xn(t.firstChild),Kt=e,Ae=!0,ni=null,Kn=!0,n=LT(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ar(),s===a){e=pa(t,e,n);break e}$t(t,e,s,n)}e=e.child}return e;case 26:return Tu(t,e),t===null?(n=qb(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ae||(n=e.type,t=e.pendingProps,s=fm(ti.current).createElement(n),s[Jt]=e,s[En]=t,Xt(s,n,t),zt(s),e.stateNode=s):e.memoizedState=qb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Dp(e),t===null&&Ae&&(s=e.stateNode=xw(e.type,e.pendingProps,ti.current),Kt=e,Kn=!0,a=We,Ai(e.type)?(bg=a,We=Xn(s.firstChild)):We=a),$t(t,e,e.pendingProps.children,n),Tu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ae&&((a=s=We)&&(s=GM(s,e.type,e.pendingProps,Kn),s!==null?(e.stateNode=s,Kt=e,We=Xn(s.firstChild),Kn=!1,a=!0):a=!1),a||xi(e)),Dp(e),a=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,gg(a,i)?s=null:o!==null&&gg(a,o)&&(e.flags|=32),e.memoizedState!==null&&(a=H0(t,e,sM,null,null,n),jc._currentValue=a),Tu(t,e),$t(t,e,s,n),e.child;case 6:return t===null&&Ae&&((t=n=We)&&(n=qM(n,e.pendingProps,Kn),n!==null?(e.stateNode=n,Kt=e,We=null,t=!0):t=!1),t||xi(e)),null;case 13:return TS(t,e,n);case 4:return $u(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=rr(e,null,s,n):$t(t,e,s,n),e.child;case 11:return gb(t,e,e.type,e.pendingProps,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Ga(e,e.type,s.value),$t(t,e,s.children,n),e.child;case 9:return a=e.type._context,s=e.pendingProps.children,ir(e),a=Qt(a),s=s(a),e.flags|=1,$t(t,e,s,n),e.child;case 14:return xb(t,e,e.type,e.pendingProps,n);case 15:return NS(t,e,e.type,e.pendingProps,n);case 19:return SS(t,e,n);case 31:return uM(t,e,n);case 22:return CS(t,e,n,e.pendingProps);case 24:return ir(e),s=Qt(St),t===null?(a=z0(),a===null&&(a=He,i=O0(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),e.memoizedState={parent:s,cache:a},G0(e),Ga(e,St,a)):(t.lanes&n&&(Qp(t,e),ic(e,null,null,n),ac()),a=t.memoizedState,i=e.memoizedState,a.parent!==s?(a={parent:s,cache:s},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Ga(e,St,s)):(s=i.cache,Ga(e,St,s),s!==a.cache&&Jp(e,[St],n,!0))),$t(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error($(156,e.tag))}function $s(t){t.flags|=4}function Yf(t,e,n,s,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(XS())t.flags|=8192;else throw nr=em,F0}else t.flags&=-16777217}function Cb(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!bw(e))if(XS())t.flags|=8192;else throw nr=em,F0}function Yd(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?WC():536870912,t.lanes|=e,No|=e)}function Dl(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&65011712,s|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function hM(t,e,n){var s=e.pendingProps;switch(U0(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return Xe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),ra(St),xo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ar(e)?$s(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Uf())),Xe(e),null;case 26:var a=e.type,i=e.memoizedState;return t===null?($s(e),i!==null?(Xe(e),Cb(e,i)):(Xe(e),Yf(e,a,null,s,n))):i?i!==t.memoizedState?($s(e),Xe(e),Cb(e,i)):(Xe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&$s(e),Xe(e),Yf(e,a,t,s,n)),null;case 27:if(Yu(e),n=ti.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&$s(e);else{if(!s){if(e.stateNode===null)throw Error($(166));return Xe(e),null}t=Ds.current,Ar(e)?Zy(e):(t=xw(a,s,n),e.stateNode=t,$s(e))}return Xe(e),null;case 5:if(Yu(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&$s(e);else{if(!s){if(e.stateNode===null)throw Error($(166));return Xe(e),null}if(i=Ds.current,Ar(e))Zy(e);else{var o=fm(ti.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?o.createElement(a,{is:s.is}):o.createElement(a)}}i[Jt]=e,i[En]=s;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=i;e:switch(Xt(i,a,s),a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&$s(e)}}return Xe(e),Yf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&$s(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error($(166));if(t=ti.current,Ar(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,a=Kt,a!==null)switch(a.tag){case 27:case 5:s=a.memoizedProps}t[Jt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||hw(t.nodeValue,n)),t||xi(e,!0)}else t=fm(t).createTextNode(s),t[Jt]=e,e.stateNode=t}return Xe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Ar(e),n!==null){if(t===null){if(!s)throw Error($(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(557));t[Jt]=e}else ar(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),t=!1}else n=Uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Sn(e),e):(Sn(e),null);if(e.flags&128)throw Error($(558))}return Xe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Ar(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error($(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($(317));a[Jt]=e}else ar(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),a=!1}else a=Uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(Sn(e),e):(Sn(e),null)}return Sn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,a=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(a=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Yd(e,e.updateQueue),Xe(e),null);case 4:return xo(),t===null&&ux(e.stateNode.containerInfo),Xe(e),null;case 10:return ra(e.type),Xe(e),null;case 19:if(Gt(vt),s=e.memoizedState,s===null)return Xe(e),null;if(a=(e.flags&128)!==0,i=s.rendering,i===null)if(a)Dl(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=nm(t),i!==null){for(e.flags|=128,Dl(s,!1),t=i.updateQueue,e.updateQueue=t,Yd(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)AT(n,t),n=n.sibling;return Je(vt,vt.current&1|2),Ae&&Qs(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&Pn()>lm&&(e.flags|=128,a=!0,Dl(s,!1),e.lanes=4194304)}else{if(!a)if(t=nm(i),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,Yd(e,t),Dl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ae)return Xe(e),null}else 2*Pn()-s.renderingStartTime>lm&&n!==536870912&&(e.flags|=128,a=!0,Dl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Pn(),t.sibling=null,n=vt.current,Je(vt,a?n&1|2:n&1),Ae&&Qs(e,s.treeForkCount),t):(Xe(e),null);case 22:case 23:return Sn(e),q0(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),n=e.updateQueue,n!==null&&Yd(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Gt(tr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ra(St),Xe(e),null;case 25:return null;case 30:return null}throw Error($(156,e.tag))}function fM(t,e){switch(U0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(St),xo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Yu(e),null;case 31:if(e.memoizedState!==null){if(Sn(e),e.alternate===null)throw Error($(340));ar()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Sn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ar()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(vt),null;case 4:return xo(),null;case 10:return ra(e.type),null;case 22:case 23:return Sn(e),q0(),t!==null&&Gt(tr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ra(St),null;case 25:return null;default:return null}}function AS(t,e){switch(U0(e),e.tag){case 3:ra(St),xo();break;case 26:case 27:case 5:Yu(e);break;case 4:xo();break;case 31:e.memoizedState!==null&&Sn(e);break;case 13:Sn(e);break;case 19:Gt(vt);break;case 10:ra(e.type);break;case 22:case 23:Sn(e),q0(),t!==null&&Gt(tr);break;case 24:ra(St)}}function ed(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&t)===t){s=void 0;var i=n.create,o=n.inst;s=i(),o.destroy=s}n=n.next}while(n!==a)}}catch(l){ze(e,e.return,l)}}function vi(t,e,n){try{var s=e.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var i=a.next;s=i;do{if((s.tag&t)===t){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,a=e;var c=n,d=l;try{d()}catch(m){ze(a,c,m)}}}s=s.next}while(s!==i)}}catch(m){ze(e,e.return,m)}}function IS(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{UT(e,n)}catch(s){ze(t,t.return,s)}}}function jS(t,e,n){n.props=lr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){ze(t,e,s)}}function oc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(a){ze(t,e,a)}}function Ms(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(a){ze(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){ze(t,e,a)}else n.current=null}function RS(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){ze(t,t.return,a)}}function Jf(t,e,n){try{var s=t.stateNode;LM(s,t.type,n,e),s[En]=e}catch(a){ze(t,t.return,a)}}function MS(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ai(t.type)||t.tag===4}function Kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ai(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function og(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ea));else if(s!==4&&(s===27&&Ai(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(og(t,e,n),t=t.sibling;t!==null;)og(t,e,n),t=t.sibling}function om(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Ai(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(om(t,e,n),t=t.sibling;t!==null;)om(t,e,n),t=t.sibling}function PS(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Xt(e,s,n),e[Jt]=t,e[En]=n}catch(i){ze(t,t.return,i)}}var Xs=!1,Tt=!1,Qf=!1,Tb=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function pM(t,e){if(t=t.containerInfo,fg=vm,t=bT(t),P0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var x;p!==n||a!==0&&p.nodeType!==3||(l=o+a),p!==i||s!==0&&p.nodeType!==3||(c=o+s),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===a&&(l=o),g===i&&++m===s&&(c=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pg={focusedElem:t,selectionRange:n},vm=!1,Ot=e;Ot!==null;)if(e=Ot,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ot=t;else for(;Ot!==null;){switch(e=Ot,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)a=t[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,a=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var y=lr(n.type,a);t=s.getSnapshotBeforeUpdate(y,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(T){ze(n,n.return,T)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)xg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":xg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error($(163))}if(t=e.sibling,t!==null){t.return=e.return,Ot=t;break}Ot=e.return}}function DS(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Js(t,n),s&4&&ed(5,n);break;case 1:if(Js(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){ze(n,n.return,o)}else{var a=lr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){ze(n,n.return,o)}}s&64&&IS(n),s&512&&oc(n,n.return);break;case 3:if(Js(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{UT(t,e)}catch(o){ze(n,n.return,o)}}break;case 27:e===null&&s&4&&PS(n);case 26:case 5:Js(t,n),e===null&&s&4&&RS(n),s&512&&oc(n,n.return);break;case 12:Js(t,n);break;case 31:Js(t,n),s&4&&VS(t,n);break;case 13:Js(t,n),s&4&&US(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=CM.bind(null,n),BM(t,n))));break;case 22:if(s=n.memoizedState!==null||Xs,!s){e=e!==null&&e.memoizedState!==null||Tt,a=Xs;var i=Tt;Xs=s,(Tt=e)&&!i?Ks(t,n,(n.subtreeFlags&8772)!==0):Js(t,n),Xs=a,Tt=i}break;case 30:break;default:Js(t,n)}}function kS(t){var e=t.alternate;e!==null&&(t.alternate=null,kS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&w0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,xn=!1;function Ys(t,e,n){for(n=n.child;n!==null;)LS(t,e,n),n=n.sibling}function LS(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Yc,n)}catch{}switch(n.tag){case 26:Tt||Ms(n,e),Ys(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Tt||Ms(n,e);var s=at,a=xn;Ai(n.type)&&(at=n.stateNode,xn=!1),Ys(t,e,n),uc(n.stateNode),at=s,xn=a;break;case 5:Tt||Ms(n,e);case 6:if(s=at,a=xn,at=null,Ys(t,e,n),at=s,xn=a,at!==null)if(xn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(n.stateNode)}catch(i){ze(n,e,i)}else try{at.removeChild(n.stateNode)}catch(i){ze(n,e,i)}break;case 18:at!==null&&(xn?(t=at,Ub(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),wo(t)):Ub(at,n.stateNode));break;case 4:s=at,a=xn,at=n.stateNode.containerInfo,xn=!0,Ys(t,e,n),at=s,xn=a;break;case 0:case 11:case 14:case 15:vi(2,n,e),Tt||vi(4,n,e),Ys(t,e,n);break;case 1:Tt||(Ms(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&jS(n,e,s)),Ys(t,e,n);break;case 21:Ys(t,e,n);break;case 22:Tt=(s=Tt)||n.memoizedState!==null,Ys(t,e,n),Tt=s;break;default:Ys(t,e,n)}}function VS(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{wo(t)}catch(n){ze(e,e.return,n)}}}function US(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wo(t)}catch(n){ze(e,e.return,n)}}function gM(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Tb),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Tb),e;default:throw Error($(435,t.tag))}}function Jd(t,e){var n=gM(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var a=TM.bind(null,t,s);s.then(a,a)}})}function pn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s],i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Ai(l.type)){at=l.stateNode,xn=!1;break e}break;case 5:at=l.stateNode,xn=!1;break e;case 3:case 4:at=l.stateNode.containerInfo,xn=!0;break e}l=l.return}if(at===null)throw Error($(160));LS(i,o,a),at=null,xn=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)OS(e,t),e=e.sibling}var ds=null;function OS(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(e,t),gn(t),s&4&&(vi(3,t,t.return),ed(3,t),vi(5,t,t.return));break;case 1:pn(e,t),gn(t),s&512&&(Tt||n===null||Ms(n,n.return)),s&64&&Xs&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var a=ds;if(pn(e,t),gn(t),s&512&&(Tt||n===null||Ms(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":i=a.getElementsByTagName("title")[0],(!i||i[Qc]||i[Jt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),Xt(i,s,n),i[Jt]=t,zt(i),s=i;break e;case"link":var o=Hb("link","href",a).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}i=a.createElement(s),Xt(i,s,n),a.head.appendChild(i);break;case"meta":if(o=Hb("meta","content",a).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}i=a.createElement(s),Xt(i,s,n),a.head.appendChild(i);break;default:throw Error($(468,s))}i[Jt]=t,zt(i),s=i}t.stateNode=s}else $b(a,t.type,t.stateNode);else t.stateNode=Bb(a,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?$b(a,t.type,t.stateNode):Bb(a,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Jf(t,t.memoizedProps,n.memoizedProps)}break;case 27:pn(e,t),gn(t),s&512&&(Tt||n===null||Ms(n,n.return)),n!==null&&s&4&&Jf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(pn(e,t),gn(t),s&512&&(Tt||n===null||Ms(n,n.return)),t.flags&32){a=t.stateNode;try{yo(a,"")}catch(y){ze(t,t.return,y)}}s&4&&t.stateNode!=null&&(a=t.memoizedProps,Jf(t,a,n!==null?n.memoizedProps:a)),s&1024&&(Qf=!0);break;case 6:if(pn(e,t),gn(t),s&4){if(t.stateNode===null)throw Error($(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(y){ze(t,t.return,y)}}break;case 3:if(Au=null,a=ds,ds=pm(e.containerInfo),pn(e,t),ds=a,gn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(y){ze(t,t.return,y)}Qf&&(Qf=!1,zS(t));break;case 4:s=ds,ds=pm(t.stateNode.containerInfo),pn(e,t),gn(t),ds=s;break;case 12:pn(e,t),gn(t);break;case 31:pn(e,t),gn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Jd(t,s)));break;case 13:pn(e,t),gn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(uh=Pn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Jd(t,s)));break;case 22:a=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Xs,m=Tt;if(Xs=d||a,Tt=m||c,pn(e,t),Tt=m,Xs=d,gn(t),s&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||c||Xs||Tt||Yi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,a)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,g=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(y){ze(c,c.return,y)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(y){ze(c,c.return,y)}}}else if(e.tag===18){if(n===null){c=e;try{var x=c.stateNode;a?Ob(x,!0):Ob(c.stateNode,!1)}catch(y){ze(c,c.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Jd(t,n))));break;case 19:pn(e,t),gn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Jd(t,s)));break;case 30:break;case 21:break;default:pn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(MS(s)){n=s;break}s=s.return}if(n==null)throw Error($(160));switch(n.tag){case 27:var a=n.stateNode,i=Kf(t);om(t,i,a);break;case 5:var o=n.stateNode;n.flags&32&&(yo(o,""),n.flags&=-33);var l=Kf(t);om(t,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=Kf(t);og(t,d,c);break;default:throw Error($(161))}}catch(m){ze(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zS(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;zS(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Js(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)DS(t,e.alternate,e),e=e.sibling}function Yi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:vi(4,e,e.return),Yi(e);break;case 1:Ms(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&jS(e,e.return,n),Yi(e);break;case 27:uc(e.stateNode);case 26:case 5:Ms(e,e.return),Yi(e);break;case 22:e.memoizedState===null&&Yi(e);break;case 30:Yi(e);break;default:Yi(e)}t=t.sibling}}function Ks(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,a=t,i=e,o=i.flags;switch(i.tag){case 0:case 11:case 15:Ks(a,i,n),ed(4,i);break;case 1:if(Ks(a,i,n),s=i,a=s.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){ze(s,s.return,d)}if(s=i,a=s.updateQueue,a!==null){var l=s.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)VT(c[a],l)}catch(d){ze(s,s.return,d)}}n&&o&64&&IS(i),oc(i,i.return);break;case 27:PS(i);case 26:case 5:Ks(a,i,n),n&&s===null&&o&4&&RS(i),oc(i,i.return);break;case 12:Ks(a,i,n);break;case 31:Ks(a,i,n),n&&o&4&&VS(a,i);break;case 13:Ks(a,i,n),n&&o&4&&US(a,i);break;case 22:i.memoizedState===null&&Ks(a,i,n),oc(i,i.return);break;case 30:break;default:Ks(a,i,n)}e=e.sibling}}function ix(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Wc(n))}function rx(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Wc(t))}function ls(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)FS(t,e,n,s),e=e.sibling}function FS(t,e,n,s){var a=e.flags;switch(e.tag){case 0:case 11:case 15:ls(t,e,n,s),a&2048&&ed(9,e);break;case 1:ls(t,e,n,s);break;case 3:ls(t,e,n,s),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Wc(t)));break;case 12:if(a&2048){ls(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){ze(e,e.return,c)}}else ls(t,e,n,s);break;case 31:ls(t,e,n,s);break;case 13:ls(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,o=e.alternate,e.memoizedState!==null?i._visibility&2?ls(t,e,n,s):lc(t,e):i._visibility&2?ls(t,e,n,s):(i._visibility|=2,Mr(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),a&2048&&ix(o,e);break;case 24:ls(t,e,n,s),a&2048&&rx(e.alternate,e);break;default:ls(t,e,n,s)}}function Mr(t,e,n,s,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,o=e,l=n,c=s,d=o.flags;switch(o.tag){case 0:case 11:case 15:Mr(i,o,l,c,a),ed(8,o);break;case 23:break;case 22:var m=o.stateNode;o.memoizedState!==null?m._visibility&2?Mr(i,o,l,c,a):lc(i,o):(m._visibility|=2,Mr(i,o,l,c,a)),a&&d&2048&&ix(o.alternate,o);break;case 24:Mr(i,o,l,c,a),a&&d&2048&&rx(o.alternate,o);break;default:Mr(i,o,l,c,a)}e=e.sibling}}function lc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,a=s.flags;switch(s.tag){case 22:lc(n,s),a&2048&&ix(s.alternate,s);break;case 24:lc(n,s),a&2048&&rx(s.alternate,s);break;default:lc(n,s)}e=e.sibling}}var Bl=8192;function Ir(t,e,n){if(t.subtreeFlags&Bl)for(t=t.child;t!==null;)GS(t,e,n),t=t.sibling}function GS(t,e,n){switch(t.tag){case 26:Ir(t,e,n),t.flags&Bl&&t.memoizedState!==null&&nP(n,ds,t.memoizedState,t.memoizedProps);break;case 5:Ir(t,e,n);break;case 3:case 4:var s=ds;ds=pm(t.stateNode.containerInfo),Ir(t,e,n),ds=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Bl,Bl=16777216,Ir(t,e,n),Bl=s):Ir(t,e,n));break;default:Ir(t,e,n)}}function qS(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function kl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ot=s,HS(s,t)}qS(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)BS(t),t=t.sibling}function BS(t){switch(t.tag){case 0:case 11:case 15:kl(t),t.flags&2048&&vi(9,t,t.return);break;case 3:kl(t);break;case 12:kl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Su(t)):kl(t);break;default:kl(t)}}function Su(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ot=s,HS(s,t)}qS(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:vi(8,e,e.return),Su(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Su(e));break;default:Su(e)}t=t.sibling}}function HS(t,e){for(;Ot!==null;){var n=Ot;switch(n.tag){case 0:case 11:case 15:vi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Wc(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ot=s;else e:for(n=t;Ot!==null;){s=Ot;var a=s.sibling,i=s.return;if(kS(s),s===n){Ot=null;break e}if(a!==null){a.return=i,Ot=a;break e}Ot=i}}}var xM={getCacheForType:function(t){var e=Qt(St),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qt(St).controller.signal}},vM=typeof WeakMap=="function"?WeakMap:Map,Le=0,He=null,Ee=null,Se=0,Oe=0,Tn=null,Xa=!1,Bo=!1,ox=!1,ga=0,pt=0,yi=0,sr=0,lx=0,jn=0,No=0,cc=null,vn=null,lg=!1,uh=0,$S=0,lm=1/0,cm=null,ii=null,Mt=0,ri=null,Co=null,oa=0,cg=0,dg=null,YS=null,dc=0,ug=null;function Ln(){return Le&2&&Se!==0?Se&-Se:ce.T!==null?dx():nT()}function JS(){if(jn===0)if(!(Se&536870912)||Ae){var t=zd;zd<<=1,!(zd&3932160)&&(zd=262144),jn=t}else jn=536870912;return t=On.current,t!==null&&(t.flags|=32),jn}function _n(t,e,n){(t===He&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)&&(To(t,0),Wa(t,Se,jn,!1)),Kc(t,n),(!(Le&2)||t!==He)&&(t===He&&(!(Le&2)&&(sr|=n),pt===4&&Wa(t,Se,jn,!1)),Fs(t))}function KS(t,e,n){if(Le&6)throw Error($(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Jc(t,e),a=s?_M(t,e):Xf(t,e,!0),i=s;do{if(a===0){Bo&&!s&&Wa(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!yM(n)){a=Xf(t,e,!1),i=!1;continue}if(a===2){if(i=e,t.errorRecoveryDisabledLanes&i)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;a=cc;var c=l.current.memoizedState.isDehydrated;if(c&&(To(l,o).flags|=256),o=Xf(l,o,!1),o!==2){if(ox&&!c){l.errorRecoveryDisabledLanes|=i,sr|=i,a=4;break e}i=vn,vn=a,i!==null&&(vn===null?vn=i:vn.push.apply(vn,i))}a=o}if(i=!1,a!==2)continue}}if(a===1){To(t,0),Wa(t,e,0,!0);break}e:{switch(s=t,i=a,i){case 0:case 1:throw Error($(345));case 4:if((e&4194048)!==e)break;case 6:Wa(s,e,jn,!Xa);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error($(329))}if((e&62914560)===e&&(a=uh+300-Pn(),10<a)){if(Wa(s,e,jn,!Xa),eh(s,0,!0)!==0)break e;oa=e,s.timeoutHandle=pw(Sb.bind(null,s,n,vn,cm,lg,e,jn,sr,No,Xa,i,"Throttled",-0,0),a);break e}Sb(s,n,vn,cm,lg,e,jn,sr,No,Xa,i,null,-0,0)}}break}while(!0);Fs(t)}function Sb(t,e,n,s,a,i,o,l,c,d,m,p,g,x){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},GS(e,i,p);var y=(i&62914560)===i?uh-Pn():(i&4194048)===i?$S-Pn():0;if(y=sP(p,y),y!==null){oa=i,t.cancelPendingCommit=y(Ab.bind(null,t,e,i,n,s,a,o,l,c,m,p,null,g,x)),Wa(t,i,o,!d);return}}Ab(t,e,i,n,s,a,o,l,c)}function yM(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!Un(i(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(t,e,n,s){e&=~lx,e&=~sr,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var a=e;0<a;){var i=31-kn(a),o=1<<i;s[i]=-1,a&=~o}n!==0&&ZC(t,n,e)}function mh(){return Le&6?!0:(td(0),!1)}function cx(){if(Ee!==null){if(Oe===0)var t=Ee.return;else t=Ee,ta=br=null,J0(t),io=null,Tc=0,t=Ee;for(;t!==null;)AS(t.alternate,t),t=t.return;Ee=null}}function To(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,OM(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),oa=0,cx(),He=t,Ee=n=ia(t.current,null),Se=e,Oe=0,Tn=null,Xa=!1,Bo=Jc(t,e),ox=!1,No=jn=lx=sr=yi=pt=0,vn=cc=null,lg=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var a=31-kn(s),i=1<<a;e|=t[a],s&=~i}return ga=e,ah(),n}function QS(t,e){ve=null,ce.H=wc,e===qo||e===rh?(e=ab(),Oe=3):e===F0?(e=ab(),Oe=4):Oe=e===sx?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Tn=e,Ee===null&&(pt=1,im(t,Jn(e,t.current)))}function XS(){var t=On.current;return t===null?!0:(Se&4194048)===Se?Qn===null:(Se&62914560)===Se||Se&536870912?t===Qn:!1}function WS(){var t=ce.H;return ce.H=wc,t===null?wc:t}function ZS(){var t=ce.A;return ce.A=xM,t}function dm(){pt=4,Xa||(Se&4194048)!==Se&&On.current!==null||(Bo=!0),!(yi&134217727)&&!(sr&134217727)||He===null||Wa(He,Se,jn,!1)}function Xf(t,e,n){var s=Le;Le|=2;var a=WS(),i=ZS();(He!==t||Se!==e)&&(cm=null,To(t,e)),e=!1;var o=pt;e:do try{if(Oe!==0&&Ee!==null){var l=Ee,c=Tn;switch(Oe){case 8:cx(),o=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(e=!0);var d=Oe;if(Oe=0,Tn=null,Xr(t,l,c,d),n&&Bo){o=0;break e}break;default:d=Oe,Oe=0,Tn=null,Xr(t,l,c,d)}}bM(),o=pt;break}catch(m){QS(t,m)}while(!0);return e&&t.shellSuspendCounter++,ta=br=null,Le=s,ce.H=a,ce.A=i,Ee===null&&(He=null,Se=0,ah()),o}function bM(){for(;Ee!==null;)ew(Ee)}function _M(t,e){var n=Le;Le|=2;var s=WS(),a=ZS();He!==t||Se!==e?(cm=null,lm=Pn()+500,To(t,e)):Bo=Jc(t,e);e:do try{if(Oe!==0&&Ee!==null){e=Ee;var i=Tn;t:switch(Oe){case 1:Oe=0,Tn=null,Xr(t,e,i,1);break;case 2:case 9:if(sb(i)){Oe=0,Tn=null,wb(e);break}e=function(){Oe!==2&&Oe!==9||He!==t||(Oe=7),Fs(t)},i.then(e,e);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:sb(i)?(Oe=0,Tn=null,wb(e)):(Oe=0,Tn=null,Xr(t,e,i,7));break;case 5:var o=null;switch(Ee.tag){case 26:o=Ee.memoizedState;case 5:case 27:var l=Ee;if(o?bw(o):l.stateNode.complete){Oe=0,Tn=null;var c=l.sibling;if(c!==null)Ee=c;else{var d=l.return;d!==null?(Ee=d,hh(d)):Ee=null}break t}}Oe=0,Tn=null,Xr(t,e,i,5);break;case 6:Oe=0,Tn=null,Xr(t,e,i,6);break;case 8:cx(),pt=6;break e;default:throw Error($(462))}}EM();break}catch(m){QS(t,m)}while(!0);return ta=br=null,ce.H=s,ce.A=a,Le=n,Ee!==null?0:(He=null,Se=0,ah(),pt)}function EM(){for(;Ee!==null&&!Hj();)ew(Ee)}function ew(t){var e=wS(t.alternate,t,ga);t.memoizedProps=t.pendingProps,e===null?hh(t):Ee=e}function wb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=bb(n,e,e.pendingProps,e.type,void 0,Se);break;case 11:e=bb(n,e,e.pendingProps,e.type.render,e.ref,Se);break;case 5:J0(e);default:AS(n,e),e=Ee=AT(e,ga),e=wS(n,e,ga)}t.memoizedProps=t.pendingProps,e===null?hh(t):Ee=e}function Xr(t,e,n,s){ta=br=null,J0(e),io=null,Tc=0;var a=e.return;try{if(dM(t,a,e,n,Se)){pt=1,im(t,Jn(n,t.current)),Ee=null;return}}catch(i){if(a!==null)throw Ee=a,i;pt=1,im(t,Jn(n,t.current)),Ee=null;return}e.flags&32768?(Ae||s===1?t=!0:Bo||Se&536870912?t=!1:(Xa=t=!0,(s===2||s===9||s===3||s===6)&&(s=On.current,s!==null&&s.tag===13&&(s.flags|=16384))),tw(e,t)):hh(e)}function hh(t){var e=t;do{if(e.flags&32768){tw(e,Xa);return}t=e.return;var n=hM(e.alternate,e,ga);if(n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);pt===0&&(pt=5)}function tw(t,e){do{var n=fM(t.alternate,t);if(n!==null){n.flags&=32767,Ee=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ee=t;return}Ee=t=n}while(t!==null);pt=6,Ee=null}function Ab(t,e,n,s,a,i,o,l,c){t.cancelPendingCommit=null;do fh();while(Mt!==0);if(Le&6)throw Error($(327));if(e!==null){if(e===t.current)throw Error($(177));if(i=e.lanes|e.childLanes,i|=D0,tR(t,n,i,o,l,c),t===He&&(Ee=He=null,Se=0),Co=e,ri=t,oa=n,cg=i,dg=a,YS=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,SM(Ju,function(){return rw(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ce.T,ce.T=null,a=Ve.p,Ve.p=2,o=Le,Le|=4;try{pM(t,e,n)}finally{Le=o,Ve.p=a,ce.T=s}}Mt=1,nw(),sw(),aw()}}function nw(){if(Mt===1){Mt=0;var t=ri,e=Co,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ce.T,ce.T=null;var s=Ve.p;Ve.p=2;var a=Le;Le|=4;try{OS(e,t);var i=pg,o=bT(t.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&yT(l.ownerDocument.documentElement,l)){if(c!==null&&P0(l)){var d=c.start,m=c.end;if(m===void 0&&(m=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(m,l.value.length);else{var p=l.ownerDocument||document,g=p&&p.defaultView||window;if(g.getSelection){var x=g.getSelection(),y=l.textContent.length,T=Math.min(c.start,y),A=c.end===void 0?T:Math.min(c.end,y);!x.extend&&T>A&&(o=A,A=T,T=o);var b=Qy(l,T),N=Qy(l,A);if(b&&N&&(x.rangeCount!==1||x.anchorNode!==b.node||x.anchorOffset!==b.offset||x.focusNode!==N.node||x.focusOffset!==N.offset)){var S=p.createRange();S.setStart(b.node,b.offset),x.removeAllRanges(),T>A?(x.addRange(S),x.extend(N.node,N.offset)):(S.setEnd(N.node,N.offset),x.addRange(S))}}}}for(p=[],x=l;x=x.parentNode;)x.nodeType===1&&p.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var D=p[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}vm=!!fg,pg=fg=null}finally{Le=a,Ve.p=s,ce.T=n}}t.current=e,Mt=2}}function sw(){if(Mt===2){Mt=0;var t=ri,e=Co,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ce.T,ce.T=null;var s=Ve.p;Ve.p=2;var a=Le;Le|=4;try{DS(t,e.alternate,e)}finally{Le=a,Ve.p=s,ce.T=n}}Mt=3}}function aw(){if(Mt===4||Mt===3){Mt=0,$j();var t=ri,e=Co,n=oa,s=YS;e.subtreeFlags&10256||e.flags&10256?Mt=5:(Mt=0,Co=ri=null,iw(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(ii=null),S0(n),e=e.stateNode,Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Yc,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ce.T,a=Ve.p,Ve.p=2,ce.T=null;try{for(var i=t.onRecoverableError,o=0;o<s.length;o++){var l=s[o];i(l.value,{componentStack:l.stack})}}finally{ce.T=e,Ve.p=a}}oa&3&&fh(),Fs(t),a=t.pendingLanes,n&261930&&a&42?t===ug?dc++:(dc=0,ug=t):dc=0,td(0)}}function iw(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Wc(e)))}function fh(){return nw(),sw(),aw(),rw()}function rw(){if(Mt!==5)return!1;var t=ri,e=cg;cg=0;var n=S0(oa),s=ce.T,a=Ve.p;try{Ve.p=32>n?32:n,ce.T=null,n=dg,dg=null;var i=ri,o=oa;if(Mt=0,Co=ri=null,oa=0,Le&6)throw Error($(331));var l=Le;if(Le|=4,BS(i.current),FS(i,i.current,o,n),Le=l,td(0,!1),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Yc,i)}catch{}return!0}finally{Ve.p=a,ce.T=s,iw(t,e)}}function Ib(t,e,n){e=Jn(n,e),e=ag(t.stateNode,e,2),t=ai(t,e,2),t!==null&&(Kc(t,2),Fs(t))}function ze(t,e,n){if(t.tag===3)Ib(t,t,n);else for(;e!==null;){if(e.tag===3){Ib(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ii===null||!ii.has(s))){t=Jn(n,t),n=_S(2),s=ai(e,n,2),s!==null&&(ES(n,s,e,t),Kc(s,2),Fs(s));break}}e=e.return}}function Wf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new vM;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(ox=!0,a.add(n),t=NM.bind(null,t,e,n),e.then(t,t))}function NM(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,He===t&&(Se&n)===n&&(pt===4||pt===3&&(Se&62914560)===Se&&300>Pn()-uh?!(Le&2)&&To(t,0):lx|=n,No===Se&&(No=0)),Fs(t)}function ow(t,e){e===0&&(e=WC()),t=yr(t,e),t!==null&&(Kc(t,e),Fs(t))}function CM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ow(t,n)}function TM(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error($(314))}s!==null&&s.delete(e),ow(t,n)}function SM(t,e){return C0(t,e)}var um=null,Pr=null,mg=!1,mm=!1,Zf=!1,Za=0;function Fs(t){t!==Pr&&t.next===null&&(Pr===null?um=Pr=t:Pr=Pr.next=t),mm=!0,mg||(mg=!0,AM())}function td(t,e){if(!Zf&&mm){Zf=!0;do for(var n=!1,s=um;s!==null;){if(t!==0){var a=s.pendingLanes;if(a===0)var i=0;else{var o=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-kn(42|t)+1)-1,i&=a&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,jb(s,i))}else i=Se,i=eh(s,s===He?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Jc(s,i)||(n=!0,jb(s,i));s=s.next}while(n);Zf=!1}}function wM(){lw()}function lw(){mm=mg=!1;var t=0;Za!==0&&UM()&&(t=Za);for(var e=Pn(),n=null,s=um;s!==null;){var a=s.next,i=cw(s,e);i===0?(s.next=null,n===null?um=a:n.next=a,a===null&&(Pr=n)):(n=s,(t!==0||i&3)&&(mm=!0)),s=a}Mt!==0&&Mt!==5||td(t),Za!==0&&(Za=0)}function cw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var o=31-kn(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=eR(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}if(e=He,n=Se,n=eh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&wf(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Jc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&wf(s),S0(n)){case 2:case 8:n=QC;break;case 32:n=Ju;break;case 268435456:n=XC;break;default:n=Ju}return s=dw.bind(null,t),n=C0(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&wf(s),t.callbackPriority=2,t.callbackNode=null,2}function dw(t,e){if(Mt!==0&&Mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(fh()&&t.callbackNode!==n)return null;var s=Se;return s=eh(t,t===He?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(KS(t,s,e),cw(t,Pn()),t.callbackNode!=null&&t.callbackNode===n?dw.bind(null,t):null)}function jb(t,e){if(fh())return null;KS(t,e,!0)}function AM(){zM(function(){Le&6?C0(KC,wM):lw()})}function dx(){if(Za===0){var t=bo;t===0&&(t=Od,Od<<=1,!(Od&261888)&&(Od=256)),Za=t}return Za}function Rb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xu(""+t)}function Mb(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function IM(t,e,n,s,a){if(e==="submit"&&n&&n.stateNode===a){var i=Rb((a[En]||null).action),o=s.submitter;o&&(e=(e=o[En]||null)?Rb(e.formAction):o.getAttribute("formAction"),e!==null&&(i=e,o=null));var l=new th("action","action",null,s,a);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Za!==0){var c=o?Mb(a,o):new FormData(a);ng(n,{pending:!0,data:c,method:a.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?Mb(a,o):new FormData(a),ng(n,{pending:!0,data:c,method:a.method,action:i},i,c))},currentTarget:a}]})}}for(var ep=0;ep<Bp.length;ep++){var tp=Bp[ep],jM=tp.toLowerCase(),RM=tp[0].toUpperCase()+tp.slice(1);Es(jM,"on"+RM)}Es(ET,"onAnimationEnd");Es(NT,"onAnimationIteration");Es(CT,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(YR,"onTransitionRun");Es(JR,"onTransitionStart");Es(KR,"onTransitionCancel");Es(TT,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ac));function uw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=d;try{i(a)}catch(m){Qu(m)}a.currentTarget=null,i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=d;try{i(a)}catch(m){Qu(m)}a.currentTarget=null,i=c}}}}function _e(t,e){var n=e[Lp];n===void 0&&(n=e[Lp]=new Set);var s=t+"__bubble";n.has(s)||(mw(e,t,2,!1),n.add(s))}function np(t,e,n){var s=0;e&&(s|=4),mw(n,t,s,e)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function ux(t){if(!t[Kd]){t[Kd]=!0,sT.forEach(function(n){n!=="selectionchange"&&(MM.has(n)||np(n,!1,t),np(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kd]||(e[Kd]=!0,np("selectionchange",!1,e))}}function mw(t,e,n,s){switch(Tw(e)){case 2:var a=rP;break;case 8:a=oP;break;default:a=px}n=a.bind(null,e,n,t),a=void 0,!Fp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function sp(t,e,n,s,a){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;l!==null;){if(o=Gr(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=i=o;continue e}l=l.parentNode}}s=s.return}uT(function(){var d=i,m=I0(n),p=[];e:{var g=ST.get(t);if(g!==void 0){var x=th,y=t;switch(t){case"keypress":if(yu(n)===0)break e;case"keydown":case"keyup":x=TR;break;case"focusin":y="focus",x=Mf;break;case"focusout":y="blur",x=Mf;break;case"beforeblur":case"afterblur":x=Mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=hR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=AR;break;case ET:case NT:case CT:x=gR;break;case TT:x=jR;break;case"scroll":case"scrollend":x=uR;break;case"wheel":x=MR;break;case"copy":case"cut":case"paste":x=vR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Gy;break;case"toggle":case"beforetoggle":x=DR}var T=(e&4)!==0,A=!T&&(t==="scroll"||t==="scrollend"),b=T?g!==null?g+"Capture":null:g;T=[];for(var N=d,S;N!==null;){var D=N;if(S=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||S===null||b===null||(D=bc(N,b),D!=null&&T.push(Ic(N,D,S))),A)break;N=N.return}0<T.length&&(g=new x(g,y,null,n,m),p.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==zp&&(y=n.relatedTarget||n.fromElement)&&(Gr(y)||y[zo]))break e;if((x||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=d,y=y?Gr(y):null,y!==null&&(A=$c(y),T=y.tag,y!==A||T!==5&&T!==27&&T!==6)&&(y=null)):(x=null,y=d),x!==y)){if(T=zy,D="onMouseLeave",b="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(T=Gy,D="onPointerLeave",b="onPointerEnter",N="pointer"),A=x==null?g:Gl(x),S=y==null?g:Gl(y),g=new T(D,N+"leave",x,n,m),g.target=A,g.relatedTarget=S,D=null,Gr(m)===d&&(T=new T(b,N+"enter",y,n,m),T.target=S,T.relatedTarget=A,D=T),A=D,x&&y)t:{for(T=PM,b=x,N=y,S=0,D=b;D;D=T(D))S++;D=0;for(var V=N;V;V=T(V))D++;for(;0<S-D;)b=T(b),S--;for(;0<D-S;)N=T(N),D--;for(;S--;){if(b===N||N!==null&&b===N.alternate){T=b;break t}b=T(b),N=T(N)}T=null}else T=null;x!==null&&Pb(p,g,x,T,!1),y!==null&&A!==null&&Pb(p,A,y,T,!0)}}e:{if(g=d?Gl(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var k=$y;else if(Hy(g))if(xT)k=BR;else{k=GR;var j=FR}else x=g.nodeName,!x||x.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&A0(d.elementType)&&(k=$y):k=qR;if(k&&(k=k(t,d))){gT(p,k,n,m);break e}j&&j(t,g,d),t==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&Op(g,"number",g.value)}switch(j=d?Gl(d):window,t){case"focusin":(Hy(j)||j.contentEditable==="true")&&(Hr=j,Gp=d,tc=null);break;case"focusout":tc=Gp=Hr=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,Xy(p,n,m);break;case"selectionchange":if($R)break;case"keydown":case"keyup":Xy(p,n,m)}var _;if(M0)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Br?fT(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(hT&&n.locale!=="ko"&&(Br||I!=="onCompositionStart"?I==="onCompositionEnd"&&Br&&(_=mT()):(Qa=m,j0="value"in Qa?Qa.value:Qa.textContent,Br=!0)),j=hm(d,I),0<j.length&&(I=new Fy(I,t,null,n,m),p.push({event:I,listeners:j}),_?I.data=_:(_=pT(n),_!==null&&(I.data=_)))),(_=LR?VR(t,n):UR(t,n))&&(I=hm(d,"onBeforeInput"),0<I.length&&(j=new Fy("onBeforeInput","beforeinput",null,n,m),p.push({event:j,listeners:I}),j.data=_)),IM(p,t,d,n,m)}uw(p,e)})}function Ic(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hm(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=bc(t,n),a!=null&&s.unshift(Ic(t,a,i)),a=bc(t,e),a!=null&&s.push(Ic(t,a,i))),t.tag===3)return s;t=t.return}return[]}function PM(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Pb(t,e,n,s,a){for(var i=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,a?(d=bc(n,i),d!=null&&o.unshift(Ic(n,d,c))):a||(d=bc(n,i),d!=null&&o.push(Ic(n,d,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DM=/\r\n?/g,kM=/\u0000|\uFFFD/g;function Db(t){return(typeof t=="string"?t:""+t).replace(DM,`
`).replace(kM,"")}function hw(t,e){return e=Db(e),Db(t)===e}function Fe(t,e,n,s,a,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||yo(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&yo(t,""+s);break;case"className":Gd(t,"class",s);break;case"tabIndex":Gd(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Gd(t,n,s);break;case"style":dT(t,s,i);break;case"data":if(e!=="object"){Gd(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=xu(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",a.name,a,null),Fe(t,e,"formEncType",a.formEncType,a,null),Fe(t,e,"formMethod",a.formMethod,a,null),Fe(t,e,"formTarget",a.formTarget,a,null)):(Fe(t,e,"encType",a.encType,a,null),Fe(t,e,"method",a.method,a,null),Fe(t,e,"target",a.target,a,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=xu(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=ea);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error($(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error($(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=xu(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":_e("beforetoggle",t),_e("toggle",t),gu(t,"popover",s);break;case"xlinkActuate":Hs(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Hs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Hs(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Hs(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Hs(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Hs(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Hs(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Hs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Hs(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":gu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=cR.get(n)||n,gu(t,n,s))}}function hg(t,e,n,s,a,i){switch(n){case"style":dT(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error($(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error($(60));t.innerHTML=n}}break;case"children":typeof s=="string"?yo(t,s):(typeof s=="number"||typeof s=="bigint")&&yo(t,""+s);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"onClick":s!=null&&(t.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!aT.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),i=t[En]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,a),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,a);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):gu(t,n,s)}}}function Xt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var s=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error($(137,e));default:Fe(t,e,i,o,n,null)}}a&&Fe(t,e,"srcSet",n.srcSet,n,null),s&&Fe(t,e,"src",n.src,n,null);return;case"input":_e("invalid",t);var l=i=o=a=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var m=n[s];if(m!=null)switch(s){case"name":a=m;break;case"type":o=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error($(137,e));break;default:Fe(t,e,s,m,n,null)}}oT(t,i,l,c,d,o,a,!1);return;case"select":_e("invalid",t),s=o=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Fe(t,e,a,l,n,null)}e=i,n=o,t.multiple=!!s,e!=null?no(t,!!s,e,!1):n!=null&&no(t,!!s,n,!0);return;case"textarea":_e("invalid",t),i=a=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error($(91));break;default:Fe(t,e,o,l,n,null)}cT(t,s,a,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Fe(t,e,c,s,n,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(s=0;s<Ac.length;s++)_e(Ac[s],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error($(137,e));default:Fe(t,e,d,s,n,null)}return;default:if(A0(e)){for(m in n)n.hasOwnProperty(m)&&(s=n[m],s!==void 0&&hg(t,e,m,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Fe(t,e,l,s,n,null))}function LM(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,d=null,m=null;for(x in n){var p=n[x];if(n.hasOwnProperty(x)&&p!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":c=p;default:s.hasOwnProperty(x)||Fe(t,e,x,null,s,p)}}for(var g in s){var x=s[g];if(p=n[g],s.hasOwnProperty(g)&&(x!=null||p!=null))switch(g){case"type":i=x;break;case"name":a=x;break;case"checked":d=x;break;case"defaultChecked":m=x;break;case"value":o=x;break;case"defaultValue":l=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error($(137,e));break;default:x!==p&&Fe(t,e,g,x,s,p)}}Up(t,o,l,c,d,m,i,a);return;case"select":x=o=l=g=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":x=c;default:s.hasOwnProperty(i)||Fe(t,e,i,null,s,c)}for(a in s)if(i=s[a],c=n[a],s.hasOwnProperty(a)&&(i!=null||c!=null))switch(a){case"value":g=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Fe(t,e,a,i,s,c)}e=l,n=o,s=x,g!=null?no(t,!!n,g,!1):!!s!=!!n&&(e!=null?no(t,!!n,e,!0):no(t,!!n,n?[]:"",!1));return;case"textarea":x=g=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Fe(t,e,l,null,s,a)}for(o in s)if(a=s[o],i=n[o],s.hasOwnProperty(o)&&(a!=null||i!=null))switch(o){case"value":g=a;break;case"defaultValue":x=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error($(91));break;default:a!==i&&Fe(t,e,o,a,s,i)}lT(t,g,x);return;case"option":for(var y in n)if(g=n[y],n.hasOwnProperty(y)&&g!=null&&!s.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:Fe(t,e,y,null,s,g)}for(c in s)if(g=s[c],x=n[c],s.hasOwnProperty(c)&&g!==x&&(g!=null||x!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Fe(t,e,c,g,s,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)g=n[T],n.hasOwnProperty(T)&&g!=null&&!s.hasOwnProperty(T)&&Fe(t,e,T,null,s,g);for(d in s)if(g=s[d],x=n[d],s.hasOwnProperty(d)&&g!==x&&(g!=null||x!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error($(137,e));break;default:Fe(t,e,d,g,s,x)}return;default:if(A0(e)){for(var A in n)g=n[A],n.hasOwnProperty(A)&&g!==void 0&&!s.hasOwnProperty(A)&&hg(t,e,A,void 0,s,g);for(m in s)g=s[m],x=n[m],!s.hasOwnProperty(m)||g===x||g===void 0&&x===void 0||hg(t,e,m,g,s,x);return}}for(var b in n)g=n[b],n.hasOwnProperty(b)&&g!=null&&!s.hasOwnProperty(b)&&Fe(t,e,b,null,s,g);for(p in s)g=s[p],x=n[p],!s.hasOwnProperty(p)||g===x||g==null&&x==null||Fe(t,e,p,g,s,x)}function kb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VM(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var a=n[s],i=a.transferSize,o=a.initiatorType,l=a.duration;if(i&&l&&kb(o)){for(o=0,l=a.responseEnd,s+=1;s<n.length;s++){var c=n[s],d=c.startTime;if(d>l)break;var m=c.transferSize,p=c.initiatorType;m&&kb(p)&&(c=c.responseEnd,o+=m*(c<l?1:(l-d)/(c-d)))}if(--s,e+=8*(i+o)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var fg=null,pg=null;function fm(t){return t.nodeType===9?t:t.ownerDocument}function Lb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fw(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function gg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=null;function UM(){var t=window.event;return t&&t.type==="popstate"?t===ap?!1:(ap=t,!0):(ap=null,!1)}var pw=typeof setTimeout=="function"?setTimeout:void 0,OM=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,zM=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(t){return Vb.resolve(null).then(t).catch(FM)}:pw;function FM(t){setTimeout(function(){throw t})}function Ai(t){return t==="head"}function Ub(t,e){var n=e,s=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(a),wo(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")uc(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,uc(n);for(var i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Qc]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=o}}else n==="body"&&uc(t.ownerDocument.body);n=a}while(n);wo(e)}function Ob(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function xg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xg(n),w0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function GM(t,e,n,s){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Qc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Xn(t.nextSibling),t===null)break}return null}function qM(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Xn(t.nextSibling),t===null))return null;return t}function gw(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Xn(t.nextSibling),t===null))return null;return t}function vg(t){return t.data==="$?"||t.data==="$~"}function yg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function BM(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var bg=null;function zb(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Xn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Fb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function xw(t,e,n){switch(e=fm(n),t){case"html":if(t=e.documentElement,!t)throw Error($(452));return t;case"head":if(t=e.head,!t)throw Error($(453));return t;case"body":if(t=e.body,!t)throw Error($(454));return t;default:throw Error($(451))}}function uc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);w0(t)}var es=new Map,Gb=new Set;function pm(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ta=Ve.d;Ve.d={f:HM,r:$M,D:YM,C:JM,L:KM,m:QM,X:WM,S:XM,M:ZM};function HM(){var t=Ta.f(),e=mh();return t||e}function $M(t){var e=Fo(t);e!==null&&e.tag===5&&e.type==="form"?dS(e):Ta.r(t)}var Ho=typeof document>"u"?null:document;function vw(t,e,n){var s=Ho;if(s&&typeof e=="string"&&e){var a=Yn(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Gb.has(a)||(Gb.add(a),t={rel:t,crossOrigin:n,href:e},s.querySelector(a)===null&&(e=s.createElement("link"),Xt(e,"link",t),zt(e),s.head.appendChild(e)))}}function YM(t){Ta.D(t),vw("dns-prefetch",t,null)}function JM(t,e){Ta.C(t,e),vw("preconnect",t,e)}function KM(t,e,n){Ta.L(t,e,n);var s=Ho;if(s&&t&&e){var a='link[rel="preload"][as="'+Yn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Yn(n.imageSizes)+'"]')):a+='[href="'+Yn(t)+'"]';var i=a;switch(e){case"style":i=So(t);break;case"script":i=$o(t)}es.has(i)||(t=tt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),es.set(i,t),s.querySelector(a)!==null||e==="style"&&s.querySelector(nd(i))||e==="script"&&s.querySelector(sd(i))||(e=s.createElement("link"),Xt(e,"link",t),zt(e),s.head.appendChild(e)))}}function QM(t,e){Ta.m(t,e);var n=Ho;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+Yn(s)+'"][href="'+Yn(t)+'"]',i=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=$o(t)}if(!es.has(i)&&(t=tt({rel:"modulepreload",href:t},e),es.set(i,t),n.querySelector(a)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(sd(i)))return}s=n.createElement("link"),Xt(s,"link",t),zt(s),n.head.appendChild(s)}}}function XM(t,e,n){Ta.S(t,e,n);var s=Ho;if(s&&t){var a=to(s).hoistableStyles,i=So(t);e=e||"default";var o=a.get(i);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(nd(i)))l.loading=5;else{t=tt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=es.get(i))&&mx(t,n);var c=o=s.createElement("link");zt(c),Xt(c,"link",t),c._p=new Promise(function(d,m){c.onload=d,c.onerror=m}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,wu(o,e,s)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(i,o)}}}function WM(t,e){Ta.X(t,e);var n=Ho;if(n&&t){var s=to(n).hoistableScripts,a=$o(t),i=s.get(a);i||(i=n.querySelector(sd(a)),i||(t=tt({src:t,async:!0},e),(e=es.get(a))&&hx(t,e),i=n.createElement("script"),zt(i),Xt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function ZM(t,e){Ta.M(t,e);var n=Ho;if(n&&t){var s=to(n).hoistableScripts,a=$o(t),i=s.get(a);i||(i=n.querySelector(sd(a)),i||(t=tt({src:t,async:!0,type:"module"},e),(e=es.get(a))&&hx(t,e),i=n.createElement("script"),zt(i),Xt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function qb(t,e,n,s){var a=(a=ti.current)?pm(a):null;if(!a)throw Error($(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=So(n.href),n=to(a).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=So(n.href);var i=to(a).hoistableStyles,o=i.get(t);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,o),(i=a.querySelector(nd(t)))&&!i._p&&(o.instance=i,o.state.loading=5),es.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},es.set(t,n),i||eP(a,t,n,o.state))),e&&s===null)throw Error($(528,""));return o}if(e&&s!==null)throw Error($(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=$o(n),n=to(a).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error($(444,t))}}function So(t){return'href="'+Yn(t)+'"'}function nd(t){return'link[rel="stylesheet"]['+t+"]"}function yw(t){return tt({},t,{"data-precedence":t.precedence,precedence:null})}function eP(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Xt(e,"link",n),zt(e),t.head.appendChild(e))}function $o(t){return'[src="'+Yn(t)+'"]'}function sd(t){return"script[async]"+t}function Bb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+Yn(n.href)+'"]');if(s)return e.instance=s,zt(s),s;var a=tt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),zt(s),Xt(s,"style",a),wu(s,n.precedence,t),e.instance=s;case"stylesheet":a=So(n.href);var i=t.querySelector(nd(a));if(i)return e.state.loading|=4,e.instance=i,zt(i),i;s=yw(n),(a=es.get(a))&&mx(s,a),i=(t.ownerDocument||t).createElement("link"),zt(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Xt(i,"link",s),e.state.loading|=4,wu(i,n.precedence,t),e.instance=i;case"script":return i=$o(n.src),(a=t.querySelector(sd(i)))?(e.instance=a,zt(a),a):(s=n,(a=es.get(i))&&(s=tt({},n),hx(s,a)),t=t.ownerDocument||t,a=t.createElement("script"),zt(a),Xt(a,"link",s),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error($(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,wu(s,n.precedence,t));return e.instance}function wu(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,i=a,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===e)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function mx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function hx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Au=null;function Hb(t,e,n){if(Au===null){var s=new Map,a=Au=new Map;a.set(n,s)}else a=Au,s=a.get(n),s||(s=new Map,a.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var i=n[a];if(!(i[Qc]||i[Jt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(e)||"";o=t+o;var l=s.get(o);l?l.push(i):s.set(o,[i])}}return s}function $b(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function tP(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function bw(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function nP(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=So(s.href),i=e.querySelector(nd(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=gm.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,zt(i);return}i=e.ownerDocument||e,s=yw(s),(a=es.get(a))&&mx(s,a),i=i.createElement("link"),zt(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Xt(i,"link",s),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=gm.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var ip=0;function sP(t,e){return t.stylesheets&&t.count===0&&Iu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Iu(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&ip===0&&(ip=62500*VM());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Iu(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>ip?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(a)}}:null}function gm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Iu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xm=null;function Iu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xm=new Map,e.forEach(aP,t),xm=null,gm.call(t))}function aP(t,e){if(!(e.state.loading&4)){var n=xm.get(t);if(n)var s=n.get(null);else{n=new Map,xm.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}a=e.instance,o=a.getAttribute("data-precedence"),i=n.get(o)||s,i===s&&n.set(null,a),n.set(o,a),this.count++,s=gm.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),i?i.parentNode.insertBefore(a,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var jc={$$typeof:Zs,Provider:null,Consumer:null,_currentValue:Zi,_currentValue2:Zi,_threadCount:0};function iP(t,e,n,s,a,i,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Af(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Af(0),this.hiddenUpdates=Af(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function _w(t,e,n,s,a,i,o,l,c,d,m,p){return t=new iP(t,e,n,o,c,d,m,p,l),e=1,i===!0&&(e|=24),i=wn(3,null,null,e),t.current=i,i.stateNode=t,e=O0(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},G0(i),t}function Ew(t){return t?(t=Jr,t):Jr}function Nw(t,e,n,s,a,i){a=Ew(a),s.context===null?s.context=a:s.pendingContext=a,s=si(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=ai(t,s,e),n!==null&&(_n(n,t,e),sc(n,t,e))}function Yb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fx(t,e){Yb(t,e),(t=t.alternate)&&Yb(t,e)}function Cw(t){if(t.tag===13||t.tag===31){var e=yr(t,67108864);e!==null&&_n(e,t,67108864),fx(t,67108864)}}function Jb(t){if(t.tag===13||t.tag===31){var e=Ln();e=T0(e);var n=yr(t,e);n!==null&&_n(n,t,e),fx(t,e)}}var vm=!0;function rP(t,e,n,s){var a=ce.T;ce.T=null;var i=Ve.p;try{Ve.p=2,px(t,e,n,s)}finally{Ve.p=i,ce.T=a}}function oP(t,e,n,s){var a=ce.T;ce.T=null;var i=Ve.p;try{Ve.p=8,px(t,e,n,s)}finally{Ve.p=i,ce.T=a}}function px(t,e,n,s){if(vm){var a=_g(s);if(a===null)sp(t,e,s,ym,n),Kb(t,s);else if(cP(a,t,e,n,s))s.stopPropagation();else if(Kb(t,s),e&4&&-1<lP.indexOf(t)){for(;a!==null;){var i=Fo(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=Hi(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-kn(o);l.entanglements[1]|=c,o&=~c}Fs(i),!(Le&6)&&(lm=Pn()+500,td(0))}}break;case 31:case 13:l=yr(i,2),l!==null&&_n(l,i,2),mh(),fx(i,2)}if(i=_g(s),i===null&&sp(t,e,s,ym,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else sp(t,e,s,null,n)}}function _g(t){return t=I0(t),gx(t)}var ym=null;function gx(t){if(ym=null,t=Gr(t),t!==null){var e=$c(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=BC(e),t!==null)return t;t=null}else if(n===31){if(t=HC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ym=t,null}function Tw(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yj()){case KC:return 2;case QC:return 8;case Ju:case Jj:return 32;case XC:return 268435456;default:return 32}default:return 32}}var Eg=!1,oi=null,li=null,ci=null,Rc=new Map,Mc=new Map,Ha=[],lP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kb(t,e){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Rc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(e.pointerId)}}function Ll(t,e,n,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Fo(e),e!==null&&Cw(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function cP(t,e,n,s,a){switch(e){case"focusin":return oi=Ll(oi,t,e,n,s,a),!0;case"dragenter":return li=Ll(li,t,e,n,s,a),!0;case"mouseover":return ci=Ll(ci,t,e,n,s,a),!0;case"pointerover":var i=a.pointerId;return Rc.set(i,Ll(Rc.get(i)||null,t,e,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Mc.set(i,Ll(Mc.get(i)||null,t,e,n,s,a)),!0}return!1}function Sw(t){var e=Gr(t.target);if(e!==null){var n=$c(e);if(n!==null){if(e=n.tag,e===13){if(e=BC(n),e!==null){t.blockedOn=e,Py(t.priority,function(){Jb(n)});return}}else if(e===31){if(e=HC(n),e!==null){t.blockedOn=e,Py(t.priority,function(){Jb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_g(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);zp=s,n.target.dispatchEvent(s),zp=null}else return e=Fo(n),e!==null&&Cw(e),t.blockedOn=n,!1;e.shift()}return!0}function Qb(t,e,n){ju(t)&&n.delete(e)}function dP(){Eg=!1,oi!==null&&ju(oi)&&(oi=null),li!==null&&ju(li)&&(li=null),ci!==null&&ju(ci)&&(ci=null),Rc.forEach(Qb),Mc.forEach(Qb)}function Qd(t,e){t.blockedOn===e&&(t.blockedOn=null,Eg||(Eg=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,dP)))}var Xd=null;function Xb(t){Xd!==t&&(Xd=t,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,function(){Xd===t&&(Xd=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],a=t[e+2];if(typeof s!="function"){if(gx(s||n)===null)continue;break}var i=Fo(n);i!==null&&(t.splice(e,3),e-=3,ng(i,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function wo(t){function e(c){return Qd(c,t)}oi!==null&&Qd(oi,t),li!==null&&Qd(li,t),ci!==null&&Qd(ci,t),Rc.forEach(e),Mc.forEach(e);for(var n=0;n<Ha.length;n++){var s=Ha[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Ha.length&&(n=Ha[0],n.blockedOn===null);)Sw(n),n.blockedOn===null&&Ha.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var a=n[s],i=n[s+1],o=a[En]||null;if(typeof i=="function")o||Xb(n);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[En]||null)l=o.formAction;else if(gx(a)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),Xb(n)}}}function ww(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(o){return a=o})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function xx(t){this._internalRoot=t}ph.prototype.render=xx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));var n=e.current,s=Ln();Nw(n,s,t,e,null,null)};ph.prototype.unmount=xx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nw(t.current,2,null,t,null,null),mh(),e[zo]=null}};function ph(t){this._internalRoot=t}ph.prototype.unstable_scheduleHydration=function(t){if(t){var e=nT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ha.length&&e!==0&&e<Ha[n].priority;n++);Ha.splice(n,0,t),n===0&&Sw(t)}};var Wb=GC.version;if(Wb!=="19.2.3")throw Error($(527,Wb,"19.2.3"));Ve.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=zj(e),t=t!==null?$C(t):null,t=t===null?null:t.stateNode,t};var uP={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Yc=Wd.inject(uP),Dn=Wd}catch{}}Wm.createRoot=function(t,e){if(!qC(t))throw Error($(299));var n=!1,s="",a=vS,i=yS,o=bS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=_w(t,1,!1,null,null,n,s,null,a,i,o,ww),t[zo]=e.current,ux(t),new xx(e)};Wm.hydrateRoot=function(t,e,n){if(!qC(t))throw Error($(299));var s=!1,a="",i=vS,o=yS,l=bS,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=_w(t,1,!0,e,n??null,s,a,c,i,o,l,ww),e.context=Ew(null),n=e.current,s=Ln(),s=T0(s),a=si(s),a.callback=null,ai(n,a,s),n=s,e.current.lanes=n,Kc(e,n),Fs(e),t[zo]=e.current,ux(t),new ph(e)};Wm.version="19.2.3";function Aw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Aw)}catch(t){console.error(t)}}Aw(),LC.exports=Wm;var mP=LC.exports;const hP=SC(mP);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zb="popstate";function fP(t={}){function e(s,a){let{pathname:i,search:o,hash:l}=s.location;return Ng("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Pc(a)}return gP(e,n,null,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ts(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pP(){return Math.random().toString(36).substring(2,10)}function e_(t,e){return{usr:t.state,key:t.key,idx:e}}function Ng(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Yo(e):e,state:n,key:e&&e.key||s||pP()}}function Pc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Yo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function gP(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l="POP",c=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function p(){l="POP";let A=m(),b=A==null?null:A-d;d=A,c&&c({action:l,location:T.location,delta:b})}function g(A,b){l="PUSH";let N=Ng(T.location,A,b);d=m()+1;let S=e_(N,d),D=T.createHref(N);try{o.pushState(S,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(D)}i&&c&&c({action:l,location:T.location,delta:1})}function x(A,b){l="REPLACE";let N=Ng(T.location,A,b);d=m();let S=e_(N,d),D=T.createHref(N);o.replaceState(S,"",D),i&&c&&c({action:l,location:T.location,delta:0})}function y(A){return xP(A)}let T={get action(){return l},get location(){return t(a,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Zb,p),c=A,()=>{a.removeEventListener(Zb,p),c=null}},createHref(A){return e(a,A)},createURL:y,encodeLocation(A){let b=y(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:x,go(A){return o.go(A)}};return T}function xP(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),rt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Pc(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Iw(t,e,n="/"){return vP(t,e,n,!1)}function vP(t,e,n,s){let a=typeof e=="string"?Yo(e):e,i=xa(a.pathname||"/",n);if(i==null)return null;let o=jw(t);yP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=jP(i);l=AP(o[c],d,s)}return l}function jw(t,e=[],n=[],s="",a=!1){let i=(o,l,c=a,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&c)return;rt(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let p=la([s,m.relativePath]),g=n.concat(m);o.children&&o.children.length>0&&(rt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),jw(o.children,e,g,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:SP(p,o.index),routesMeta:g})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of Rw(o.path))i(o,l,!0,d)}),e}function Rw(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=Rw(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function yP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wP(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var bP=/^:[\w-]+$/,_P=3,EP=2,NP=1,CP=10,TP=-2,t_=t=>t==="*";function SP(t,e){let n=t.split("/"),s=n.length;return n.some(t_)&&(s+=TP),e&&(s+=EP),n.filter(a=>!t_(a)).reduce((a,i)=>a+(bP.test(i)?_P:i===""?NP:CP),s)}function wP(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function AP(t,e,n=!1){let{routesMeta:s}=t,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=bm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),g=c.route;if(!p&&d&&n&&!s[s.length-1].route.index&&(p=bm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:la([i,p.pathname]),pathnameBase:DP(la([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=la([i,p.pathnameBase]))}return o}function bm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=IP(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,{paramName:m,isOptional:p},g)=>{if(m==="*"){let y=l[g]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function IP(t,e=!1,n=!0){ts(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function jP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ts(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function xa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var Mw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RP=t=>Mw.test(t);function MP(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Yo(t):t,i;if(n)if(RP(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ts(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=n_(n.substring(1),"/"):i=n_(n,e)}else i=e;return{pathname:i,search:kP(s),hash:LP(a)}}function n_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function rp(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vx(t){let e=PP(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function yx(t,e,n,s=!1){let a;typeof t=="string"?a=Yo(t):(a={...t},rt(!a.pathname||!a.pathname.includes("?"),rp("?","pathname","search",a)),rt(!a.pathname||!a.pathname.includes("#"),rp("#","pathname","hash",a)),rt(!a.search||!a.search.includes("#"),rp("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;a.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=MP(a,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}var la=t=>t.join("/").replace(/\/\/+/g,"/"),DP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,VP=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function UP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function OP(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Pw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Dw(t,e){let n=t;if(typeof n!="string"||!Mw.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(Pw)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=xa(o.pathname,e);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:a=!0}catch{ts(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kw=["POST","PUT","PATCH","DELETE"];new Set(kw);var zP=["GET",...kw];new Set(zP);var Jo=M.createContext(null);Jo.displayName="DataRouter";var gh=M.createContext(null);gh.displayName="DataRouterState";var FP=M.createContext(!1),Lw=M.createContext({isTransitioning:!1});Lw.displayName="ViewTransition";var GP=M.createContext(new Map);GP.displayName="Fetchers";var qP=M.createContext(null);qP.displayName="Await";var zn=M.createContext(null);zn.displayName="Navigation";var ad=M.createContext(null);ad.displayName="Location";var Ns=M.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var bx=M.createContext(null);bx.displayName="RouteError";var Vw="REACT_ROUTER_ERROR",BP="REDIRECT",HP="ROUTE_ERROR_RESPONSE";function $P(t){if(t.startsWith(`${Vw}:${BP}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function YP(t){if(t.startsWith(`${Vw}:${HP}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new VP(e.status,e.statusText,e.data)}catch{}}function JP(t,{relative:e}={}){rt(Ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=M.useContext(zn),{hash:a,pathname:i,search:o}=id(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:la([n,i])),s.createHref({pathname:l,search:o,hash:a})}function Ko(){return M.useContext(ad)!=null}function Gs(){return rt(Ko(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(ad).location}var Uw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ow(t){M.useContext(zn).static||M.useLayoutEffect(t)}function Cs(){let{isDataRoute:t}=M.useContext(Ns);return t?lD():KP()}function KP(){rt(Ko(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Jo),{basename:e,navigator:n}=M.useContext(zn),{matches:s}=M.useContext(Ns),{pathname:a}=Gs(),i=JSON.stringify(vx(s)),o=M.useRef(!1);return Ow(()=>{o.current=!0}),M.useCallback((c,d={})=>{if(ts(o.current,Uw),!o.current)return;if(typeof c=="number"){n.go(c);return}let m=yx(c,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:la([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,i,a,t])}M.createContext(null);function QP(){let{matches:t}=M.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function id(t,{relative:e}={}){let{matches:n}=M.useContext(Ns),{pathname:s}=Gs(),a=JSON.stringify(vx(n));return M.useMemo(()=>yx(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function XP(t,e){return zw(t,e)}function zw(t,e,n,s,a){var N;rt(Ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(zn),{matches:o}=M.useContext(Ns),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",m=l?l.pathnameBase:"/",p=l&&l.route;{let S=p&&p.path||"";Gw(d,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=Gs(),x;if(e){let S=typeof e=="string"?Yo(e):e;rt(m==="/"||((N=S.pathname)==null?void 0:N.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=g;let y=x.pathname||"/",T=y;if(m!=="/"){let S=m.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let A=Iw(t,{pathname:T});ts(p||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ts(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=nD(A&&A.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:la([m,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:la([m,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,n,s,a);return e&&b?M.createElement(ad.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},b):b}function WP(){let t=oD(),e=UP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:i},"ErrorBoundary")," or"," ",M.createElement("code",{style:i},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:a},n):null,o)}var ZP=M.createElement(WP,null),Fw=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=YP(t.digest);n&&(t=n)}let e=t!==void 0?M.createElement(Ns.Provider,{value:this.props.routeContext},M.createElement(bx.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?M.createElement(eD,{error:t},e):e}};Fw.contextType=FP;var op=new WeakMap;function eD({children:t,error:e}){let{basename:n}=M.useContext(zn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=$P(e.digest);if(s){let a=op.get(e);if(a)throw a;let i=Dw(s.location,n);if(Pw&&!op.get(e))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw op.set(e,o),o}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function tD({routeContext:t,match:e,children:n}){let s=M.useContext(Jo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Ns.Provider,{value:t},n)}function nD(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let m=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);rt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let l=!1,c=-1;if(n)for(let m=0;m<i.length;m++){let p=i[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=m),p.route.id){let{loaderData:g,errors:x}=n,y=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=n&&s?(m,p)=>{var g,x;s(m,{location:n.location,params:((x=(g=n.matches)==null?void 0:g[0])==null?void 0:x.params)??{},unstable_pattern:OP(n.matches),errorInfo:p})}:void 0;return i.reduceRight((m,p,g)=>{let x,y=!1,T=null,A=null;n&&(x=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||ZP,l&&(c<0&&g===0?(Gw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,A=null):c===g&&(y=!0,A=p.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,g+1)),N=()=>{let S;return x?S=T:y?S=A:p.route.Component?S=M.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=m,M.createElement(tD,{match:p,routeContext:{outlet:m,matches:b,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(Fw,{location:n.location,revalidation:n.revalidation,component:T,error:x,children:N(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):N()},null)}function _x(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sD(t){let e=M.useContext(Jo);return rt(e,_x(t)),e}function aD(t){let e=M.useContext(gh);return rt(e,_x(t)),e}function iD(t){let e=M.useContext(Ns);return rt(e,_x(t)),e}function Ex(t){let e=iD(t),n=e.matches[e.matches.length-1];return rt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function rD(){return Ex("useRouteId")}function oD(){var s;let t=M.useContext(bx),e=aD("useRouteError"),n=Ex("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function lD(){let{router:t}=sD("useNavigate"),e=Ex("useNavigate"),n=M.useRef(!1);return Ow(()=>{n.current=!0}),M.useCallback(async(a,i={})=>{ts(n.current,Uw),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var s_={};function Gw(t,e,n){!e&&!s_[t]&&(s_[t]=!0,ts(!1,n))}M.memo(cD);function cD({routes:t,future:e,state:n,onError:s}){return zw(t,void 0,n,s,e)}function cs({to:t,replace:e,state:n,relative:s}){rt(Ko(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(zn);ts(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=M.useContext(Ns),{pathname:o}=Gs(),l=Cs(),c=yx(t,vx(i),o,s==="path"),d=JSON.stringify(c);return M.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:s})},[l,d,s,e,n]),null}function on(t){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dD({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){rt(!Ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[l,a,i,o]);typeof n=="string"&&(n=Yo(n));let{pathname:d="/",search:m="",hash:p="",state:g=null,key:x="default"}=n,y=M.useMemo(()=>{let T=xa(d,l);return T==null?null:{location:{pathname:T,search:m,hash:p,state:g,key:x},navigationType:s}},[l,d,m,p,g,x,s]);return ts(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:M.createElement(zn.Provider,{value:c},M.createElement(ad.Provider,{children:e,value:y}))}function uD({children:t,location:e}){return XP(Cg(t),e)}function Cg(t,e=[]){let n=[];return M.Children.forEach(t,(s,a)=>{if(!M.isValidElement(s))return;let i=[...e,a];if(s.type===M.Fragment){n.push.apply(n,Cg(s.props.children,i));return}rt(s.type===on,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Cg(s.props.children,i)),n.push(o)}),n}var Ru="get",Mu="application/x-www-form-urlencoded";function xh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function mD(t){return xh(t)&&t.tagName.toLowerCase()==="button"}function hD(t){return xh(t)&&t.tagName.toLowerCase()==="form"}function fD(t){return xh(t)&&t.tagName.toLowerCase()==="input"}function pD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gD(t,e){return t.button===0&&(!e||e==="_self")&&!pD(t)}var Zd=null;function xD(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var vD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lp(t){return t!=null&&!vD.has(t)?(ts(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mu}"`),null):t}function yD(t,e){let n,s,a,i,o;if(hD(t)){let l=t.getAttribute("action");s=l?xa(l,e):null,n=t.getAttribute("method")||Ru,a=lp(t.getAttribute("enctype"))||Mu,i=new FormData(t)}else if(mD(t)||fD(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?xa(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Ru,a=lp(t.getAttribute("formenctype"))||lp(l.getAttribute("enctype"))||Mu,i=new FormData(l,t),!xD()){let{name:d,type:m,value:p}=t;if(m==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,p)}}else{if(xh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ru,s=null,a=Mu,o=t}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bD(t,e,n,s){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${s}`:a.pathname=`${a.pathname}.${s}`:a.pathname==="/"?a.pathname=`_root.${s}`:e&&xa(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function _D(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ED(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ND(t,e,n){let s=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await _D(i,n);return o.links?o.links():[]}return[]}));return wD(s.flat(1).filter(ED).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function a_(t,e,n,s,a,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var m;return n[d].pathname!==c.pathname||((m=n[d].route.path)==null?void 0:m.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var p;let m=s.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function CD(t,e,{includeHydrateFallback:n}={}){return TD(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function TD(t){return[...new Set(t)]}function SD(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function wD(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let i=JSON.stringify(SD(a));return n.has(i)||(n.add(i),s.push({key:i,link:a})),s},[])}function qw(){let t=M.useContext(Jo);return Nx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function AD(){let t=M.useContext(gh);return Nx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cx=M.createContext(void 0);Cx.displayName="FrameworkContext";function Bw(){let t=M.useContext(Cx);return Nx(t,"You must render this element inside a <HydratedRouter> element"),t}function ID(t,e){let n=M.useContext(Cx),[s,a]=M.useState(!1),[i,o]=M.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:m,onTouchStart:p}=e,g=M.useRef(null);M.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=b=>{b.forEach(N=>{o(N.isIntersecting)})},A=new IntersectionObserver(T,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),M.useEffect(()=>{if(s){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[s]);let x=()=>{a(!0)},y=()=>{a(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Vl(l,x),onBlur:Vl(c,y),onMouseEnter:Vl(d,x),onMouseLeave:Vl(m,y),onTouchStart:Vl(p,x)}]:[!1,g,{}]}function Vl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jD({page:t,...e}){let{router:n}=qw(),s=M.useMemo(()=>Iw(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?M.createElement(MD,{page:t,matches:s,...e}):null}function RD(t){let{manifest:e,routeModules:n}=Bw(),[s,a]=M.useState([]);return M.useEffect(()=>{let i=!1;return ND(t,e,n).then(o=>{i||a(o)}),()=>{i=!0}},[t,e,n]),s}function MD({page:t,matches:e,...n}){let s=Gs(),{future:a,manifest:i,routeModules:o}=Bw(),{basename:l}=qw(),{loaderData:c,matches:d}=AD(),m=M.useMemo(()=>a_(t,e,d,i,s,"data"),[t,e,d,i,s]),p=M.useMemo(()=>a_(t,e,d,i,s,"assets"),[t,e,d,i,s]),g=M.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let T=new Set,A=!1;if(e.forEach(N=>{var D;let S=i.routes[N.route.id];!S||!S.hasLoader||(!m.some(V=>V.route.id===N.route.id)&&N.route.id in c&&((D=o[N.route.id])!=null&&D.shouldRevalidate)||S.hasClientLoader?A=!0:T.add(N.route.id))}),T.size===0)return[];let b=bD(t,l,a.unstable_trailingSlashAwareDataRequests,"data");return A&&T.size>0&&b.searchParams.set("_routes",e.filter(N=>T.has(N.route.id)).map(N=>N.route.id).join(",")),[b.pathname+b.search]},[l,a.unstable_trailingSlashAwareDataRequests,c,s,i,m,e,t,o]),x=M.useMemo(()=>CD(p,i),[p,i]),y=RD(p);return M.createElement(M.Fragment,null,g.map(T=>M.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),x.map(T=>M.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),y.map(({key:T,link:A})=>M.createElement("link",{key:T,nonce:n.nonce,...A})))}function PD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var DD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{DD&&(window.__reactRouterVersion="7.12.0")}catch{}function kD({basename:t,children:e,unstable_useTransitions:n,window:s}){let a=M.useRef();a.current==null&&(a.current=fP({window:s,v5Compat:!0}));let i=a.current,[o,l]=M.useState({action:i.action,location:i.location}),c=M.useCallback(d=>{n===!1?l(d):M.startTransition(()=>l(d))},[n]);return M.useLayoutEffect(()=>i.listen(c),[i,c]),M.createElement(dD,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var Hw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$w=M.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...x},y){let{basename:T,unstable_useTransitions:A}=M.useContext(zn),b=typeof d=="string"&&Hw.test(d),N=Dw(d,T);d=N.to;let S=JP(d,{relative:a}),[D,V,k]=ID(s,x),j=OD(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:A});function _(C){e&&e(C),C.defaultPrevented||j(C)}let I=M.createElement("a",{...x,...k,href:N.absoluteURL||S,onClick:N.isExternal||i?e:_,ref:PD(y,V),target:c,"data-discover":!b&&n==="render"?"true":void 0});return D&&!b?M.createElement(M.Fragment,null,I,M.createElement(jD,{page:S})):I});$w.displayName="Link";var LD=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},m){let p=id(o,{relative:d.relative}),g=Gs(),x=M.useContext(gh),{navigator:y,basename:T}=M.useContext(zn),A=x!=null&&BD(p)&&l===!0,b=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=g.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(N=N.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&T&&(S=xa(S,T)||S);const D=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let V=N===b||!a&&N.startsWith(b)&&N.charAt(D)==="/",k=S!=null&&(S===b||!a&&S.startsWith(b)&&S.charAt(b.length)==="/"),j={isActive:V,isPending:k,isTransitioning:A},_=V?e:void 0,I;typeof s=="function"?I=s(j):I=[s,V?"active":null,k?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(j):i;return M.createElement($w,{...d,"aria-current":_,className:I,ref:m,style:C,to:o,viewTransition:l},typeof c=="function"?c(j):c)});LD.displayName="NavLink";var VD=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:i,method:o=Ru,action:l,onSubmit:c,relative:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...x},y)=>{let{unstable_useTransitions:T}=M.useContext(zn),A=GD(),b=qD(l,{relative:d}),N=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&Hw.test(l),D=V=>{if(c&&c(V),V.defaultPrevented)return;V.preventDefault();let k=V.nativeEvent.submitter,j=(k==null?void 0:k.getAttribute("formmethod"))||o,_=()=>A(k||V.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:a,state:i,relative:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g});T&&n!==!1?M.startTransition(()=>_()):_()};return M.createElement("form",{ref:y,method:N,action:b,onSubmit:s?c:D,...x,"data-discover":!S&&t==="render"?"true":void 0})});VD.displayName="Form";function UD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yw(t){let e=M.useContext(Jo);return rt(e,UD(t)),e}function OD(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=Cs(),m=Gs(),p=id(t,{relative:i});return M.useCallback(g=>{if(gD(g,e)){g.preventDefault();let x=n!==void 0?n:Pc(m)===Pc(p),y=()=>d(t,{replace:x,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?M.startTransition(()=>y()):y()}},[m,d,p,n,s,e,t,a,i,o,l,c])}var zD=0,FD=()=>`__${String(++zD)}__`;function GD(){let{router:t}=Yw("useSubmit"),{basename:e}=M.useContext(zn),n=rD(),s=t.fetch,a=t.navigate;return M.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=yD(i,e);if(o.navigate===!1){let g=o.fetcherKey||FD();await s(g,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:p,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:p,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,a,e,n])}function qD(t,{relative:e}={}){let{basename:n}=M.useContext(zn),s=M.useContext(Ns);rt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...id(t||".",{relative:e})},o=Gs();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();i.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:la([n,i.pathname])),Pc(i)}function BD(t,{relative:e}={}){let n=M.useContext(Lw);rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Yw("useViewTransitionState"),a=id(t,{relative:e});if(!n.isTransitioning)return!1;let i=xa(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=xa(n.nextLocation.pathname,s)||n.nextLocation.pathname;return bm(a.pathname,o)!=null||bm(a.pathname,i)!=null}const HD="modulepreload",$D=function(t){return"/EDUPLANMX/"+t},i_={},Ao=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=$D(c),c in i_)return;i_[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":HD,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,x)=>{p.addEventListener("load",g),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},YD=()=>{};var r_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},JD=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[n++];e[s++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[n++],o=t[n++],l=t[n++],c=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,d=c?t[a+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(g=64)),s.push(n[m],n[p],n[g],n[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Jw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const i=n[t.charAt(a++)],l=a<t.length?n[t.charAt(a)]:0;++a;const d=a<t.length?n[t.charAt(a)]:64;++a;const p=a<t.length?n[t.charAt(a)]:64;if(++a,i==null||l==null||d==null||p==null)throw new KD;const g=i<<2|l>>4;if(s.push(g),d!==64){const x=l<<4&240|d>>2;if(s.push(x),p!==64){const y=d<<6&192|p;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QD=function(t){const e=Jw(t);return Kw.encodeByteArray(e,!0)},_m=function(t){return QD(t).replace(/\./g,"")},Qw=function(t){try{return Kw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=()=>XD().__FIREBASE_DEFAULTS__,ZD=()=>{if(typeof process>"u"||typeof r_>"u")return;const t=r_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qw(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return YD()||WD()||ZD()||e4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xw=t=>{var e,n;return(n=(e=vh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},t4=t=>{const e=Xw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ww=()=>{var t;return(t=vh())==null?void 0:t.config},Zw=t=>{var e;return(e=vh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_m(JSON.stringify(n)),_m(JSON.stringify(o)),""].join(".")}const mc={};function a4(){const t={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?t.emulator.push(e):t.prod.push(e);return t}function i4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let o_=!1;function tA(t,e){if(typeof window>"u"||typeof document>"u"||!Qo(window.location.host)||mc[t]===e||mc[t]||o_)return;mc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=a4().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{o_=!0,o()},g}function m(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=i4(s),x=n("text"),y=document.getElementById(x)||document.createElement("span"),T=n("learnmore"),A=document.getElementById(T)||document.createElement("a"),b=n("preprendIcon"),N=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),m(A,T);const D=d();c(N,b),S.append(N,y,A,D),document.body.appendChild(S)}i?(y.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function o4(){var e;const t=(e=vh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function d4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u4(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m4(){return!o4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h4(){try{return typeof indexedDB=="object"}catch{return!1}}function f4(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="FirebaseError";class Sa extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=p4,Object.setPrototypeOf(this,Sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rd.prototype.create)}}class rd{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?g4(i,s):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Sa(a,l,s)}}function g4(t,e){return t.replace(x4,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const x4=/\{\$([^}]+)}/g;function v4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function va(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const i=t[a],o=e[a];if(l_(i)&&l_(o)){if(!va(i,o))return!1}else if(i!==o)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function l_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Hl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,i]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function $l(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function y4(t,e){const n=new b4(t,e);return n.subscribe.bind(n)}class b4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_4(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=cp),a.error===void 0&&(a.error=cp),a.complete===void 0&&(a.complete=cp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class cr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new n4;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C4(e))try{this.getOrInitializeService({instanceIdentifier:Ji})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:a});s.resolve(i)}catch{}}}}clearInstance(e=Ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ji){return this.instances.has(e)}getOptions(e=Ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const i=this.instances.get(s);return i&&e(i,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:N4(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ji){return this.component?this.component.multipleInstances?e:Ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N4(t){return t===Ji?void 0:t}function C4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new E4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const S4={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},w4=Ne.INFO,A4={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},I4=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=A4[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tx{constructor(e){this.name=e,this._logLevel=w4,this._logHandler=I4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const j4=(t,e)=>e.some(n=>t instanceof n);let c_,d_;function R4(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function M4(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nA=new WeakMap,Tg=new WeakMap,sA=new WeakMap,dp=new WeakMap,Sx=new WeakMap;function P4(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(di(t.result)),a()},o=()=>{s(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nA.set(n,t)}).catch(()=>{}),Sx.set(e,t),e}function D4(t){if(Tg.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),a()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tg.set(t,e)}let Sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function k4(t){Sg=t(Sg)}function L4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(up(this),e,...n);return sA.set(s,e.sort?e.sort():[e]),di(s)}:M4().includes(t)?function(...e){return t.apply(up(this),e),di(nA.get(this))}:function(...e){return di(t.apply(up(this),e))}}function V4(t){return typeof t=="function"?L4(t):(t instanceof IDBTransaction&&D4(t),j4(t,R4())?new Proxy(t,Sg):t)}function di(t){if(t instanceof IDBRequest)return P4(t);if(dp.has(t))return dp.get(t);const e=V4(t);return e!==t&&(dp.set(t,e),Sx.set(e,t)),e}const up=t=>Sx.get(t);function U4(t,e,{blocked:n,upgrade:s,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),l=di(o);return s&&o.addEventListener("upgradeneeded",c=>{s(di(o.result),c.oldVersion,c.newVersion,di(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),a&&c.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const O4=["get","getKey","getAll","getAllKeys","count"],z4=["put","add","delete","clear"],mp=new Map;function u_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=z4.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||O4.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),a&&c.done]))[0]};return mp.set(e,i),i}k4(t=>({...t,get:(e,n,s)=>u_(e,n)||t.get(e,n,s),has:(e,n)=>!!u_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(G4(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function G4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wg="@firebase/app",m_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Tx("@firebase/app"),q4="@firebase/app-compat",B4="@firebase/analytics-compat",H4="@firebase/analytics",$4="@firebase/app-check-compat",Y4="@firebase/app-check",J4="@firebase/auth",K4="@firebase/auth-compat",Q4="@firebase/database",X4="@firebase/data-connect",W4="@firebase/database-compat",Z4="@firebase/functions",e5="@firebase/functions-compat",t5="@firebase/installations",n5="@firebase/installations-compat",s5="@firebase/messaging",a5="@firebase/messaging-compat",i5="@firebase/performance",r5="@firebase/performance-compat",o5="@firebase/remote-config",l5="@firebase/remote-config-compat",c5="@firebase/storage",d5="@firebase/storage-compat",u5="@firebase/firestore",m5="@firebase/ai",h5="@firebase/firestore-compat",f5="firebase",p5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="[DEFAULT]",g5={[wg]:"fire-core",[q4]:"fire-core-compat",[H4]:"fire-analytics",[B4]:"fire-analytics-compat",[Y4]:"fire-app-check",[$4]:"fire-app-check-compat",[J4]:"fire-auth",[K4]:"fire-auth-compat",[Q4]:"fire-rtdb",[X4]:"fire-data-connect",[W4]:"fire-rtdb-compat",[Z4]:"fire-fn",[e5]:"fire-fn-compat",[t5]:"fire-iid",[n5]:"fire-iid-compat",[s5]:"fire-fcm",[a5]:"fire-fcm-compat",[i5]:"fire-perf",[r5]:"fire-perf-compat",[o5]:"fire-rc",[l5]:"fire-rc-compat",[c5]:"fire-gcs",[d5]:"fire-gcs-compat",[u5]:"fire-fst",[h5]:"fire-fst-compat",[m5]:"fire-vertex","fire-js":"fire-js",[f5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new Map,x5=new Map,Ig=new Map;function h_(t,e){try{t.container.addComponent(e)}catch(n){ya.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Io(t){const e=t.name;if(Ig.has(e))return ya.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,t);for(const n of Em.values())h_(n,t);for(const n of x5.values())h_(n,t);return!0}function wx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function An(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new rd("app","Firebase",v5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=p5;function aA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Ag,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ui.create("bad-app-name",{appName:String(a)});if(n||(n=Ww()),!n)throw ui.create("no-options");const i=Em.get(a);if(i){if(va(n,i.options)&&va(s,i.config))return i;throw ui.create("duplicate-app",{appName:a})}const o=new T4(a);for(const c of Ig.values())o.addComponent(c);const l=new y5(n,s,o);return Em.set(a,l),l}function iA(t=Ag){const e=Em.get(t);if(!e&&t===Ag&&Ww())return aA();if(!e)throw ui.create("no-app",{appName:t});return e}function mi(t,e,n){let s=g5[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const o=[`Unable to register library "${s}" with version "${e}":`];a&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ya.warn(o.join(" "));return}Io(new cr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5="firebase-heartbeat-database",_5=1,Dc="firebase-heartbeat-store";let hp=null;function rA(){return hp||(hp=U4(b5,_5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),hp}async function E5(t){try{const n=(await rA()).transaction(Dc),s=await n.objectStore(Dc).get(oA(t));return await n.done,s}catch(e){if(e instanceof Sa)ya.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ya.warn(n.message)}}}async function f_(t,e){try{const s=(await rA()).transaction(Dc,"readwrite");await s.objectStore(Dc).put(e,oA(t)),await s.done}catch(n){if(n instanceof Sa)ya.warn(n.message);else{const s=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ya.warn(s.message)}}}function oA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=1024,C5=30;class T5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new w5(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=p_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>C5){const o=A5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ya.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p_(),{heartbeatsToSend:s,unsentEntries:a}=S5(this._heartbeatsCache.heartbeats),i=_m(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ya.warn(n),""}}}function p_(){return new Date().toISOString().substring(0,10)}function S5(t,e=N5){const n=[];let s=t.slice();for(const a of t){const i=n.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),g_(n)>e){i.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),g_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class w5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h4()?f4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return f_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return f_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function g_(t){return _m(JSON.stringify({version:2,heartbeats:t})).length}function A5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){Io(new cr("platform-logger",e=>new F4(e),"PRIVATE")),Io(new cr("heartbeat",e=>new T5(e),"PRIVATE")),mi(wg,m_,t),mi(wg,m_,"esm2020"),mi("fire-js","")}I5("");function lA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j5=lA,cA=new rd("auth","Firebase",lA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new Tx("@firebase/auth");function R5(t,...e){Nm.logLevel<=Ne.WARN&&Nm.warn(`Auth (${Xo}): ${t}`,...e)}function Pu(t,...e){Nm.logLevel<=Ne.ERROR&&Nm.error(`Auth (${Xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,...e){throw Ix(t,...e)}function ms(t,...e){return Ix(t,...e)}function Ax(t,e,n){const s={...j5(),[e]:n};return new rd("auth","Firebase",s).create(e,{appName:t.name})}function ca(t){return Ax(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M5(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&ns(t,"argument-error"),Ax(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ix(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return cA.create(t,...e)}function oe(t,e,...n){if(!t)throw Ix(e,...n)}function na(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function ba(t,e){t||na(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function P5(){return x_()==="http:"||x_()==="https:"}function x_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P5()||c4()||"connection"in navigator)?navigator.onLine:!0}function k5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.shortDelay=e,this.longDelay=n,ba(n>e,"Short delay should be less than long delay!"),this.isMobile=r4()||d4()}get(){return D5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e){ba(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U5=new ld(3e4,6e4);function Ii(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ji(t,e,n,s,a={}){return uA(t,a,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=od({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return l4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Qo(t.emulatorConfig.host)&&(d.credentials="include"),dA.fetch()(await mA(t,t.config.apiHost,n,l),d)})}async function uA(t,e,n){t._canInitEmulator=!1;const s={...L5,...e};try{const a=new z5(t),i=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw eu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw eu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw eu(t,"user-disabled",o);const m=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ax(t,m,d);ns(t,m)}}catch(a){if(a instanceof Sa)throw a;ns(t,"network-request-failed",{message:String(a)})}}async function cd(t,e,n,s,a={}){const i=await ji(t,e,n,s,a);return"mfaPendingCredential"in i&&ns(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mA(t,e,n,s){const a=`${e}${n}?${s}`,i=t,o=i.config.emulator?jx(t.config,a):`${t.config.apiScheme}://${a}`;return V5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function O5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ms(this.auth,"network-request-failed")),U5.get())})}}function eu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=ms(t,e,s);return a.customData._tokenResponse=n,a}function v_(t){return t!==void 0&&t.enterprise!==void 0}class F5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return O5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function G5(t,e){return ji(t,"GET","/v2/recaptchaConfig",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return ji(t,"POST","/v1/accounts:delete",e)}async function Cm(t,e){return ji(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B5(t,e=!1){const n=_t(t),s=await n.getIdToken(e),a=Rx(s);oe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:s,authTime:hc(fp(a.auth_time)),issuedAtTime:hc(fp(a.iat)),expirationTime:hc(fp(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fp(t){return Number(t)*1e3}function Rx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const a=Qw(n);return a?JSON.parse(a):(Pu("Failed to decode base64 JWT payload"),null)}catch(a){return Pu("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function y_(t){const e=Rx(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Sa&&H5(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function H5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(t){var p;const e=t.auth,n=await t.getIdToken(),s=await kc(t,Cm(e,{idToken:n}));oe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const i=(p=a.providerUserInfo)!=null&&p.length?hA(a.providerUserInfo):[],o=J5(t.providerData,i),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Rg(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function Y5(t){const e=_t(t);await Tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J5(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function hA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e){const n=await uA(t,{},async()=>{const s=od({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=await mA(t,a,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Qo(t.emulatorConfig.host)&&(c.credentials="include"),dA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q5(t,e){return ji(t,"POST","/v2/accounts:revokeToken",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=y_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:i}=await K5(e,n);this.updateTokensAndExpiration(s,a,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:i}=n,o=new lo;return s&&(oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),a&&(oe(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class us{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new $5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Rg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await kc(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return B5(this,e)}reload(){return Y5(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new us({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Tm(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(ca(this.auth));const e=await this.getIdToken();return await kc(this,q5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:x,providerData:y,stsTokenManager:T}=n;oe(p&&T,e,"internal-error");const A=lo.fromJSON(this.name,T);oe(typeof p=="string",e,"internal-error"),Va(s,e.name),Va(a,e.name),oe(typeof g=="boolean",e,"internal-error"),oe(typeof x=="boolean",e,"internal-error"),Va(i,e.name),Va(o,e.name),Va(l,e.name),Va(c,e.name),Va(d,e.name),Va(m,e.name);const b=new us({uid:p,auth:e,email:a,emailVerified:g,displayName:s,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:A,createdAt:d,lastLoginAt:m});return y&&Array.isArray(y)&&(b.providerData=y.map(N=>({...N}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,s=!1){const a=new lo;a.updateFromServerResponse(n);const i=new us({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Tm(i),i}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];oe(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?hA(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),l=new lo;l.updateFromIdToken(s);const c=new us({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new Rg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;function sa(t){ba(t instanceof Function,"Expected a class definition");let e=b_.get(t);return e?(ba(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fA.type="NONE";const __=fA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t,e,n){return`firebase:${t}:${e}:${n}`}class co{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:i}=this.auth;this.fullUserKey=Du(this.userKey,a.apiKey,i),this.fullPersistenceKey=Du("persistence",a.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cm(this.auth,{idToken:e}).catch(()=>{});return n?us._fromGetAccountInfoResponse(this.auth,n,e):null}return us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new co(sa(__),e,s);const a=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=a[0]||sa(__);const o=Du(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const g=await Cm(e,{idToken:m}).catch(()=>{});if(!g)break;p=await us._fromGetAccountInfoResponse(e,g,m)}else p=us._fromJSON(e,m);d!==i&&(l=p),i=d;break}}catch{}const c=a.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new co(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new co(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bA(e))return"Blackberry";if(_A(e))return"Webos";if(gA(e))return"Safari";if((e.includes("chrome/")||xA(e))&&!e.includes("edge/"))return"Chrome";if(yA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function pA(t=sn()){return/firefox\//i.test(t)}function gA(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xA(t=sn()){return/crios\//i.test(t)}function vA(t=sn()){return/iemobile/i.test(t)}function yA(t=sn()){return/android/i.test(t)}function bA(t=sn()){return/blackberry/i.test(t)}function _A(t=sn()){return/webos/i.test(t)}function Mx(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function X5(t=sn()){var e;return Mx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function W5(){return u4()&&document.documentMode===10}function EA(t=sn()){return Mx(t)||yA(t)||_A(t)||bA(t)||/windows phone/i.test(t)||vA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e=[]){let n;switch(t){case"Browser":n=E_(sn());break;case"Worker":n=`${E_(sn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(t,e={}){return ji(t,"GET","/v2/passwordPolicy",Ii(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=6;class n6{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??t6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N_(this),this.idTokenSubscription=new N_(this),this.beforeStateQueue=new Z5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sa(n)),this._initializationPromise=this.queue(async()=>{var s,a,i;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cm(this,{idToken:e}),s=await us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(An(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(ca(this));const n=e?_t(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e6(this),n=new n6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rd("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Q5(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sa(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,a);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&R5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ri(t){return _t(t)}class N_{constructor(e){this.auth=e,this.observer=null,this.addObserver=y4(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a6(t){yh=t}function CA(t){return yh.loadJS(t)}function i6(){return yh.recaptchaEnterpriseScript}function r6(){return yh.gapiScript}function o6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class l6{constructor(){this.enterprise=new c6}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class c6{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const d6="recaptcha-enterprise",TA="NO_RECAPTCHA";class u6{constructor(e){this.type=d6,this.auth=Ri(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{G5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new F5(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function a(i,o,l){const c=window.grecaptcha;v_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(TA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l6().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&v_(window.grecaptcha))a(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=i6();c.length!==0&&(c+=l),CA(c).then(()=>{a(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function C_(t,e,n,s=!1,a=!1){const i=new u6(t);let o;if(a)o=TA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Mg(t,e,n,s,a){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await C_(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await C_(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t,e){const n=wx(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),i=n.getOptions();if(va(i,e??{}))return a;ns(a,"already-initialized")}return n.initialize({options:e})}function h6(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(sa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function f6(t,e,n){const s=Ri(t);oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,i=SA(e),{host:o,port:l}=p6(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},m=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),oe(va(d,s.config.emulator)&&va(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,Qo(o)?(eA(`${i}//${o}${c}`),tA("Auth",!0)):g6()}function SA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function p6(t){const e=SA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const i=a[1];return{host:i,port:T_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:T_(o)}}}function T_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function g6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return na("not implemented")}_getIdTokenResponse(e){return na("not implemented")}_linkToIdToken(e,n){return na("not implemented")}_getReauthenticationResolver(e){return na("not implemented")}}async function x6(t,e){return ji(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e){return cd(t,"POST","/v1/accounts:signInWithPassword",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(t,e){return cd(t,"POST","/v1/accounts:signInWithEmailLink",Ii(t,e))}async function b6(t,e){return cd(t,"POST","/v1/accounts:signInWithEmailLink",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Px{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Lc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Lc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,n,"signInWithPassword",v6);case"emailLink":return y6(e,{email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,s,"signUpPassword",x6);case"emailLink":return b6(e,{idToken:n,email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return cd(t,"POST","/v1/accounts:signInWithIdp",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="http://localhost";class dr extends Px{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...i}=n;if(!s||!a)return null;const o=new dr(s,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,uo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:_6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=od(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N6(t){const e=Hl($l(t)).link,n=e?Hl($l(e)).deep_link_id:null,s=Hl($l(t)).deep_link_id;return(s?Hl($l(s)).link:null)||s||n||e||t}class Dx{constructor(e){const n=Hl($l(e)),s=n.apiKey??null,a=n.oobCode??null,i=E6(n.mode??null);oe(s&&a&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=N6(e);try{return new Dx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return Lc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dx.parseLink(n);return oe(s,"argument-error"),Lc._fromEmailAndCode(e,s.code,s.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd extends kx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends dd{constructor(){super("facebook.com")}static credential(e){return dr._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $a.credential(e.oauthAccessToken)}catch{return null}}}$a.FACEBOOK_SIGN_IN_METHOD="facebook.com";$a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return dr._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ws.credential(n,s)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends dd{constructor(){super("github.com")}static credential(e){return dr._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.GITHUB_SIGN_IN_METHOD="github.com";Ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends dd{constructor(){super("twitter.com")}static credential(e,n){return dr._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ja.credential(n,s)}catch{return null}}}Ja.TWITTER_SIGN_IN_METHOD="twitter.com";Ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(t,e){return cd(t,"POST","/v1/accounts:signUp",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const i=await us._fromIdTokenResponse(e,s,a),o=S_(s);return new ur({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=S_(s);return new ur({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function S_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends Sa{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Sm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new Sm(e,n,s,a)}}function wA(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sm._fromErrorAndOperation(t,i,e,s):i})}async function T6(t,e,n=!1){const s=await kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ur._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(t,e,n=!1){const{auth:s}=t;if(An(s.app))return Promise.reject(ca(s));const a="reauthenticate";try{const i=await kc(t,wA(s,a,e,t),n);oe(i.idToken,s,"internal-error");const o=Rx(i.idToken);oe(o,s,"internal-error");const{sub:l}=o;return oe(t.uid===l,s,"user-mismatch"),ur._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ns(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t,e,n=!1){if(An(t.app))return Promise.reject(ca(t));const s="signIn",a=await wA(t,s,e),i=await ur._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(i.user),i}async function w6(t,e){return AA(Ri(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(t){const e=Ri(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function A6(t,e,n){if(An(t.app))return Promise.reject(ca(t));const s=Ri(t),o=await Mg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C6).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&IA(t),c}),l=await ur._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function I6(t,e,n){return An(t.app)?Promise.reject(ca(t)):w6(_t(t),Wo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&IA(t),s})}function j6(t,e,n,s){return _t(t).onIdTokenChanged(e,n,s)}function R6(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function M6(t,e,n,s){return _t(t).onAuthStateChanged(e,n,s)}function P6(t){return _t(t).signOut()}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=1e3,k6=10;class RA extends jA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);W5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,k6):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},D6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RA.type="LOCAL";const L6=RA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends jA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}MA.type="SESSION";const PA=MA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new bh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:i}=n.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await V6(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Lx("",20);a.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:a,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function O6(t){ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function z6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function G6(){return DA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firebaseLocalStorageDb",q6=1,Am="firebaseLocalStorage",LA="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([Am],e?"readwrite":"readonly").objectStore(Am)}function B6(){const t=indexedDB.deleteDatabase(kA);return new ud(t).toPromise()}function Pg(){const t=indexedDB.open(kA,q6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Am,{keyPath:LA})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Am)?e(s):(s.close(),await B6(),e(await Pg()))})})}async function w_(t,e,n){const s=_h(t,!0).put({[LA]:e,value:n});return new ud(s).toPromise()}async function H6(t,e){const n=_h(t,!1).get(e),s=await new ud(n).toPromise();return s===void 0?null:s.value}function A_(t,e){const n=_h(t,!0).delete(e);return new ud(n).toPromise()}const $6=800,Y6=3;class VA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Y6)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(G6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await z6(),!this.activeServiceWorker)return;this.sender=new U6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pg();return await w_(e,wm,"1"),await A_(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>w_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>H6(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=_h(a,!1).getAll();return new ud(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VA.type="LOCAL";const J6=VA;new ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e){return e?sa(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends Px{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K6(t){return AA(t.auth,new Vx(t),t.bypassAuthState)}function Q6(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),S6(n,new Vx(t),t.bypassAuthState)}async function X6(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),T6(n,new Vx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,s,a,i=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K6;case"linkViaPopup":case"linkViaRedirect":return X6;case"reauthViaPopup":case"reauthViaRedirect":return Q6;default:ns(this.auth,"internal-error")}}resolve(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=new ld(2e3,1e4);async function Z6(t,e,n){if(An(t.app))return Promise.reject(ms(t,"operation-not-supported-in-this-environment"));const s=Ri(t);M5(t,e,kx);const a=UA(s,n);return new Qi(s,"signInViaPopup",e,a).executeNotNull()}class Qi extends OA{constructor(e,n,s,a,i){super(e,n,a,i),this.provider=s,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){ba(this.filter.length===1,"Popup operations only handle one event");const e=Lx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W6.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="pendingRedirect",ku=new Map;class t3 extends OA{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ku.get(this.auth._key());if(!e){try{const s=await n3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ku.set(this.auth._key(),e)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n3(t,e){const n=i3(e),s=a3(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function s3(t,e){ku.set(t._key(),e)}function a3(t){return sa(t._redirectPersistence)}function i3(t){return Du(e3,t.config.apiKey,t.name)}async function r3(t,e,n=!1){if(An(t.app))return Promise.reject(ca(t));const s=Ri(t),a=UA(s,e),o=await new t3(s,a,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=10*60*1e3;class l3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!zA(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(ms(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o3&&this.cachedEventUids.clear(),this.cachedEventUids.has(I_(e))}saveEventToCache(e){this.cachedEventUids.add(I_(e)),this.lastProcessedEventTime=Date.now()}}function I_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function c3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e={}){return ji(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m3=/^https?/;async function h3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await d3(t);for(const n of e)try{if(f3(n))return}catch{}ns(t,"unauthorized-domain")}function f3(t){const e=jg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!m3.test(n))return!1;if(u3.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=new ld(3e4,6e4);function j_(){const t=ks().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function g3(t){return new Promise((e,n)=>{var a,i,o;function s(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),n(ms(t,"network-request-failed"))},timeout:p3.get()})}if((i=(a=ks().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=ks().gapi)!=null&&o.load)s();else{const l=o6("iframefcb");return ks()[l]=()=>{gapi.load?s():n(ms(t,"network-request-failed"))},CA(`${r6()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function x3(t){return Lu=Lu||g3(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new ld(5e3,15e3),y3="__/auth/iframe",b3="emulator/auth/iframe",_3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N3(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jx(e,b3):`https://${t.config.authDomain}/${y3}`,s={apiKey:e.apiKey,appName:t.name,v:Xo},a=E3.get(t.config.apiHost);a&&(s.eid=a);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${od(s).slice(1)}`}async function C3(t){const e=await x3(t),n=ks().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:N3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_3,dontclear:!0},s=>new Promise(async(a,i)=>{await s.restyle({setHideOnLeave:!1});const o=ms(t,"network-request-failed"),l=ks().setTimeout(()=>{i(o)},v3.get());function c(){ks().clearTimeout(l),a(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S3=500,w3=600,A3="_blank",I3="http://localhost";class R_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j3(t,e,n,s=S3,a=w3){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...T3,width:s.toString(),height:a.toString(),top:i,left:o},d=sn().toLowerCase();n&&(l=xA(d)?A3:n),pA(d)&&(e=e||I3,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[x,y])=>`${g}${x}=${y},`,"");if(X5(d)&&l!=="_self")return R3(e||"",l),new R_(null);const p=window.open(e||"",l,m);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new R_(p)}function R3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="__/auth/handler",P3="emulator/auth/handler",D3=encodeURIComponent("fac");async function M_(t,e,n,s,a,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Xo,eventId:a};if(e instanceof kx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",v4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof dd){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),d=c?`#${D3}=${encodeURIComponent(c)}`:"";return`${k3(t)}?${od(l).slice(1)}${d}`}function k3({config:t}){return t.emulator?jx(t,P3):`https://${t.authDomain}/${M3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class L3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PA,this._completeRedirectFn=r3,this._overrideRedirectResult=s3}async _openPopup(e,n,s,a){var o;ba((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await M_(e,n,s,jg(),a);return j3(e,i,Lx())}async _openRedirect(e,n,s,a){await this._originValidation(e);const i=await M_(e,n,s,jg(),a);return O6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:i}=this.eventManagers[n];return a?Promise.resolve(a):(ba(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await C3(e),s=new l3(e);return n.register("authEvent",a=>(oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pp,{type:pp},a=>{var o;const i=(o=a==null?void 0:a[0])==null?void 0:o[pp];i!==void 0&&n(!!i),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EA()||gA()||Mx()}}const V3=L3;var P_="@firebase/auth",D_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z3(t){Io(new cr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NA(t)},d=new s6(s,a,i,c);return h6(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Io(new cr("auth-internal",e=>{const n=Ri(e.getProvider("auth").getImmediate());return(s=>new U3(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(P_,D_,O3(t)),mi(P_,D_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=5*60,G3=Zw("authIdTokenMaxAge")||F3;let k_=null;const q3=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>G3)return;const a=n==null?void 0:n.token;k_!==a&&(k_=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function B3(t=iA()){const e=wx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=m6(t,{popupRedirectResolver:V3,persistence:[J6,L6,PA]}),s=Zw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=q3(i.toString());R6(n,o,()=>o(n.currentUser)),j6(n,l=>o(l))}}const a=Xw("auth");return a&&f6(n,`http://${a}`),n}function H3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}a6({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const i=ms("internal-error");i.customData=a,n(i)},s.type="text/javascript",s.charset="UTF-8",H3().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z3("Browser");var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,FA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,_){function I(){}I.prototype=_.prototype,j.F=_.prototype,j.prototype=new I,j.prototype.constructor=j,j.D=function(C,E,P){for(var R=Array(arguments.length-2),H=2;H<arguments.length;H++)R[H-2]=arguments[H];return _.prototype[E].apply(C,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,_,I){I||(I=0);const C=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)C[E]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(E=0;E<16;++E)C[E]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=j.g[0],I=j.g[1],E=j.g[2];let P=j.g[3],R;R=_+(P^I&(E^P))+C[0]+3614090360&4294967295,_=I+(R<<7&4294967295|R>>>25),R=P+(E^_&(I^E))+C[1]+3905402710&4294967295,P=_+(R<<12&4294967295|R>>>20),R=E+(I^P&(_^I))+C[2]+606105819&4294967295,E=P+(R<<17&4294967295|R>>>15),R=I+(_^E&(P^_))+C[3]+3250441966&4294967295,I=E+(R<<22&4294967295|R>>>10),R=_+(P^I&(E^P))+C[4]+4118548399&4294967295,_=I+(R<<7&4294967295|R>>>25),R=P+(E^_&(I^E))+C[5]+1200080426&4294967295,P=_+(R<<12&4294967295|R>>>20),R=E+(I^P&(_^I))+C[6]+2821735955&4294967295,E=P+(R<<17&4294967295|R>>>15),R=I+(_^E&(P^_))+C[7]+4249261313&4294967295,I=E+(R<<22&4294967295|R>>>10),R=_+(P^I&(E^P))+C[8]+1770035416&4294967295,_=I+(R<<7&4294967295|R>>>25),R=P+(E^_&(I^E))+C[9]+2336552879&4294967295,P=_+(R<<12&4294967295|R>>>20),R=E+(I^P&(_^I))+C[10]+4294925233&4294967295,E=P+(R<<17&4294967295|R>>>15),R=I+(_^E&(P^_))+C[11]+2304563134&4294967295,I=E+(R<<22&4294967295|R>>>10),R=_+(P^I&(E^P))+C[12]+1804603682&4294967295,_=I+(R<<7&4294967295|R>>>25),R=P+(E^_&(I^E))+C[13]+4254626195&4294967295,P=_+(R<<12&4294967295|R>>>20),R=E+(I^P&(_^I))+C[14]+2792965006&4294967295,E=P+(R<<17&4294967295|R>>>15),R=I+(_^E&(P^_))+C[15]+1236535329&4294967295,I=E+(R<<22&4294967295|R>>>10),R=_+(E^P&(I^E))+C[1]+4129170786&4294967295,_=I+(R<<5&4294967295|R>>>27),R=P+(I^E&(_^I))+C[6]+3225465664&4294967295,P=_+(R<<9&4294967295|R>>>23),R=E+(_^I&(P^_))+C[11]+643717713&4294967295,E=P+(R<<14&4294967295|R>>>18),R=I+(P^_&(E^P))+C[0]+3921069994&4294967295,I=E+(R<<20&4294967295|R>>>12),R=_+(E^P&(I^E))+C[5]+3593408605&4294967295,_=I+(R<<5&4294967295|R>>>27),R=P+(I^E&(_^I))+C[10]+38016083&4294967295,P=_+(R<<9&4294967295|R>>>23),R=E+(_^I&(P^_))+C[15]+3634488961&4294967295,E=P+(R<<14&4294967295|R>>>18),R=I+(P^_&(E^P))+C[4]+3889429448&4294967295,I=E+(R<<20&4294967295|R>>>12),R=_+(E^P&(I^E))+C[9]+568446438&4294967295,_=I+(R<<5&4294967295|R>>>27),R=P+(I^E&(_^I))+C[14]+3275163606&4294967295,P=_+(R<<9&4294967295|R>>>23),R=E+(_^I&(P^_))+C[3]+4107603335&4294967295,E=P+(R<<14&4294967295|R>>>18),R=I+(P^_&(E^P))+C[8]+1163531501&4294967295,I=E+(R<<20&4294967295|R>>>12),R=_+(E^P&(I^E))+C[13]+2850285829&4294967295,_=I+(R<<5&4294967295|R>>>27),R=P+(I^E&(_^I))+C[2]+4243563512&4294967295,P=_+(R<<9&4294967295|R>>>23),R=E+(_^I&(P^_))+C[7]+1735328473&4294967295,E=P+(R<<14&4294967295|R>>>18),R=I+(P^_&(E^P))+C[12]+2368359562&4294967295,I=E+(R<<20&4294967295|R>>>12),R=_+(I^E^P)+C[5]+4294588738&4294967295,_=I+(R<<4&4294967295|R>>>28),R=P+(_^I^E)+C[8]+2272392833&4294967295,P=_+(R<<11&4294967295|R>>>21),R=E+(P^_^I)+C[11]+1839030562&4294967295,E=P+(R<<16&4294967295|R>>>16),R=I+(E^P^_)+C[14]+4259657740&4294967295,I=E+(R<<23&4294967295|R>>>9),R=_+(I^E^P)+C[1]+2763975236&4294967295,_=I+(R<<4&4294967295|R>>>28),R=P+(_^I^E)+C[4]+1272893353&4294967295,P=_+(R<<11&4294967295|R>>>21),R=E+(P^_^I)+C[7]+4139469664&4294967295,E=P+(R<<16&4294967295|R>>>16),R=I+(E^P^_)+C[10]+3200236656&4294967295,I=E+(R<<23&4294967295|R>>>9),R=_+(I^E^P)+C[13]+681279174&4294967295,_=I+(R<<4&4294967295|R>>>28),R=P+(_^I^E)+C[0]+3936430074&4294967295,P=_+(R<<11&4294967295|R>>>21),R=E+(P^_^I)+C[3]+3572445317&4294967295,E=P+(R<<16&4294967295|R>>>16),R=I+(E^P^_)+C[6]+76029189&4294967295,I=E+(R<<23&4294967295|R>>>9),R=_+(I^E^P)+C[9]+3654602809&4294967295,_=I+(R<<4&4294967295|R>>>28),R=P+(_^I^E)+C[12]+3873151461&4294967295,P=_+(R<<11&4294967295|R>>>21),R=E+(P^_^I)+C[15]+530742520&4294967295,E=P+(R<<16&4294967295|R>>>16),R=I+(E^P^_)+C[2]+3299628645&4294967295,I=E+(R<<23&4294967295|R>>>9),R=_+(E^(I|~P))+C[0]+4096336452&4294967295,_=I+(R<<6&4294967295|R>>>26),R=P+(I^(_|~E))+C[7]+1126891415&4294967295,P=_+(R<<10&4294967295|R>>>22),R=E+(_^(P|~I))+C[14]+2878612391&4294967295,E=P+(R<<15&4294967295|R>>>17),R=I+(P^(E|~_))+C[5]+4237533241&4294967295,I=E+(R<<21&4294967295|R>>>11),R=_+(E^(I|~P))+C[12]+1700485571&4294967295,_=I+(R<<6&4294967295|R>>>26),R=P+(I^(_|~E))+C[3]+2399980690&4294967295,P=_+(R<<10&4294967295|R>>>22),R=E+(_^(P|~I))+C[10]+4293915773&4294967295,E=P+(R<<15&4294967295|R>>>17),R=I+(P^(E|~_))+C[1]+2240044497&4294967295,I=E+(R<<21&4294967295|R>>>11),R=_+(E^(I|~P))+C[8]+1873313359&4294967295,_=I+(R<<6&4294967295|R>>>26),R=P+(I^(_|~E))+C[15]+4264355552&4294967295,P=_+(R<<10&4294967295|R>>>22),R=E+(_^(P|~I))+C[6]+2734768916&4294967295,E=P+(R<<15&4294967295|R>>>17),R=I+(P^(E|~_))+C[13]+1309151649&4294967295,I=E+(R<<21&4294967295|R>>>11),R=_+(E^(I|~P))+C[4]+4149444226&4294967295,_=I+(R<<6&4294967295|R>>>26),R=P+(I^(_|~E))+C[11]+3174756917&4294967295,P=_+(R<<10&4294967295|R>>>22),R=E+(_^(P|~I))+C[2]+718787259&4294967295,E=P+(R<<15&4294967295|R>>>17),R=I+(P^(E|~_))+C[9]+3951481745&4294967295,j.g[0]=j.g[0]+_&4294967295,j.g[1]=j.g[1]+(E+(R<<21&4294967295|R>>>11))&4294967295,j.g[2]=j.g[2]+E&4294967295,j.g[3]=j.g[3]+P&4294967295}s.prototype.v=function(j,_){_===void 0&&(_=j.length);const I=_-this.blockSize,C=this.C;let E=this.h,P=0;for(;P<_;){if(E==0)for(;P<=I;)a(this,j,P),P+=this.blockSize;if(typeof j=="string"){for(;P<_;)if(C[E++]=j.charCodeAt(P++),E==this.blockSize){a(this,C),E=0;break}}else for(;P<_;)if(C[E++]=j[P++],E==this.blockSize){a(this,C),E=0;break}}this.h=E,this.o+=_},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var _=1;_<j.length-8;++_)j[_]=0;_=this.o*8;for(var I=j.length-8;I<j.length;++I)j[I]=_&255,_/=256;for(this.v(j),j=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)j[_++]=this.g[I]>>>C&255;return j};function i(j,_){var I=l;return Object.prototype.hasOwnProperty.call(I,j)?I[j]:I[j]=_(j)}function o(j,_){this.h=_;const I=[];let C=!0;for(let E=j.length-1;E>=0;E--){const P=j[E]|0;C&&P==_||(I[E]=P,C=!1)}this.g=I}var l={};function c(j){return-128<=j&&j<128?i(j,function(_){return new o([_|0],_<0?-1:0)}):new o([j|0],j<0?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return p;if(j<0)return A(d(-j));const _=[];let I=1;for(let C=0;j>=I;C++)_[C]=j/I|0,I*=4294967296;return new o(_,0)}function m(j,_){if(j.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(j.charAt(0)=="-")return A(m(j.substring(1),_));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(_,8));let C=p;for(let P=0;P<j.length;P+=8){var E=Math.min(8,j.length-P);const R=parseInt(j.substring(P,P+E),_);E<8?(E=d(Math.pow(_,E)),C=C.j(E).add(d(R))):(C=C.j(I),C=C.add(d(R)))}return C}var p=c(0),g=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-A(this).m();let j=0,_=1;for(let I=0;I<this.g.length;I++){const C=this.i(I);j+=(C>=0?C:4294967296+C)*_,_*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(y(this))return"0";if(T(this))return"-"+A(this).toString(j);const _=d(Math.pow(j,6));var I=this;let C="";for(;;){const E=D(I,_).g;I=b(I,E.j(_));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(j);if(I=E,y(I))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function y(j){if(j.h!=0)return!1;for(let _=0;_<j.g.length;_++)if(j.g[_]!=0)return!1;return!0}function T(j){return j.h==-1}t.l=function(j){return j=b(this,j),T(j)?-1:y(j)?0:1};function A(j){const _=j.g.length,I=[];for(let C=0;C<_;C++)I[C]=~j.g[C];return new o(I,~j.h).add(g)}t.abs=function(){return T(this)?A(this):this},t.add=function(j){const _=Math.max(this.g.length,j.g.length),I=[];let C=0;for(let E=0;E<=_;E++){let P=C+(this.i(E)&65535)+(j.i(E)&65535),R=(P>>>16)+(this.i(E)>>>16)+(j.i(E)>>>16);C=R>>>16,P&=65535,R&=65535,I[E]=R<<16|P}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(j,_){return j.add(A(_))}t.j=function(j){if(y(this)||y(j))return p;if(T(this))return T(j)?A(this).j(A(j)):A(A(this).j(j));if(T(j))return A(this.j(A(j)));if(this.l(x)<0&&j.l(x)<0)return d(this.m()*j.m());const _=this.g.length+j.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let E=0;E<j.g.length;E++){const P=this.i(C)>>>16,R=this.i(C)&65535,H=j.i(E)>>>16,O=j.i(E)&65535;I[2*C+2*E]+=R*O,N(I,2*C+2*E),I[2*C+2*E+1]+=P*O,N(I,2*C+2*E+1),I[2*C+2*E+1]+=R*H,N(I,2*C+2*E+1),I[2*C+2*E+2]+=P*H,N(I,2*C+2*E+2)}for(j=0;j<_;j++)I[j]=I[2*j+1]<<16|I[2*j];for(j=_;j<2*_;j++)I[j]=0;return new o(I,0)};function N(j,_){for(;(j[_]&65535)!=j[_];)j[_+1]+=j[_]>>>16,j[_]&=65535,_++}function S(j,_){this.g=j,this.h=_}function D(j,_){if(y(_))throw Error("division by zero");if(y(j))return new S(p,p);if(T(j))return _=D(A(j),_),new S(A(_.g),A(_.h));if(T(_))return _=D(j,A(_)),new S(A(_.g),_.h);if(j.g.length>30){if(T(j)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=_;C.l(j)<=0;)I=V(I),C=V(C);var E=k(I,1),P=k(C,1);for(C=k(C,2),I=k(I,2);!y(C);){var R=P.add(C);R.l(j)<=0&&(E=E.add(I),P=R),C=k(C,1),I=k(I,1)}return _=b(j,E.j(_)),new S(E,_)}for(E=p;j.l(_)>=0;){for(I=Math.max(1,Math.floor(j.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=d(I),R=P.j(_);T(R)||R.l(j)>0;)I-=C,P=d(I),R=P.j(_);y(P)&&(P=g),E=E.add(P),j=b(j,R)}return new S(E,j)}t.B=function(j){return D(this,j).h},t.and=function(j){const _=Math.max(this.g.length,j.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&j.i(C);return new o(I,this.h&j.h)},t.or=function(j){const _=Math.max(this.g.length,j.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|j.i(C);return new o(I,this.h|j.h)},t.xor=function(j){const _=Math.max(this.g.length,j.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^j.i(C);return new o(I,this.h^j.h)};function V(j){const _=j.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=j.i(C)<<1|j.i(C-1)>>>31;return new o(I,j.h)}function k(j,_){const I=_>>5;_%=32;const C=j.g.length-I,E=[];for(let P=0;P<C;P++)E[P]=_>0?j.i(P+I)>>>_|j.i(P+I+1)<<32-_:j.i(P+I);return new o(E,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,FA=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,hi=o}).apply(typeof L_<"u"?L_:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GA,Yl,qA,Vu,Dg,BA,HA,$A;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var v=0;v<f.length;++v){var w=f[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function a(f,v){if(v)e:{var w=s;f=f.split(".");for(var L=0;L<f.length-1;L++){var U=f[L];if(!(U in w))break e;w=w[U]}f=f[f.length-1],L=w[f],v=v(L),v!=L&&v!=null&&e(w,f,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(v){var w=[],L;for(L in v)Object.prototype.hasOwnProperty.call(v,L)&&w.push([L,v[L]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function c(f,v,w){return f.call.apply(f.bind,arguments)}function d(f,v,w){return d=c,d.apply(null,arguments)}function m(f,v){var w=Array.prototype.slice.call(arguments,1);return function(){var L=w.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function p(f,v){function w(){}w.prototype=v.prototype,f.Z=v.prototype,f.prototype=new w,f.prototype.constructor=f,f.Ob=function(L,U,z){for(var K=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)K[ye-2]=arguments[ye];return v.prototype[U].apply(L,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function x(f){const v=f.length;if(v>0){const w=Array(v);for(let L=0;L<v;L++)w[L]=f[L];return w}return[]}function y(f,v){for(let L=1;L<arguments.length;L++){const U=arguments[L];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=f.length||0;const z=U.length||0;f.length=w+z;for(let K=0;K<z;K++)f[w+K]=U[K]}else f.push(U)}}class T{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function A(f){o.setTimeout(()=>{throw f},0)}function b(){var f=j;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class N{constructor(){this.h=this.g=null}add(v,w){const L=S.get();L.set(v,w),this.h?this.h.next=L:this.g=L,this.h=L}}var S=new T(()=>new D,f=>f.reset());class D{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let V,k=!1,j=new N,_=()=>{const f=Promise.resolve(void 0);V=()=>{f.then(I)}};function I(){for(var f;f=b();){try{f.h.call(f.g)}catch(w){A(w)}var v=S;v.j(f),v.h<100&&(v.h++,f.next=v.g,v.g=f)}k=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};o.addEventListener("test",w,v),o.removeEventListener("test",w,v)}catch{}return f}();function R(f){return/^[\s\xa0]*$/.test(f)}function H(f,v){E.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,v)}p(H,E),H.prototype.init=function(f,v){const w=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget,v||(w=="mouseover"?v=f.fromElement:w=="mouseout"&&(v=f.toElement)),this.relatedTarget=v,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var O="closure_listenable_"+(Math.random()*1e6|0),q=0;function Z(f,v,w,L,U){this.listener=f,this.proxy=null,this.src=v,this.type=w,this.capture=!!L,this.ha=U,this.key=++q,this.da=this.fa=!1}function G(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ee(f,v,w){for(const L in f)v.call(w,f[L],L,f)}function de(f,v){for(const w in f)v.call(void 0,f[w],w,f)}function Ie(f){const v={};for(const w in f)v[w]=f[w];return v}const nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(f,v){let w,L;for(let U=1;U<arguments.length;U++){L=arguments[U];for(w in L)f[w]=L[w];for(let z=0;z<nt.length;z++)w=nt[z],Object.prototype.hasOwnProperty.call(L,w)&&(f[w]=L[w])}}function ie(f){this.src=f,this.g={},this.h=0}ie.prototype.add=function(f,v,w,L,U){const z=f.toString();f=this.g[z],f||(f=this.g[z]=[],this.h++);const K=Ht(f,v,L,U);return K>-1?(v=f[K],w||(v.fa=!1)):(v=new Z(v,this.src,z,!!L,U),v.fa=w,f.push(v)),v};function be(f,v){const w=v.type;if(w in f.g){var L=f.g[w],U=Array.prototype.indexOf.call(L,v,void 0),z;(z=U>=0)&&Array.prototype.splice.call(L,U,1),z&&(G(v),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Ht(f,v,w,L){for(let U=0;U<f.length;++U){const z=f[U];if(!z.da&&z.listener==v&&z.capture==!!w&&z.ha==L)return U}return-1}var gt="closure_lm_"+(Math.random()*1e6|0),kt={};function fn(f,v,w,L,U){if(Array.isArray(v)){for(let z=0;z<v.length;z++)fn(f,v[z],w,L,U);return null}return w=Et(w),f&&f[O]?f.J(v,w,l(L)?!!L.capture:!1,U):Lt(f,v,w,!1,L,U)}function Lt(f,v,w,L,U,z){if(!v)throw Error("Invalid event type");const K=l(U)?!!U.capture:!!U;let ye=ke(f);if(ye||(f[gt]=ye=new ie(f)),w=ye.add(v,w,L,K,z),w.proxy)return w;if(L=lt(),w.proxy=L,L.src=f,L.listener=w,f.addEventListener)P||(U=K),U===void 0&&(U=!1),f.addEventListener(v.toString(),L,U);else if(f.attachEvent)f.attachEvent(st(v.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return w}function lt(){function f(w){return v.call(f.src,f.listener,w)}const v=fe;return f}function ge(f,v,w,L,U){if(Array.isArray(v))for(var z=0;z<v.length;z++)ge(f,v[z],w,L,U);else L=l(L)?!!L.capture:!!L,w=Et(w),f&&f[O]?(f=f.i,z=String(v).toString(),z in f.g&&(v=f.g[z],w=Ht(v,w,L,U),w>-1&&(G(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete f.g[z],f.h--)))):f&&(f=ke(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Ht(v,w,L,U)),(w=f>-1?v[f]:null)&&ae(w))}function ae(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[O])be(v.i,f);else{var w=f.type,L=f.proxy;v.removeEventListener?v.removeEventListener(w,L,f.capture):v.detachEvent?v.detachEvent(st(w),L):v.addListener&&v.removeListener&&v.removeListener(L),(w=ke(v))?(be(w,f),w.h==0&&(w.src=null,v[gt]=null)):G(f)}}}function st(f){return f in kt?kt[f]:kt[f]="on"+f}function fe(f,v){if(f.da)f=!0;else{v=new H(v,this);const w=f.listener,L=f.ha||f.src;f.fa&&ae(f),f=w.call(L,v)}return f}function ke(f){return f=f[gt],f instanceof ie?f:null}var Re="__closure_events_fn_"+(Math.random()*1e9>>>0);function Et(f){return typeof f=="function"?f:(f[Re]||(f[Re]=function(v){return f.handleEvent(v)}),f[Re])}function we(){C.call(this),this.i=new ie(this),this.M=this,this.G=null}p(we,C),we.prototype[O]=!0,we.prototype.removeEventListener=function(f,v,w,L){ge(this,f,v,w,L)};function qe(f,v){var w,L=f.G;if(L)for(w=[];L;L=L.G)w.push(L);if(f=f.M,L=v.type||v,typeof v=="string")v=new E(v,f);else if(v instanceof E)v.target=v.target||f;else{var U=v;v=new E(L,f),ot(v,U)}U=!0;let z,K;if(w)for(K=w.length-1;K>=0;K--)z=v.g=w[K],U=Ia(z,L,!0,v)&&U;if(z=v.g=f,U=Ia(z,L,!0,v)&&U,U=Ia(z,L,!1,v)&&U,w)for(K=0;K<w.length;K++)z=v.g=w[K],U=Ia(z,L,!1,v)&&U}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var f=this.i;for(const v in f.g){const w=f.g[v];for(let L=0;L<w.length;L++)G(w[L]);delete f.g[v],f.h--}}this.G=null},we.prototype.J=function(f,v,w,L){return this.i.add(String(f),v,!1,w,L)},we.prototype.K=function(f,v,w,L){return this.i.add(String(f),v,!0,w,L)};function Ia(f,v,w,L){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();let U=!0;for(let z=0;z<v.length;++z){const K=v[z];if(K&&!K.da&&K.capture==w){const ye=K.listener,Rt=K.ha||K.src;K.fa&&be(f.i,K),U=ye.call(Rt,L)!==!1&&U}}return U&&!L.defaultPrevented}function of(f,v){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:o.setTimeout(f,v||0)}function ne(f){f.g=of(()=>{f.g=null,f.i&&(f.i=!1,ne(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class Gn extends C{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(f){C.call(this),this.h=f,this.g={}}p(an,C);var _d=[];function Ed(f){ee(f.g,function(v,w){this.g.hasOwnProperty(w)&&ae(v)},f),f.g={}}an.prototype.N=function(){an.Z.N.call(this),Ed(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hl=o.JSON.stringify,Nd=o.JSON.parse,Cd=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function fl(){}function pl(){}var mt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Li(){E.call(this,"d")}p(Li,E);function lf(){E.call(this,"c")}p(lf,E);var Vi={},Lv=null;function Td(){return Lv=Lv||new we}Vi.Ia="serverreachability";function Vv(f){E.call(this,Vi.Ia,f)}p(Vv,E);function gl(f){const v=Td();qe(v,new Vv(v))}Vi.STAT_EVENT="statevent";function Uv(f,v){E.call(this,Vi.STAT_EVENT,f),this.stat=v}p(Uv,E);function rn(f){const v=Td();qe(v,new Uv(v,f))}Vi.Ja="timingevent";function Ov(f,v){E.call(this,Vi.Ja,f),this.size=v}p(Ov,E);function xl(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},v)}function vl(){this.g=!0}vl.prototype.ua=function(){this.g=!1};function H1(f,v,w,L,U,z){f.info(function(){if(f.g)if(z){var K="",ye=z.split("&");for(let Be=0;Be<ye.length;Be++){var Rt=ye[Be].split("=");if(Rt.length>1){const Vt=Rt[0];Rt=Rt[1];const ws=Vt.split("_");K=ws.length>=2&&ws[1]=="type"?K+(Vt+"="+Rt+"&"):K+(Vt+"=redacted&")}}}else K=null;else K=z;return"XMLHTTP REQ ("+L+") [attempt "+U+"]: "+v+`
`+w+`
`+K})}function $1(f,v,w,L,U,z,K){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+U+"]: "+v+`
`+w+`
`+z+" "+K})}function Tr(f,v,w,L){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+J1(f,w)+(L?" "+L:"")})}function Y1(f,v){f.info(function(){return"TIMEOUT: "+v})}vl.prototype.info=function(){};function J1(f,v){if(!f.g)return v;if(!v)return null;try{const z=JSON.parse(v);if(z){for(f=0;f<z.length;f++)if(Array.isArray(z[f])){var w=z[f];if(!(w.length<2)){var L=w[1];if(Array.isArray(L)&&!(L.length<1)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(let K=1;K<L.length;K++)L[K]=""}}}}return hl(z)}catch{return v}}var Sd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fv;function cf(){}p(cf,fl),cf.prototype.g=function(){return new XMLHttpRequest},Fv=new cf;function yl(f){return encodeURIComponent(String(f))}function K1(f){var v=1;f=f.split(":");const w=[];for(;v>0&&f.length;)w.push(f.shift()),v--;return f.length&&w.push(f.join(":")),w}function ja(f,v,w,L){this.j=f,this.i=v,this.l=w,this.S=L||1,this.V=new an(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gv}function Gv(){this.i=null,this.g="",this.h=!1}var qv={},df={};function uf(f,v,w){f.M=1,f.A=Ad(Ss(v)),f.u=w,f.R=!0,Bv(f,null)}function Bv(f,v){f.F=Date.now(),wd(f),f.B=Ss(f.A);var w=f.B,L=f.S;Array.isArray(L)||(L=[String(L)]),sy(w.i,"t",L),f.C=0,w=f.j.L,f.h=new Gv,f.g=_y(f.j,w?v:null,!f.u),f.P>0&&(f.O=new Gn(d(f.Y,f,f.g),f.P)),v=f.V,w=f.g,L=f.ba;var U="readystatechange";Array.isArray(U)||(U&&(_d[0]=U.toString()),U=_d);for(let z=0;z<U.length;z++){const K=fn(w,U[z],L||v.handleEvent,!1,v.h||v);if(!K)break;v.g[K.key]=K}v=f.J?Ie(f.J):{},f.u?(f.v||(f.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,v)):(f.v="GET",f.g.ea(f.B,f.v,null,v)),gl(),H1(f.i,f.v,f.B,f.l,f.S,f.u)}ja.prototype.ba=function(f){f=f.target;const v=this.O;v&&Pa(f)==3?v.j():this.Y(f)},ja.prototype.Y=function(f){try{if(f==this.g)e:{const ye=Pa(this.g),Rt=this.g.ya(),Be=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||dy(this.g)))){this.K||ye!=4||Rt==7||(Rt==8||Be<=0?gl(3):gl(2)),mf(this);var v=this.g.ca();this.X=v;var w=Q1(this);if(this.o=v==200,$1(this.i,this.v,this.B,this.l,this.S,ye,v),this.o){if(this.U&&!this.L){t:{if(this.g){var L,U=this.g;if((L=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(L)){var z=L;break t}}z=null}if(f=z)Tr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hf(this,f);else{this.o=!1,this.m=3,rn(12),Ui(this),bl(this);break e}}if(this.R){f=!0;let Vt;for(;!this.K&&this.C<w.length;)if(Vt=X1(this,w),Vt==df){ye==4&&(this.m=4,rn(14),f=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==qv){this.m=4,rn(15),Tr(this.i,this.l,w,"[Invalid Chunk]"),f=!1;break}else Tr(this.i,this.l,Vt,null),hf(this,Vt);if(Hv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||w.length!=0||this.h.h||(this.m=1,rn(16),f=!1),this.o=this.o&&f,!f)Tr(this.i,this.l,w,"[Invalid Chunked Response]"),Ui(this),bl(this);else if(w.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),_f(K),K.P=!0,rn(11))}}else Tr(this.i,this.l,w,null),hf(this,w);ye==4&&Ui(this),this.o&&!this.K&&(ye==4?xy(this.j,this):(this.o=!1,wd(this)))}else uj(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Ui(this),bl(this)}}}catch{}finally{}};function Q1(f){if(!Hv(f))return f.g.la();const v=dy(f.g);if(v==="")return"";let w="";const L=v.length,U=Pa(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ui(f),bl(f),"";f.h.i=new o.TextDecoder}for(let z=0;z<L;z++)f.h.h=!0,w+=f.h.i.decode(v[z],{stream:!(U&&z==L-1)});return v.length=0,f.h.g+=w,f.C=0,f.h.g}function Hv(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function X1(f,v){var w=f.C,L=v.indexOf(`
`,w);return L==-1?df:(w=Number(v.substring(w,L)),isNaN(w)?qv:(L+=1,L+w>v.length?df:(v=v.slice(L,L+w),f.C=L+w,v)))}ja.prototype.cancel=function(){this.K=!0,Ui(this)};function wd(f){f.T=Date.now()+f.H,$v(f,f.H)}function $v(f,v){if(f.D!=null)throw Error("WatchDog timer not null");f.D=xl(d(f.aa,f),v)}function mf(f){f.D&&(o.clearTimeout(f.D),f.D=null)}ja.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Y1(this.i,this.B),this.M!=2&&(gl(),rn(17)),Ui(this),this.m=2,bl(this)):$v(this,this.T-f)};function bl(f){f.j.I==0||f.K||xy(f.j,f)}function Ui(f){mf(f);var v=f.O;v&&typeof v.dispose=="function"&&v.dispose(),f.O=null,Ed(f.V),f.g&&(v=f.g,f.g=null,v.abort(),v.dispose())}function hf(f,v){try{var w=f.j;if(w.I!=0&&(w.g==f||ff(w.h,f))){if(!f.L&&ff(w.h,f)&&w.I==3){try{var L=w.Ba.g.parse(v)}catch{L=null}if(Array.isArray(L)&&L.length==3){var U=L;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<f.F)Pd(w),Rd(w);else break e;bf(w),rn(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=xl(d(w.Va,w),6e3));Kv(w.h)<=1&&w.ta&&(w.ta=void 0)}else zi(w,11)}else if((f.L||w.g==f)&&Pd(w),!R(v))for(U=w.Ba.g.parse(v),v=0;v<U.length;v++){let Be=U[v];const Vt=Be[0];if(!(Vt<=w.K))if(w.K=Vt,Be=Be[1],w.I==2)if(Be[0]=="c"){w.M=Be[1],w.ba=Be[2];const ws=Be[3];ws!=null&&(w.ka=ws,w.j.info("VER="+w.ka));const Fi=Be[4];Fi!=null&&(w.za=Fi,w.j.info("SVER="+w.za));const Da=Be[5];Da!=null&&typeof Da=="number"&&Da>0&&(L=1.5*Da,w.O=L,w.j.info("backChannelRequestTimeoutMs_="+L)),L=w;const ka=f.g;if(ka){const kd=ka.g?ka.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kd){var z=L.h;z.g||kd.indexOf("spdy")==-1&&kd.indexOf("quic")==-1&&kd.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(pf(z,z.h),z.h=null))}if(L.G){const Ef=ka.g?ka.g.getResponseHeader("X-HTTP-Session-Id"):null;Ef&&(L.wa=Ef,Qe(L.J,L.G,Ef))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-f.F,w.j.info("Handshake RTT: "+w.T+"ms")),L=w;var K=f;if(L.na=by(L,L.L?L.ba:null,L.W),K.L){Qv(L.h,K);var ye=K,Rt=L.O;Rt&&(ye.H=Rt),ye.D&&(mf(ye),wd(ye)),L.g=K}else py(L);w.i.length>0&&Md(w)}else Be[0]!="stop"&&Be[0]!="close"||zi(w,7);else w.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?zi(w,7):yf(w):Be[0]!="noop"&&w.l&&w.l.qa(Be),w.A=0)}}gl(4)}catch{}}var W1=class{constructor(f,v){this.g=f,this.map=v}};function Yv(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jv(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Kv(f){return f.h?1:f.g?f.g.size:0}function ff(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function pf(f,v){f.g?f.g.add(v):f.h=v}function Qv(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}Yv.prototype.cancel=function(){if(this.i=Xv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Xv(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const w of f.g.values())v=v.concat(w.G);return v}return x(f.i)}var Wv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z1(f,v){if(f){f=f.split("&");for(let w=0;w<f.length;w++){const L=f[w].indexOf("=");let U,z=null;L>=0?(U=f[w].substring(0,L),z=f[w].substring(L+1)):U=f[w],v(U,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ra(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;f instanceof Ra?(this.l=f.l,_l(this,f.j),this.o=f.o,this.g=f.g,El(this,f.u),this.h=f.h,gf(this,ay(f.i)),this.m=f.m):f&&(v=String(f).match(Wv))?(this.l=!1,_l(this,v[1]||"",!0),this.o=Nl(v[2]||""),this.g=Nl(v[3]||"",!0),El(this,v[4]),this.h=Nl(v[5]||"",!0),gf(this,v[6]||"",!0),this.m=Nl(v[7]||"")):(this.l=!1,this.i=new Tl(null,this.l))}Ra.prototype.toString=function(){const f=[];var v=this.j;v&&f.push(Cl(v,Zv,!0),":");var w=this.g;return(w||v=="file")&&(f.push("//"),(v=this.o)&&f.push(Cl(v,Zv,!0),"@"),f.push(yl(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&f.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(Cl(w,w.charAt(0)=="/"?nj:tj,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",Cl(w,aj)),f.join("")},Ra.prototype.resolve=function(f){const v=Ss(this);let w=!!f.j;w?_l(v,f.j):w=!!f.o,w?v.o=f.o:w=!!f.g,w?v.g=f.g:w=f.u!=null;var L=f.h;if(w)El(v,f.u);else if(w=!!f.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var U=v.h.lastIndexOf("/");U!=-1&&(L=v.h.slice(0,U+1)+L)}if(U=L,U==".."||U==".")L="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){L=U.lastIndexOf("/",0)==0,U=U.split("/");const z=[];for(let K=0;K<U.length;){const ye=U[K++];ye=="."?L&&K==U.length&&z.push(""):ye==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),L&&K==U.length&&z.push("")):(z.push(ye),L=!0)}L=z.join("/")}else L=U}return w?v.h=L:w=f.i.toString()!=="",w?gf(v,ay(f.i)):w=!!f.m,w&&(v.m=f.m),v};function Ss(f){return new Ra(f)}function _l(f,v,w){f.j=w?Nl(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function El(f,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);f.u=v}else f.u=null}function gf(f,v,w){v instanceof Tl?(f.i=v,ij(f.i,f.l)):(w||(v=Cl(v,sj)),f.i=new Tl(v,f.l))}function Qe(f,v,w){f.i.set(v,w)}function Ad(f){return Qe(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Nl(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Cl(f,v,w){return typeof f=="string"?(f=encodeURI(f).replace(v,ej),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ej(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Zv=/[#\/\?@]/g,tj=/[#\?:]/g,nj=/[#\?]/g,sj=/[#\?@]/g,aj=/#/g;function Tl(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Oi(f){f.g||(f.g=new Map,f.h=0,f.i&&Z1(f.i,function(v,w){f.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}t=Tl.prototype,t.add=function(f,v){Oi(this),this.i=null,f=Sr(this,f);let w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(v),this.h+=1,this};function ey(f,v){Oi(f),v=Sr(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function ty(f,v){return Oi(f),v=Sr(f,v),f.g.has(v)}t.forEach=function(f,v){Oi(this),this.g.forEach(function(w,L){w.forEach(function(U){f.call(v,U,L,this)},this)},this)};function ny(f,v){Oi(f);let w=[];if(typeof v=="string")ty(f,v)&&(w=w.concat(f.g.get(Sr(f,v))));else for(f=Array.from(f.g.values()),v=0;v<f.length;v++)w=w.concat(f[v]);return w}t.set=function(f,v){return Oi(this),this.i=null,f=Sr(this,f),ty(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},t.get=function(f,v){return f?(f=ny(this,f),f.length>0?String(f[0]):v):v};function sy(f,v,w){ey(f,v),w.length>0&&(f.i=null,f.g.set(Sr(f,v),x(w)),f.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(let L=0;L<v.length;L++){var w=v[L];const U=yl(w);w=ny(this,w);for(let z=0;z<w.length;z++){let K=U;w[z]!==""&&(K+="="+yl(w[z])),f.push(K)}}return this.i=f.join("&")};function ay(f){const v=new Tl;return v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),v}function Sr(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function ij(f,v){v&&!f.j&&(Oi(f),f.i=null,f.g.forEach(function(w,L){const U=L.toLowerCase();L!=U&&(ey(this,L),sy(this,U,w))},f)),f.j=v}function rj(f,v){const w=new vl;if(o.Image){const L=new Image;L.onload=m(Ma,w,"TestLoadImage: loaded",!0,v,L),L.onerror=m(Ma,w,"TestLoadImage: error",!1,v,L),L.onabort=m(Ma,w,"TestLoadImage: abort",!1,v,L),L.ontimeout=m(Ma,w,"TestLoadImage: timeout",!1,v,L),o.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else v(!1)}function oj(f,v){const w=new vl,L=new AbortController,U=setTimeout(()=>{L.abort(),Ma(w,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:L.signal}).then(z=>{clearTimeout(U),z.ok?Ma(w,"TestPingServer: ok",!0,v):Ma(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(U),Ma(w,"TestPingServer: error",!1,v)})}function Ma(f,v,w,L,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),L(w)}catch{}}function lj(){this.g=new Cd}function xf(f){this.i=f.Sb||null,this.h=f.ab||!1}p(xf,fl),xf.prototype.g=function(){return new Id(this.i,this.h)};function Id(f,v){we.call(this),this.H=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Id,we),t=Id.prototype,t.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=v,this.readyState=1,wl(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(v.body=f),(this.H||o).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sl(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,wl(this)),this.g&&(this.readyState=3,wl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;iy(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function iy(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Sl(this):wl(this),this.readyState==3&&iy(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Sl(this))},t.Na=function(f){this.g&&(this.response=f,Sl(this))},t.ga=function(){this.g&&Sl(this)};function Sl(f){f.readyState=4,f.l=null,f.j=null,f.B=null,wl(f)}t.setRequestHeader=function(f,v){this.A.append(f,v)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=v.next();return f.join(`\r
`)};function wl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Id.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ry(f){let v="";return ee(f,function(w,L){v+=L,v+=":",v+=w,v+=`\r
`}),v}function vf(f,v,w){e:{for(L in w){var L=!1;break e}L=!0}L||(w=ry(w),typeof f=="string"?w!=null&&yl(w):Qe(f,v,w))}function ht(f){we.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ht,we);var cj=/^https?$/i,dj=["POST","PUT"];t=ht.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,v,w,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fv.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(z){oy(this,z);return}if(f=w||"",w=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var U in L)w.set(U,L[U]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const z of L.keys())w.set(z,L.get(z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(w.keys()).find(z=>z.toLowerCase()=="content-type"),U=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(dj,v,void 0)>=0)||L||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,K]of w)this.g.setRequestHeader(z,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(z){oy(this,z)}};function oy(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.o=5,ly(f),jd(f)}function ly(f){f.A||(f.A=!0,qe(f,"complete"),qe(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,qe(this,"complete"),qe(this,"abort"),jd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jd(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?cy(this):this.Xa())},t.Xa=function(){cy(this)};function cy(f){if(f.h&&typeof i<"u"){if(f.v&&Pa(f)==4)setTimeout(f.Ca.bind(f),0);else if(qe(f,"readystatechange"),Pa(f)==4){f.h=!1;try{const z=f.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var L;if(L=z===0){let K=String(f.D).match(Wv)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),L=!cj.test(K?K.toLowerCase():"")}w=L}if(w)qe(f,"complete"),qe(f,"success");else{f.o=6;try{var U=Pa(f)>2?f.g.statusText:""}catch{U=""}f.l=U+" ["+f.ca()+"]",ly(f)}}finally{jd(f)}}}}function jd(f,v){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const w=f.g;f.g=null,v||qe(f,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Pa(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Pa(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),Nd(v)}};function dy(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function uj(f){const v={};f=(f.g&&Pa(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(R(f[L]))continue;var w=K1(f[L]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const z=v[U]||[];v[U]=z,z.push(w)}de(v,function(L){return L.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Al(f,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||v}function uy(f){this.za=0,this.i=[],this.j=new vl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Al("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Al("baseRetryDelayMs",5e3,f),this.Za=Al("retryDelaySeedMs",1e4,f),this.Ta=Al("forwardChannelMaxRetries",2,f),this.va=Al("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Yv(f&&f.concurrentRequestLimit),this.Ba=new lj,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=uy.prototype,t.ka=8,t.I=1,t.connect=function(f,v,w,L){rn(0),this.W=f,this.H=v||{},w&&L!==void 0&&(this.H.OSID=w,this.H.OAID=L),this.F=this.X,this.J=by(this,null,this.W),Md(this)};function yf(f){if(my(f),f.I==3){var v=f.V++,w=Ss(f.J);if(Qe(w,"SID",f.M),Qe(w,"RID",v),Qe(w,"TYPE","terminate"),Il(f,w),v=new ja(f,f.j,v),v.M=2,v.A=Ad(Ss(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=v.A,w=!0),w||(v.g=_y(v.j,null),v.g.ea(v.A)),v.F=Date.now(),wd(v)}yy(f)}function Rd(f){f.g&&(_f(f),f.g.cancel(),f.g=null)}function my(f){Rd(f),f.v&&(o.clearTimeout(f.v),f.v=null),Pd(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function Md(f){if(!Jv(f.h)&&!f.m){f.m=!0;var v=f.Ea;V||_(),k||(V(),k=!0),j.add(v,f),f.D=0}}function mj(f,v){return Kv(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=v.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=xl(d(f.Ea,f,v),vy(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const U=new ja(this,this.j,f);let z=this.o;if(this.U&&(z?(z=Ie(z),ot(z,this.U)):z=this.U),this.u!==null||this.R||(U.J=z,z=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var L=this.i[w];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(v+=L,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=fy(this,U,v),w=Ss(this.J),Qe(w,"RID",f),Qe(w,"CVER",22),this.G&&Qe(w,"X-HTTP-Session-Id",this.G),Il(this,w),z&&(this.R?v="headers="+yl(ry(z))+"&"+v:this.u&&vf(w,this.u,z)),pf(this.h,U),this.Ra&&Qe(w,"TYPE","init"),this.S?(Qe(w,"$req",v),Qe(w,"SID","null"),U.U=!0,uf(U,w,null)):uf(U,w,v),this.I=2}}else this.I==3&&(f?hy(this,f):this.i.length==0||Jv(this.h)||hy(this))};function hy(f,v){var w;v?w=v.l:w=f.V++;const L=Ss(f.J);Qe(L,"SID",f.M),Qe(L,"RID",w),Qe(L,"AID",f.K),Il(f,L),f.u&&f.o&&vf(L,f.u,f.o),w=new ja(f,f.j,w,f.D+1),f.u===null&&(w.J=f.o),v&&(f.i=v.G.concat(f.i)),v=fy(f,w,1e3),w.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),pf(f.h,w),uf(w,L,v)}function Il(f,v){f.H&&ee(f.H,function(w,L){Qe(v,L,w)}),f.l&&ee({},function(w,L){Qe(v,L,w)})}function fy(f,v,w){w=Math.min(f.i.length,w);const L=f.l?d(f.l.Ka,f.l,f):null;e:{var U=f.i;let ye=-1;for(;;){const Rt=["count="+w];ye==-1?w>0?(ye=U[0].g,Rt.push("ofs="+ye)):ye=0:Rt.push("ofs="+ye);let Be=!0;for(let Vt=0;Vt<w;Vt++){var z=U[Vt].g;const ws=U[Vt].map;if(z-=ye,z<0)ye=Math.max(0,U[Vt].g-100),Be=!1;else try{z="req"+z+"_"||"";try{var K=ws instanceof Map?ws:Object.entries(ws);for(const[Fi,Da]of K){let ka=Da;l(Da)&&(ka=hl(Da)),Rt.push(z+Fi+"="+encodeURIComponent(ka))}}catch(Fi){throw Rt.push(z+"type="+encodeURIComponent("_badmap")),Fi}}catch{L&&L(ws)}}if(Be){K=Rt.join("&");break e}}K=void 0}return f=f.i.splice(0,w),v.G=f,K}function py(f){if(!f.g&&!f.v){f.Y=1;var v=f.Da;V||_(),k||(V(),k=!0),j.add(v,f),f.A=0}}function bf(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=xl(d(f.Da,f),vy(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,gy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=xl(d(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Rd(this),gy(this))};function _f(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function gy(f){f.g=new ja(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var v=Ss(f.na);Qe(v,"RID","rpc"),Qe(v,"SID",f.M),Qe(v,"AID",f.K),Qe(v,"CI",f.F?"0":"1"),!f.F&&f.ia&&Qe(v,"TO",f.ia),Qe(v,"TYPE","xmlhttp"),Il(f,v),f.u&&f.o&&vf(v,f.u,f.o),f.O&&(f.g.H=f.O);var w=f.g;f=f.ba,w.M=1,w.A=Ad(Ss(v)),w.u=null,w.R=!0,Bv(w,f)}t.Va=function(){this.C!=null&&(this.C=null,Rd(this),bf(this),rn(19))};function Pd(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function xy(f,v){var w=null;if(f.g==v){Pd(f),_f(f),f.g=null;var L=2}else if(ff(f.h,v))w=v.G,Qv(f.h,v),L=1;else return;if(f.I!=0){if(v.o)if(L==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var U=f.D;L=Td(),qe(L,new Ov(L,w)),Md(f)}else py(f);else if(U=v.m,U==3||U==0&&v.X>0||!(L==1&&mj(f,v)||L==2&&bf(f)))switch(w&&w.length>0&&(v=f.h,v.i=v.i.concat(w)),U){case 1:zi(f,5);break;case 4:zi(f,10);break;case 3:zi(f,6);break;default:zi(f,2)}}}function vy(f,v){let w=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(w*=2),w*v}function zi(f,v){if(f.j.info("Error code "+v),v==2){var w=d(f.bb,f),L=f.Ua;const U=!L;L=new Ra(L||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_l(L,"https"),Ad(L),U?rj(L.toString(),w):oj(L.toString(),w)}else rn(2);f.I=0,f.l&&f.l.pa(v),yy(f),my(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function yy(f){if(f.I=0,f.ja=[],f.l){const v=Xv(f.h);(v.length!=0||f.i.length!=0)&&(y(f.ja,v),y(f.ja,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.oa()}}function by(f,v,w){var L=w instanceof Ra?Ss(w):new Ra(w);if(L.g!="")v&&(L.g=v+"."+L.g),El(L,L.u);else{var U=o.location;L=U.protocol,v=v?v+"."+U.hostname:U.hostname,U=+U.port;const z=new Ra(null);L&&_l(z,L),v&&(z.g=v),U&&El(z,U),w&&(z.h=w),L=z}return w=f.G,v=f.wa,w&&v&&Qe(L,w,v),Qe(L,"VER",f.ka),Il(f,L),L}function _y(f,v,w){if(v&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Aa&&!f.ma?new ht(new xf({ab:w})):new ht(f.ma),v.Fa(f.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ey(){}t=Ey.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Dd(){}Dd.prototype.g=function(f,v){return new Cn(f,v)};function Cn(f,v){we.call(this),this.g=new uy(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(f?f["X-WebChannel-Client-Profile"]=v.sa:f={"X-WebChannel-Client-Profile":v.sa}),this.g.U=f,(f=v&&v.Qb)&&!R(f)&&(this.g.u=f),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.G=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new wr(this)}p(Cn,we),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){yf(this.g)},Cn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.v&&(w={},w.__data__=hl(f),f=w);v.i.push(new W1(v.Ya++,f)),v.I==3&&Md(v)},Cn.prototype.N=function(){this.g.l=null,delete this.j,yf(this.g),delete this.g,Cn.Z.N.call(this)};function Ny(f){Li.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const w in v){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}p(Ny,Li);function Cy(){lf.call(this),this.status=1}p(Cy,lf);function wr(f){this.g=f}p(wr,Ey),wr.prototype.ra=function(){qe(this.g,"a")},wr.prototype.qa=function(f){qe(this.g,new Ny(f))},wr.prototype.pa=function(f){qe(this.g,new Cy)},wr.prototype.oa=function(){qe(this.g,"b")},Dd.prototype.createWebChannel=Dd.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,$A=function(){return new Dd},HA=function(){return Td()},BA=Vi,Dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Sd.NO_ERROR=0,Sd.TIMEOUT=8,Sd.HTTP_ERROR=6,Vu=Sd,zv.COMPLETE="complete",qA=zv,pl.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",we.prototype.listen=we.prototype.J,Yl=pl,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,GA=ht}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const V_="@firebase/firestore",U_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Tx("@firebase/firestore");function Dr(){return mr.logLevel}function te(t,...e){if(mr.logLevel<=Ne.DEBUG){const n=e.map(Ux);mr.debug(`Firestore (${Zo}): ${t}`,...n)}}function _a(t,...e){if(mr.logLevel<=Ne.ERROR){const n=e.map(Ux);mr.error(`Firestore (${Zo}): ${t}`,...n)}}function hr(t,...e){if(mr.logLevel<=Ne.WARN){const n=e.map(Ux);mr.warn(`Firestore (${Zo}): ${t}`,...n)}}function Ux(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,YA(t,s,n)}function YA(t,e,n){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw _a(s),new Error(s)}function Ue(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||YA(e,a,s)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class $3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Y3{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let s=this.i;const a=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new da;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new da,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new da)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string",31837,{l:s}),new JA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class J3{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class K3{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new J3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const s=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const a=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new O_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new O_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=X3(40);for(let i=0;i<a.length;++i)s.length<20&&a[i]<n&&(s+=e.charAt(a[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function kg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),i=e.charAt(s);if(a!==i)return gp(a)===gp(i)?Ce(a,i):gp(a)?1:-1}return Ce(t.length,e.length)}const W3=55296,Z3=57343;function gp(t){const e=t.charCodeAt(0);return e>=W3&&e<=Z3}function jo(t,e,n){return t.length===e.length&&t.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class Is{constructor(e,n,s){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&le(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const i=Is.compareSegments(e.get(a),n.get(a));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=Is.isNumericId(e),a=Is.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Is.extractNumericId(e).compare(Is.extractNumericId(n)):kg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class $e extends Is{construct(e,n,s){return new $e(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const ek=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Is{construct(e,n,s){return new Ft(e,n,s)}static isValidIdentifier(e){return ek.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new Ft([z_])}static fromServerFormat(e){const n=[];let s="",a=0;const i=()=>{if(s.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(s+=l,a++):(i(),a++)}if(i(),o)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se($e.fromString(e))}static fromName(e){return new se($e.fromString(e).popFirst(5))}static empty(){return new se($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XA(t,e,n,s){if(e===!0&&s===!0)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F_(t){if(!se.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function G_(t){if(se.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tk(t,e){if(e<=0)throw new X(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e){const n={typeString:t};return e&&(n.value=e),n}function md(t,e){if(!WA(t))throw new X(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(a&&typeof o!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new X(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-62135596800,B_=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*B_);return new Pe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q_)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B_}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(md(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:It("string",Pe._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Pe(0,0))}static max(){return new he(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=-1;function nk(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=he.fromTimestamp(s===1e9?new Pe(n+1,0):new Pe(n,s));return new bi(a,se.empty(),e)}function sk(t){return new bi(t.readTime,t.key,Vc)}class bi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new bi(he.min(),se.empty(),Vc)}static max(){return new bi(he.max(),se.empty(),Vc)}}function ak(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==ik)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((s,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,a)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,s)=>{n(e)})}static reject(e){return new Y((n,s)=>{s(e)})}static waitFor(e){return new Y((n,s)=>{let a=0,i=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++i,o&&i===a&&n()},c=>s(c))}),o=!0,i===a&&n()})}static or(e){let n=Y.resolve(!1);for(const s of e)n=n.next(a=>a?Y.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,i)=>{s.push(n.call(this,a,i))}),this.waitFor(s)}static mapArray(e,n){return new Y((s,a)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++l,l===i&&s(o)},m=>a(m))}})}static doWhile(e,n){return new Y((s,a)=>{const i=()=>{e()===!0?n().next(()=>{i()},a):s()};i()})}}function ok(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ch.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=-1;function Th(t){return t==null}function Im(t){return t===0&&1/t==-1/0}function lk(t){return typeof t=="number"&&Number.isInteger(t)&&!Im(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="";function ck(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=H_(e)),e=dk(t.get(n),e);return H_(e)}function dk(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const i=t.charAt(a);switch(i){case"\0":n+="";break;case ZA:n+="";break;default:n+=i}}return n}function H_(t){return t+ZA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nu(this.root,e,this.comparator,!1)}getReverseIterator(){return new nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nu(this.root,e,this.comparator,!0)}}class nu{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,s,a,i){this.key=e,this.value=n,this.color=s??Yt.RED,this.left=a??Yt.EMPTY,this.right=i??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,i){return new Yt(e??this.key,n??this.value,s??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const i=s(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,n,s),null):i===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Yt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,s,a,i){return this}insert(e,n,s){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y_(this.data.getIterator())}getIteratorFrom(e){return new Y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=s.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class Y_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Pt(Ft.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new t2("Invalid base64 string: "+i):i}}(e);return new qt(n)}static fromUint8Array(e){const n=function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const uk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=uk.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ei(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="server_timestamp",s2="__type__",a2="__previous_value__",i2="__local_write_time__";function zx(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[s2])==null?void 0:s.stringValue)===n2}function Sh(t){const e=t.mapValue.fields[a2];return zx(e)?Sh(e):e}function Uc(t){const e=_i(t.mapValue.fields[i2].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,s,a,i,o,l,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=m}}const jm="(default)";class Ro{constructor(e,n){this.projectId=e,this.database=n||jm}static empty(){return new Ro("","")}get isDefaultDatabase(){return this.database===jm}isEqual(e){return e instanceof Ro&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="__type__",hk="__max__",su={mapValue:{}},o2="__vector__",Rm="value";function Ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zx(t)?4:pk(t)?9007199254740991:fk(t)?10:11:le(28295,{value:t})}function Os(t,e){if(t===e)return!0;const n=Ni(t);if(n!==Ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uc(t).isEqual(Uc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=_i(a.timestampValue),l=_i(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return Ei(a.bytesValue).isEqual(Ei(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return xt(a.geoPointValue.latitude)===xt(i.geoPointValue.latitude)&&xt(a.geoPointValue.longitude)===xt(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return xt(a.integerValue)===xt(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=xt(a.doubleValue),l=xt(i.doubleValue);return o===l?Im(o)===Im(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return jo(t.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return function(a,i){const o=a.mapValue.fields||{},l=i.mapValue.fields||{};if($_(o)!==$_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Os(o[c],l[c])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function Oc(t,e){return(t.values||[]).find(n=>Os(n,e))!==void 0}function Mo(t,e){if(t===e)return 0;const n=Ni(t),s=Ni(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=xt(i.integerValue||i.doubleValue),c=xt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return J_(t.timestampValue,e.timestampValue);case 4:return J_(Uc(t),Uc(e));case 5:return kg(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ei(i),c=Ei(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const m=Ce(l[d],c[d]);if(m!==0)return m}return Ce(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ce(xt(i.latitude),xt(o.latitude));return l!==0?l:Ce(xt(i.longitude),xt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,y,T;const l=i.fields||{},c=o.fields||{},d=(g=l[Rm])==null?void 0:g.arrayValue,m=(x=c[Rm])==null?void 0:x.arrayValue,p=Ce(((y=d==null?void 0:d.values)==null?void 0:y.length)||0,((T=m==null?void 0:m.values)==null?void 0:T.length)||0);return p!==0?p:K_(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===su.mapValue&&o===su.mapValue)return 0;if(i===su.mapValue)return 1;if(o===su.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=kg(c[p],m[p]);if(g!==0)return g;const x=Mo(l[c[p]],d[m[p]]);if(x!==0)return x}return Ce(c.length,m.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function J_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=_i(t),s=_i(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function K_(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const i=Mo(n[a],s[a]);if(i)return i}return Ce(n.length,s.length)}function Po(t){return Lg(t)}function Lg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=_i(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",a=!0;for(const i of n.values||[])a?a=!1:s+=",",s+=Lg(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",i=!0;for(const o of s)i?i=!1:a+=",",a+=`${o}:${Lg(n.fields[o])}`;return a+"}"}(t.mapValue):le(61005,{value:t})}function Uu(t){switch(Ni(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sh(t);return e?16+Uu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ei(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,i)=>a+Uu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let a=0;return Mi(s.fields,(i,o)=>{a+=i.length+Uu(o)}),a}(t.mapValue);default:throw le(13486,{value:t})}}function Q_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vg(t){return!!t&&"integerValue"in t}function Fx(t){return!!t&&"arrayValue"in t}function X_(t){return!!t&&"nullValue"in t}function W_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ou(t){return!!t&&"mapValue"in t}function fk(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[r2])==null?void 0:s.stringValue)===o2}function fc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mi(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=fc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(t.arrayValue.values[n]);return e}return{...t}}function pk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=Ft.emptyPath(),s={},a=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,a),s={},a=[],n=l.popLast()}o?s[l.lastSegment()]=fc(o):a.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,a)}delete(e){const n=this.field(e.popLast());Ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Ou(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Mi(n,(a,i)=>e[a]=i);for(const a of s)delete e[a]}clone(){return new bn(fc(this.value))}}function l2(t){const e=[];return Mi(t.fields,(n,s)=>{const a=new Ft([n]);if(Ou(s)){const i=l2(s.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,s,a,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new en(e,0,he.min(),he.min(),he.min(),bn.empty(),0)}static newFoundDocument(e,n,s,a){return new en(e,1,n,he.min(),s,a,0)}static newNoDocument(e,n){return new en(e,2,n,he.min(),he.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,he.min(),he.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.position=e,this.inclusive=n}}function Z_(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?s=se.comparator(se.fromName(o.referenceValue),n.key):s=Mo(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function eE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Os(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function gk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{}class wt extends c2{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new vk(e,n,s):n==="array-contains"?new _k(e,s):n==="in"?new Ek(e,s):n==="not-in"?new Nk(e,s):n==="array-contains-any"?new Ck(e,s):new wt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new yk(e,s):new bk(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mo(n,this.value)):n!==null&&Ni(this.value)===Ni(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends c2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vs(e,n)}matches(e){return d2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d2(t){return t.op==="and"}function u2(t){return xk(t)&&d2(t)}function xk(t){for(const e of t.filters)if(e instanceof vs)return!1;return!0}function Ug(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Po(t.value);if(u2(t))return t.filters.map(e=>Ug(e)).join(",");{const e=t.filters.map(n=>Ug(n)).join(",");return`${t.op}(${e})`}}function m2(t,e){return t instanceof wt?function(s,a){return a instanceof wt&&s.op===a.op&&s.field.isEqual(a.field)&&Os(s.value,a.value)}(t,e):t instanceof vs?function(s,a){return a instanceof vs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((i,o,l)=>i&&m2(o,a.filters[l]),!0):!1}(t,e):void le(19439)}function h2(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`}(t):t instanceof vs?function(n){return n.op.toString()+" {"+n.getFilters().map(h2).join(" ,")+"}"}(t):"Filter"}class vk extends wt{constructor(e,n,s){super(e,n,s),this.key=se.fromName(s.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class yk extends wt{constructor(e,n){super(e,"in",n),this.keys=f2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bk extends wt{constructor(e,n){super(e,"not-in",n),this.keys=f2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function f2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>se.fromName(s.referenceValue))}class _k extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fx(n)&&Oc(n.arrayValue,this.value)}}class Ek extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class Nk extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class Ck extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Oc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n=null,s=[],a=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function tE(t,e=null,n=[],s=[],a=null,i=null,o=null){return new Tk(t,e,n,s,a,i,o)}function Gx(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Ug(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Po(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Po(s)).join(",")),e.Te=n}return e.Te}function qx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!m2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eE(t.startAt,e.startAt)&&eE(t.endAt,e.endAt)}function Og(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n=null,s=[],a=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sk(t,e,n,s,a,i,o,l){return new nl(t,e,n,s,a,i,o,l)}function wh(t){return new nl(t)}function nE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p2(t){return t.collectionGroup!==null}function pc(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Pt(Ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new zc(i,s))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new zc(Ft.keyField(),s))}return e.Ie}function Ls(t){const e=pe(t);return e.Ee||(e.Ee=wk(e,pc(t))),e.Ee}function wk(t,e){if(t.limitType==="F")return tE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new zc(a.field,i)});const n=t.endAt?new Mm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Mm(t.startAt.position,t.startAt.inclusive):null;return tE(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function zg(t,e){const n=t.filters.concat([e]);return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pm(t,e,n){return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ah(t,e){return qx(Ls(t),Ls(e))&&t.limitType===e.limitType}function g2(t){return`${Gx(Ls(t))}|lt:${t.limitType}`}function kr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>h2(a)).join(", ")}]`),Th(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Po(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Po(a)).join(",")),`Target(${s})`}(Ls(t))}; limitType=${t.limitType})`}function Ih(t,e){return e.isFoundDocument()&&function(s,a){const i=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):se.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,a){for(const i of pc(s))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,a){for(const i of s.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(s,a){return!(s.startAt&&!function(o,l,c){const d=Z_(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,pc(s),a)||s.endAt&&!function(o,l,c){const d=Z_(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,pc(s),a))}(t,e)}function Ak(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x2(t){return(e,n)=>{let s=!1;for(const a of pc(t)){const i=Ik(a,e,n);if(i!==0)return i;s=s||a.field.isKeyField()}return 0}}function Ik(t,e,n){const s=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Mo(c,d):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,i]of s)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(n,s)=>{for(const[a,i]of s)e(a,i)})}isEmpty(){return e2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new dt(se.comparator);function Ea(){return jk}const v2=new dt(se.comparator);function Jl(...t){let e=v2;for(const n of t)e=e.insert(n.key,n);return e}function y2(t){let e=v2;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Xi(){return gc()}function b2(){return gc()}function gc(){return new _r(t=>t.toString(),(t,e)=>t.isEqual(e))}const Rk=new dt(se.comparator),Mk=new Pt(se.comparator);function Te(...t){let e=Mk;for(const n of t)e=e.add(n);return e}const Pk=new Pt(Ce);function Dk(){return Pk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Im(e)?"-0":e}}function _2(t){return{integerValue:""+t}}function kk(t,e){return lk(e)?_2(e):Bx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._=void 0}}function Lk(t,e,n){return t instanceof Dm?function(a,i){const o={fields:{[s2]:{stringValue:n2},[i2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&zx(i)&&(i=Sh(i)),i&&(o.fields[a2]=i),{mapValue:o}}(n,e):t instanceof Do?N2(t,e):t instanceof ko?C2(t,e):function(a,i){const o=E2(a,i),l=sE(o)+sE(a.Ae);return Vg(o)&&Vg(a.Ae)?_2(l):Bx(a.serializer,l)}(t,e)}function Vk(t,e,n){return t instanceof Do?N2(t,e):t instanceof ko?C2(t,e):n}function E2(t,e){return t instanceof km?function(s){return Vg(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Dm extends jh{}class Do extends jh{constructor(e){super(),this.elements=e}}function N2(t,e){const n=T2(e);for(const s of t.elements)n.some(a=>Os(a,s))||n.push(s);return{arrayValue:{values:n}}}class ko extends jh{constructor(e){super(),this.elements=e}}function C2(t,e){let n=T2(e);for(const s of t.elements)n=n.filter(a=>!Os(a,s));return{arrayValue:{values:n}}}class km extends jh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function sE(t){return xt(t.integerValue||t.doubleValue)}function T2(t){return Fx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.field=e,this.transform=n}}function Uk(t,e){return t.field.isEqual(e.field)&&function(s,a){return s instanceof Do&&a instanceof Do||s instanceof ko&&a instanceof ko?jo(s.elements,a.elements,Os):s instanceof km&&a instanceof km?Os(s.Ae,a.Ae):s instanceof Dm&&a instanceof Dm}(t.transform,e.transform)}class Ok{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rh{}function w2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mh(t.key,un.none()):new hd(t.key,t.data,un.none());{const n=t.data,s=bn.empty();let a=new Pt(Ft.comparator);for(let i of e.fields)if(!a.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),a=a.add(i)}return new Pi(t.key,s,new Rn(a.toArray()),un.none())}}function zk(t,e,n){t instanceof hd?function(a,i,o){const l=a.value.clone(),c=iE(a.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Pi?function(a,i,o){if(!zu(a.precondition,i))return void i.convertToUnknownDocument(o.version);const l=iE(a.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(A2(a)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xc(t,e,n,s){return t instanceof hd?function(i,o,l,c){if(!zu(i.precondition,o))return l;const d=i.value.clone(),m=rE(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Pi?function(i,o,l,c){if(!zu(i.precondition,o))return l;const d=rE(i.fieldTransforms,c,o),m=o.data;return m.setAll(A2(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return zu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Fk(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),i=E2(s.transform,a||null);i!=null&&(n===null&&(n=bn.empty()),n.set(s.field,i))}return n||null}function aE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&jo(s,a,(i,o)=>Uk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hd extends Rh{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Pi extends Rh{constructor(e,n,s,a,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function A2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function iE(t,e,n){const s=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const i=t[a],o=i.transform,l=e.data.field(i.field);s.set(i.field,Vk(o,l,n[a]))}return s}function rE(t,e,n){const s=new Map;for(const a of t){const i=a.transform,o=n.data.field(a.field);s.set(a.field,Lk(i,o,e))}return s}class Mh extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gk extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&zk(i,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=b2();return this.mutations.forEach(a=>{const i=e.get(a.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(a.key)?null:l;const c=w2(o,l);c!==null&&s.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(n,s)=>aE(n,s))&&jo(this.baseMutations,e.baseMutations,(n,s)=>aE(n,s))}}class Hx{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ue(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return Rk}();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,s[o].version);return new Hx(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,je;function $k(t){switch(t){case B.OK:return le(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function I2(t){if(t===void 0)return _a("GRPC error has no .code"),B.UNKNOWN;switch(t){case Nt.OK:return B.OK;case Nt.CANCELLED:return B.CANCELLED;case Nt.UNKNOWN:return B.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return B.INTERNAL;case Nt.UNAVAILABLE:return B.UNAVAILABLE;case Nt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Nt.NOT_FOUND:return B.NOT_FOUND;case Nt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Nt.ABORTED:return B.ABORTED;case Nt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Nt.DATA_LOSS:return B.DATA_LOSS;default:return le(39323,{code:t})}}(je=Nt||(Nt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new hi([4294967295,4294967295],0);function oE(t){const e=Yk().encode(t),n=new FA;return n.update(e),new Uint8Array(n.digest())}function lE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hi([n,s],0),new hi([a,i],0)]}class $x{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(s<0)throw new Kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hi.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(hi.fromNumber(s)));return a.compare(Jk)===1&&(a=new hi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=oE(e),[s,a]=lE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,a,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $x(i,a,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=oE(e),[s,a]=lE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,a,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,s,a,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ph(he.min(),a,new dt(Ce),Ea(),Te())}}class fd{constructor(e,n,s,a,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new fd(s,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class j2{constructor(e,n){this.targetId=e,this.Ce=n}}class R2{constructor(e,n,s=qt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class cE{constructor(){this.ve=0,this.Fe=dE(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),s=Te();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:le(38017,{changeType:i})}}),new fd(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=dE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Kk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ea(),this.Je=au(),this.He=au(),this.Ye=new dt(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,a)=>{this.rt(a)&&n(a)})}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const i=a.target;if(Og(i))if(s===0){const o=new se(i.path);this.et(n,o,en.newNoDocument(o,he.min()))}else Ue(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:i=0}=n;let o,l;try{o=Ei(s).toUint8Array()}catch(c){if(c instanceof t2)return hr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new $x(o,a,i)}catch(c){return hr(c instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),a++)}),a}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Og(l.target)){const c=new se(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,en.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Te();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const a=new Ph(e,n,this.Ye,this.je,s);return this.je=Ea(),this.Je=au(),this.He=au(),this.Ye=new dt(Ce),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function au(){return new dt(se.comparator)}function dE(){return new dt(se.comparator)}const Qk={asc:"ASCENDING",desc:"DESCENDING"},Xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wk={and:"AND",or:"OR"};class Zk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fg(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function Lm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eL(t,e){return Lm(t,e.toTimestamp())}function Vs(t){return Ue(!!t,49232),he.fromTimestamp(function(n){const s=_i(n);return new Pe(s.seconds,s.nanos)}(t))}function Yx(t,e){return Gg(t,e).canonicalString()}function Gg(t,e){const n=function(a){return new $e(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function P2(t){const e=$e.fromString(t);return Ue(U2(e),10190,{key:e.toString()}),e}function qg(t,e){return Yx(t.databaseId,e.path)}function xp(t,e){const n=P2(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(k2(n))}function D2(t,e){return Yx(t.databaseId,e)}function tL(t){const e=P2(t);return e.length===4?$e.emptyPath():k2(e)}function Bg(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function k2(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uE(t,e,n){return{name:qg(t,e),fields:n.value.mapValue.fields}}function nL(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:le(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(Ue(m===void 0||typeof m=="string",58123),qt.fromBase64String(m||"")):(Ue(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),qt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?B.UNKNOWN:I2(d.code);return new X(m,d.message||"")}(o);n=new R2(s,a,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=xp(t,s.document.name),i=Vs(s.document.updateTime),o=s.document.createTime?Vs(s.document.createTime):he.min(),l=new bn({mapValue:{fields:s.document.fields}}),c=en.newFoundDocument(a,i,o,l),d=s.targetIds||[],m=s.removedTargetIds||[];n=new Fu(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=xp(t,s.document),i=s.readTime?Vs(s.readTime):he.min(),o=en.newNoDocument(a,i),l=s.removedTargetIds||[];n=new Fu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=xp(t,s.document),i=s.removedTargetIds||[];n=new Fu([],i,a,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:i}=s,o=new Hk(a,i),l=s.targetId;n=new j2(l,o)}}return n}function sL(t,e){let n;if(e instanceof hd)n={update:uE(t,e.key,e.value)};else if(e instanceof Mh)n={delete:qg(t,e.key)};else if(e instanceof Pi)n={update:uE(t,e.key,e.data),updateMask:mL(e.fieldMask)};else{if(!(e instanceof Gk))return le(16599,{Vt:e.type});n={verify:qg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Dm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Do)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof km)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw le(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:eL(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le(27497)}(t,e.precondition)),n}function aL(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(a,i){let o=a.updateTime?Vs(a.updateTime):Vs(i);return o.isEqual(he.min())&&(o=Vs(i)),new Ok(o,a.transformResults||[])}(n,e))):[]}function iL(t,e){return{documents:[D2(t,e.path)]}}function rL(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=D2(t,a);const i=function(d){if(d.length!==0)return V2(vs.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:Lr(g.field),direction:cL(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fg(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:a}}function oL(t){let e=tL(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ue(s===1,65062);const m=n.from[0];m.allDescendants?a=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=L2(p);return g instanceof vs&&u2(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(y){return new zc(Vr(y.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Th(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,x=p.values||[];return new Mm(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new Mm(x,g)}(n.endAt)),Sk(e,a,o,i,l,"F",c,d)}function lL(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function L2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Vr(n.unaryFilter.field);return wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Vr(n.unaryFilter.field);return wt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vr(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vr(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Vr(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vs.create(n.compositeFilter.filters.map(s=>L2(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function cL(t){return Qk[t]}function dL(t){return Xk[t]}function uL(t){return Wk[t]}function Lr(t){return{fieldPath:t.canonicalString()}}function Vr(t){return Ft.fromServerFormat(t.fieldPath)}function V2(t){return t instanceof wt?function(n){if(n.op==="=="){if(W_(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NAN"}};if(X_(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W_(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NOT_NAN"}};if(X_(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lr(n.field),op:dL(n.op),value:n.value}}}(t):t instanceof vs?function(n){const s=n.getFilters().map(a=>V2(a));return s.length===1?s[0]:{compositeFilter:{op:uL(n.op),filters:s}}}(t):le(54877,{filter:t})}function mL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function U2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,s,a,i=he.min(),o=he.min(),l=qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.yt=e}}function fL(t){const e=oL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.Cn=new gL}addToCollectionParentIndex(e,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(bi.min())}updateCollectionGroup(e,n,s){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class gL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Pt($e.comparator),i=!a.has(s);return this.index[n]=a.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Pt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O2=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(O2,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="LruGarbageCollector",xL=1048576;function fE([t,e],[n,s]){const a=Ce(t,n);return a===0?Ce(e,s):a}class vL{constructor(e){this.Ir=e,this.buffer=new Pt(fE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();fE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(hE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?te(hE,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)})}}class bL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(Ch.ce);const s=new vL(n);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(mE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,i,o,l,c,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),a=this.params.maximumSequenceNumbersToCollect):a=p,o=Date.now(),this.nthSequenceNumber(e,a))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(d=Date.now(),Dr()<=Ne.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-m}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:p})))}}function _L(t,e){return new bL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.changes=new _r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Y.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&xc(s.mutation,a,Rn.empty(),Pe.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Te()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Te()){const a=Xi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(i=>{let o=Jl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Xi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Te()))}populateOverlays(e,n,s){const a=[];return s.forEach(i=>{n.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,a){let i=Ea();const o=gc(),l=function(){return gc()}();return n.forEach((c,d)=>{const m=s.get(d.key);a.has(d.key)&&(m===void 0||m.mutation instanceof Pi)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),xc(m.mutation,d,m.mutation.getFieldMask(),Pe.now())):o.set(d.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new NL(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=gc();let a=new dt((o,l)=>o-l),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=s.get(c)||Rn.empty();m=l.applyToLocalView(d,m),s.set(c,m);const p=(a.get(l.batchId)||Te()).add(c);a=a.insert(l.batchId,p)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,m=c.value,p=b2();m.forEach(g=>{if(!i.has(g)){const x=w2(n.get(g),s.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Y.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-i.size):Y.resolve(Xi());let l=Vc,c=i;return o.next(d=>Y.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?Y.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Te())).next(m=>({batchId:l,changes:y2(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(s=>{let a=Jl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const i=n.collectionGroup;let o=Jl();return this.indexManager.getCollectionParents(e,i).next(l=>Y.forEach(l,c=>{const d=function(p,g){return new nl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,a).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,a))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,en.newInvalidDocument(m)))});let l=Jl();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&xc(m.mutation,d,Rn.empty(),Pe.now()),Ih(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Vs(a.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(a){return{name:a.name,query:fL(a.bundledQuery),readTime:Vs(a.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.overlays=new dt(se.comparator),this.qr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xi();return Y.forEach(n,a=>this.getOverlay(e,a).next(i=>{i!==null&&s.set(a,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,i)=>{this.St(e,n,i)}),Y.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(e,n,s){const a=Xi(),i=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&a.set(c.getKey(),c)}return Y.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let i=new dt((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let m=i.get(d.largestBatchId);m===null&&(m=Xi(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=Xi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=a)););return Y.resolve(l)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Bk(n,s));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.Qr=new Pt(Ut.$r),this.Ur=new Pt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ut(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new se(new $e([])),s=new Ut(n,e),a=new Ut(n,e+1),i=[];return this.Ur.forEachInRange([s,a],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new se(new $e([])),s=new Ut(n,e),a=new Ut(n,e+1);let i=Te();return this.Ur.forEachInRange([s,a],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ut(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return se.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ut.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qk(i,n,s,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Ut(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),i=a<0?0:a;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Ox:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ut(n,0),a=new Ut(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,a],o=>{const l=this.Xr(o.Yr);i.push(l)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Pt(Ce);return n.forEach(a=>{const i=new Ut(a,0),o=new Ut(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let i=s;se.isDocumentKey(i)||(i=i.child(""));const o=new Ut(new se(i),0);let l=new Pt(Ce);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===a&&(l=l.add(c.Yr)),!0)},o),Y.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(n.mutations,a=>{const i=new Ut(a.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Ut(n,0),a=this.Zr.firstAfterOrEqual(s);return Y.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.ri=e,this.docs=function(){return new dt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),i=a?a.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Y.resolve(s?s.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let s=Ea();return n.forEach(a=>{const i=this.docs.get(a);s=s.insert(a,i?i.document.mutableCopy():en.newInvalidDocument(a))}),Y.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let i=Ea();const o=n.path,l=new se(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||ak(sk(m),s)<=0||(a.has(m.key)||Ih(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,n,s,a){le(9500)}ii(e,n){return Y.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new jL(this)}getSize(e){return Y.resolve(this.size)}}class jL extends EL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),Y.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.persistence=e,this.si=new _r(n=>Gx(n),qx),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new Jx,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,n){return this.si.forEach((s,a)=>n(a)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Y.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Pr(n),Y.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,s){let a=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Y.waitFor(i).next(()=>a)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Y.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Y.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,i=[];return a&&n.forEach(o=>{i.push(a.markPotentiallyOrphaned(e,o))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Y.resolve(s)}containsKey(e,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ch(0),this.li=!1,this.li=!0,this.hi=new wL,this.referenceDelegate=e(this),this.Pi=new RL(this),this.indexManager=new pL,this.remoteDocumentCache=function(a){return new IL(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new hL(n),this.Ii=new TL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new AL(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){te("MemoryPersistence","Starting transaction:",e);const a=new ML(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,n){return Y.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class ML extends rk{constructor(e){super(),this.currentSequenceNumber=e}}class Kx{constructor(e){this.persistence=e,this.Ri=new Jx,this.Vi=null}static mi(e){return new Kx(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Y.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,s=>{const a=se.fromPath(s);return this.gi(e,a).next(i=>{i||n.removeEntry(a,he.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vm{constructor(e,n){this.persistence=e,this.pi=new _r(s=>ck(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=_L(this,n)}static mi(e,n){return new Vm(e,n)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return Y.forEach(this.pi,(s,a)=>this.br(e,s,a).next(i=>i?Y.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uu(e.data.value)),n}br(e,n,s){return Y.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return Y.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Te(),a=Te();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new Qx(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return m4()?8:ok(sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,a,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PL;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,a){return s.documentReadCount<this.fs?(Dr()<=Ne.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Dr()<=Ne.DEBUG&&te("QueryEngine","Query:",kr(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Dr()<=Ne.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ls(n))):Y.resolve())}ys(e,n){if(nE(n))return Y.resolve(null);let s=Ls(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Pm(n,null,"F"),s=Ls(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,Pm(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,s,a){return nE(n)||a.isEqual(he.min())?Y.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,a)?Y.resolve(null):(Dr()<=Ne.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),kr(n)),this.vs(e,o,n,nk(a,Vc)).next(l=>l))})}Ds(e,n){let s=new Pt(x2(e));return n.forEach((a,i)=>{Ih(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,n,s){return Dr()<=Ne.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",kr(n)),this.ps.getDocumentsMatchingQuery(e,n,bi.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="LocalStore",kL=3e8;class LL{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new dt(Ce),this.xs=new _r(i=>Gx(i),qx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function VL(t,e,n,s){return new LL(t,e,n,s)}async function F2(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(i=>(a=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Te();for(const d of a){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function UL(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,m){const p=d.batch,g=p.keys();let x=Y.resolve();return g.forEach(y=>{x=x.next(()=>m.getEntry(c,y)).next(T=>{const A=d.docVersions.get(y);Ue(A!==null,48541),T.version.compareTo(A)<0&&(p.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),m.addEntry(T)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function G2(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function OL(t,e){const n=pe(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=a.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(qt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,s)),a=a.insert(p,x),function(T,A,b){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=kL?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,x,m)&&l.push(n.Pi.updateTargetData(i,x))});let c=Ea(),d=Te();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(zL(i,o,e.documentUpdates).next(m=>{c=m.ks,d=m.qs})),!s.isEqual(he.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(m)}return Y.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=a,i))}function zL(t,e,n){let s=Te(),a=Te();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Ea();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):te(Xx,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:a}})}function FL(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ox),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function GL(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Pi.getTargetData(s,e).next(i=>i?(a=i,Y.resolve(a)):n.Pi.allocateTargetId(s).next(o=>(a=new ei(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Hg(t,e,n){const s=pe(t),a=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!tl(o))throw o;te(Xx,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function pE(t,e,n){const s=pe(t);let a=he.min(),i=Te();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const p=pe(c),g=p.xs.get(m);return g!==void 0?Y.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(s,o,Ls(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?a:he.min(),n?i:Te())).next(l=>(qL(s,Ak(e),l),{documents:l,Qs:i})))}function qL(t,e,n){let s=t.Os.get(e)||he.min();n.forEach((a,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class gE{constructor(){this.activeTargetIds=Dk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BL{constructor(){this.Mo=new gE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="ConnectivityMonitor";class vE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(xE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(xE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function $g(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="RestConnection",$L={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===jm?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,i){const o=$g(),l=this.zo(e,n.toUriEncodedString());te(vp,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,i);const{host:d}=new URL(l),m=Qo(d);return this.Jo(e,l,c,s,m).then(p=>(te(vp,`Received RPC '${e}' ${o}: `,p),p),p=>{throw hr(vp,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,a,i,o){return this.Go(e,n,s,a,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,i)=>e[i]=a),s&&s.headers.forEach((a,i)=>e[i]=a)}zo(e,n){const s=$L[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class KL extends YL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,i){const o=$g();return new Promise((l,c)=>{const d=new GA;d.setWithCredentials(!0),d.listenOnce(qA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vu.NO_ERROR:const p=d.getResponseJson();te(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Vu.TIMEOUT:te(Wt,`RPC '${e}' ${o} timed out`),c(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const g=d.getStatus();if(te(Wt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const T=function(b){const N=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(N)>=0?N:B.UNKNOWN}(y.status);c(new X(T,y.message))}else c(new X(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(B.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{te(Wt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(a);te(Wt,`RPC '${e}' ${o} sending request:`,a),d.send(n,"POST",m,s,15)})}T_(e,n,s){const a=$g(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$A(),l=HA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const m=i.join("");te(Wt,`Creating RPC '${e}' stream ${a}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,x=!1;const y=new JL({Yo:A=>{x?te(Wt,`Not sending because RPC '${e}' stream ${a} is closed:`,A):(g||(te(Wt,`Opening RPC '${e}' stream ${a} transport.`),p.open(),g=!0),te(Wt,`RPC '${e}' stream ${a} sending:`,A),p.send(A))},Zo:()=>p.close()}),T=(A,b,N)=>{A.listen(b,S=>{try{N(S)}catch(D){setTimeout(()=>{throw D},0)}})};return T(p,Yl.EventType.OPEN,()=>{x||(te(Wt,`RPC '${e}' stream ${a} transport opened.`),y.o_())}),T(p,Yl.EventType.CLOSE,()=>{x||(x=!0,te(Wt,`RPC '${e}' stream ${a} transport closed`),y.a_(),this.E_(p))}),T(p,Yl.EventType.ERROR,A=>{x||(x=!0,hr(Wt,`RPC '${e}' stream ${a} transport errored. Name:`,A.name,"Message:",A.message),y.a_(new X(B.UNAVAILABLE,"The operation could not be completed")))}),T(p,Yl.EventType.MESSAGE,A=>{var b;if(!x){const N=A.data[0];Ue(!!N,16349);const S=N,D=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(D){te(Wt,`RPC '${e}' stream ${a} received error:`,D);const V=D.status;let k=function(I){const C=Nt[I];if(C!==void 0)return I2(C)}(V),j=D.message;k===void 0&&(k=B.INTERNAL,j="Unknown error status: "+V+" with message "+D.message),x=!0,y.a_(new X(k,j)),p.close()}else te(Wt,`RPC '${e}' stream ${a} received:`,N),y.u_(N)}}),T(l,BA.STAT_EVENT,A=>{A.stat===Dg.PROXY?te(Wt,`RPC '${e}' stream ${a} detected buffering proxy`):A.stat===Dg.NOPROXY&&te(Wt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){return new Zk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,s=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="PersistentStream";class B2{constructor(e,n,s,a,i,o,l,c){this.Mi=e,this.S_=s,this.b_=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new q2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(_a(n.toString()),_a("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===n&&this.G_(s,a)},s=>{e(()=>{const a=new X(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return te(yE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(te(yE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QL extends B2{constructor(e,n,s,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=nL(this.serializer,e),s=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Vs(o.readTime):he.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Bg(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Og(c)?{documents:iL(i,c)}:{query:rL(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M2(i,o.resumeToken);const d=Fg(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=Lm(i,o.snapshotVersion.toTimestamp());const d=Fg(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=lL(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Bg(this.serializer),n.removeTarget=e,this.q_(n)}}class XL extends B2{constructor(e,n,s,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aL(e.writeResults,e.commitTime),s=Vs(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Bg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>sL(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{}class ZL extends WL{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Gg(n,s),a,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(B.UNKNOWN,i.toString())})}Ho(e,n,s,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Gg(n,s),a,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class eV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_a(n),this.aa=!1):te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="RemoteStore";class tV{constructor(e,n,s,a,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{Er(this)&&(te(fr,"Restarting streams for network reachability change."),await async function(c){const d=pe(c);d.Ea.add(4),await pd(d),d.Ra.set("Unknown"),d.Ea.delete(4),await kh(d)}(this))})}),this.Ra=new eV(s,a)}}async function kh(t){if(Er(t))for(const e of t.da)await e(!0)}async function pd(t){for(const e of t.da)await e(!1)}function H2(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tv(n)?ev(n):sl(n).O_()&&Zx(n,e))}function Wx(t,e){const n=pe(t),s=sl(n);n.Ia.delete(e),s.O_()&&$2(n,e),n.Ia.size===0&&(s.O_()?s.L_():Er(n)&&n.Ra.set("Unknown"))}function Zx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sl(t).Y_(e)}function $2(t,e){t.Va.Ue(e),sl(t).Z_(e)}function ev(t){t.Va=new Kk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),sl(t).start(),t.Ra.ua()}function tv(t){return Er(t)&&!sl(t).x_()&&t.Ia.size>0}function Er(t){return pe(t).Ea.size===0}function Y2(t){t.Va=void 0}async function nV(t){t.Ra.set("Online")}async function sV(t){t.Ia.forEach((e,n)=>{Zx(t,e)})}async function aV(t,e){Y2(t),tv(t)?(t.Ra.ha(e),ev(t)):t.Ra.set("Unknown")}async function iV(t,e,n){if(t.Ra.set("Online"),e instanceof R2&&e.state===2&&e.cause)try{await async function(a,i){const o=i.cause;for(const l of i.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(t,e)}catch(s){te(fr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Um(t,s)}else if(e instanceof Fu?t.Va.Ze(e):e instanceof j2?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const s=await G2(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(qt.EMPTY_BYTE_STRING,m.snapshotVersion)),$2(i,c);const p=new ei(m.target,c,d,m.sequenceNumber);Zx(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){te(fr,"Failed to raise snapshot:",s),await Um(t,s)}}async function Um(t,e,n){if(!tl(e))throw e;t.Ea.add(1),await pd(t),t.Ra.set("Offline"),n||(n=()=>G2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(fr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await kh(t)})}function J2(t,e){return e().catch(n=>Um(t,n,e))}async function Lh(t){const e=pe(t),n=Ci(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ox;for(;rV(e);)try{const a=await FL(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,oV(e,a)}catch(a){await Um(e,a)}K2(e)&&Q2(e)}function rV(t){return Er(t)&&t.Ta.length<10}function oV(t,e){t.Ta.push(e);const n=Ci(t);n.O_()&&n.X_&&n.ea(e.mutations)}function K2(t){return Er(t)&&!Ci(t).x_()&&t.Ta.length>0}function Q2(t){Ci(t).start()}async function lV(t){Ci(t).ra()}async function cV(t){const e=Ci(t);for(const n of t.Ta)e.ea(n.mutations)}async function dV(t,e,n){const s=t.Ta.shift(),a=Hx.from(s,e,n);await J2(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Lh(t)}async function uV(t,e){e&&Ci(t).X_&&await async function(s,a){if(function(o){return $k(o)&&o!==B.ABORTED}(a.code)){const i=s.Ta.shift();Ci(s).B_(),await J2(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Lh(s)}}(t,e),K2(t)&&Q2(t)}async function bE(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),te(fr,"RemoteStore received new credentials");const s=Er(n);n.Ea.add(3),await pd(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await kh(n)}async function mV(t,e){const n=pe(t);e?(n.Ea.delete(2),await kh(n)):e||(n.Ea.add(2),await pd(n),n.Ra.set("Unknown"))}function sl(t){return t.ma||(t.ma=function(n,s,a){const i=pe(n);return i.sa(),new QL(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:nV.bind(null,t),t_:sV.bind(null,t),r_:aV.bind(null,t),H_:iV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),tv(t)?ev(t):t.Ra.set("Unknown")):(await t.ma.stop(),Y2(t))})),t.ma}function Ci(t){return t.fa||(t.fa=function(n,s,a){const i=pe(n);return i.sa(),new XL(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:lV.bind(null,t),r_:uV.bind(null,t),ta:cV.bind(null,t),na:dV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lh(t)):(await t.fa.stop(),t.Ta.length>0&&(te(fr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,s,a,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=i,this.deferred=new da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,i){const o=Date.now()+s,l=new nv(e,n,o,a,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(t,e){if(_a("AsyncQueue",`${e}: ${t}`),tl(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||se.comparator(n.key,s.key):(n,s)=>se.comparator(n.key,s.key),this.keyedMap=Jl(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=s.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new mo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.ga=new dt(se.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Vo{constructor(e,n,s,a,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,a,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Vo(e,n,mo.emptySet(n),o,s,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class fV{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=pe(n),i=a.queries;a.queries=EE(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new X(B.ABORTED,"Firestore shutting down"))}}function EE(){return new _r(t=>g2(t),Ah)}async function av(t,e){const n=pe(t);let s=3;const a=e.query;let i=n.queries.get(a);i?!i.ba()&&e.Da()&&(s=2):(i=new hV,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(o){const l=sv(o,`Initialization of query '${kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(a,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&rv(n)}async function iv(t,e){const n=pe(t),s=e.query;let a=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function pV(t,e){const n=pe(t);let s=!1;for(const a of e){const i=a.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(a)&&(s=!0);o.wa=a}}s&&rv(n)}function gV(t,e,n){const s=pe(t),a=s.queries.get(e);if(a)for(const i of a.Sa)i.onError(n);s.queries.delete(e)}function rv(t){t.Ca.forEach(e=>{e.next()})}var Yg,NE;(NE=Yg||(Yg={})).Ma="default",NE.Cache="cache";class ov{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.key=e}}class W2{constructor(e){this.key=e}}class xV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=x2(e),this.tu=new mo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new _E,a=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,d=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((m,p)=>{const g=a.get(m),x=Ih(this.query,p)?p:null,y=!!g&&this.mutatedKeys.has(g.key),T=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;g&&x?g.data.isEqual(x.data)?y!==T&&(s.track({type:3,doc:x}),A=!0):this.su(g,x)||(s.track({type:2,doc:x}),A=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!g&&x?(s.track({type:0,doc:x}),A=!0):g&&!x&&(s.track({type:1,doc:g}),A=!0,(c||d)&&(l=!0)),A&&(x?(o=o.add(x),i=T?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(x,y){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:A})}};return T(x)-T(y)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(s),a=a??!1;const l=n&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Vo(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _E,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new W2(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new X2(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lv="SyncEngine";class vV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yV{constructor(e){this.key=e,this.hu=!1}}class bV{constructor(e,n,s,a,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new _r(l=>g2(l),Ah),this.Iu=new Map,this.Eu=new Set,this.du=new dt(se.comparator),this.Au=new Map,this.Ru=new Jx,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _V(t,e,n=!0){const s=aI(t);let a;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await Z2(s,e,n,!0),a}async function EV(t,e){const n=aI(t);await Z2(n,e,!0,!1)}async function Z2(t,e,n,s){const a=await GL(t.localStore,Ls(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await NV(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&n&&H2(t.remoteStore,a),l}async function NV(t,e,n,s,a){t.pu=(p,g,x)=>async function(T,A,b,N){let S=A.view.ru(b);S.Cs&&(S=await pE(T.localStore,A.query,!1).then(({documents:j})=>A.view.ru(j,S)));const D=N&&N.targetChanges.get(A.targetId),V=N&&N.targetMismatches.get(A.targetId)!=null,k=A.view.applyChanges(S,T.isPrimaryClient,D,V);return TE(T,A.targetId,k.au),k.snapshot}(t,p,g,x);const i=await pE(t.localStore,e,!0),o=new xV(e,i.Qs),l=o.ru(i.documents),c=fd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),d=o.applyChanges(l,t.isPrimaryClient,c);TE(t,n,d.au);const m=new vV(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function CV(t,e,n){const s=pe(t),a=s.Tu.get(e),i=s.Iu.get(a.targetId);if(i.length>1)return s.Iu.set(a.targetId,i.filter(o=>!Ah(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Hg(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Wx(s.remoteStore,a.targetId),Jg(s,a.targetId)}).catch(el)):(Jg(s,a.targetId),await Hg(s.localStore,a.targetId,!0))}async function TV(t,e){const n=pe(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Wx(n.remoteStore,s.targetId))}async function SV(t,e,n){const s=PV(t);try{const a=await function(o,l){const c=pe(o),d=Pe.now(),m=l.reduce((x,y)=>x.add(y.key),Te());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let y=Ea(),T=Te();return c.Ns.getEntries(x,m).next(A=>{y=A,y.forEach((b,N)=>{N.isValidDocument()||(T=T.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,y)).next(A=>{p=A;const b=[];for(const N of l){const S=Fk(N,p.get(N.key).overlayedDocument);S!=null&&b.push(new Pi(N.key,S,l2(S.value.mapValue),un.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,b,l)}).next(A=>{g=A;const b=A.applyToLocalDocumentSet(p,T);return c.documentOverlayCache.saveOverlays(x,A.batchId,b)})}).then(()=>({batchId:g.batchId,changes:y2(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new dt(Ce)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(s,a.batchId,n),await gd(s,a.changes),await Lh(s.remoteStore)}catch(a){const i=sv(a,"Failed to persist write");n.reject(i)}}async function eI(t,e){const n=pe(t);try{const s=await OL(n.localStore,e);e.targetChanges.forEach((a,i)=>{const o=n.Au.get(i);o&&(Ue(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?Ue(o.hu,14607):a.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))}),await gd(n,s,e)}catch(s){await el(s)}}function CE(t,e,n){const s=pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=pe(o);c.onlineState=l;let d=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&rv(c)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function wV(t,e,n){const s=pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),i=a&&a.key;if(i){let o=new dt(se.comparator);o=o.insert(i,en.newNoDocument(i,he.min()));const l=Te().add(i),c=new Ph(he.min(),new Map,new dt(Ce),o,l);await eI(s,c),s.du=s.du.remove(i),s.Au.delete(e),cv(s)}else await Hg(s.localStore,e,!1).then(()=>Jg(s,e,n)).catch(el)}async function AV(t,e){const n=pe(t),s=e.batch.batchId;try{const a=await UL(n.localStore,e);nI(n,s,null),tI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await gd(n,a)}catch(a){await el(a)}}async function IV(t,e,n){const s=pe(t);try{const a=await function(o,l){const c=pe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Ue(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(s.localStore,e);nI(s,e,n),tI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await gd(s,a)}catch(a){await el(a)}}function tI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function nI(t,e,n){const s=pe(t);let a=s.Vu[s.currentUser.toKey()];if(a){const i=a.get(e);i&&(n?i.reject(n):i.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Jg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||sI(t,s)})}function sI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),cv(t))}function TE(t,e,n){for(const s of n)s instanceof X2?(t.Ru.addReference(s.key,e),jV(t,s)):s instanceof W2?(te(lv,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||sI(t,s.key)):le(19791,{wu:s})}function jV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(te(lv,"New document in limbo: "+n),t.Eu.add(s),cv(t))}function cv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se($e.fromString(e)),s=t.fu.next();t.Au.set(s,new yV(n)),t.du=t.du.insert(n,s),H2(t.remoteStore,new ei(Ls(wh(n.path)),s,"TargetPurposeLimboResolution",Ch.ce))}}async function gd(t,e,n){const s=pe(t),a=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(d=>{var m;if((d||n)&&s.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){a.push(d);const p=Qx.As(c.targetId,d);i.push(p)}}))}),await Promise.all(o),s.Pu.H_(a),await async function(c,d){const m=pe(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Y.forEach(d,g=>Y.forEach(g.Es,x=>m.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>Y.forEach(g.ds,x=>m.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!tl(p))throw p;te(Xx,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=m.Ms.get(g),y=x.snapshotVersion,T=x.withLastLimboFreeSnapshotVersion(y);m.Ms=m.Ms.insert(g,T)}}}(s.localStore,i))}async function RV(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){te(lv,"User change. New user:",e.toKey());const s=await F2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new X(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await gd(n,s.Ls)}}function MV(t,e){const n=pe(t),s=n.Au.get(e);if(s&&s.hu)return Te().add(s.key);{let a=Te();const i=n.Iu.get(e);if(!i)return a;for(const o of i){const l=n.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function aI(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wV.bind(null,e),e.Pu.H_=pV.bind(null,e.eventManager),e.Pu.yu=gV.bind(null,e.eventManager),e}function PV(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IV.bind(null,e),e}class Om{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VL(this.persistence,new DL,e.initialUser,this.serializer)}Cu(e){return new z2(Kx.mi,this.serializer)}Du(e){return new BL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Om.provider={build:()=>new Om};class DV extends Om{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof Vm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yL(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new z2(s=>Vm.mi(s,n),this.serializer)}}class Kg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>CE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RV.bind(null,this.syncEngine),await mV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fV}()}createDatastore(e){const n=Dh(e.databaseInfo.databaseId),s=function(i){return new KL(i)}(e.databaseInfo);return function(i,o,l,c){return new ZL(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,i,o,l){return new tV(s,a,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>CE(this.syncEngine,n,0),function(){return vE.v()?new vE:new HL}())}createSyncEngine(e,n){return function(a,i,o,l,c,d,m){const p=new bV(a,i,o,l,c,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const i=pe(a);te(fr,"RemoteStore shutting down."),i.Ea.add(5),await pd(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_a("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="FirestoreClient";class kV{constructor(e,n,s,a,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Zt.UNAUTHENTICATED,this.clientId=Eh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{te(Ti,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(te(Ti,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sv(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function bp(t,e){t.asyncQueue.verifyOperationInProgress(),te(Ti,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async a=>{s.isEqual(a)||(await F2(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function SE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LV(t);te(Ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>bE(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,a)=>bE(e.remoteStore,a)),t._onlineComponents=e}async function LV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(Ti,"Using user provided OfflineComponentProvider");try{await bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===B.FAILED_PRECONDITION||a.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;hr("Error using user provided cache. Falling back to memory cache: "+n),await bp(t,new Om)}}else te(Ti,"Using default OfflineComponentProvider"),await bp(t,new DV(void 0));return t._offlineComponents}async function iI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(Ti,"Using user provided OnlineComponentProvider"),await SE(t,t._uninitializedComponentsProvider._online)):(te(Ti,"Using default OnlineComponentProvider"),await SE(t,new Kg))),t._onlineComponents}function VV(t){return iI(t).then(e=>e.syncEngine)}async function zm(t){const e=await iI(t),n=e.eventManager;return n.onListen=_V.bind(null,e.syncEngine),n.onUnlisten=CV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TV.bind(null,e.syncEngine),n}function UV(t,e,n={}){const s=new da;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new dv({next:g=>{m.Nu(),o.enqueueAndForget(()=>iv(i,p));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&c&&c.source==="server"?d.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new ov(wh(l.path),m,{includeMetadataChanges:!0,qa:!0});return av(i,p)}(await zm(t),t.asyncQueue,e,n,s)),s.promise}function OV(t,e,n={}){const s=new da;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new dv({next:g=>{m.Nu(),o.enqueueAndForget(()=>iv(i,p)),g.fromCache&&c.source==="server"?d.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new ov(l,m,{includeMetadataChanges:!0,qa:!0});return av(i,p)}(await zm(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firestore.googleapis.com",AE=!0;class IE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oI,this.ssl=AE}else this.host=e.host,this.ssl=e.ssl??AE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xL)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rI(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new KA;switch(s.type){case"firstParty":return new K3(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=wE.get(n);s&&(te("ComponentProvider","Removing Datastore"),wE.delete(n),s.terminate())}(this),Promise.resolve()}}function lI(t,e,n,s={}){var d;t=nn(t,Vh);const a=Qo(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;a&&(eA(`https://${l}`),tA("Firestore",!0)),i.host!==oI&&i.host!==l&&hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:a,emulatorOptions:s};if(!va(c,o)&&(t._setSettings(c),s.mockUserToken)){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=Zt.MOCK_USER;else{m=s4(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Zt(g)}t._authCredentials=new $3(new JA(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class ct{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(md(n,ct._jsonSchema))return new ct(e,s||null,new se($e.fromString(n.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:It("string",ct._jsonSchemaVersion),referencePath:It("string")};class ua extends qs{constructor(e,n,s){super(e,n,wh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new se(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=_t(t),QA("collection","path",e),t instanceof Vh){const s=$e.fromString(e,...n);return G_(s),new ua(t,null,s)}{if(!(t instanceof ct||t instanceof ua))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child($e.fromString(e,...n));return G_(s),new ua(t.firestore,null,s)}}function re(t,e,...n){if(t=_t(t),arguments.length===1&&(e=Eh.newId()),QA("doc","path",e),t instanceof Vh){const s=$e.fromString(e,...n);return F_(s),new ct(t,null,new se(s))}{if(!(t instanceof ct||t instanceof ua))throw new X(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child($e.fromString(e,...n));return F_(s),new ct(t.firestore,t instanceof ua?t.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="AsyncQueue";class RE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new q2(this,"async_queue_retry"),this._c=()=>{const s=yp();s&&te(jE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=yp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new da;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;te(jE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,_a("INTERNAL UNHANDLED ERROR: ",ME(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=nv.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&le(47125,{Pc:ME(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ME(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const i of s)if(i in a&&typeof a[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ys extends Vh{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new RE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RE(e),this._firestoreClient=void 0,await e}}}function cI(t,e){const n=typeof t=="object"?t:iA(),s=typeof t=="string"?t:jm,a=wx(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const i=t4("firestore");i&&lI(a,...i)}return a}function al(t){if(t._terminated)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zV(t),t._firestoreClient}function zV(t){var s,a,i;const e=t._freezeSettings(),n=function(l,c,d,m){return new mk(l,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,rI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(qt.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new In(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(md(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:It("string",In._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hs._jsonSchemaVersion}}static fromJSON(e){if(md(e,hs._jsonSchema))return new hs(e.latitude,e.longitude)}}hs._jsonSchemaVersion="firestore/geoPoint/1.0",hs._jsonSchema={type:It("string",hs._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(md(e,fs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fs(e.vectorValues);throw new X(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fs._jsonSchemaVersion="firestore/vectorValue/1.0",fs._jsonSchema={type:It("string",fs._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=/^__.*__$/;class GV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new hd(e,this.data,n,this.fieldTransforms)}}class dI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class Uh{constructor(e,n,s,a,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uI(this.Ac)&&FV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Dh(e)}Cc(e,n,s,a=!1){return new Uh({Ac:e,methodName:n,Dc:s,path:Ft.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(t){const e=t._freezeSettings(),n=Dh(t._databaseId);return new qV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uv(t,e,n,s,a,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,a);fv("Data must be an object, but it was:",o,s);const l=pI(s,o);let c,d;if(i.merge)c=new Rn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Qg(e,p,n);if(!o.contains(g))throw new X(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);xI(m,g)||m.push(g)}c=new Rn(m),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new GV(new bn(l),c,d)}class Oh extends rl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oh}}function mI(t,e,n){return new Uh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mv extends rl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=mI(this,e,!0),s=this.vc.map(i=>Nr(i,n)),a=new Do(s);return new S2(e.path,a)}isEqual(e){return e instanceof mv&&va(this.vc,e.vc)}}class hv extends rl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=mI(this,e,!0),s=this.vc.map(i=>Nr(i,n)),a=new ko(s);return new S2(e.path,a)}isEqual(e){return e instanceof hv&&va(this.vc,e.vc)}}function hI(t,e,n,s){const a=t.Cc(1,e,n);fv("Data must be an object, but it was:",a,s);const i=[],o=bn.empty();Mi(s,(c,d)=>{const m=pv(e,c,n);d=_t(d);const p=a.yc(m);if(d instanceof Oh)i.push(m);else{const g=Nr(d,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new Rn(i);return new dI(o,l,a.fieldTransforms)}function fI(t,e,n,s,a,i){const o=t.Cc(1,e,n),l=[Qg(e,s,n)],c=[a];if(i.length%2!=0)throw new X(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Qg(e,i[g])),c.push(i[g+1]);const d=[],m=bn.empty();for(let g=l.length-1;g>=0;--g)if(!xI(d,l[g])){const x=l[g];let y=c[g];y=_t(y);const T=o.yc(x);if(y instanceof Oh)d.push(x);else{const A=Nr(y,T);A!=null&&(d.push(x),m.set(x,A))}}const p=new Rn(d);return new dI(m,p,o.fieldTransforms)}function BV(t,e,n,s=!1){return Nr(n,t.Cc(s?4:3,e))}function Nr(t,e){if(gI(t=_t(t)))return fv("Unsupported field value:",e,t),pI(t,e);if(t instanceof rl)return function(s,a){if(!uI(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const i=[];let o=0;for(const l of s){let c=Nr(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,a){if((s=_t(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Pe.fromDate(s);return{timestampValue:Lm(a.serializer,i)}}if(s instanceof Pe){const i=new Pe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lm(a.serializer,i)}}if(s instanceof hs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof In)return{bytesValue:M2(a.serializer,s._byteString)};if(s instanceof ct){const i=a.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yx(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof fs)return function(o,l){return{mapValue:{fields:{[r2]:{stringValue:o2},[Rm]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Bx(l.serializer,d)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${Nh(s)}`)}(t,e)}function pI(t,e){const n={};return e2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(t,(s,a)=>{const i=Nr(a,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function gI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof hs||t instanceof In||t instanceof ct||t instanceof rl||t instanceof fs)}function fv(t,e,n){if(!gI(n)||!WA(n)){const s=Nh(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Qg(t,e,n){if((e=_t(e))instanceof il)return e._internalPath;if(typeof e=="string")return pv(t,e);throw Fm("Field path arguments must be of type string or ",t,!1,void 0,n)}const HV=new RegExp("[~\\*/\\[\\]]");function pv(t,e,n){if(e.search(HV)>=0)throw Fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new il(...e.split("."))._internalPath}catch{throw Fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fm(t,e,n,s,a){const i=s&&!s.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${a}`),c+=")"),new X(B.INVALID_ARGUMENT,l+t+c)}function xI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,s,a,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $V(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $V extends vI{data(){return super.data()}}function zh(t,e){return typeof e=="string"?pv(t,e):e instanceof il?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gv{}class Fh extends gv{}function Ye(t,e,...n){let s=[];e instanceof gv&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Gh).length,l=i.filter(c=>c instanceof vd).length;if(o>1||o>0&&l>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)t=a._apply(t);return t}class vd extends Fh{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new vd(e,n,s)}_apply(e){const n=this._parse(e);return bI(e._query,n),new qs(e.firestore,e.converter,zg(e._query,n))}_parse(e){const n=xd(e.firestore);return function(i,o,l,c,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){kE(p,m);const y=[];for(const T of p)y.push(DE(c,i,T));g={arrayValue:{values:y}}}else g=DE(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||kE(p,m),g=BV(l,o,p,m==="in"||m==="not-in");return wt.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function et(t,e,n){const s=e,a=zh("where",t);return vd._create(a,s,n)}class Gh extends gv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,i){let o=a;const l=i.getFlattenedFilters();for(const c of l)bI(o,c),o=zg(o,c)}(e._query,n),new qs(e.firestore,e.converter,zg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qh extends Fh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qh(e,n)}_apply(e){const n=function(a,i,o){if(a.startAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(i,o)}(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,function(a,i){const o=a.explicitOrderBy.concat([i]);return new nl(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function Us(t,e="asc"){const n=e,s=zh("orderBy",t);return qh._create(s,n)}class Bh extends Fh{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Bh(e,n,s)}_apply(e){return new qs(e.firestore,e.converter,Pm(e._query,this._limit,this._limitType))}}function ho(t){return tk("limit",t),Bh._create("limit",t,"F")}function DE(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p2(e)&&n.indexOf("/")!==-1)throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child($e.fromString(n));if(!se.isDocumentKey(s))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Q_(t,new se(s))}if(n instanceof ct)return Q_(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function kE(t,e){if(!Array.isArray(t)||t.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(t,e){const n=function(a,i){for(const o of a)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _I{convertValue(e,n="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Mi(e,(a,i)=>{s[a]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,a,i;const n=(i=(a=(s=e.fields)==null?void 0:s[Rm].arrayValue)==null?void 0:a.values)==null?void 0:i.map(o=>xt(o.doubleValue));return new fs(n)}convertGeoPoint(e){return new hs(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Sh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const n=_i(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=$e.fromString(e);Ue(U2(s),9688,{name:e});const a=new Ro(s.get(1),s.get(3)),i=new se(s.popFirst(5));return a.isEqual(n)||_a(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Wr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fi extends vI{constructor(e,n,s,a,i,o){super(e,n,s,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(zh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",fi._jsonSchema={type:It("string",fi._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class vc extends fi{data(e={}){return super.data(e)}}class pi{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Wr(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new vc(this._firestore,this._userDataWriter,s.key,s,new Wr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new vc(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Wr(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new vc(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Wr(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:YV(l.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t){t=nn(t,ct);const e=nn(t.firestore,ys);return UV(al(e),t._key).then(n=>NI(e,t,n))}pi._jsonSchemaVersion="firestore/querySnapshot/1.0",pi._jsonSchema={type:It("string",pi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class vv extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function Me(t){t=nn(t,qs);const e=nn(t.firestore,ys),n=al(e),s=new vv(e);return yI(t._query),OV(n,t._query).then(a=>new pi(e,s,t,a))}function pr(t,e,n){t=nn(t,ct);const s=nn(t.firestore,ys),a=xv(t.converter,e,n);return ol(s,[uv(xd(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,un.none())])}function bt(t,e,n,...s){t=nn(t,ct);const a=nn(t.firestore,ys),i=xd(a);let o;return o=typeof(e=_t(e))=="string"||e instanceof il?fI(i,"updateDoc",t._key,e,n,s):hI(i,"updateDoc",t._key,e),ol(a,[o.toMutation(t._key,un.exists(!0))])}function bs(t){return ol(nn(t.firestore,ys),[new Mh(t._key,un.none())])}function ss(t,e){const n=nn(t.firestore,ys),s=re(t),a=xv(t.converter,e);return ol(n,[uv(xd(t.firestore),"addDoc",s._key,a,t.converter!==null,{}).toMutation(s._key,un.exists(!1))]).then(()=>s)}function EI(t,...e){var c,d,m;t=_t(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||PE(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(PE(e[s])){const p=e[s];e[s]=(c=p.next)==null?void 0:c.bind(p),e[s+1]=(d=p.error)==null?void 0:d.bind(p),e[s+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof ct)o=nn(t.firestore,ys),l=wh(t._key.path),i={next:p=>{e[s]&&e[s](NI(o,t,p))},error:e[s+1],complete:e[s+2]};else{const p=nn(t,qs);o=nn(p.firestore,ys),l=p._query;const g=new vv(o);i={next:x=>{e[s]&&e[s](new pi(o,g,p,x))},error:e[s+1],complete:e[s+2]},yI(t._query)}return function(g,x,y,T){const A=new dv(T),b=new ov(x,A,y);return g.asyncQueue.enqueueAndForget(async()=>av(await zm(g),b)),()=>{A.Nu(),g.asyncQueue.enqueueAndForget(async()=>iv(await zm(g),b))}}(al(o),l,a,i)}function ol(t,e){return function(s,a){const i=new da;return s.asyncQueue.enqueueAndForget(async()=>SV(await VV(s),a,i)),i.promise}(al(t),e)}function NI(t,e,n){const s=n.docs.get(e._key),a=new vv(t);return new fi(t,a,e._key,s,new Wr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xd(e)}set(e,n,s){this._verifyNotCommitted();const a=_p(e,this._firestore),i=xv(a.converter,n,s),o=uv(this._dataReader,"WriteBatch.set",a._key,i,a.converter!==null,s);return this._mutations.push(o.toMutation(a._key,un.none())),this}update(e,n,s,...a){this._verifyNotCommitted();const i=_p(e,this._firestore);let o;return o=typeof(n=_t(n))=="string"||n instanceof il?fI(this._dataReader,"WriteBatch.update",i._key,n,s,a):hI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=_p(e,this._firestore);return this._mutations=this._mutations.concat(new Mh(n._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _p(t,e){if((t=_t(t)).firestore!==e)throw new X(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function yv(...t){return new mv("arrayUnion",t)}function TI(...t){return new hv("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){return al(t=nn(t,ys)),new CI(t,e=>ol(t,e))}(function(e,n=!0){(function(a){Zo=a})(Xo),Io(new cr("firestore",(s,{instanceIdentifier:a,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new ys(new Y3(s.getProvider("auth-internal")),new Q3(o,s.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(d.options.projectId,m)}(o,a),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),mi(V_,U_,e),mi(V_,U_,"esm2020")})();const JV=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_I,Bytes:In,CollectionReference:ua,DocumentReference:ct,DocumentSnapshot:fi,FieldPath:il,FieldValue:rl,Firestore:ys,FirestoreError:X,GeoPoint:hs,Query:qs,QueryCompositeFilterConstraint:Gh,QueryConstraint:Fh,QueryDocumentSnapshot:vc,QueryFieldFilterConstraint:vd,QueryLimitConstraint:Bh,QueryOrderByConstraint:qh,QuerySnapshot:pi,SnapshotMetadata:Wr,Timestamp:Pe,VectorValue:fs,WriteBatch:CI,_AutoId:Eh,_ByteString:qt,_DatabaseId:Ro,_DocumentKey:se,_EmptyAuthCredentialsProvider:KA,_FieldPath:Ft,_cast:nn,_logWarn:hr,_validateIsNotUsedTogether:XA,addDoc:ss,arrayRemove:TI,arrayUnion:yv,collection:ue,connectFirestoreEmulator:lI,deleteDoc:bs,doc:re,ensureFirestoreConfigured:al,executeWrite:ol,getDoc:Vn,getDocs:Me,getFirestore:cI,limit:ho,onSnapshot:EI,orderBy:Us,query:Ye,setDoc:pr,updateDoc:bt,where:et,writeBatch:SI},Symbol.toStringTag,{value:"Module"}));var KV="firebase",QV="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(KV,QV,"app");const XV={apiKey:"AIzaSyC-Ry46hCfXxez-lfA5ZX792AOIbmOc6Vw",authDomain:"eduplanmx.firebaseapp.com",projectId:"eduplanmx",storageBucket:"eduplanmx.firebasestorage.app",messagingSenderId:"144677335686",appId:"1:144677335686:web:cd82543b32b323e3ea5707"},wI=aA(XV),J=cI(wI),Fa=B3(wI),AI=Object.freeze(Object.defineProperty({__proto__:null,auth:Fa,db:J},Symbol.toStringTag,{value:"Module"})),ru="users";class WV{async login(e){try{const n=await I6(Fa,e.email,e.password),s=await this.getUserData(n.user.uid);if(!s)throw new Error("Usuario no encontrado en la base de datos");if(!s.activo)throw new Error("Usuario inactivo. Contacta al administrador.");return await this.updateLastAccess(n.user.uid),s}catch(n){throw console.error("Error en login:",n),n.code==="auth/user-not-found"?new Error("Usuario no encontrado"):n.code==="auth/wrong-password"?new Error("Contrasea incorrecta"):n.code==="auth/invalid-email"?new Error("Email invlido"):n.code==="auth/user-disabled"?new Error("Usuario deshabilitado"):n}}async logout(){try{await P6(Fa)}catch(e){throw console.error("Error en logout:",e),new Error("Error al cerrar sesin")}}async loginWithGoogle(){var e;try{const n=new Ws;n.setCustomParameters({prompt:"select_account"});const a=(await Z6(Fa,n)).user;let i=await this.getUserData(a.uid);if(!i){const o=((e=a.displayName)==null?void 0:e.split(" "))||["Usuario","Google"],l=o[0]||"Usuario",c=o[1]||"Google",d=o[2]||"";i={id:a.uid,email:a.email||"",nombre:l,apellidoPaterno:c,apellidoMaterno:d,rol:"maestro",activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),creadoPor:"google-auth"},await pr(re(J,ru,a.uid),i),console.log(" Nuevo usuario creado desde Google:",i.email)}if(i.activo===!1)throw console.error(" Acceso denegado: Usuario inactivo en Firestore",i),new Error("Usuario inactivo. Contacta al administrador.");return await this.updateLastAccess(a.uid),i}catch(n){throw console.error("Error en login con Google:",n),n.code==="auth/popup-closed-by-user"?new Error("Inicio de sesin cancelado"):n.code==="auth/popup-blocked"?new Error("Popup bloqueado. Permite popups para este sitio."):n.code==="auth/cancelled-popup-request"?new Error("Inicio de sesin cancelado"):n}}async register(e,n){try{const s=await A6(Fa,e.email,e.password),a={id:s.user.uid,email:e.email,nombre:e.nombre,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,rol:e.rol,institucionId:e.institucionId,gruposAsignados:[],activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),creadoPor:n};return await pr(re(J,ru,s.user.uid),a),a}catch(s){throw console.error("Error en registro:",s),s.code==="auth/email-already-in-use"?new Error("El email ya est registrado"):s.code==="auth/weak-password"?new Error("La contrasea debe tener al menos 6 caracteres"):s}}async getUserData(e){try{const n=await Vn(re(J,ru,e));return n.exists()?n.data():null}catch(n){throw console.error("Error al obtener datos del usuario:",n),new Error("Error al obtener datos del usuario")}}async updateLastAccess(e){try{await bt(re(J,ru,e),{ultimoAcceso:new Date().toISOString()})}catch(n){console.error("Error al actualizar ltimo acceso:",n)}}onAuthStateChanged(e){return M6(Fa,e)}getCurrentUser(){return Fa.currentUser}}const Ur=new WV,II=M.createContext(void 0),ZV=({children:t})=>{const[e,n]=M.useState(null),[s,a]=M.useState(!0);M.useEffect(()=>{const m=Ur.onAuthStateChanged(async p=>{if(p)try{const g=await Ur.getUserData(p.uid);if((g==null?void 0:g.rol)==="superadmin"){console.log(" SuperAdmin detectado - Saltando onboarding"),n({...g,onboardingCompleto:!0,schoolId:"system",schoolName:"Sistema Central"}),a(!1);return}const{schoolService:x}=await Ao(async()=>{const{schoolService:T}=await Promise.resolve().then(()=>VI);return{schoolService:T}},[]);if(await x.needsOnboarding(p.uid))console.log(" Usuario necesita completar onboarding"),n({...g,onboardingCompleto:!1});else{const T=await x.getUserProfile(p.uid);T?(console.log(" Usuario con onboarding completo:",T.schoolName),n({...g,schoolId:T.schoolId,schoolName:T.schoolName,puesto:T.puesto,onboardingCompleto:!0})):n({...g,onboardingCompleto:!1})}}catch(g){console.error("Error al cargar datos del usuario:",g),n(null)}else n(null);a(!1)});return()=>m()},[]);const d={user:e,loading:s,login:async(m,p)=>{a(!0);try{const g=await Ur.login({email:m,password:p});n(g)}catch(g){throw a(!1),g}},loginWithGoogle:async()=>{a(!0);try{const m=await Ur.loginWithGoogle();n(m)}catch(m){throw a(!1),m}},logout:async()=>{try{await Ur.logout(),n(null)}catch(m){throw m}},loginAsGuest:()=>{n({id:"guest",email:"invitado@eduplan.mx",nombre:"Maestro",apellidoPaterno:"Invitado",apellidoMaterno:"",rol:"guest",activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),onboardingCompleto:!0,schoolName:"Escuela Demo",schoolId:"demo"})},isAuthenticated:!!e};return r.jsx(II.Provider,{value:d,children:t})},ut=()=>{const t=M.useContext(II);if(t===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return t},As=({children:t,allowedRoles:e})=>{const{user:n,loading:s}=ut(),a=Gs();return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando..."})]})}):n?!(n.rol==="superadmin")&&(n.onboardingCompleto===!1||!n.schoolId||!n.schoolName||!n.nombre||!n.apellidoPaterno)&&a.pathname!=="/onboarding"?(console.info(" Redirigiendo a onboarding - Completar perfil. Path actual:",a.pathname),r.jsx(cs,{to:"/onboarding",replace:!0})):e&&!e.includes(n.rol)?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center max-w-md border border-red-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-6",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Acceso Denegado"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"No tienes permisos para acceder a esta seccin."}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Tu rol: ",r.jsx("span",{className:"font-semibold text-indigo-600",children:n.rol})]}),r.jsx("button",{onClick:()=>window.history.back(),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Volver"})]})}):r.jsx(r.Fragment,{children:t}):r.jsx(cs,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),LE=t=>{const e=tU(t);return e.charAt(0).toUpperCase()+e.slice(1)},jI=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),nU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>M.createElement("svg",{ref:c,...sU,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:jI("lucide",a),...!i&&!nU(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,m])=>M.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,e)=>{const n=M.forwardRef(({className:s,...a},i)=>M.createElement(aU,{ref:i,iconNode:e,className:jI(`lucide-${eU(LE(t))}`,`lucide-${t}`,s),...a}));return n.displayName=LE(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yd=Q("arrow-left",iU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ll=Q("arrow-right",rU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ep=Q("award",oU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],cU=Q("book-marked",lU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],it=Q("book-open",dU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],VE=Q("book",uU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],UE=Q("brain",mU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],OE=Q("bug",hU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Gm=Q("building-2",fU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bv=Q("calendar",pU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ql=Q("check",gU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zE=Q("chevron-down",xU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yU=Q("chevron-right",vU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],FE=Q("chevron-up",bU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Na=Q("circle-alert",_U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ps=Q("circle-check-big",EU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hh=Q("circle-check",NU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],RI=Q("circle-plus",CU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qm=Q("circle-x",TU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fc=Q("clock",SU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],AU=Q("crown",wU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],GE=Q("database",IU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],RU=Q("dollar-sign",jU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$h=Q("download",MU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],DU=Q("dumbbell",PU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Xg=Q("external-link",kU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MI=Q("eye",LU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],UU=Q("file-pen-line",VU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_s=Q("file-text",OU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],FU=Q("folder-open",zU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Gc=Q("funnel",GU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Np=Q("globe",qU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],as=Q("graduation-cap",BU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Wg=Q("heart",HU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],YU=Q("history",$U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],PI=Q("house",JU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],QU=Q("info",KU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],WU=Q("layers",XU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Zg=Q("list",ZU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],cl=Q("loader-circle",eO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],nO=Q("loader",tO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],e0=Q("lock",sO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],iO=Q("log-in",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Yh=Q("log-out",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jh=Q("mail",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Kh=Q("map-pin",lO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],dO=Q("monitor",cO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],mO=Q("network",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],fO=Q("panels-top-left",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],bd=Q("pen",pO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xO=Q("phone",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fn=Q("plus",vO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bO=Q("power-off",yO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],EO=Q("power",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],CO=Q("refresh-cw",NO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Di=Q("save",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],jt=Q("school",SO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bs=Q("search",wO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_v=Q("settings",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],DI=Q("shield-check",IO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qh=Q("shield",jO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],aa=Q("sparkles",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],PO=Q("square-check-big",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],kI=Q("square-pen",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wn=Q("target",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],is=Q("trash-2",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],UO=Q("trending-down",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ps=Q("trending-up",OO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Si=Q("triangle-alert",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Gu=Q("upload",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qE=Q("user-plus",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Uo=Q("user",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ke=Q("users",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],$O=Q("video",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JO=Q("wifi-off",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],t0=Q("wifi",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],XO=Q("wrench",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rs=Q("x",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ez=Q("zap",ZO),tz=()=>{const[t,e]=M.useState(""),[n,s]=M.useState(""),[a,i]=M.useState(""),[o,l]=M.useState(!1),{login:c,loginWithGoogle:d,loginAsGuest:m}=ut(),p=Cs(),g=async y=>{y.preventDefault(),i(""),l(!0);try{await c(t,n),p("/")}catch(T){i(T.message||"Error al iniciar sesin")}finally{l(!1)}},x=async()=>{i(""),l(!0);try{await d(),p("/")}catch(y){i(y.message||"Error al iniciar sesin con Google")}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl mb-4",children:r.jsx(jt,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"EduPlan MX"}),r.jsx("p",{className:"text-slate-600",children:"Plataforma de Diagnstico Socioeducativo"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-slate-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Iniciar Sesin"}),a&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(Na,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-800",children:a})]}),r.jsxs("form",{onSubmit:g,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Jh,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"email",type:"email",value:t,onChange:y=>e(y.target.value),required:!0,className:"block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"tu@email.com",disabled:o})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(e0,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"password",type:"password",value:n,onChange:y=>s(y.target.value),required:!0,className:"block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"",disabled:o})]})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Iniciando sesin..."]}):r.jsxs(r.Fragment,{children:[r.jsx(iO,{className:"w-5 h-5"}),"Iniciar Sesin"]})})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-slate-500",children:"O contina con"})})]}),r.jsxs("button",{onClick:x,disabled:o,className:"w-full bg-white border-2 border-slate-300 text-slate-700 py-3 px-4 rounded-xl font-semibold hover:bg-slate-50 hover:border-slate-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-3",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]}),r.jsxs("button",{onClick:async()=>{await m(),p("/maestro/dashboard")},type:"button",className:"w-full mt-3 bg-slate-100 text-slate-700 py-3 px-4 rounded-xl font-bold hover:bg-slate-200 transition-all flex items-center justify-center gap-2 border border-slate-200",children:[r.jsx(aa,{className:"w-4 h-4 text-amber-500"}),"Probar Demo como Invitado"]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{type:"button",className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",disabled:!0,children:"Olvidaste tu contrasea?"})})]}),r.jsx("div",{className:"mt-8 text-center text-sm text-slate-500",children:r.jsx("p",{children:" 2026 EduPlan MX - Bachillerato General Oficial"})})]})})},LI=[{materia:"Pensamiento Matemtico I",semestre:1,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO I",semestre:1,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Procedural","Procesos de intuicin y razonamiento"],metas_aprendizaje:["M1","M2"],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Discute la importancia de la toma de decisiones basada en datos y cuestiona la validez de la informacin estadstica.",tematicas:["Estadstica bsica","Toma de decisiones"]},{id:2,descripcion:"Identifica la incertidumbre como consecuencia de la variabilidad y a travs de simulaciones considera la frecuencia de eventos.",tematicas:["Incertidumbre","Variabilidad","Frecuencia"]},{id:3,descripcion:"Identifica la equiprobabilidad como hiptesis y observa la ley de los grandes nmeros.",tematicas:["Equiprobabilidad","Ley de los grandes nmeros"]},{id:4,descripcion:"Elige una tcnica de conteo (combinaciones, ordenaciones) para calcular el total de casos posibles y favorables.",tematicas:["Tcnicas de conteo","Combinatoria"]},{id:5,descripcion:"Observa cmo la probabilidad de un evento se actualiza con informacin adicional (Probabilidad condicional).",tematicas:["Probabilidad condicional"]},{id:6,descripcion:"Selecciona una problemtica para recolectar datos. Distingue variables cualitativas y cuantitativas.",tematicas:["Variables estadsticas","Recoleccin de datos"]},{id:7,descripcion:"Analiza datos categricos y cuantitativos mediante representaciones grficas (barras, pastel, puntos).",tematicas:["Grficos estadsticos"]},{id:8,descripcion:"Analiza la relacin entre dos variables categricas mediante tablas de doble entrada.",tematicas:["Tablas de contingencia"]},{id:9,descripcion:"Analiza datos cuantitativos a travs de medidas de tendencia central y dispersin.",tematicas:["Media, mediana, moda","Dispersin"]},{id:10,descripcion:"Analiza la distribucin de datos cuantitativos (forma, centro, dispersin).",tematicas:["Distribuciones de datos"]},{id:11,descripcion:"Construye e interpreta grficas de caja y bigotes (Boxplots).",tematicas:["Boxplots","Cuartiles"]},{id:12,descripcion:"Introduce el concepto de correlacin y la distingue de causalidad.",tematicas:["Correlacin vs Causalidad"]},{id:13,descripcion:"Analiza la asociacin entre variables cuantitativas (regresin lineal simple).",tematicas:["Regresin lineal"]},{id:14,descripcion:"Analiza la asociacin entre dos variables cuantitativas a travs del coeficiente de correlacin de Pearson.",tematicas:["Coeficiente de Pearson"]},{id:15,descripcion:"Valora la importancia de la Probabilidad y Estadstica en la construccin de conocimiento.",tematicas:["Aplicaciones estadsticas"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.720Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lengua y Comunicacin I",semestre:1,metadata:{nombre_uac:"LENGUA Y COMUNICACIN I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende por qu es importante saber resumir y relatar, e identifica la diferencia entre ambos.",tematicas:["Resumen y Relato"]},{id:2,descripcion:"Identifica los tipos de fuentes de informacin y la validez de los contenidos.",tematicas:["Fuentes de informacin"]},{id:3,descripcion:"Distingue la lengua oral de la lengua escrita y los usos en diferentes contextos.",tematicas:["Oralidad vs Escritura"]},{id:4,descripcion:"Comprende y aplica las reglas de acentuacin, puntuacin y uso de grafas.",tematicas:["Ortografa","Puntuacin"]},{id:5,descripcion:"Realiza la composicin de resmenes y relatos simples a partir de diversas fuentes.",tematicas:["Composicin de textos"]},{id:6,descripcion:"Identifica y aplica las etapas del proceso de lectura: prelectura, lectura y poslectura.",tematicas:["Proceso de lectura"]},{id:7,descripcion:"Analiza un relato para identificar los elementos narrativos bsicos.",tematicas:["Narrativa","Personajes","Trama"]},{id:8,descripcion:"Distingue las ideas principales de las secundarias en un texto.",tematicas:["Comprensin lectora"]},{id:9,descripcion:"Identifica las caractersticas del resumen y su utilidad acadmica.",tematicas:["El Resumen"]},{id:10,descripcion:"Identifica las caractersticas del relato y su funcin social.",tematicas:["El Relato"]},{id:11,descripcion:"Reconoce la estructura de los textos informativos bsicos.",tematicas:["Textos informativos"]},{id:12,descripcion:"Utiliza organizadores grficos para procesar informacin.",tematicas:["Mapas mentales","Cuadros sinpticos"]},{id:13,descripcion:"Expone de manera oral un resumen o relato ante una audiencia.",tematicas:["Expresin oral"]},{id:14,descripcion:"Revisa y corrige sus textos (propiedades de la redaccin: adecuacin, coherencia y cohesin).",tematicas:["Correccin de textos"]},{id:15,descripcion:"Utiliza herramientas digitales para la elaboracin de textos sencillos.",tematicas:["Herramientas digitales"]},{id:16,descripcion:"Reflexiona sobre la importancia de la lengua para la interaccin social.",tematicas:["Reflexin lingstica"]}],organizador_curricular:{propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."],categorias:["Comunicacin","Pensamiento Crtico"],metas_aprendizaje:["Hablar","Escuchar","Leer","Escribir"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Cultura Digital I",semestre:1,metadata:{nombre_uac:"CULTURA DIGITAL I",semestre:1,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Identifica y aplica la normatividad que regula el ciberespacio y servicios digitales; cuida su salud digital y el medio ambiente.",tematicas:["Ciudadana Digital","Ciberseguridad","Salud digital"]},{id:2,descripcion:"Reconoce su identidad como ciudadano en el ciberespacio con derechos y obligaciones.",tematicas:["Identidad digital","Derechos digitales"]},{id:3,descripcion:"Conoce y utiliza herramientas de productividad: procesadores de texto.",tematicas:["Procesadores de texto"]},{id:4,descripcion:"Conoce y utiliza herramientas de productividad: hojas de clculo.",tematicas:["Hojas de clculo","Excel bsico"]},{id:5,descripcion:"Conoce y utiliza herramientas de productividad: presentaciones electrnicas.",tematicas:["Presentaciones","PowerPoint/Canva"]},{id:6,descripcion:"Identifica y aplica estrategias de bsqueda de informacin confiable en internet.",tematicas:["Bsqueda de informacin","Fuentes confiables"]},{id:7,descripcion:"Utiliza herramientas digitales para la comunicacin y colaboracin en lnea.",tematicas:["Correo electrnico","Nube","Colaboracin"]},{id:8,descripcion:"Comprende los conceptos bsicos de algoritmos y pensamiento computacional.",tematicas:["Algoritmos","Lgica computacional"]},{id:9,descripcion:"Utiliza el pensamiento computacional para la resolucin de problemas cotidianos.",tematicas:["Resolucin de problemas","Diagramas de flujo"]}],organizador_curricular:{propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."],categorias:["Ciudadana Digital","Pensamiento Computacional"],metas_aprendizaje:["Uso tico de TIC","Programacin bsica"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"La Materia y sus Interacciones",semestre:1,metadata:{nombre_uac:"LA MATERIA Y SUS INTERACCIONES",semestre:1,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"La materia es todo lo que ocupa un lugar en el espacio y tiene masa. Todas las sustancias estn formadas por tomos.",tematicas:["Concepto de materia","tomos","Modelos atmicos"]},{id:2,descripcion:"Las molculas estn formadas por tomos unidos por enlaces qumicos.",tematicas:["Molculas","Enlaces qumicos (Inico, Covalente)"]},{id:3,descripcion:"Identifica que la temperatura es una medida de la energa cintica promedio de las partculas.",tematicas:["Temperatura","Energa cintica"]},{id:4,descripcion:"Utiliza la teora cintico-molecular para explicar los estados de agregacin.",tematicas:["Estados de la materia","Cambios de estado"]},{id:5,descripcion:"Comprende que en una reaccin qumica la masa se conserva (Ley de Lavoisier).",tematicas:["Reacciones qumicas","Conservacin de la materia"]},{id:6,descripcion:"Distingue entre sistemas abiertos, cerrados y aislados.",tematicas:["Sistemas termodinmicos"]},{id:7,descripcion:"Identifica las propiedades extensivas e intensivas de la materia.",tematicas:["Propiedades de la materia"]},{id:8,descripcion:"Clasifica las sustancias en elementos, compuestos y mezclas.",tematicas:["Clasificacin de la materia","Tabla peridica"]},{id:9,descripcion:"Examina cmo la estructura de los materiales determina sus propiedades y usos.",tematicas:["Materiales","Estructura-Propiedad"]},{id:10,descripcion:"Analiza la energa involucrada en las reacciones qumicas (endotrmicas y exotrmicas).",tematicas:["Energa en reacciones","Entalpa"]},{id:11,descripcion:"Comprende el concepto de rapidez de reaccin y los factores que la afectan.",tematicas:["Cintica qumica"]},{id:12,descripcion:"Utiliza el concepto de mol para cuantificar la materia.",tematicas:["El Mol","Estequiometra bsica"]},{id:13,descripcion:"Analiza la importancia de los recursos naturales y su transformacin sinttica.",tematicas:["Recursos naturales","Materiales sintticos"]},{id:14,descripcion:"Reflexiona sobre el impacto ambiental de los procesos qumicos y el desarrollo sostenible.",tematicas:["Qumica verde","Impacto ambiental"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La Materia y sus Interacciones bajo el marco del MCCEMS 2025."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Humanidades I",semestre:1,metadata:{nombre_uac:"HUMANIDADES I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Explora a partir de la pregunta 'Por qu estoy aqu?' para acercarse a los saberes, recursos y prcticas filosficas.",tematicas:["Asombro filosfico","El cuestionamiento"]},{id:2,descripcion:"Reconoce la experiencia de s misma/o analizando discursos clsicos y contemporneos.",tematicas:["Conocimiento de s mismo"]},{id:3,descripcion:"Pone en cuestin la manera en que los otros dan sentido a su realidad.",tematicas:["Alteridad","El Otro"]},{id:4,descripcion:"Cuestiona cmo sus pasiones y virtudes configuran su propia experiencia.",tematicas:["Pasiones","Virtudes","tica"]},{id:5,descripcion:"Reflexiona sobre la vida buena y la felicidad desde diversas perspectivas.",tematicas:["Eudaimona","Felicidad","Vida buena"]},{id:6,descripcion:"Analiza la relacin entre el placer y la vida buena.",tematicas:["Hedonismo","Placer vs Felicidad"]},{id:7,descripcion:"Examina la validez de los argumentos y las falacias en discursos cotidianos.",tematicas:["Lgica","Argumentacin","Falacias"]},{id:8,descripcion:"Identifica los fines de la argumentacin en diferentes contextos.",tematicas:["Debate","Persuasin"]},{id:9,descripcion:"Reflexiona sobre la libertad y la responsabilidad.",tematicas:["Libertad","Determinismo","Responsabilidad"]},{id:10,descripcion:"Comprende el sentido de la vida desde una perspectiva humanista.",tematicas:["Sentido de la vida","Existencialismo"]}],organizador_curricular:{propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ciencias Sociales I",semestre:1,metadata:{nombre_uac:"CIENCIAS SOCIALES I",semestre:1,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Reconoce sus necesidades materiales (vitales y no vitales) personales, familiares y de su comunidad para comprender y explicar la forma en que se satisfacen.",tematicas:["Necesidades humanas","Satisfactores"]},{id:2,descripcion:"Identifica los procesos de produccin y distribucin vigentes en su comunidad.",tematicas:["Produccin","Distribucin","Economa local"]},{id:3,descripcion:"Distingue las caractersticas de las formas de produccin: esclavismo, feudalismo, capitalismo y socialismo.",tematicas:["Modos de produccin","Historia econmica"]},{id:4,descripcion:"Define qu es el Estado y comprende su funcin en la sociedad.",tematicas:["El Estado","Gobierno","Instituciones"]},{id:5,descripcion:"Analiza la relacin entre el ciudadano y el Estado: derechos y obligaciones.",tematicas:["Ciudadana","Contrato social"]},{id:6,descripcion:"Identifica las estructuras sociales: familia, escuela, comunidad.",tematicas:["Estructura social","Instituciones sociales"]},{id:7,descripcion:"Comprende el concepto de desigualdad social y sus manifestaciones.",tematicas:["Desigualdad","Pobreza","Clases sociales"]},{id:8,descripcion:"Analiza el papel de las normas sociales y jurdicas en la convivencia.",tematicas:["Normas","Leyes","Derecho"]},{id:9,descripcion:"Reflexiona sobre la diversidad cultural y la identidad.",tematicas:["Cultura","Diversidad","Identidad"]},{id:10,descripcion:"Identifica problemas sociales contemporneos en su entorno.",tematicas:["Problemas sociales","Comunidad"]},{id:11,descripcion:"Comprende la importancia de la participacin ciudadana.",tematicas:["Participacin","Democracia"]},{id:12,descripcion:"Analiza la relacin entre bienestar y organizacin social.",tematicas:["Bienestar social","Organizacin"]}],organizador_curricular:{propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."],categorias:["Conciencia Social","Historia"],metas_aprendizaje:["Interpretacin histrica","Participacin ciudadana"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingls I",semestre:1,metadata:{nombre_uac:"LENGUA EXTRANJERA INGLS I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende y utiliza el verbo 'to be' en presente simple para dar y pedir informacin personal.",tematicas:["Verb to be","Personal information"]},{id:2,descripcion:"Utiliza los pronombres personales y adjetivos posesivos.",tematicas:["Subject pronouns","Possessive adjectives"]},{id:3,descripcion:"Describe su entorno inmediato utilizando vocabulario bsico y preposiciones de lugar.",tematicas:["Prepositions of place","Classroom objects"]},{id:4,descripcion:"Expresa la existencia de objetos y personas singulares y plurales (There is/There are).",tematicas:["There is / There are","Plurals"]},{id:5,descripcion:"Utiliza los artculos definidos e indefinidos (a/an/the) correctamente.",tematicas:["Articles"]},{id:6,descripcion:"Describe caractersticas fsicas y de personalidad usando adjetivos calificativos.",tematicas:["Adjectives","Physical description"]},{id:7,descripcion:"Utiliza los adjetivos demostrativos (this/that/these/those).",tematicas:["Demonstratives"]},{id:8,descripcion:"Expresa posesin utilizando el genitivo sajn ('s) y adjetivos posesivos.",tematicas:["Possessive 's"]},{id:9,descripcion:"Formula preguntas simples con Wh- questions.",tematicas:["Wh- questions"]},{id:10,descripcion:"Comprende y utiliza el Presente Simple para hablar de hechos generales.",tematicas:["Simple Present (affirmative)"]},{id:11,descripcion:"Utiliza el Presente Simple en formas negativa e interrogativa.",tematicas:["Simple Present (negative/interrogative)"]},{id:12,descripcion:"Expresa gustos y preferencias (like/love/hate).",tematicas:["Likes and dislikes"]},{id:13,descripcion:"Habla sobre la familia y relaciones de parentesco.",tematicas:["Family members"]},{id:14,descripcion:"Describe ocupaciones y profesiones.",tematicas:["Occupations"]},{id:15,descripcion:"Identifica y utiliza nmeros cardinales y ordinales.",tematicas:["Numbers","Dates"]},{id:16,descripcion:"Comprende textos breves y sencillos sobre temas familiares.",tematicas:["Reading comprehension"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls I bajo el marco del MCCEMS 2025."],categorias:["Comunicacin Extranjera","Interculturalidad"],metas_aprendizaje:["Listening","Reading","Speaking","Writing"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico II",semestre:2,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO II",semestre:2,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"Compara cualitativamente dos o ms eventos para determinar cul es ms probable o si son equiprobables.",tematicas:["Probabilidad intuitiva"]},{id:2,descripcion:"Calcula la probabilidad terica de eventos simples en experimentos aleatorios.",tematicas:["Probabilidad clsica"]},{id:3,descripcion:"Distingue entre eventos mutuamente excluyentes y no excluyentes, y calcula sus probabilidades.",tematicas:["Eventos excluyentes","Regla de la suma"]},{id:4,descripcion:"Distingue entre eventos independientes y dependientes, y utiliza la regla del producto.",tematicas:["Independencia","Regla del producto"]},{id:5,descripcion:"Utiliza el lenguaje algebraico para representar patrones y relaciones.",tematicas:["Lenguaje algebraico"]},{id:6,descripcion:"Opera con expresiones algebraicas (suma, resta, multiplicacin).",tematicas:["Operaciones algebraicas"]},{id:7,descripcion:"Resuelve ecuaciones lineales de una variable y las interpreta grficamente.",tematicas:["Ecuaciones lineales"]},{id:8,descripcion:"Resuelve sistemas de dos ecuaciones lineales con dos variables.",tematicas:["Sistemas de ecuaciones 2x2"]},{id:9,descripcion:"Resuelve ecuaciones cuadrticas completas e incompletas por diversos mtodos.",tematicas:["Ecuaciones cuadrticas"]},{id:10,descripcion:"Identifica y analiza las caractersticas de figuras geomtricas (polgonos).",tematicas:["Polgonos"]},{id:11,descripcion:"Calcula permetros y reas de figuras compuestas.",tematicas:["reas y permetros"]},{id:12,descripcion:"Aplica el Teorema de Tales y la semejanza de tringulos.",tematicas:["Semejanza","Teorema de Tales"]},{id:13,descripcion:"Aplica el Teorema de Pitgoras en la resolucin de problemas.",tematicas:["Teorema de Pitgoras"]},{id:14,descripcion:"Utiliza las razones trigonomtricas (seno, coseno, tangente) en tringulos rectngulos.",tematicas:["Trigonometra bsica"]}],organizador_curricular:{propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."],categorias:["Pensamiento Lgico","Modelacin"],metas_aprendizaje:["Resolucin de problemas","Pensamiento algortmico"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lengua y Comunicacin II",semestre:2,metadata:{nombre_uac:"LENGUA Y COMUNICACIN II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende qu es el ensayo, sus caractersticas, estructura y tipos.",tematicas:["El Ensayo"]},{id:2,descripcion:"Distingue entre opinin, postura y argumento.",tematicas:["Argumentacin"]},{id:3,descripcion:"Identifica las premisas y conclusiones en un argumento.",tematicas:["Estructura del argumento"]},{id:4,descripcion:"Analiza textos argumentativos e identifica su tesis.",tematicas:["Lectura argumentativa"]},{id:5,descripcion:"Utiliza los diferentes tipos de argumentos (autoridad, datos, ejemplos).",tematicas:["Tipos de argumentos"]},{id:6,descripcion:"Comprende y evita el uso de falacias en su argumentacin.",tematicas:["Falacias argumentativas"]},{id:7,descripcion:"Redacta un ensayo breve sobre un tema de inters.",tematicas:["Escritura de ensayo"]},{id:8,descripcion:"Utiliza citas textuales y referencias bibliogrficas (APA) para fundamentar sus ideas.",tematicas:["Citas y Referencias","APA"]},{id:9,descripcion:"Realiza exposiciones orales argumentativas.",tematicas:["Exposicin oral"]},{id:10,descripcion:"Participa en debates respetando las reglas de intervencin y escucha activa.",tematicas:["Debate"]},{id:11,descripcion:"Analiza discursos pblicos para evaluar su efectividad persuasiva.",tematicas:["Anlisis del discurso"]},{id:12,descripcion:"Utiliza medios digitales para difundir sus textos argumentativos.",tematicas:["Medios digitales"]},{id:13,descripcion:"Reflexiona sobre la tica en la comunicacin y la argumentacin.",tematicas:["tica comunicativa"]}],organizador_curricular:{propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."],categorias:["Comunicacin","Pensamiento Crtico"],metas_aprendizaje:["Hablar","Escuchar","Leer","Escribir"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conservacin de la Energa",semestre:2,metadata:{nombre_uac:"CONSERVACIN DE LA ENERGA Y SUS INTERACCIONES CON LA MATERIA",semestre:2,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"La energa se conserva, no se crea ni se destruye, solo se transforma.",tematicas:["Ley de conservacin de la energa"]},{id:2,descripcion:"Identifica diversas formas de energa (cintica, potencial, trmica, elctrica).",tematicas:["Formas de energa"]},{id:3,descripcion:"Calcula la energa cintica y potencial en sistemas mecnicos.",tematicas:["Energa Mecnica"]},{id:4,descripcion:"Comprende el concepto de trabajo mecnico y su relacin con la energa.",tematicas:["Trabajo y Potencia"]},{id:5,descripcion:"Analiza la transferencia de calor y el equilibrio trmico.",tematicas:["Calor y Temperatura"]},{id:6,descripcion:"Explica el funcionamiento de mquinas trmicas simples.",tematicas:["Mquinas trmicas"]},{id:7,descripcion:"Analiza fenmenos elctricos y magnticos.",tematicas:["Electricidad y Magnetismo"]},{id:8,descripcion:"Comprende los circuitos elctricos bsicos (serie y paralelo).",tematicas:["Circuitos elctricos"]},{id:9,descripcion:"Analiza la generacin y consumo de energa elctrica.",tematicas:["Generacin de energa"]},{id:10,descripcion:"Evala fuentes de energa renovables y no renovables.",tematicas:["Fuentes de energa","Sustentabilidad"]},{id:11,descripcion:"Reflexiona sobre la eficiencia energtica y el ahorro de energa.",tematicas:["Eficiencia energtica"]},{id:12,descripcion:"Analiza el impacto social y ambiental del uso de la energa.",tematicas:["Impacto ambiental"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conservacin de la Energa bajo el marco del MCCEMS 2025."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Cultura Digital II",semestre:2,metadata:{nombre_uac:"CULTURA DIGITAL II - Aprendizaje individual y colaborativo",semestre:2,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Herramientas digitales innovadoras","TICCAD para investigacin","Investigacin digital","Software estadstico","Pginas web"],metas_aprendizaje:["Interacte con las TICCAD para potenciar su aprendizaje autnomo y colaborativo, de una forma creativa e innovadora, de acuerdo con las caractersticas y necesidades de su contexto."],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Utiliza herramientas digitales de una manera innovadora y eficiente para acceder al conocimiento y la experiencia de aprendizaje de las diferentes asignaturas.",metas:["Trabajo colaborativo digital","Herramientas de trabajo colaborativo digital libre (Cryptpad, Riseup pad, entre otras)"],tematicas:["Trabajo colaborativo digital","Cryptpad","Riseup pad","Herramientas colaborativas de libre acceso"]},{id:2,descripcion:"Utiliza las TICCAD para interactuar y comunicarse con equipos colaborativos de trabajo, e investigar, buscar, discriminar y gestionar informacin de una situacin, fenmeno o problemtica personal, social o ambiental.",metas:["Tecnologas de Informacin, Comunicacin, Conocimiento y Aprendizajes Digitales de libre acceso (Cryptpad, Riseup pad, entre otras)"],tematicas:["TICCAD","Investigacin digital","Gestin de informacin","Trabajo colaborativo","Problemticas sociales y ambientales"]},{id:3,descripcion:"Aplica tcnicas y mtodos de investigacin digital para buscar, recopilar, extraer, organizar y difundir informacin de una situacin, fenmeno o problemtica personal, social o ambiental.",metas:["Tcnicas y mtodos de investigacin digital (Ciberetnografa, anlisis en lnea de contenido, grupo focal, entrevista, observacin, entre otros)"],tematicas:["Ciberetnografa","Anlisis de contenido en lnea","Grupo focal virtual","Entrevista digital","Observacin en lnea","Mtodos de investigacin digital"]},{id:4,descripcion:"Procesa datos relacionados con una situacin, fenmeno o problemtica de ndole personal, social o ambiental, utilizando herramientas de software que permitan calcular medidas de tendencia central y dispersin, as como generar representaciones grficas que contribuyan a su anlisis.",metas:["Licencias permisivas (Cryptpad, Riseup pad, Libre office, entre otras)","Software estadstico libre (Jamovi, XLSTAT Free, JASP, entre otros)"],tematicas:["Software estadstico libre","Jamovi","XLSTAT Free","JASP","Anlisis de datos","Medidas de tendencia central","Dispersin","Grficas estadsticas","Licencias permisivas","LibreOffice"]},{id:5,descripcion:"Utiliza las pginas web para ayudar a difundir informacin sobre una situacin, fenmeno o problemtica personal, social o ambiental relacionada con otras asignaturas.",metas:["Pginas web (que impliquen un diseo simple, por ejemplo: Wordpress, Blogspot, entre otras)"],tematicas:["Creacin de pginas web","WordPress","Blogspot","Difusin de informacin","Diseo web simple","Proyectos interdisciplinarios"]}],url_fuente:"https://www.dgb.sep.gob.mx/informacion-academica/programas-de-estudio/cultura-digital-ii.pdf",fecha_extraccion:"2026-01-29",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ciencias Sociales II",semestre:2,metadata:{nombre_uac:"CIENCIAS SOCIALES II",semestre:2,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Analiza las caractersticas del sistema econmico actual y su impacto local.",tematicas:["Economa actual","Globalizacin"]},{id:2,descripcion:"Identifica los agentes econmicos: familia, empresas y Estado.",tematicas:["Agentes econmicos"]},{id:3,descripcion:"Comprende el funcionamiento del mercado: oferta y demanda.",tematicas:["Mercado","Oferta y Demanda"]},{id:4,descripcion:"Analiza el papel del dinero y el sistema financiero.",tematicas:["Dinero","Bancos"]},{id:5,descripcion:"Reflexiona sobre el trabajo, el empleo y el salario.",tematicas:["Mercado laboral"]},{id:6,descripcion:"Identifica las funciones de la administracin pblica.",tematicas:["Administracin pblica"]},{id:7,descripcion:"Analiza polticas pblicas que atienden problemas sociales.",tematicas:["Polticas pblicas"]},{id:8,descripcion:"Comprende la estructura poltica del sistema mexicano.",tematicas:["Sistema poltico mexicano"]},{id:9,descripcion:"Reflexiona sobre la participacin democrtica y electoral.",tematicas:["Democracia","Elecciones"]},{id:10,descripcion:"Analiza los movimientos sociales y su impacto en el cambio social.",tematicas:["Movimientos sociales"]}],organizador_curricular:{propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."],categorias:["Conciencia Social","Historia"],metas_aprendizaje:["Interpretacin histrica","Participacin ciudadana"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Humanidades II",semestre:2,metadata:{nombre_uac:"HUMANIDADES II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Examina la experiencia de lo colectivo y la comunidad.",tematicas:["Comunidad","Colectividad"]},{id:2,descripcion:"Analiza las formas de organizacin poltica y social.",tematicas:["Poltica","Sociedad"]},{id:3,descripcion:"Reflexiona sobre la justicia y las leyes.",tematicas:["Justicia","Legalidad"]},{id:4,descripcion:"Cuestiona las relaciones de poder en la sociedad.",tematicas:["Poder","Autoridad"]},{id:5,descripcion:"Analiza la relacin entre el individuo y el Estado.",tematicas:["Ciudadano y Estado"]},{id:6,descripcion:"Explora conceptos de utopa y distopa social.",tematicas:["Utopa","Futuro social"]},{id:7,descripcion:"Reflexiona sobre la guerra, la paz y la violencia.",tematicas:["Paz y Violencia"]},{id:8,descripcion:"Analiza el impacto de la tecnologa en la humanidad.",tematicas:["Tecnologa y Humanismo"]},{id:9,descripcion:"Reflexiona sobre el arte y la esttica como formas de expresin humana.",tematicas:["Arte","Esttica"]}],organizador_curricular:{propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingls II",semestre:2,metadata:{nombre_uac:"LENGUA EXTRANJERA INGLS II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Describe acciones que estn sucediendo en el momento (Present Continuous).",tematicas:["Present Continuous"]},{id:2,descripcion:"Compara el uso del Presente Simple con el Presente Continuo.",tematicas:["Simple Present vs Continuous"]},{id:3,descripcion:"Expresa habilidades y posibilidades (Can/Can't).",tematicas:["Modal verb Can"]},{id:4,descripcion:"Habla sobre eventos pasados usando el verbo To Be en pasado (Was/Were).",tematicas:["Past of To Be"]},{id:5,descripcion:"Describe eventos terminados en el pasado usando verbos regulares e irregulares (Simple Past).",tematicas:["Simple Past (Regular/Irregular)"]},{id:6,descripcion:"Utiliza expresiones de tiempo pasado (yesterday, last week, ago).",tematicas:["Time expressions"]},{id:7,descripcion:"Formula preguntas en pasado simple (Did).",tematicas:["Questions in Past"]},{id:8,descripcion:"Utiliza sustantivos contables e incontables y cuantificadores (some, any, much, many).",tematicas:["Countable/Uncountable","Quantifiers"]},{id:9,descripcion:"Expresa planes futuros e intenciones (Going to).",tematicas:["Future with Going to"]},{id:10,descripcion:"Comprende y da instrucciones sencillas (Imperatives).",tematicas:["Imperatives","Directions"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls II bajo el marco del MCCEMS 2025."],categorias:["Comunicacin Extranjera","Interculturalidad"],metas_aprendizaje:["Listening","Reading","Speaking","Writing"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Laboratorio de Investigacin",semestre:1,metadata:{nombre_uac:"LABORATORIO DE INVESTIGACIN",semestre:1,creditos:3,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Metodologa"],metas_aprendizaje:["Desarrolla habilidades de investigacin"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Laboratorio de Investigacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la investigacin cientfica y social para el desarrollo del conocimiento.",tematicas:["Importancia de la investigacin"]},{id:2,descripcion:"Identifica los tipos de investigacin (documental, de campo, experimental) y sus caractersticas.",tematicas:["Tipos de investigacin"]},{id:3,descripcion:"Plantea un problema de investigacin delimitando su alcance y objetivos.",tematicas:["Planteamiento del problema"]},{id:4,descripcion:"Elabora hiptesis y variables para su comprobacin.",tematicas:["Hiptesis","Variables"]},{id:5,descripcion:"Selecciona tcnicas e instrumentos para la recoleccin de datos.",tematicas:["Recoleccin de datos"]},{id:6,descripcion:"Analiza e interpreta los resultados obtenidos en una investigacin.",tematicas:["Anlisis de resultados"]},{id:7,descripcion:"Elabora un reporte de investigacin siguiendo una estructura formal.",tematicas:["Reporte de investigacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T16:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Taller de Ciencias I",semestre:2,metadata:{nombre_uac:"TALLER DE CIENCIAS I",semestre:2,creditos:3,horas_semanales:3},organizador_curricular:{categorias:["Ciencias Experimentales"],metas_aprendizaje:["Aplica el mtodo cientfico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Aplica el mtodo cientfico experimental para validar hiptesis.",tematicas:["Mtodo cientfico"]},{id:2,descripcion:"Reconoce las normas de seguridad y el manejo de material de laboratorio.",tematicas:["Seguridad en laboratorio"]},{id:3,descripcion:"Realiza mediciones precisas utilizando instrumentos de laboratorio.",tematicas:["Medicin","Instrumentos"]},{id:4,descripcion:"Disea experimentos sencillos para probar relaciones causa-efecto.",tematicas:["Diseo experimental"]},{id:5,descripcion:"Registra y analiza datos experimentales utilizando tablas y grficas.",tematicas:["Anlisis de datos"]},{id:6,descripcion:"Elabora informes de laboratorio comunicando resultados y conclusiones.",tematicas:["Informe de laboratorio"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T16:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Pensamiento Matemtico III",semestre:3,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO III",semestre:3,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Nmero, lgebra y variacin","Forma, espacio y medida","Anlisis de datos"],metas_aprendizaje:["Resolver problemas","Modelar matemticamente","Argumentar soluciones"],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Aplica el razonamiento lgico-matemtico en la solucin de problemas cotidianos",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Nmeros reales y operaciones","Jerarqua de operaciones","Razones y proporciones","Porcentajes en la vida diaria"]},{id:2,descripcion:"Utiliza el lenguaje algebraico para representar y generalizar situaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Expresiones algebraicas","Leyes de exponentes","Polinomios basicos","Factorizacin"]},{id:3,descripcion:"Analiza las propiedades de las figuras geomtricas y sus relaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["ngulos y tringulos","Teorema de Pitgoras","Polgonos regulares","Clculo de reas y permetros"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761601",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Lengua y Comunicacin III",semestre:3,metadata:{nombre_uac:"LENGUA Y COMUNICACIN III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Atender y entender","La exploracin del mundo a travs de la lectura","La expresin verbal, visual y grfica"],metas_aprendizaje:["Comunicarse asertivamente","Leer crticamente","Escribir con coherencia"],propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la comunicacin asertiva en diversos contextos",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Proceso comunicativo","Intencin comunicativa","Funciones del lenguaje","Barreras de comunicacin"]},{id:2,descripcion:"Analiza textos de diversa ndole identificando ideas principales y secundarias",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Tipos de texto","Estrategias de lectura","Resumen y sntesis","Organizadores grficos"]},{id:3,descripcion:"Produce textos escritos con estructura lgica y correccin gramatical",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Proceso de escritura","Ortografa y puntuacin","Coherencia y cohesin","Tipologa textual"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761604",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ingls III",semestre:3,metadata:{nombre_uac:"INGLS III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Listening","Speaking","Reading","Writing"],metas_aprendizaje:["Comprensin auditiva","Expresin oral","Comprensin lectora"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende y utiliza expresiones cotidianas de uso muy frecuente",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Saludos y despedidas","Informacin personal","Verbo to be","Presente simple"]},{id:2,descripcion:"Describe situaciones personales, rutinas y hbitos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Rutinas diarias","Adverbios de frecuencia","Gustos y disgustos","Descripciones fsicas"]},{id:3,descripcion:"Interacta en situaciones sencillas sobre temas conocidos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Presente continuo","Futuro simple (will/going to)","Pasado simple","Vocabulario temtico"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761607",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ecosistemas: interacciones, energa y dinmica",semestre:3,metadata:{nombre_uac:"ECOSISTEMAS: INTERACCIONES, ENERGA Y DINMICA",semestre:3,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ecosistemas: interacciones, energa y dinmica bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761610",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ciencias Sociales III",semestre:3,metadata:{nombre_uac:"CIENCIAS SOCIALES III",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["El bienestar y la satisfaccin de las necesidades","La organizacin de la sociedad","Las normas sociales y jurdicas"],metas_aprendizaje:["Anlisis social","Pensamiento crtico","Conciencia histrica"],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Analiza procesos sociales y su impacto en la comunidad",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Individuo y sociedad","Procesos de socializacin","Estratificacin social","Problemas sociales contemporneos"]},{id:2,descripcion:"Comprende las estructuras econmicas y polticas",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Modos de produccin","Sectores econmicos","Formas de gobierno","Democracia y participacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761613",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Humanidades III",semestre:3,metadata:{nombre_uac:"HUMANIDADES III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761615",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica I",semestre:3,metadata:{nombre_uac:"CONCIENCIA HISTRICA I",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761617",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ingls IV",semestre:4,metadata:{nombre_uac:"INGLS IV",semestre:4,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Listening","Speaking","Reading","Writing"],metas_aprendizaje:["Comprensin auditiva","Expresin oral","Comprensin lectora"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls IV bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende y utiliza expresiones cotidianas de uso muy frecuente",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Saludos y despedidas","Informacin personal","Verbo to be","Presente simple"]},{id:2,descripcion:"Describe situaciones personales, rutinas y hbitos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Rutinas diarias","Adverbios de frecuencia","Gustos y disgustos","Descripciones fsicas"]},{id:3,descripcion:"Interacta en situaciones sencillas sobre temas conocidos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Presente continuo","Futuro simple (will/going to)","Pasado simple","Vocabulario temtico"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761620",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Reacciones Qumicas",semestre:4,metadata:{nombre_uac:"REACCIONES QUMICAS",semestre:4,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Reacciones Qumicas bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761622",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Matemticas IV (Propedutico)",semestre:4,metadata:{nombre_uac:"MATEMTICAS IV (PROPEDUTICO)",semestre:4,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Nmero, lgebra y variacin","Forma, espacio y medida","Anlisis de datos"],metas_aprendizaje:["Resolver problemas","Modelar matemticamente","Argumentar soluciones"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Matemticas IV (Propedutico) bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Aplica el razonamiento lgico-matemtico en la solucin de problemas cotidianos",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Nmeros reales y operaciones","Jerarqua de operaciones","Razones y proporciones","Porcentajes en la vida diaria"]},{id:2,descripcion:"Utiliza el lenguaje algebraico para representar y generalizar situaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Expresiones algebraicas","Leyes de exponentes","Polinomios basicos","Factorizacin"]},{id:3,descripcion:"Analiza las propiedades de las figuras geomtricas y sus relaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["ngulos y tringulos","Teorema de Pitgoras","Polgonos regulares","Clculo de reas y permetros"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761625",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Temas de Ciencias Sociales",semestre:4,metadata:{nombre_uac:"TEMAS DE CIENCIAS SOCIALES",semestre:4,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["El bienestar y la satisfaccin de las necesidades","La organizacin de la sociedad","Las normas sociales y jurdicas"],metas_aprendizaje:["Anlisis social","Pensamiento crtico","Conciencia histrica"],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Analiza procesos sociales y su impacto en la comunidad",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Individuo y sociedad","Procesos de socializacin","Estratificacin social","Problemas sociales contemporneos"]},{id:2,descripcion:"Comprende las estructuras econmicas y polticas",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Modos de produccin","Sectores econmicos","Formas de gobierno","Democracia y participacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761630",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica II",semestre:5,metadata:{nombre_uac:"CONCIENCIA HISTRICA II",semestre:5,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761634",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"La Energa",semestre:5,metadata:{nombre_uac:"LA ENERGA",semestre:5,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La Energa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761638",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Temas Selectos de Humanidades",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE HUMANIDADES",semestre:5,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761640",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica III",semestre:6,metadata:{nombre_uac:"CONCIENCIA HISTRICA III",semestre:6,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761643",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Cultura Digital III",semestre:6,metadata:{nombre_uac:"CULTURA DIGITAL III",semestre:6,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Ciudadana Digital","Pensamiento Computacional","Creatividad Digital"],metas_aprendizaje:["Usar tecnologa responsablemente","Resolver problemas con algoritmos","Crear contenido digital"],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Identifica y aplica normas de ciberseguridad y ciudadana digital",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Identidad digital","Huella digital","Ciberseguridad bsica","Normas de etiqueta en red"]},{id:2,descripcion:"Aplica el pensamiento computacional para la resolucin de problemas",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Algoritmos","Diagramas de flujo","Estructuras de control","Resolucin de problemas"]},{id:3,descripcion:"Utiliza herramientas de software para la productividad y colaboracin",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Procesadores de texto avanzados","Hojas de clculo","Herramientas colaborativas","Almacenamiento en la nube"]},{id:4,descripcion:"Desarrolla contenidos digitales multimedia",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Edicin de imgenes","Edicin de audio/video","Presentaciones interactivas","Derechos de autor"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761646",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Herencia y Evolucin",semestre:6,metadata:{nombre_uac:"HERENCIA Y EVOLUCIN",semestre:6,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Herencia y Evolucin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761648",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Filosofa",semestre:6,metadata:{nombre_uac:"FILOSOFA",semestre:6,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Filosofa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761650",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Cultura Digital III",semestre:3,metadata:{nombre_uac:"CULTURA DIGITAL III",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Pensamiento Computacional","Ciudadana Digital","Creatividad Digital"],metas_aprendizaje:["M1. Utiliza herramientas avanzadas de procesamiento de datos","M2. Desarrolla soluciones mediante algoritmos y programacin","M3. Aplica principios de ciudadana en entornos virtuales complejos"],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Integra el pensamiento computacional para el anlisis de problemas complejos y la toma de decisiones basada en datos.",tematicas:["Pensamiento Computacional Avanzado","Anlisis de Datos","Toma de Decisiones"]},{id:2,descripcion:"Utiliza estructuras de control condicionales (if-else) y repetitivas (bucles) en un lenguaje de programacin estructurado.",tematicas:["Programacin Estructurada","Condicionales","Ciclos/Bucles"]},{id:3,descripcion:"Disea y desarrolla algoritmos que resuelven problemas matemticos o lgicos de su entorno acadmico.",tematicas:["Diseo de Algoritmos","Lgica de Programacin","Resolucin de Problemas"]},{id:4,descripcion:"Comprende los fundamentos de las Bases de Datos y su importancia en la organizacin de la informacin.",tematicas:["Bases de Datos","Organizacin de Informacin","Tablas y Registros"]},{id:5,descripcion:"Utiliza herramientas de diseo web bsico (HTML/CSS) para la difusin de informacin.",tematicas:["Desarrollo Web","HTML","CSS"]},{id:6,descripcion:"Analiza crticamente el impacto de la Inteligencia Artificial y el Big Data en la sociedad actual.",tematicas:["Inteligencia Artificial","Big Data","tica Digital"]},{id:7,descripcion:"Aplica normas de seguridad digital avanzada y proteccin de datos personales en transacciones y trmites en lnea.",tematicas:["Ciberseguridad","Proteccin de Datos","Trmites Digitales"]},{id:8,descripcion:"Colabora en proyectos digitales multidisciplinarios utilizando plataformas de gestin de proyectos.",tematicas:["Trabajo Colaborativo","Gestin de Proyectos","Herramientas Digitales"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-12T12:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Formacin Socioemocional I",semestre:1,metadata:{nombre_uac:"FORMACIN SOCIOEMOCIONAL I",semestre:1,creditos:0,horas_semanales:2,enfoque:"Educacin Fsica y Bienestar"},organizador_curricular:{categorias:["Responsabilidad Social","Cuidado Fsico Corporal","Bienestar Emocional Afectivo","Actividades Fsicas y Deportivas"],metas_aprendizaje:["M1 Prctica y Colaboracin Ciudadana: Valore la importancia de la construccin de ciudadana para involucrarse como agente de transformacin social.","M2 Educacin para la Salud: Cuide su salud a partir de la reflexin y transformacin de prcticas cotidianas para el bienestar personal y colectivo.","M3 Actividades Fsicas y Deportivas: Desarrolle hbitos conscientes y reflexivos en torno a la actividad fsica como medio para el desarrollo integral.","M4 Educacin Integral en Sexualidad y Gnero: Cuide su salud y proteja su integridad al desarrollar relaciones sociales y sexuales constructivas e igualitarias.","M5 Actividades Artsticas y Culturales: Desarrolle sensibilidad esttica y tica mediante el disfrute y el goce del arte como forma de comunicacin."],propositos_formativos:["Reconoce los principales instrumentos que tutelan los derechos humanos en general, y especficamente de las infancias, adolescencias y juventudes.","Analiza las causas de las situaciones de inseguridad y violencia existentes en su entorno familiar, escolar o comunitario y que afectan su bienestar fsico, mental, emocional o social, para promover acciones colectivas de autocuidado y una cultura de paz.","Reflexiona desde la perspectiva de gnero sobre las dimensiones de la violencia de gnero contra las mujeres y contra las diversidades sexogenricas, para promover relaciones de respeto a partir del reconocimiento de los derechos humanos.","Investiga la forma en que los hbitos de consumo, formas de produccin en la comunidad, y prcticas y comportamientos en la vida cotidiana influyen en el medio ambiente, el cambio climtico y el bienestar personal y colectivo a nivel local, nacional e internacional.","Desarrollar las habilidades de dilogo y escucha activa para la construccin de grupos de trabajo colaborativo durante la identificacin y solucin de problemas de su entorno.","Desarrolla, junto con la comunidad estudiantil a la que pertenece, una conciencia crtica y reflexiva sobre los hbitos que configuran su existencia, y promueve el cuidado de s como una prctica tica que articula el bienestar fsico, emocional, mental y social.","Desarrolla la capacidad de discernir y elegir prcticas alimenticias que expresen un cuidado consciente de s, del cuerpo y del entorno, para fomentar una relacin tica con la alimentacin que reconozca su dimensin cultural, ecolgica y poltica, y que contribuya a una vida ms justa y sostenible.","Identifica, analiza y transforma los factores que afectan el bienestar, a partir del ejercicio del cuidado de s con autoconocimiento, autodominio y libertad tica, para convertirse en agente activo de la salud que reconoce su poder de decisin ante prcticas riesgosas.","Impulsa la construccin de las relaciones interpersonales, basadas en el respeto, el dilogo y el reconocimiento de las diferencias entre personas, entediendo que el cuidado de s, incluye la manera de vincularse con las dems personas, para promover una tica de la convivencia que contribuya al bienestar comn y a la transformacin de dinmicas violentas.","Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.","Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.","Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.","Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.","Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas.","Comprende la identidad y orientacin sexual, as como la construccin de vnculos afectivos saludables, mediante habilidades de comunicacin, dilogo y responsabilidad afectiva en relaciones sociales.","Reconoce las dimensiones de la sexualidad desde un enfoque de derechos humanos y sexuales, desmitificando creencias, hbitos y estereotipos, y valorando la diversidad sexual como parte de la identidad y expresin colectiva.","Analiza la influencia de los roles de gnero en la toma de decisiones sobre la vida sexual y reproductiva, y promueve tanto la prevencin de embarazos no planificados como el ejercicio informado y corresponsable de la sexualidad.","Desarrolla una conciencia crtica sobre le cuerpo, la autonoma y el placer, al cuestionar las normas sociales, culturales y de gnero que propician la discriminacin y la violencia.","Ejerce una ciudadana sexual crtica e informada, que integra el cuidado de s, el acceso a la salud sexual y reproductiva, y la construccin de un proyecto de vida con perspectiva de gnero, libre de estereotipos, violencias y jerarquas.","Participa de diversas expresiones artsticas para comunicar emociones, ideas y experiencias personales y del colectivo al que pertenece.","Genera manifestaciones artsticas variadas como formas de expresin poltica frente a los problemas que afectan a su comunidad y entorno.","Recrea la obra de artistas cuyas creaciones buscaron problematizar la realidad y dar cuenta de un posicionamiento poltico, y formaron parte de procesos colectivos de transformacin social.","Experimenta el arte como un espacio para el autodescubrimiento y el autoconocimiento en el marco de la complejidad de su contexto y momento histrico."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la cultura fsica como un derecho humano que contribuye al bienestar integral y la salud.",tematicas:["Cultura fsica","Derecho humano","Bienestar integral"]},{id:2,descripcion:"Identifica y practica hbitos de higiene, alimentacin y descanso para favorecer su desarrollo fsico y prevenir enfermedades.",tematicas:["Higiene","Alimentacin saludable","Hbitos de descanso"]},{id:3,descripcion:"Determina su condicin fsica actual a travs de pruebas de valoracin diagnstica para establecer metas de mejora personal.",tematicas:["Condicin fsica","Valoracin funcional","Metas personales"]},{id:4,descripcion:"Ejecuta actividades de activacin fsica sistemtica para fortalecer sus capacidades fsicas (fuerza, resistencia, velocidad, flexibilidad).",tematicas:["Capacidades fsicas","Activacin fsica","Entrenamiento bsico"]},{id:5,descripcion:"Reconoce la importancia de practicar deporte y actividad fsica para la regulacin de emociones y reduccin del estrs.",tematicas:["Regulacin emocional","Manejo de estrs","Salud mental"]},{id:6,descripcion:"Participa en juegos y actividades deportivas de conjunto promoviendo la integracin, el respeto y la colaboracin grupal.",tematicas:["Deportes de conjunto","Valores sociales","Trabajo en equipo"]},{id:7,descripcion:"Analiza los riesgos del sedentarismo en la sociedad actual y propone alternativas para una vida activa en su comunidad.",tematicas:["Sedentarismo","Vida saludable","Propuesta comunitaria"]},{id:8,descripcion:"Aplica tcnicas de respiracin y relajacin post-ejercicio para favorecer la recuperacin fsica y el equilibrio mental.",tematicas:["Tcnicas de relajacin","Recuperacin fsica","Equilibrio mental"]}],url_fuente:"https://dgb.sep.gob.mx/storage/recursos/2024/07/V2N8WnBUGb-programa_formacion_socioemocional-19%20080724.pdf",orientaciones_didacticas:["Aprendizaje Basado en Proyectos (ABP)","Crculos deliberativos y dilogos socrticos","Juegos de roles y sociodramas","Cartografas sociales y mapeos comunitarios","Asambleas escolares y deportivas","Cine-debates y anlisis de medios","Campaas de sensibilizacin pblica","Teatro y expresiones artsticas colaborativas"],criterios_evaluacion:[{aspecto:"Autoconocimiento",descripcion:"Capacidad de reconocer emociones y necesidades personales.",porcentaje:20},{aspecto:"Participacin Colaborativa",descripcion:"Integracin y respeto en actividades de grupo.",porcentaje:30},{aspecto:"Reflexin Crtica",descripcion:"Anlisis sobre el impacto de hbitos y conductas en el bienestar.",porcentaje:25},{aspecto:"Accin Transformadora",descripcion:"Propuesta y ejecucin de acciones para la mejora del entorno.",porcentaje:25}],bibliografia:[{tipo:"libro",titulo:"Y el cerebro cre al hombre",autor:"Damasio, A.",ao:2010,disponibilidad:"digital"},{tipo:"libro",titulo:"Crear capacidades: Propuesta para el desarrollo humano",autor:"Nussbaum, M.",ao:2012,disponibilidad:"biblioteca"},{tipo:"libro",titulo:"Homo Ludens",autor:"Huizinga, J.",ao:2012,disponibilidad:"biblioteca"},{tipo:"manual",titulo:"Programas de Estudio MCCEMS 2025",autor:"DGB-SEP",ao:2025,disponibilidad:"digital"}],fecha_extraccion:"2026-02-08T01:33:44.724Z"},{materia:"La materia y sus interacciones CNEYT I",semestre:1,metadata:{nombre_uac:"LA MATERIA Y SUS INTERACCIONES CNEYT I",semestre:1,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La materia y sus interacciones CNEYT I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de La materia y sus interacciones CNEYT I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de La materia y sus interacciones CNEYT I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conservacin de la energa y su interaccin con la materia CNEYT II",semestre:2,metadata:{nombre_uac:"CONSERVACIN DE LA ENERGA Y SU INTERACCIN CON LA MATERIA CNEYT II",semestre:2,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conservacin de la energa y su interaccin con la materia CNEYT II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Conservacin de la energa y su interaccin con la materia CNEYT II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Conservacin de la energa y su interaccin con la materia CNEYT II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ecosistemas, interacciones, energia y dinamica CNEYT III",semestre:3,metadata:{nombre_uac:"ECOSISTEMAS, INTERACCIONES, ENERGIA Y DINAMICA CNEYT III",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ecosistemas, interacciones, energia y dinamica CNEYT III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Ecosistemas, interacciones, energia y dinamica CNEYT III.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Ecosistemas, interacciones, energia y dinamica CNEYT III en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ciencias Sociales III",semestre:4,metadata:{nombre_uac:"CIENCIAS SOCIALES III",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Ciencias Sociales III.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Ciencias Sociales III en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conciencia Histrica I",semestre:4,metadata:{nombre_uac:"CONCIENCIA HISTRICA I",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Conciencia Histrica I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Conciencia Histrica I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Reacciones qumicas conservacin de la materia CNEYT IV",semestre:4,metadata:{nombre_uac:"REACCIONES QUMICAS CONSERVACIN DE LA MATERIA CNEYT IV",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Reacciones qumicas conservacin de la materia CNEYT IV bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Reacciones qumicas conservacin de la materia CNEYT IV.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Reacciones qumicas conservacin de la materia CNEYT IV en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"La energa en los procesos de la vida diaria CNEYT V",semestre:5,metadata:{nombre_uac:"LA ENERGA EN LOS PROCESOS DE LA VIDA DIARIA CNEYT V",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La energa en los procesos de la vida diaria CNEYT V bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de La energa en los procesos de la vida diaria CNEYT V.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de La energa en los procesos de la vida diaria CNEYT V en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos Fsicos I",semestre:5,metadata:{nombre_uac:"ANLISIS DE FENMENOS FSICOS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos Fsicos I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Anlisis de Fenmenos Fsicos I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Anlisis de Fenmenos Fsicos I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Derecho y Sociedad I",semestre:5,metadata:{nombre_uac:"DERECHO Y SOCIEDAD I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Derecho y Sociedad I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Derecho y Sociedad I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Derecho y Sociedad I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Fundamentos de Administracin I",semestre:5,metadata:{nombre_uac:"FUNDAMENTOS DE ADMINISTRACIN I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Fundamentos de Administracin I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Fundamentos de Administracin I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Fundamentos de Administracin I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Organismos, estructuras y procesos CNEYT VI",semestre:6,metadata:{nombre_uac:"ORGANISMOS, ESTRUCTURAS Y PROCESOS CNEYT VI",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Organismos, estructuras y procesos CNEYT VI bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Organismos, estructuras y procesos CNEYT VI.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Organismos, estructuras y procesos CNEYT VI en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos Fsicos II",semestre:6,metadata:{nombre_uac:"ANLISIS DE FENMENOS FSICOS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos Fsicos II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Anlisis de Fenmenos Fsicos II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Anlisis de Fenmenos Fsicos II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Derecho y Sociedad II",semestre:6,metadata:{nombre_uac:"DERECHO Y SOCIEDAD II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Derecho y Sociedad II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Derecho y Sociedad II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Derecho y Sociedad II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Races etimolgicas del espaol I",semestre:5,metadata:{nombre_uac:"RACES ETIMOLGICAS DEL ESPAOL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Races etimolgicas del espaol I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Races etimolgicas del espaol I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Races etimolgicas del espaol I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Races etimolgicas del espaol I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Probabilidad y Estadstica I",semestre:5,metadata:{nombre_uac:"TALLER DE PROBABILIDAD Y ESTADSTICA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Probabilidad y Estadstica I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Probabilidad y Estadstica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Probabilidad y Estadstica I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Probabilidad y Estadstica I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Comunicacin y Sociedad I",semestre:5,metadata:{nombre_uac:"COMUNICACIN Y SOCIEDAD I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Comunicacin y Sociedad I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Comunicacin y Sociedad I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Comunicacin y Sociedad I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Comunicacin y Sociedad I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Pensamiento Variacional I",semestre:5,metadata:{nombre_uac:"TALLER DE PENSAMIENTO VARIACIONAL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Pensamiento Variacional I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Pensamiento Variacional I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Pensamiento Variacional I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Pensamiento Variacional I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Psicologa I",semestre:5,metadata:{nombre_uac:"PSICOLOGA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Psicologa I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Psicologa I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Psicologa I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Psicologa I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Filosfico I",semestre:5,metadata:{nombre_uac:"PENSAMIENTO FILOSFICO I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Filosfico I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Filosfico I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Filosfico I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Filosfico I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos y Procesos Biolgicos",semestre:5,metadata:{nombre_uac:"ANLISIS DE FENMENOS Y PROCESOS BIOLGICOS",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Anlisis de Fenmenos y Procesos Biolgicos."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos y Procesos Biolgicos bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Anlisis de Fenmenos y Procesos Biolgicos.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Anlisis de Fenmenos y Procesos Biolgicos.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico Aplicado a las Finanzas I",semestre:5,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO APLICADO A LAS FINANZAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Matemtico Aplicado a las Finanzas I."],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Matemtico Aplicado a las Finanzas I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Matemtico Aplicado a las Finanzas I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingles V",semestre:5,metadata:{nombre_uac:"INGLES V",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Ingles V."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingles V bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Ingles V.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Ingles V.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Dibujo Tcnico I",semestre:5,metadata:{nombre_uac:"DIBUJO TCNICO I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Dibujo Tcnico I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Dibujo Tcnico I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Dibujo Tcnico I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Dibujo Tcnico I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Salud Integral I",semestre:5,metadata:{nombre_uac:"SALUD INTEGRAL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Salud Integral I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Salud Integral I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Salud Integral I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Salud Integral I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Economa I. La funcin de los agentes econmicos en la sociedad",semestre:5,metadata:{nombre_uac:"ECONOMA I. LA FUNCIN DE LOS AGENTES ECONMICOS EN LA SOCIEDAD",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Economa I. La funcin de los agentes econmicos en la sociedad."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Economa I. La funcin de los agentes econmicos en la sociedad bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Economa I. La funcin de los agentes econmicos en la sociedad.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Economa I. La funcin de los agentes econmicos en la sociedad.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Procesos ContabIes I",semestre:5,metadata:{nombre_uac:"PROCESOS CONTABIES I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Procesos ContabIes I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Procesos ContabIes I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Procesos ContabIes I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Procesos ContabIes I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Ciencias Sociales I",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE CIENCIAS SOCIALES I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Ciencias Sociales I."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Ciencias Sociales I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Ciencias Sociales I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Arte y Cultura I",semestre:5,metadata:{nombre_uac:"ARTE Y CULTURA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Arte y Cultura I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Arte y Cultura I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Arte y Cultura I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Arte y Cultura I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lgica y Pensamiento Crtico",semestre:5,metadata:{nombre_uac:"LGICA Y PENSAMIENTO CRTICO",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Lgica y Pensamiento Crtico."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Lgica y Pensamiento Crtico bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Lgica y Pensamiento Crtico.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Lgica y Pensamiento Crtico.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Fundamentos de Administracin II",semestre:6,metadata:{nombre_uac:"FUNDAMENTOS DE ADMINISTRACIN II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Fundamentos de Administracin II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Fundamentos de Administracin II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Fundamentos de Administracin II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Fundamentos de Administracin II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Organizacin del flujo de materia y energa en los organismos II",semestre:6,metadata:{nombre_uac:"ORGANIZACIN DEL FLUJO DE MATERIA Y ENERGA EN LOS ORGANISMOS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Organizacin del flujo de materia y energa en los organismos II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Organizacin del flujo de materia y energa en los organismos II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Organizacin del flujo de materia y energa en los organismos II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Organizacin del flujo de materia y energa en los organismos II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Races etimolgicas del espaol II",semestre:6,metadata:{nombre_uac:"RACES ETIMOLGICAS DEL ESPAOL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Races etimolgicas del espaol II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Races etimolgicas del espaol II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Races etimolgicas del espaol II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Races etimolgicas del espaol II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Probabilidad y Estadstica II",semestre:6,metadata:{nombre_uac:"TALLER DE PROBABILIDAD Y ESTADSTICA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Probabilidad y Estadstica II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Probabilidad y Estadstica II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Probabilidad y Estadstica II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Probabilidad y Estadstica II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Pensamiento Variacional II",semestre:6,metadata:{nombre_uac:"TALLER DE PENSAMIENTO VARIACIONAL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Pensamiento Variacional II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Pensamiento Variacional II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Pensamiento Variacional II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Pensamiento Variacional II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Comunicacin y Sociedad II",semestre:6,metadata:{nombre_uac:"COMUNICACIN Y SOCIEDAD II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Comunicacin y Sociedad II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Comunicacin y Sociedad II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Comunicacin y Sociedad II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Comunicacin y Sociedad II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Psicologa II",semestre:6,metadata:{nombre_uac:"PSICOLOGA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Psicologa II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Psicologa II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Psicologa II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Psicologa II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Filosfico II",semestre:6,metadata:{nombre_uac:"PENSAMIENTO FILOSFICO II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Filosfico II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Filosfico II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Filosfico II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Filosfico II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Biologa",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE BIOLOGA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Biologa."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Biologa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Biologa.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Biologa.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingles VI",semestre:6,metadata:{nombre_uac:"INGLES VI",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Ingles VI."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingles VI bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Ingles VI.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Ingles VI.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Dibujo TcnicoII",semestre:6,metadata:{nombre_uac:"DIBUJO TCNICOII",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Dibujo TcnicoII."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Dibujo TcnicoII bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Dibujo TcnicoII.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Dibujo TcnicoII.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico Aplicado a las Finanzas-II",semestre:6,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO APLICADO A LAS FINANZAS-II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Matemtico Aplicado a las Finanzas-II."],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Matemtico Aplicado a las Finanzas-II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Matemtico Aplicado a las Finanzas-II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Salud Integral II",semestre:6,metadata:{nombre_uac:"SALUD INTEGRAL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Salud Integral II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Salud Integral II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Salud Integral II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Salud Integral II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Economa II. Poltica econmica y poltica pblica mexicana",semestre:6,metadata:{nombre_uac:"ECONOMA II. POLTICA ECONMICA Y POLTICA PBLICA MEXICANA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Economa II. Poltica econmica y poltica pblica mexicana."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Economa II. Poltica econmica y poltica pblica mexicana bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Economa II. Poltica econmica y poltica pblica mexicana.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Economa II. Poltica econmica y poltica pblica mexicana.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Procesos ContabIes II",semestre:6,metadata:{nombre_uac:"PROCESOS CONTABIES II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Procesos ContabIes II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Procesos ContabIes II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Procesos ContabIes II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Procesos ContabIes II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Ciencias Sociales II",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE CIENCIAS SOCIALES II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Ciencias Sociales II."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Ciencias Sociales II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Ciencias Sociales II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Arte y Cultura II",semestre:6,metadata:{nombre_uac:"ARTE Y CULTURA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Arte y Cultura II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Arte y Cultura II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Arte y Cultura II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Arte y Cultura II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Experiencia Esttica",semestre:6,metadata:{nombre_uac:"EXPERIENCIA ESTTICA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Experiencia Esttica."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Experiencia Esttica bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Experiencia Esttica.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Experiencia Esttica.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Tecnologas de la Comunicacin y la Informacin",semestre:3,metadata:{nombre_uac:"TECNOLOGAS DE LA COMUNICACIN Y LA INFORMACIN",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Tecnologas de la Comunicacin y la Informacin."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Tecnologas de la Comunicacin y la Informacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Tecnologas de la Comunicacin y la Informacin.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Tecnologas de la Comunicacin y la Informacin.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Higiene y Salud Comunitaria",semestre:3,metadata:{nombre_uac:"HIGIENE Y SALUD COMUNITARIA",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Higiene y Salud Comunitaria."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Higiene y Salud Comunitaria bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Higiene y Salud Comunitaria.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Higiene y Salud Comunitaria.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Diseo grfico",semestre:3,metadata:{nombre_uac:"DISEO GRFICO",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Diseo grfico."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Diseo grfico bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Diseo grfico.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Diseo grfico.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Literario",semestre:5,metadata:{nombre_uac:"PENSAMIENTO LITERARIO",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Pensamiento Literario."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Literario bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Pensamiento Literario.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Cultura Digital",semestre:5,metadata:{nombre_uac:"TALLER DE CULTURA DIGITAL",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Cultura Digital."],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Cultura Digital.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Matemticas I",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE MATEMTICAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Temas Selectos de Matemticas I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Matemticas I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Temas Selectos de Matemticas I.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Matemticas II",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE MATEMTICAS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Temas Selectos de Matemticas II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Matemticas II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Temas Selectos de Matemticas II.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Espacio y Sociedad",semestre:5,metadata:{nombre_uac:"ESPACIO Y SOCIEDAD",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Espacio y Sociedad."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Espacio y Sociedad bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Espacio y Sociedad.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Ciencias I",semestre:5,metadata:{nombre_uac:"TALLER DE CIENCIAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Ciencias I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Ciencias I.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Laboratorio de Investigacin",semestre:5,metadata:{nombre_uac:"LABORATORIO DE INVESTIGACIN",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Laboratorio de Investigacin."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Laboratorio de Investigacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Laboratorio de Investigacin.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Ciencias II",semestre:6,metadata:{nombre_uac:"TALLER DE CIENCIAS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Ciencias II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Ciencias II.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Fsicas y Deportivas I 2025",semestre:1,metadata:{nombre_uac:"ACTIVIDADES FSICAS Y DEPORTIVAS I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Vida Saludable","Cultura Fsica"],metas_aprendizaje:["Desarrollo fsico","Cuidado de la salud"],propositos_formativos:["Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.","Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.","Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.","Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.","Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas."]},progresiones:[{id:1,descripcion:"Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.",tematicas:["El juego como derecho humano","El deporte y el juego","Juegos tradicionales"]},{id:2,descripcion:"Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.",tematicas:["Derecho a participar en actividades fsicas y deportivas","Beneficios del deporte para la salud y la convivencia","Diversidad corporal, tnica, cultural y sexogenrica como elementos enriquecedores en el deporte"]},{id:3,descripcion:"Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.",tematicas:["Emociones que se identifican durante la prctica deportiva","Importancia de las reglas y el respeto para canalizar emociones","Uso del deporte para prevenir riesgos y tomar decisiones saludables","Potencialidades psicomotrices de la corporalidad"]},{id:4,descripcion:"Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.",tematicas:["Discriminacin en el deporte","Respeto a las diversidades corporales e identidades sexogenricas","Comunicacin asertiva para resolver conflictos y crear ambientes inclusivos"]},{id:5,descripcion:"Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas.",tematicas:["Inclusin en el deporte","Personas de la diversidad sexogenrica o en situacin de discapacidad","Crtica a las normas y estereotipos que limitan la participacin","Prcticas deportivas incluyentes como herramientas de transformacin social"]}],orientaciones_didacticas:["Asambleas deportivas","Diarios de reflexin corporal"],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Fsicas y Deportivas II 2025",semestre:2,metadata:{nombre_uac:"ACTIVIDADES FSICAS Y DEPORTIVAS II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Vida Saludable","Integracin Social"],metas_aprendizaje:["Convivencia deportiva","Gestin de torneos"],propositos_formativos:["Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.","Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.","Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.","Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.","Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas."]},progresiones:[{id:1,descripcion:"Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.",tematicas:["El juego como derecho humano","El deporte y el juego","Juegos tradicionales"]},{id:2,descripcion:"Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.",tematicas:["Derecho a participar en actividades fsicas y deportivas","Beneficios del deporte para la salud y la convivencia","Diversidad corporal, tnica, cultural y sexogenrica como elementos enriquecedores en el deporte"]},{id:3,descripcion:"Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.",tematicas:["Emociones que se identifican durante la prctica deportiva","Importancia de las reglas y el respeto para canalizar emociones","Uso del deporte para prevenir riesgos y tomar decisiones saludables","Potencialidades psicomotrices de la corporalidad"]},{id:4,descripcion:"Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.",tematicas:["Discriminacin en el deporte","Respeto a las diversidades corporales e identidades sexogenricas","Comunicacin asertiva para resolver conflictos y crear ambientes inclusivos"]},{id:5,descripcion:"Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas.",tematicas:["Inclusin en el deporte","Personas de la diversidad sexogenrica o en situacin de discapacidad","Crtica a las normas y estereotipos que limitan la participacin","Prcticas deportivas incluyentes como herramientas de transformacin social"]}],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Prctica y Colaboracin Ciudadana I 2025",semestre:1,metadata:{nombre_uac:"PRCTICA Y COLABORACIN CIUDADANA I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Valore la importancia de la construccin de ciudadana..."],propositos_formativos:["Reconoce los principales instrumentos que tutelan los derechos humanos...","Analiza las causas de las situaciones de inseguridad y violencia...","Reflexiona desde la perspectiva de gnero...","Investiga la forma en que los hbitos de consumo...","Desarrolla las habilidades de dilogo..."]},progresiones:[],orientaciones_didacticas:["Proyectos sociales"],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Prctica y Colaboracin Ciudadana II 2025",semestre:2,metadata:{nombre_uac:"PRCTICA Y COLABORACIN CIUDADANA II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Valore la importancia de la construccin de ciudadana..."],propositos_formativos:["Accin ciudadana y democracia participativa."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin para la Salud I 2025",semestre:1,metadata:{nombre_uac:"EDUCACIN PARA LA SALUD I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud a partir de la reflexin y transformacin de prcticas cotidianas..."],propositos_formativos:["Desarrolla una conciencia crtica sobre los hbitos...","Discernir y elegir prcticas alimenticias...","Identifica, analiza y transforma factores de riesgo...","Impulsa la construccin de relaciones interpersonales..."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin para la Salud II 2025",semestre:2,metadata:{nombre_uac:"EDUCACIN PARA LA SALUD II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud..."],propositos_formativos:["Bienestar integral y prevencin."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin Integral en Sexualidad y Gnero I 2025",semestre:1,metadata:{nombre_uac:"EDUCACIN INTEGRAL EN SEXUALIDAD Y GNERO I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud y proteja su integridad..."],propositos_formativos:["Comprende la identidad y orientacin sexual...","Reconoce las dimensiones de la sexualidad...","Analiza la influencia de los roles de gnero...","Desarrolla una conciencia crtica sobre el cuerpo...","Ejerce una ciudadana sexual crtica e informada."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin Integral en Sexualidad y Gnero II 2025",semestre:2,metadata:{nombre_uac:"EDUCACIN INTEGRAL EN SEXUALIDAD Y GNERO II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud..."],propositos_formativos:["Derechos y autonoma corporal."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Artsticas y Culturales I 2025",semestre:1,metadata:{nombre_uac:"ACTIVIDADES ARTSTICAS Y CULTURALES I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle sensibilidad esttica y tica..."],propositos_formativos:["Participa de diversas expresiones artsticas...","Genera manifestaciones artsticas variadas...","Recrea la obra de artistas...","Experimenta el arte como un espacio para el autodescubrimiento."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Artsticas y Culturales II 2025",semestre:2,metadata:{nombre_uac:"ACTIVIDADES ARTSTICAS Y CULTURALES II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle sensibilidad esttica y tica..."],propositos_formativos:["Expresin y goce esttico."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"}];class nz{constructor(){Ld(this,"programas",[]);Ld(this,"indexPorMateria",new Map);Ld(this,"indexPorSemestre",new Map);this.cargarProgramas(),this.construirIndices()}cargarProgramas(){try{this.programas=LI,console.log(` Cargados ${this.programas.length} programas MCCEMS`)}catch(e){console.error(" Error cargando programas SEP:",e),this.programas=[]}}construirIndices(){this.programas.forEach(e=>{const n=this.normalizarNombre(e.materia);this.indexPorMateria.has(n)||this.indexPorMateria.set(n,[]),this.indexPorMateria.get(n).push(e)}),this.programas.forEach(e=>{this.indexPorSemestre.has(e.semestre)||this.indexPorSemestre.set(e.semestre,[]),this.indexPorSemestre.get(e.semestre).push(e)})}normalizarNombre(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").trim()}buscarPorMateria(e){const n=this.normalizarNombre(e);if(this.indexPorMateria.has(n))return this.indexPorMateria.get(n);const s=[];return this.indexPorMateria.forEach((a,i)=>{(i.includes(n)||n.includes(i))&&s.push(...a)}),s}buscarPorSemestre(e){return this.indexPorSemestre.get(e)||[]}buscarPorMateriaYSemestre(e,n){return this.buscarPorMateria(e).find(i=>i.semestre===n)||null}obtenerProgresiones(e,n){let s;if(n!==void 0){const a=this.buscarPorMateriaYSemestre(e,n);s=a?[a]:[]}else s=this.buscarPorMateria(e);return s.flatMap(a=>a.progresiones)}obtenerMetasAprendizaje(e,n){const s=this.buscarPorMateriaYSemestre(e,n);return(s==null?void 0:s.organizador_curricular.metas_aprendizaje)||[]}validarPlaneacion(e,n,s){const a=this.buscarPorMateriaYSemestre(e,n);if(!a)return{esValida:!1,progresionesOficiales:[],coincidencias:0,sugerencias:[`No se encontr el programa oficial para ${e} semestre ${n}`]};const i=a.progresiones;let o=0;const l=[];return s.forEach(c=>{const d=this.normalizarNombre(c);if(i.some(p=>this.normalizarNombre(p.descripcion).includes(d)||d.includes(this.normalizarNombre(p.descripcion))))o++;else{const p=i[0];l.push(`"${c}" no coincide con progresiones oficiales. Considera: "${p.descripcion.substring(0,100)}..."`)}}),{esValida:o>0,progresionesOficiales:i,coincidencias:o,sugerencias:l.slice(0,3)}}generarContextoIA(e,n){var i,o,l,c,d,m;const s=this.buscarPorMateriaYSemestre(e,n);return s?`
PROGRAMA OFICIAL MCCEMS - DGB/SEP
Materia: ${s.materia}
Semestre: ${s.semestre}
${s.metadata.creditos?`Crditos: ${s.metadata.creditos}`:""}
${s.metadata.horas_semanales?`Horas semanales: ${s.metadata.horas_semanales}`:""}

ORGANIZADOR CURRICULAR:
Categoras: ${((o=(i=s.organizador_curricular)==null?void 0:i.categorias)==null?void 0:o.join(", "))||"No definidas"}

PROGRESIONES DE APRENDIZAJE (${((l=s.progresiones)==null?void 0:l.length)||0} total):
${((c=s.progresiones)==null?void 0:c.slice(0,5).map(p=>`${p.id}. ${p.descripcion.substring(0,150)}...`).join(`
`))||"Sin progresiones registradas"}

METAS DE APRENDIZAJE:
${((m=(d=s.organizador_curricular)==null?void 0:d.metas_aprendizaje)==null?void 0:m.slice(0,3).join(`
`))||"Generales del MCCEMS"}

Fuente oficial: ${s.url_fuente||"DGB-SEP"}
Fecha de extraccin: ${s.fecha_extraccion?new Date(s.fecha_extraccion).toLocaleDateString("es-MX"):"Reciente"}
        `.trim():`No se encontr informacin oficial para ${e} semestre ${n}.`}obtenerEstadisticas(){return{totalProgramas:this.programas.length,programasPorSemestre:Array.from(this.indexPorSemestre.entries()).map(([e,n])=>({semestre:e,cantidad:n.length})).sort((e,n)=>e.semestre-n.semestre),materiasDisponibles:Array.from(this.indexPorMateria.keys()),ultimaActualizacion:this.programas.reduce((e,n)=>{const s=new Date(n.fecha_extraccion);return s>e?s:e},new Date(0))}}}const Mn=new nz,sz=({subject:t,setSubject:e})=>{const[n,s]=M.useState([]),[a,i]=M.useState(!0);M.useEffect(()=>{const g=Mn.obtenerEstadisticas().materiasDisponibles,x=[];g.forEach(A=>{const b=Mn.buscarPorMateria(A);x.push(...b)});const y=new Map;x.forEach(A=>y.set(A.materia+A.semestre,A));const T=Array.from(y.values());T.sort((A,b)=>A.semestre!==b.semestre?A.semestre-b.semestre:A.materia.localeCompare(b.materia)),s(T),i(!1)},[]);const o=p=>{var y,T;const g=p.target.value,x=n.find(A=>A.materia===g);x&&e({subjectId:x.materia,subjectName:x.materia,mccemsCategory:((T=(y=x.organizador_curricular)==null?void 0:y.categorias)==null?void 0:T[0])||"Asignatura MCCEMS",formativePurpose:`Alinear al programa oficial de ${x.materia} (Semestre ${x.semestre})`,curriculumContent:`Basado en el documento oficial: ${x.url_fuente}`})},{user:l}=ut(),c=[],d={};n.forEach(p=>{var x;const g=(x=l==null?void 0:l.materias)==null?void 0:x.some(y=>y.toLowerCase()===p.materia.toLowerCase());g&&(c.find(y=>y.materia===p.materia)||c.push(p)),g||(d[p.semestre]||(d[p.semestre]=[]),d[p.semestre].push(p))});const m=n.find(p=>p.materia===t.subjectId)||n.find(p=>p.materia===t.subjectName);return r.jsxs("div",{className:"space-y-4 bg-indigo-50/50 p-6 rounded-2xl border border-indigo-100",children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-800 font-bold text-sm mb-2",children:[r.jsx(cU,{className:"w-4 h-4"}),"Configuracin Curricular Oficial (SEP - DGB)"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-tight",children:"Selecciona tu Asignatura Oficial"}),a?r.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm p-3",children:[r.jsx(cl,{className:"w-4 h-4 animate-spin"})," Cargando catlogo oficial..."]}):r.jsxs("select",{value:t.subjectName,onChange:o,className:"w-full px-4 py-3 rounded-xl border border-white bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-slate-700 font-medium cursor-pointer",children:[r.jsx("option",{value:"",children:"-- Elige una Materia del Catlogo --"}),c.length>0&&r.jsx("optgroup",{label:" Mis Materias Asignadas",children:c.map(p=>r.jsx("option",{value:p.materia,children:p.materia},`my-${p.materia}`))}),Object.keys(d).map(p=>r.jsx("optgroup",{label:`Semestre ${p}`,children:d[Number(p)].map(g=>r.jsx("option",{value:g.materia,children:g.materia},g.materia+g.semestre))},p))]})]}),m&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl border border-indigo-100 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 text-emerald-700 p-2 rounded-lg",children:r.jsx(DI,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase",children:"Programa Oficial Detectado"}),r.jsxs("div",{className:"text-[11px] text-slate-500 truncate max-w-[200px] md:max-w-md",children:[m.materia," (Semestre ",m.semestre,")"]})]})]}),r.jsx("a",{href:m.url_fuente,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver Programa Oficial",children:r.jsx(Xg,{className:"w-5 h-5"})})]})]})},jr="schools",BE="users";class az{generateAccessCode(e){return e.replace(/[^A-Z0-9]/gi,"").toUpperCase().substring(0,8)}async createSchool(e,n){try{const s=this.generateAccessCode(e.cct);if(await this.getSchoolByCCT(e.cct))throw new Error("Ya existe una escuela registrada con este CCT");const i={nombre:e.nombre,cct:e.cct.toUpperCase(),municipio:e.municipio,estado:e.estado,turno:e.turno,codigoAcceso:s,createdAt:new Date().toISOString(),createdBy:n,activa:!0,estadisticas:{totalDocentes:1,totalPlaneaciones:0,ultimaActualizacion:new Date().toISOString()},directivos:[n]};return{id:(await ss(ue(J,jr),i)).id,...i}}catch(s){throw console.error("Error al crear escuela:",s),s}}async getSchoolByCCT(e){try{const n=Ye(ue(J,jr),et("cct","==",e.toUpperCase()),ho(1)),s=await Me(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){throw console.error("Error al buscar escuela por CCT:",n),n}}async getSchoolByCode(e){try{const n=Ye(ue(J,jr),et("codigoAcceso","==",e.toUpperCase()),ho(1)),s=await Me(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){throw console.error("Error al buscar escuela por cdigo:",n),n}}async searchSchools(e){try{const n=Ye(ue(J,jr),et("activa","==",!0),Us("nombre"),ho(50)),a=(await Me(n)).docs.map(l=>({id:l.id,...l.data()})),i=e.toLowerCase();return a.filter(l=>l.nombre.toLowerCase().includes(i)||l.cct.toLowerCase().includes(i)||l.municipio.toLowerCase().includes(i)).map(l=>({id:l.id,nombre:l.nombre,cct:l.cct,municipio:l.municipio,turno:l.turno,codigoAcceso:l.codigoAcceso,totalDocentes:l.estadisticas.totalDocentes}))}catch(n){throw console.error("Error al buscar escuelas:",n),n}}async getSchoolById(e){try{const n=re(J,jr,e),s=await Vn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error al obtener escuela:",n),n}}async createUserProfile(e,n,s,a,i,o,l){try{const c=["Director","Subdirector"].includes(l.puesto)?"directivo":"maestro",d={email:n,nombre:s,apellidoPaterno:a,schoolId:i,schoolName:o,puesto:l.puesto,rol:c,materias:l.materias,grados:l.grados,telefono:l.telefono,createdAt:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),onboardingCompleto:!0},m=re(J,BE,e);return await pr(m,d,{merge:!0}),await this.incrementSchoolDocentes(i),{id:e,...d}}catch(c){throw console.error("Error al crear perfil de usuario:",c),c}}async getUserProfile(e){try{const n=re(J,BE,e),s=await Vn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error al obtener perfil de usuario:",n),n}}async incrementSchoolDocentes(e){var n;try{const s=re(J,jr,e),a=await Vn(s);if(a.exists()){const i=((n=a.data().estadisticas)==null?void 0:n.totalDocentes)||0;await bt(s,{"estadisticas.totalDocentes":i+1,"estadisticas.ultimaActualizacion":new Date().toISOString()})}}catch(s){console.error("Error al incrementar docentes:",s)}}async needsOnboarding(e){try{const n=await this.getUserProfile(e);return!n||!n.onboardingCompleto}catch(n){return console.error("Error al verificar onboarding:",n),!0}}}const qc=new az,VI=Object.freeze(Object.defineProperty({__proto__:null,schoolService:qc},Symbol.toStringTag,{value:"Module"})),iz=({school:t,setSchool:e,subject:n,setSubject:s})=>{const a=d=>{e(m=>({...m,[d.target.name]:d.target.value}))},i=d=>{s(m=>({...m,[d.target.name]:d.target.value}))},{user:o}=ut(),[l,c]=M.useState(!1);return M.useEffect(()=>{(async()=>{if(o&&o.schoolId&&(e(m=>({...m,schoolName:o.schoolName||m.schoolName})),!t.cct||t.cct!==o.schoolName)){c(!0);try{const m=await qc.getSchoolById(o.schoolId);if(m){e(p=>({...p,cct:m.cct||p.cct,municipality:m.municipio||p.municipality,shift:m.turno!=="Matutino"?m.turno:p.shift,vision:m.vision||p.vision,infrastructure:m.infraestructura||p.infrastructure}));try{const{doc:p,getDoc:g}=await Ao(async()=>{const{doc:A,getDoc:b}=await Promise.resolve().then(()=>JV);return{doc:A,getDoc:b}},void 0),{db:x}=await Ao(async()=>{const{db:A}=await Promise.resolve().then(()=>AI);return{db:A}},void 0),y=p(x,"pmc",o.schoolId),T=await g(y);if(T.exists()){const A=T.data();if(A.metas&&Array.isArray(A.metas)){const b=A.metas.map(N=>` ${N.description||"Meta sin descripcin"} (${N.area})`).join(`
`);e(N=>({...N,communityGoals:b}))}}}catch(p){console.error("Error loading PMC goals:",p)}}}catch(m){console.error("Error loading school details:",m)}finally{c(!1)}}})()},[o,o==null?void 0:o.schoolId]),r.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[r.jsxs("section",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold uppercase tracking-wider text-xs",children:[r.jsx(jt,{className:"w-4 h-4"}),"Contexto Institucional"]}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-1",children:"Identidad de la Escuela"})]}),o&&r.jsxs("div",{className:"text-right hidden md:block",children:[r.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Autocompletado para"}),r.jsxs("p",{className:"text-sm font-medium text-indigo-600",children:[o.nombre," ",o.apellidoPaterno]})]})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 bg-indigo-50 p-3 rounded-lg mb-4 text-sm",children:[r.jsx(cl,{className:"w-4 h-4 animate-spin"}),"Sincronizando datos de tu escuela..."]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Gm,{className:"w-4 h-4 text-slate-400"})," Nombre del Plantel"]}),r.jsx("input",{name:"schoolName",value:t.schoolName,onChange:a,className:`w-full px-4 py-2 rounded-xl border outline-none transition-all ${o!=null&&o.schoolName?"bg-indigo-50 border-indigo-200":"border-slate-200 focus:ring-2 focus:ring-indigo-500"}`,placeholder:"Ej. Bachillerato Gral. Oficial Emiliano Zapata"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Wn,{className:"w-4 h-4 text-slate-400"})," Clave de Centro de Trabajo (CCT) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{name:"cct",value:t.cct,onChange:a,className:`w-full px-4 py-2 rounded-xl border outline-none transition-all uppercase ${t.cct?"border-slate-200 focus:ring-2 focus:ring-indigo-500":"border-red-200 bg-red-50"}`,placeholder:"Ej. 21EBH0000X"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Turno"}),r.jsxs("select",{name:"shift",value:t.shift,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:[r.jsx("option",{value:"Matutino",children:"Matutino"}),r.jsx("option",{value:"Vespertino",children:"Vespertino"}),r.jsx("option",{value:"Nocturno",children:"Nocturno"}),r.jsx("option",{value:"Discontinuo",children:"Discontinuo"}),r.jsx("option",{value:"Mixto",children:"Mixto"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Ciclo Escolar"}),r.jsx("input",{name:"cycle",value:t.cycle,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Ej. 2024-2025"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Municipio"}),r.jsx("input",{name:"municipality",value:t.municipality,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Ej. Puebla, Tehuacn..."})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Wn,{className:"w-4 h-4 text-slate-400"})," Infraestructura"]}),r.jsx("input",{name:"infrastructure",value:t.infrastructure,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Aulas, Proyector, Internet..."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Visin de Direccin"}),r.jsx("textarea",{name:"vision",value:t.vision,onChange:a,rows:2,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Qu busca lograr la direccin?"})]})]})]}),r.jsxs("section",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold uppercase tracking-wider text-xs",children:[r.jsx(it,{className:"w-4 h-4"}),"Marco Curricular Comn (MCCEMS)"]}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-1",children:"Vinculacin con Normativa SEP"})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsx(sz,{subject:n,setSubject:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Materia / UAC"}),r.jsx("input",{name:"subjectName",value:n.subjectName,onChange:i,className:"w-full px-4 py-2 rounded-xl border border-slate-200 bg-slate-50 text-slate-500",placeholder:"Seleccionado automticamente...",readOnly:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Categora MCCEMS"}),r.jsx("input",{name:"mccemsCategory",value:n.mccemsCategory,className:"w-full px-4 py-2 rounded-xl border border-slate-200 bg-slate-50 text-slate-500 capitalize",readOnly:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:["Contenidos Adicionales de la Escuela",r.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-400 px-2 py-0.5 rounded-full uppercase",children:"Opcional"})]}),r.jsx("textarea",{name:"curriculumContent",value:n.curriculumContent,onChange:i,rows:4,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-mono text-[11px]",placeholder:"Pega aqu progresiones especficas si no usas las del selector..."})]})]})]}),r.jsxs("div",{className:"bg-amber-50 p-6 rounded-3xl border border-amber-100 flex items-start gap-4",children:[r.jsx("div",{className:"bg-amber-500 text-white rounded-xl p-2 mt-0.5 shadow-sm",children:r.jsx(QU,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-amber-900 text-sm",children:"Informacin Importante"}),r.jsx("p",{className:"text-xs text-amber-800 leading-relaxed mt-1",children:"Al seleccionar una UAC arriba, la IA consultar automticamente los documentos base del MCCEMS (2022-2024), las Progresiones de Aprendizaje y las Lneas de Poltica Pblica de la SEP. Esto garantiza que tus planeaciones sean tcnica y legalmente vlidas para auditoras de supervisin."})]})]})]})};var UI={exports:{}};(function(t,e){(function(n,s){t.exports=s(M)})(typeof self<"u"?self:pj,function(n){return function(){var s={155:function(N){N.exports=n}},a={};function i(N){var S=a[N];if(S!==void 0)return S.exports;var D=a[N]={exports:{}};return s[N](D,D.exports,i),D.exports}i.d=function(N,S){for(var D in S)i.o(S,D)&&!i.o(N,D)&&Object.defineProperty(N,D,{enumerable:!0,get:S[D]})},i.o=function(N,S){return Object.prototype.hasOwnProperty.call(N,S)},i.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{useReactToPrint:function(){return b}});var l=i(155);const c="printWindow";function d({level:N="error",messages:S,suppressErrors:D=!1}){D||(N==="error"?console.error(S):N==="warning"?console.warn(S):console.debug(S))}function m(N,S){if(S||!N){const D=document.getElementById(c);D&&document.body.removeChild(D)}}function p(N){return N instanceof Error?N:new Error("Unknown Error")}function g(N,S){const{documentTitle:D,onAfterPrint:V,onPrintError:k,preserveAfterPrint:j,print:_,suppressErrors:I}=S;setTimeout(()=>{var C,E;if(N.contentWindow){let R=function(){V==null||V(),m(j)};var P=R;if(N.contentWindow.focus(),_)_(N).then(R).catch(H=>{k?k("print",p(H)):d({messages:["An error was thrown by the specified `print` function"],suppressErrors:I})});else{if(N.contentWindow.print){const H=(E=(C=N.contentDocument)===null||C===void 0?void 0:C.title)!==null&&E!==void 0?E:"",O=N.ownerDocument.title;D&&(N.ownerDocument.title=D,N.contentDocument&&(N.contentDocument.title=D)),N.contentWindow.print(),D&&(N.ownerDocument.title=O,N.contentDocument&&(N.contentDocument.title=H))}else d({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:I});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(H=>{var O,q;return((q=(O=navigator.userAgent)!==null&&O!==void 0?O:navigator.vendor)!==null&&q!==void 0?q:"opera"in window&&window.opera).match(H)})?setTimeout(R,500):R()}}else d({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:I})},500)}function x(N){const S=[],D=document.createTreeWalker(N,NodeFilter.SHOW_ELEMENT,null);let V=D.nextNode();for(;V;)S.push(V),V=D.nextNode();return S}function y(N,S,D){const V=x(N),k=x(S);if(V.length===k.length)for(let j=0;j<V.length;j++){const _=V[j],I=k[j],C=_.shadowRoot;if(C!==null){const E=I.attachShadow({mode:C.mode});E.innerHTML=C.innerHTML,y(C,E,D)}}else d({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",N,S],suppressErrors:D})}const T=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function A(N,S,D,V){var k,j,_,I,C;const{contentNode:E,clonedContentNode:P,clonedImgNodes:R,clonedVideoNodes:H,numResourcesToLoad:O,originalCanvasNodes:q}=D,{bodyClass:Z,fonts:G,ignoreGlobalStyles:ee,pageStyle:de,nonce:Ie,suppressErrors:nt,copyShadowRoots:ot}=V;N.onload=null;const ie=(k=N.contentDocument)!==null&&k!==void 0?k:(j=N.contentWindow)===null||j===void 0?void 0:j.document;if(ie){const be=ie.body.appendChild(P);ot&&y(E,be,!!nt),G&&(!((_=N.contentDocument)===null||_===void 0)&&_.fonts&&(!((I=N.contentWindow)===null||I===void 0)&&I.FontFace)?G.forEach(ge=>{const ae=new FontFace(ge.family,ge.source,{weight:ge.weight,style:ge.style});N.contentDocument.fonts.add(ae),ae.loaded.then(()=>{S(ae)}).catch(st=>{S(ae,["Failed loading the font:",ae,"Load error:",p(st)])})}):(G.forEach(ge=>{S(ge)}),d({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:nt})));const Ht=de??T,gt=ie.createElement("style");Ie&&(gt.setAttribute("nonce",Ie),ie.head.setAttribute("nonce",Ie)),gt.appendChild(ie.createTextNode(Ht)),ie.head.appendChild(gt),Z&&ie.body.classList.add(...Z.split(" "));const kt=ie.querySelectorAll("canvas");for(let ge=0;ge<q.length;++ge){const ae=q[ge],st=kt[ge];if(st===void 0){d({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ae],suppressErrors:nt});continue}const fe=st.getContext("2d");fe&&fe.drawImage(ae,0,0)}for(let ge=0;ge<R.length;ge++){const ae=R[ge],st=ae.getAttribute("src");if(st){const fe=new Image;fe.onload=()=>{S(ae)},fe.onerror=(ke,Re,Et,we,qe)=>{S(ae,["Error loading <img>",ae,"Error",qe])},fe.src=st}else S(ae,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ae])}for(let ge=0;ge<H.length;ge++){const ae=H[ge];ae.preload="auto";const st=ae.getAttribute("poster");if(st){const fe=new Image;fe.onload=()=>{S(ae)},fe.onerror=(ke,Re,Et,we,qe)=>{S(ae,["Error loading video poster",st,"for video",ae,"Error:",qe])},fe.src=st}else ae.readyState>=2?S(ae):ae.src?(ae.onloadeddata=()=>{S(ae)},ae.onerror=(fe,ke,Re,Et,we)=>{S(ae,["Error loading video",ae,"Error",we])},ae.onstalled=()=>{S(ae,["Loading video stalled, skipping",ae])}):S(ae,["Error loading video, `src` is empty",ae])}const fn="select",Lt=E.querySelectorAll(fn),lt=ie.querySelectorAll(fn);for(let ge=0;ge<Lt.length;ge++)lt[ge].value=Lt[ge].value;if(!ee){const ge=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ae=0,st=ge.length;ae<st;++ae){const fe=ge[ae];if(fe.tagName.toLowerCase()==="style"){const ke=ie.createElement(fe.tagName),Re=fe.sheet;if(Re){let Et="";try{const we=Re.cssRules.length;for(let qe=0;qe<we;++qe)typeof Re.cssRules[qe].cssText=="string"&&(Et+=`${Re.cssRules[qe].cssText}\r
`)}catch(we){d({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",fe,`Original error: ${p(we).message}`],level:"warning"})}ke.setAttribute("id",`react-to-print-${ae}`),Ie&&ke.setAttribute("nonce",Ie),ke.appendChild(ie.createTextNode(Et)),ie.head.appendChild(ke)}}else if(fe.getAttribute("href"))if(fe.hasAttribute("disabled"))d({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",fe],level:"warning"}),S(fe);else{const ke=ie.createElement(fe.tagName);for(let Re=0,Et=fe.attributes.length;Re<Et;++Re){const we=fe.attributes[Re];we&&ke.setAttribute(we.nodeName,(C=we.nodeValue)!==null&&C!==void 0?C:"")}ke.onload=()=>{S(ke)},ke.onerror=(Re,Et,we,qe,Ia)=>{S(ke,["Failed to load",ke,"Error:",Ia])},Ie&&ke.setAttribute("nonce",Ie),ie.head.appendChild(ke)}else d({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",fe],level:"warning"}),S(fe)}}}O===0&&g(N,V)}function b({bodyClass:N,contentRef:S,copyShadowRoots:D,documentTitle:V,fonts:k,ignoreGlobalStyles:j,nonce:_,onAfterPrint:I,onBeforePrint:C,onPrintError:E,pageStyle:P,preserveAfterPrint:R,print:H,printIframeProps:O,suppressErrors:q}){return(0,l.useCallback)(G=>{function ee(){const de={bodyClass:N,contentRef:S,copyShadowRoots:D,documentTitle:V,fonts:k,ignoreGlobalStyles:j,nonce:_,onAfterPrint:I,onPrintError:E,pageStyle:P,preserveAfterPrint:R,print:H,suppressErrors:q},Ie=function(ie){const be=document.createElement("iframe");return be.width=`${document.documentElement.clientWidth}px`,be.height=`${document.documentElement.clientHeight}px`,be.style.position="absolute",be.style.top=`-${document.documentElement.clientHeight+100}px`,be.style.left=`-${document.documentElement.clientWidth+100}px`,be.id=c,be.srcdoc="<!DOCTYPE html>",ie&&(ie.allow&&(be.allow=ie.allow),ie.referrerPolicy!==void 0&&(be.referrerPolicy=ie.referrerPolicy),ie.sandbox!==void 0&&(be.sandbox=ie.sandbox)),be}(O),nt=function(ie,be){const{contentRef:Ht,fonts:gt,ignoreGlobalStyles:kt,suppressErrors:fn}=be,Lt=function({contentRef:ke,optionalContent:Re,suppressErrors:Et}){return Re&&typeof Re=="function"?(ke&&d({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),Re()):ke?ke.current:void d({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Et})}({contentRef:Ht,optionalContent:ie,suppressErrors:fn});if(!Lt)return;const lt=Lt.cloneNode(!0),ge=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ae=lt.querySelectorAll("img"),st=lt.querySelectorAll("video"),fe=gt?gt.length:0;return{contentNode:Lt,clonedContentNode:lt,clonedImgNodes:ae,clonedVideoNodes:st,numResourcesToLoad:(kt?0:ge.length)+ae.length+st.length+fe,originalCanvasNodes:Lt.querySelectorAll("canvas")}}(G,de);if(!nt)return void d({messages:["There is nothing to print"],suppressErrors:q});const ot=function(ie,be,Ht){const{suppressErrors:gt}=ie,kt=[],fn=[];return function(Lt,lt){kt.includes(Lt)?d({level:"debug",messages:["Tried to mark a resource that has already been handled",Lt],suppressErrors:gt}):(lt?(d({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...lt],suppressErrors:gt}),fn.push(Lt)):kt.push(Lt),kt.length+fn.length===be&&g(Ht,ie))}}(de,nt.numResourcesToLoad,Ie);(function(ie,be,Ht,gt){ie.onload=()=>{A(ie,be,Ht,gt)},document.body.appendChild(ie)})(Ie,ot,nt,de)}m(R,!0),C?C().then(()=>{ee()}).catch(de=>{E==null||E("onBeforePrint",p(de))}):ee()},[N,S,D,V,k,j,_,I,C,E,P,R,H,q])}return o}()})})(UI);var OI=UI.exports,rz={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oz,lz;function cz(){return{geminiUrl:oz,vertexUrl:lz}}function dz(t,e,n,s){var a,i;if(!(t!=null&&t.baseUrl)){const o=cz();return e?(a=o.vertexUrl)!==null&&a!==void 0?a:n:(i=o.geminiUrl)!==null&&i!==void 0?i:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wa{}function W(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const i=e[a];return i!=null?String(i):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function h(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const m=c[d];h(m,e.slice(i+1),n[d])}else for(const d of c)h(d,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];h(c[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const a=e[s];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(l=>u(l,e.slice(s+1),n)):n}else return n}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function uz(t,e){for(const[n,s]of Object.entries(e)){const a=n.split("."),i=s.split("."),o=new Set;let l=-1;for(let c=0;c<a.length;c++)if(a[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}n0(t,a,i,0,o)}}function n0(t,e,n,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2),l=t;if(o in l&&Array.isArray(l[o]))for(const c of l[o])n0(c,e,n,s+1,a)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,l=Object.keys(o).filter(d=>!d.startsWith("_")&&!a.has(d)),c={};for(const d of l)c[d]=o[d];for(const[d,m]of Object.entries(c)){const p=[];for(const g of n.slice(s))g==="*"?p.push(d):p.push(g);h(o,p,m)}for(const d of l)delete o[d]}}else{const o=t;i in o&&n0(o[i],e,n,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ev(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mz(t){const e={},n=u(t,["operationName"]);n!=null&&h(e,["operationName"],n);const s=u(t,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function hz(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],pz(o)),e}function fz(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],gz(o)),e}function pz(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xz(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function gz(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vz(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function xz(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],Cz(n)),e}function vz(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],Tz(n)),e}function yz(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function bz(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function _z(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Ez(o)),e}function Ez(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function zI(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Nz(o)),e}function Nz(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function Cz(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Ev(s));const a=u(t,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function Tz(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Ev(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(HE||(HE={}));var $E;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($E||($E={}));var YE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(YE||(YE={}));var F;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(F||(F={}));var JE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(JE||(JE={}));var KE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(KE||(KE={}));var QE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(QE||(QE={}));var XE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(XE||(XE={}));var WE;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(WE||(WE={}));var ZE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ZE||(ZE={}));var eN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(eN||(eN={}));var tN;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(tN||(tN={}));var nN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(nN||(nN={}));var sN;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(sN||(sN={}));var aN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(aN||(aN={}));var iN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(iN||(iN={}));var rN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(rN||(rN={}));var oN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oN||(oN={}));var lN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(lN||(lN={}));var cN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(cN||(cN={}));var dN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dN||(dN={}));var Bm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Bm||(Bm={}));var uN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uN||(uN={}));var mN;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(mN||(mN={}));var hN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hN||(hN={}));var s0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(s0||(s0={}));var fN;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fN||(fN={}));var pN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(pN||(pN={}));var gN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(gN||(gN={}));var xN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(xN||(xN={}));var vN;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(vN||(vN={}));var yN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(yN||(yN={}));var bN;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(bN||(bN={}));var _N;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_N||(_N={}));var EN;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(EN||(EN={}));var NN;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(NN||(NN={}));var CN;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(CN||(CN={}));var TN;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(TN||(TN={}));var SN;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(SN||(SN={}));var wN;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(wN||(wN={}));var AN;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(AN||(AN={}));var IN;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(IN||(IN={}));var jN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(jN||(jN={}));var RN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(RN||(RN={}));var MN;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(MN||(MN={}));var PN;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(PN||(PN={}));var DN;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(DN||(DN={}));var kN;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(kN||(kN={}));var LN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LN||(LN={}));var VN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(VN||(VN={}));var UN;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(UN||(UN={}));var ON;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ON||(ON={}));var zN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zN||(zN={}));var FN;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(FN||(FN={}));var Zr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Zr||(Zr={}));class a0{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ul{get text(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const p=[];for(const g of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,y]of Object.entries(g))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;m=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const p of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&m.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,s,a,i,o,l,c,d;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,s,a,i,o,l,c,d;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class GN{}class qN{}class Sz{}class wz{}class Az{}class Iz{}class BN{}class HN{}class $N{}class jz{}class Hm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Hm;let a;const i=e;return n?a=fz(i):a=hz(i),Object.assign(s,a),s}}class YN{}class JN{}class KN{}class QN{}class Rz{}class Mz{}class Pz{}class Nv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Nv,i=_z(e);return Object.assign(s,i),s}}class Dz{}class kz{}class Lz{}class XN{}class Vz{get text(){var e,n,s;let a="",i=!1;const o=[];for(const l of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,a+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?a:void 0}get data(){var e,n,s;let a="";const i=[];for(const o of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&i.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(a+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Uz{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Cv,i=zI(e);return Object.assign(s,i),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FI(t,e){const n=De(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function GI(t){return Array.isArray(t)?t.map(e=>$m(e)):[$m(t)]}function $m(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function qI(t){const e=$m(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BI(t){const e=$m(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function WN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function HI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>WN(e)):[WN(t)]}function i0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ZN(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tn(t){if(t==null)throw new Error("ContentUnion is required");return i0(t)?t:{role:"user",parts:HI(t)}}function Tv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=tn(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=tn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tn(n)):[tn(e)]}function Zn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ZN(t)||eC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(t)]}const e=[],n=[],s=i0(t[0]);for(const a of t){const i=i0(a);if(i!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(a);else{if(ZN(a)||eC(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return s||e.push({role:"user",parts:HI(n)}),e}function Oz(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(F).includes(n[0].toUpperCase())?n[0].toUpperCase():F.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(F).includes(s.toUpperCase())?s.toUpperCase():F.TYPE_UNSPECIFIED})}}function fo(t){const e={},n=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Oz(t.type,e);for(const[o,l]of Object.entries(t))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(F).includes(l.toUpperCase())?l.toUpperCase():F.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=fo(l);else if(s.includes(o)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(fo(d))}e[o]=c}else if(a.includes(o)){const c={};for(const[d,m]of Object.entries(l))c[d]=fo(m);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=l}return e}function Sv(t){return fo(t)}function wv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Av(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function dl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fo(e.response));return t}function ul(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zz(t,e,n,s=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Aa(t,e){if(typeof e!="string")throw new Error("name must be a string");return zz(t,e,"cachedContents")}function $I(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ki(t){return Ev(t)}function Fz(t){return t!=null&&typeof t=="object"&&"name"in t}function Gz(t){return t!=null&&typeof t=="object"&&"video"in t}function qz(t){return t!=null&&typeof t=="object"&&"uri"in t}function YI(t){var e;let n;if(Fz(t)&&(n=t.name),!(qz(t)&&(n=t.uri,n===void 0))&&!(Gz(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function JI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function KI(t){for(const e of["models","tunedModels","publisherModels"])if(Bz(t,e))return t[e];return[]}function Bz(t,e){return t!==null&&typeof t=="object"&&e in t}function Hz(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $z(t,e={}){const n=[],s=new Set;for(const a of t){const i=a.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const o=Hz(a,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function QI(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Yz(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function XI(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let i=!1;for(const o of a){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ml(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function WI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jz(t){const e={},n=u(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const s=u(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>AF(o))),h(e,["inlinedResponses"],i)}const a=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["inlinedEmbedContentResponses"],i)}return e}function Kz(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const s=u(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const a=u(t,["bigqueryDestination","outputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Qz(t){const e={},n=u(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const s=u(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const a=u(t,["bigqueryUri"]);if(a!=null&&h(e,["bigqueryDestination","outputUri"],a),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function qu(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["metadata","state"]);a!=null&&h(e,["state"],WI(a));const i=u(t,["metadata","createTime"]);i!=null&&h(e,["createTime"],i);const o=u(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const l=u(t,["metadata","updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(t,["metadata","model"]);c!=null&&h(e,["model"],c);const d=u(t,["metadata","output"]);return d!=null&&h(e,["dest"],Jz(XI(d))),e}function r0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["state"]);a!=null&&h(e,["state"],WI(a));const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["createTime"]);o!=null&&h(e,["createTime"],o);const l=u(t,["startTime"]);l!=null&&h(e,["startTime"],l);const c=u(t,["endTime"]);c!=null&&h(e,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(e,["updateTime"],d);const m=u(t,["model"]);m!=null&&h(e,["model"],m);const p=u(t,["inputConfig"]);p!=null&&h(e,["src"],Xz(p));const g=u(t,["outputConfig"]);g!=null&&h(e,["dest"],Kz(XI(g)));const x=u(t,["completionStats"]);return x!=null&&h(e,["completionStats"],x),e}function Xz(t){const e={},n=u(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const s=u(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const a=u(t,["bigquerySource","inputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Wz(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&h(n,["fileName"],s);const a=u(e,["inlinedRequests"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>wF(t,o))),h(n,["requests","requests"],i)}return n}function Zz(t){const e={},n=u(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const s=u(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const a=u(t,["bigqueryUri"]);if(a!=null&&h(e,["bigquerySource","inputUri"],a),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eF(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ml(t,s)),n}function nF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ml(t,s)),n}function sF(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const s=u(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],aF(s));const a=u(t,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const i=u(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const l=u(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&h(e,["index"],c);const d=u(t,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const m=u(t,["safetyRatings"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),h(e,["safetyRatings"],g)}const p=u(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function aF(t){const e={},n=u(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["citations"],s)}return e}function ZI(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>kF(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function iF(t,e){const n={},s=u(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function rF(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["dest"]);return e!==void 0&&a!=null&&h(e,["outputConfig"],Qz(Yz(a))),n}function tC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["src"]);a!=null&&h(n,["batch","inputConfig"],Wz(t,QI(t,a)));const i=u(e,["config"]);return i!=null&&iF(i,n),n}function oF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],De(t,s));const a=u(e,["src"]);a!=null&&h(n,["inputConfig"],Zz(QI(t,a)));const i=u(e,["config"]);return i!=null&&rF(i,n),n}function lF(t,e){const n={},s=u(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),n}function cF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["src"]);a!=null&&h(n,["batch","inputConfig"],gF(t,a));const i=u(e,["config"]);return i!=null&&lF(i,n),n}function dF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ml(t,s)),n}function uF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ml(t,s)),n}function mF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);return i!=null&&h(e,["error"],i),e}function hF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);return i!=null&&h(e,["error"],i),e}function fF(t,e){const n={},s=u(e,["contents"]);if(s!=null){let i=Tv(t,s);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["requests[]","request","content"],i)}const a=u(e,["config"]);return a!=null&&(h(n,["_self"],pF(a,n)),uz(n,{"requests[].*":"requests[].request.*"})),n}function pF(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gF(t,e){const n={},s=u(e,["fileName"]);s!=null&&h(n,["file_name"],s);const a=u(e,["inlinedRequests"]);return a!=null&&h(n,["requests"],fF(t,a)),n}function xF(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vF(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yF(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bF(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],ZI(tn(a)));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const A=u(e,["responseMimeType"]);A!=null&&h(s,["responseMimeType"],A);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],Sv(b));const N=u(e,["responseJsonSchema"]);if(N!=null&&h(s,["responseJsonSchema"],N),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(e,["safetySettings"]);if(n!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(H=>LF(H))),h(n,["safetySettings"],R)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let R=ul(D);Array.isArray(R)&&(R=R.map(H=>UF(dl(H)))),h(n,["tools"],R)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&h(n,["toolConfig"],VF(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=u(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],Aa(t,k));const j=u(e,["responseModalities"]);j!=null&&h(s,["responseModalities"],j);const _=u(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const I=u(e,["speechConfig"]);if(I!=null&&h(s,["speechConfig"],wv(I)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=u(e,["thinkingConfig"]);C!=null&&h(s,["thinkingConfig"],C);const E=u(e,["imageConfig"]);E!=null&&h(s,["imageConfig"],SF(E));const P=u(e,["enableEnhancedCivicAnswers"]);return P!=null&&h(s,["enableEnhancedCivicAnswers"],P),s}function _F(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>sF(d))),h(e,["candidates"],c)}const a=u(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const i=u(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&h(e,["responseId"],o);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function EF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ml(t,s)),n}function NF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ml(t,s)),n}function CF(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function TF(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function SF(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["request","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let l=Zn(a);Array.isArray(l)&&(l=l.map(c=>ZI(c))),h(n,["request","contents"],l)}const i=u(e,["metadata"]);i!=null&&h(n,["metadata"],i);const o=u(e,["config"]);return o!=null&&h(n,["request","generationConfig"],bF(t,o,u(n,["request"],{}))),n}function AF(t){const e={},n=u(t,["response"]);n!=null&&h(e,["response"],_F(n));const s=u(t,["error"]);return s!=null&&h(e,["error"],s),e}function IF(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);if(e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function jF(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const i=u(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function RF(t){const e={},n=u(t,["config"]);return n!=null&&IF(n,e),e}function MF(t){const e={},n=u(t,["config"]);return n!=null&&jF(n,e),e}function PF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["operations"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>qu(o))),h(e,["batchJobs"],i)}return e}function DF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["batchPredictionJobs"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>r0(o))),h(e,["batchJobs"],i)}return e}function kF(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],xF(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],vF(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],eF(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function LF(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function VF(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],yF(s)),e}function UF(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],CF(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],TF(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ca;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ca||(Ca={}));class Cr{constructor(e,n,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,a)}init(e,n,s){var a,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!s||Object.keys(s).length===0?o={config:{}}:typeof s=="object"?o=Object.assign({},s):o=s,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(a=o.config)===null||a===void 0?void 0:a.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OF extends wa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cr(Ca.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=tC(this.apiClient,e),s=n._url,a=W("{model}:batchGenerateContent",s),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const m of c){const p=Object.assign({},m);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const x=p.request;x.systemInstruction=g,p.request=x}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?s.dest=`${i.slice(0,-6)}/dest`:s.dest=`${i}_dest_${a}`;else if(o)s.dest=`${o}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=oF(this.apiClient,e);return l=W("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>r0(m))}else{const d=tC(this.apiClient,e);return l=W("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>qu(m))}}async createEmbeddingsInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cF(this.apiClient,e);return i=W("{model}:asyncBatchEmbedContent",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>qu(c))}}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=NF(this.apiClient,e);return l=W("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>r0(m))}else{const d=EF(this.apiClient,e);return l=W("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>qu(m))}}async cancel(e){var n,s,a,i;let o="",l={};if(this.apiClient.isVertexAI()){const c=nF(this.apiClient,e);o=W("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const c=tF(this.apiClient,e);o=W("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=MF(e);return l=W("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=DF(m),g=new XN;return Object.assign(g,p),g})}else{const d=RF(e);return l=W("batches",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=PF(m),g=new XN;return Object.assign(g,p),g})}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=uF(this.apiClient,e);return l=W("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>hF(m))}else{const d=dF(this.apiClient,e);return l=W("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>mF(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zF(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function nC(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>c8(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function FF(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let m=Zn(o);Array.isArray(m)&&(m=m.map(p=>nC(p))),h(e,["contents"],m)}const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&h(e,["systemInstruction"],nC(tn(l)));const c=u(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>u8(p))),h(e,["tools"],m)}const d=u(t,["toolConfig"]);if(e!==void 0&&d!=null&&h(e,["toolConfig"],d8(d)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function GF(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let p=Zn(o);Array.isArray(p)&&(p=p.map(g=>g)),h(e,["contents"],p)}const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&h(e,["systemInstruction"],tn(l));const c=u(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>m8(g))),h(e,["tools"],p)}const d=u(t,["toolConfig"]);e!==void 0&&d!=null&&h(e,["toolConfig"],d);const m=u(t,["kmsKeyName"]);return e!==void 0&&m!=null&&h(e,["encryption_spec","kmsKeyName"],m),n}function qF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],FI(t,s));const a=u(e,["config"]);return a!=null&&FF(a,n),n}function BF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],FI(t,s));const a=u(e,["config"]);return a!=null&&GF(a,n),n}function HF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Aa(t,s)),n}function $F(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Aa(t,s)),n}function YF(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function JF(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function KF(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QF(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XF(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WF(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ZF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Aa(t,s)),n}function e8(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Aa(t,s)),n}function t8(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n8(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s8(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function a8(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function i8(t){const e={},n=u(t,["config"]);return n!=null&&s8(n,e),e}function r8(t){const e={},n=u(t,["config"]);return n!=null&&a8(n,e),e}function o8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function l8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function c8(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],KF(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],QF(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],zF(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function d8(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],XF(s)),e}function u8(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],t8(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],n8(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function m8(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>WF(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function h8(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function f8(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function p8(t,e){const n={},s=u(e,["name"]);s!=null&&h(n,["_url","name"],Aa(t,s));const a=u(e,["config"]);return a!=null&&h8(a,n),n}function g8(t,e){const n={},s=u(e,["name"]);s!=null&&h(n,["_url","name"],Aa(t,s));const a=u(e,["config"]);return a!=null&&f8(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x8 extends wa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cr(Ca.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=BF(this.apiClient,e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=qF(this.apiClient,e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=e8(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=ZF(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=$F(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=JF(m),g=new KN;return Object.assign(g,p),g})}else{const d=HF(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=YF(m),g=new KN;return Object.assign(g,p),g})}}async update(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=g8(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=p8(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=r8(e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=l8(m),g=new QN;return Object.assign(g,p),g})}else{const d=i8(e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=o8(m),g=new QN;return Object.assign(g,p),g})}}}function Ym(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function sC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(t){return this instanceof me?(this.v=t,this):new me(t)}function gs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(x){return function(y){return Promise.resolve(y).then(x,p)}}function l(x,y){s[x]&&(a[x]=function(T){return new Promise(function(A,b){i.push([x,T,A,b])>1||c(x,T)})},y&&(a[x]=y(a[x])))}function c(x,y){try{d(s[x](y))}catch(T){g(i[0][3],T)}}function d(x){x.value instanceof me?Promise.resolve(x.value.v).then(m,p):g(i[0][2],x)}function m(x){c("next",x)}function p(x){c("throw",x)}function g(x,y){x(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function xs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sC=="function"?sC(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(i){n[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v8(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:e1(n)}function e1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function y8(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function aC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let i=!0;for(;s<n&&t[s].role==="model";)a.push(t[s]),i&&!e1(t[s])&&(i=!1),s++;i?e.push(...a):e.pop()}return e}class b8{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new _8(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _8{constructor(e,n,s,a={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=a,this.history=i,this.sendPromise=Promise.resolve(),y8(i)}async sendMessage(e){var n;await this.sendPromise;const s=tn(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,l;const c=await a,d=(o=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,m=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];m!=null&&(g=(l=m.slice(p))!==null&&l!==void 0?l:[]);const x=d?[d]:[];this.recordHistory(s,x,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const s=tn(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const i=await a;return this.processStreamResponse(i,s)}getHistory(e=!1){const n=e?aC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return gs(this,arguments,function*(){var a,i,o,l,c,d;const m=[];try{for(var p=!0,g=xs(e),x;x=yield me(g.next()),a=x.done,!a;p=!0){l=x.value,p=!1;const y=l;if(v8(y)){const T=(d=(c=y.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;T!==void 0&&m.push(T)}yield yield me(y)}}catch(y){i={error:y}}finally{try{!p&&!a&&(o=g.return)&&(yield me(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,m)})}recordHistory(e,n,s){let a=[];n.length>0&&n.every(i=>i.role!==void 0)?a=n:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...aC(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E8(t){const e={},n=u(t,["file"]);return n!=null&&h(e,["file"],n),e}function N8(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function C8(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],YI(n)),e}function T8(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function S8(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],YI(n)),e}function w8(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function A8(t){const e={},n=u(t,["config"]);return n!=null&&w8(n,e),e}function I8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["files"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j8 extends wa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cr(Ca.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=A8(e);return i=W("files",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=I8(c),m=new Dz;return Object.assign(m,d),m})}}async createInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=E8(e);return i=W("upload/v1beta/files",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=N8(c),m=new kz;return Object.assign(m,d),m})}}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=S8(e);return i=W("files/{file}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=C8(e);return i=W("files/{file}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=T8(c),m=new Lz;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bu(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function R8(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Y8(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function M8(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function P8(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D8(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function k8(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=u(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const a=u(t,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const i=u(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const l=u(t,["frequencyPenalty"]);l!=null&&h(e,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&h(e,["logprobs"],c);const d=u(t,["maxOutputTokens"]);d!=null&&h(e,["maxOutputTokens"],d);const m=u(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const p=u(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const g=u(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const x=u(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const y=u(t,["responseModalities"]);y!=null&&h(e,["responseModalities"],y);const T=u(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const A=u(t,["routingConfig"]);A!=null&&h(e,["routingConfig"],A);const b=u(t,["seed"]);b!=null&&h(e,["seed"],b);const N=u(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],N);const S=u(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const D=u(t,["temperature"]);D!=null&&h(e,["temperature"],D);const V=u(t,["thinkingConfig"]);V!=null&&h(e,["thinkingConfig"],V);const k=u(t,["topK"]);k!=null&&h(e,["topK"],k);const j=u(t,["topP"]);if(j!=null&&h(e,["topP"],j),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L8(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function V8(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function U8(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],Av(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],R8(tn(y)));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let k=ul(T);Array.isArray(k)&&(k=k.map(j=>K8(dl(j)))),h(e,["setup","tools"],k)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&h(e,["setup","sessionResumption"],J8(A));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const S=u(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);if(e!==void 0&&V!=null&&h(e,["setup","proactivity"],V),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function O8(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],k8(s));const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],Av(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],tn(y));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let j=ul(T);Array.isArray(j)&&(j=j.map(_=>Q8(dl(_)))),h(e,["setup","tools"],j)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&h(e,["setup","sessionResumption"],A);const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const S=u(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);e!==void 0&&V!=null&&h(e,["setup","proactivity"],V);const k=u(t,["explicitVadSignal"]);return e!==void 0&&k!=null&&h(e,["setup","explicitVadSignal"],k),n}function z8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],De(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],U8(a,n)),n}function F8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],De(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],O8(a,n)),n}function G8(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function q8(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["weightedPrompts"],s)}return e}function B8(t){const e={},n=u(t,["media"]);if(n!=null){let d=GI(n);Array.isArray(d)&&(d=d.map(m=>Bu(m))),h(e,["mediaChunks"],d)}const s=u(t,["audio"]);s!=null&&h(e,["audio"],Bu(BI(s)));const a=u(t,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const i=u(t,["video"]);i!=null&&h(e,["video"],Bu(qI(i)));const o=u(t,["text"]);o!=null&&h(e,["text"],o);const l=u(t,["activityStart"]);l!=null&&h(e,["activityStart"],l);const c=u(t,["activityEnd"]);return c!=null&&h(e,["activityEnd"],c),e}function H8(t){const e={},n=u(t,["media"]);if(n!=null){let d=GI(n);Array.isArray(d)&&(d=d.map(m=>m)),h(e,["mediaChunks"],d)}const s=u(t,["audio"]);s!=null&&h(e,["audio"],BI(s));const a=u(t,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const i=u(t,["video"]);i!=null&&h(e,["video"],qI(i));const o=u(t,["text"]);o!=null&&h(e,["text"],o);const l=u(t,["activityStart"]);l!=null&&h(e,["activityStart"],l);const c=u(t,["activityEnd"]);return c!=null&&h(e,["activityEnd"],c),e}function $8(t){const e={},n=u(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const s=u(t,["serverContent"]);s!=null&&h(e,["serverContent"],s);const a=u(t,["toolCall"]);a!=null&&h(e,["toolCall"],a);const i=u(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],i);const o=u(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],X8(o));const l=u(t,["goAway"]);l!=null&&h(e,["goAway"],l);const c=u(t,["sessionResumptionUpdate"]);c!=null&&h(e,["sessionResumptionUpdate"],c);const d=u(t,["voiceActivityDetectionSignal"]);return d!=null&&h(e,["voiceActivityDetectionSignal"],d),e}function Y8(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],M8(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],P8(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],Bu(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function J8(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function K8(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],L8(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],V8(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function Q8(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>D8(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function X8(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const a=u(t,["candidatesTokenCount"]);a!=null&&h(e,["responseTokenCount"],a);const i=u(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const o=u(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const l=u(t,["totalTokenCount"]);l!=null&&h(e,["totalTokenCount"],l);const c=u(t,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["promptTokensDetails"],x)}const d=u(t,["cacheTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["cacheTokensDetails"],x)}const m=u(t,["candidatesTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["responseTokensDetails"],x)}const p=u(t,["toolUsePromptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["toolUsePromptTokensDetails"],x)}const g=u(t,["trafficType"]);return g!=null&&h(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W8(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Z8(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const s=u(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],e7(s));const a=u(t,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const i=u(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const l=u(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&h(e,["index"],c);const d=u(t,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const m=u(t,["safetyRatings"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),h(e,["safetyRatings"],g)}const p=u(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function e7(t){const e={},n=u(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["citations"],s)}return e}function t7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let i=Zn(a);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["contents"],i)}return n}function n7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(e,["tokensInfo"],a)}return e}function s7(t){const e={},n=u(t,["values"]);n!=null&&h(e,["values"],n);const s=u(t,["statistics"]);return s!=null&&h(e,["statistics"],a7(s)),e}function a7(t){const e={},n=u(t,["truncated"]);n!=null&&h(e,["truncated"],n);const s=u(t,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function Wh(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>h9(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function i7(t){const e={},n=u(t,["controlType"]);n!=null&&h(e,["controlType"],n);const s=u(t,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function r7(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function o7(t,e){const n={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],tn(s));const a=u(t,["tools"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>a1(l))),h(e,["tools"],o)}const i=u(t,["generationConfig"]);return e!==void 0&&i!=null&&h(e,["generationConfig"],W7(i)),n}function l7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Zn(a);Array.isArray(o)&&(o=o.map(l=>Wh(l))),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&r7(i),n}function c7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Zn(a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&o7(i,n),n}function d7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const a=u(t,["cachedContentTokenCount"]);return a!=null&&h(e,["cachedContentTokenCount"],a),e}function u7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function m7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function h7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function f7(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function p7(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function g7(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const x=u(t,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=u(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const A=u(t,["addWatermark"]);e!==void 0&&A!=null&&h(e,["parameters","addWatermark"],A);const b=u(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=u(t,["editMode"]);e!==void 0&&N!=null&&h(e,["parameters","editMode"],N);const S=u(t,["baseSteps"]);return e!==void 0&&S!=null&&h(e,["parameters","editConfig","baseSteps"],S),n}function x7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>y9(c))),h(n,["instances[0]","referenceImages"],l)}const o=u(e,["config"]);return o!=null&&g7(o,n),n}function v7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Zh(i))),h(e,["generatedImages"],a)}return e}function y7(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function b7(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["instances[]","title"],a);const i=u(t,["outputDimensionality"]);e!==void 0&&i!=null&&h(e,["parameters","outputDimensionality"],i);const o=u(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const l=u(t,["autoTruncate"]);return e!==void 0&&l!=null&&h(e,["parameters","autoTruncate"],l),n}function _7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let l=Tv(t,a);Array.isArray(l)&&(l=l.map(c=>c)),h(n,["requests[]","content"],l)}const i=u(e,["config"]);i!=null&&y7(i,n);const o=u(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],De(t,o)),n}function E7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Tv(t,a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["instances[]","content"],o)}const i=u(e,["config"]);return i!=null&&b7(i,n),n}function N7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["embeddings"],i)}const a=u(t,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function C7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions[]","embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>s7(o))),h(e,["embeddings"],i)}const a=u(t,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function T7(t){const e={},n=u(t,["endpoint"]);n!=null&&h(e,["name"],n);const s=u(t,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function S7(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function w7(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function A7(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function I7(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function j7(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],Wh(tn(a)));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const A=u(e,["responseMimeType"]);A!=null&&h(s,["responseMimeType"],A);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],Sv(b));const N=u(e,["responseJsonSchema"]);if(N!=null&&h(s,["responseJsonSchema"],N),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(e,["safetySettings"]);if(n!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(H=>b9(H))),h(n,["safetySettings"],R)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let R=ul(D);Array.isArray(R)&&(R=R.map(H=>w9(dl(H)))),h(n,["tools"],R)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&h(n,["toolConfig"],S9(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=u(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],Aa(t,k));const j=u(e,["responseModalities"]);j!=null&&h(s,["responseModalities"],j);const _=u(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const I=u(e,["speechConfig"]);if(I!=null&&h(s,["speechConfig"],wv(I)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=u(e,["thinkingConfig"]);C!=null&&h(s,["thinkingConfig"],C);const E=u(e,["imageConfig"]);E!=null&&h(s,["imageConfig"],s9(E));const P=u(e,["enableEnhancedCivicAnswers"]);return P!=null&&h(s,["enableEnhancedCivicAnswers"],P),s}function R7(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],tn(a));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const A=u(e,["responseMimeType"]);A!=null&&h(s,["responseMimeType"],A);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],Sv(b));const N=u(e,["responseJsonSchema"]);N!=null&&h(s,["responseJsonSchema"],N);const S=u(e,["routingConfig"]);S!=null&&h(s,["routingConfig"],S);const D=u(e,["modelSelectionConfig"]);D!=null&&h(s,["modelConfig"],D);const V=u(e,["safetySettings"]);if(n!==void 0&&V!=null){let q=V;Array.isArray(q)&&(q=q.map(Z=>Z)),h(n,["safetySettings"],q)}const k=u(e,["tools"]);if(n!==void 0&&k!=null){let q=ul(k);Array.isArray(q)&&(q=q.map(Z=>a1(dl(Z)))),h(n,["tools"],q)}const j=u(e,["toolConfig"]);n!==void 0&&j!=null&&h(n,["toolConfig"],j);const _=u(e,["labels"]);n!==void 0&&_!=null&&h(n,["labels"],_);const I=u(e,["cachedContent"]);n!==void 0&&I!=null&&h(n,["cachedContent"],Aa(t,I));const C=u(e,["responseModalities"]);C!=null&&h(s,["responseModalities"],C);const E=u(e,["mediaResolution"]);E!=null&&h(s,["mediaResolution"],E);const P=u(e,["speechConfig"]);P!=null&&h(s,["speechConfig"],wv(P));const R=u(e,["audioTimestamp"]);R!=null&&h(s,["audioTimestamp"],R);const H=u(e,["thinkingConfig"]);H!=null&&h(s,["thinkingConfig"],H);const O=u(e,["imageConfig"]);if(O!=null&&h(s,["imageConfig"],a9(O)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function iC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Zn(a);Array.isArray(o)&&(o=o.map(l=>Wh(l))),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&h(n,["generationConfig"],j7(t,i,n)),n}function rC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Zn(a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&h(n,["generationConfig"],R7(t,i,n)),n}function oC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>Z8(d))),h(e,["candidates"],c)}const a=u(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const i=u(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&h(e,["responseId"],o);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function lC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["candidates"],d)}const a=u(t,["createTime"]);a!=null&&h(e,["createTime"],a);const i=u(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const l=u(t,["responseId"]);l!=null&&h(e,["responseId"],l);const c=u(t,["usageMetadata"]);return c!=null&&h(e,["usageMetadata"],c),e}function M7(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const i=u(t,["guidanceScale"]);if(e!==void 0&&i!=null&&h(e,["parameters","guidanceScale"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=u(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&h(e,["parameters","includeSafetyAttributes"],c);const d=u(t,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const m=u(t,["language"]);e!==void 0&&m!=null&&h(e,["parameters","language"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const g=u(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=u(t,["imageSize"]);if(e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function P7(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const x=u(t,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=u(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const A=u(t,["addWatermark"]);e!==void 0&&A!=null&&h(e,["parameters","addWatermark"],A);const b=u(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=u(t,["imageSize"]);e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N);const S=u(t,["enhancePrompt"]);return e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S),n}function D7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["config"]);return i!=null&&M7(i,n),n}function k7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["config"]);return i!=null&&P7(i,n),n}function L7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>J7(o))),h(e,["generatedImages"],i)}const a=u(t,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],n1(a)),e}function V7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Zh(o))),h(e,["generatedImages"],i)}const a=u(t,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],s1(a)),e}function U7(t,e){const n={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=u(t,["durationSeconds"]);if(e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const o=u(t,["resolution"]);e!==void 0&&o!=null&&h(e,["parameters","resolution"],o);const l=u(t,["personGeneration"]);if(e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=u(t,["negativePrompt"]);e!==void 0&&c!=null&&h(e,["parameters","negativePrompt"],c);const d=u(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&h(e,["parameters","enhancePrompt"],d),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=u(t,["lastFrame"]);e!==void 0&&m!=null&&h(e,["instances[0]","lastFrame"],ef(m));const p=u(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>z9(x))),h(e,["instances[0]","referenceImages"],g)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function O7(t,e){const n={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const i=u(t,["fps"]);e!==void 0&&i!=null&&h(e,["parameters","fps"],i);const o=u(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const l=u(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=u(t,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const g=u(t,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const x=u(t,["enhancePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x);const y=u(t,["generateAudio"]);e!==void 0&&y!=null&&h(e,["parameters","generateAudio"],y);const T=u(t,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],Ts(T));const A=u(t,["referenceImages"]);if(e!==void 0&&A!=null){let S=A;Array.isArray(S)&&(S=S.map(D=>F9(D))),h(e,["instances[0]","referenceImages"],S)}const b=u(t,["mask"]);e!==void 0&&b!=null&&h(e,["instances[0]","mask"],O9(b));const N=u(t,["compressionQuality"]);return e!==void 0&&N!=null&&h(e,["parameters","compressionQuality"],N),n}function z7(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],B7(o)),e}function F7(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],H7(o)),e}function G7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],ef(i));const o=u(e,["video"]);o!=null&&h(n,["instances[0]","video"],i1(o));const l=u(e,["source"]);l!=null&&$7(l,n);const c=u(e,["config"]);return c!=null&&U7(c,n),n}function q7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],Ts(i));const o=u(e,["video"]);o!=null&&h(n,["instances[0]","video"],r1(o));const l=u(e,["source"]);l!=null&&Y7(l,n);const c=u(e,["config"]);return c!=null&&O7(c,n),n}function B7(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Q7(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function H7(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>X7(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function $7(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],ef(a));const i=u(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],i1(i)),n}function Y7(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],Ts(a));const i=u(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],r1(i)),n}function J7(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],i9(n));const s=u(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const a=u(t,["_self"]);return a!=null&&h(e,["safetyAttributes"],n1(a)),e}function Zh(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],t1(n));const s=u(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const a=u(t,["_self"]);a!=null&&h(e,["safetyAttributes"],s1(a));const i=u(t,["prompt"]);return i!=null&&h(e,["enhancedPrompt"],i),e}function K7(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["mask"],t1(n));const s=u(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(e,["labels"],a)}return e}function Q7(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],V9(n)),e}function X7(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],U9(n)),e}function W7(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=u(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const a=u(t,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const i=u(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const l=u(t,["frequencyPenalty"]);l!=null&&h(e,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&h(e,["logprobs"],c);const d=u(t,["maxOutputTokens"]);d!=null&&h(e,["maxOutputTokens"],d);const m=u(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const p=u(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const g=u(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const x=u(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const y=u(t,["responseModalities"]);y!=null&&h(e,["responseModalities"],y);const T=u(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const A=u(t,["routingConfig"]);A!=null&&h(e,["routingConfig"],A);const b=u(t,["seed"]);b!=null&&h(e,["seed"],b);const N=u(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],N);const S=u(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const D=u(t,["temperature"]);D!=null&&h(e,["temperature"],D);const V=u(t,["thinkingConfig"]);V!=null&&h(e,["thinkingConfig"],V);const k=u(t,["topK"]);k!=null&&h(e,["topK"],k);const j=u(t,["topP"]);if(j!=null&&h(e,["topP"],j),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Z7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function e9(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function t9(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n9(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s9(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function a9(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);s!=null&&h(e,["imageSize"],s);const a=u(t,["personGeneration"]);a!=null&&h(e,["personGeneration"],a);const i=u(t,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const o=u(t,["outputCompressionQuality"]);return o!=null&&h(e,["imageOutputOptions","compressionQuality"],o),e}function i9(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],ki(n));const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function t1(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],ki(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function ef(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],ki(n));const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Ts(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],ki(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function r9(t,e,n){const s={},a=u(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&h(n,["_url","models_url"],JI(t,l)),s}function o9(t,e,n){const s={},a=u(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&h(n,["_url","models_url"],JI(t,l)),s}function l9(t,e){const n={},s=u(e,["config"]);return s!=null&&r9(t,s,n),n}function c9(t,e){const n={},s=u(e,["config"]);return s!=null&&o9(t,s,n),n}function d9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["_self"]);if(a!=null){let i=KI(a);Array.isArray(i)&&(i=i.map(o=>o0(o))),h(e,["models"],i)}return e}function u9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["_self"]);if(a!=null){let i=KI(a);Array.isArray(i)&&(i=i.map(o=>l0(o))),h(e,["models"],i)}return e}function m9(t){const e={},n=u(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const s=u(t,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const a=u(t,["maskDilation"]);return a!=null&&h(e,["dilation"],a),e}function o0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);a!=null&&h(e,["description"],a);const i=u(t,["version"]);i!=null&&h(e,["version"],i);const o=u(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],A9(o));const l=u(t,["inputTokenLimit"]);l!=null&&h(e,["inputTokenLimit"],l);const c=u(t,["outputTokenLimit"]);c!=null&&h(e,["outputTokenLimit"],c);const d=u(t,["supportedGenerationMethods"]);d!=null&&h(e,["supportedActions"],d);const m=u(t,["temperature"]);m!=null&&h(e,["temperature"],m);const p=u(t,["maxTemperature"]);p!=null&&h(e,["maxTemperature"],p);const g=u(t,["topP"]);g!=null&&h(e,["topP"],g);const x=u(t,["topK"]);x!=null&&h(e,["topK"],x);const y=u(t,["thinking"]);return y!=null&&h(e,["thinking"],y),e}function l0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);a!=null&&h(e,["description"],a);const i=u(t,["versionId"]);i!=null&&h(e,["version"],i);const o=u(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>T7(g))),h(e,["endpoints"],p)}const l=u(t,["labels"]);l!=null&&h(e,["labels"],l);const c=u(t,["_self"]);c!=null&&h(e,["tunedModelInfo"],I9(c));const d=u(t,["defaultCheckpointId"]);d!=null&&h(e,["defaultCheckpointId"],d);const m=u(t,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>g)),h(e,["checkpoints"],p)}return e}function h9(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],S7(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],w7(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],W8(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function f9(t){const e={},n=u(t,["productImage"]);return n!=null&&h(e,["image"],Ts(n)),e}function p9(t,e){const n={},s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["baseSteps"]);e!==void 0&&a!=null&&h(e,["parameters","baseSteps"],a);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=u(t,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const l=u(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const c=u(t,["personGeneration"]);e!==void 0&&c!=null&&h(e,["parameters","personGeneration"],c);const d=u(t,["addWatermark"]);e!==void 0&&d!=null&&h(e,["parameters","addWatermark"],d);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const p=u(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const g=u(t,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const x=u(t,["labels"]);return e!==void 0&&x!=null&&h(e,["labels"],x),n}function g9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["source"]);a!=null&&v9(a,n);const i=u(e,["config"]);return i!=null&&p9(i,n),n}function x9(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Zh(a))),h(e,["generatedImages"],s)}return e}function v9(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["personImage"]);e!==void 0&&a!=null&&h(e,["instances[0]","personImage","image"],Ts(a));const i=u(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>f9(l))),h(e,["instances[0]","productImages"],o)}return n}function y9(t){const e={},n=u(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],Ts(n));const s=u(t,["referenceId"]);s!=null&&h(e,["referenceId"],s);const a=u(t,["referenceType"]);a!=null&&h(e,["referenceType"],a);const i=u(t,["maskImageConfig"]);i!=null&&h(e,["maskImageConfig"],m9(i));const o=u(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],i7(o));const l=u(t,["styleImageConfig"]);l!=null&&h(e,["styleImageConfig"],l);const c=u(t,["subjectImageConfig"]);return c!=null&&h(e,["subjectImageConfig"],c),e}function n1(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function s1(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function b9(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function _9(t){const e={},n=u(t,["image"]);return n!=null&&h(e,["image"],Ts(n)),e}function E9(t,e){const n={},s=u(t,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const a=u(t,["maxPredictions"]);e!==void 0&&a!=null&&h(e,["parameters","maxPredictions"],a);const i=u(t,["confidenceThreshold"]);e!==void 0&&i!=null&&h(e,["parameters","confidenceThreshold"],i);const o=u(t,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const l=u(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","binaryColorThreshold"],l);const c=u(t,["labels"]);return e!==void 0&&c!=null&&h(e,["labels"],c),n}function N9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["source"]);a!=null&&T9(a,n);const i=u(e,["config"]);return i!=null&&E9(i,n),n}function C9(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>K7(a))),h(e,["generatedMasks"],s)}return e}function T9(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],Ts(a));const i=u(t,["scribbleImage"]);return e!==void 0&&i!=null&&h(e,["instances[0]","scribble"],_9(i)),n}function S9(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],A7(s)),e}function w9(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],t9(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],n9(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function a1(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>I7(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function A9(t){const e={},n=u(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function I9(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function j9(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function R9(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function M9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","name"],De(t,s));const a=u(e,["config"]);return a!=null&&j9(a,n),n}function P9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["config"]);return a!=null&&R9(a,n),n}function D9(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const i=u(t,["personGeneration"]);e!==void 0&&i!=null&&h(e,["parameters","personGeneration"],i);const o=u(t,["includeRaiReason"]);e!==void 0&&o!=null&&h(e,["parameters","includeRaiReason"],o);const l=u(t,["outputMimeType"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","mimeType"],l);const c=u(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&h(e,["parameters","outputOptions","compressionQuality"],c);const d=u(t,["enhanceInputImage"]);e!==void 0&&d!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=u(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const p=u(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&h(e,["parameters","sampleCount"],g);const x=u(t,["mode"]);return e!==void 0&&x!=null&&h(e,["parameters","mode"],x),n}function k9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["image"]);a!=null&&h(n,["instances[0]","image"],Ts(a));const i=u(e,["upscaleFactor"]);i!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=u(e,["config"]);return o!=null&&D9(o,n),n}function L9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Zh(i))),h(e,["generatedImages"],a)}return e}function V9(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],ki(s));const a=u(t,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function U9(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],ki(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function O9(t){const e={},n=u(t,["image"]);n!=null&&h(e,["_self"],Ts(n));const s=u(t,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function z9(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],ef(n));const s=u(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function F9(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],Ts(n));const s=u(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function i1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["videoBytes"]);s!=null&&h(e,["encodedVideo"],ki(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["encoding"],a),e}function r1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],ki(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G9(t,e){const n={},s=u(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),n}function q9(t){const e={},n=u(t,["config"]);return n!=null&&G9(n,e),e}function B9(t,e){const n={},s=u(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function H9(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&B9(s,e),e}function $9(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function Y9(t,e){const n={},s=u(t,["customMetadata"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["customMetadata"],i)}const a=u(t,["chunkingConfig"]);return e!==void 0&&a!=null&&h(e,["chunkingConfig"],a),n}function J9(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Q9(o)),e}function K9(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=u(t,["fileName"]);s!=null&&h(e,["fileName"],s);const a=u(t,["config"]);return a!=null&&Y9(a,e),e}function Q9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function X9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function W9(t){const e={},n=u(t,["config"]);return n!=null&&X9(n,e),e}function Z9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["fileSearchStores"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["fileSearchStores"],i)}return e}function o1(t,e){const n={},s=u(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const a=u(t,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const i=u(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const o=u(t,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),n}function eG(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=u(t,["config"]);return s!=null&&o1(s,e),e}function tG(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nG="Content-Type",sG="X-Server-Timeout",aG="User-Agent",c0="x-goog-api-client",iG="1.35.0",rG=`google-genai-sdk/${iG}`,oG="v1beta1",lG="v1beta";class cG{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:oG,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:lG,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const a=[this.getRequestUrlInternal(n)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))a.searchParams.append(o,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.unaryApiCall(a,i,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[a,i]of Object.entries(n))typeof i=="object"?s[a]=Object.assign(Object.assign({},s[a]),i):i!==void 0&&(s[a]=i);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.streamApiCall(a,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,a){if(n&&n.timeout||a){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&dG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await cC(a),new a0(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await cC(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return gs(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),i=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let o="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield me(a.read());if(d){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(m,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const T=JSON.parse(JSON.stringify(y.error)),A=T.status,b=T.code,N=`got status: ${A}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new Xh({message:N,status:b})}}catch(y){if(y.name==="ApiError")throw y}o+=p;let g=-1,x=0;for(;;){g=-1,x=0;for(const A of c){const b=o.indexOf(A);b!==-1&&(g===-1||b<g)&&(g=b,x=A.length)}if(g===-1)break;const y=o.substring(0,g);o=o.substring(g+x);const T=y.trim();if(T.startsWith(l)){const A=T.substring(l.length).trim();try{const b=new Response(A,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield me(new a0(b))}catch(b){throw new Error(`exception parsing stream chunk ${A}. ${b}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=rG+" "+this.clientOptions.userAgentExtra;return e[aG]=n,e[c0]=n,e[nG]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))s.append(a,i);e.timeout&&e.timeout>0&&s.append(sG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);a.sizeBytes=String(o.size);const l=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=l;const c={file:a},d=this.getFileName(e),m=W("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(m,a.sizeBytes,a.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,s){var a;const i=this.clientOptions.uploader,o=await i.stat(n),l=String(o.size),c=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),p={};s!=null&&o1(s,p);const g=await this.fetchUploadUrl(d,l,c,m,p,s==null?void 0:s.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,a,i,o){var l;let c={};o?c=o:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function cC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw n>=400&&n<600?new Xh({message:a,status:n}):new Error(a)}}function dG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(i,o){const l=Object.assign({},i);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c],m=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?l[c]=s(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const a=s(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uG="mcp_used/unknown";let mG=!1;function l1(t){for(const e of t)if(hG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return mG}function c1(t){var e;const n=(e=t[c0])!==null&&e!==void 0?e:"";t[c0]=(n+` ${uG}`).trimStart()}function hG(t){return t!==null&&typeof t=="object"&&t instanceof Iv}function fG(t){return gs(this,arguments,function*(n,s=100){let a,i=0;for(;i<s;){const o=yield me(n.listTools({cursor:a}));for(const l of o.tools)yield yield me(l),i++;if(!o.nextCursor)break;a=o.nextCursor}})}class Iv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Iv(e,n)}async initialize(){var e,n,s,a;if(this.mcpTools.length>0)return;const i={},o=[];for(const m of this.mcpClients)try{for(var l=!0,c=(n=void 0,xs(fG(m))),d;d=await c.next(),e=d.done,!e;l=!0){a=d.value,l=!1;const p=a;o.push(p);const g=p.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=m}}catch(p){n={error:p}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),$z(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await a.callTool({name:s.name,arguments:s.args},void 0,i);n.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pG(t,e,n){const s=new Uz;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(s,a),e(s)}class gG{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=yG(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${a}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const m=new Promise(S=>{d=S}),p=e.callbacks,g=function(){d({})},x=this.apiClient,y={onopen:g,onmessage:S=>{pG(x,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(s=p==null?void 0:p.onclose)!==null&&s!==void 0?s:function(S){}},T=this.webSocketFactory.create(c,vG(o),y);T.connect(),await m;const N={setup:{model:De(this.apiClient,e.model)}};return T.send(JSON.stringify(N)),new xG(T,this.apiClient)}}class xG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=q8(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=G8(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Zr.PLAY)}pause(){this.sendPlaybackControl(Zr.PAUSE)}stop(){this.sendPlaybackControl(Zr.STOP)}resetContext(){this.sendPlaybackControl(Zr.RESET_CONTEXT)}close(){this.conn.close()}}function vG(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function yG(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _G(t,e,n){const s=new Vz;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const i=JSON.parse(a);if(t.isVertexAI()){const o=$8(i);Object.assign(s,o)}else Object.assign(s,i);e(s)}class EG{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new gG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,a,i,o,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&l1(e.config.tools)&&c1(p);const g=SG(p);if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,m);else{const I=this.apiClient.getApiKey();let C="BidiGenerateContent",E="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),C="BidiGenerateContentConstrained",E="access_token"),m=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${C}?${E}=${I}`}let x=()=>{};const y=new Promise(I=>{x=I}),T=e.callbacks,A=function(){var I;(I=T==null?void 0:T.onopen)===null||I===void 0||I.call(T),x({})},b=this.apiClient,N={onopen:A,onmessage:I=>{_G(b,T.onmessage,I)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(I){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(I){}},S=this.webSocketFactory.create(m,TG(g),N);S.connect(),await y;let D=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const I=this.apiClient.getProject(),C=this.apiClient.getLocation();D=`projects/${I}/locations/${C}/`+D}let V={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bm.AUDIO]}:e.config.responseModalities=[Bm.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],j=[];for(const I of k)if(this.isCallableTool(I)){const C=I;j.push(await C.tool())}else j.push(I);j.length>0&&(e.config.tools=j);const _={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=F8(this.apiClient,_):V=z8(this.apiClient,_),delete V.config,S.send(JSON.stringify(V)),new CG(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const NG={turnComplete:!0};class CG{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Zn(n.turns),e.isVertexAI()||(s=s.map(a=>Wh(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(bG)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},NG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:H8(e)}:n={realtimeInput:B8(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function TG(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function SG(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dC=10;function uC(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(po(o)){a=!0;break}if(!a)return!0;const i=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function po(t){return"callTool"in t&&typeof t.callTool=="function"}function wG(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>po(a)))!==null&&s!==void 0?s:!1}function mC(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(po(s))return;const i=s;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(a)}),n}function hC(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AG extends wa{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,a,i,o,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!wG(n)||uC(n.config))return await this.generateContentInternal(c);const d=mC(n);if(d.length>0){const T=d.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let m,p;const g=Zn(c.contents),x=(i=(a=(s=c.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&i!==void 0?i:dC;let y=0;for(;y<x&&(m=await this.generateContentInternal(c),!(!m.functionCalls||m.functionCalls.length===0));){const T=m.candidates[0].content,A=[];for(const b of(l=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(po(b)){const S=await b.callTool(m.functionCalls);A.push(...S)}y++,p={role:"user",parts:A},c.contents=Zn(c.contents),c.contents.push(T),c.contents.push(p),hC(c.config)&&(g.push(T),g.push(p))}return hC(c.config)&&(m.automaticFunctionCallingHistory=g),m},this.generateContentStream=async n=>{var s,a,i,o,l;if(this.maybeMoveToResponseJsonSchem(n),uC(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=mC(n);if(c.length>0){const p=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,m=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var a;let i;const o=[];if(s!=null&&s.generatedImages)for(const c of s.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:o.push(c);let l;return i?l={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:s.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:s.sdkHttpResponse},l}),this.list=async n=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Cr(Ca.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var s,a,i,o,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,a;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async c=>po(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(l.config.tools=o,e.config&&e.config.tools&&l1(e.config.tools)){const c=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),c1(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,s,a;const i=new Map;for(const o of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(po(o)){const l=o,c=await l.tool();for(const d of(a=c.functionDeclarations)!==null&&a!==void 0?a:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,s,a;const i=(a=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:dC;let o=!1,l=0;const c=await this.initAfcToolsMap(e);return function(d,m,p){return gs(this,arguments,function*(){for(var g,x,y,T,A,b;l<i;){o&&(l++,o=!1);const V=yield me(d.processParamsMaybeAddMcpUsage(p)),k=yield me(d.generateContentStreamInternal(V)),j=[],_=[];try{for(var N=!0,S=(x=void 0,xs(k)),D;D=yield me(S.next()),g=D.done,!g;N=!0){T=D.value,N=!1;const I=T;if(yield yield me(I),I.candidates&&(!((A=I.candidates[0])===null||A===void 0)&&A.content)){_.push(I.candidates[0].content);for(const C of(b=I.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(l<i&&C.functionCall){if(!C.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(C.functionCall.name)){const E=yield me(m.get(C.functionCall.name).callTool([C.functionCall]));j.push(...E)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${C.functionCall.name}`)}}}}catch(I){x={error:I}}finally{try{!N&&!g&&(y=S.return)&&(yield me(y.call(S)))}finally{if(x)throw x.error}}if(j.length>0){o=!0;const I=new Ul;I.candidates=[{content:{role:"user",parts:j}}],yield yield me(I);const C=[];C.push(..._),C.push({role:"user",parts:j});const E=Zn(p.contents).concat(C);p.contents=E}else break}})}(this,c,e)}async generateContentInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=rC(this.apiClient,e);return l=W("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=lC(m),g=new Ul;return Object.assign(g,p),g})}else{const d=iC(this.apiClient,e);return l=W("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=oC(m),g=new Ul;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=rC(this.apiClient,e);return l=W("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return gs(this,arguments,function*(){var g,x,y,T;try{for(var A=!0,b=xs(p),N;N=yield me(b.next()),g=N.done,!g;A=!0){T=N.value,A=!1;const S=T,D=lC(yield me(S.json()));D.sdkHttpResponse={headers:S.headers};const V=new Ul;Object.assign(V,D),yield yield me(V)}}catch(S){x={error:S}}finally{try{!A&&!g&&(y=b.return)&&(yield me(y.call(b)))}finally{if(x)throw x.error}}})})}else{const d=iC(this.apiClient,e);return l=W("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return gs(this,arguments,function*(){var g,x,y,T;try{for(var A=!0,b=xs(p),N;N=yield me(b.next()),g=N.done,!g;A=!0){T=N.value,A=!1;const S=T,D=oC(yield me(S.json()));D.sdkHttpResponse={headers:S.headers};const V=new Ul;Object.assign(V,D),yield yield me(V)}}catch(S){x={error:S}}finally{try{!A&&!g&&(y=b.return)&&(yield me(y.call(b)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=E7(this.apiClient,e);return l=W("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=C7(m),g=new GN;return Object.assign(g,p),g})}else{const d=_7(this.apiClient,e);return l=W("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=N7(m),g=new GN;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=k7(this.apiClient,e);return l=W("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=V7(m),g=new qN;return Object.assign(g,p),g})}else{const d=D7(this.apiClient,e);return l=W("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=L7(m),g=new qN;return Object.assign(g,p),g})}}async editImageInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=x7(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=v7(c),m=new Sz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=k9(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=L9(c),m=new wz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=g9(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=x9(c),m=new Az;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=N9(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=C9(c),m=new Iz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=e9(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>l0(m))}else{const d=Z7(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>o0(m))}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=c9(this.apiClient,e);return l=W("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=u9(m),g=new BN;return Object.assign(g,p),g})}else{const d=l9(this.apiClient,e);return l=W("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=d9(m),g=new BN;return Object.assign(g,p),g})}}async update(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=P9(this.apiClient,e);return l=W("{model}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>l0(m))}else{const d=M9(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>o0(m))}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=h7(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=p7(m),g=new HN;return Object.assign(g,p),g})}else{const d=m7(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=f7(m),g=new HN;return Object.assign(g,p),g})}}async countTokens(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=c7(this.apiClient,e);return l=W("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=u7(m),g=new $N;return Object.assign(g,p),g})}else{const d=l7(this.apiClient,e);return l=W("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=d7(m),g=new $N;return Object.assign(g,p),g})}}async computeTokens(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=t7(this.apiClient,e);return i=W("{model}:computeTokens",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=n7(c),m=new jz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=q7(this.apiClient,e);return l=W("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=F7(m),g=new Hm;return Object.assign(g,p),g})}else{const d=G7(this.apiClient,e);return l=W("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=z7(m),g=new Hm;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IG extends wa{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bz(e);return l=W("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}else{const d=yz(e);return l=W("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}}async fetchPredictVideosOperationInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=mz(e);return i=W("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jG(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function RG(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>zG(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function MG(t,e,n){const s={},a=u(e,["expireTime"]);n!==void 0&&a!=null&&h(n,["expireTime"],a);const i=u(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&h(n,["newSessionExpireTime"],i);const o=u(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const l=u(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&h(n,["bidiGenerateContentSetup"],OG(t,l));const c=u(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&h(n,["fieldMask"],c),s}function PG(t,e){const n={},s=u(e,["config"]);return s!=null&&h(n,["config"],MG(t,s,n)),n}function DG(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function kG(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LG(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function VG(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function UG(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],Av(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],RG(tn(y)));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let k=ul(T);Array.isArray(k)&&(k=k.map(j=>GG(dl(j)))),h(e,["setup","tools"],k)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&h(e,["setup","sessionResumption"],FG(A));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const S=u(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);if(e!==void 0&&V!=null&&h(e,["setup","proactivity"],V),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function OG(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],De(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],UG(a,n)),n}function zG(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],DG(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],kG(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],jG(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function FG(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GG(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],LG(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],VG(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qG(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(i=>`${n}.${i}`);e.push(...a)}else e.push(n)}return e.join(",")}function BG(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const i=qG(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];a.length>0&&(l=a.map(d=>o.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class HG extends wa{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=PG(this.apiClient,e);i=W("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const c=BG(l,e.config);return a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),a.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $G(t,e){const n={},s=u(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function YG(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&$G(s,e),e}function JG(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function KG(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function QG(t){const e={},n=u(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const s=u(t,["config"]);return s!=null&&KG(s,e),e}function XG(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["documents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WG extends wa{constructor(e){super(),this.apiClient=e,this.list=async n=>new Cr(Ca.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=JG(e);return i=W("{name}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=YG(e);a=W("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=QG(e);return i=W("{parent}/documents",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=XG(c),m=new Rz;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZG extends wa{constructor(e,n=new WG(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new Cr(Ca.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=q9(e);return i=W("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$9(e);return i=W("{name}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=H9(e);a=W("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=W9(e);return i=W("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=Z9(c),m=new Mz;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eG(e);return i=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=tG(c),m=new Pz;return Object.assign(m,d),m})}}async importFile(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=K9(e);return i=W("{file_search_store_name}:importFile",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=J9(c),m=new Nv;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let d1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return d1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const eq=()=>d1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const u0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class os extends Error{}class mn extends os{constructor(e,n,s,a){super(`${mn.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new tf({message:s,cause:u0(n)});const i=n;return e===400?new m1(e,i,s,a):e===401?new h1(e,i,s,a):e===403?new f1(e,i,s,a):e===404?new p1(e,i,s,a):e===409?new g1(e,i,s,a):e===422?new x1(e,i,s,a):e===429?new v1(e,i,s,a):e>=500?new y1(e,i,s,a):new mn(e,i,s,a)}}class m0 extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class tf extends mn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class u1 extends tf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class m1 extends mn{}class h1 extends mn{}class f1 extends mn{}class p1 extends mn{}class g1 extends mn{}class x1 extends mn{}class v1 extends mn{}class y1 extends mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tq=/^[a-z][a-z0-9+.-]*:/i,nq=t=>tq.test(t);let h0=t=>(h0=Array.isArray,h0(t));const sq=h0;let aq=sq;const fC=aq;function iq(t){if(!t)return!0;for(const e in t)return!1;return!0}function rq(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const oq=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new os(`${t} must be an integer`);if(e<0)throw new os(`${t} must be a positive integer`);return e},lq=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cq=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Or="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uq=()=>{var t,e,n,s,a;const i=dq();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Or,"X-Stainless-OS":gC(Deno.build.os),"X-Stainless-Arch":pC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Or,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Or,"X-Stainless-OS":gC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":pC((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const o=mq();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Or,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Or,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mq(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,i=s[2]||0,o=s[3]||0;return{browser:e,version:`${a}.${i}.${o}`}}}return null}const pC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",gC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ou;const hq=()=>ou??(ou=uq());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function b1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function pq(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return b1({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function _1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function gq(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xq=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E1=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cp(t,e,n){return E1(),new File(t,e??"unknown_file",n)}function vq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const yq=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bq=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&N1(t),_q=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Eq(t,e,n){if(E1(),t=await t,bq(t))return t instanceof File?t:Cp([await t.arrayBuffer()],t.name);if(_q(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Cp(await f0(a),e,n)}const s=await f0(t);if(e||(e=vq(t)),!(n!=null&&n.type)){const a=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return Cp(s,e,n)}async function f0(t){var e,n,s,a,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(N1(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(yq(t))try{for(var l=!0,c=xs(t),d;d=await c.next(),e=d.done,!e;l=!0){a=d.value,l=!1;const m=a;o.push(...await f0(m))}}catch(m){n={error:m}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(n)throw n.error}}else{const m=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${Nq(t)}`)}return o}function Nq(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C1{constructor(e){this._client=e}}C1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T1(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const xC=Object.freeze(Object.create(null)),Cq=(t=T1)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const i=[],o=n.reduce((m,p,g)=>{var x,y,T;/[?#]/.test(p)&&(a=!0);const A=s[g];let b=(a?encodeURIComponent:t)(""+A);return g!==s.length&&(A==null||typeof A=="object"&&A.toString===((T=Object.getPrototypeOf((y=Object.getPrototypeOf((x=A.hasOwnProperty)!==null&&x!==void 0?x:xC))!==null&&y!==void 0?y:xC))===null||T===void 0?void 0:T.toString))&&(b=A+"",i.push({start:m.length+p.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),m+p+(g===s.length?"":b)},""),l=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((m,p)=>m.start-p.start),i.length>0){let m=0;const p=i.reduce((g,x)=>{const y=" ".repeat(x.start-m),T="^".repeat(x.length);return m=x.start+x.length,g+y+T},"");throw new os(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${p}`)}return o},lu=Cq(T1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S1 extends C1{create(e,n){var s;const{api_version:a=this._client.apiVersion}=e,i=Ym(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new os("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new os("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(lu`/${a}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(lu`/${a}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(lu`/${a}/interactions/${e}/cancel`,s)}get(e,n={},s){var a;const i=n??{},{api_version:o=this._client.apiVersion}=i,l=Ym(i,["api_version"]);return this._client.get(lu`/${o}/interactions/${e}`,Object.assign(Object.assign({query:l},s),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}S1._key=Object.freeze(["interactions"]);class w1 extends S1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tq(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let cu;function jv(t){let e;return(cu??(e=new globalThis.TextEncoder,cu=e.encode.bind(e)))(t)}let du;function vC(t){let e;return(du??(e=new globalThis.TextDecoder,du=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?jv(e):e;this.buffer=Tq([this.buffer,n]);const s=[];let a;for(;(a=Sq(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(vC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,o=vC(this.buffer.subarray(0,i));s.push(o),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}nf.NEWLINE_CHARS=new Set([`
`,"\r"]);nf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Sq(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function wq(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jm={off:0,error:200,warn:300,info:400,debug:500},yC=(t,e,n)=>{if(t){if(rq(Jm,t))return t;cn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Jm))}`)}};function Xl(){}function uu(t,e,n){return!e||Jm[t]>Jm[n]?Xl:e[t].bind(e)}const Aq={error:Xl,warn:Xl,info:Xl,debug:Xl};let bC=new WeakMap;function cn(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Aq;const a=bC.get(n);if(a&&a[0]===s)return a[1];const i={error:uu("error",n,s),warn:uu("warn",n,s),info:uu("info",n,s),debug:uu("debug",n,s)};return bC.set(n,[s,i]),i}const Ki=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eo{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let a=!1;const i=s?cn(s):console;function o(){return gs(this,arguments,function*(){var c,d,m,p;if(a)throw new os("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let g=!1;try{try{for(var x=!0,y=xs(Iq(e,n)),T;T=yield me(y.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const A=p;if(!g)if(A.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield me(JSON.parse(A.data))}catch(b){throw i.error("Could not parse message into JSON:",A.data),i.error("From chunk:",A.raw),b}}}catch(A){d={error:A}}finally{try{!x&&!c&&(m=y.return)&&(yield me(m.call(y)))}finally{if(d)throw d.error}}g=!0}catch(A){if(d0(A))return yield me(void 0);throw A}finally{g||n.abort()}})}return new eo(o,n,s)}static fromReadableStream(e,n,s){let a=!1;function i(){return gs(this,arguments,function*(){var c,d,m,p;const g=new nf,x=_1(e);try{for(var y=!0,T=xs(x),A;A=yield me(T.next()),c=A.done,!c;y=!0){p=A.value,y=!1;const b=p;for(const N of g.decode(b))yield yield me(N)}}catch(b){d={error:b}}finally{try{!y&&!c&&(m=T.return)&&(yield me(m.call(T)))}finally{if(d)throw d.error}}for(const b of g.flush())yield yield me(b)})}function o(){return gs(this,arguments,function*(){var c,d,m,p;if(a)throw new os("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let g=!1;try{try{for(var x=!0,y=xs(i()),T;T=yield me(y.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const A=p;g||A&&(yield yield me(JSON.parse(A)))}}catch(A){d={error:A}}finally{try{!x&&!c&&(m=y.return)&&(yield me(m.call(y)))}finally{if(d)throw d.error}}g=!0}catch(A){if(d0(A))return yield me(void 0);throw A}finally{g||n.abort()}})}return new eo(o,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=i=>({next:()=>{if(i.length===0){const o=s.next();e.push(o),n.push(o)}return i.shift()}});return[new eo(()=>a(e),this.controller,this.client),new eo(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return b1({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:i}=await n.next();if(i)return s.close();const o=jv(JSON.stringify(a)+`
`);s.enqueue(o)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function Iq(t,e){return gs(this,arguments,function*(){var s,a,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new os("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new os("Attempted to iterate over a response with no body");const l=new Rq,c=new nf,d=_1(t.body);try{for(var m=!0,p=xs(jq(d)),g;g=yield me(p.next()),s=g.done,!s;m=!0){o=g.value,m=!1;const x=o;for(const y of c.decode(x)){const T=l.decode(y);T&&(yield yield me(T))}}}catch(x){a={error:x}}finally{try{!m&&!s&&(i=p.return)&&(yield me(i.call(p)))}finally{if(a)throw a.error}}for(const x of c.flush()){const y=l.decode(x);y&&(yield yield me(y))}})}function jq(t){return gs(this,arguments,function*(){var n,s,a,i;let o=new Uint8Array;try{for(var l=!0,c=xs(t),d;d=yield me(c.next()),n=d.done,!n;l=!0){i=d.value,l=!1;const m=i;if(m==null)continue;const p=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?jv(m):m;let g=new Uint8Array(o.length+p.length);g.set(o),g.set(p,o.length),o=g;let x;for(;(x=wq(o))!==-1;)yield yield me(o.slice(0,x)),o=o.slice(x)}}catch(m){s={error:m}}finally{try{!l&&!n&&(a=c.return)&&(yield me(a.call(c)))}finally{if(s)throw s.error}}o.length>0&&(yield yield me(o))})}class Rq{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=Mq(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function Mq(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Pq(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:i}=e,o=await(async()=>{var l;if(e.options.stream)return cn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):eo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return cn(t).debug(`[${s}] response parsed`,Ki({retryOfRequestLogID:a,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rv extends Promise{constructor(e,n,s=Pq){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Rv(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A1=Symbol("brand.privateNullableHeaders");function*Dq(t){if(!t)return;if(A1 in t){const{values:s,nulls:a}=t;yield*s.entries();for(const i of a)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():fC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const i=fC(s[1])?s[1]:[s[1]];let o=!1;for(const l of i)l!==void 0&&(e&&!o&&(o=!0,yield[a,null]),yield[a,l])}}const Ol=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[i,o]of Dq(s)){const l=i.toLowerCase();a.has(l)||(e.delete(i),a.add(l)),o===null?(e.delete(i),n.add(l)):(e.append(i,o),n.delete(l))}}return{[A1]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tp=t=>{var e,n,s,a,i,o;if(typeof globalThis.process<"u")return(s=(n=(e=rz)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||i===void 0?void 0:i.call(a,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var I1;class sf{constructor(e){var n,s,a,i,o,l,c,{baseURL:d=Tp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(n=Tp("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,g=Ym(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:m,apiVersion:p},g),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(s=x.timeout)!==null&&s!==void 0?s:sf.DEFAULT_TIMEOUT,this.logger=(a=x.logger)!==null&&a!==void 0?a:console;const y="warn";this.logLevel=y,this.logLevel=(o=(i=yC(x.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:yC(Tp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:y,this.fetchOptions=x.fetchOptions,this.maxRetries=(l=x.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=x.fetch)!==null&&c!==void 0?c:fq(),this.encoder=xq,this._options=x,this.apiKey=m,this.apiVersion=p,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ol([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ol([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ol([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new os(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Or}`}defaultIdempotencyKey(){return`stainless-node-retry-${eq()}`}makeStatusError(e,n,s,a){return mn.generate(e,n,s,a)}buildURL(e,n,s){const a=!this.baseURLOverridden()&&s||this.baseURL,i=nq(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return iq(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new Rv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var a,i,o;const l=await e,c=(a=l.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:m,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:m,options:l});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=s===void 0?"":`, retryOf: ${s}`,y=Date.now();if(cn(this).debug(`[${g}] sending request`,Ki({retryOfRequestLogID:s,method:l.method,url:m,options:l,headers:d.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new m0;const T=new AbortController,A=await this.fetchWithTimeout(m,d,p,T).catch(u0),b=Date.now();if(A instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((o=l.signal)===null||o===void 0)&&o.aborted)throw new m0;const D=d0(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(n)return cn(this).info(`[${g}] connection ${D?"timed out":"failed"} - ${S}`),cn(this).debug(`[${g}] connection ${D?"timed out":"failed"} (${S})`,Ki({retryOfRequestLogID:s,url:m,durationMs:b-y,message:A.message})),this.retryRequest(l,n,s??g);throw cn(this).info(`[${g}] connection ${D?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${g}] connection ${D?"timed out":"failed"} (error; no more retries left)`,Ki({retryOfRequestLogID:s,url:m,durationMs:b-y,message:A.message})),D?new u1:new tf({cause:A})}const N=`[${g}${x}] ${d.method} ${m} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${b-y}ms`;if(!A.ok){const S=await this.shouldRetry(A);if(n&&S){const I=`retrying, ${n} attempts remaining`;return await gq(A.body),cn(this).info(`${N} - ${I}`),cn(this).debug(`[${g}] response error (${I})`,Ki({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:b-y})),this.retryRequest(l,n,s??g,A.headers)}const D=S?"error; no more retries left":"error; not retryable";cn(this).info(`${N} - ${D}`);const V=await A.text().catch(I=>u0(I).message),k=lq(V),j=k?void 0:V;throw cn(this).debug(`[${g}] response error (${D})`,Ki({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,message:j,durationMs:Date.now()-y})),this.makeStatusError(A.status,k,j,A.headers)}return cn(this).info(N),cn(this).debug(`[${g}] response start`,Ki({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:b-y})),{response:A,options:l,controller:T,requestLogID:g,retryOfRequestLogID:s,startTime:y}}async fetchWithTimeout(e,n,s,a){const i=n||{},{signal:o,method:l}=i,c=Ym(i,["signal","method"]);o&&o.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),s),m=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:a.signal},m?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){var i;let o;const l=a==null?void 0:a.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(o=d)}const c=a==null?void 0:a.get("retry-after");if(c&&!o){const d=parseFloat(c);Number.isNaN(d)?o=Date.parse(c)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,d)}return await cq(o),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return o*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,a,i;const o=Object.assign({},e),{method:l,path:c,query:d,defaultBaseURL:m}=o,p=this.buildURL(c,d,m);"timeout"in o&&oq("timeout",o.timeout),o.timeout=(s=o.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:g,body:x}=this.buildBody({options:o}),y=await this.buildHeaders({options:e,method:l,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let l=Ol([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),hq()),this._options.defaultHeaders,s,e.headers,o]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ol([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:pq(e)}:this.encoder({body:e,headers:s})}}sf.DEFAULT_TIMEOUT=6e4;class Bt extends sf{constructor(){super(...arguments),this.interactions=new w1(this)}}I1=Bt;Bt.GeminiNextGenAPIClient=I1;Bt.GeminiNextGenAPIClientError=os;Bt.APIError=mn;Bt.APIConnectionError=tf;Bt.APIConnectionTimeoutError=u1;Bt.APIUserAbortError=m0;Bt.NotFoundError=p1;Bt.ConflictError=g1;Bt.RateLimitError=v1;Bt.BadRequestError=m1;Bt.AuthenticationError=h1;Bt.InternalServerError=y1;Bt.PermissionDeniedError=f1;Bt.UnprocessableEntityError=x1;Bt.toFile=Eq;Bt.Interactions=w1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kq(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function Lq(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function Vq(t,e){const n={},s=u(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function Uq(t,e){const n={},s=u(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function Oq(t,e,n){const s={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=u(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&h(e,["displayName"],a),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=u(t,["epochCount"]);e!==void 0&&i!=null&&h(e,["tuningTask","hyperparameters","epochCount"],i);const o=u(t,["learningRateMultiplier"]);if(o!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],o),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=u(t,["batchSize"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","batchSize"],l);const c=u(t,["learningRate"]);if(e!==void 0&&c!=null&&h(e,["tuningTask","hyperparameters","learningRate"],c),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function zq(t,e,n){const s={};let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const x=u(t,["validationDataset"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec"],_C(x))}else if(a==="PREFERENCE_TUNING"){const x=u(t,["validationDataset"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec"],_C(x))}const i=u(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&h(e,["tunedModelDisplayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const x=u(t,["epochCount"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(l==="PREFERENCE_TUNING"){const x=u(t,["epochCount"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const x=u(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(c==="PREFERENCE_TUNING"){const x=u(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const x=u(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(d==="PREFERENCE_TUNING"){const x=u(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let m=u(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const x=u(t,["adapterSize"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(m==="PREFERENCE_TUNING"){const x=u(t,["adapterSize"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=u(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const g=u(t,["beta"]);return e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),s}function Fq(t,e){const n={},s=u(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const a=u(t,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const i=u(t,["trainingDataset"]);i!=null&&Wq(i);const o=u(t,["config"]);return o!=null&&Oq(o,n),n}function Gq(t,e){const n={},s=u(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const a=u(t,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const i=u(t,["trainingDataset"]);i!=null&&Zq(i,n,e);const o=u(t,["config"]);return o!=null&&zq(o,n,e),n}function qq(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function Bq(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function Hq(t,e,n){const s={},a=u(t,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),s}function $q(t,e,n){const s={},a=u(t,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),s}function Yq(t,e){const n={},s=u(t,["config"]);return s!=null&&Hq(s,n),n}function Jq(t,e){const n={},s=u(t,["config"]);return s!=null&&$q(s,n),n}function Kq(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const i=u(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>j1(l))),h(n,["tuningJobs"],o)}return n}function Qq(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const i=u(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>p0(l))),h(n,["tuningJobs"],o)}return n}function Xq(t,e){const n={},s=u(t,["name"]);s!=null&&h(n,["model"],s);const a=u(t,["name"]);return a!=null&&h(n,["endpoint"],a),n}function Wq(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(n,["examples","examples"],a)}return n}function Zq(t,e,n){const s={};let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function j1(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["state"]);i!=null&&h(n,["state"],$I(i));const o=u(t,["createTime"]);o!=null&&h(n,["createTime"],o);const l=u(t,["tuningTask","startTime"]);l!=null&&h(n,["startTime"],l);const c=u(t,["tuningTask","completeTime"]);c!=null&&h(n,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(n,["updateTime"],d);const m=u(t,["description"]);m!=null&&h(n,["description"],m);const p=u(t,["baseModel"]);p!=null&&h(n,["baseModel"],p);const g=u(t,["_self"]);return g!=null&&h(n,["tunedModel"],Xq(g)),n}function p0(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["state"]);i!=null&&h(n,["state"],$I(i));const o=u(t,["createTime"]);o!=null&&h(n,["createTime"],o);const l=u(t,["startTime"]);l!=null&&h(n,["startTime"],l);const c=u(t,["endTime"]);c!=null&&h(n,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(n,["updateTime"],d);const m=u(t,["error"]);m!=null&&h(n,["error"],m);const p=u(t,["description"]);p!=null&&h(n,["description"],p);const g=u(t,["baseModel"]);g!=null&&h(n,["baseModel"],g);const x=u(t,["tunedModel"]);x!=null&&h(n,["tunedModel"],x);const y=u(t,["preTunedModel"]);y!=null&&h(n,["preTunedModel"],y);const T=u(t,["supervisedTuningSpec"]);T!=null&&h(n,["supervisedTuningSpec"],T);const A=u(t,["preferenceOptimizationSpec"]);A!=null&&h(n,["preferenceOptimizationSpec"],A);const b=u(t,["tuningDataStats"]);b!=null&&h(n,["tuningDataStats"],b);const N=u(t,["encryptionSpec"]);N!=null&&h(n,["encryptionSpec"],N);const S=u(t,["partnerModelTuningSpec"]);S!=null&&h(n,["partnerModelTuningSpec"],S);const D=u(t,["customBaseModel"]);D!=null&&h(n,["customBaseModel"],D);const V=u(t,["experiment"]);V!=null&&h(n,["experiment"],V);const k=u(t,["labels"]);k!=null&&h(n,["labels"],k);const j=u(t,["outputUri"]);j!=null&&h(n,["outputUri"],j);const _=u(t,["pipelineJob"]);_!=null&&h(n,["pipelineJob"],_);const I=u(t,["serviceAccount"]);I!=null&&h(n,["serviceAccount"],I);const C=u(t,["tunedModelDisplayName"]);C!=null&&h(n,["tunedModelDisplayName"],C);const E=u(t,["veoTuningSpec"]);return E!=null&&h(n,["veoTuningSpec"],E),n}function eB(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["metadata"]);i!=null&&h(n,["metadata"],i);const o=u(t,["done"]);o!=null&&h(n,["done"],o);const l=u(t,["error"]);return l!=null&&h(n,["error"],l),n}function _C(t,e){const n={},s=u(t,["gcsUri"]);s!=null&&h(n,["validationDatasetUri"],s);const a=u(t,["vertexDatasetResource"]);return a!=null&&h(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tB extends wa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cr(Ca.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:a});return i.baseModel=void 0,await this.tuneInternal(i)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),i=await this.tuneMldevInternal(a);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:s0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Bq(e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>p0(m))}else{const d=qq(e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>j1(m))}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Jq(e);return l=W("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=Qq(m),g=new YN;return Object.assign(g,p),g})}else{const d=Yq(e);return l=W("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=Kq(m),g=new YN;return Object.assign(g,p),g})}}async cancel(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Lq(e);return l=W("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=Uq(m),g=new JN;return Object.assign(g,p),g})}else{const d=kq(e);return l=W("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=Vq(m),g=new JN;return Object.assign(g,p),g})}}async tuneInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=Gq(e,e);return i=W("tuningJobs",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>p0(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Fq(e);return i=W("tunedModels",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>eB(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sB=1024*1024*8,aB=3,iB=1e3,rB=2,Km="x-goog-upload-status";async function oB(t,e,n){var s;const a=await R1(t,e,n),i=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Km])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function lB(t,e,n){var s;const a=await R1(t,e,n),i=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Km])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=zI(i),l=new Cv;return Object.assign(l,o),l}async function R1(t,e,n){var s,a;let i=0,o=0,l=new a0(new Response),c="upload";for(i=t.size;o<i;){const d=Math.min(sB,i-o),m=t.slice(o,o+d);o+d>=i&&(c+=", finalize");let p=0,g=iB;for(;p<aB&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((s=l==null?void 0:l.headers)===null||s===void 0)&&s[Km]));)p++,await dB(g),g=g*rB;if(o+=d,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[Km])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function cB(t){return{size:t.size,type:t.type}}function dB(t){return new Promise(e=>setTimeout(e,t))}class uB{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oB(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lB(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mB{create(e,n,s){return new hB(e,n,s)}}class hB{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EC="x-goog-api-key";class fB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(EC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(EC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pB="gl-node/";class M1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Bt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=dz(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new fB(this.apiKey);this.apiClient=new cG({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:pB+"web",uploader:new uB,downloader:new nB}),this.models=new AG(this.apiClient),this.live=new EG(this.apiClient,a,new mB),this.batches=new OF(this.apiClient),this.chats=new b8(this.models,this.apiClient),this.caches=new x8(this.apiClient),this.files=new j8(this.apiClient),this.operations=new IG(this.apiClient),this.authTokens=new HG(this.apiClient),this.tunings=new tB(this.apiClient),this.fileSearchStores=new ZG(this.apiClient)}}const gB="AIzaSyCRZ72g38NluiobYch6DbfIdDvhaaRPC6M",xB=async(t,e,n,s)=>{var p,g,x,y,T,A,b,N,S,D,V,k,j,_,I,C,E;const a=(s==null?void 0:s.trim())||gB,i=new M1({apiKey:a}),o="gemini-2.5-flash";console.log(" Usando modelo Gemini (v2.5):",o);const l=Mn.buscarPorMateria(n.subjectName),c=l.length>0?l[0]:null;let d="";c?d=Mn.generarContextoIA(c.materia,c.semestre):d="No se encontr programa oficial especfico. Usar lineamientos generales del MCCEMS 2024.";const m=`
    Eres un experto pedagogo de la DGB/SEP con nivel de Supervisor Escolar.
    Tu tarea es generar una Planeacin Didctica detallada y rigurosa para Educacin Media Superior.

    REQUISITOS OBLIGATORIOS (CRITERIOS DE REVISIN):

    1. DATOS GENERALES:
       - Define un "periodo aproximado" realista para cubrir el contenido.
       - Calcula las horas totales con base en la carga semanal.

    2. PROGRESIONES (NO PONGAS RESMENES):
       - Usa el TEXTO EXACTO y COMPLETO de la progresin oficial.
       - Indica el ID de la progresin.
       
    3. CATEGORAS Y SUBCATEGORAS (MCCEMS):
       - Identifica las CATEGORAS centrales y SUBCATEGORAS.

    4. VINCULACIN PAEC (Programa Aula-Escuela-Comunidad):
       - Define una problemtica comunitaria REAL o SIMULADA.
       - Propn un proyecto breve que aborde esto.

    5. FUNDAMENTACIN PEDAGGICA:
       - Justifica las actividades (Estilo DGB).
       - Vinculacin transversal y socioemocional.

    6. ESTUDIO INDEPENDIENTE:
       - Actividades fuera del aula (tareas), tiempo y evaluacin.

    7. TABLA DE EVALUACIN (RIGUROSA):
       - Desglosa Instrumento, Porcentaje, Agente y Criterios.

    8. RECURSOS DIDCTICOS (CRTICO - NO OLVIDAR):
       - Genera una LISTA MAESTRA de todos los materiales, herramientas digitales, lecturas y equipos necesarios.
       - Debe ser especfica (ej. "Proyector", "Hojas de rotafolio", "App de Canva", "Lectura sobre X").

    SECUENCIA DIDCTICA:
    - Separa claramente: Docente (Enseanza) vs Alumno (Aprendizaje).
    
    INFORMACIN OFICIAL:
    ${d}

    CONTEXTO ESCOLAR:
    - Escuela: ${e.schoolName}
    - Misin/Visin: ${e.vision}
    - Solicitud Usuario: "${t}"
  `;try{const P=await i.models.generateContent({model:o,contents:`Genera la planeacin completa para ${n.subjectName} cumpliendo estrictamente los 8 puntos de revisin, especialmente la LISTA DE RECURSOS.`,config:{systemInstruction:m,responseMimeType:"application/json",maxOutputTokens:8192,responseSchema:{type:F.OBJECT,properties:{title:{type:F.STRING},date:{type:F.STRING},subject:{type:F.STRING},meta:{type:F.OBJECT,properties:{teacher:{type:F.STRING},cycle:{type:F.STRING},period:{type:F.STRING},gradeGroup:{type:F.STRING},totalSessions:{type:F.NUMBER},hoursPerWeek:{type:F.NUMBER},startDate:{type:F.STRING},endDate:{type:F.STRING},methodology:{type:F.STRING}}},context:{type:F.OBJECT,properties:{diagnosis:{type:F.STRING},studentProfile:{type:F.STRING}},required:["diagnosis","studentProfile"]},curricularElements:{type:F.OBJECT,properties:{progression:{type:F.STRING},progressionId:{type:F.STRING},learningGoals:{type:F.ARRAY,items:{type:F.STRING}},categories:{type:F.ARRAY,items:{type:F.STRING}},subcategories:{type:F.ARRAY,items:{type:F.STRING}}},required:["progression","learningGoals","categories"]},paec:{type:F.OBJECT,properties:{isLinked:{type:F.BOOLEAN},communityProblem:{type:F.STRING},projectTrigger:{type:F.STRING}}},fundamento:{type:F.OBJECT,properties:{progressionJustification:{type:F.STRING},sociocognitiveLink:{type:F.STRING},socioemotionalLink:{type:F.STRING},transversalityLink:{type:F.STRING},socioemotionalScope:{type:F.STRING},socioemotionalMeta:{type:F.STRING},socioemotionalPurpose:{type:F.STRING},socioemotionalContent:{type:F.STRING}},required:["progressionJustification","sociocognitiveLink"]},independentStudy:{type:F.OBJECT,properties:{activities:{type:F.STRING},feedbackLink:{type:F.STRING},feedbackStrategy:{type:F.STRING},resources:{type:F.STRING},estimatedTime:{type:F.STRING}}},sessions:{type:F.ARRAY,items:{type:F.OBJECT,properties:{sessionNumber:{type:F.NUMBER},date:{type:F.STRING},topic:{type:F.STRING},sequence:{type:F.OBJECT,properties:{opening:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]},development:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]},closing:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]}},required:["opening","development","closing"]},resources:{type:F.ARRAY,items:{type:F.STRING}}},required:["sessionNumber","sequence"]}},evaluationTable:{type:F.ARRAY,items:{type:F.OBJECT,properties:{instrument:{type:F.STRING},percentage:{type:F.NUMBER},agent:{type:F.STRING},criteria:{type:F.STRING}},required:["instrument","percentage","agent","criteria"]}},teacherReflection:{type:F.OBJECT,properties:{strengths:{type:F.STRING},opportunities:{type:F.STRING},adjustments:{type:F.STRING}}},resources:{type:F.ARRAY,items:{type:F.STRING}},duaStrategies:{type:F.STRING},evaluation:{type:F.STRING},duration:{type:F.STRING},mccemsAlignment:{type:F.OBJECT,properties:{documentUrl:{type:F.STRING},validated:{type:F.BOOLEAN}}},transversality:{type:F.OBJECT,properties:{paecTopics:{type:F.ARRAY,items:{type:F.STRING}},relationToOtherSubjects:{type:F.STRING}}},sequence:{type:F.OBJECT,properties:{opening:{type:F.STRING},development:{type:F.STRING},closing:{type:F.STRING}}}},required:["title","subject","sessions","meta","evaluationTable","fundamento","paec","independentStudy","curricularElements","resources"]}}});let R;try{R=JSON.parse(P.text||"{}")}catch(O){throw console.error("Error al procesar JSON (Posible respuesta trunca):",O),new Error("La planeacin es muy extensa y se cort. Intenta generar menos sesiones (ej. reducir a 3) o ser ms especfico.")}if(R.sessions&&Array.isArray(R.sessions)&&(R.sessions=R.sessions.map(O=>{var q,Z,G,ee,de,Ie,nt,ot,ie,be,Ht,gt,kt,fn,Lt,lt,ge,ae,st,fe,ke,Re,Et,we;return{...O,date:O.date||"Por asignar",topic:O.topic||"Tema General",sequence:{opening:{activity:((Z=(q=O.sequence)==null?void 0:q.opening)==null?void 0:Z.activity)||"El docente inicia la sesin...",studentActivity:((ee=(G=O.sequence)==null?void 0:G.opening)==null?void 0:ee.studentActivity)||"Los alumnos atienden y participan...",time:((Ie=(de=O.sequence)==null?void 0:de.opening)==null?void 0:Ie.time)||"15 min",evidence:((ot=(nt=O.sequence)==null?void 0:nt.opening)==null?void 0:ot.evidence)||"Participacin"},development:{activity:((be=(ie=O.sequence)==null?void 0:ie.development)==null?void 0:be.activity)||"El docente explica...",studentActivity:((gt=(Ht=O.sequence)==null?void 0:Ht.development)==null?void 0:gt.studentActivity)||"Los alumnos realizan...",time:((fn=(kt=O.sequence)==null?void 0:kt.development)==null?void 0:fn.time)||"30 min",evidence:((lt=(Lt=O.sequence)==null?void 0:Lt.development)==null?void 0:lt.evidence)||"Apuntes/Ejercicios"},closing:{activity:((ae=(ge=O.sequence)==null?void 0:ge.closing)==null?void 0:ae.activity)||"El docente concluye...",studentActivity:((fe=(st=O.sequence)==null?void 0:st.closing)==null?void 0:fe.studentActivity)||"Los alumnos reflexionan...",time:((Re=(ke=O.sequence)==null?void 0:ke.closing)==null?void 0:Re.time)||"15 min",evidence:((we=(Et=O.sequence)==null?void 0:Et.closing)==null?void 0:we.evidence)||"Reflexin"}},resources:Array.isArray(O.resources)?O.resources:O.resources?[O.resources]:[]}})),!R.resources||!Array.isArray(R.resources)||R.resources.length===0){const O=((p=R.sessions)==null?void 0:p.flatMap(Z=>Z.resources||[]))||[],q=Array.from(new Set(O));q.length>0?R.resources=q:R.resources=["Pizarrn","Cuaderno del alumno","Libro de texto","Dispositivo multimedia"]}const H={...R,learningGoal:((x=(g=R.curricularElements)==null?void 0:g.learningGoals)==null?void 0:x[0])||"",progression:((y=R.curricularElements)==null?void 0:y.progression)||"",sequence:(T=R.sequence)!=null&&T.opening?R.sequence:{opening:((S=(N=(b=(A=R.sessions)==null?void 0:A[0])==null?void 0:b.sequence)==null?void 0:N.opening)==null?void 0:S.activity)||"Consultar desglose por sesiones",development:((j=(k=(V=(D=R.sessions)==null?void 0:D[0])==null?void 0:V.sequence)==null?void 0:k.development)==null?void 0:j.activity)||"Consultar desglose por sesiones",closing:((E=(C=(I=(_=R.sessions)==null?void 0:_[0])==null?void 0:I.sequence)==null?void 0:C.closing)==null?void 0:E.activity)||"Consultar desglose por sesiones"},teacherReflection:R.teacherReflection||{strengths:"",opportunities:"",adjustments:""}};return c&&(H.mccemsAlignment||(H.mccemsAlignment={documentUrl:"",validated:!1}),H.mccemsAlignment.documentUrl=c.url_fuente,H.mccemsAlignment.validated=!0),H}catch(P){throw console.error("Error Gemini:",P),new Error(P.message||"Error al generar la planeacin. Intenta de nuevo.")}},vB=async()=>{var t;try{const e=await Me(ue(J,"alumnos")),n=e.size;if(n===0)return"No hay alumnos registrados en la base de datos.";const s=e.docs.map(x=>x.data());let a=0,i=0,o=0,l=0,c=0,d=0;const m=new Set;s.forEach(x=>{var y;x.estiloAprendizaje==="Visual"&&a++,x.estiloAprendizaje==="Auditivo"&&i++,x.estiloAprendizaje==="Kinestsico"&&o++,x.estiloAprendizaje==="Lecto-escritor"&&l++,(y=x.situacionLaboral)!=null&&y.includes("Trabaja")&&c++,d+=parseFloat(x.promedioAnterior||"0"),x.intereses&&Array.isArray(x.intereses)&&x.intereses.forEach(T=>m.add(T))});const p=(d/n).toFixed(1),g=Array.from(m).slice(0,5).join(", ");return`GRUPO CONFORMADO POR ${n} ESTUDIANTES REALES.
        Perfil de Aprendizaje: ${a} Visuales, ${i} Auditivos, ${o} Kinestsicos, ${l} Lecto-escritores.
        Contexto Socioeconmico: ${c} alumnos trabajan y estudian (${Math.round(c/n*100)}%).
        Nivel Acadmico: Promedio general de ${p}.
        Intereses Principales del Grupo: ${g}.
        
        IMPORTANTE: Adapta las estrategias didcticas a este perfil especfico (ej. si hay muchos kinestsicos, incluye actividades prcticas).`}catch(e){return console.error("Error fetching student stats",e),e.code==="permission-denied"||(t=e.message)!=null&&t.includes("Missing or insufficient permissions")?`GRUPO DEMOSTRATIVO (MOCK):
            Perfil de Aprendizaje: 10 Visuales, 5 Auditivos, 15 Kinestsicos.
            Contexto: Grupo activo y participativo, intereses en tecnologa y deportes.
            Nivel: Promedio 8.5.`:"Grupo estndar (Sin datos especficos)."}},P1=Hc.forwardRef(({plan:t,teacherName:e,schoolName:n,cct:s},a)=>{var i,o,l,c,d,m,p,g,x,y,T,A,b,N,S,D,V,k,j,_,I,C,E,P,R,H,O,q,Z;return r.jsxs("article",{ref:a,className:"bg-white border border-slate-200 shadow-2xl rounded-none md:rounded-3xl p-10 print:p-0 print:border-none print:shadow-none font-serif text-sm print:w-full print:m-0 max-w-[216mm] mx-auto",children:[r.jsxs("div",{className:"flex justify-start items-center gap-6 mb-6 border-b-2 border-slate-900 pb-4",children:[r.jsx("img",{src:"/assets/logo_puebla_gob.png",alt:"Puebla Gobierno del Estado - Educacin",className:"h-16 w-auto object-contain"}),r.jsx("img",{src:"/assets/logo_puebla_amor.png",alt:"Por Amor a Puebla - Pensar en Grande",className:"h-12 w-auto object-contain"})]}),r.jsxs("div",{className:"mb-6 border border-slate-900 rounded-sm",children:[r.jsx("div",{className:"bg-slate-800 text-white px-3 py-1 border-b border-slate-900 font-bold text-xs uppercase text-center print:bg-slate-900 print:text-white",children:"I. Datos Generales de Identificacin"}),r.jsxs("div",{className:"grid grid-cols-4 text-xs divide-x divide-slate-300 border-b border-slate-300",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Plantel"}),r.jsx("span",{className:"font-bold text-slate-900",children:n||"Escuela"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"C.C.T."}),r.jsx("span",{className:"font-bold text-slate-900",children:s||"NO CAPTURADA"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Docente"}),r.jsx("span",{className:"font-bold text-slate-900",children:e||((i=t.meta)==null?void 0:i.teacher)})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Ciclo Escolar"}),r.jsx("span",{className:"font-bold text-slate-900",children:((o=t.meta)==null?void 0:o.cycle)||"2024-2025"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 text-xs divide-x divide-slate-300",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"UAC (Unidad de Aprendizaje)"}),r.jsx("span",{className:"font-bold text-slate-900 bg-yellow-50 px-1",children:t.subject})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Grupo / Semestre"}),r.jsx("span",{className:"font-bold text-slate-900",children:(l=t.meta)==null?void 0:l.gradeGroup})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Metodologa Activa"}),r.jsx("span",{className:"font-bold text-slate-900 bg-orange-50 px-1",children:((c=t.meta)==null?void 0:c.methodology)||"No definida"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Periodo de Trabajo"}),r.jsxs("span",{className:"font-bold text-slate-900",children:[((d=t.meta)==null?void 0:d.startDate)||"Inicio"," - ",((m=t.meta)==null?void 0:m.endDate)||"Fin",r.jsxs("span",{className:"text-slate-500 font-normal ml-1",children:["(",((p=t.meta)==null?void 0:p.hoursPerWeek)||4," hrs/sem)"]})]})]})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-900 rounded-sm",children:[r.jsx("div",{className:"bg-slate-100 px-3 py-1 border-b border-slate-300 font-bold text-xs uppercase print:bg-slate-200",children:"II. Elementos del Marco Curricular Comn"}),r.jsxs("div",{className:"p-3 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[r.jsx("span",{className:"text-[10px] font-bold text-white bg-slate-800 px-2 py-0.5 rounded",children:((g=t.curricularElements)==null?void 0:g.progressionId)||"Progresin"}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Descripcin de la Progresin:"})]}),r.jsxs("p",{className:"text-xs text-slate-900 italic bg-slate-50 p-2 border border-slate-200 rounded text-justify",children:['"',((x=t.curricularElements)==null?void 0:x.progression)||t.progression,'"']})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 border-b border-slate-200",children:"Categoras (Conceptos Centrales)"}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-800",children:((T=(y=t.curricularElements)==null?void 0:y.categories)==null?void 0:T.map((G,ee)=>r.jsx("li",{children:G},ee)))||r.jsx("li",{className:"text-red-500",children:"Sin categoras definidas"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 border-b border-slate-200",children:"Subcategoras (Conceptos Transversales)"}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-800",children:((b=(A=t.curricularElements)==null?void 0:A.subcategories)==null?void 0:b.map((G,ee)=>r.jsx("li",{children:G},ee)))||r.jsx("li",{children:"Se aborda de forma integradora."})})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Metas de Aprendizaje:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:(N=t.curricularElements)==null?void 0:N.learningGoals.map((G,ee)=>r.jsx("span",{className:"bg-indigo-50 text-indigo-800 text-[10px] px-2 py-1 rounded border border-indigo-100",children:G},ee))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"border border-slate-300 rounded-sm p-3 bg-white",children:[r.jsxs("div",{className:"font-bold text-xs uppercase text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:["III. Vinculacin PAEC",(S=t.paec)!=null&&S.isLinked?r.jsx("span",{className:"text-green-600",children:" Aplica"}):r.jsx("span",{className:"text-slate-400",children:" No aplica"})]}),(D=t.paec)!=null&&D.isLinked?r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-slate-600 block text-[10px] uppercase",children:"Problemtica Comunitaria:"}),t.paec.communityProblem]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-slate-600 block text-[10px] uppercase",children:"Proyecto / Accin:"}),t.paec.projectTrigger]})]}):r.jsx("p",{className:"text-xs text-slate-400 italic",children:"No se vincula directamente con un proyecto comunitario en esta sesin."})]}),r.jsxs("div",{className:"border border-slate-300 rounded-sm p-3 bg-white",children:[r.jsx("div",{className:"font-bold text-xs uppercase text-slate-700 mb-2 border-b border-slate-200 pb-1",children:"IV. Diagnstico del Grupo"}),r.jsx("p",{className:"text-xs text-slate-800 text-justify line-clamp-6",children:((V=t.context)==null?void 0:V.studentProfile)||((k=t.context)==null?void 0:k.diagnosis)||"Sin diagnstico registrado."})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-300 rounded-sm",children:[r.jsx("div",{className:"bg-slate-100 px-3 py-1 border-b border-slate-300 font-bold text-xs uppercase print:bg-slate-200",children:"V. Fundamentacin y mbito Socioemocional"}),r.jsxs("div",{className:"p-3 text-xs space-y-3",children:[r.jsx("div",{className:"border border-indigo-100 bg-indigo-50/50 rounded p-2 mb-2",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-indigo-900 text-[9px] uppercase",children:"mbito Socioemocional"}),r.jsx("p",{className:"text-indigo-800",children:((j=t.fundamento)==null?void 0:j.socioemotionalScope)||"Bienestar socioemocional general"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-indigo-900 text-[9px] uppercase",children:"Meta Socioemocional"}),r.jsx("p",{className:"text-indigo-800",children:((_=t.fundamento)==null?void 0:_.socioemotionalMeta)||"Fomentar la autorregulacin."})]}),r.jsxs("div",{className:"col-span-2 border-t border-indigo-200 pt-1",children:[r.jsx("span",{className:"block font-bold text-indigo-900 text-[9px] uppercase",children:"Contenidos Formativos (Socioemocional)"}),r.jsx("p",{className:"text-indigo-800 italic",children:((I=t.fundamento)==null?void 0:I.socioemotionalContent)||((C=t.fundamento)==null?void 0:C.socioemotionalLink)})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Justificacin Didctica"}),r.jsx("p",{className:"text-justify",children:((E=t.fundamento)==null?void 0:E.progressionJustification)||t.duaStrategies})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Transversalidad"}),r.jsx("p",{className:"italic text-slate-700",children:(P=t.fundamento)==null?void 0:P.transversalityLink})]})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"bg-slate-900 text-white px-3 py-2 font-bold text-sm uppercase text-center print:bg-slate-900 rounded-t-sm",children:"VI. Secuencia Didctica"}),r.jsx("div",{className:"border border-slate-900 border-t-0 p-0",children:(R=t.sessions)==null?void 0:R.map((G,ee)=>r.jsxs("div",{className:"avoid-break border-b border-slate-400 last:border-b-0",children:[r.jsxs("div",{className:"bg-slate-100 p-2 text-xs font-bold border-b border-slate-300 flex justify-between print:bg-slate-200",children:[r.jsxs("span",{children:["SESIN ",G.sessionNumber,": ",G.topic]}),r.jsx("span",{children:G.date})]}),r.jsxs("table",{className:"w-full text-left text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-300 bg-slate-50 text-[10px] uppercase text-slate-500",children:[r.jsx("th",{className:"p-2 w-[10%]",children:"Fase / Tiempo"}),r.jsx("th",{className:"p-2 w-[35%]",children:"Actividad Docente (Enseanza)"}),r.jsx("th",{className:"p-2 w-[35%]",children:"Actividad Estudiante (Aprendizaje)"}),r.jsx("th",{className:"p-2 w-[20%]",children:"Evaluacin / Evidencia"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[r.jsxs("tr",{className:"align-top",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Inicio ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:G.sequence.opening.time})]}),r.jsx("td",{className:"p-2",children:G.sequence.opening.activity}),r.jsx("td",{className:"p-2",children:G.sequence.opening.studentActivity}),r.jsx("td",{className:"p-2 italic",children:G.sequence.opening.evidence})]}),r.jsxs("tr",{className:"align-top bg-white",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Desarrollo ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:G.sequence.development.time})]}),r.jsx("td",{className:"p-2",children:G.sequence.development.activity}),r.jsx("td",{className:"p-2",children:G.sequence.development.studentActivity}),r.jsx("td",{className:"p-2 italic",children:G.sequence.development.evidence})]}),r.jsxs("tr",{className:"align-top",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Cierre ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:G.sequence.closing.time})]}),r.jsx("td",{className:"p-2",children:G.sequence.closing.activity}),r.jsx("td",{className:"p-2",children:G.sequence.closing.studentActivity}),r.jsx("td",{className:"p-2 italic",children:G.sequence.closing.evidence})]})]})]}),r.jsxs("div",{className:"p-2 bg-slate-50 border-t border-slate-200 text-[10px] text-slate-500",children:[r.jsx("span",{className:"font-bold uppercase mr-2",children:"Recursos:"}),G.resources.join(", ")]})]},ee))})]}),r.jsxs("div",{className:"mb-6 border border-slate-500 rounded-sm bg-white avoid-break",children:[r.jsx("div",{className:"bg-slate-700 text-white px-3 py-1 border-b border-slate-500 font-bold text-xs uppercase print:bg-slate-800",children:"VII. Estudio Independiente"}),r.jsxs("div",{className:"p-3 text-xs grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Actividades Autnomas"}),r.jsx("p",{children:((H=t.independentStudy)==null?void 0:H.activities)||"Repaso y organizacin de apuntes."})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Tiempo Estimado"}),r.jsx("p",{children:((O=t.independentStudy)==null?void 0:O.estimatedTime)||"60 min semana"})]}),r.jsxs("div",{className:"md:col-span-3 border-t border-slate-200 pt-2 mt-1",children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Estrategia de Retroalimentacin"}),r.jsx("p",{className:"italic text-slate-700",children:((q=t.independentStudy)==null?void 0:q.feedbackLink)||"Revisin en la siguiente clase mediante preguntas aleatorias."})]})]})]}),t.evaluationTable&&t.evaluationTable.length>0&&r.jsxs("div",{className:"mb-6 border border-slate-500 rounded-sm avoid-break",children:[r.jsx("div",{className:"bg-slate-700 text-white px-3 py-2 border-b border-slate-500 font-bold text-sm uppercase text-center print:bg-slate-800 print:text-white",children:"VIII. Plan de Evaluacin y Acreditacin"}),r.jsxs("table",{className:"w-full text-left text-xs border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-100 border-b border-slate-400 text-slate-800 print:bg-slate-200",children:[r.jsx("th",{className:"p-3 border-r border-slate-300 w-[25%] font-bold uppercase text-[10px]",children:"Instrumento / Evidencia"}),r.jsx("th",{className:"p-3 border-r border-slate-300 w-[10%] text-center font-bold uppercase text-[10px]",children:"Valor"}),r.jsx("th",{className:"p-3 border-r border-slate-300 w-[15%] font-bold uppercase text-[10px]",children:"Agente"}),r.jsx("th",{className:"p-3 w-[50%] font-bold uppercase text-[10px]",children:"Criterio Especfico"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-300",children:[t.evaluationTable.map((G,ee)=>r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("td",{className:"p-3 border-r border-slate-300 font-bold text-slate-900",children:G.instrument}),r.jsxs("td",{className:"p-3 border-r border-slate-300 text-center font-bold",children:[G.percentage,"%"]}),r.jsx("td",{className:"p-3 border-r border-slate-300 text-slate-700",children:G.agent}),r.jsx("td",{className:"p-3 text-slate-700 align-top",children:G.criteria})]},ee)),r.jsxs("tr",{className:"bg-slate-100 font-bold text-slate-900 border-t-2 border-slate-400",children:[r.jsx("td",{className:"p-3 border-r border-slate-300 text-right uppercase text-[10px]",children:"Total Acumulado"}),r.jsxs("td",{className:"p-3 border-r border-slate-300 text-center",children:[t.evaluationTable.reduce((G,ee)=>G+ee.percentage,0),"%"]}),r.jsx("td",{colSpan:2,className:"p-3 bg-slate-50 text-[10px] font-normal italic text-slate-500",children:"* La evaluacin formativa es continua y sistemtica."})]})]})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-400 border-dashed rounded-sm p-4 bg-slate-50/50 avoid-break print:block hidden",children:[r.jsx("div",{className:"font-bold text-xs uppercase text-slate-500 mb-4 text-center",children:"IX. Retroalimentacin de la Prctica Docente (A llenar al finalizar la unidad)"}),r.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{children:r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"Fortalezas / Lo que funcion"})}),r.jsx("div",{children:r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"reas de Oportunidad / Lo que no funcion"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"Ajustes para futuras planeaciones"}),r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300 pt-8",children:"Firma del Docente"})]})]})]}),r.jsxs("div",{className:"mt-12 flex justify-between items-end pt-8 border-t border-slate-200 gap-4",children:[r.jsx("div",{className:"text-center w-1/4",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:e||((Z=t.meta)==null?void 0:Z.teacher)}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Elabor"})]})}),r.jsx("div",{className:"text-center w-1/4",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Jefe Disciplinar"}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Revis"})]})}),r.jsx("div",{className:"text-center w-1/4",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Coordinacin"}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Autoriza"})]})}),r.jsx("div",{className:"text-center w-1/4",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Director(a)"}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Visto Bueno"})]})})]})]})}),yB=({plan:t,subjectName:e,semestre:n})=>{var c,d;const s=M.useMemo(()=>{var V,k;const m=[];let p=0,g=0;const x=(j,_,I,C,E=!1)=>{g+=E?20:10,_?(p+=E?20:10,m.push({id:j,label:j,status:"pass",message:I})):m.push({id:j,label:j,status:E?"fail":"warning",message:C})},y=Mn.buscarPorMateria(e),T=y.find(j=>!n||j.semestre===n)||y[0],A=!!t.progression;let b=!1,N="No identificado";if(T&&A){const j=T.progresiones.find(_=>t.progression.includes(_.descripcion.substring(0,50))||_.descripcion.includes(t.progression.substring(0,50)));j&&(b=!0,N=j.id.toString())}x("Alineacin de Progresin",b,`Progresin oficial detectada (ID: ${N})`,T?"La progresin no coincide exactamente con el catlogo oficial":"No se encontr programa oficial para validar",!0),x("Vinculacin PAEC",!!((V=t.paec)!=null&&V.isLinked)&&!!t.paec.communityProblem,"Problemtica comunitaria definida","Falta definir la problemtica PAEC",!0),x("Evaluacin Formativa",!!t.evaluationTable&&t.evaluationTable.length>0,"Tabla de evaluacin presente","No se detectaron criterios de evaluacin"),x("Recursos Didcticos",!!t.resources&&t.resources.length>0,"Recursos listados","Falta lista de recursos"),x("Actividades de Aprendizaje",!!t.sessions&&t.sessions.length>0||!!t.sequence,"Secuencia didctica completa","Secuencia didctica incompleta",!0);const S=!!((k=t.meta)!=null&&k.hoursPerWeek);x("Marco Temporal",S,"Tiempos definidos en metadatos","Faltan metadatos de tiempo");const D=g>0?Math.round(p/g*100):0;return{results:m,finalScore:D,programaOficial:T}},[t,e,n]),{results:a,finalScore:i,programaOficial:o}=s,l=m=>m>=90?"text-emerald-600 bg-emerald-50 border-emerald-200":m>=70?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200";return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-700",children:r.jsx(DI,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Auditora Pedaggica MCCEMS"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Validacin de alineacin con la Nueva Escuela Mexicana"})]})]}),r.jsxs("div",{className:`px-4 py-2 rounded-xl border font-bold text-xl flex items-center gap-2 ${l(i)}`,children:[r.jsxs("span",{children:[i,"%"]}),r.jsx("span",{className:"text-xs font-normal uppercase tracking-wider opacity-80",children:"Cumplimiento"})]})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Resultados del Anlisis"}),a.map((m,p)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[m.status==="pass"&&r.jsx(Hh,{className:"w-5 h-5 text-emerald-500 shrink-0 mt-0.5"}),m.status==="warning"&&r.jsx(Si,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),m.status==="fail"&&r.jsx(qm,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-700 text-sm",children:m.label}),r.jsx("p",{className:"text-xs text-slate-500",children:m.message})]})]},p))]}),r.jsxs("div",{className:"bg-indigo-50 rounded-xl p-5 border border-indigo-100",children:[r.jsxs("h4",{className:"text-indigo-800 font-bold mb-3 flex items-center gap-2",children:[r.jsx(it,{className:"w-4 h-4"}),"Referencia Oficial Utilizada"]}),o?r.jsxs("div",{className:"space-y-3 text-sm text-indigo-900/80",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Programa:"})," ",o.materia]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Semestre:"})," ",o.semestre]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Categoras MCC:"})," ",((d=(c=o.organizador_curricular)==null?void 0:c.categorias)==null?void 0:d.join(", "))||"No definidas"]}),r.jsx("div",{className:"pt-2 border-t border-indigo-200 mt-2",children:r.jsx("p",{className:"text-xs text-indigo-700",children:"Este auditor verifica que los contenidos generados correspondan con el programa oficial vigente de la SEP (2023-2024)."})})]}):r.jsxs("div",{className:"text-amber-700 text-sm flex items-center gap-2",children:[r.jsx(Si,{className:"w-4 h-4"}),"No se encontr el programa oficial en la base de datos local para comparar."]})]})]})]})},Mv={getActiveProjects:async t=>{if(!t)return[];if(t==="demo")return[{id:"demo-pec-1",name:"Proyecto Demo: Agua Limpia",problemId:"Escasez de agua",generalObjective:"Cultura del agua eficiente",specificObjectives:[],justification:"Comunidad sin acceso regular",duration:"Ciclo 2026",stages:[],products:[]}];try{const e=re(J,"pmc",t),n=await Vn(e);if(n.exists()){const s=n.data();return s.pecProjects&&Array.isArray(s.pecProjects)&&s.pecProjects.length>0?s.pecProjects:(s.paec||[]).map(i=>{const o=i;return{id:o.id,name:`Atencin a: ${o.name||o.titulo}`,problemId:o.id,justification:o.descripcion||"Sin justificacin",generalObjective:`Contribuir a la solucin de: ${o.name||o.titulo}`,specificObjectives:[],duration:"Ciclo Escolar",stages:[],products:[]}})}return[]}catch(e){return console.error("Error al cargar proyectos PEC:",e),[]}},getProjectById:async(t,e)=>(await Mv.getActiveProjects(t)).find(s=>s.id===e)},bB=({school:t,subject:e,teacherName:n,onSave:s})=>{const{user:a}=ut(),[i,o]=M.useState(""),[l,c]=M.useState([]),[d,m]=M.useState(""),[p,g]=M.useState(""),[x,y]=M.useState(1),[T,A]=M.useState("Rbrica"),[b,N]=M.useState(null),[S,D]=M.useState(4),[V,k]=M.useState(""),[j,_]=M.useState(""),[I,C]=M.useState("Aprendizaje Basado en Proyectos (ABP)"),[E,P]=M.useState("manual"),[R,H]=M.useState(""),[O,q]=M.useState([]),[Z,G]=M.useState(""),[ee,de]=M.useState(""),[Ie,nt]=M.useState(""),[ot,ie]=M.useState(!1),[be,Ht]=M.useState(null),[gt,kt]=M.useState(null),[fn,Lt]=M.useState(!1),[lt,ge]=M.useState("structure"),[ae,st]=M.useState(""),[fe,ke]=M.useState({paecLinks:!0,resourcesList:!0,socioemotional:!0,evaluationInstrument:!0,homework:!0,transversality:!0}),[Re,Et]=M.useState({studentDiagnosis:!0,schoolVision:!0,communityContext:!1}),we=M.useRef(null),qe=OI.useReactToPrint({contentRef:we,documentTitle:`Planeacion-${e.subjectName}-${new Date().toLocaleDateString()}`});M.useEffect(()=>{if(e.subjectName){const ne=Mn.buscarPorMateria(e.subjectName);if(ne.length>0){const Gn=ne[0];c(Gn.progresiones||[]),N(Gn.semestre)}else c([])}},[e.subjectName]),M.useEffect(()=>{(async()=>{const Gn=await vB();nt(Gn)})()},[]),M.useEffect(()=>{(async()=>{if(a!=null&&a.schoolId){const Gn=await Mv.getActiveProjects(a.schoolId);q(Gn)}})()},[a==null?void 0:a.schoolId]);const Ia=async()=>{var Nd,Cd,fl,pl;if(!d&&!p){kt("Por favor selecciona una progresin o escribe un tema.");return}ie(!0),kt(null),Ht(null);let ne="",Gn=null;if(E==="manual")ne=`PROBLEMTICA PAEC: "${R||"A sugerencia de la IA basndose en el contexto"}"`,Gn=R?{isLinked:!0,communityProblem:R,projectTrigger:"Proyecto integrador"}:null;else{const mt=O.find(Li=>Li.id===Z);mt&&(ne=`
           VINCULACIN AL PROYECTO ESCOLAR COMUNITARIO (PEC):
           - Nombre Proyecto: "${mt.name}"
           - Problemtica: "${mt.problemId}"
           - Objetivo: "${mt.generalObjective}"
           - ACTIVIDAD VINCULADA: "${ee}"
         `,Gn={isLinked:!0,communityProblem:mt.name,projectTrigger:mt.generalObjective})}let an="";switch(lt){case"structure":an=`
          ROL: Acta como un Diseador Instruccional experto (Estilo ChatGPT/Teachy).
          PRIORIDAD: Estructura lgica y claridad en las consignas.
          INSTRUCCIN: Asegrate de que el Inicio, Desarrollo y Cierre estn perfectamente delimitados.
          Usa verbos operativos claros (Taxonoma de Bloom).
        `;break;case"differentiation":an=`
          ROL: Acta como experto en Educacin Inclusiva y DUA (Estilo MagicSchool/Diffit).
          PRIORIDAD: Diferenciacin de contenidos.
          INSTRUCCIN: Para la actividad principal, ofrece 3 variantes:
          1. Nivel Bsico (Apoyo visual/guiado).
          2. Nivel Estndar.
          3. Nivel Avanzado (Reto autnomo).
          Incluye notas sobre ajustes razonables para neurodivergencia.
        `;break;case"visualization":an=`
          ROL: Acta como experto en Visual Thinking (Estilo Canva/Miro).
          PRIORIDAD: Explicacin visual y analogas.
          INSTRUCCIN: En la seccin de desarrollo, sugiere especficamente qu organizadores grficos,
          diagramas o metforas visuales debe dibujar el docente en el pizarrn.
          Describe infografas sugeridas que faciliten la comprensin.
        `;break;case"evaluation":an=`
          ROL: Acta como especialista en Evaluacin Formativa (Estilo Copilot).
          PRIORIDAD: Retroalimentacin y metacognicin.
          INSTRUCCIN: Desarrolla una Rbrica Analtica detallada.
          Incluye preguntas detonadoras para la autoevaluacin de los alumnos al final de la clase.
        `;break;case"gamification":an=`
          ROL: Acta como experto en Gamificacin Educativa.
          PRIORIDAD: Motivacin y Engagement.
          INSTRUCCIN: Integra mecnicas de juego (retos, niveles, recompensas simblicas) en la secuencia.
          Haz que el aprendizaje se sienta como una misin.
        `;break;case"context":an=`
          ROL: Acta como experto en Aprendizaje Situado.
          PRIORIDAD: Relevancia en el mundo real.
          INSTRUCCIN: Vincula cada concepto con un problema real, noticia actual o situacin de la vida diaria de los estudiantes.
        `;break;case"custom":an=`
          ROL: Asistente Pedaggico Adaptable.
          PRIORIDAD: ${ae||"Ajuste personalizado"}.
          INSTRUCCIN: Sigue estrictamente esta peticin del docente: "${ae}".
        `;break;default:an="ROL: Docente experto en NEM."}const _d=`
      SECCIONES REQUERIDAS:
      ${fe.paecLinks?"- VINCULACIN PAEC: Obligatoria.":"- VINCULACIN PAEC: Omitir o reducir."}
      ${fe.resourcesList?"- RECURSOS: Generar lista detallada.":""}
      ${fe.socioemotional?"- SOCIOEMOCIONAL: Incluir desglose completo (mbito, Meta, Contenidos).":"- SOCIOEMOCIONAL: Solo mencin breve."}
      ${fe.homework?"- ESTUDIO INDEPENDIENTE: Incluir tarea con tiempo y retroalimentacin.":"- ESTUDIO INDEPENDIENTE: No asignar tarea."}
      ${fe.evaluationInstrument?"- EVALUACIN: Incluir tabla con instrumentos y porcentajes.":"- EVALUACIN: Solo mencionar estrategia general."}
    `,Ed=`
      CONTEXTO A CONSIDERAR:
      ${Re.schoolVision?`- VISIN ESCOLAR: "${t.vision}" (Alinearse a esto).`:""}
      ${Re.studentDiagnosis?`- DIAGNSTICO GRUPO: "${Ie}" (Adaptar a estas necesidades).`:""}
      ${Re.communityContext?`- CONTEXTO COMUNIDAD: "${t.municipality}" (Usar ejemplos locales).`:""}
    `,hl=`
      ${an}

      Genera una planeacin didctica para "${e.subjectName}" (Semestre ${b||"General"}).
      
      CONTEXTO Y DIAGNSTICO (INPUT HUMANO):
      - Escuela: ${t.schoolName} (${t.municipality})
      ${Ed}
      
      CONFIGURACIN TCNICA:
      - Sesiones: ${x} (${S} hrs/sem)
      - Progresin: "${d||"No especificada"}"
      - Tema: "${p}"
      - Estrategia Base: "${I}"
      - Evaluacin: "${T}"
      
      ${ne}
      
      ${_d}

      SALIDA ESPERADA:
      Genera el documento JSON con la estructura de planeacin completa.
      Asegura que incluyas una LISTA DE RECURSOS DIDCTICOS (Materiales/Digitales) para cumplir auditora.
      Asegura que el campo 'activities' refleje la PRIORIDAD seleccionada arriba.
    `;try{const mt=await xB(hl,t,e,i),Li={...mt,meta:{...mt.meta,teacher:n||((Nd=mt.meta)==null?void 0:Nd.teacher)||"",cycle:((Cd=mt.meta)==null?void 0:Cd.cycle)||"2025-2026",period:((fl=mt.meta)==null?void 0:fl.period)||"Semestral",gradeGroup:((pl=mt.meta)==null?void 0:pl.gradeGroup)||"General",totalSessions:x,hoursPerWeek:S,startDate:V||"Por definir",endDate:j||"Por definir",methodology:I},paec:Gn||mt.paec,pecLinkage:E==="linked"?{isLinked:!0,pecId:Z,pecActivity:ee}:void 0};Ht(Li)}catch(mt){kt(mt.message||"Error al generar la planeacin.")}finally{ie(!1)}},of=()=>{be&&(s(be),alert("Planeacin guardada con xito."))};return r.jsxs("div",{className:"space-y-8 pb-20",children:[r.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-200 shadow-sm no-print",children:[r.jsxs("h3",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center gap-2",children:[r.jsx(aa,{className:"w-5 h-5 text-amber-500"}),"Generador Inteligente NEM (Actividad Taller IA)"]}),r.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-100",children:[r.jsxs("label",{className:"text-xs font-bold text-indigo-700 uppercase flex items-center gap-2 mb-2",children:[r.jsx(aa,{className:"w-3 h-3"})," API Key de Gemini (Opcional - Para mayor velocidad)"]}),r.jsx("input",{type:"password",value:i,onChange:ne=>o(ne.target.value),placeholder:"Pegar Google Gemini API Key aqu...",className:"w-full p-2 rounded-lg border border-indigo-200 bg-white text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 font-mono"}),r.jsx("p",{className:"text-[10px] text-indigo-500 mt-1",children:"Usar tu propia clave asegura que no tengas lmites de cuota. Si lo dejas vaco, se usar la del sistema."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(it,{className:"w-4 h-4 text-indigo-500"}),"1. Qu vamos a ensear? (Contenido Curricular)"]}),r.jsxs("select",{value:d,onChange:ne=>m(ne.target.value),className:"w-full p-3 rounded-xl border border-slate-200 bg-slate-50 focus:border-indigo-500 text-sm",children:[r.jsx("option",{value:"",children:"-- Selecciona progresin oficial SEP --"}),l.map(ne=>r.jsxs("option",{value:ne.descripcion,children:[ne.id,". ",ne.descripcion.substring(0,120),"..."]},ne.id))]}),r.jsx("input",{type:"text",value:p,onChange:ne=>g(ne.target.value),placeholder:"O escribe un tema especfico...",className:"w-full mt-2 p-3 rounded-xl border border-slate-200 text-sm"})]}),r.jsxs("div",{className:"col-span-1 md:col-span-2 bg-indigo-50 p-5 rounded-2xl border border-indigo-100",children:[r.jsxs("label",{className:"text-sm font-bold text-indigo-900 flex items-center gap-2 mb-3",children:[r.jsx(UE,{className:"w-5 h-5"}),"2. Diagnstico de Necesidad Docente (Seleccin de Funcin IA)"]}),r.jsx("p",{className:"text-xs text-indigo-700 mb-4",children:"Basado en el Taller de IA: En qu parte del diseo didctico necesitas ms apoyo hoy?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("button",{onClick:()=>ge("structure"),className:`p-3 rounded-xl border text-left transition-all flex flex-col gap-2 ${lt==="structure"?"bg-white border-indigo-500 ring-2 ring-indigo-200 shadow-md":"bg-white/50 border-indigo-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-blue-100 w-fit rounded-lg",children:r.jsx(Zg,{className:"w-4 h-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Estructurar"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Secuencias claras, inicio-desarrollo-cierre."})]})]}),r.jsxs("button",{onClick:()=>ge("differentiation"),className:`p-3 rounded-xl border text-left transition-all flex flex-col gap-2 ${lt==="differentiation"?"bg-white border-indigo-500 ring-2 ring-indigo-200 shadow-md":"bg-white/50 border-indigo-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-purple-100 w-fit rounded-lg",children:r.jsx(WU,{className:"w-4 h-4 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Diferenciar (DUA)"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Adaptar para neurodivergencia o niveles."})]})]}),r.jsxs("button",{onClick:()=>ge("visualization"),className:`p-3 rounded-xl border text-left transition-all flex flex-col gap-2 ${lt==="visualization"?"bg-white border-indigo-500 ring-2 ring-indigo-200 shadow-md":"bg-white/50 border-indigo-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-pink-100 w-fit rounded-lg",children:r.jsx(MI,{className:"w-4 h-4 text-pink-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Visualizar"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Generar analogas y diagramas explicativos."})]})]}),r.jsxs("button",{onClick:()=>ge("evaluation"),className:`p-3 rounded-xl border text-left transition-all flex flex-col gap-2 ${lt==="evaluation"?"bg-white border-indigo-500 ring-2 ring-indigo-200 shadow-md":"bg-white/50 border-indigo-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-emerald-100 w-fit rounded-lg",children:r.jsx(_s,{className:"w-4 h-4 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Evaluar"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Rbricas detalladas y retroalimentacin."})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[r.jsxs("button",{onClick:()=>ge("gamification"),className:`p-3 rounded-xl border text-left transition-all flex flex-col gap-2 ${lt==="gamification"?"bg-white border-orange-500 ring-2 ring-orange-200 shadow-md":"bg-white/50 border-orange-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-orange-100 w-fit rounded-lg",children:r.jsx(Wn,{className:"w-4 h-4 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Gamificar"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Mecnicas de juego y retos."})]})]}),r.jsxs("button",{onClick:()=>ge("context"),className:`p-3 rounded-xl border text-left transition-all flex flex-col gap-2 ${lt==="context"?"bg-white border-teal-500 ring-2 ring-teal-200 shadow-md":"bg-white/50 border-teal-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-teal-100 w-fit rounded-lg",children:r.jsx(UE,{className:"w-4 h-4 text-teal-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Contextualizar"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Casos de la vida real."})]})]}),r.jsx("div",{className:"col-span-1 md:col-span-2",children:r.jsxs("button",{onClick:()=>ge("custom"),className:`w-full h-full p-3 rounded-xl border text-left transition-all flex items-center gap-3 ${lt==="custom"?"bg-white border-indigo-500 ring-2 ring-indigo-200 shadow-md":"bg-white/50 border-indigo-100 hover:bg-white"}`,children:[r.jsx("div",{className:"p-2 bg-indigo-600 w-fit rounded-lg",children:r.jsx(aa,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Otra Necesidad (Manual)"}),r.jsx("div",{className:"text-[10px] text-slate-500",children:"Escribe tu propia instruccin para la IA."})]})]})})]}),lt==="custom"&&r.jsxs("div",{className:"mt-4 animate-in fade-in slide-in-from-top-2",children:[r.jsx("label",{className:"text-xs font-bold text-indigo-700 mb-1 block",children:"Describe tu necesidad especfica:"}),r.jsx("textarea",{value:ae,onChange:ne=>st(ne.target.value),placeholder:"Ej. Quiero que la clase se enfoque mucho en la lectura de comprensin y use textos cientficos...",className:"w-full p-3 rounded-xl border border-indigo-200 text-sm focus:ring-2 focus:ring-indigo-500 min-h-[80px]"})]})]}),r.jsxs("div",{className:"col-span-1 md:col-span-2 bg-slate-50 p-5 rounded-2xl border border-slate-200",children:[r.jsxs("h4",{className:"text-sm font-bold text-slate-700 flex items-center gap-2 mb-4",children:[r.jsx(Zg,{className:"w-4 h-4 text-slate-500"}),"3. Personaliza tu Planeacin (Selecciona lo que necesitas)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Secciones a Incluir"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:fe.socioemotional,onChange:ne=>ke({...fe,socioemotional:ne.target.checked}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Desglose Socioemocional (Currculum Ampliado)"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:fe.evaluationInstrument,onChange:ne=>ke({...fe,evaluationInstrument:ne.target.checked}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Instrumentos de Evaluacin Detallados"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:fe.homework,onChange:ne=>ke({...fe,homework:ne.target.checked}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Estudio Independiente (Tarea)"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Contexto a Considerar"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:Re.studentDiagnosis,onChange:ne=>Et({...Re,studentDiagnosis:ne.target.checked}),className:"rounded text-emerald-600 focus:ring-emerald-500"}),"Considerar Diagnstico de Alumnos"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:Re.schoolVision,onChange:ne=>Et({...Re,schoolVision:ne.target.checked}),className:"rounded text-emerald-600 focus:ring-emerald-500"}),"Alinear a Visin Escolar (PMC)"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:Re.communityContext,onChange:ne=>Et({...Re,communityContext:ne.target.checked}),className:"rounded text-emerald-600 focus:ring-emerald-500"}),"Integrar Contexto Municipal (",t.municipality,")"]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Wn,{className:"w-4 h-4 text-orange-500"}),"Estrategia Didctica"]}),r.jsxs("select",{value:I,onChange:ne=>C(ne.target.value),className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-orange-500 text-sm",children:[r.jsx("option",{value:"Aprendizaje Basado en Proyectos (ABP)",children:"ABP (Proyectos)"}),r.jsx("option",{value:"Aprendizaje Basado en Problemas (ABPr)",children:"ABPr (Problemas)"}),r.jsx("option",{value:"Estudio de Casos",children:"Estudio de Casos"}),r.jsx("option",{value:"Aula Invertida",children:"Aula Invertida"}),r.jsx("option",{value:"Gamificacin",children:"Gamificacin"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Wn,{className:"w-4 h-4 text-pink-500"}),"Vinculacin PEC (Comunidad)"]}),r.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-0.5",children:[r.jsx("button",{onClick:()=>P("manual"),className:`px-2 py-0.5 text-[10px] rounded-md font-bold transition-all ${E==="manual"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:"Manual"}),r.jsx("button",{onClick:()=>P("linked"),className:`px-2 py-0.5 text-[10px] rounded-md font-bold transition-all ${E==="linked"?"bg-pink-500 shadow text-white":"text-slate-400"}`,children:"Vinculado"})]})]}),E==="manual"?r.jsx("input",{type:"text",value:R,onChange:ne=>H(ne.target.value),placeholder:"Ej. Contaminacin, Violencia...",className:"w-full p-3 rounded-xl border border-slate-200 text-sm"}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:Z,onChange:ne=>G(ne.target.value),className:"w-full p-3 rounded-xl border border-pink-200 bg-pink-50 focus:border-pink-500 text-sm",children:[r.jsx("option",{value:"",children:"-- Selecciona Proyecto Activo --"}),O.map(ne=>r.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),Z&&r.jsx("input",{type:"text",value:ee,onChange:ne=>de(ne.target.value),placeholder:"Actividad especfica del PEC",className:"w-full p-2 rounded-lg border border-pink-200 text-xs"})]})]})]}),r.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-slate-100",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Duracin"}),r.jsx("div",{className:"flex gap-2",children:r.jsx("select",{value:x,onChange:ne=>y(Number(ne.target.value)),className:"w-full p-2 border rounded-lg text-sm",children:[1,2,3,4,5].map(ne=>r.jsxs("option",{value:ne,children:[ne," Sesiones"]},ne))})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Fechas"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"date",value:V,onChange:ne=>k(ne.target.value),className:"p-2 border rounded-lg text-xs"}),r.jsx("input",{type:"date",value:j,onChange:ne=>_(ne.target.value),className:"p-2 border rounded-lg text-xs"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Evaluacin"}),r.jsxs("select",{value:T,onChange:ne=>A(ne.target.value),className:"w-full p-2 border rounded-lg text-sm",children:[r.jsx("option",{value:"Rbrica Detallada",children:"Rbrica Analtica"}),r.jsx("option",{value:"Lista de Cotejo",children:"Lista de Cotejo"}),r.jsx("option",{value:"Escala Estimativa",children:"Escala Estimativa"}),r.jsx("option",{value:"Diario de Clase",children:"Diario de Clase"}),r.jsx("option",{value:"Portafolio de Evidencias",children:"Portafolio de Evidencias"}),r.jsx("option",{value:"Gua de Observacin",children:"Gua de Observacin"})]})]})]})]}),r.jsxs("button",{disabled:ot||!d&&!p,onClick:Ia,className:`w-full py-4 rounded-xl font-bold flex justify-center items-center gap-2 shadow-lg transition-all ${ot||!d&&!p?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":"bg-indigo-600 text-white hover:bg-indigo-700 active:scale-95"} `,children:[ot?r.jsx(cl,{className:"w-5 h-5 animate-spin"}):r.jsx(aa,{className:"w-5 h-5"}),ot?"Aplicando Criterio Pedaggico IA...":"Generar Planeacin Personalizada"]}),gt&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl",children:gt}),be&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-700",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4 no-print",children:[r.jsxs("h4",{className:"font-bold text-slate-700 uppercase tracking-widest text-xs flex items-center gap-2",children:[r.jsx(Hh,{className:"w-4 h-4 text-emerald-500"})," Planeacin Lista"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:of,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold hover:bg-indigo-100",children:[r.jsx(Di,{className:"w-4 h-4"})," Guardar"]}),r.jsxs("button",{onClick:()=>qe(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800",children:[r.jsx($h,{className:"w-4 h-4"})," PDF"]})]})]}),r.jsx("div",{className:"mb-8 no-print",children:r.jsx(yB,{plan:be,subjectName:e.subjectName,semestre:b||void 0})}),r.jsx("div",{className:"overflow-auto border border-slate-100 rounded-3xl shadow-xl print:shadow-none print:border-none print:rounded-none",children:r.jsx(P1,{ref:we,plan:be,teacherName:n})})]})]})},NC=["Sofa","Santiago","Valentina","Sebastin","Mara","Alejandro","Ximena","Mateo","Camila","Nicols","Valeria","Diego","Ana","Samuel","Jos","Daniela","Luis","Fernanda","Gabriel","Mariana"],mu=["Garca","Rodrguez","Martnez","Hernndez","Lpez","Gonzlez","Prez","Snchez","Ramrez","Torres","Flores","Rivera","Gmez","Daz","Cruz","Reyes","Morales","Ortiz","Gutirrez","Castillo"],CC=["Visual","Auditivo","Kinestsico","Lecto-escritor"],TC=["Alto","Medio","Bajo","En riesgo"],hu=["Tecnologa","Artes","Deportes","Ciencias","Redes Sociales","Msica","Videojuegos","Lectura"],D1=async(t=60)=>{const e=SI(J),n=ue(J,"alumnos"),s=Array.from({length:t}).map(()=>{const a=NC[Math.floor(Math.random()*NC.length)],i=mu[Math.floor(Math.random()*mu.length)],o=mu[Math.floor(Math.random()*mu.length)];return{nombre:a,apellidoPaterno:i,apellidoMaterno:o,matricula:`2024${Math.floor(1e3+Math.random()*9e3)}`,email:`${a.toLowerCase()}.${i.toLowerCase()}@escuela.edu.mx`,estiloAprendizaje:CC[Math.floor(Math.random()*CC.length)],situacionLaboral:Math.random()>.7?"Trabaja y estudia":"Estudiante",promedioAnterior:(6+Math.random()*4).toFixed(1),nivelSocioemocional:TC[Math.floor(Math.random()*TC.length)],intereses:[hu[Math.floor(Math.random()*hu.length)],hu[Math.floor(Math.random()*hu.length)]],asistencias:Math.floor(80+Math.random()*20),grupo:"A",grado:"1"}});return s.forEach(a=>{const i=re(n);e.set(i,a)}),await e.commit(),s.length},_B={id:"paec-2025-001",encabezado:{institucion_superior:"Secretara de Educacin Pblica",subsecretaria:"Subsecretara de Educacin Media Superior",direccion_general:"Direccin de Bachilleratos Estatales y Preparatoria Abierta",supervision_escolar:"Zona Escolar 013",nombre_escuela:'Bachillerato General Oficial "Carlos Camacho Espritu"',turno:"Vespertino",cct:"21EBH0026G"},identidad:{nombre_programa:"PAEC - Programa Aula Escuela Comunidad",titulo_proyecto:"Cuidado y prevencin de la salud: Un enfoque integral",tipo_documento:"Plan Factible",ciclo_escolar:"2025  2026",fecha_elaboracion:new Date().toLocaleDateString("es-MX")},contenido:{justificacion:"El proyecto busca identificar problemticas crticas como el sedentarismo y la mala alimentacin. A travs de actividades interdisciplinarias, los estudiantes diagnostican hbitos, calculan su IMC y participan en activaciones fsicas.",proposito_general:"Identificar y atender problemas de salud mediante investigacin y accin colectiva (Rally deportivo, ferias de salud) para fomentar el bienestar integral.",metodologia_diseno:"Aprendizaje Basado en Proyectos Comunitarios, integrando transversalidad con Cultura Digital, Ciencias y Educacin Fsica."},matriz_actividades:[{id:"act-01",fase_proyecto:"Identificacin",asignatura:"Cultura Digital II",proposito_formativo:"Analizar datos estadsticos de salud escolar.",contenidos_formativos:"Hoja de Clculo, Grficos Estadsticos",actividades_clave:"Diseo de encuestas digitales sobre hbitos alimenticios.",semana_ejecucion:"2 Semana Septiembre",participantes:["Docentes","Estudiantes"],instrumento_evaluacion:"Lista de Cotejo",evidencia_esperada:"Base de datos en Excel"},{id:"act-02",fase_proyecto:"Accin",asignatura:"Ciencias Naturales",proposito_formativo:"Comprender el metabolismo y nutricin.",contenidos_formativos:"IMC, Nutricin Celular",actividades_clave:"Jornada de medicin de peso y talla (Clculo IMC).",semana_ejecucion:"1 Semana Noviembre",participantes:["Docentes","Estudiantes","Padres"],instrumento_evaluacion:"Rbrica",evidencia_esperada:"Ficha clnica individual"}],ficha_administrativa:{entidad_federativa:"Puebla",municipio:"Puebla",localidad:"U.H. Dr. Mateo de Regil Rodrguez",duracion_proyecto:"Semestral",estatus:"Proceso",poblacion:{estudiantes_hombres:0,estudiantes_mujeres:0,estudiantes_nobinarios:0,padres_tutores:120,docentes:12,administrativos:3,directivos:1,total_participantes:0}},firmas:[{nombre:"C. Luisa Luna Barrios",cargo:"Docente Responsable"},{nombre:"C. Alejandra Adriana Marciano Mendoza",cargo:"Docente Responsable"},{nombre:"C. Hortensia Vallejo Vzquez",cargo:"Docente Responsable"},{nombre:"C. Griselda Caselin Cruz",cargo:"Docente Responsable"},{nombre:"C. Beatriz Snchez Torres",cargo:"Docente Responsable"},{nombre:"Jose Roberto Mendoza Mendoza",cargo:"Docente Responsable"}]},k1=({onClose:t,diagnostico:e})=>{const[n,s]=M.useState(_B);M.useEffect(()=>{e&&s(m=>{var p;return{...m,identidad:{...m.identidad,titulo_proyecto:(p=e.problemaPAEC)!=null&&p.problema?`Intervencin: ${e.problemaPAEC.problema}`:m.identidad.titulo_proyecto},ficha_administrativa:{...m.ficha_administrativa,poblacion:{...m.ficha_administrativa.poblacion,total_participantes:e.totalAlumnos||0,estudiantes_hombres:Math.floor((e.totalAlumnos||0)/2),estudiantes_mujeres:Math.ceil((e.totalAlumnos||0)/2)}}}})},[e]);const{encabezado:a,identidad:i,contenido:o,matriz_actividades:l,ficha_administrativa:c,firmas:d}=n;return r.jsxs("div",{className:"fixed inset-0 bg-slate-100 z-50 overflow-y-auto animate-in slide-in-from-bottom duration-300",children:[r.jsxs("nav",{className:"sticky top-0 bg-white border-b border-slate-200 z-40 px-6 py-4 flex justify-between items-center shadow-sm print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-bold text-slate-800 text-lg",children:"Visor de Plan Factible"}),r.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 text-xs rounded-full border border-slate-200",children:"Borrador"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors shadow-sm",children:[r.jsx($h,{className:"w-4 h-4"})," Exportar PDF"]}),r.jsx("button",{onClick:t,className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 transition-colors",children:r.jsx(rs,{className:"w-5 h-5"})})]})]}),r.jsxs("main",{className:"max-w-[21cm] mx-auto bg-white min-h-[29.7cm] shadow-2xl my-8 p-[2cm] print:shadow-none print:my-0 print:p-0 print:w-full",children:[r.jsxs("header",{className:"border-b-2 border-slate-800 pb-6 mb-8 text-center text-slate-900",children:[r.jsx("h1",{className:"text-sm font-bold uppercase tracking-widest text-slate-500",children:a.institucion_superior}),r.jsx("h2",{className:"text-xs font-semibold uppercase text-slate-500 mb-4",children:a.subsecretaria}),r.jsxs("div",{className:"flex justify-between items-end border-b border-slate-200 pb-2 mb-2 text-xs font-mono text-slate-600",children:[r.jsx("span",{children:a.supervision_escolar}),r.jsxs("span",{children:["CCT: ",r.jsx("strong",{children:a.cct})]})]}),r.jsx("div",{className:"text-3xl font-serif font-bold mt-4 mb-1",children:a.nombre_escuela}),r.jsxs("div",{className:"text-sm italic text-slate-600",children:["Turno: ",a.turno]})]}),r.jsx("section",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 mb-8 print:bg-white print:border-slate-800",children:r.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Programa"}),r.jsx("div",{className:"font-bold text-lg text-slate-800",children:i.nombre_programa})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Ciclo Escolar"}),r.jsx("div",{className:"font-bold text-lg text-slate-800",children:i.ciclo_escolar})]}),r.jsxs("div",{className:"col-span-2 mt-2 pt-4 border-t border-slate-200 border-dashed",children:[r.jsx("span",{className:"block text-xs font-bold text-indigo-600 uppercase tracking-wider mb-1",children:"Ttulo del Proyecto"}),r.jsxs("div",{className:"text-2xl font-extrabold text-indigo-900 leading-tight",children:['"',i.titulo_proyecto,'"']})]})]})}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase border-b border-slate-300 pb-2 mb-4",children:[r.jsx(Kh,{className:"w-4 h-4"})," Contexto y Poblacin"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Ubicacin"}),r.jsxs("div",{className:"font-semibold",children:[c.localidad,", ",c.municipio]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Poblacin Estudiantil"}),r.jsxs("div",{className:"font-semibold",children:[c.poblacion.total_participantes," Alumnos"]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Padres de Familia"}),r.jsxs("div",{className:"font-semibold",children:[c.poblacion.padres_tutores," Tutores"]})]})]})]}),r.jsxs("section",{className:"mb-8 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase mb-2",children:"Justificacin"}),r.jsx("p",{className:"text-justify text-slate-700 text-sm leading-relaxed",children:o.justificacion})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase mb-2",children:"Propsito General"}),r.jsx("p",{className:"text-justify text-slate-700 text-sm leading-relaxed",children:o.proposito_general})]})]}),r.jsxs("section",{className:"mb-12",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase border-b border-slate-300 pb-2 mb-4",children:[r.jsx(Zg,{className:"w-4 h-4"})," Matriz de Actividades y Transversalidad"]}),r.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-slate-100 text-slate-700 font-bold border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 w-1/6",children:"Fase"}),r.jsx("th",{className:"p-3 w-1/6",children:"Asignatura"}),r.jsx("th",{className:"p-3 w-1/3",children:"Actividad Clave"}),r.jsx("th",{className:"p-3 w-1/6",children:"Evidencia"}),r.jsx("th",{className:"p-3 w-1/6",children:"Fecha"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(m=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 font-semibold text-slate-900",children:m.fase_proyecto}),r.jsx("td",{className:"p-3 text-indigo-700",children:m.asignatura}),r.jsx("td",{className:"p-3 text-slate-600",children:m.actividades_clave}),r.jsx("td",{className:"p-3 text-slate-500 italic",children:m.evidencia_esperada}),r.jsx("td",{className:"p-3 text-slate-500 text-xs",children:m.semana_ejecucion})]},m.id))})]})})]}),r.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-slate-800 break-inside-avoid",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase mb-8",children:[r.jsx(UU,{className:"w-4 h-4"})," Comit Responsable"]}),r.jsx("div",{className:"grid grid-cols-2 gap-x-12 gap-y-16",children:d.map((m,p)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-b border-black w-2/3 mx-auto mb-2"}),r.jsx("div",{className:"font-bold text-sm",children:m.nombre}),r.jsx("div",{className:"text-xs text-slate-500 uppercase",children:m.cargo})]},p))}),r.jsxs("div",{className:"mt-12 text-[10px] text-center text-slate-400 font-mono",children:["Documento generado digitalmente por Plataforma EDUPLANMX | ",new Date().getFullYear()]})]})]})]})},EB=({setView:t,recentPlansCount:e})=>{const[n,s]=Hc.useState(!1);return n?r.jsx(k1,{onClose:()=>s(!1),diagnostico:null}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 rounded-3xl p-8 text-white shadow-xl shadow-indigo-100 relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Ahorra horas administrativas"}),r.jsx("p",{className:"text-indigo-100 max-w-md",children:"Genera planeaciones didcticas alineadas al MCCEMS en segundos. Solo indica qu quieres hacer en clase y nosotros nos encargamos del formato SEP."}),r.jsxs("button",{onClick:()=>t("generator"),className:"mt-6 bg-white text-indigo-600 px-6 py-3 rounded-xl font-bold hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[r.jsx(Fn,{className:"w-5 h-5"}),"Empezar Planeacin"]})]}),r.jsx("div",{className:"absolute right-[-20px] bottom-[-20px] opacity-10",children:r.jsx(it,{className:"w-64 h-64"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-xl flex items-center justify-center text-blue-600 mb-4",children:r.jsx(Fc,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:e}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Planes Generados"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-emerald-50 w-12 h-12 rounded-xl flex items-center justify-center text-emerald-600 mb-4",children:r.jsx(ps,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"100%"}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Alineado a la SEP"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-amber-50 w-12 h-12 rounded-xl flex items-center justify-center text-amber-600 mb-4",children:r.jsx(it,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"4.0"}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Versin MCCEMS 2024"})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-8 shadow-sm",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800",children:"Acciones Rpidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>t("context"),className:"p-4 border border-slate-100 rounded-2xl hover:border-indigo-200 hover:bg-indigo-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Actualizar Contexto Escolar"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Define tu escuela, comunidad y metas directivas."})]}),r.jsxs("button",{onClick:()=>t("plans"),className:"p-4 border border-slate-100 rounded-2xl hover:border-indigo-200 hover:bg-indigo-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Revisar Historial"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Accede a tus planeaciones anteriores para reutilizarlas."})]}),r.jsxs("button",{onClick:async()=>{confirm("Generar 60 alumnos ficticios para pruebas de contexto?")&&(await D1(60),alert("Alumnos generados! Ahora al planear, la IA detectar este contexto."))},className:"p-4 border border-slate-100 rounded-2xl hover:border-emerald-200 hover:bg-emerald-50 transition-all text-left group",children:[r.jsx("div",{className:"font-semibold text-slate-800 group-hover:text-emerald-700",children:"Generar Alumnos Demo"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Puebla la base de datos con 60 estudiantes para pruebas."})]}),r.jsxs("button",{onClick:()=>s(!0),className:"p-4 border border-slate-100 rounded-2xl hover:border-blue-200 hover:bg-blue-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Ver Plan Factible (Web)"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Visualiza el sitio web generado para el proyecto de Salud."})]})]})]})]})},L1=async(t,e,n)=>{var s,a;try{if(!e||!n)throw new Error("userId y schoolId son requeridos");const i={userId:e,schoolId:n,title:t.title||t.subject||"Sin ttulo",subject:t.subject||"",grade:(s=t.meta)==null?void 0:s.gradeGroup,semester:(a=t.meta)==null?void 0:a.semester,content:t,createdAt:Pe.now(),updatedAt:Pe.now(),tags:[],isPublic:!1},o=await ss(ue(J,"planeaciones"),i);return console.log(" Planeacin creada:",o.id),o.id}catch(i){throw console.error(" Error al crear planeacin:",i),i}},af=async(t,e)=>{var n;try{if(!t||!e)return console.warn(" getMisPlaneaciones: userId o schoolId vacos",{userId:t,schoolId:e}),[];const s=Ye(ue(J,"planeaciones"),et("schoolId","==",e),et("userId","==",t),Us("createdAt","desc")),i=(await Me(s)).docs.map(o=>({id:o.id,...o.data()}));return console.log(` Cargadas ${i.length} planeaciones del docente`),i}catch(s){if((s==null?void 0:s.code)==="failed-precondition"||(n=s==null?void 0:s.message)!=null&&n.includes("index")){console.warn(" ndice faltante en Firestore. Usando consulta sin ordenar..."),console.warn(" Para solucionarlo, ve a Firebase Console > Firestore > Indexes y crea el ndice sugerido");try{const a=Ye(ue(J,"planeaciones"),et("schoolId","==",e),et("userId","==",t)),o=(await Me(a)).docs.map(l=>({id:l.id,...l.data()}));return o.sort((l,c)=>{const d=l.createdAt instanceof Pe?l.createdAt.toDate():new Date(l.createdAt);return(c.createdAt instanceof Pe?c.createdAt.toDate():new Date(c.createdAt)).getTime()-d.getTime()}),console.log(` Cargadas ${o.length} planeaciones (sin ndice)`),o}catch(a){return console.error(" Error en consulta fallback:",a),[]}}return console.error(" Error al cargar planeaciones del docente:",s),[]}},Pv=async(t,e)=>{try{if(!t)throw new Error("schoolId es requerido");let n=Ye(ue(J,"planeaciones"),et("schoolId","==",t),Us("createdAt","desc"));e&&(n=Ye(n,ho(e)));const a=(await Me(n)).docs.map(i=>({id:i.id,...i.data()}));return console.log(` Cargadas ${a.length} planeaciones de la escuela`),a}catch(n){throw console.error(" Error al cargar planeaciones de la escuela:",n),n}},rf=async(t,e)=>{try{const n=re(J,"planeaciones",t),s=await Vn(n);if(!s.exists())return console.warn(" Planeacin no encontrada:",t),null;const a={id:s.id,...s.data()};if(a.schoolId!==e)throw console.error(" Acceso denegado: planeacin de otra escuela"),new Error("No tienes permiso para ver esta planeacin");return a}catch(n){throw console.error(" Error al obtener planeacin:",n),n}},V1=async(t,e,n,s)=>{try{const a=await rf(t,s);if(!a)throw new Error("Planeacin no encontrada");if(a.userId!==n)throw new Error("No tienes permiso para editar esta planeacin");const i=re(J,"planeaciones",t);await bt(i,{...e,updatedAt:Pe.now()}),console.log(" Planeacin actualizada:",t)}catch(a){throw console.error(" Error al actualizar planeacin:",a),a}},U1=async(t,e,n)=>{try{const s=await rf(t,n);if(!s)throw new Error("Planeacin no encontrada");if(s.userId!==e)throw new Error("No tienes permiso para eliminar esta planeacin");const a=re(J,"planeaciones",t);await bs(a),console.log(" Planeacin eliminada:",t)}catch(s){throw console.error(" Error al eliminar planeacin:",s),s}},O1=async(t,e)=>{var n,s;try{const a=await af(t,e),i={total:a.length,porMateria:{},porSemestre:{},ultimaCreada:(s=(n=a[0])==null?void 0:n.createdAt)==null?void 0:s.toString()};return a.forEach(o=>{if(o.subject&&(i.porMateria[o.subject]=(i.porMateria[o.subject]||0)+1),o.semester){const l=o.semester.toString();i.porSemestre[l]=(i.porSemestre[l]||0)+1}}),i}catch(a){throw console.error(" Error al obtener estadsticas:",a),a}},z1=async(t,e,n)=>{try{const s=n?await af(n,e):await Pv(e),a=t.toLowerCase(),i=s.filter(o=>{var l,c,d;return((l=o.title)==null?void 0:l.toLowerCase().includes(a))||((c=o.subject)==null?void 0:c.toLowerCase().includes(a))||((d=o.tags)==null?void 0:d.some(m=>m.toLowerCase().includes(a)))});return console.log(` Encontradas ${i.length} planeaciones para "${t}"`),i}catch(s){throw console.error(" Error al buscar planeaciones:",s),s}},Qm={crear:L1,getMias:af,getEscuela:Pv,getById:rf,actualizar:V1,eliminar:U1,getEstadisticas:O1,buscar:z1},NB=Object.freeze(Object.defineProperty({__proto__:null,actualizarPlaneacion:V1,buscarPlaneaciones:z1,crearPlaneacion:L1,eliminarPlaneacion:U1,getEstadisticasPlaneaciones:O1,getMisPlaneaciones:af,getPlaneacion:rf,getPlaneacionesEscuela:Pv,planeacionesService:Qm},Symbol.toStringTag,{value:"Module"})),CB=()=>{var k,j;const{user:t}=ut(),[e,n]=M.useState([]),[s,a]=M.useState([]),[i,o]=M.useState(null),[l,c]=M.useState(!0),[d,m]=M.useState(""),[p,g]=M.useState("all"),[x,y]=M.useState("all"),T=M.useRef(null),A=OI.useReactToPrint({contentRef:T,documentTitle:i?`Planeacion-${i.subject}`:"Planeacion"});M.useEffect(()=>{t!=null&&t.id&&(t!=null&&t.schoolId)&&b()},[t]),M.useEffect(()=>{N()},[e,d,p,x]);const b=async()=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.schoolId)))try{c(!0);const _=await Qm.getMias(t.id,t.schoolId);n(_)}catch(_){console.error("Error al cargar planeaciones:",_);const I=localStorage.getItem("savedPlans");if(I){const C=JSON.parse(I);n(C.map(E=>{var P,R;return{id:E.id||Date.now().toString(),userId:t.id,schoolId:t.schoolId,title:E.title||E.subject,subject:E.subject,semester:(P=E.meta)==null?void 0:P.semester,content:E,createdAt:((R=E.meta)==null?void 0:R.startDate)||new Date().toISOString()}}))}}finally{c(!1)}},N=()=>{let _=[...e];if(d){const I=d.toLowerCase();_=_.filter(C=>{var E,P;return((E=C.title)==null?void 0:E.toLowerCase().includes(I))||((P=C.subject)==null?void 0:P.toLowerCase().includes(I))})}p!=="all"&&(_=_.filter(I=>I.subject===p)),x!=="all"&&(_=_.filter(I=>{var C;return((C=I.semester)==null?void 0:C.toString())===x})),a(_)},S=async(_,I)=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.schoolId)||!window.confirm(`Ests seguro de eliminar la planeacin "${I}"?

Esta accin no se puede deshacer.`)))try{await Qm.eliminar(_,t.id,t.schoolId),n(P=>P.filter(R=>R.id!==_));const E=localStorage.getItem("savedPlans");if(E){const R=JSON.parse(E).filter(H=>H.id!==_);localStorage.setItem("savedPlans",JSON.stringify(R))}console.log(" Planeacin eliminada:",_)}catch(E){console.error("Error al eliminar planeacin:",E),alert("Error al eliminar la planeacin. Intenta de nuevo.")}},D=Array.from(new Set(e.map(_=>_.subject).filter(Boolean))),V=Array.from(new Set(e.map(_=>_.semester).filter(Boolean))).sort();return l?r.jsxs("div",{className:"text-center py-20",children:[r.jsx(nO,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando planeaciones..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-slate-300",children:[r.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400",children:r.jsx(_s,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"No hay planes guardados"}),r.jsx("p",{className:"text-slate-500 mt-2",children:"Tus planeaciones generadas aparecern aqu."})]}):i?r.jsxs("div",{className:"animate-in fade-in duration-300 pb-20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 no-print",children:[r.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-xl transition-colors font-bold text-sm",children:[r.jsx(yd,{className:"w-4 h-4"})," Volver al Historial"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>S(i.id,i.title),className:"flex items-center gap-2 px-4 py-2 bg-rose-50 text-rose-600 rounded-xl text-sm font-bold hover:bg-rose-100 transition-all",children:[r.jsx(is,{className:"w-4 h-4"})," Eliminar"]}),r.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 shadow-lg shadow-slate-200 transition-all",children:[r.jsx($h,{className:"w-4 h-4"})," Imprimir / PDF"]})]})]}),r.jsx("div",{className:"overflow-auto border border-slate-100 rounded-3xl shadow-xl print:shadow-none print:border-none print:rounded-none",children:r.jsx(P1,{ref:T,plan:i.content,teacherName:(j=(k=i.content)==null?void 0:k.meta)==null?void 0:j.teacher})})]}):r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(_s,{className:"w-6 h-6 text-indigo-600"}),"Tu Historial de Planeaciones",r.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",s.length,")"]})]})}),r.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por ttulo o materia...",value:d,onChange:_=>m(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gc,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filtros:"})]}),r.jsxs("select",{value:p,onChange:_=>g(_.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"Todas las materias"}),D.map(_=>r.jsx("option",{value:_,children:_},_))]}),r.jsxs("select",{value:x,onChange:_=>y(_.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"Todos los semestres"}),V.map(_=>r.jsxs("option",{value:_,children:["Semestre ",_]},_))]}),(d||p!=="all"||x!=="all")&&r.jsx("button",{onClick:()=>{m(""),g("all"),y("all")},className:"px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Limpiar filtros"})]})]}),s.length===0?r.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:r.jsx("p",{className:"text-slate-600",children:"No se encontraron planeaciones con los filtros seleccionados."})}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map((_,I)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 transition-all flex justify-between items-center group shadow-sm hover:shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-bold group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:s.length-I}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800",children:_.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:[r.jsx(it,{className:"w-3 h-3"})," ",_.subject]}),_.semester&&r.jsxs("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:[r.jsx(bv,{className:"w-3 h-3"})," Semestre ",_.semester]}),r.jsx("span",{className:"text-xs text-slate-400",children:new Date(_.createdAt).toLocaleDateString("es-MX")})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>S(_.id,_.title),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar planeacin",children:r.jsx(is,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>o(_),className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-100 transition-colors",children:["Ver Detalle ",r.jsx(ll,{className:"w-4 h-4"})]})]})]},_.id||I))})]})},TB="AIzaSyCRZ72g38NluiobYch6DbfIdDvhaaRPC6M",SB=new M1({apiKey:TB}),wB={async procesarDiagnosticoGrupal(t){const e="gemini-2.0-flash-lite-preview-02-05",n=t.map(a=>{var i,o,l,c,d,m;return{situacion:((i=a.datosNEM)==null?void 0:i.situacionFamiliar)||"Estudiante",estilo:((o=a.datosNEM)==null?void 0:o.estiloAprendizaje)||"No definido",promedio:((l=a.datosAdministrativos)==null?void 0:l.promedioSecundaria)||0,barreras:((c=a.datosNEM)==null?void 0:c.barrerasAprendizaje)||[],internet:(d=a.datosNEM)!=null&&d.accesoInternet?"S":"No",intereses:((m=a.datosNEM)==null?void 0:m.intereses)||[]}}),s=`
      Analiza los siguientes ${t.length} perfiles de alumnos y genera un Diagnstico Socioeducativo Grupal para el Programa de Mejora Continua (PMC) y el Programa Aula-Escuela-Comunidad (PAEC).

      DATOS DE LOS ALUMNOS (Muestra aleatoria):
      ${JSON.stringify(n.slice(0,50))} 
      (Nota: Si hay ms de 50, generaliza basado en esta muestra).

      Genera un JSON con la siguiente estructura exacta:
      {
        "promedioGrupal": number (promedio general calculado con 1 decimal),
        "perfilAprendizaje": {
           "estilosDominantes": string[] (ej. ["Visual", "Kinestsico"]),
           "ganchosInteres": string[] (ej. ["Tecnologa", "Ftbol"]),
           "recomendacionesDidacticas": string[] (3 estrategias concretas para este grupo)
        },
        "alertasAbandono": [
           { "alumnoId": "ID_X", "nombreAlumno": "Nombre (Inventado para proteger privacidad en este demo o usar ID)", "nivelRiesgo": "Alto" | "Medio", "factoresRiesgo": string[], "recomendaciones": string[] }
        ] (Identifica 3-5 casos hipotticos en riesgo basado en bajos promedios o situacin laboral),
        "problemaPAEC": {
           "problema": string (Problema central detectado ej. "Desercin por falta de recursos"),
           "frecuencia": number (estimado de alumnos afectados),
           "porcentaje": number (porcentaje estimado)
        },
        "problemasSecundarios": [
           { "problema": string, "porcentaje": number }
        ],
        "metasPMC": string[] (3 objetivos prioritarios para el plan de mejora),
        "contextoDigital": {
           "porcentajeConectividad": number (0-100),
           "conInternet": number (conteo),
           "sinInternet": number (conteo)
        }
      }
    `;try{let i=(await SB.models.generateContent({model:e,contents:s,config:{responseMimeType:"application/json",responseSchema:{type:F.OBJECT,properties:{promedioGrupal:{type:F.NUMBER},perfilAprendizaje:{type:F.OBJECT,properties:{estilosDominantes:{type:F.ARRAY,items:{type:F.STRING}},ganchosInteres:{type:F.ARRAY,items:{type:F.STRING}},recomendacionesDidacticas:{type:F.ARRAY,items:{type:F.STRING}}}},alertasAbandono:{type:F.ARRAY,items:{type:F.OBJECT,properties:{alumnoId:{type:F.STRING},nombreAlumno:{type:F.STRING},nivelRiesgo:{type:F.STRING},factoresRiesgo:{type:F.ARRAY,items:{type:F.STRING}},recomendaciones:{type:F.ARRAY,items:{type:F.STRING}}}}},problemaPAEC:{type:F.OBJECT,properties:{problema:{type:F.STRING},frecuencia:{type:F.NUMBER},porcentaje:{type:F.NUMBER}}},problemasSecundarios:{type:F.ARRAY,items:{type:F.OBJECT,properties:{problema:{type:F.STRING},porcentaje:{type:F.NUMBER}}}},metasPMC:{type:F.ARRAY,items:{type:F.STRING}},contextoDigital:{type:F.OBJECT,properties:{porcentajeConectividad:{type:F.NUMBER},conInternet:{type:F.NUMBER},sinInternet:{type:F.NUMBER}}}}}}})).text;if(!i)throw new Error("La respuesta de la IA lleg vaca.");i=i.replace(/```json/g,"").replace(/```/g,"").trim();try{return JSON.parse(i)}catch(o){throw console.error(" Error de sintaxis en JSON recibido de IA:",o),console.log(" Texto crudo recibido:",i),new Error("El diagnstico generado tiene un formato invlido. Intenta de nuevo.")}}catch(a){throw console.error("Error generando diagnstico IA:",a),new Error("No se pudo generar el diagnstico inteligente.")}}},Sp="formulario_alumno_progreso",AB=()=>{const e=(()=>{const d=localStorage.getItem(Sp);if(d)try{return JSON.parse(d)}catch{return null}return null})(),[n,s]=M.useState((e==null?void 0:e.datosAdmin)||{curp:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",genero:"Prefiero no decir",promedioSecundaria:8,tipoSecundaria:"General",sostenimiento:"Pblico"}),[a,i]=M.useState((e==null?void 0:e.redApoyo)||{nombreTutor:"",parentesco:"Padre",telefonoPadre:"",telefonoMadre:"",telefonoTutor:"",telefonoEmergencia:""}),[o,l]=M.useState((e==null?void 0:e.datosNEM)||{tipoFamilia:"Nuclear",gradoEstudioPadre:"Secundaria",gradoEstudioMadre:"Secundaria",ocupacionPadre:"Obrero",ocupacionMadre:"Hogar",situacionLaboral:"Solo estudia",tipoVivienda:"Propia",serviciosVivienda:{agua:!0,luz:!0,drenaje:!0,internet:!1,tvCable:!1,aireAcondicionado:!1},ingresosMensuales:"5001-10000",personasAportanIngreso:2,cuentaConBeca:!1,institucionSalud:"IMSS",enfermedadesCronicas:[],problemasComunitarios:[],deficienciasServicios:[],consumoSustanciasCuadra:[],consumoSustanciasCasa:[],frecuenciaDiscusionesComunidad:"Rara vez",intensidadPeleasComunidad:"Ninguna",frecuenciaDiscusionesFamilia:"Rara vez",intensidadPeleasFamilia:"Ninguna",tradicionesLocales:[],practicasDiscriminatorias:[],materiasPreferidas:[],actividadesInteres:[]});return M.useEffect(()=>{const d={datosAdmin:n,redApoyo:a,datosNEM:o,lastSaved:new Date().toISOString()};localStorage.setItem(Sp,JSON.stringify(d))},[n,a,o]),{datosAdmin:n,setDatosAdmin:s,redApoyo:a,setRedApoyo:i,datosNEM:o,setDatosNEM:l,limpiarProgreso:()=>{localStorage.removeItem(Sp)}}},IB=({datosAdmin:t,setDatosAdmin:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-indigo-100 p-3 rounded-xl",children:r.jsx(Uo,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Identidad y Trayectoria Acadmica"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin bsica del alumno"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CURP *"}),r.jsx("input",{type:"text",value:t.curp,onChange:n=>e({...t,curp:n.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"XXXX000000XXXXXX00",maxLength:18})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre(s) *"}),r.jsx("input",{type:"text",value:t.nombre,onChange:n=>e({...t,nombre:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Juan"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",value:t.apellidoPaterno,onChange:n=>e({...t,apellidoPaterno:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apellido Materno *"}),r.jsx("input",{type:"text",value:t.apellidoMaterno,onChange:n=>e({...t,apellidoMaterno:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Garca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gnero"}),r.jsxs("select",{value:t.genero,onChange:n=>e({...t,genero:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"Masculino",children:"Masculino (H)"}),r.jsx("option",{value:"Femenino",children:"Femenino (M)"}),r.jsx("option",{value:"Otro",children:"Otro"}),r.jsx("option",{value:"Prefiero no decir",children:"Prefiero no decir"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Promedio de Secundaria"}),r.jsx("input",{type:"number",step:"0.1",min:"5",max:"10",value:t.promedioSecundaria,onChange:n=>e({...t,promedioSecundaria:parseFloat(n.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Secundaria"}),r.jsxs("select",{value:t.tipoSecundaria,onChange:n=>e({...t,tipoSecundaria:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Tcnica",children:"Tcnica"}),r.jsx("option",{value:"Telesecundaria",children:"Telesecundaria"}),r.jsx("option",{value:"Particular",children:"Particular"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sostenimiento"}),r.jsxs("select",{value:t.sostenimiento,onChange:n=>e({...t,sostenimiento:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"Pblico",children:"Pblica"}),r.jsx("option",{value:"Privado",children:"Privada"})]})]})]})]}),jB=({datosNEM:t,setDatosNEM:e,redApoyo:n,setRedApoyo:s})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:r.jsx(Ke,{className:"w-6 h-6 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Estructura Familiar y Red de Apoyo"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin del entorno familiar"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Familia"}),r.jsxs("select",{value:t.tipoFamilia,onChange:a=>e({...t,tipoFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[r.jsx("option",{value:"Nuclear",children:"Nuclear (Padres e hijos)"}),r.jsx("option",{value:"Extensa",children:"Extensa (Con abuelos, tos, etc.)"}),r.jsx("option",{value:"Monoparental",children:"Monoparental (Un solo padre)"}),r.jsx("option",{value:"Compuesta",children:"Compuesta (Familias mixtas)"}),r.jsx("option",{value:"Homoparental",children:"Homoparental"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(xO,{className:"w-5 h-5 text-emerald-600"}),r.jsx("h4",{className:"font-semibold text-slate-800",children:"Red de Apoyo y Contactos"})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre del Tutor Responsable"}),r.jsx("input",{type:"text",value:n.nombreTutor,onChange:a=>s({...n,nombreTutor:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Nombre completo del tutor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Parentesco del Tutor"}),r.jsxs("select",{value:n.parentesco,onChange:a=>s({...n,parentesco:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[r.jsx("option",{value:"Padre",children:"Padre"}),r.jsx("option",{value:"Madre",children:"Madre"}),r.jsx("option",{value:"Hermano",children:"Hermano/a"}),r.jsx("option",{value:"To",children:"To/a"}),r.jsx("option",{value:"Abuelo",children:"Abuelo/a"}),r.jsx("option",{value:"Otro",children:"Otro"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono del Padre"}),r.jsx("input",{type:"tel",value:n.telefonoPadre,onChange:a=>s({...n,telefonoPadre:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono de la Madre"}),r.jsx("input",{type:"tel",value:n.telefonoMadre,onChange:a=>s({...n,telefonoMadre:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono del Tutor"}),r.jsx("input",{type:"tel",value:n.telefonoTutor,onChange:a=>s({...n,telefonoTutor:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono de Emergencia"}),r.jsx("input",{type:"tel",value:n.telefonoEmergencia,onChange:a=>s({...n,telefonoEmergencia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]})]})]}),RB=({datosNEM:t,setDatosNEM:e})=>{var n;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:r.jsx(RU,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Capital Socioeconmico y Bienestar"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin econmica y de salud"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Nivel Educativo de los Padres"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escolaridad del Padre"}),r.jsxs("select",{value:t.gradoEstudioPadre,onChange:s=>e({...t,gradoEstudioPadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Sin estudios",children:"Sin estudios"}),r.jsx("option",{value:"Primaria",children:"Primaria"}),r.jsx("option",{value:"Secundaria",children:"Secundaria"}),r.jsx("option",{value:"Preparatoria",children:"Preparatoria"}),r.jsx("option",{value:"Licenciatura",children:"Licenciatura"}),r.jsx("option",{value:"Posgrado",children:"Posgrado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escolaridad de la Madre"}),r.jsxs("select",{value:t.gradoEstudioMadre,onChange:s=>e({...t,gradoEstudioMadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Sin estudios",children:"Sin estudios"}),r.jsx("option",{value:"Primaria",children:"Primaria"}),r.jsx("option",{value:"Secundaria",children:"Secundaria"}),r.jsx("option",{value:"Preparatoria",children:"Preparatoria"}),r.jsx("option",{value:"Licenciatura",children:"Licenciatura"}),r.jsx("option",{value:"Posgrado",children:"Posgrado"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Situacin Laboral de los Padres"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ocupacin del Padre"}),r.jsxs("select",{value:t.ocupacionPadre,onChange:s=>e({...t,ocupacionPadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hogar",children:"Hogar"}),r.jsx("option",{value:"Profesionista",children:"Profesionista"}),r.jsx("option",{value:"Tcnico",children:"Tcnico"}),r.jsx("option",{value:"Obrero",children:"Obrero"}),r.jsx("option",{value:"Negocio propio",children:"Negocio propio"}),r.jsx("option",{value:"Comercio",children:"Comercio"}),r.jsx("option",{value:"Desempleado",children:"Desempleado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ocupacin de la Madre"}),r.jsxs("select",{value:t.ocupacionMadre,onChange:s=>e({...t,ocupacionMadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hogar",children:"Hogar"}),r.jsx("option",{value:"Profesionista",children:"Profesionista"}),r.jsx("option",{value:"Tcnico",children:"Tcnico"}),r.jsx("option",{value:"Obrero",children:"Obrero"}),r.jsx("option",{value:"Negocio propio",children:"Negocio propio"}),r.jsx("option",{value:"Comercio",children:"Comercio"}),r.jsx("option",{value:"Desempleado",children:"Desempleado"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Estabilidad del Alumno"]})}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Situacin Laboral"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["Solo estudia","Estudia y trabaja","Trabaja y estudia"].map(s=>r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-slate-200 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[r.jsx("input",{type:"radio",name:"situacionLaboral",value:s,checked:t.situacionLaboral===s,onChange:a=>e({...t,situacionLaboral:a.target.value}),className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s))})]}),t.situacionLaboral!=="Solo estudia"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Horas de trabajo por semana"}),r.jsx("input",{type:"number",min:"1",max:"60",value:t.horasTrabajoSemanal||"",onChange:s=>e({...t,horasTrabajoSemanal:parseInt(s.target.value)||void 0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 20"})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(PI,{className:"w-5 h-5 text-blue-600"}),"Vivienda y Servicios"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Vivienda"}),r.jsxs("select",{value:t.tipoVivienda,onChange:s=>e({...t,tipoVivienda:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Propia",children:"Propia"}),r.jsx("option",{value:"Rentada",children:"Rentada"}),r.jsx("option",{value:"Prestada",children:"Prestada"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Servicios Disponibles"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(t.serviciosVivienda||{}).map(s=>{var a;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((a=t.serviciosVivienda)==null?void 0:a[s])||!1,onChange:i=>e({...t,serviciosVivienda:{...t.serviciosVivienda,[s]:i.target.checked}}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-700 capitalize",children:s==="tvCable"?"TV Cable":s==="aireAcondicionado"?"Aire Acondicionado":s})]},s)})})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Economa Familiar"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ingresos Mensuales Familiares"}),r.jsxs("select",{value:t.ingresosMensuales,onChange:s=>e({...t,ingresosMensuales:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"0-5000",children:"$0 - $5,000"}),r.jsx("option",{value:"5001-10000",children:"$5,001 - $10,000"}),r.jsx("option",{value:"10001-20000",children:"$10,001 - $20,000"}),r.jsx("option",{value:"20001-40000",children:"$20,001 - $40,000"}),r.jsx("option",{value:"40001+",children:"Ms de $40,000"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Personas que aportan al ingreso"}),r.jsx("input",{type:"number",min:"0",max:"10",value:t.personasAportanIngreso||2,onChange:s=>e({...t,personasAportanIngreso:parseInt(s.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border border-slate-200 rounded-lg hover:bg-blue-50 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:t.cuentaConBeca||!1,onChange:s=>e({...t,cuentaConBeca:s.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"El alumno cuenta con beca"})]})}),t.cuentaConBeca&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Beca"}),r.jsx("input",{type:"text",value:t.tipoBeca||"",onChange:s=>e({...t,tipoBeca:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Benito Jurez, Jvenes Escribiendo el Futuro"})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(Wg,{className:"w-5 h-5 text-blue-600"}),"Salud"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Institucin de Seguridad Social"}),r.jsxs("select",{value:t.institucionSalud,onChange:s=>e({...t,institucionSalud:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"IMSS",children:"IMSS"}),r.jsx("option",{value:"ISSSTE",children:"ISSSTE"}),r.jsx("option",{value:"Bienestar",children:"Bienestar"}),r.jsx("option",{value:"Seguro privado",children:"Seguro privado"}),r.jsx("option",{value:"Ninguna",children:"Ninguna"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Enfermedades o condiciones crnicas (opcional)"}),r.jsx("textarea",{value:((n=t.enfermedadesCronicas)==null?void 0:n.join(", "))||"",onChange:s=>e({...t,enfermedadesCronicas:s.target.value?s.target.value.split(",").map(a=>a.trim()):[]}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Ej: Diabetes, Asma, Hipertensin (separadas por comas)"})]}),t.enfermedadesCronicas&&t.enfermedadesCronicas.length>0&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tratamiento"}),r.jsx("textarea",{value:t.tratamientoEnfermedades||"",onChange:s=>e({...t,tratamientoEnfermedades:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Describe el tratamiento que sigue"})]})]})]})},MB=({datosNEM:t,setDatosNEM:e})=>{var s;const n=(a,i)=>a.includes(i)?a.filter(o=>o!==i):[...a,i];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-amber-100 p-3 rounded-xl",children:r.jsx(Kh,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Contexto Comunitario y Social (PAEC)"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Problemticas del entorno y convivencia"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(Si,{className:"w-5 h-5 text-amber-600"}),"Problemtica Local (Selecciona los 3 principales)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Mala alimentacin","Contaminacin","Pandillerismo","Violencia","Adicciones","Robos","Falta de servicios pblicos","Desempleo","Inseguridad","Falta de espacios recreativos","Problemas de salud pblica"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.problemasComunitarios)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.problemasComunitarios)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,problemasComunitarios:n(t.problemasComunitarios||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Servicios Deficientes en la Comunidad"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Alumbrado pblico","Transporte pblico","reas verdes","Centros de salud","Rampas para discapacidad"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.deficienciasServicios)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.deficienciasServicios)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,deficienciasServicios:n(t.deficienciasServicios||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Si,{className:"w-5 h-5 text-red-600"}),"Factores de Riesgo Prximos"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Consumo de sustancias en la cuadra"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Alcohol","Tabaco","Drogas","Ninguno"].map(a=>{var i;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((i=t.consumoSustanciasCuadra)==null?void 0:i.includes(a))||!1,onChange:()=>e({...t,consumoSustanciasCuadra:n(t.consumoSustanciasCuadra||[],a)}),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Consumo de sustancias dentro de casa"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Alcohol","Tabaco","Drogas","Ninguno"].map(a=>{var i;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((i=t.consumoSustanciasCasa)==null?void 0:i.includes(a))||!1,onChange:()=>e({...t,consumoSustanciasCasa:n(t.consumoSustanciasCasa||[],a)}),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-amber-600"}),"Convivencia Social"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia de discusiones en la comunidad"}),r.jsxs("select",{value:t.frecuenciaDiscusionesComunidad,onChange:a=>e({...t,frecuenciaDiscusionesComunidad:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Nunca",children:"Nunca"}),r.jsx("option",{value:"Rara vez",children:"Rara vez"}),r.jsx("option",{value:"A veces",children:"A veces"}),r.jsx("option",{value:"Frecuente",children:"Frecuente"}),r.jsx("option",{value:"Muy frecuente",children:"Muy frecuente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Intensidad de peleas en la comunidad"}),r.jsxs("select",{value:t.intensidadPeleasComunidad,onChange:a=>e({...t,intensidadPeleasComunidad:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Ninguna",children:"Ninguna"}),r.jsx("option",{value:"Leve",children:"Leve"}),r.jsx("option",{value:"Moderada",children:"Moderada"}),r.jsx("option",{value:"Grave",children:"Grave"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia de discusiones en la familia"}),r.jsxs("select",{value:t.frecuenciaDiscusionesFamilia,onChange:a=>e({...t,frecuenciaDiscusionesFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Nunca",children:"Nunca"}),r.jsx("option",{value:"Rara vez",children:"Rara vez"}),r.jsx("option",{value:"A veces",children:"A veces"}),r.jsx("option",{value:"Frecuente",children:"Frecuente"}),r.jsx("option",{value:"Muy frecuente",children:"Muy frecuente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Intensidad de peleas en la familia"}),r.jsxs("select",{value:t.intensidadPeleasFamilia,onChange:a=>e({...t,intensidadPeleasFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Ninguna",children:"Ninguna"}),r.jsx("option",{value:"Leve",children:"Leve"}),r.jsx("option",{value:"Moderada",children:"Moderada"}),r.jsx("option",{value:"Grave",children:"Grave"})]})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-4",children:"Cultura y Valores"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tradiciones locales identificadas (opcional)"}),r.jsx("textarea",{value:((s=t.tradicionesLocales)==null?void 0:s.join(", "))||"",onChange:a=>e({...t,tradicionesLocales:a.target.value?a.target.value.split(",").map(i=>i.trim()):[]}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",rows:2,placeholder:"Ej: Da de Muertos, Fiestas patronales, Carnaval (separadas por comas)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Prcticas discriminatorias detectadas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Machismo","Homofobia","Racismo","Clasismo","Ninguna"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.practicasDiscriminatorias)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.practicasDiscriminatorias)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,practicasDiscriminatorias:n(t.practicasDiscriminatorias||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]})]})]})]})},PB=({datosNEM:t,setDatosNEM:e})=>{const n=(s,a)=>s.includes(a)?s.filter(i=>i!==a):[...s,a];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:r.jsx(Wg,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Perfil de Intereses y Motivacin"}),r.jsx("p",{className:"text-sm text-slate-500",children:'El "Hook" Pedaggico - Lo que te apasiona'})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(it,{className:"w-5 h-5 text-purple-600"}),"Afinidad Acadmica - Materias que ms te agradan"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Matemticas","Espaol","Ingls","Ciencias Naturales","Ciencias Sociales","Artes","Educacin Fsica","Tecnologa","Historia"].map(s=>{var a,i;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(a=t.materiasPreferidas)!=null&&a.includes(s)?"bg-purple-50 border-purple-300":"border-slate-200 hover:bg-purple-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((i=t.materiasPreferidas)==null?void 0:i.includes(s))||!1,onChange:()=>e({...t,materiasPreferidas:n(t.materiasPreferidas||[],s)}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s)})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Preferencias de Ocio - Actividades recreativas que disfrutas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Deportes","Msica","Arte y Dibujo","Tecnologa","Lectura","Videojuegos","Redes Sociales (TikTok/YouTube)","Voluntariado","Ciencia","Investigacin"].map(s=>{var a,i;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(a=t.actividadesInteres)!=null&&a.includes(s)?"bg-purple-50 border-purple-300":"border-slate-200 hover:bg-purple-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((i=t.actividadesInteres)==null?void 0:i.includes(s))||!1,onChange:()=>e({...t,actividadesInteres:n(t.actividadesInteres||[],s)}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s)})})]}),r.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:r.jsx(Wg,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Casi listo!"}),r.jsx("p",{className:"text-sm text-slate-600",children:'Gracias por compartir esta informacin. Nos ayudar a personalizar las clases segn tus intereses y necesidades. Al hacer clic en "Guardar Alumno", tu informacin se guardar de forma segura.'})]})]})})]})},F1=({onGuardar:t,onCancelar:e})=>{const[n,s]=M.useState(1),a=5,{datosAdmin:i,setDatosAdmin:o,redApoyo:l,setRedApoyo:c,datosNEM:d,setDatosNEM:m,limpiarProgreso:p}=AB(),g=()=>{const y={id:`ALU-${Date.now()}`,datosAdministrativos:i,datosNEM:{...d,redApoyo:l},fechaRegistro:new Date().toISOString()};t(y),p()},x=()=>{switch(n){case 1:return r.jsx(IB,{datosAdmin:i,setDatosAdmin:o});case 2:return r.jsx(jB,{datosNEM:d,setDatosNEM:m,redApoyo:l,setRedApoyo:c});case 3:return r.jsx(RB,{datosNEM:d,setDatosNEM:m});case 4:return r.jsx(MB,{datosNEM:d,setDatosNEM:m});case 5:return r.jsx(PB,{datosNEM:d,setDatosNEM:m});default:return null}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full my-8 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white rounded-t-2xl flex-shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Registro de Alumno"}),r.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["Paso ",n," de ",a]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"mt-4 bg-white/20 rounded-full h-2",children:r.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${n/a*100}%`}})}),r.jsx("div",{className:"mt-4 flex justify-between text-xs",children:["Identidad","Familia","Economa","Comunidad","Intereses"].map((y,T)=>r.jsxs("div",{className:`flex flex-col items-center ${n===T+1?"text-white":"text-indigo-200"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-1 ${n>T+1?"bg-white text-indigo-600":n===T+1?"bg-white text-indigo-600 ring-2 ring-white/50":"bg-white/20"}`,children:n>T+1?"":T+1}),r.jsx("span",{className:"hidden md:block",children:y})]},y))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x()}),r.jsxs("div",{className:"border-t border-slate-200 p-6 flex justify-between items-center flex-shrink-0 bg-slate-50",children:[r.jsx("button",{onClick:()=>s(Math.max(1,n-1)),disabled:n===1,className:"px-6 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:" Anterior"}),r.jsxs("div",{className:"text-sm text-slate-500",children:[n<a&&"Tu progreso se guarda automticamente",n===a&&"ltimo paso! Revisa y guarda"]}),n<a?r.jsx("button",{onClick:()=>s(n+1),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Siguiente "}):r.jsxs("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg hover:from-emerald-700 hover:to-green-700 transition-all flex items-center gap-2 font-semibold shadow-lg",children:[r.jsx(Di,{className:"w-5 h-5"}),"Guardar Alumno"]})]})]})})},fu="alumnos";class DB{async guardarAlumno(e){try{const n={...e,fechaRegistro:Pe.now().toDate().toISOString()};return(await ss(ue(J,fu),n)).id}catch(n){throw console.error("Error al guardar alumno:",n),new Error("No se pudo guardar el alumno en Firebase")}}async obtenerAlumnos(){try{const e=Ye(ue(J,fu),Us("fechaRegistro","desc")),n=await Me(e),s=[];return n.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(e){throw console.error("Error al obtener alumnos:",e),new Error("No se pudieron obtener los alumnos de Firebase")}}async actualizarAlumno(e,n){try{const s=re(J,fu,e);await bt(s,n)}catch(s){throw console.error("Error al actualizar alumno:",s),new Error("No se pudo actualizar el alumno en Firebase")}}async eliminarAlumno(e){try{await bs(re(J,fu,e))}catch(n){throw console.error("Error al eliminar alumno:",n),new Error("No se pudo eliminar el alumno de Firebase")}}async sincronizarDesdeLocalStorage(){try{const e=localStorage.getItem("alumnos");if(!e)return;const n=JSON.parse(e);for(const s of n)await this.guardarAlumno({datosAdministrativos:s.datosAdministrativos,datosNEM:s.datosNEM,fechaRegistro:s.fechaRegistro});console.log(` ${n.length} alumnos sincronizados a Firebase`)}catch(e){throw console.error("Error al sincronizar alumnos:",e),new Error("No se pudieron sincronizar los alumnos")}}}const g0=new DB,kB=()=>{var A,b,N,S,D,V,k,j,_,I,C,E,P,R,H,O,q,Z;const[t,e]=M.useState([]),[n,s]=M.useState(null),[a,i]=M.useState(!1),[o,l]=M.useState(!0),[c,d]=M.useState(!1),[m,p]=M.useState(!1);M.useEffect(()=>{g()},[]);const g=async()=>{l(!0);try{console.log(" Iniciando carga de alumnos desde Firebase (forzado)...");const G=await g0.obtenerAlumnos();G.length>0?(e(G),console.log(` XITO: Se cargaron ${G.length} alumnos reales de la base de datos.`)):(console.warn(" La coleccin de alumnos en Firebase est vaca."),e([]))}catch(G){console.error(" CRTICO: Error al conectar con Firebase:",G),alert("Error de conexin con la base de datos de alumnos.")}finally{l(!1)}},x=async G=>{try{await g0.guardarAlumno(G),console.log(" Alumno guardado en Firebase"),await g(),d(!1)}catch(ee){console.error(" Error al guardar alumno:",ee),alert("Hubo un error al guardar el alumno. Por favor intenta de nuevo.")}},y=async()=>{if(t.length===0){alert("Necesitas al menos un alumno registrado para generar el diagnstico");return}i(!0);try{const G=await wB.procesarDiagnosticoGrupal(t);s(G),console.log("Diagnstico generado:",G)}catch(G){console.error("Error al generar diagnstico:",G),alert("Hubo un error al generar el diagnstico. Verifica tu API Key.")}finally{i(!1)}},T=G=>{switch(G){case"Crtico":return"bg-red-100 text-red-800 border-red-200";case"Alto":return"bg-orange-100 text-orange-800 border-orange-200";case"Medio":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}};return m?r.jsx(k1,{onClose:()=>p(!1),diagnostico:n}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Diagnstico Socioeducativo"}),r.jsx("p",{className:"text-indigo-100",children:"Mdulo Raz - Anlisis inteligente del contexto del alumno para PAEC y PMC"}),r.jsxs("div",{className:"mt-6 flex gap-4",children:[r.jsxs("button",{onClick:()=>d(!0),className:"bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[r.jsx(Fn,{className:"w-5 h-5"}),"Registrar Alumno"]}),r.jsxs("button",{onClick:y,disabled:a||t.length===0,className:"bg-indigo-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-900 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(_s,{className:"w-5 h-5"}),a?"Procesando...":"Generar Diagnstico"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:r.jsx(Ke,{className:"w-6 h-6 text-blue-600"})}),r.jsx("div",{children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-400",children:"..."}),r.jsx("div",{className:"text-sm text-slate-500",children:"Cargando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:t.length}),r.jsx("div",{className:"text-sm text-slate-500",children:"Alumnos Registrados"})]})})]})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:r.jsx(ps,{className:"w-6 h-6 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:n.promedioGrupal}),r.jsx("div",{className:"text-sm text-slate-500",children:"Promedio Grupal"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-amber-100 p-3 rounded-xl",children:r.jsx(Si,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:((A=n.alertasAbandono)==null?void 0:A.length)||0}),r.jsx("div",{className:"text-sm text-slate-500",children:"Alertas de Riesgo"})]})]})}),n.contextoDigital&&r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:r.jsx(t0,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[n.contextoDigital.porcentajeConectividad||0,"%"]}),r.jsx("div",{className:"text-sm text-slate-500",children:"Con Internet"})]})]})})]})]}),n&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Wn,{className:"w-6 h-6 text-indigo-600"}),"Perfil de Aprendizaje Grupal"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Estilos Dominantes"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(N=(b=n.perfilAprendizaje)==null?void 0:b.estilosDominantes)==null?void 0:N.map((G,ee)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm",children:G},ee))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Ganchos de Inters"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(D=(S=n.perfilAprendizaje)==null?void 0:S.ganchosInteres)==null?void 0:D.map((G,ee)=>r.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:G},ee))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Recomendaciones Didcticas"}),r.jsx("ul",{className:"space-y-2",children:(k=(V=n.perfilAprendizaje)==null?void 0:V.recomendacionesDidacticas)==null?void 0:k.map((G,ee)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[r.jsx("span",{className:"text-indigo-600 font-bold",children:""}),G]},ee))})]})]})]}),n.alertasAbandono&&n.alertasAbandono.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Si,{className:"w-6 h-6 text-amber-600"}),"Semforo de Abandono Escolar"]}),r.jsx("div",{className:"space-y-3",children:n.alertasAbandono.map((G,ee)=>{var de,Ie;return r.jsxs("div",{className:`p-4 rounded-xl border ${T(G.nivelRiesgo)}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:G.nombreAlumno}),r.jsxs("p",{className:"text-xs opacity-75",children:["ID: ",G.alumnoId]})]}),r.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold",children:["Riesgo ",G.nivelRiesgo]})]}),r.jsxs("div",{className:"text-sm mb-2",children:[r.jsx("strong",{children:"Factores:"})," ",(de=G.factoresRiesgo)==null?void 0:de.join(", ")]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Recomendaciones:"}),r.jsx("ul",{className:"mt-1 space-y-1",children:(Ie=G.recomendaciones)==null?void 0:Ie.map((nt,ot)=>r.jsxs("li",{children:[" ",nt]},ot))})]})]},ee)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Problema PAEC Prioritario"}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[r.jsx("div",{className:"text-3xl font-bold text-amber-900 mb-2",children:((j=n.problemaPAEC)==null?void 0:j.problema)||"No detectado"}),r.jsxs("div",{className:"text-sm text-amber-700",children:["Reportado por ",((_=n.problemaPAEC)==null?void 0:_.frecuencia)||0," alumnos (",((I=n.problemaPAEC)==null?void 0:I.porcentaje)||0,"%)"]})]}),((C=n.problemasSecundarios)==null?void 0:C.length)>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2 text-sm",children:"Problemas Secundarios"}),r.jsx("div",{className:"space-y-2",children:(E=n.problemasSecundarios)==null?void 0:E.map((G,ee)=>r.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[r.jsx("span",{children:G.problema}),r.jsxs("span",{className:"font-semibold",children:[G.porcentaje,"%"]})]},ee))})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Metas PMC Sugeridas"}),r.jsx("ul",{className:"space-y-3",children:(P=n.metasPMC)==null?void 0:P.map((G,ee)=>r.jsxs("li",{className:"flex items-start gap-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[r.jsx("span",{className:"bg-emerald-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:ee+1}),r.jsx("span",{className:"text-sm text-slate-700",children:G})]},ee))})]})]}),n.contextoDigital&&r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Contexto Digital del Grupo"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(t0,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"font-semibold text-green-900",children:"Con Internet"})]}),r.jsx("div",{className:"text-3xl font-bold text-green-900",children:((R=n.contextoDigital)==null?void 0:R.conInternet)||0}),r.jsxs("div",{className:"text-sm text-green-700",children:["alumnos (",((H=n.contextoDigital)==null?void 0:H.porcentajeConectividad)||0,"%)"]})]}),r.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(JO,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"font-semibold text-red-900",children:"Sin Internet"})]}),r.jsx("div",{className:"text-3xl font-bold text-red-900",children:((O=n.contextoDigital)==null?void 0:O.sinInternet)||0}),r.jsxs("div",{className:"text-sm text-red-700",children:["alumnos (",100-(((q=n.contextoDigital)==null?void 0:q.porcentajeConectividad)||0),"%)"]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[r.jsx("div",{className:"font-semibold text-blue-900 mb-2",children:"Recomendacin"}),r.jsx("div",{className:"text-sm text-blue-700",children:(((Z=n.contextoDigital)==null?void 0:Z.porcentajeConectividad)||0)>=70?"Puedes usar actividades digitales con alternativas offline":"Prioriza actividades presenciales y sin conexin"})]})]})]})]}),c&&r.jsx(F1,{onGuardar:x,onCancelar:()=>d(!1)})]})},go=({activeView:t,onNavigate:e})=>{const{logout:n,user:s}=ut(),a=[{id:"dashboard",label:"Dashboard",icon:fO},{id:"guia-curricular",label:"Gua Curricular",icon:it},{id:"herramientas",label:"Herramientas",icon:aa},{id:"context",label:"Contexto Escolar",icon:_v},{id:"diagnostico",label:"Diagnstico",icon:Ke},{id:"generator",label:"Nueva Planeacin",icon:RI},{id:"plans",label:"Historial",icon:YU},{id:"pmc",label:"PMC Directivo",icon:ps},{id:"paec",label:"Comit PAEC",icon:mO}];return(s==null?void 0:s.rol)==="superadmin"&&(a.push({id:"admin-asignacion",label:"Asignar Materias",icon:it}),a.push({id:"admin-alumnos",label:"Gestin de Alumnos",icon:Ke})),r.jsxs("aside",{className:"w-64 bg-indigo-900 text-white flex-shrink-0 flex flex-col hidden md:flex h-screen sticky top-0",children:[r.jsxs("div",{className:"p-6 border-b border-indigo-800",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(as,{className:"w-8 h-8 text-indigo-300"}),r.jsx("h1",{className:"font-bold text-xl tracking-tight",children:"EduPlan MX"})]}),r.jsx("p",{className:"text-xs text-indigo-300 mt-2 uppercase font-semibold",children:"Bachillerato Oficial"})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto",children:a.map(i=>{const o=i.icon,l=t===i.id;return r.jsxs("button",{onClick:()=>e(i.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${l?"bg-indigo-800 text-white shadow-lg shadow-indigo-900/50":"hover:bg-indigo-800/50 text-indigo-100"}`,children:[r.jsx(o,{className:`w-5 h-5 ${l?"text-indigo-300":""}`}),r.jsx("span",{className:"font-medium",children:i.label})]},i.id)})}),r.jsxs("div",{className:"p-4 border-t border-indigo-800",children:[r.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-500/10 text-indigo-200 hover:text-red-200 transition-colors",children:[r.jsx(Yh,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Cerrar Sesin"})]}),r.jsx("div",{className:"mt-4 text-xs text-indigo-400 text-center",children:"v1.0.0 - Hecho para Mxico"})]})]})},qi="materias";class LB{async obtenerTodas(){try{const e=ue(J,qi),n=Ye(e,Us("nombre","asc"));return(await Me(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error al obtener materias:",e),new Error("Error al obtener materias")}}async obtenerPorGrado(e){try{const n=ue(J,qi),s=Ye(n,et("grado","==",e),et("activa","==",!0),Us("nombre","asc"));return(await Me(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener materias por grado:",n),new Error("Error al obtener materias por grado")}}async obtenerPorId(e){try{const n=await Vn(re(J,qi,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error al obtener materia:",n),new Error("Error al obtener materia")}}async crear(e,n){try{const s={...e,activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:n};return{id:(await ss(ue(J,qi),s)).id,...s}}catch(s){throw console.error("Error al crear materia:",s),new Error("Error al crear materia")}}async actualizar(e,n){try{await bt(re(J,qi,e),n)}catch(s){throw console.error("Error al actualizar materia:",s),new Error("Error al actualizar materia")}}async cambiarEstado(e,n){try{await bt(re(J,qi,e),{activa:n})}catch(s){throw console.error("Error al cambiar estado:",s),new Error("Error al cambiar estado")}}async eliminar(e){try{await bs(re(J,qi,e))}catch(n){throw console.error("Error al eliminar materia:",n),new Error("Error al eliminar materia")}}async obtenerEstadisticas(){try{const e=await this.obtenerTodas();return{total:e.length,activas:e.filter(n=>n.activa).length,inactivas:e.filter(n=>!n.activa).length,porGrado:{primero:e.filter(n=>n.grado===1).length,segundo:e.filter(n=>n.grado===2).length,tercero:e.filter(n=>n.grado===3).length},totalHoras:e.reduce((n,s)=>n+s.horasSemanales,0),totalUnidades:e.reduce((n,s)=>n+s.unidades.length,0)}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("Error al obtener estadsticas")}}async buscar(e){try{const n=await this.obtenerTodas(),s=e.toLowerCase();return n.filter(a=>a.nombre.toLowerCase().includes(s)||a.clave.toLowerCase().includes(s))}catch(n){throw console.error("Error al buscar materias:",n),new Error("Error al buscar materias")}}async obtenerResumen(e){try{const n=await this.obtenerPorId(e);return n?{id:n.id,nombre:n.nombre,clave:n.clave,grado:n.grado,horasSemanales:n.horasSemanales,totalHoras:n.totalHoras,totalUnidades:n.unidades.length,totalTemas:n.unidades.reduce((s,a)=>s+a.temas.length,0),activa:n.activa}:null}catch(n){throw console.error("Error al obtener resumen:",n),new Error("Error al obtener resumen")}}}const Dv=new LB,VB=()=>{const{user:t}=ut(),[e,n]=M.useState([]),[s,a]=M.useState([]),[i,o]=M.useState([]),[l,c]=M.useState(""),[d,m]=M.useState(""),[p,g]=M.useState("A"),[x,y]=M.useState("2025-2026"),[T,A]=M.useState(!0),[b,N]=M.useState(!1),[S,D]=M.useState(null),[V,k]=M.useState(null);M.useEffect(()=>{(async()=>{try{const I=ue(J,"usuarios"),C=Ye(I,et("rol","==","maestro")),P=(await Me(C)).docs.map(q=>q.data());n(P);const R=await Dv.obtenerTodas();a(R);const H=ue(J,"asignaciones"),O=EI(H,q=>{const Z=q.docs.map(G=>({id:G.id,...G.data()}));o(Z),A(!1)});return()=>O()}catch(I){console.error("Error cargando datos:",I),D("Error al cargar los catlogos"),A(!1)}})()},[]);const j=async()=>{if(!l||!d||!p){D("Por favor completa todos los campos");return}N(!0),D(null),k(null);try{const _=e.find(P=>P.id===l),I=s.find(P=>P.id===d);if(!_||!I)throw new Error("Datos invlidos");if(i.find(P=>P.maestroId===l&&P.materiaId===d&&P.grupo===p&&P.cicloEscolar===x)){D("Esta asignacin ya existe"),N(!1);return}const E={maestroId:l,maestroNombre:`${_.nombre} ${_.apellidoPaterno}`,materiaId:d,materiaNombre:I.nombre,grupo:p,cicloEscolar:x,fechaAsignacion:new Date().toISOString(),activa:!0,creadoPor:(t==null?void 0:t.id)||"admin"};await ss(ue(J,"asignaciones"),E),k("Materia asignada correctamente"),m("")}catch(_){console.error("Error al asignar:",_),D(_.message||"Error al guardar la asignacin")}finally{N(!1)}};return T?r.jsx("div",{className:"p-8 text-center",children:"Cargando mdulo de asignaciones..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"mb-8",children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-8 h-8 text-indigo-600"}),"Asignacin de Carga Acadmica"]}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Asigna las materias del MCCEMS a los docentes para el ciclo escolar."})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(Fc,{className:"w-5 h-5 text-indigo-500"}),"Nueva Asignacin"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Docente"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:l,onChange:_=>c(_.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar docente..."}),e.map(_=>r.jsxs("option",{value:_.id,children:[_.nombre," ",_.apellidoPaterno," ",_.apellidoMaterno]},_.id))]})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Unidad de Aprendizaje Curricular (UAC)"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:_=>m(_.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar materia..."}),s.map(_=>r.jsxs("option",{value:_.id,children:["[",_.clave,"] ",_.nombre," (",_.horasSemanales," hrs)"]},_.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Grupo"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:_=>g(_.target.value),children:[r.jsx("option",{value:"A",children:"Grupo A"}),r.jsx("option",{value:"B",children:"Grupo B"}),r.jsx("option",{value:"C",children:"Grupo C"}),r.jsx("option",{value:"D",children:"Grupo D"}),r.jsx("option",{value:"E",children:"Grupo E"}),r.jsx("option",{value:"F",children:"Grupo F"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mr-4",children:[S&&r.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg text-sm",children:[r.jsx(Na,{className:"w-4 h-4"}),S]}),V&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-3 rounded-lg text-sm",children:[r.jsx(Ps,{className:"w-4 h-4"}),V]})]}),r.jsxs("button",{onClick:j,disabled:b,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-all font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-200",children:[b?r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):r.jsx(Di,{className:"w-5 h-5"}),"Asignar Materia"]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[r.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["Asignaciones Actuales (",x,")"]}),r.jsxs("span",{className:"text-xs font-medium text-slate-500 bg-slate-100 px-3 py-1 rounded-full",children:[i.length," registros"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-900 font-semibold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Docente"}),r.jsx("th",{className:"px-6 py-4",children:"Materia / UAC"}),r.jsx("th",{className:"px-6 py-4",children:"Grupo"}),r.jsx("th",{className:"px-6 py-4",children:"Ciclo"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map(_=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:_.maestroNombre}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(it,{className:"w-4 h-4 text-indigo-400"}),_.materiaNombre]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded-md font-bold",children:_.grupo})}),r.jsx("td",{className:"px-6 py-4",children:_.cicloEscolar}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("button",{className:"text-red-500 hover:text-red-700 text-xs font-medium",children:"Eliminar"})})]},_.id)),i.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:"No hay asignaciones registradas para este ciclo. Uses el formulario de arriba para comenzar."})})]})]})})]})]})},UB=()=>{const[t,e]=M.useState([]),[n,s]=M.useState(!0),[a,i]=M.useState("");M.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const c=ue(J,"alumnos"),m=(await Me(c)).docs.map(p=>({id:p.id,...p.data()}));e(m),console.log("Alumnos cargados:",m)}catch(c){console.error("Error cargando alumnos:",c)}finally{s(!1)}},l=t.filter(c=>{const d=a.toLowerCase(),m=`${c.nombre||""} ${c.apellidoPaterno||""} ${c.apellidoMaterno||""} ${c.apellido||""}`,p=c.matricula||c.id||"",g=c.email||"";return m.toLowerCase().includes(d)||p.toLowerCase().includes(d)||g.toLowerCase().includes(d)});return n?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando base de datos de alumnos..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-8 h-8 text-indigo-600"}),"Gestin de Alumnos"]}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Administra la base de datos de estudiantes matriculados."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{className:"bg-white text-indigo-600 border border-indigo-200 px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-indigo-50 transition-colors shadow-sm font-bold text-xs",onClick:async()=>{confirm("Generar 60 alumnos de prueba? Esto agregar datos a la base de datos real.")&&(s(!0),await D1(60),await o(),alert("60 Alumnos generados con xito!"))},children:[r.jsx(aa,{className:"w-4 h-4"}),"Generar 60 (Demo)"]}),r.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-colors shadow-sm",onClick:()=>alert("Funcin de agregar alumno pendiente de implementacin"),children:[r.jsx(RI,{className:"w-5 h-5"}),"Nuevo Alumno"]})]})]}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, matrcula o email...",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a,onChange:c=>i(c.target.value)})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-900 font-semibold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Estudiante"}),r.jsx("th",{className:"px-6 py-4",children:"Matrcula / ID"}),r.jsx("th",{className:"px-6 py-4",children:"Situacin"}),r.jsx("th",{className:"px-6 py-4",children:"Tipo Beca"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(c=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsxs("div",{className:"font-medium text-slate-900",children:[c.nombre," ",c.apellidoPaterno||c.apellido," ",c.apellidoMaterno]}),c.email&&r.jsx("div",{className:"text-xs text-slate-400",children:c.email})]}),r.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:c.matricula||c.id}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c.situacionLaboral==="Trabaja y estudia"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:c.situacionLaboral||"Estudiante"})}),r.jsx("td",{className:"px-6 py-4",children:c.tipoBeca?r.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs",children:c.tipoBeca}):r.jsx("span",{className:"text-slate-400 italic",children:"Sin beca"})}),r.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[r.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-indigo-600 transition-colors",title:"Editar",children:r.jsx(kI,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 hover:bg-red-50 rounded-lg text-slate-500 hover:text-red-600 transition-colors",title:"Eliminar",children:r.jsx(is,{className:"w-4 h-4"})})]})]},c.id)),l.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:a?"No se encontraron alumnos con esa bsqueda.":"No hay alumnos registrados."})})]})]})}),r.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/50 text-xs text-slate-500 flex justify-between items-center",children:[r.jsxs("span",{children:["Mostrando ",l.length," registros"]}),r.jsx("span",{children:"Coleccin: /alumnos"})]})]})]})},OB=({onClose:t})=>{const{user:e}=ut(),[n,s]=M.useState(!1),[a,i]=M.useState(!1),[o,l]=M.useState({nombre:(e==null?void 0:e.nombre)||"",apellidoPaterno:(e==null?void 0:e.apellidoPaterno)||"",apellidoMaterno:(e==null?void 0:e.apellidoMaterno)||"",puesto:(e==null?void 0:e.puesto)||"",materias:(e==null?void 0:e.materias)||[],grados:(e==null?void 0:e.grados)||[]}),c=async()=>{if(e!=null&&e.id)try{i(!0),await bt(re(J,"users",e.id),{...o,updatedAt:new Date().toISOString()}),alert(" Perfil actualizado correctamente"),s(!1),window.location.reload()}catch(m){console.error("Error al actualizar perfil:",m),alert(" Error al actualizar el perfil")}finally{i(!1)}},d=()=>{confirm(`Quieres volver a configurar tu perfil?

Esto te llevar al proceso de onboarding.`)&&e!=null&&e.id&&bt(re(J,"users",e.id),{onboardingCompleto:!1}).then(()=>{window.location.href="/onboarding"})};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Uo,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Mi Perfil"}),r.jsx("p",{className:"text-indigo-100 text-sm",children:e.email})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Uo,{className:"w-5 h-5 text-indigo-600"}),"Informacin Personal"]}),!n&&r.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors",children:[r.jsx(bd,{className:"w-4 h-4"}),"Editar"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre"}),n?r.jsx("input",{type:"text",value:o.nombre,onChange:m=>l({...o,nombre:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.nombre})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Paterno"}),n?r.jsx("input",{type:"text",value:o.apellidoPaterno,onChange:m=>l({...o,apellidoPaterno:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.apellidoPaterno})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Materno"}),n?r.jsx("input",{type:"text",value:o.apellidoMaterno,onChange:m=>l({...o,apellidoMaterno:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.apellidoMaterno||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Puesto"}),n?r.jsx("input",{type:"text",value:o.puesto,onChange:m=>l({...o,puesto:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Docente, Director, etc."}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.puesto||"No especificado"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-4",children:[r.jsx(jt,{className:"w-5 h-5 text-indigo-600"}),"Escuela"]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Nombre"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.schoolName||"No asignada"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Cdigo"}),r.jsx("p",{className:"text-slate-900 font-medium font-mono",children:e.schoolId||"No asignado"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Rol"}),r.jsx("p",{className:"text-slate-900 font-medium capitalize",children:e.rol})]})]}),!e.schoolId&&r.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx("p",{className:"text-amber-800 text-sm mb-2",children:" No tienes una escuela asignada. Completa el onboarding para configurar tu perfil."}),r.jsx("button",{onClick:d,className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors",children:"Completar Configuracin"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(it,{className:"w-5 h-5 text-indigo-600"}),"Materias"]}),e.materias&&e.materias.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:e.materias.map((m,p)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-sm font-medium",children:m},p))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No hay materias asignadas"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(as,{className:"w-5 h-5 text-indigo-600"}),"Semestres"]}),e.grados&&e.grados.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:e.grados.map((m,p)=>r.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:[m,""]},p))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No hay semestres asignados"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(Jh,{className:"w-5 h-5 text-indigo-600"}),"Correo Electrnico"]}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.email}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"El correo no se puede modificar"})]}),n&&r.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[r.jsxs("button",{onClick:c,disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[r.jsx(Di,{className:"w-5 h-5"}),a?"Guardando...":"Guardar Cambios"]}),r.jsx("button",{onClick:()=>s(!1),disabled:a,className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors disabled:opacity-50",children:"Cancelar"})]}),!n&&r.jsx("div",{className:"pt-4 border-t",children:r.jsx("button",{onClick:d,className:"w-full px-4 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Reconfigurar Perfil Completo"})})]})]})}):null},zB=({user:t})=>{const[e,n]=M.useState(!1);return r.jsxs(r.Fragment,{children:[e&&r.jsx(OB,{onClose:()=>n(!1)}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(jt,{className:"w-6 h-6 mr-3 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100",children:"Escuela"}),r.jsx("h2",{className:"text-2xl font-bold",children:t.schoolName||"Sin escuela asignada"})]})]}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(Uo,{className:"w-5 h-5 mr-3 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100",children:"Docente"}),r.jsxs("h3",{className:"text-xl font-semibold",children:[t.nombre," ",t.apellidoPaterno," ",t.apellidoMaterno]}),r.jsx("p",{className:"text-sm text-indigo-200",children:t.puesto||"Docente"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.materias&&t.materias.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(it,{className:"w-5 h-5 mr-2 mt-1 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100 mb-1",children:"Materias"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.materias.map((s,a)=>r.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:s},a))})]})]}),t.grados&&t.grados.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(as,{className:"w-5 h-5 mr-2 mt-1 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100 mb-1",children:"Semestres"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.grados.map((s,a)=>r.jsxs("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:[s,""]},a))})]})]})]})]}),r.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-center",children:[r.jsx("p",{className:"text-xs text-indigo-100 mb-1",children:"Rol"}),r.jsx("p",{className:"text-lg font-bold capitalize",children:t.rol})]}),r.jsxs("button",{onClick:()=>n(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg transition-colors text-sm font-medium",title:"Ver perfil",children:[r.jsx(_v,{className:"w-4 h-4"}),"Perfil"]})]})]})})]})},FB=({totalPlaneaciones:t,totalMaterias:e,totalSemestres:n,promedioSemanal:s=0})=>{const a=[{title:"Planeaciones",value:t,icon:_s,color:"bg-blue-500",textColor:"text-blue-600"},{title:"Materias",value:e,icon:it,color:"bg-green-500",textColor:"text-green-600"},{title:"Semestres",value:n,icon:as,color:"bg-purple-500",textColor:"text-purple-600"},{title:"Promedio Semanal",value:s.toFixed(1),icon:ps,color:"bg-orange-500",textColor:"text-orange-600"}];return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:a.map((i,o)=>{const l=i.icon;return r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:i.title}),r.jsx("p",{className:`text-3xl font-bold ${i.textColor}`,children:i.value})]}),r.jsx("div",{className:`${i.color} p-3 rounded-lg`,children:r.jsx(l,{className:"w-8 h-8 text-white"})})]})},o)})})},GB=({onNewPlaneacion:t,onViewPlaneaciones:e,onHerramientas:n,onContexto:s})=>{const a=[{title:"Nueva Planeacin",description:"Crear una nueva planeacin didctica",icon:Fn,color:"bg-indigo-600 hover:bg-indigo-700",onClick:t},{title:"Ver Planeaciones",description:"Consultar planeaciones guardadas",icon:_s,color:"bg-green-600 hover:bg-green-700",onClick:e},{title:"Herramientas",description:"Acceder a herramientas didcticas",icon:XO,color:"bg-purple-600 hover:bg-purple-700",onClick:n},{title:"Contexto Escolar",description:"Configurar contexto de la escuela",icon:_v,color:"bg-orange-600 hover:bg-orange-700",onClick:s}];return r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" Acciones Rpidas"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((i,o)=>{const l=i.icon;return r.jsxs("button",{onClick:i.onClick,className:`${i.color} text-white rounded-lg p-6 text-left transition-all transform hover:scale-105 shadow-md hover:shadow-lg`,children:[r.jsx(l,{className:"w-8 h-8 mb-3"}),r.jsx("h4",{className:"text-lg font-bold mb-1",children:i.title}),r.jsx("p",{className:"text-sm opacity-90",children:i.description})]},o)})})]})},qB=({planeaciones:t,onView:e,onViewAll:n,onCreate:s})=>t.length===0?r.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-8",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:""}),"Planeaciones Recientes"]}),r.jsxs("div",{className:"text-center py-10 bg-slate-50 rounded-2xl border border-dashed border-slate-300",children:[r.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-slate-300",children:r.jsx(_s,{className:"w-8 h-8"})}),r.jsx("p",{className:"text-slate-600 font-semibold text-lg",children:"An no has creado planeaciones"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1 max-w-xs mx-auto",children:"Comienza creando tu primera planeacin didctica alineada al MCCEMS."}),s&&r.jsxs("button",{onClick:s,className:"mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-indigo-100 flex items-center gap-2 mx-auto",children:[r.jsx(Fn,{className:"w-5 h-5"}),"Crear Nueva Planeacin"]})]})]}):r.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx("span",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:""}),"Planeaciones Recientes"]}),r.jsxs("button",{onClick:n,className:"text-indigo-600 hover:text-indigo-700 font-bold text-sm flex items-center gap-1 group",children:["Ver todas",r.jsx(ll,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),r.jsx("div",{className:"space-y-4",children:t.slice(0,5).map(a=>r.jsxs("div",{className:"group border border-slate-100 bg-slate-50/30 rounded-2xl p-4 hover:border-indigo-200 hover:bg-white hover:shadow-xl hover:shadow-indigo-50/50 transition-all cursor-pointer relative overflow-hidden",onClick:()=>e(a.id),children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg mr-3 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:r.jsx(it,{className:"w-4 h-4"})}),r.jsx("h4",{className:"font-bold text-slate-800 group-hover:text-indigo-900 transition-colors",children:a.titulo||a.materia})]}),r.jsxs("div",{className:"flex flex-wrap items-center text-xs text-slate-500 gap-4 ml-11",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(_s,{className:"w-3.5 h-3.5 text-slate-400"}),a.materia]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(as,{className:"w-3.5 h-3.5 text-slate-400"}),a.semestre," Semestre"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(bv,{className:"w-3.5 h-3.5 text-slate-400"}),new Date(a.fecha).toLocaleDateString("es-MX",{day:"numeric",month:"short",year:"numeric"})]})]})]}),r.jsx("button",{onClick:i=>{i.stopPropagation(),e(a.id)},className:"ml-4 p-3 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Ver detalles",children:r.jsx(MI,{className:"w-5 h-5"})})]})]},a.id))}),t.length>5&&r.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:r.jsxs("button",{onClick:n,className:"bg-slate-900 text-white px-8 py-3 rounded-2xl font-bold text-sm hover:bg-indigo-600 transition-all shadow-lg shadow-slate-200 flex items-center gap-2 mx-auto",children:["Gestionar todas las planeaciones",r.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-lg text-xs",children:t.length})]})})]}),BB=({onNavigate:t})=>{var p,g;const{user:e}=ut(),[n,s]=M.useState([]),[a,i]=M.useState(!1),[o,l]=M.useState({total:0,promedioSemanal:0});M.useEffect(()=>{e!=null&&e.id&&c()},[e==null?void 0:e.id,e==null?void 0:e.schoolId]);const c=async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.schoolId)){console.warn(" No se pueden cargar planeaciones: faltan IDs",{userId:e==null?void 0:e.id,schoolId:e==null?void 0:e.schoolId}),s([]),i(!1);return}try{i(!0),console.log(" Cargando planeaciones para:",{userId:e.id,schoolId:e.schoolId});const x=await Qm.getMias(e.id,e.schoolId);console.log(" Planeaciones recuperadas:",x.length);const y=x.map(b=>{let N=new Date().toISOString();return b.createdAt&&(typeof b.createdAt=="string"?N=b.createdAt:typeof b.createdAt=="object"&&"toDate"in b.createdAt&&(N=b.createdAt.toDate().toISOString())),{id:b.id,materia:b.subject,semestre:b.semester||1,fecha:N,titulo:b.title}});s(y);const T=x.length,A=d(x);l({total:T,promedioSemanal:A})}catch(x){console.error("Error al cargar planeaciones:",x);const y=localStorage.getItem("savedPlans");if(y){const T=JSON.parse(y);s(T),l({total:T.length,promedioSemanal:0})}}finally{i(!1)}},d=x=>{if(x.length===0)return 0;const y=x.map(N=>new Date(N.createdAt||N.fecha)),T=new Date(Math.min(...y.map(N=>N.getTime()))),b=Math.max(1,Math.ceil((new Date().getTime()-T.getTime())/(7*24*60*60*1e3)));return x.length/b},m=x=>{t("plans")};return e?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx(zB,{user:e}),r.jsx(FB,{totalPlaneaciones:o.total,totalMaterias:((p=e.materias)==null?void 0:p.length)||0,totalSemestres:((g=e.grados)==null?void 0:g.length)||0,promedioSemanal:o.promedioSemanal}),r.jsx(GB,{onNewPlaneacion:()=>t("generator"),onViewPlaneaciones:()=>t("plans"),onHerramientas:()=>t("herramientas"),onContexto:()=>t("context")}),a?r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(x=>r.jsx("div",{className:"h-20 bg-gray-100 rounded"},x))})]})}):r.jsx(qB,{planeaciones:n,onView:m,onViewAll:()=>t("plans"),onCreate:()=>t("generator")}),o.total===0&&!a&&r.jsxs("div",{className:"mt-6 bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-indigo-900 mb-2",children:"Bienvenido a EDUPLANMX! "}),r.jsx("p",{className:"text-indigo-700 mb-4",children:"Ests listo para comenzar a crear planeaciones didcticas personalizadas. Tu informacin ya est configurada y lista para usar."}),r.jsx("button",{onClick:()=>t("generator"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors",children:"Crear Mi Primera Planeacin"})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-lg text-gray-600",children:"Cargando..."})})})},G1=({readOnly:t=!1})=>{const{user:e}=ut(),[n,s]=M.useState(!1),[a,i]=M.useState(!1),[o,l]=M.useState(null),[c,d]=M.useState({abandonoEscolar:0,reprobacion:0,eficienciaTerminal:0,matriculaTotal:0}),[m,p]=M.useState({aulasConElectricidad:!1,aulasConInternet:!1,laboratorioComputacion:!1,instalacionesDeportivas:!1,fortalezas:[],areasOportunidad:[],descripcionGeneral:""}),[g,x]=M.useState(""),[y,T]=M.useState("");M.useEffect(()=>{e!=null&&e.schoolId&&A()},[e==null?void 0:e.schoolId]);const A=async()=>{if(e!=null&&e.schoolId){s(!0);try{const D=re(J,"pmc",e.schoolId),V=await Vn(D);if(V.exists()){const k=V.data();k.indicadores&&d(k.indicadores),k.infraestructura&&p(k.infraestructura)}}catch(D){console.error("Error al cargar datos:",D),l({type:"error",text:"Error al cargar la informacin."})}finally{s(!1)}}},b=async()=>{if(e!=null&&e.schoolId){i(!0),l(null);try{const D=re(J,"pmc",e.schoolId);await pr(D,{schoolId:e.schoolId,indicadores:c,infraestructura:m,updatedAt:new Date().toISOString()},{merge:!0}),l({type:"success",text:"Informacin actualizada correctamente."}),setTimeout(()=>l(null),3e3)}catch(D){console.error("Error al guardar:",D),l({type:"error",text:"Error al guardar los cambios."})}finally{i(!1)}}},N=(D,V,k)=>{V.trim()&&(p(j=>({...j,[D]:[...j[D],V.trim()]})),k(""))},S=(D,V)=>{p(k=>({...k,[D]:k[D].filter((j,_)=>_!==V)}))};return n?r.jsx("div",{className:"p-8 text-center",children:"Cargando indicadores..."}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Diagnstico Escolar (PMC)"}),r.jsx("p",{className:"text-slate-600",children:"Indicadores acadmicos e infraestructura del plantel"})]}),!t&&r.jsx("button",{onClick:b,disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors shadow-sm",children:a?"Guardando...":r.jsxs(r.Fragment,{children:[r.jsx(Di,{className:"w-4 h-4"}),"Guardar Cambios"]})})]}),o&&r.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-2 ${o.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[o.type==="success"?r.jsx(Ps,{className:"w-5 h-5"}):r.jsx(Na,{className:"w-5 h-5"}),o.text]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(ps,{className:"w-5 h-5 text-indigo-600"}),"Indicadores Acadmicos"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border border-red-100",children:[r.jsx("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"Abandon Escolar (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(UO,{className:"w-5 h-5 text-red-500"}),r.jsx("input",{type:"number",disabled:t,value:c.abandonoEscolar,onChange:D=>d({...c,abandonoEscolar:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-red-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100",children:[r.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-1",children:"Reprobacin (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:"w-5 h-5 text-orange-500"}),r.jsx("input",{type:"number",disabled:t,value:c.reprobacion,onChange:D=>d({...c,reprobacion:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-orange-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100",children:[r.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Eficiencia Terminal (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ps,{className:"w-5 h-5 text-green-500"}),r.jsx("input",{type:"number",disabled:t,value:c.eficienciaTerminal,onChange:D=>d({...c,eficienciaTerminal:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-green-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[r.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Matrcula Total"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-blue-500"}),r.jsx("input",{type:"number",disabled:t,value:c.matriculaTotal,onChange:D=>d({...c,matriculaTotal:parseInt(D.target.value)||0}),className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(jt,{className:"w-5 h-5 text-indigo-600"}),"Infraestructura y Equipamiento"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.aulasConElectricidad?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,aulasConElectricidad:!m.aulasConElectricidad}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ez,{className:`w-5 h-5 ${m.aulasConElectricidad?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.aulasConElectricidad?"text-indigo-900":"text-slate-600"}`,children:"Electricidad"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.aulasConElectricidad?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.aulasConElectricidad?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.aulasConInternet?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,aulasConInternet:!m.aulasConInternet}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(t0,{className:`w-5 h-5 ${m.aulasConInternet?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.aulasConInternet?"text-indigo-900":"text-slate-600"}`,children:"Internet"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.aulasConInternet?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.aulasConInternet?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.laboratorioComputacion?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,laboratorioComputacion:!m.laboratorioComputacion}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(dO,{className:`w-5 h-5 ${m.laboratorioComputacion?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.laboratorioComputacion?"text-indigo-900":"text-slate-600"}`,children:"Laboratorio de Cmputo"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.laboratorioComputacion?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.laboratorioComputacion?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.instalacionesDeportivas?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,instalacionesDeportivas:!m.instalacionesDeportivas}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(DU,{className:`w-5 h-5 ${m.instalacionesDeportivas?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.instalacionesDeportivas?"text-indigo-900":"text-slate-600"}`,children:"Instalaciones Deportivas"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.instalacionesDeportivas?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.instalacionesDeportivas?"translate-x-4":""}`})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex justify-between items-center",children:["Descripcin General y Diagnstico de Salud",r.jsx("span",{className:"text-xs font-normal text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full",children:"Requerido para PAEC"})]}),!t&&r.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-800",children:[r.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-blue-200 text-blue-800 w-5 h-5 flex items-center justify-center rounded-full text-xs",children:"i"}),"Gua para Alineacin con Rbrica PAEC 2025"]}),r.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-blue-700 opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Conectar datos con salud:"})," Relaciona los indicadores (abandono, reprobacin) con determinantes de salud (cansancio, alimentacin, estrs, trabajo)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Inters Genuino:"})," Menciona explcitamente inquietudes del alumnado (ej. ",r.jsx("em",{children:'"el estudiantado manifest preocupacin por..."'}),")."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Metodologa de Indagacin:"})," Cita los instrumentos usados (encuestas, observacin) y la gua metodolgica."]})]})]}),r.jsx("textarea",{disabled:t,className:"w-full border border-slate-300 rounded-xl p-4 h-48 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y text-slate-700 disabled:bg-slate-50 leading-relaxed",placeholder:`Ejemplo de redaccin ideal:

"El plantel atiende a 108 estudiantes en turno vespertino... condiciones que impactan en sus hbitos de sueo y alimentacin. Se observa cansancio y estrs relacionados con el abandono escolar.

El estudiantado expres preocupacin por la falta de opciones de comida saludable...

Este diagnstico se elabor a partir de encuestas breves y observacin directa, siguiendo la metodologa sugerida en el PAEC 2025..."`,value:m.descripcionGeneral,onChange:D=>p({...m,descripcionGeneral:D.target.value})}),r.jsx("p",{className:"text-xs text-slate-400 mt-2 text-right",children:"Esta descripcin fundamentar la problemtica seleccionada en el PAEC."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Principales Fortalezas"]}),r.jsx("div",{className:"space-y-2 mb-3",children:m.fortalezas.map((D,V)=>r.jsxs("div",{className:"flex justify-between items-center bg-green-50 text-green-800 px-3 py-2 rounded-lg text-sm border border-green-100",children:[r.jsx("span",{children:D}),!t&&r.jsx("button",{onClick:()=>S("fortalezas",V),className:"text-green-600 hover:text-green-800 font-bold ml-2",children:""})]},V))}),!t&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ej: Docentes comprometidos con la salud, Espacios verdes...",value:g,onChange:D=>x(D.target.value),onKeyDown:D=>D.key==="Enter"&&N("fortalezas",g,x)}),r.jsx("button",{onClick:()=>N("fortalezas",g,x),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-green-700",children:"Agregar"})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"reas de Oportunidad"]}),r.jsx("div",{className:"space-y-2 mb-3",children:m.areasOportunidad.map((D,V)=>r.jsxs("div",{className:"flex justify-between items-center bg-orange-50 text-orange-800 px-3 py-2 rounded-lg text-sm border border-orange-100",children:[r.jsx("span",{children:D}),!t&&r.jsx("button",{onClick:()=>S("areasOportunidad",V),className:"text-orange-600 hover:text-orange-800 font-bold ml-2",children:""})]},V))}),!t&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Alumnos solicitan mejores opciones alimenticias...",value:y,onChange:D=>T(D.target.value),onKeyDown:D=>D.key==="Enter"&&N("areasOportunidad",y,T)}),r.jsx("button",{onClick:()=>N("areasOportunidad",y,T),className:"bg-orange-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-orange-700",children:"Agregar"})]})]})]})]})]})},HB=()=>{const{user:t}=ut(),[e,n]=M.useState("diagnostico"),[s,a]=M.useState(null),[i,o]=M.useState(!1),[l,c]=M.useState([]);M.useEffect(()=>{t!=null&&t.schoolId&&d()},[t==null?void 0:t.schoolId]);const d=async()=>{if(t!=null&&t.schoolId){o(!0);try{const y=re(J,"pmc",t.schoolId),T=await Vn(y);if(T.exists()){const A=T.data();A.metas&&c(A.metas)}}catch(y){console.error("Error al cargar metas:",y)}finally{o(!1)}}},m=async()=>{if(t!=null&&t.schoolId)try{const y=re(J,"pmc",t.schoolId);await pr(y,{metas:l},{merge:!0});const T=new Date().toLocaleTimeString();a(T),alert("Metas guardadas correctamente en la nube ")}catch(y){console.error("Error al guardar metas:",y),alert("Error al guardar. Intenta de nuevo.")}},p=()=>{const y={id:Date.now().toString(),area:"Aprendizaje",description:"",actions:[],progress:0};c([...l,y])},g=(y,T,A)=>{c(l.map(b=>b.id===y?{...b,[T]:A}:b))},x=y=>{confirm("Ests seguro de eliminar esta meta?")&&c(l.filter(T=>T.id!==y))};return r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(ps,{className:"w-8 h-8 text-indigo-600"}),"Plan de Mejora Continua (PMC)"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Gestin del diagnstico y metas institucionales"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[s&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Guardado: ",s]}),r.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(Di,{className:"w-4 h-4"})," Guardar Metas"]})]})]}),r.jsxs("div",{className:"flex border-b border-slate-200",children:[r.jsx("button",{onClick:()=>n("diagnostico"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="diagnostico"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"1. Diagnstico Institucional"}),r.jsx("button",{onClick:()=>n("metas"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="metas"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"2. Metas y Acciones"}),r.jsx("button",{onClick:()=>n("seguimiento"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="seguimiento"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"3. Seguimiento"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-slate-200 shadow-sm",children:[e==="diagnostico"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx(G1,{readOnly:!0})}),e==="metas"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-sm font-bold text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(Fn,{className:"w-4 h-4"})," Agregar Nueva Meta"]})}),l.length===0?r.jsx("div",{className:"text-center py-12 text-slate-400",children:"No hay metas definidas. Comienza agregando una meta prioritaria."}):r.jsx("div",{className:"space-y-6",children:l.map((y,T)=>r.jsxs("div",{className:"border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-4",children:[r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"rea de Atencin"}),r.jsxs("select",{value:y.area,onChange:A=>g(y.id,"area",A.target.value),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium",children:[r.jsx("option",{value:"Aprendizaje",children:"Aprendizaje"}),r.jsx("option",{value:"Formacin Docente",children:"Formacin Docente"}),r.jsx("option",{value:"Infraestructura",children:"Infraestructura"}),r.jsx("option",{value:"Convivencia",children:"Convivencia Escolar"}),r.jsx("option",{value:"Vinculacin",children:"Vinculacin (PAEC)"})]})]}),r.jsxs("div",{className:"md:col-span-8",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Descripcin de la Meta"}),r.jsx("input",{type:"text",className:"w-full p-2 border border-slate-200 rounded-lg text-sm",placeholder:"Ej. Reducir la desercin en un 5%...",value:y.description,onChange:A=>g(y.id,"description",A.target.value)})]}),r.jsx("div",{className:"md:col-span-1 flex items-end justify-center",children:r.jsx("button",{onClick:()=>x(y.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:r.jsx(is,{className:"w-5 h-5"})})})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-end",children:r.jsx("button",{className:"text-xs font-bold text-indigo-600",children:"+ Gestionar Acciones y Responsables"})})]},y.id))})]}),e==="seguimiento"&&r.jsx("div",{className:"animate-in fade-in",children:l.length===0?r.jsx("div",{className:"text-center py-12 text-slate-500 italic",children:"Define metas primero para darles seguimiento."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-blue-800 text-sm mb-6",children:[r.jsx("strong",{children:"Panel de Control:"})," Actualiza el porcentaje de avance de cada meta trimestralmente."]}),l.map(y=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-slate-100 text-slate-600 uppercase mb-2 inline-block",children:y.area}),r.jsx("h3",{className:"font-bold text-slate-800",children:y.description||"Sin descripcin"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[y.progress||0,"%"]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Avance Global"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-500",style:{width:`${y.progress||0}%`}})}),r.jsx("div",{className:"flex items-center gap-4 mt-2",children:r.jsx("input",{type:"range",min:"0",max:"100",value:y.progress||0,onChange:T=>g(y.id,"progress",Number(T.target.value)),className:"w-full"})})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2",children:[r.jsx(PO,{className:"w-3 h-3"})," Evidencias Recientes"]}),r.jsx("div",{className:"text-sm text-slate-400 italic",children:"No hay evidencias cargadas para este periodo."}),r.jsx("button",{className:"mt-2 text-xs font-medium text-indigo-600 hover:underline",children:"+ Cargar Evidencia"})]})]},y.id))]})})]})]})},q1=({readOnly:t=!1})=>{var D,V,k,j,_,I;const{user:e}=ut(),[n,s]=M.useState([]),[a,i]=M.useState(!1),[o,l]=M.useState(!1),[c,d]=M.useState({titulo:"",descripcion:"",prioridad:"Media",causas:[],afectados:[],criterios:{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1}}),[m,p]=M.useState(""),[g,x]=M.useState("");M.useEffect(()=>{e!=null&&e.schoolId&&y()},[e==null?void 0:e.schoolId]);const y=async()=>{if(e!=null&&e.schoolId){i(!0);try{const C=re(J,"pmc",e.schoolId),E=await Vn(C);if(E.exists()){const P=E.data();P.paec&&s(P.paec)}}catch(C){console.error("Error al cargar PAEC:",C)}finally{i(!1)}}},T=async()=>{if(!(e!=null&&e.schoolId)||!c.titulo)return;const C={id:Math.random().toString(36).substr(2,9),titulo:c.titulo||"Sin ttulo",descripcion:c.descripcion||"",prioridad:c.prioridad,causas:c.causas||[],afectados:c.afectados||[],criterios:c.criterios||{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1},seleccionada:!1,fechaRegistro:new Date().toISOString()};try{const E=re(J,"pmc",e.schoolId);await pr(E,{paec:yv(C)},{merge:!0}),s([...n,C]),l(!1),d({titulo:"",descripcion:"",prioridad:"Media",causas:[],afectados:[],criterios:{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1}})}catch(E){console.error("Error al agregar problemtica:",E)}},A=async C=>{if(!(e!=null&&e.schoolId))return;const E=n.find(P=>P.id===C);if(E&&confirm("Ests seguro de eliminar esta problemtica?"))try{const P=re(J,"pmc",e.schoolId);await bt(P,{paec:TI(E)}),s(n.filter(R=>R.id!==C))}catch(P){console.error("Error al eliminar:",P)}},b=async C=>{if(!(e!=null&&e.schoolId))return;const E=n.map(P=>({...P,seleccionada:P.id===C}));s(E);try{const P=re(J,"pmc",e.schoolId);await bt(P,{paec:E})}catch(P){console.error("Error al actualizar prioridad:",P),y()}},N=(C,E,P)=>{E.trim()&&(d(R=>({...R,[C]:[...R[C]||[],E.trim()]})),P(""))},S=(C,E)=>{d(P=>({...P,[C]:(P[C]||[]).filter((R,H)=>H!==E)}))};return a?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando PAEC..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Programa Aula Escuela Comunidad (PAEC)"}),r.jsx("p",{className:"text-slate-600",children:"Diagnstico comunitario y seleccin de problemticas"})]}),!t&&r.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Nueva Problemtica"]})]}),o&&!t&&r.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 shadow-sm animate-in fade-in slide-in-from-top-4",children:[r.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Registrar Nueva Problemtica"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Problemtica Identificada"}),r.jsx("input",{type:"text",className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Contaminacin del ro local",value:c.titulo,onChange:C=>d({...c,titulo:C.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nivel de Impacto"}),r.jsxs("select",{className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",value:c.prioridad,onChange:C=>d({...c,prioridad:C.target.value}),children:[r.jsx("option",{value:"Alta",children:"Alta"}),r.jsx("option",{value:"Media",children:"Media"}),r.jsx("option",{value:"Baja",children:"Baja"})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Descripcin y Justificacin"}),r.jsx("span",{className:"text-xs text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full",children:"Formato Sugerido"})]}),r.jsxs("div",{className:"mb-3 bg-blue-50 border border-blue-100 rounded-lg p-3 text-xs text-blue-800",children:[r.jsx("h4",{className:"font-bold mb-1",children:"Estructura Recomendada para Rbrica PAEC:"}),r.jsxs("ul",{className:"list-disc pl-4 space-y-1 opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"1. El Problema (Precisin):"})," Qu pasa exactamente? (Conductas observables, riesgos de salud)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"2. El Contexto:"})," Cmo se ve esto en TU escuela? (Menciona el nombre del plantel y situaciones locales)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"3. La Indagacin:"})," Cmo te diste cuenta? (Observacin, encuestas, comentarios)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"4. La Propuesta:"})," Qu vamos a hacer para transformar esto? (Talleres, actividades formativas)."]})]})]}),r.jsx("textarea",{className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm h-48 resize-y focus:ring-2 focus:ring-indigo-500 leading-relaxed",placeholder:`Ejemplo de redaccin:

"Los alumnos buscan estar en buen estado fsico... sin embargo, no cuentan con orientacin profesional... (El Problema).

En el contexto del Bachillerato Gral. [Nombre]... se han identificado comentarios sobre presin esttica... (El Contexto).

Esta problemtica fue identificada a partir de observaciones en el aula y encuestas breves... (La Indagacin).

La propuesta consiste en desarrollar talleres y actividades que fortalezcan conocimientos y actitudes para el cuidado de la salud..." (La Propuesta).`,value:c.descripcion,onChange:C=>d({...c,descripcion:C.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Causas Principales"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-2 py-1 text-sm",placeholder:"Ej: Basura",value:m,onChange:C=>p(C.target.value),onKeyDown:C=>C.key==="Enter"&&N("causas",m,p)}),r.jsx("button",{onClick:()=>N("causas",m,p),className:"bg-slate-200 px-3 py-1 rounded text-sm hover:bg-slate-300",children:"+"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(D=c.causas)==null?void 0:D.map((C,E)=>r.jsxs("span",{className:"bg-white border border-slate-200 px-2 py-1 rounded text-xs flex items-center gap-1",children:[C," ",r.jsx("button",{onClick:()=>S("causas",E),className:"text-red-500 ml-1",children:""})]},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Poblacin Afectada"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-2 py-1 text-sm",placeholder:"Ej: Estudiantes",value:g,onChange:C=>x(C.target.value),onKeyDown:C=>C.key==="Enter"&&N("afectados",g,x)}),r.jsx("button",{onClick:()=>N("afectados",g,x),className:"bg-slate-200 px-3 py-1 rounded text-sm hover:bg-slate-300",children:"+"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(V=c.afectados)==null?void 0:V.map((C,E)=>r.jsxs("span",{className:"bg-white border border-slate-200 px-2 py-1 rounded text-xs flex items-center gap-1",children:[C," ",r.jsx("button",{onClick:()=>S("afectados",E),className:"text-red-500 ml-1",children:""})]},E))})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:[r.jsx("h4",{className:"text-sm font-semibold text-slate-800 mb-3",children:"Criterios de Viabilidad"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(k=c.criterios)==null?void 0:k.impactoSocial,onChange:C=>d({...c,criterios:{...c.criterios,impactoSocial:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Impacto Social Alto"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(j=c.criterios)==null?void 0:j.viabilidad,onChange:C=>d({...c,criterios:{...c.criterios,viabilidad:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Viabilidad Tcnica/Financiera"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(_=c.criterios)==null?void 0:_.interesEstudiantil,onChange:C=>d({...c,criterios:{...c.criterios,interesEstudiantil:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Inters del Estudiantado"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(I=c.criterios)==null?void 0:I.transversalidad,onChange:C=>d({...c,criterios:{...c.criterios,transversalidad:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Oportunidad de Transversalidad"]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancelar"}),r.jsx("button",{onClick:T,disabled:!c.titulo,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors font-medium",children:"Registrar Problemtica"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.length===0&&!o&&r.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[r.jsx(Wn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-medium text-slate-600",children:"No hay problemticas registradas"}),r.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Comienza registrando las necesidades de tu comunidad escolar"}),!t&&r.jsx("button",{onClick:()=>l(!0),className:"text-indigo-600 font-medium hover:underline",children:"Registrar ahora"})]}),n.map(C=>r.jsxs("div",{className:`bg-white rounded-xl border p-6 transition-all ${C.seleccionada?"border-green-500 shadow-md ring-1 ring-green-500":"border-slate-200 hover:shadow-md"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:C.titulo}),C.seleccionada&&r.jsxs("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1",children:[r.jsx(Hh,{className:"w-3 h-3"})," Prioridad del Ciclo"]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-bold ${C.prioridad==="Alta"?"bg-red-100 text-red-700":C.prioridad==="Media"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:C.prioridad})]}),r.jsx("p",{className:"text-slate-600 text-sm",children:C.descripcion})]}),!t&&r.jsxs("div",{className:"flex items-center gap-2",children:[!C.seleccionada&&r.jsx("button",{onClick:()=>b(C.id),className:"text-sm text-slate-500 hover:text-green-600 px-3 py-1 rounded hover:bg-green-50 transition-colors",title:"Seleccionar como prioridad",children:"Seleccionar"}),r.jsx("button",{onClick:()=>A(C.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(is,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[r.jsx(Si,{className:"w-3 h-3"})," Causas:"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.causas.map((E,P)=>r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs",children:E},P))})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[r.jsx(Ke,{className:"w-3 h-3"})," Afectados:"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.afectados.map((E,P)=>r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs",children:E},P))})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[r.jsx("span",{className:"font-semibold text-slate-700 block mb-2 text-xs uppercase tracking-wider",children:"Criterios Cumplidos:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.impactoSocial?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Ql,{className:"w-3 h-3"})," Impacto Social"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.viabilidad?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Ql,{className:"w-3 h-3"})," Viabilidad"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.interesEstudiantil?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Ql,{className:"w-3 h-3"})," Inters Alumnos"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.transversalidad?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Ql,{className:"w-3 h-3"})," Transversalidad"]})]})]})]})]},C.id))]})]})},$B=()=>{var _,I,C;const{user:t}=ut(),[e,n]=M.useState(!1),[s,a]=M.useState(!1),[i,o]=M.useState([]),[l,c]=M.useState({name:"",problemId:"",justification:"",generalObjective:"",specificObjectives:[],duration:"",stages:[{name:"Diagnstica",period:"",activities:[]},{name:"Planeacin",period:"",activities:[]},{name:"Ejecucin",period:"",activities:[]},{name:"Cierre y Valoracin",period:"",activities:[]}],products:[]}),[d,m]=M.useState(""),[p,g]=M.useState(""),[x,y]=M.useState({});M.useEffect(()=>{t!=null&&t.schoolId&&T()},[t==null?void 0:t.schoolId]);const T=async()=>{if(t!=null&&t.schoolId){n(!0);try{const E=re(J,"pmc",t.schoolId),P=await Vn(E);if(P.exists()){const R=P.data();o(R.paec||[])}}catch(E){console.error("Error loading problems:",E)}finally{n(!1)}}},A=async()=>{if(!(t!=null&&t.schoolId)||!l.name||!l.problemId){alert("Por favor completa el nombre del proyecto y selecciona una problemtica.");return}a(!0);try{const E={...l,id:Math.random().toString(36).substr(2,9)},P=re(J,"pmc",t.schoolId);await bt(P,{pecProjects:yv(E)}),alert("Proyecto PEC diseado exitosamente "),c({name:"",problemId:"",justification:"",generalObjective:"",specificObjectives:[],duration:"",stages:[{name:"Diagnstica",period:"",activities:[]},{name:"Planeacin",period:"",activities:[]},{name:"Ejecucin",period:"",activities:[]},{name:"Cierre y Valoracin",period:"",activities:[]}],products:[]})}catch(E){console.error("Error saving PEC:",E),alert("Error al guardar el proyecto.")}finally{a(!1)}},b=()=>{d.trim()&&(c(E=>({...E,specificObjectives:[...E.specificObjectives||[],d.trim()]})),m(""))},N=E=>{c(P=>{var R;return{...P,specificObjectives:(R=P.specificObjectives)==null?void 0:R.filter((H,O)=>O!==E)}})},S=()=>{p.trim()&&(c(E=>({...E,products:[...E.products||[],p.trim()]})),g(""))},D=E=>{c(P=>{var R;return{...P,products:(R=P.products)==null?void 0:R.filter((H,O)=>O!==E)}})},V=E=>{const P=x[E];if(!(P!=null&&P.trim()))return;const R=[...l.stages||[]];R[E].activities.push(P.trim()),c(H=>({...H,stages:R})),y(H=>({...H,[E]:""}))},k=(E,P)=>{const R=[...l.stages||[]];R[E].activities=R[E].activities.filter((H,O)=>O!==P),c(H=>({...H,stages:R}))},j=(E,P)=>{const R=[...l.stages||[]];R[E].period=P,c(H=>({...H,stages:R}))};return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"bg-indigo-50 p-6 border-b border-indigo-100",children:[r.jsxs("h2",{className:"text-xl font-bold text-indigo-900 flex items-center gap-2",children:[r.jsx(Wn,{className:"w-6 h-6"})," Diseador de Proyectos Escolares (PEC)"]}),r.jsx("p",{className:"text-indigo-700 text-sm mt-1",children:"Estructura tu proyecto transversal vinculando las problemticas del diagnstico."})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"1. Problemtica a Atender (Diagnstico)"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:l.problemId,onChange:E=>{const P=E.target.value,R=i.find(H=>H.id===P);c(H=>({...H,problemId:P,justification:R?`Atendiendo a la problemtica de ${R.titulo}...`:H.justification}))},children:[r.jsx("option",{value:"",children:"-- Selecciona una problemtica del PAEC --"}),i.map(E=>r.jsxs("option",{value:E.id,children:[E.titulo," (Prioridad: ",E.prioridad,")"]},E.id))]}),l.problemId&&r.jsxs("div",{className:"p-3 bg-green-50 text-green-800 text-xs rounded-lg border border-green-100 flex items-center gap-2",children:[r.jsx(Hh,{className:"w-4 h-4"})," Problemtica vinculada correctamente"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"2. Ttulo del Proyecto"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 font-bold text-lg",placeholder:"Ej: Feria de la Salud Integral 2024...",value:l.name,onChange:E=>c({...l,name:E.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"3. Justificacin"}),r.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl h-24 focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Por qu es importante realizar este proyecto?",value:l.justification,onChange:E=>c({...l,justification:E.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"4. Objetivo General"}),r.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl h-32 focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Qu queremos lograr a largo plazo?",value:l.generalObjective,onChange:E=>c({...l,generalObjective:E.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"5. Objetivos Especficos"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 p-2 border border-slate-300 rounded-lg text-sm",placeholder:"Agregar objetivo...",value:d,onChange:E=>m(E.target.value),onKeyDown:E=>E.key==="Enter"&&b()}),r.jsx("button",{onClick:b,className:"bg-indigo-100 text-indigo-700 px-3 rounded-lg hover:bg-indigo-200",children:r.jsx(Fn,{className:"w-4 h-4"})})]}),r.jsx("ul",{className:"space-y-2 max-h-24 overflow-y-auto",children:(_=l.specificObjectives)==null?void 0:_.map((E,P)=>r.jsxs("li",{className:"flex justify-between items-center text-sm bg-slate-50 p-2 rounded border border-slate-100",children:[r.jsxs("span",{children:[" ",E]}),r.jsx("button",{onClick:()=>N(P),className:"text-red-400 hover:text-red-600",children:""})]},P))})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("label",{className:"block text-lg font-bold text-slate-800",children:"6. Cronograma de Actividades (Por Fases)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Duracin Total:"}),r.jsx("input",{type:"text",className:"border border-slate-300 rounded-lg px-3 py-1 text-sm w-48",placeholder:"Ej: Agosto - Diciembre 2024",value:l.duration,onChange:E=>c({...l,duration:E.target.value})})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(I=l.stages)==null?void 0:I.map((E,P)=>r.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:[r.jsxs("h4",{className:"font-bold text-indigo-800 mb-2 flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 flex items-center justify-center rounded-full text-xs",children:P+1}),E.name]}),r.jsx("input",{type:"text",className:"w-full text-xs p-1 mb-3 border border-slate-200 rounded text-slate-500",placeholder:"Periodo (Ej: Agosto)",value:E.period,onChange:R=>j(P,R.target.value)}),r.jsx("div",{className:"space-y-2 mb-3 min-h-[80px]",children:E.activities.map((R,H)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-slate-100 text-xs flex justify-between group",children:[r.jsx("span",{children:R}),r.jsx("button",{onClick:()=>k(P,H),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},H))}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{type:"text",className:"flex-1 text-xs p-1 border border-slate-300 rounded",placeholder:"Nueva actividad...",value:x[P]||"",onChange:R=>y({...x,[P]:R.target.value}),onKeyDown:R=>R.key==="Enter"&&V(P)}),r.jsx("button",{onClick:()=>V(P),className:"bg-indigo-600 text-white rounded px-2 text-xs",children:"+"})]})]},P))})]}),r.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"7. Productos Entregables (Evidencias)"}),r.jsxs("div",{className:"flex gap-4 mb-4",children:[r.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-300 rounded-xl",placeholder:"Ej: Video documental, Mural comunitario, Huerto escolar...",value:p,onChange:E=>g(E.target.value),onKeyDown:E=>E.key==="Enter"&&S()}),r.jsx("button",{onClick:S,className:"bg-indigo-600 text-white px-6 rounded-xl font-bold hover:bg-indigo-700",children:"Agregar"})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:(C=l.products)==null?void 0:C.map((E,P)=>r.jsxs("div",{className:"bg-white px-4 py-2 rounded-full border border-indigo-100 text-indigo-700 font-medium flex items-center gap-2 shadow-sm",children:[E,r.jsx("button",{onClick:()=>D(P),className:"text-indigo-300 hover:text-red-500",children:""})]},P))})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:r.jsx("button",{onClick:A,disabled:s,className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transform hover:-translate-y-1 transition-all disabled:opacity-50",children:s?"Guardando Proyecto...":r.jsxs(r.Fragment,{children:[r.jsx(Di,{className:"w-5 h-5"})," Guardar Proyecto PEC"]})})})]})]})},YB=()=>{const{user:t}=ut(),[e,n]=M.useState("diagnostico"),[s,a]=M.useState([]);return M.useEffect(()=>{(async()=>{if(t!=null&&t.schoolId){const o=await Mv.getActiveProjects(t.schoolId);a(o)}})()},[t==null?void 0:t.schoolId]),r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8 relative",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(Ke,{className:"w-8 h-8 text-pink-600"}),"Comit PAEC"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Programa Aula Escuela Comunidad - Diagnstico y Proyectos"})]})}),r.jsxs("div",{className:"flex gap-4 border-b border-slate-200 pb-1",children:[r.jsxs("button",{onClick:()=>n("diagnostico"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="diagnostico"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(Si,{className:"w-4 h-4"})," Diagnstico Comunitario"]}),r.jsxs("button",{onClick:()=>n("banco"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="banco"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(FU,{className:"w-4 h-4"})," Banco de Proyectos (PEC)"]}),r.jsxs("button",{onClick:()=>n("nuevo"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="nuevo"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(Fn,{className:"w-4 h-4"})," Disear Nuevo PEC"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 min-h-[500px]",children:[e==="diagnostico"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-900 text-sm mb-6",children:[r.jsx("strong",{children:"Instrucciones:"})," Este diagnstico es gestionado por el Director. Aqu puedes consultar las problemticas prioritarias identificadas para vincularlas a tus proyectos."]}),r.jsx(q1,{readOnly:!0})]}),e==="banco"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:s.map(i=>r.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:shadow-lg transition-shadow bg-white",children:[r.jsx("div",{className:"h-24 bg-gradient-to-r from-pink-500 to-purple-600 p-4 relative",children:r.jsx("div",{className:"absolute top-4 right-4 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-bold",children:i.duration})}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:i.name}),r.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-4",children:i.generalObjective}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Wn,{className:"w-4 h-4 text-pink-500"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Productos:"})," ",i.products.length," definidos"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Ke,{className:"w-4 h-4 text-purple-500"}),r.jsx("span",{children:"Vinculado a Planeaciones"})]})]}),r.jsx("button",{className:"w-full py-2 bg-slate-100 text-slate-700 rounded-lg font-bold text-sm hover:bg-slate-200 transition-colors",children:"Ver Detalles y Avances"})]})]},i.id))}),e==="nuevo"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx($B,{})})]})]})},JB=()=>{const t=Cs(),e=Gs(),{user:n,logout:s}=ut(),[a,i]=M.useState(()=>{var T;return((T=e.state)==null?void 0:T.view)||"dashboard"}),[o,l]=M.useState(()=>{const T=localStorage.getItem("schoolContext");return T?JSON.parse(T):{schoolName:"Bachillerato General Oficial",cct:"",cycle:"2024-2025",shift:"Matutino",municipality:"",vision:"",communityGoals:"",infrastructure:""}}),[c,d]=M.useState(()=>{const T=localStorage.getItem("subjectContext");return T?JSON.parse(T):{subjectId:"",subjectName:"",formativePurpose:"",curriculumContent:"",mccemsCategory:""}}),[m,p]=M.useState(()=>{const T=localStorage.getItem("savedPlans");return T?JSON.parse(T):[]});M.useEffect(()=>{localStorage.setItem("schoolContext",JSON.stringify(o)),localStorage.setItem("subjectContext",JSON.stringify(c)),localStorage.setItem("savedPlans",JSON.stringify(m)),localStorage.setItem("savedPlans",JSON.stringify(m))},[o,c,m]),M.useEffect(()=>{n&&(n.schoolName&&(!o.schoolName||o.schoolName==="Bachillerato General Oficial")&&l(T=>({...T,schoolName:n.schoolName})),!c.subjectName&&n.materias&&n.materias.length>0&&d(T=>({...T,subjectName:n.materias[0],subjectId:n.materias[0]})))},[n]);const g=async T=>{if(p(A=>[T,...A]),n!=null&&n.id&&(n!=null&&n.schoolId))try{const{planeacionesService:A}=await Ao(async()=>{const{planeacionesService:b}=await Promise.resolve().then(()=>NB);return{planeacionesService:b}},void 0);await A.crear(T,n.id,n.schoolId),console.log(" Planeacin guardada en Firestore")}catch(A){console.error(" Error al guardar en Firestore:",A)}},x=T=>{T==="guia-curricular"?t("/maestro/guia-curricular"):T==="herramientas"?t("/maestro/herramientas"):i(T)},y=()=>{switch(a){case"dashboard":return r.jsx(BB,{onNavigate:x});case"admin-asignacion":return r.jsx(VB,{});case"admin-alumnos":return r.jsx(UB,{});case"pmc":return r.jsx(HB,{});case"paec":return r.jsx(YB,{});case"context":return r.jsx(iz,{school:o,setSchool:l,subject:c,setSubject:d});case"generator":return r.jsx(bB,{school:o,subject:c,teacherName:n?`${n.nombre} ${n.apellidoPaterno}`:void 0,onSave:g});case"plans":return r.jsx(CB,{});case"diagnostico":return r.jsx(kB,{});default:return r.jsx(EB,{setView:i,recentPlansCount:m.length})}};return r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(go,{activeView:a,onNavigate:x}),r.jsxs("main",{className:"flex-1 overflow-y-auto h-screen",children:[r.jsxs("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10 px-8 py-4 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold capitalize text-slate-700",children:a==="dashboard"?"Bienvenido, Docente":a.replace("_"," ")}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-medium border border-indigo-100",children:o.schoolName}),n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-semibold text-slate-700",children:[n.nombre," ",n.apellidoPaterno]}),r.jsx("div",{className:"text-xs text-slate-500 capitalize",children:n.rol})]}),r.jsx("button",{onClick:s,className:"flex md:hidden items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-xl hover:bg-red-100 transition-colors border border-red-200",title:"Cerrar sesin",children:r.jsx(Yh,{className:"w-4 h-4"})})]}):null]})]}),r.jsx("div",{className:"p-8 max-w-5xl mx-auto pb-24",children:y()})]})]})},KB=()=>{const[t,e]=M.useState(!1),[n,s]=M.useState(!1),[a,i]=M.useState(!1),[o,l]=M.useState(""),c=async d=>{i(!0),l(d.datosAdministrativos.nombre);try{await g0.guardarAlumno({datosAdministrativos:d.datosAdministrativos,datosNEM:d.datosNEM,fechaRegistro:d.fechaRegistro}),e(!1),s(!0),setTimeout(()=>{s(!1)},5e3)}catch(m){console.error("Error al guardar alumno:",m),alert("Hubo un error al guardar tu informacin. Por favor, intenta de nuevo.")}finally{i(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-3 rounded-xl",children:r.jsx(jt,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"EduPlan MX"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Registro de Alumnos - Bachillerato General Oficial"})]})]})})}),r.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[!t&&!n&&r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 mb-8 border border-slate-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full mb-6",children:r.jsx(qE,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Bienvenido!"}),r.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-2xl mx-auto",children:"Completa tu registro para que podamos conocerte mejor y ofrecerte la mejor experiencia educativa personalizada."}),r.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center gap-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 shadow-lg",children:[r.jsx(qE,{className:"w-6 h-6"}),"Comenzar Registro"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Fcil y Rpido"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Solo 4 pasos sencillos para completar tu registro"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Seguro"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Tu informacin est protegida y es confidencial"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-purple-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Personalizado"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Nos ayuda a adaptar las clases a tus necesidades"})]})]})]}),n&&r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center border border-green-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:r.jsx(Ps,{className:"w-12 h-12 text-green-600"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Registro Exitoso!"}),r.jsxs("p",{className:"text-xl text-slate-600 mb-6",children:["Gracias ",r.jsx("span",{className:"font-semibold text-indigo-600",children:o}),", tu informacin ha sido guardada correctamente."]}),r.jsx("p",{className:"text-slate-500 mb-8",children:"Tu docente podr utilizar esta informacin para personalizar las clases y ofrecerte una mejor experiencia educativa."}),r.jsx("button",{onClick:()=>{s(!1),e(!0)},className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Registrar Otro Alumno"})]}),t&&r.jsx(F1,{onGuardar:c,onCancelar:()=>e(!1)}),a&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Guardando tu informacin..."})]})})]}),r.jsx("footer",{className:"bg-white border-t border-slate-200 mt-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsx("p",{className:"text-center text-sm text-slate-500",children:" 2026 EduPlan MX - Bachillerato General Oficial"})})})]})},QB=()=>{const[t,e]=M.useState([]),[n,s]=M.useState(!0),[a,i]=M.useState(""),[o,l]=M.useState(!1),[c,d]=M.useState(null),[m,p]=M.useState({nombre:"",codigo:"",direccion:"",telefono:"",email:""});M.useEffect(()=>{g()},[]);const g=async()=>{try{s(!0);const b=await Me(ue(J,"schools")),N=await Promise.all(b.docs.map(async S=>{const D=S.data(),V=Ye(ue(J,"users"),et("schoolId","==",S.id)),k=await Me(V),j=Ye(ue(J,"planeaciones"),et("schoolId","==",S.id)),_=await Me(j);return{id:S.id,nombre:D.nombre,codigo:D.codigo,direccion:D.direccion,telefono:D.telefono,email:D.email,createdAt:D.createdAt,userCount:k.size,planCount:_.size}}));e(N)}catch(b){console.error("Error al cargar escuelas:",b),alert("Error al cargar las escuelas")}finally{s(!1)}},x=async b=>{if(b.preventDefault(),!m.nombre||!m.codigo){alert("Nombre y cdigo son obligatorios");return}try{c?(await bt(re(J,"schools",c.id),{...m,updatedAt:new Date().toISOString()}),alert(" Escuela actualizada correctamente")):(await ss(ue(J,"schools"),{...m,createdAt:new Date().toISOString()}),alert(" Escuela creada correctamente")),l(!1),d(null),p({nombre:"",codigo:"",direccion:"",telefono:"",email:""}),g()}catch(N){console.error("Error al guardar escuela:",N),alert(" Error al guardar la escuela")}},y=b=>{d(b),p({nombre:b.nombre,codigo:b.codigo,direccion:b.direccion||"",telefono:b.telefono||"",email:b.email||""}),l(!0)},T=async b=>{if(b.userCount>0){alert(` No puedes eliminar esta escuela porque tiene ${b.userCount} usuarios registrados.

Primero debes reasignar o eliminar los usuarios.`);return}if(window.confirm(`Ests seguro de eliminar la escuela "${b.nombre}"?

Esta accin no se puede deshacer.`))try{await bs(re(J,"schools",b.id)),alert(" Escuela eliminada correctamente"),g()}catch(S){console.error("Error al eliminar escuela:",S),alert(" Error al eliminar la escuela")}},A=t.filter(b=>b.nombre.toLowerCase().includes(a.toLowerCase())||b.codigo.toLowerCase().includes(a.toLowerCase()));return n?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(jt,{className:"w-7 h-7 text-indigo-600"}),"Gestin de Escuelas"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Administra todas las escuelas del sistema"})]}),r.jsxs("button",{onClick:()=>{d(null),p({nombre:"",codigo:"",direccion:"",telefono:"",email:""}),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(Fn,{className:"w-5 h-5"}),"Nueva Escuela"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",value:a,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-2xl border border-indigo-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:"Total Escuelas"}),r.jsx("p",{className:"text-3xl font-bold text-indigo-900 mt-1",children:t.length})]}),r.jsx(jt,{className:"w-12 h-12 text-indigo-600 opacity-50"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl border border-purple-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total Usuarios"}),r.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:t.reduce((b,N)=>b+(N.userCount||0),0)})]}),r.jsx(Ke,{className:"w-12 h-12 text-purple-600 opacity-50"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-2xl border border-emerald-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Total Planeaciones"}),r.jsx("p",{className:"text-3xl font-bold text-emerald-900 mt-1",children:t.reduce((b,N)=>b+(N.planCount||0),0)})]}),r.jsx(it,{className:"w-12 h-12 text-emerald-600 opacity-50"})]})})]}),A.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[r.jsx(jt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:a?"No se encontraron escuelas":"No hay escuelas registradas"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:A.map(b=>r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 transition-all shadow-sm hover:shadow-md",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:r.jsx(jt,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:b.nombre}),r.jsxs("p",{className:"text-sm text-slate-500",children:["Cdigo: ",b.codigo]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[b.direccion&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Direccin"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.direccion})]}),b.telefono&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Telfono"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.telefono})]}),b.email&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.email})]})]}),r.jsxs("div",{className:"flex gap-4 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Ke,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:[b.userCount," usuarios"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(it,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:[b.planCount," planeaciones"]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>y(b),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(bd,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>T(b),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:r.jsx(is,{className:"w-5 h-5"})})]})]})},b.id))}),o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:c?"Editar Escuela":"Nueva Escuela"}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-5 h-5"})})]})}),r.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre de la Escuela *"}),r.jsx("input",{type:"text",required:!0,value:m.nombre,onChange:b=>p({...m,nombre:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Preparatoria Regional de Arandas"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cdigo de Escuela *"}),r.jsx("input",{type:"text",required:!0,value:m.codigo,onChange:b=>p({...m,codigo:b.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: PREP-ARANDAS-001"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Este cdigo debe ser nico"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Direccin"}),r.jsx("input",{type:"text",value:m.direccion,onChange:b=>p({...m,direccion:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Av. Principal #123, Arandas, Jalisco"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telfono"}),r.jsx("input",{type:"tel",value:m.telefono,onChange:b=>p({...m,telefono:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: 348-123-4567"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:m.email,onChange:b=>p({...m,email:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: contacto@escuela.edu.mx"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:c?"Guardar Cambios":"Crear Escuela"}),r.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors",children:"Cancelar"})]})]})]})})]})},XB=()=>{const[t,e]=M.useState([]),[n,s]=M.useState([]),[a,i]=M.useState(!0),[o,l]=M.useState(""),[c,d]=M.useState("all"),[m,p]=M.useState("all"),[g,x]=M.useState(!1),[y,T]=M.useState(null),[A,b]=M.useState({email:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",rol:"maestro",schoolId:"",puesto:"",activo:!0});M.useEffect(()=>{N()},[]);const N=async()=>{try{i(!0);const[E,P]=await Promise.all([Me(ue(J,"users")),Me(ue(J,"schools"))]),R=E.docs.map(O=>({id:O.id,...O.data()})),H=P.docs.map(O=>({id:O.id,nombre:O.data().nombre,codigo:O.data().codigo}));e(R),s(H)}catch(E){console.error("Error al cargar datos:",E),alert("Error al cargar los datos")}finally{i(!1)}},S=async E=>{if(E.preventDefault(),!A.email||!A.nombre||!A.apellidoPaterno){alert("Email, nombre y apellido paterno son obligatorios");return}if(A.rol!=="superadmin"&&!A.schoolId){alert("Debes seleccionar una escuela para este usuario");return}try{const P=A.schoolId?n.find(H=>H.id===A.schoolId):null,R={email:A.email.toLowerCase(),nombre:A.nombre,apellidoPaterno:A.apellidoPaterno,apellidoMaterno:A.apellidoMaterno||"",rol:A.rol,schoolId:A.schoolId||null,schoolName:(P==null?void 0:P.nombre)||null,puesto:A.puesto||"",activo:A.activo,onboardingCompleto:A.rol==="superadmin"?!0:!!A.schoolId,materias:[],grados:[],updatedAt:new Date().toISOString()};y?(await bt(re(J,"users",y.id),R),alert(" Usuario actualizado correctamente")):(await ss(ue(J,"users"),{...R,createdAt:new Date().toISOString()}),alert(` Usuario creado correctamente

 IMPORTANTE: El usuario debe iniciar sesin con Google usando este email para activar su cuenta.`)),x(!1),T(null),j(),N()}catch(P){console.error("Error al guardar usuario:",P),alert(" Error al guardar el usuario")}},D=E=>{T(E),b({email:E.email,nombre:E.nombre,apellidoPaterno:E.apellidoPaterno,apellidoMaterno:E.apellidoMaterno||"",rol:E.rol,schoolId:E.schoolId||"",puesto:E.puesto||"",activo:E.activo}),x(!0)},V=async E=>{const P=!E.activo,R=P?`Activar al usuario ${E.nombre} ${E.apellidoPaterno}?`:`Desactivar al usuario ${E.nombre} ${E.apellidoPaterno}?

No podr acceder al sistema.`;if(confirm(R))try{await bt(re(J,"users",E.id),{activo:P,updatedAt:new Date().toISOString()}),alert(` Usuario ${P?"activado":"desactivado"} correctamente`),N()}catch(H){console.error("Error al cambiar estado:",H),alert(" Error al cambiar el estado del usuario")}},k=async E=>{if(window.confirm(`Ests seguro de eliminar al usuario ${E.nombre} ${E.apellidoPaterno}?

Email: ${E.email}
Rol: ${E.rol}

Esta accin no se puede deshacer.`))try{await bs(re(J,"users",E.id)),alert(" Usuario eliminado correctamente"),N()}catch(R){console.error("Error al eliminar usuario:",R),alert(" Error al eliminar el usuario")}},j=()=>{b({email:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",rol:"maestro",schoolId:"",puesto:"",activo:!0})},_=t.filter(E=>{const P=E.nombre.toLowerCase().includes(o.toLowerCase())||E.apellidoPaterno.toLowerCase().includes(o.toLowerCase())||E.email.toLowerCase().includes(o.toLowerCase())||E.schoolName&&E.schoolName.toLowerCase().includes(o.toLowerCase()),R=c==="all"||E.rol===c,H=m==="all"||E.schoolId===m;return P&&R&&H}),I={total:t.length,activos:t.filter(E=>E.activo).length,inactivos:t.filter(E=>!E.activo).length,superadmin:t.filter(E=>E.rol==="superadmin").length,directivo:t.filter(E=>E.rol==="directivo").length,maestro:t.filter(E=>E.rol==="maestro").length,alumno:t.filter(E=>E.rol==="alumno").length},C=E=>{switch(E){case"superadmin":return"bg-red-100 text-red-700 border-red-200";case"directivo":return"bg-blue-100 text-blue-700 border-blue-200";case"maestro":return"bg-green-100 text-green-700 border-green-200";case"alumno":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-7 h-7 text-indigo-600"}),"Gestin de Usuarios"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Administra todos los usuarios del sistema"})]}),r.jsxs("button",{onClick:()=>{T(null),j(),x(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(Fn,{className:"w-5 h-5"}),"Nuevo Usuario"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:I.total})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Activos"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:I.activos})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Inactivos"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:I.inactivos})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Superadmin"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:I.superadmin})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[r.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Directivos"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:I.directivo})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Maestros"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:I.maestro})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:[r.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Alumnos"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:I.alumno})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o escuela...",value:o,onChange:E=>l(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"all",children:"Todos los roles"}),r.jsx("option",{value:"superadmin",children:"Superadmin"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:m,onChange:E=>p(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"all",children:"Todas las escuelas"}),n.map(E=>r.jsx("option",{value:E.id,children:E.nombre},E.id))]})]})]}),_.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[r.jsx(Ke,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:o||c!=="all"||m!=="all"?"No se encontraron usuarios con los filtros aplicados":"No hay usuarios registrados"})]}):r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Escuela"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:_.map(E=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-slate-900",children:[E.nombre," ",E.apellidoPaterno," ",E.apellidoMaterno]}),E.puesto&&r.jsx("p",{className:"text-sm text-slate-500",children:E.puesto})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jh,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:E.email})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${C(E.rol)}`,children:[r.jsx(Qh,{className:"w-3 h-3"}),E.rol]})}),r.jsx("td",{className:"px-6 py-4",children:E.schoolName?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:E.schoolName})]}):r.jsx("span",{className:"text-sm text-slate-400",children:"Sin escuela"})}),r.jsx("td",{className:"px-6 py-4",children:E.activo?r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[r.jsx(Ps,{className:"w-3 h-3"}),"Activo"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-medium",children:[r.jsx(qm,{className:"w-3 h-3"}),"Inactivo"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>D(E),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(bd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>V(E),className:`p-2 rounded-lg transition-colors ${E.activo?"text-slate-600 hover:bg-slate-100":"text-green-600 hover:bg-green-50"}`,title:E.activo?"Desactivar":"Activar",children:r.jsx(CO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>k(E),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:r.jsx(is,{className:"w-4 h-4"})})]})})]},E.id))})]})})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:y?"Editar Usuario":"Nuevo Usuario"}),r.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-5 h-5"})})]})}),r.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",required:!0,value:A.email,onChange:E=>b({...A,email:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"usuario@ejemplo.com",disabled:!!y}),!y&&r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"El usuario debe iniciar sesin con este email en Google"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre *"}),r.jsx("input",{type:"text",required:!0,value:A.nombre,onChange:E=>b({...A,nombre:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Jos"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",required:!0,value:A.apellidoPaterno,onChange:E=>b({...A,apellidoPaterno:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Mendoza"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Materno"}),r.jsx("input",{type:"text",value:A.apellidoMaterno,onChange:E=>b({...A,apellidoMaterno:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Garca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Puesto"}),r.jsx("input",{type:"text",value:A.puesto,onChange:E=>b({...A,puesto:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Docente, Director, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Rol *"}),r.jsxs("select",{required:!0,value:A.rol,onChange:E=>b({...A,rol:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"alumno",children:"Alumno"}),r.jsx("option",{value:"superadmin",children:"Superadmin"})]})]}),A.rol!=="superadmin"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Escuela *"}),r.jsxs("select",{required:A.rol!=="superadmin",value:A.schoolId,onChange:E=>b({...A,schoolId:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"",children:"Selecciona una escuela"}),n.map(E=>r.jsxs("option",{value:E.id,children:[E.nombre," (",E.codigo,")"]},E.id))]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:A.activo,onChange:E=>b({...A,activo:E.target.checked}),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Usuario activo"})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:y?"Guardar Cambios":"Crear Usuario"}),r.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors",children:"Cancelar"})]})]})]})})]})},kv=({directorSchoolId:t})=>{const[e,n]=M.useState("alumnos"),[s,a]=M.useState(t||""),[i,o]=M.useState([]),[l,c]=M.useState(null),[d,m]=M.useState(!1),[p,g]=M.useState(null),[x,y]=M.useState(!1);Hc.useEffect(()=>{t||T()},[t]);const T=async()=>{try{const I=(await Me(ue(J,"schools"))).docs.map(C=>({id:C.id,nombre:C.data().nombre,codigo:C.data().codigo}));o(I)}catch(_){console.error("Error al cargar escuelas:",_)}},A=()=>{const _=["nombre","apellidoPaterno","apellidoMaterno","matricula","email","grado","grupo","telefono","fechaNacimiento"],I=["Juan,Prez,Garca,2024001,juan.perez@ejemplo.com,1,A,3481234567,2008-05-15","Mara,Lpez,Martnez,2024002,maria.lopez@ejemplo.com,2,B,3481234568,2007-08-20","Carlos,Snchez,Rodrguez,2024003,carlos.sanchez@ejemplo.com,3,A,3481234569,2006-03-10"],C=[_.join(","),...I].join(`
`);N(C,"plantilla_alumnos.csv")},b=()=>{const _=["nombre","apellidoPaterno","apellidoMaterno","email","puesto","telefono","materias","grados"],I=['Ana,Martnez,Lpez,ana.martinez@ejemplo.com,Docente,3481234570,"Matemticas;Fsica","1;2;3"','Pedro,Gonzlez,Hernndez,pedro.gonzalez@ejemplo.com,Director,3481234571,"Administracin",""','Laura,Ramrez,Torres,laura.ramirez@ejemplo.com,Docente,3481234572,"Espaol;Literatura","2;3"'],C=[_.join(","),...I].join(`
`);N(C,"plantilla_maestros.csv")},N=(_,I)=>{const C=new Blob([_],{type:"text/csv;charset=utf-8;"}),E=document.createElement("a"),P=URL.createObjectURL(C);E.setAttribute("href",P),E.setAttribute("download",I),E.style.visibility="hidden",document.body.appendChild(E),E.click(),document.body.removeChild(E)},S=_=>{_.target.files&&_.target.files[0]&&(c(_.target.files[0]),g(null))},D=_=>_.split(`
`).filter(C=>C.trim()).map(C=>{const E=[];let P="",R=!1;for(let H=0;H<C.length;H++){const O=C[H];O==='"'?R=!R:O===","&&!R?(E.push(P.trim()),P=""):P+=O}return E.push(P.trim()),E}),V=async _=>{const I={success:0,errors:0,warnings:0,details:[]},C=_[0].map(P=>P.toLowerCase().trim()),E=_.slice(1);for(let P=0;P<E.length;P++){const R=E[P],H=P+2;try{const O={};if(C.forEach((G,ee)=>{var de;O[G]=((de=R[ee])==null?void 0:de.trim())||""}),!O.nombre||!O.apellidopaterno||!O.matricula){I.errors++,I.details.push({row:H,status:"error",message:"Faltan campos obligatorios (nombre, apellidoPaterno, matricula)",data:O});continue}const q=Ye(ue(J,"alumnos"),et("matricula","==",O.matricula),et("schoolId","==",s));if(!(await Me(q)).empty){I.warnings++,I.details.push({row:H,status:"warning",message:`Matrcula ${O.matricula} ya existe, se omiti`,data:O});continue}await ss(ue(J,"alumnos"),{nombre:O.nombre,apellidoPaterno:O.apellidopaterno,apellidoMaterno:O.apellidomaterno||"",matricula:O.matricula,email:O.email||"",grado:parseInt(O.grado)||1,grupo:O.grupo||"A",telefono:O.telefono||"",fechaNacimiento:O.fechanacimiento||"",schoolId:s,activo:!0,createdAt:new Date().toISOString()}),I.success++,I.details.push({row:H,status:"success",message:`Alumno ${O.nombre} ${O.apellidopaterno} importado correctamente`,data:O})}catch(O){I.errors++,I.details.push({row:H,status:"error",message:`Error: ${O.message}`,data:R})}}return I},k=async _=>{const I={success:0,errors:0,warnings:0,details:[]},C=_[0].map(P=>P.toLowerCase().trim()),E=_.slice(1);for(let P=0;P<E.length;P++){const R=E[P],H=P+2;try{const O={};if(C.forEach((Ie,nt)=>{var ot;O[Ie]=((ot=R[nt])==null?void 0:ot.trim())||""}),!O.nombre||!O.apellidopaterno||!O.email){I.errors++,I.details.push({row:H,status:"error",message:"Faltan campos obligatorios (nombre, apellidoPaterno, email)",data:O});continue}const q=Ye(ue(J,"users"),et("email","==",O.email.toLowerCase()));if(!(await Me(q)).empty){I.warnings++,I.details.push({row:H,status:"warning",message:`Email ${O.email} ya existe, se omiti`,data:O});continue}const G=O.materias?O.materias.split(";").map(Ie=>Ie.trim()).filter(Boolean):[],ee=O.grados?O.grados.split(";").map(Ie=>parseInt(Ie.trim())).filter(Boolean):[],de=i.find(Ie=>Ie.id===s);await ss(ue(J,"users"),{email:O.email.toLowerCase(),nombre:O.nombre,apellidoPaterno:O.apellidopaterno,apellidoMaterno:O.apellidomaterno||"",rol:"maestro",schoolId:s,schoolName:(de==null?void 0:de.nombre)||"",puesto:O.puesto||"Docente",telefono:O.telefono||"",materias:G,grados:ee,activo:!0,onboardingCompleto:!0,createdAt:new Date().toISOString()}),I.success++,I.details.push({row:H,status:"success",message:`Maestro ${O.nombre} ${O.apellidopaterno} importado correctamente`,data:O})}catch(O){I.errors++,I.details.push({row:H,status:"error",message:`Error: ${O.message}`,data:R})}}return I},j=async()=>{if(!l){alert("Por favor selecciona un archivo CSV");return}if(!s){alert("Por favor selecciona una escuela");return}m(!0),g(null);try{const _=await l.text(),I=D(_);if(I.length<2){alert("El archivo CSV est vaco o no tiene datos"),m(!1);return}let C;e==="alumnos"?C=await V(I):C=await k(I),g(C),y(!0)}catch(_){console.error("Error al importar:",_),alert(`Error al procesar el archivo: ${_.message}`)}finally{m(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Gu,{className:"w-7 h-7 text-indigo-600"}),"Importacin Masiva CSV"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Importa alumnos o maestros desde archivos CSV"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"1. Selecciona el Tipo de Importacin"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>n("alumnos"),className:`p-6 rounded-xl border-2 transition-all ${e==="alumnos"?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Ke,{className:`w-6 h-6 ${e==="alumnos"?"text-indigo-600":"text-slate-400"}`}),r.jsx("h4",{className:"font-bold text-slate-800",children:"Alumnos"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Importa lista de alumnos con matrcula, grado y grupo"})]}),r.jsxs("button",{onClick:()=>n("maestros"),className:`p-6 rounded-xl border-2 transition-all ${e==="maestros"?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(as,{className:`w-6 h-6 ${e==="maestros"?"text-indigo-600":"text-slate-400"}`}),r.jsx("h4",{className:"font-bold text-slate-800",children:"Maestros"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Importa lista de maestros con materias y grados"})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"2. Descarga la Plantilla CSV"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Descarga la plantilla de ejemplo y llnala con tus datos. Incluye ejemplos para guiarte."}),r.jsxs("button",{onClick:e==="alumnos"?A:b,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors",children:[r.jsx($h,{className:"w-5 h-5"}),"Descargar Plantilla de ",e==="alumnos"?"Alumnos":"Maestros"]}),r.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-xl",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[r.jsx(_s,{className:"w-4 h-4"}),"Campos del CSV"]}),e==="alumnos"?r.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"nombre"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoPaterno"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoMaterno"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"matricula"})," (obligatorio, nico)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"email"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grado"})," (1-6)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grupo"})," (A, B, C, etc.)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"telefono"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"fechaNacimiento"})," (YYYY-MM-DD)"]})]}):r.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"nombre"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoPaterno"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoMaterno"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"email"})," (obligatorio, nico)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"puesto"})," (Docente, Coordinador, etc.)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"telefono"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"materias"})," (separadas por ;)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grados"})," (separados por ;)"]})]})]})]}),!t&&r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"3. Selecciona la Escuela"}),r.jsxs("div",{className:"relative",children:[r.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:s,onChange:_=>a(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"",children:"Selecciona una escuela"}),i.map(_=>r.jsxs("option",{value:_.id,children:[_.nombre," (",_.codigo,")"]},_.id))]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"4. Sube tu Archivo CSV"}),r.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-indigo-400 transition-colors",children:[r.jsx("input",{type:"file",accept:".csv",onChange:S,className:"hidden",id:"csv-upload"}),r.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[r.jsx(Gu,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l?r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-slate-800 mb-1",children:l.name}),r.jsx("p",{className:"text-sm text-slate-500",children:"Click para cambiar archivo"})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-slate-800 mb-1",children:"Click para seleccionar archivo CSV"}),r.jsx("p",{className:"text-sm text-slate-500",children:"o arrastra y suelta aqu"})]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:j,disabled:!l||!s||d,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Importando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Gu,{className:"w-5 h-5"}),"Importar ",e==="alumnos"?"Alumnos":"Maestros"]})})}),x&&p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Resultado de Importacin"}),r.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ps,{className:"w-5 h-5 text-green-600"}),r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Exitosos"})]}),r.jsx("p",{className:"text-3xl font-bold text-green-900",children:p.success})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Na,{className:"w-5 h-5 text-amber-600"}),r.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Advertencias"})]}),r.jsx("p",{className:"text-3xl font-bold text-amber-900",children:p.warnings})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(qm,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm font-medium text-red-600",children:"Errores"})]}),r.jsx("p",{className:"text-3xl font-bold text-red-900",children:p.errors})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"Detalles de Importacin"}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.details.map((_,I)=>r.jsx("div",{className:`p-3 rounded-lg border ${_.status==="success"?"bg-green-50 border-green-200":_.status==="warning"?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[_.status==="success"&&r.jsx(Ps,{className:"w-4 h-4 text-green-600 mt-0.5"}),_.status==="warning"&&r.jsx(Na,{className:"w-4 h-4 text-amber-600 mt-0.5"}),_.status==="error"&&r.jsx(qm,{className:"w-4 h-4 text-red-600 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm font-medium text-slate-800",children:["Fila ",_.row,": ",_.message]})})]})},I))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:"Cerrar"})})]})]})})]})},WB=()=>{const{user:t}=ut(),[e,n]=M.useState([]),[s,a]=M.useState(!1),[i,o]=M.useState(""),[l,c]=M.useState(!1),[d,m]=M.useState(!1),[p,g]=M.useState(null),[x,y]=M.useState([]),[T,A]=M.useState(""),[b,N]=M.useState({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"});M.useEffect(()=>{S()},[]),M.useEffect(()=>{T?D():n([])},[T]);const S=async()=>{try{const E=(await Me(ue(J,"schools"))).docs.map(P=>({id:P.id,...P.data()}));y(E.sort((P,R)=>P.nombre.localeCompare(R.nombre)))}catch(C){console.error("Error loading schools:",C)}},D=async()=>{if(T){a(!0);try{const C=Ye(ue(J,"alumnos"),et("schoolId","==",T)),P=(await Me(C)).docs.map(R=>({id:R.id,...R.data()}));P.sort((R,H)=>{const O=R.grado||"0",q=H.grado||"0";if(O!==q)return O.localeCompare(q);const Z=R.grupo||"A",G=H.grupo||"A";if(Z!==G)return Z.localeCompare(G);const ee=R.apellidoPaterno||R.lastName||"",de=H.apellidoPaterno||H.lastName||"";return ee.localeCompare(de)}),n(P)}catch(C){console.error("Error loading students:",C)}finally{a(!1)}}},V=C=>{C?(g(C),N({nombre:C.nombre||C.firstName||"",apellidoPaterno:C.apellidoPaterno||C.lastName||"",apellidoMaterno:C.apellidoMaterno||"",curp:C.curp||"",matricula:C.matricula||"",email:C.email||"",grado:C.grado||"",grupo:C.grupo||"",turno:C.turno||"Matutino"})):(g(null),N({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"})),c(!0)},k=async()=>{if(T){if(!b.nombre||!b.grado||!b.grupo){alert("Por favor completa Nombre, Grado y Grupo.");return}try{const C=x.find(P=>P.id===T),E={...b,firstName:b.nombre,lastName:`${b.apellidoPaterno} ${b.apellidoMaterno||""}`.trim(),schoolId:T,schoolName:(C==null?void 0:C.nombre)||"",updatedAt:new Date().toISOString()};if(p!=null&&p.id)await bt(re(J,"alumnos",p.id),E),n(P=>P.map(R=>R.id===p.id?{...R,...E}:R));else{const P=await ss(ue(J,"alumnos"),{...E,createdAt:new Date().toISOString()});n(R=>[...R,{id:P.id,...E}])}c(!1)}catch(C){console.error("Error saving student:",C),alert("Error al guardar alumno.")}}},j=async(C,E)=>{if(confirm(`Ests seguro de eliminar al alumno ${E}?`))try{await bs(re(J,"alumnos",C)),n(P=>P.filter(R=>R.id!==C))}catch(P){console.error("Error deleting:",P)}},_=async()=>{if(e.length!==0&&confirm(` ZONA DE PELIGRO 

Ests a punto de ELIMINAR PERMANENTEMENTE a todos los ${e.length} alumnos registrados en esta escuela.

Ests absolutamente seguro?`)){a(!0);try{const C=e.map(E=>bs(re(J,"alumnos",E.id)));await Promise.all(C),n([]),alert(" Se han eliminado todos los alumnos de la escuela.")}catch(C){console.error("Error al borrar todo:",C),alert("Ocurri un error al intentar borrar los registros.")}finally{a(!1)}}},I=e.filter(C=>{const E=i.toLowerCase(),P=`${C.nombre||C.firstName||""} ${C.apellidoPaterno||C.lastName||""} ${C.apellidoMaterno||""}`.toLowerCase(),R=C.curp?C.curp.toLowerCase().includes(E):!1,H=C.matricula?C.matricula.toLowerCase().includes(E):!1,O=C.grupo?C.grupo.toLowerCase().includes(E):!1;return P.includes(E)||R||H||O});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-7 h-7 text-indigo-600"}),"Gestin Global de Alumnos"]}),r.jsx("p",{className:"text-slate-600",children:"Administra los alumnos de cualquier escuela registrada"})]}),r.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex items-center gap-2 min-w-[300px]",children:[r.jsx(jt,{className:"w-5 h-5 text-slate-400 ml-2"}),r.jsxs("select",{value:T,onChange:C=>A(C.target.value),className:"w-full p-2 bg-transparent border-none focus:ring-0 text-slate-700 font-medium",children:[r.jsx("option",{value:"",children:"-- Selecciona una Escuela --"}),x.map(C=>r.jsx("option",{value:C.id,children:C.nombre},C.id))]})]})]}),T?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[r.jsxs("div",{className:"flex-1 relative max-w-md",children:[r.jsx(Bs,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar alumno...",value:i,onChange:C=>o(C.target.value)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>m(!0),className:"text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-50 border border-slate-200 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-4 h-4"}),"Importar"]}),e.length>0&&r.jsxs("button",{onClick:_,className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold border border-red-100 hover:bg-red-100 flex items-center gap-2",children:[r.jsx(is,{className:"w-4 h-4"}),"Borrar Todos"]}),r.jsxs("button",{onClick:()=>V(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Nuevo"]})]})]}),s?r.jsx("div",{className:"py-12 flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600 text-xs uppercase font-bold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Alumno"}),r.jsx("th",{className:"p-4",children:"Matrcula"}),r.jsx("th",{className:"p-4",children:"Grado/Grupo"}),r.jsx("th",{className:"p-4 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:I.length>0?I.map(C=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-bold text-slate-900",children:[C.nombre||C.firstName," ",C.apellidoPaterno||C.lastName," ",C.apellidoMaterno]}),r.jsx("div",{className:"text-xs text-slate-500",children:C.email})]}),r.jsx("td",{className:"p-4 text-sm font-mono",children:C.matricula||"---"}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-bold",children:[C.grado,' "',C.grupo,'"']})}),r.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>V(C),className:"p-1 text-slate-400 hover:text-indigo-600",children:r.jsx(bd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>j(C.id,C.nombre||""),className:"p-1 text-slate-400 hover:text-red-600",children:r.jsx(is,{className:"w-4 h-4"})})]})]},C.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No hay alumnos en esta escuela."})})})]})})]}):r.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-12 text-center",children:[r.jsx("div",{className:"bg-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:r.jsx(jt,{className:"w-8 h-8 text-indigo-500"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Selecciona una escuela para comenzar"}),r.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"Para gestionar los alumnos (ver, editar, agregar o importar), primero debes seleccionar la escuela a la que pertenecen."})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b flex justify-between items-center sticky top-0 bg-white",children:[r.jsxs("h3",{className:"text-xl font-bold",children:[p?"Editar":"Nuevo"," Alumno"]}),r.jsx("button",{onClick:()=>c(!1),children:r.jsx(rs,{className:"w-6 h-6 text-slate-400"})})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Nombre",value:b.nombre,onChange:C=>N({...b,nombre:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Apellido Paterno",value:b.apellidoPaterno,onChange:C=>N({...b,apellidoPaterno:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Apellido Materno",value:b.apellidoMaterno,onChange:C=>N({...b,apellidoMaterno:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Matrcula",value:b.matricula,onChange:C=>N({...b,matricula:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Email",value:b.email,onChange:C=>N({...b,email:C.target.value})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:"p-3 border rounded-lg w-1/2",value:b.grado,onChange:C=>N({...b,grado:C.target.value}),children:[r.jsx("option",{value:"",children:"Grado"}),[1,2,3,4,5,6].map(C=>r.jsxs("option",{value:C,children:[C,""]},C))]}),r.jsx("input",{className:"p-3 border rounded-lg w-1/2",placeholder:"Grupo",value:b.grupo,onChange:C=>N({...b,grupo:C.target.value.toUpperCase()}),maxLength:2})]})]}),r.jsxs("div",{className:"p-6 border-t flex justify-end gap-3 rounded-b-2xl bg-slate-50",children:[r.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg",children:"Cancelar"}),r.jsx("button",{onClick:k,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold",children:"Guardar"})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Importacin Masiva"}),r.jsx("button",{onClick:()=>{m(!1),D()},children:r.jsx(rs,{className:"w-6 h-6 text-slate-400"})})]}),r.jsx("div",{className:"p-8",children:r.jsx(kv,{directorSchoolId:T})})]})})]})},ZB=()=>{const t=Cs(),{logout:e,user:n}=ut(),[s,a]=M.useState("overview"),i=async()=>{try{await e(),t("/login")}catch(l){console.error("Error al cerrar sesin:",l)}},o=[{id:"overview",label:"Vista General",icon:PI},{id:"schools",label:"Escuelas",icon:jt},{id:"users",label:"Usuarios",icon:Ke},{id:"students",label:"Alumnos",icon:as},{id:"data",label:"Base de Datos",icon:GE},{id:"import",label:"Importar CSV",icon:Gu}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(as,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"EduPlan MX"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[n&&r.jsxs("div",{className:"text-right mr-4",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[n.nombre," ",n.apellidoPaterno]}),r.jsx("p",{className:"text-xs text-slate-500",children:n.email})]}),r.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors font-medium",title:"Cerrar sesin",children:[r.jsx(Yh,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Cerrar Sesin"})]})]})]})})}),r.jsx("div",{className:"bg-white border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-8",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto",children:o.map(l=>{const c=l.icon,d=s===l.id;return r.jsxs("button",{onClick:()=>a(l.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${d?"border-indigo-600 text-indigo-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:[r.jsx(c,{className:"w-5 h-5"}),l.label]},l.id)})})})}),r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[s==="overview"&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard Super Admin"}),r.jsx("p",{className:"text-slate-600 mb-8",children:"Vista general del sistema EduPlan MX"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.slice(1).map(l=>{const c=l.icon;return r.jsxs("button",{onClick:()=>a(l.id),className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 hover:shadow-lg transition-all text-left group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:r.jsx(c,{className:"w-6 h-6 text-indigo-600"})})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:l.label}),r.jsxs("p",{className:"text-sm text-slate-500",children:[l.id==="schools"&&"Administra todas las escuelas del sistema",l.id==="users"&&"Gestiona usuarios y sus roles",l.id==="data"&&"Consulta y exporta datos",l.id==="import"&&"Importa datos masivos desde CSV"]})]},l.id)})}),r.jsxs("div",{className:"mt-8 bg-indigo-50 border border-indigo-200 rounded-2xl p-6",children:[r.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:" Panel de Administracin Completo"}),r.jsx("p",{className:"text-indigo-800 text-sm",children:"Desde aqu puedes administrar todo el sistema EduPlan MX. Selecciona una seccin del men superior para comenzar."})]})]}),s==="schools"&&r.jsx(QB,{}),s==="users"&&r.jsx(XB,{}),s==="students"&&r.jsx(WB,{}),s==="data"&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx(GE,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Base de Datos"}),r.jsx("p",{className:"text-slate-600",children:"En desarrollo... (Fase 4)"})]}),s==="import"&&r.jsx(kv,{})]})})]})},eH={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600"},pu=({title:t,value:e,icon:n,color:s,subtitle:a})=>r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-3 rounded-xl ${eH[s]}`,children:r.jsx(n,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-3xl font-bold text-slate-800",children:e}),r.jsx("div",{className:"text-sm text-slate-600 font-medium",children:t}),a&&r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:a})]})]})}),tH=()=>{var S,D,V,k,j;const t=Cs(),{user:e,logout:n}=ut(),[s,a]=M.useState({maestros:0,alumnos:0,planeaciones:0,grupos:0}),[i,o]=M.useState("general"),[l,c]=M.useState(!0),[d,m]=M.useState(!1),[p,g]=M.useState(null);M.useEffect(()=>{e!=null&&e.schoolId&&x()},[e==null?void 0:e.schoolId]);const x=async()=>{if(e!=null&&e.schoolId)try{c(!0);const _=Ye(ue(J,"users"),et("schoolId","==",e.schoolId),et("rol","==","maestro")),I=await Me(_),C=Ye(ue(J,"alumnos"),et("schoolId","==",e.schoolId)),E=await Me(C),P=Ye(ue(J,"planeaciones"),et("schoolId","==",e.schoolId)),R=await Me(P),H=new Set;E.docs.forEach(O=>{const q=O.data();q.grado&&q.grupo&&H.add(`${q.grado}-${q.grupo}`)}),a({maestros:I.size,alumnos:E.size,planeaciones:R.size,grupos:H.size})}catch(_){console.error("Error al cargar estadsticas:",_)}finally{c(!1)}},y=async()=>{try{await n(),t("/login")}catch(_){console.error("Error al cerrar sesin:",_)}},T=async()=>{try{const _=Ye(ue(J,"alumnos"),ho(1)),I=await Me(_);I.empty?g({message:"No students found at all in DB"}):g({id:I.docs[0].id,data:I.docs[0].data(),mySchoolId:e==null?void 0:e.schoolId,match:I.docs[0].data().schoolId===(e==null?void 0:e.schoolId)?"YES":"NO"})}catch(_){console.error(_),g({error:JSON.stringify(_)})}},[A,b]=M.useState(""),N=async()=>{if(!(!(e!=null&&e.schoolId)||!(e!=null&&e.schoolName))&&confirm(` ACCIN CRTICA 

Ests seguro de asignar TODOS los alumnos existentes en la base de datos a TU escuela actual?

Escuela: ${e.schoolName}
ID: ${e.schoolId}

Esto mover a todos los alumnos hurfanos a tu panel. Solo haz esto si ests seguro de que, en este sistema, T eres la nica escuela activa.`)){b(" Migrando alumnos, por favor espera...");try{const _=Ye(ue(J,"alumnos")),I=await Me(_);let C=0;const E=I.docs.map(async P=>{if(P.data().schoolId!==e.schoolId)return C++,bt(re(J,"alumnos",P.id),{schoolId:e.schoolId,schoolName:e.schoolName})});await Promise.all(E),b(` xito! Se han asociado ${C} alumnos a tu escuela.`),x(),T()}catch(_){console.error(_),b(` Error migrando: ${_}`)}}};return l?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando informacin de tu escuela..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(Gm,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:(e==null?void 0:e.schoolName)||"Mi Escuela"}),r.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Panel Directivo"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"hidden md:block text-right mr-2",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[e==null?void 0:e.nombre," ",e==null?void 0:e.apellidoPaterno]}),r.jsx("p",{className:"text-xs text-slate-500",children:e==null?void 0:e.email})]}),r.jsx("button",{onClick:()=>{m(!d),T()},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Diagnstico de Datos",children:r.jsx(OE,{className:"w-5 h-5"})}),r.jsx("button",{onClick:y,className:"p-2 text-slate-400 hover:text-red-500 transition-colors rounded-lg hover:bg-red-50",title:"Cerrar sesin",children:r.jsx(Yh,{className:"w-5 h-5"})})]})]})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"flex border-b border-slate-200 mb-8 overflow-x-auto",children:[r.jsx("button",{onClick:()=>o("general"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="general"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Vista General"}),r.jsx("button",{onClick:()=>o("pmc"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="pmc"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Diagnstico (PMC)"}),r.jsx("button",{onClick:()=>o("paec"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="paec"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Programa Aula Escuela Comunidad (PAEC)"})]}),i==="general"&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(pu,{title:"Maestros",value:s.maestros,icon:as,color:"blue",subtitle:"Docentes registrados"}),r.jsx(pu,{title:"Alumnos",value:s.alumnos,icon:Ke,color:"green",subtitle:"Estudiantes activos"}),r.jsx(pu,{title:"Planeaciones",value:s.planeaciones,icon:_s,color:"purple",subtitle:"Documentos creados"}),r.jsx(pu,{title:"Grupos",value:s.grupos,icon:Ke,color:"orange",subtitle:"Grupos activos"})]}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Gestin Escolar"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("button",{onClick:()=>t("/directivo/maestros"),className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(as,{className:"w-6 h-6 text-blue-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Maestros"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Administrar plantilla docente y asignaciones"})]}),r.jsxs("button",{onClick:()=>t("/directivo/alumnos"),className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-green-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(Ke,{className:"w-6 h-6 text-green-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Alumnos"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Lista de estudiantes y grupos"})]}),r.jsxs("button",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-purple-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(ps,{className:"w-6 h-6 text-purple-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Reportes"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Estadsticas de aprovechamiento y entregas"})]})]})]}),i==="pmc"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsx(G1,{})}),i==="paec"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsx(q1,{})}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-2xl p-6 flex items-start gap-4",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-full flex-shrink-0",children:r.jsx(bv,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-blue-900 font-bold mb-1",children:"Panel de Director Activo"}),r.jsxs("p",{className:"text-blue-700 text-sm",children:["Bienvenido al panel de direccin. Desde aqu podrs gestionar toda la informacin de",r.jsxs("span",{className:"font-semibold",children:[" ",e==null?void 0:e.schoolName]}),". Prximamente se habilitarn ms funciones de reportes avanzados."]})]})]})]}),r.jsx("button",{onClick:()=>{m(!d),T()},className:"fixed bottom-4 right-4 bg-slate-800 text-white p-3 rounded-full shadow-lg hover:bg-slate-700 transition-colors z-50 origin-center hover:scale-110",title:"Herramienta de Diagnstico",children:r.jsx(OE,{className:"w-5 h-5"})}),d&&r.jsxs("div",{className:"fixed bottom-20 right-4 bg-white p-6 shadow-2xl border border-slate-200 rounded-2xl max-w-md z-50 text-xs font-mono overflow-auto max-h-[80vh] w-full animate-in slide-in-from-bottom-5",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[r.jsx("h4",{className:"font-bold text-sm text-slate-800",children:"Diagnstico de Datos"}),r.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-red-500",children:"cerrar"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[r.jsx("h5",{className:"font-bold text-slate-600 mb-1",children:"Mi Usuario (Director)"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nombre:"})," ",e==null?void 0:e.nombre]}),r.jsxs("p",{children:[r.jsx("strong",{children:"School Name:"})," ",e==null?void 0:e.schoolName]}),r.jsxs("p",{className:"text-blue-600 break-all",children:[r.jsx("strong",{children:"School ID (Firestore):"})," ",e==null?void 0:e.schoolId]})]}),r.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[r.jsx("h5",{className:"font-bold text-slate-600 mb-1",children:"Estadsticas Actuales"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Alumnos (filtrados por ID):"})," ",s.alumnos]})]}),p&&r.jsxs("div",{className:"bg-indigo-50 p-3 rounded border border-indigo-100",children:[r.jsx("h5",{className:"font-bold text-indigo-800 mb-1",children:"Muestra de Alumno (Cualquiera en DB)"}),p.message?r.jsx("p",{children:p.message}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"ID Alumno:"})," ",p.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nombre:"})," ",((S=p.data)==null?void 0:S.nombre)||((D=p.data)==null?void 0:D.firstName)," ",((V=p.data)==null?void 0:V.apellidoPaterno)||((k=p.data)==null?void 0:k.lastName)]}),r.jsxs("p",{className:"text-red-600 break-all text-xs",children:[r.jsx("strong",{children:"School ID Actual:"})," ",(j=p.data)==null?void 0:j.schoolId]}),r.jsxs("div",{className:`mt-2 p-2 rounded text-center font-bold text-white text-xs ${p.match==="YES"?"bg-green-500":"bg-red-500"}`,children:["Coincide ID? ",p.match]})]})]}),r.jsx("div",{className:"text-slate-500 italic text-[10px] mt-2",children:"*Si el ID no coincide, contacta a soporte para migracin de datos."}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[r.jsx("h5",{className:"font-bold text-red-600 mb-2",children:" Zona de Peligro / Reparacin"}),r.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Si ves 0 alumnos pero sabes que existen, usa este botn para adoptarlos a tu escuela."}),A&&r.jsx("div",{className:`mb-3 p-2 rounded text-xs font-bold ${A.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:A}),r.jsxs("button",{onClick:N,className:"w-full bg-red-50 text-red-600 border border-red-200 py-2 rounded font-bold hover:bg-red-100 transition-colors",children:[" Asociar TODOS los alumnos a M (",e==null?void 0:e.schoolName,")"]})]})]})]})]})},nH=()=>{const t=Cs(),{user:e}=ut(),[n,s]=M.useState([]),[a,i]=M.useState(!0),[o,l]=M.useState(""),[c,d]=M.useState(!1),[m,p]=M.useState(!1),[g,x]=M.useState(null),[y,T]=M.useState({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"});M.useEffect(()=>{e!=null&&e.schoolId&&A()},[e==null?void 0:e.schoolId]);const A=async()=>{if(e!=null&&e.schoolId){i(!0);try{const k=Ye(ue(J,"alumnos"),et("schoolId","==",e.schoolId)),_=(await Me(k)).docs.map(I=>({id:I.id,...I.data()}));_.sort((I,C)=>{const E=I.grado||"0",P=C.grado||"0";if(E!==P)return E.localeCompare(P);const R=I.grupo||"A",H=C.grupo||"A";if(R!==H)return R.localeCompare(H);const O=I.apellidoPaterno||I.lastName||"",q=C.apellidoPaterno||C.lastName||"";return O.localeCompare(q)}),s(_)}catch(k){console.error("Error loading students:",k)}finally{i(!1)}}},b=k=>{k?(x(k),T({nombre:k.nombre||k.firstName||"",apellidoPaterno:k.apellidoPaterno||k.lastName||"",apellidoMaterno:k.apellidoMaterno||"",curp:k.curp||"",matricula:k.matricula||"",email:k.email||"",grado:k.grado||"",grupo:k.grupo||"",turno:k.turno||"Matutino"})):(x(null),T({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"})),d(!0)},N=async()=>{if(e!=null&&e.schoolId){if(!y.nombre||!y.grado||!y.grupo){alert("Por favor completa Nombre, Grado y Grupo.");return}try{const k={...y,firstName:y.nombre,lastName:`${y.apellidoPaterno} ${y.apellidoMaterno||""}`.trim(),schoolId:e.schoolId,schoolName:e.schoolName,updatedAt:new Date().toISOString()};if(g!=null&&g.id)await bt(re(J,"alumnos",g.id),k),s(j=>j.map(_=>_.id===g.id?{..._,...k}:_));else{const j=await ss(ue(J,"alumnos"),{...k,createdAt:new Date().toISOString()});s(_=>[..._,{id:j.id,...k}])}d(!1)}catch(k){console.error("Error saving student:",k),alert("Error al guardar alumno.")}}},S=async(k,j)=>{if(confirm(`Ests seguro de eliminar al alumno ${j}?`))try{await bs(re(J,"alumnos",k)),s(_=>_.filter(I=>I.id!==k))}catch(_){console.error("Error deleting:",_)}},D=async()=>{if(n.length!==0&&confirm(` ZONA DE PELIGRO 

Ests a punto de ELIMINAR PERMANENTEMENTE a todos los ${n.length} alumnos registrados en esta escuela.

Ests absolutamente seguro?`)&&confirm(`LTIMA ADVERTENCIA:

Esta accin NO se puede deshacer. Se borrarn todos los datos, calificaciones y asistencias asociadas a estos alumnos.

Proceder con la eliminacin total?`)){i(!0);try{const k=n.map(j=>bs(re(J,"alumnos",j.id)));await Promise.all(k),s([]),alert(" Se han eliminado todos los alumnos de la escuela.")}catch(k){console.error("Error al borrar todo:",k),alert("Ocurri un error al intentar borrar los registros.")}finally{i(!1)}}},V=n.filter(k=>{const j=o.toLowerCase(),_=`${k.nombre||k.firstName||""} ${k.apellidoPaterno||k.lastName||""} ${k.apellidoMaterno||""}`.toLowerCase(),I=k.curp?k.curp.toLowerCase().includes(j):!1,C=k.matricula?k.matricula.toLowerCase().includes(j):!1,E=k.email?k.email.toLowerCase().includes(j):!1,P=k.grupo?k.grupo.toLowerCase().includes(j):!1;return _.includes(j)||I||C||E||P});return r.jsxs("div",{className:"min-h-screen bg-slate-50",children:[r.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/directivo/dashboard"),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(yd,{className:"w-5 h-5 text-slate-500"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-6 h-6 text-indigo-600"}),"Gestin de Alumnos"]}),r.jsxs("p",{className:"text-sm text-slate-500",children:[n.length," estudiantes registrados en ",e==null?void 0:e.schoolName]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>p(!0),className:"text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-100 flex items-center gap-2 border border-slate-200",children:[r.jsx(Ke,{className:"w-4 h-4"}),"Importar Excel/CSV"]}),n.length>0&&r.jsxs("button",{onClick:D,className:"text-red-500 hover:text-red-700 px-4 py-2 rounded-lg font-bold hover:bg-red-50 flex items-center gap-2 border border-transparent hover:border-red-100 transition-all",title:"Eliminar a todos los alumnos mostrados",children:[r.jsx(is,{className:"w-4 h-4"}),"Borrar Todos"]}),r.jsxs("button",{onClick:()=>b(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-indigo-700 flex items-center gap-2 shadow-sm shadow-indigo-200",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Nuevo Alumno"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-6 flex gap-4",children:r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Bs,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Buscar por nombre, matrcula, CURP...",value:o,onChange:k=>l(k.target.value)})]})}),a?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 text-slate-600 text-xs font-bold uppercase tracking-wider",children:[r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Alumno"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Matrcula / CURP"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Grado/Grupo"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Turno"}),r.jsx("th",{className:"p-4 border-b border-slate-200 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:V.length>0?V.map(k=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-bold text-slate-900",children:[k.nombre||k.firstName," ",k.apellidoPaterno||k.lastName," ",k.apellidoMaterno||""]}),r.jsx("div",{className:"text-xs text-slate-500",children:k.email})]}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"text-sm font-mono text-slate-800",children:k.matricula||"S/M"}),r.jsx("div",{className:"text-xs text-slate-400",children:k.curp||""})]}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[k.grado||"?",' "',k.grupo||"?",'"']})}),r.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.turno||"N/A"}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>b(k),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"Editar",children:r.jsx(bd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>S(k.id,`${k.nombre||k.firstName} ${k.apellidoPaterno||k.lastName}`),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Eliminar",children:r.jsx(is,{className:"w-4 h-4"})})]})})]},k.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No se encontraron alumnos."})})})]})}),r.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 text-xs text-slate-500 flex justify-between",children:r.jsxs("span",{children:["Mostrando ",V.length," de ",n.length," registros"]})})]})]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:g?"Editar Alumno":"Registrar Nuevo Alumno"}),r.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600",children:r.jsx(rs,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Nombre(s) *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.nombre,onChange:k=>T({...y,nombre:k.target.value}),placeholder:"Ej. Juan Pablo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.apellidoPaterno,onChange:k=>T({...y,apellidoPaterno:k.target.value}),placeholder:"Ej. Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Apellido Materno"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.apellidoMaterno,onChange:k=>T({...y,apellidoMaterno:k.target.value}),placeholder:"Ej. Lpez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Matrcula"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.matricula,onChange:k=>T({...y,matricula:k.target.value}),placeholder:"Opcional"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"CURP"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 uppercase",value:y.curp,onChange:k=>T({...y,curp:k.target.value.toUpperCase()}),placeholder:"Opcional",maxLength:18})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Correo Electrnico"}),r.jsx("input",{type:"email",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.email,onChange:k=>T({...y,email:k.target.value}),placeholder:"ejemplo@escuela.mx"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Grado *"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl bg-white",value:y.grado,onChange:k=>T({...y,grado:k.target.value}),children:[r.jsx("option",{value:"",children:"Selecciona"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"6",children:"6"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Grupo *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl uppercase text-center",value:y.grupo,onChange:k=>T({...y,grupo:k.target.value.toUpperCase()}),placeholder:"A",maxLength:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Turno"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl bg-white",value:y.turno,onChange:k=>T({...y,turno:k.target.value}),children:[r.jsx("option",{value:"Matutino",children:"Matutino"}),r.jsx("option",{value:"Vespertino",children:"Vespertino"}),r.jsx("option",{value:"Completo",children:"Completo"}),r.jsx("option",{value:"",children:"N/A"})]})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3 bg-slate-50 rounded-b-2xl",children:[r.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),r.jsxs("button",{onClick:N,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-colors flex items-center gap-2",children:[r.jsx(Di,{className:"w-4 h-4"}),"Guardar Alumno"]})]})]})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Importacin Masiva de Alumnos"}),r.jsx("button",{onClick:()=>{p(!1),A()},className:"text-slate-400 hover:text-slate-600",children:r.jsx(rs,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"p-8",children:r.jsx(kv,{directorSchoolId:e==null?void 0:e.schoolId})})]})})]})},Ua="usuarios";class sH{async obtenerTodos(){try{const e=ue(J,Ua),n=Ye(e,Us("fechaCreacion","desc"));return(await Me(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error al obtener usuarios:",e),new Error("Error al obtener usuarios")}}async obtenerPorRol(e){try{const n=ue(J,Ua),s=Ye(n,et("rol","==",e),Us("fechaCreacion","desc"));return(await Me(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener usuarios por rol:",n),new Error("Error al obtener usuarios por rol")}}async obtenerPorInstitucion(e){try{const n=ue(J,Ua),s=Ye(n,et("institucionId","==",e),Us("fechaCreacion","desc"));return(await Me(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener usuarios por institucin:",n),new Error("Error al obtener usuarios por institucin")}}async obtenerPorId(e){try{const n=await Vn(re(J,Ua,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error al obtener usuario:",n),new Error("Error al obtener usuario")}}async cambiarRol(e,n){try{await bt(re(J,Ua,e),{rol:n})}catch(s){throw console.error("Error al cambiar rol:",s),new Error("Error al cambiar rol")}}async actualizar(e,n){try{await bt(re(J,Ua,e),n)}catch(s){throw console.error("Error al actualizar usuario:",s),new Error("Error al actualizar usuario")}}async cambiarEstado(e,n){try{await bt(re(J,Ua,e),{activo:n})}catch(s){throw console.error("Error al cambiar estado:",s),new Error("Error al cambiar estado")}}async eliminar(e){try{await bs(re(J,Ua,e))}catch(n){throw console.error("Error al eliminar usuario:",n),new Error("Error al eliminar usuario")}}async obtenerEstadisticas(){try{const e=await this.obtenerTodos();return{total:e.length,activos:e.filter(n=>n.activo).length,inactivos:e.filter(n=>!n.activo).length,porRol:{superadmin:e.filter(n=>n.rol==="superadmin").length,directivo:e.filter(n=>n.rol==="directivo").length,maestro:e.filter(n=>n.rol==="maestro").length,alumno:e.filter(n=>n.rol==="alumno").length}}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("Error al obtener estadsticas")}}}const Bc=new sH,aH=({usuario:t,onCerrar:e,onCambiado:n})=>{var d;const[s,a]=M.useState(t.rol),[i,o]=M.useState(!1),l=[{value:"superadmin",label:"Super Administrador",description:"Control total del sistema",color:"border-red-300 bg-red-50"},{value:"directivo",label:"Directivo",description:"Gestin de institucin",color:"border-blue-300 bg-blue-50"},{value:"maestro",label:"Maestro",description:"Gestin de grupos y alumnos",color:"border-green-300 bg-green-50"},{value:"alumno",label:"Alumno",description:"Acceso a su perfil",color:"border-purple-300 bg-purple-50"}],c=async()=>{var p;if(s===t.rol){e();return}if(window.confirm(`Ests seguro de cambiar el rol de ${t.nombre} ${t.apellidoPaterno} a ${(p=l.find(g=>g.value===s))==null?void 0:p.label}?`))try{o(!0),await Bc.cambiarRol(t.id,s),n()}catch(g){console.error("Error al cambiar rol:",g),alert("Error al cambiar rol")}finally{o(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Qh,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Cambiar Rol"}),r.jsxs("p",{className:"text-sm text-slate-600",children:[t.nombre," ",t.apellidoPaterno]})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-6 h-6 text-slate-600"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3",children:[r.jsx(Na,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Importante:"}),r.jsx("p",{children:"Cambiar el rol afectar los permisos y el acceso del usuario al sistema."})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol Actual"}),r.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:r.jsx("span",{className:"text-lg font-semibold text-slate-900",children:(d=l.find(m=>m.value===t.rol))==null?void 0:d.label})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Nuevo Rol"}),r.jsx("div",{className:"space-y-3",children:l.map(m=>r.jsx("button",{onClick:()=>a(m.value),className:`w-full p-4 border-2 rounded-xl text-left transition-all ${s===m.value?`${m.color} border-opacity-100`:"border-slate-200 bg-white hover:bg-slate-50"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:m.label}),r.jsx("div",{className:"text-sm text-slate-600",children:m.description})]}),s===m.value&&r.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},m.value))})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[r.jsx("button",{onClick:e,disabled:i,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancelar"}),r.jsx("button",{onClick:c,disabled:i||s===t.rol,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando..."]}):"Cambiar Rol"})]})]})})},iH=({usuarios:t,onEditar:e,onActualizar:n,currentUserId:s})=>{const[a,i]=M.useState(null),[o,l]=M.useState(null),c=y=>({superadmin:"bg-red-100 text-red-800 border-red-200",directivo:"bg-blue-100 text-blue-800 border-blue-200",maestro:"bg-green-100 text-green-800 border-green-200",alumno:"bg-purple-100 text-purple-800 border-purple-200",guest:"bg-gray-100 text-gray-800 border-gray-200"})[y]||"bg-gray-100 text-gray-800 border-gray-200",d=y=>({superadmin:"Super Admin",directivo:"Directivo",maestro:"Maestro",alumno:"Alumno",guest:"Invitado"})[y]||y,m=async y=>{if(y.id===s){alert("No puedes desactivar tu propia cuenta");return}if(window.confirm(`Ests seguro de ${y.activo?"desactivar":"activar"} a ${y.nombre} ${y.apellidoPaterno}?`))try{l(y.id),await Bc.cambiarEstado(y.id,!y.activo),n()}catch(A){console.error("Error al cambiar estado:",A),alert("Error al cambiar estado del usuario")}finally{l(null)}},p=async y=>{if(y.id===s){alert("No puedes eliminar tu propia cuenta");return}if(window.confirm(`Ests seguro de eliminar a ${y.nombre} ${y.apellidoPaterno}?

Esta accin no se puede deshacer.`))try{l(y.id),await Bc.eliminar(y.id),n()}catch(A){console.error("Error al eliminar usuario:",A),alert("Error al eliminar usuario")}finally{l(null)}},g=y=>{if(y.id===s){alert("No puedes cambiar tu propio rol");return}i(y)},x=()=>{i(null),n()};return t.length===0?r.jsx("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:r.jsx("p",{className:"text-slate-600",children:"No se encontraron usuarios"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"ltimo Acceso"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:[y.nombre.charAt(0),y.apellidoPaterno.charAt(0)]}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-slate-900",children:[y.nombre," ",y.apellidoPaterno]}),y.id===s&&r.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"(T)"})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:y.email}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("button",{onClick:()=>g(y),disabled:y.id===s||o===y.id,className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${c(y.rol)} hover:opacity-80 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,children:[r.jsx(Qh,{className:"w-3 h-3"}),d(y.rol)]})}),r.jsx("td",{className:"px-6 py-4",children:y.activo?r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Activo"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold",children:[r.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),"Inactivo"]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(y.ultimoAcceso).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>e(y),disabled:o===y.id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Editar",children:r.jsx(kI,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>m(y),disabled:y.id===s||o===y.id,className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors disabled:opacity-50",title:y.activo?"Desactivar":"Activar",children:y.activo?r.jsx(bO,{className:"w-4 h-4"}):r.jsx(EO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(y),disabled:y.id===s||o===y.id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Eliminar",children:r.jsx(is,{className:"w-4 h-4"})})]})})]},y.id))})]})})}),a&&r.jsx(aH,{usuario:a,onCerrar:()=>i(null),onCambiado:x})]})},rH=({usuario:t,onCerrar:e,onGuardado:n})=>{const{user:s}=ut(),a=!!t,[i,o]=M.useState({email:(t==null?void 0:t.email)||"",nombre:(t==null?void 0:t.nombre)||"",apellidoPaterno:(t==null?void 0:t.apellidoPaterno)||"",apellidoMaterno:(t==null?void 0:t.apellidoMaterno)||"",rol:(t==null?void 0:t.rol)||"maestro",password:"",confirmarPassword:""}),[l,c]=M.useState(!1),[d,m]=M.useState(""),p=y=>{o({...i,[y.target.name]:y.target.value}),m("")},g=()=>{if(!i.email||!i.nombre||!i.apellidoPaterno)return m("Por favor completa todos los campos obligatorios"),!1;if(!a){if(!i.password)return m("La contrasea es obligatoria"),!1;if(i.password.length<6)return m("La contrasea debe tener al menos 6 caracteres"),!1;if(i.password!==i.confirmarPassword)return m("Las contraseas no coinciden"),!1}return!0},x=async()=>{if(g())try{if(c(!0),a)await Bc.actualizar(t.id,{nombre:i.nombre,apellidoPaterno:i.apellidoPaterno,apellidoMaterno:i.apellidoMaterno,email:i.email});else{const y={email:i.email,password:i.password,nombre:i.nombre,apellidoPaterno:i.apellidoPaterno,apellidoMaterno:i.apellidoMaterno,rol:i.rol};await Ur.register(y,(s==null?void 0:s.id)||"system")}n()}catch(y){console.error("Error al guardar usuario:",y),m(y.message||"Error al guardar usuario")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Uo,{className:"w-6 h-6 text-indigo-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:a?"Editar Usuario":"Crear Nuevo Usuario"})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(rs,{className:"w-6 h-6 text-slate-600"})})]}),r.jsxs("div",{className:"p-6",children:[d&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(Na,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-800",children:d})]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"email",name:"email",type:"email",value:i.email,onChange:p,disabled:a,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-slate-100 disabled:cursor-not-allowed",placeholder:"usuario@ejemplo.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre *"}),r.jsx("input",{id:"nombre",name:"nombre",type:"text",value:i.nombre,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Juan"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apellidoPaterno",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Apellido Paterno *"}),r.jsx("input",{id:"apellidoPaterno",name:"apellidoPaterno",type:"text",value:i.apellidoPaterno,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apellidoMaterno",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Apellido Materno"}),r.jsx("input",{id:"apellidoMaterno",name:"apellidoMaterno",type:"text",value:i.apellidoMaterno,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Garca"})]})]}),!a&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rol",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{id:"rol",name:"rol",value:i.rol,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"superadmin",children:"Super Administrador"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]})]}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea *"}),r.jsxs("div",{className:"relative",children:[r.jsx(e0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"password",name:"password",type:"password",value:i.password,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Mnimo 6 caracteres"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmarPassword",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Confirmar Contrasea *"}),r.jsxs("div",{className:"relative",children:[r.jsx(e0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"confirmarPassword",name:"confirmarPassword",type:"password",value:i.confirmarPassword,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Repite la contrasea"})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[r.jsx("button",{onClick:e,disabled:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancelar"}),r.jsx("button",{onClick:x,disabled:l,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando..."]}):a?"Guardar Cambios":"Crear Usuario"})]})]})})},oH=()=>{const{user:t}=ut(),[e,n]=M.useState([]),[s,a]=M.useState([]),[i,o]=M.useState(!0),[l,c]=M.useState(!1),[d,m]=M.useState(null),[p,g]=M.useState(""),[x,y]=M.useState("todos"),[T,A]=M.useState("todos");M.useEffect(()=>{b()},[]),M.useEffect(()=>{N()},[e,p,x,T]);const b=async()=>{try{o(!0);const j=await Bc.obtenerTodos();n(j)}catch(j){console.error("Error al cargar usuarios:",j),alert("Error al cargar usuarios")}finally{o(!1)}},N=()=>{let j=[...e];if(p){const _=p.toLowerCase();j=j.filter(I=>I.nombre.toLowerCase().includes(_)||I.apellidoPaterno.toLowerCase().includes(_)||I.email.toLowerCase().includes(_))}x!=="todos"&&(j=j.filter(_=>_.rol===x)),T==="activos"?j=j.filter(_=>_.activo):T==="inactivos"&&(j=j.filter(_=>!_.activo)),a(j)},S=()=>{m(null),c(!0)},D=j=>{m(j),c(!0)},V=()=>{c(!1),m(null)},k=()=>{c(!1),m(null),b()};return i?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando usuarios..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Gestin de Usuarios"}),r.jsx("p",{className:"text-slate-600",children:"Administra usuarios, roles y permisos del sistema"})]}),r.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors shadow-lg",children:[r.jsx(Fn,{className:"w-5 h-5"}),"Crear Usuario"]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:p,onChange:j=>g(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:x,onChange:j=>y(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"todos",children:"Todos los roles"}),r.jsx("option",{value:"superadmin",children:"Super Admin"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:T,onChange:j=>A(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"activos",children:"Activos"}),r.jsx("option",{value:"inactivos",children:"Inactivos"})]})]})]}),r.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Mostrando ",r.jsx("span",{className:"font-semibold text-slate-900",children:s.length})," de ",r.jsx("span",{className:"font-semibold text-slate-900",children:e.length})," usuarios"]})]}),r.jsx(iH,{usuarios:s,onEditar:D,onActualizar:b,currentUserId:(t==null?void 0:t.id)||""}),l&&r.jsx(rH,{usuario:d,onCerrar:V,onGuardado:k})]})})},lH=()=>{const t=Cs(),[e,n]=M.useState([]),[s,a]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);let d=[];try{d=(await Dv.obtenerTodas()).filter(T=>T.activa)}catch(y){console.error("Error cargando materias DB:",y)}let m=[];const p=Mn.obtenerEstadisticas();p.totalProgramas>0?p.materiasDisponibles.forEach(y=>{m.push(...Mn.buscarPorMateria(y))}):(console.warn("Servicio vaco, usando Fallback JSON directo"),m=LI);const g=[];m.forEach(y=>{var A,b,N,S,D,V,k,j;if(!d.some(_=>_.nombre.toLowerCase().trim()===y.materia.toLowerCase().trim()&&_.grado===y.semestre))try{const _={id:`sep-${String(y.materia).replace(/\s+/g,"-")}-${y.semestre}`,nombre:y.materia,clave:`SEP-${y.semestre}${String(y.materia).substring(0,3).toUpperCase()}`,grado:y.semestre,categoria:((b=(A=y.organizador_curricular)==null?void 0:A.categorias)==null?void 0:b[0])||"Unidad de Aprendizaje",horasSemanales:((N=y.metadata)==null?void 0:N.horas_semanales)||4,totalHoras:(((S=y.metadata)==null?void 0:S.horas_semanales)||4)*16,proposito:((V=(D=y.organizador_curricular)==null?void 0:D.propositos_formativos)==null?void 0:V[0])||`Programa oficial del MCCEMS para ${y.materia}.`,competencias:((k=y.organizador_curricular)==null?void 0:k.metas_aprendizaje)||[],ejesFormativos:((j=y.organizador_curricular)==null?void 0:j.categorias)||[],unidades:y.unidades||[],bibliografiaBasica:y.bibliografia||[],bibliografiaComplementaria:[],recursosDigitales:[],criteriosEvaluacion:(y.criterios_evaluacion||[]).map(I=>({aspecto:I.aspecto,descripcion:I.descripcion,porcentaje:I.porcentaje})),instrumentosEvaluacion:[],activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:"SEP-OFFICIAL"};g.push(_)}catch(_){console.error("Error adaptando programa:",y.materia,_)}});const x=[...d,...g].sort((y,T)=>{const A=Number(y.grado)||0,b=Number(T.grado)||0;return A!==b?A-b:y.nombre.localeCompare(T.nombre)});x.length===0&&console.error("No se encontraron materias ni en DB ni en Oficiales"),n(x)}catch(d){console.error("Error crtico al cargar materias:",d)}finally{a(!1)}},o=d=>d.toLowerCase().includes("matemticas")?"":d.toLowerCase().includes("espaol")?"":d.toLowerCase().includes("qumica")?"":d.toLowerCase().includes("historia")?"":d.toLowerCase().includes("ingls")?"":"",l=d=>d.toLowerCase().includes("matemticas")?"from-blue-500 to-indigo-600":d.toLowerCase().includes("espaol")?"from-green-500 to-emerald-600":d.toLowerCase().includes("qumica")?"from-purple-500 to-violet-600":d.toLowerCase().includes("historia")?"from-orange-500 to-red-600":d.toLowerCase().includes("ingls")?"from-cyan-500 to-blue-600":"from-slate-500 to-slate-600",c=d=>{d!=="guia-curricular"&&t("/maestro/dashboard",{state:{view:d}})};return s?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(go,{activeView:"guia-curricular",onNavigate:c}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando materias..."})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(go,{activeView:"guia-curricular",onNavigate:c}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:" Gua Curricular Interactiva"}),r.jsx("p",{className:"text-lg text-slate-600",children:"Explora el programa completo de cada materia con contenidos, recursos y evaluacin"})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-6 mb-8 text-white",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:r.jsx(Wn,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Qu encontrars aqu?"}),r.jsxs("ul",{className:"space-y-2 text-white/90",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Programa completo del semestre por unidades y temas"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Propsitos formativos y competencias a desarrollar"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Contenidos detallados y aprendizajes esperados"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Recursos digitales, bibliografa y actividades sugeridas"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Criterios e instrumentos de evaluacin"]})]})]})]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Selecciona una materia:"}),e.length===0?r.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:[r.jsx(it,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 text-lg",children:"No hay materias disponibles"}),r.jsx("p",{className:"text-slate-500 text-sm mt-2 mb-6",children:"Contacta al administrador para agregar materias"}),r.jsxs("div",{className:"max-w-md mx-auto bg-slate-100 p-4 rounded-lg text-left text-xs font-mono text-slate-600",children:[r.jsx("p",{className:"font-bold mb-2",children:"Diagnstico de Sistema:"}),r.jsxs("p",{children:[" Programas Oficiales (JSON + Index): ",Mn.obtenerEstadisticas().totalProgramas]}),r.jsxs("p",{children:[" Materias en Base de Datos: ",s?"Cargando...":"Verificando..."]}),r.jsx("p",{className:"mt-2 text-[10px] text-slate-400",children:'Si "Programas Oficiales" es 0, hay un error en el archivo de datos local (programas_sep.json).'})]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition-colors font-medium text-sm",children:"Recargar Pgina"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(d=>r.jsxs("button",{onClick:()=>t(`/maestro/guia-curricular/${d.id}`),className:"group bg-white rounded-2xl p-6 border-2 border-slate-200 hover:border-indigo-400 hover:shadow-xl transition-all duration-300 text-left",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${l(d.nombre)} rounded-2xl flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform`,children:o(d.nombre)}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-semibold",children:[d.grado," Semestre"]}),d.id.startsWith("sep-")&&r.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-lg text-[10px] font-bold",children:"DGB/SEP 2025"})]})]}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-indigo-600 transition-colors",children:d.nombre}),r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:d.proposito}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx(Fc,{className:"w-4 h-4 text-indigo-500"}),r.jsxs("span",{children:[d.horasSemanales," hrs/semana  ",d.totalHoras," hrs totales"]})]}),r.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:d.unidades&&d.unidades.length>0?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"w-4 h-4 text-indigo-500"}),r.jsxs("span",{children:[d.unidades.length," unidades  ",d.unidades.reduce((m,p)=>m+p.temas.length,0)," temas"]})]}):(()=>{const m=Mn.buscarPorMateriaYSemestre(d.nombre,d.grado);return m&&m.progresiones?r.jsxs(r.Fragment,{children:[r.jsx(Wn,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-semibold text-green-700",children:[m.progresiones.length," Progresiones Oficiales"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-400",children:"Programa en actualizacin"})]})})()})]}),r.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-semibold group-hover:gap-3 transition-all",children:[r.jsx("span",{children:"Ver programa completo"}),r.jsx(yU,{className:"w-5 h-5"})]})]},d.id))})]}),r.jsxs("div",{className:"mt-12 bg-white rounded-2xl p-6 border border-slate-200",children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-3",children:" Tip para Maestros"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Cada materia incluye el programa completo del semestre con todos los contenidos, recursos digitales recomendados, bibliografa y criterios de evaluacin. salo como gua para planear tus clases y asegurarte de cubrir todos los temas."})]})]})})]})},cH=()=>{var A,b,N,S,D,V;const{materiaId:t}=QP(),e=Cs(),[n,s]=M.useState(null),[a,i]=M.useState(!0),[o,l]=M.useState(1),[c,d]=M.useState(null),[m,p]=M.useState(!1);M.useEffect(()=>{t&&g()},[t]);const g=async()=>{var k,j,_,I,C,E;try{i(!0);let P=await Dv.obtenerPorId(t);if(!P&&(t!=null&&t.startsWith("sep-"))){console.log(" Materia no en DB, buscando en Fallback local...");const H=Mn.obtenerEstadisticas().materiasDisponibles;let O=null;for(const q of H)if(O=Mn.buscarPorMateria(q).find(G=>`sep-${String(G.materia).replace(/\s+/g,"-")}-${G.semestre}`===t),O)break;O&&(P={id:t,nombre:O.materia,clave:`SEP-${O.semestre}${String(O.materia).substring(0,3).toUpperCase()}`,grado:O.semestre,categoria:((j=(k=O.organizador_curricular)==null?void 0:k.categorias)==null?void 0:j[0])||"Unidad de Aprendizaje",horasSemanales:((_=O.metadata)==null?void 0:_.horas_semanales)||4,totalHoras:(((I=O.metadata)==null?void 0:I.horas_semanales)||4)*16,proposito:`Programa oficial del MCCEMS para ${O.materia}.`,competencias:((C=O.organizador_curricular)==null?void 0:C.metas_aprendizaje)||[],ejesFormativos:((E=O.organizador_curricular)==null?void 0:E.categorias)||[],unidades:[],bibliografiaBasica:[],bibliografiaComplementaria:[],recursosDigitales:[],criteriosEvaluacion:[],instrumentosEvaluacion:[],activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:"SEP-OFFICIAL"})}if(s(P),P)try{const R=Mn.buscarPorMateriaYSemestre(P.nombre,P.grado);d(R),console.log(" Programa oficial SEP encontrado:",R)}catch{console.log(" No se encontr programa oficial SEP para esta materia"),d(null)}}catch(P){console.error("Error al cargar materia:",P)}finally{i(!1)}},x=k=>{l(o===k?null:k)},y=k=>{switch(k){case"video":return r.jsx($O,{className:"w-4 h-4"});case"plataforma":return r.jsx(Np,{className:"w-4 h-4"});case"libro":return r.jsx(VE,{className:"w-4 h-4"});default:return r.jsx(_s,{className:"w-4 h-4"})}},T=k=>{if(k==="guia-curricular"){e("/maestro/guia-curricular");return}e("/maestro/dashboard",{state:{view:k}})};return a?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(go,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando programa..."})]})})]}):n?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(go,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("button",{onClick:()=>e("/maestro/guia-curricular"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(yd,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Volver a la gua"})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 mb-8 text-white",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[n.nombre,n.id.startsWith("sep-")&&r.jsxs("span",{className:"bg-white/20 text-white text-xs px-2 py-1 rounded-lg border border-white/30 flex items-center gap-1 font-semibold",children:[r.jsx(Ep,{className:"w-3 h-3"}),"Versin 2025"]})]}),r.jsx("p",{className:"text-white/90 text-lg mb-4",children:"Programa del Semestre"}),r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx("span",{className:"font-semibold",children:"Clave:"})," ",n.clave]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx(Fc,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.horasSemanales," hrs/semana"]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx(it,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.totalHoras," hrs totales"]})]})]})]})})}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Wn,{className:"w-5 h-5 text-indigo-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Propsitos Formativos (Versin 2025)"})]}),(A=c==null?void 0:c.organizador_curricular)!=null&&A.propositos_formativos&&c.organizador_curricular.propositos_formativos.length>0?r.jsx("div",{className:"space-y-3",children:c.organizador_curricular.propositos_formativos.map((k,j)=>r.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg border-l-4 border-indigo-500",children:[r.jsx("div",{className:"bg-indigo-600 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:j+1}),r.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:k})]},j))}):r.jsx("p",{className:"text-slate-700 leading-relaxed",children:n.proposito})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:r.jsx(Ep,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Competencias a Desarrollar"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.competencias.map((k,j)=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ps,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-slate-700",children:k})]},j))})]}),c&&r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-2 border-indigo-200 shadow-md",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(Ep,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[" Programa Oficial DGB/SEP",r.jsx("span",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded-full",children:"MCCEMS"})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Marco Curricular Comn de la Educacin Media Superior"})]})]}),c.url_fuente&&r.jsxs("a",{href:c.url_fuente,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 flex items-center gap-1 text-sm font-medium transition-colors",children:[r.jsx(Xg,{className:"w-4 h-4"}),"Ver PDF oficial"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[((b=c.metadata)==null?void 0:b.creditos)&&r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Crditos"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:c.metadata.creditos})]}),((N=c.metadata)==null?void 0:N.horas_semanales)&&r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Horas/Semana"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:c.metadata.horas_semanales})]}),r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Progresiones"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:((S=c.progresiones)==null?void 0:S.length)||0})]}),r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Categoras"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:((V=(D=c.organizador_curricular)==null?void 0:D.categorias)==null?void 0:V.length)||0})]})]}),c.progresiones&&c.progresiones.length>0&&r.jsxs("div",{className:"bg-white/80 rounded-xl p-4",children:[r.jsxs("button",{onClick:()=>p(!m),className:"w-full flex items-center justify-between text-left font-semibold text-slate-900 hover:text-indigo-700 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ps,{className:"w-5 h-5 text-indigo-600"}),"Progresiones de Aprendizaje Oficiales (",c.progresiones.length,")"]}),m?r.jsx(FE,{className:"w-5 h-5"}):r.jsx(zE,{className:"w-5 h-5"})]}),m&&r.jsx("div",{className:"mt-4 space-y-4 max-h-[600px] overflow-y-auto",children:c.progresiones.map((k,j)=>r.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200 hover:border-indigo-300 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-indigo-600 text-white font-bold min-w-[32px] h-8 flex items-center justify-center rounded-lg text-sm shadow-sm",children:k.id}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-slate-900 font-medium text-sm leading-relaxed mb-2",children:k.descripcion}),k.metas&&k.metas.length>0&&r.jsxs("div",{className:"mt-3 pl-3 border-l-2 border-green-400 bg-green-50/50 rounded-r py-2 pr-2",children:[r.jsx("p",{className:"text-xs font-semibold text-green-700 mb-1",children:" Metas de Aprendizaje:"}),k.metas.map((_,I)=>r.jsxs("div",{className:"text-xs text-slate-700 flex items-start gap-1 mt-1",children:[r.jsx(Ps,{className:"w-3 h-3 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:_})]},I))]}),k.tematicas&&k.tematicas.length>0&&r.jsxs("div",{className:"mt-3 pl-3 border-l-2 border-blue-400 bg-blue-50/50 rounded-r py-2 pr-2",children:[r.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:" Temticas a desarrollar:"}),r.jsx("ul",{className:"space-y-1",children:k.tematicas.map((_,I)=>r.jsxs("li",{className:"text-xs text-slate-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-500 font-bold",children:""}),r.jsx("span",{className:"flex-1",children:_})]},I))})]})]})]})},j))})]}),r.jsxs("div",{className:"mt-4 text-xs text-slate-600 flex items-center justify-between",children:[r.jsx("span",{children:"Fuente: DGB/SEP - Marco Curricular Comn"}),c.fecha_extraccion&&r.jsxs("span",{children:["Extrado: ",new Date(c.fecha_extraccion).toLocaleDateString("es-MX")]})]})]}),n.ejesFormativos&&n.ejesFormativos.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:r.jsx(it,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Ejes Formativos / Categoras"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.ejesFormativos.map((k,j)=>r.jsx("span",{className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-xl text-sm font-medium border border-blue-100",children:k},j))})]}),(c==null?void 0:c.orientaciones_didacticas)&&c.orientaciones_didacticas.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-cyan-100 p-2 rounded-lg",children:r.jsx(ps,{className:"w-5 h-5 text-cyan-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Orientaciones Didcticas Sugeridas"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.orientaciones_didacticas.map((k,j)=>r.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[r.jsx("div",{className:"bg-cyan-500 w-2 h-2 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-slate-700 text-sm",children:k})]},j))})]}),n.unidades&&n.unidades.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:" Unidades del Programa"}),r.jsx("div",{className:"space-y-4",children:n.unidades.map(k=>r.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("button",{onClick:()=>x(k.numero),className:"w-full p-6 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[r.jsx("div",{className:"bg-indigo-100 text-indigo-700 w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg",children:k.numero}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900",children:k.nombre}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Fc,{className:"w-4 h-4"}),k.duracionHoras," horas"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(it,{className:"w-4 h-4"}),k.temas.length," temas"]})]})]})]}),o===k.numero?r.jsx(FE,{className:"w-6 h-6 text-slate-400"}):r.jsx(zE,{className:"w-6 h-6 text-slate-400"})]}),o===k.numero&&r.jsxs("div",{className:"border-t border-slate-200 p-6 bg-slate-50",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:" Propsito:"}),r.jsx("p",{className:"text-slate-700",children:k.proposito})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:" Temas:"}),r.jsx("div",{className:"space-y-4",children:k.temas.map(j=>r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded-lg text-sm font-bold",children:j.numero}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h5",{className:"font-bold text-slate-900",children:j.nombre}),r.jsxs("span",{className:"text-xs text-slate-500",children:[j.duracionHoras," horas"]})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Contenidos:"}),r.jsx("ul",{className:"space-y-1",children:j.contenidos.map((_,I)=>r.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[r.jsx("span",{className:"text-indigo-500 mt-1",children:""}),r.jsx("span",{children:_})]},I))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Aprendizajes Esperados:"}),r.jsx("ul",{className:"space-y-1",children:j.aprendizajesEsperados.map((_,I)=>r.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[r.jsx(Ps,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:_})]},I))})]})]},j.numero))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:" Actividades Sugeridas:"}),r.jsx("ul",{className:"space-y-2",children:k.actividadesSugeridas.map((j,_)=>r.jsxs("li",{className:"flex items-start gap-2 text-slate-700",children:[r.jsx(ps,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-1"}),r.jsx("span",{className:"text-sm",children:j})]},_))})]})]})]},k.numero))})]}),n.recursosDigitales&&n.recursosDigitales.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:r.jsx(Np,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Recursos Digitales Recomendados"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.recursosDigitales.map((k,j)=>r.jsxs("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-3 p-4 border border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 transition-all group",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors",children:y(k.tipo)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h4",{className:"font-semibold text-slate-900 group-hover:text-purple-700 transition-colors",children:k.nombre}),r.jsx(Xg,{className:"w-4 h-4 text-slate-400 flex-shrink-0"})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:k.descripcion})]})]},j))})]}),n.criteriosEvaluacion&&n.criteriosEvaluacion.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:r.jsx(Ps,{className:"w-5 h-5 text-orange-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Criterios de Evaluacin"})]}),r.jsx("div",{className:"space-y-3",children:n.criteriosEvaluacion.map((k,j)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900",children:k.aspecto}),r.jsx("p",{className:"text-sm text-slate-600",children:k.descripcion})]}),r.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[k.porcentaje,"%"]})]},j))})]}),n.bibliografiaBasica&&n.bibliografiaBasica.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:r.jsx(VE,{className:"w-5 h-5 text-slate-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Bibliografa Recomendada"})]}),r.jsx("div",{className:"space-y-2",children:n.bibliografiaBasica.map((k,j)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"bg-white p-1 rounded border border-slate-200",children:k.disponibilidad==="digital"?r.jsx(Np,{className:"w-3 h-3 text-blue-500"}):r.jsx(it,{className:"w-3 h-3 text-slate-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-slate-700 text-sm font-medium",children:k.titulo}),r.jsxs("p",{className:"text-slate-500 text-xs italic",children:[k.autor," ",k.ao?`(${k.ao})`:""]})]})]},j))})]})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(go,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg text-slate-600",children:"Materia no encontrada"}),r.jsx("button",{onClick:()=>e("/maestro/guia-curricular"),className:"mt-4 text-indigo-600 hover:text-indigo-700",children:"Volver a la gua"})]})})]})},Wi=[],dH=t=>t==="all"?Wi:Wi.filter(e=>e.category===t),uH=t=>{const e=t.toLowerCase();return Wi.filter(n=>n.name.toLowerCase().includes(e)||n.description.toLowerCase().includes(e)||n.tags.some(s=>s.toLowerCase().includes(e)))},mH=({tool:t})=>{const e=Cs(),n=()=>{e(`/maestro/herramientas/${t.id}`)};return r.jsxs("div",{onClick:n,className:"group relative bg-white rounded-2xl border-2 border-slate-200 p-6 hover:border-indigo-500 hover:shadow-xl transition-all duration-300 cursor-pointer",children:[t.isPro&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(AU,{className:"w-5 h-5 text-amber-500"})}),t.isNew&&r.jsx("div",{className:"absolute top-4 right-4 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Nuevo"}),r.jsx("div",{className:"mb-4 p-3 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl w-fit group-hover:scale-110 transition-transform",children:r.jsx(t.icon,{className:"w-8 h-8 text-indigo-600"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors",children:t.name}),r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:t.description}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.tags.slice(0,3).map((s,a)=>r.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-lg",children:s},a)),t.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-lg",children:["+",t.tags.length-3]})]}),r.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(aa,{className:"w-5 h-5 text-indigo-500"})})]})},hH=[{id:"all",name:"Todas",color:"slate"},{id:"planeacion",name:"Planeacin",color:"indigo"},{id:"actividades",name:"Actividades",color:"emerald"},{id:"evaluacion",name:"Evaluacin",color:"purple"},{id:"materiales",name:"Materiales",color:"amber"},{id:"comunicacion",name:"Comunicacin",color:"pink"}],fH=()=>{const[t,e]=M.useState("all"),[n,s]=M.useState(""),a=M.useMemo(()=>{let i=dH(t);return n.trim()&&(i=uH(n)),i},[t,n]);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto p-6 pb-20",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl",children:r.jsx(aa,{className:"w-10 h-10 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Herramientas Educativas"}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[Wi.length," herramientas disponibles para potenciar tu enseanza"]})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(Bs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:n,onChange:i=>s(i.target.value),placeholder:"Buscar herramientas...",className:"w-full pl-12 pr-4 py-4 rounded-2xl border-2 border-slate-200 bg-white focus:border-indigo-500 focus:outline-none transition-colors text-lg"})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Gc,{className:"w-5 h-5 text-slate-600"}),r.jsx("span",{className:"font-bold text-slate-700",children:"Categoras"})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:hH.map(i=>{const o=t===i.id,l=i.id==="all"?Wi.length:Wi.filter(c=>c.category===i.id).length;return r.jsxs("button",{onClick:()=>e(i.id),className:`px-6 py-3 rounded-xl font-bold transition-all ${o?`bg-${i.color}-500 text-white shadow-lg scale-105`:"bg-white text-slate-700 border-2 border-slate-200 hover:border-slate-300"}`,children:[i.name,r.jsxs("span",{className:`ml-2 text-sm ${o?"text-white/80":"text-slate-500"}`,children:["(",l,")"]})]},i.id)})})]}),a.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(i=>r.jsx(mH,{tool:i},i.id))}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"No se encontraron herramientas"}),r.jsx("p",{className:"text-slate-600",children:"Intenta con otra bsqueda o categora"})]}),Wi.length===0&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"Prximamente"}),r.jsx("p",{className:"text-slate-600",children:"Las herramientas se estn configurando..."})]})]})})},pH=({userName:t,onChoice:e,onSchoolSelected:n})=>{const[s,a]=M.useState(null),[i,o]=M.useState([]),[l,c]=M.useState([]),[d,m]=M.useState(""),[p,g]=M.useState(!1),[x,y]=M.useState(null);M.useEffect(()=>{T()},[]),M.useEffect(()=>{if(d){const b=i.filter(N=>N.nombre.toLowerCase().includes(d.toLowerCase())||N.codigo.toLowerCase().includes(d.toLowerCase()));c(b)}else c(i)},[d,i]);const T=async()=>{try{g(!0);const N=(await Me(ue(J,"schools"))).docs.map(S=>({id:S.id,nombre:S.data().nombre,codigo:S.data().codigo,direccion:S.data().direccion}));o(N),c(N)}catch(b){console.error("Error al cargar escuelas:",b)}finally{g(!1)}},A=()=>{s==="join"&&x&&n?n(x.id,x.nombre):s==="create"?e("create"):s==="join"&&!x&&e("join")};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:r.jsx(as,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Bienvenido a EDUPLANMX!"}),r.jsxs("p",{className:"text-xl text-gray-600",children:["Hola, ",r.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]}),r.jsx("div",{className:"mb-8",children:r.jsx("p",{className:"text-center text-gray-700 text-lg",children:"Para comenzar, necesitamos conocer tu escuela:"})}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{children:[r.jsx("button",{onClick:()=>a("join"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ${s==="join"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${s==="join"?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(Ke,{className:`w-6 h-6 ${s==="join"?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Mi escuela ya est registrada"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Selecciona tu escuela de la lista o bscala por nombre/cdigo"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s==="join"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:s==="join"&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})}),s==="join"&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"relative mb-4",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",value:d,onChange:b=>m(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Cargando escuelas..."})]}):l.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(jt,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:d?"No se encontraron escuelas":"No hay escuelas registradas"}),r.jsx("button",{onClick:()=>a("create"),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Registra la primera escuela"})]}):r.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:l.map(b=>r.jsx("button",{onClick:()=>y(b),className:`w-full p-3 rounded-lg border transition-all text-left ${(x==null?void 0:x.id)===b.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-white"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(jt,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${(x==null?void 0:x.id)===b.id?"text-blue-600":"text-gray-400"}`}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:b.nombre}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Cdigo: ",b.codigo]}),b.direccion&&r.jsxs("p",{className:"text-xs text-gray-400 flex items-center mt-1",children:[r.jsx(Kh,{className:"w-3 h-3 mr-1"}),b.direccion]})]}),r.jsx("div",{className:"ml-2",children:r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${(x==null?void 0:x.id)===b.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:(x==null?void 0:x.id)===b.id&&r.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})})]})},b.id))}),l.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsx("button",{onClick:()=>{y(null),e("join")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"No encuentras tu escuela? Bscala por cdigo CCT"})})]})]}),r.jsx("button",{onClick:()=>a("create"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ${s==="create"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${s==="create"?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(jt,{className:`w-6 h-6 ${s==="create"?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Registrar una nueva escuela"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Crea el perfil de tu escuela y s el primero en registrarla"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s==="create"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:s==="create"&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})})]}),r.jsxs("button",{onClick:A,disabled:!s||s==="join"&&!x,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${s&&(s==="create"||x)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Continuar",r.jsx(ll,{className:"ml-2 w-5 h-5"})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Sistema de Planeacin Didctica  MCCEMS 2024"})})]})})},gH=({onBack:t,onSchoolSelected:e})=>{const[n,s]=M.useState("code"),[a,i]=M.useState(""),[o,l]=M.useState(!1),[c,d]=M.useState([]),[m,p]=M.useState(""),[g,x]=M.useState(null),y=async()=>{if(!a.trim()){p("Por favor ingresa un cdigo de acceso");return}l(!0),p("");try{const S=await qc.getSchoolByCode(a.trim());S?d([{id:S.id,nombre:S.nombre,cct:S.cct,municipio:S.municipio,turno:S.turno,codigoAcceso:S.codigoAcceso,totalDocentes:S.estadisticas.totalDocentes}]):(p("No se encontr ninguna escuela con ese cdigo"),d([]))}catch{p("Error al buscar la escuela. Intenta de nuevo."),d([])}finally{l(!1)}},T=async()=>{if(!a.trim()||a.length<3){p("Por favor ingresa al menos 3 caracteres");return}l(!0),p("");try{const S=await qc.searchSchools(a.trim());S.length>0?d(S):(p("No se encontraron escuelas con ese nombre"),d([]))}catch{p("Error al buscar escuelas. Intenta de nuevo."),d([])}finally{l(!1)}},A=()=>{n==="code"?y():T()},b=S=>{x(S)},N=()=>{g&&e(g.id,g.nombre)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(yd,{className:"w-5 h-5 mr-2"}),"Volver"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Buscar tu Escuela"}),r.jsx("p",{className:"text-gray-600",children:"Encuentra tu escuela para unirte a ella"})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsx("button",{onClick:()=>{s("code"),i(""),d([]),p("")},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${n==="code"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Buscar por Cdigo"}),r.jsx("button",{onClick:()=>{s("name"),i(""),d([]),p("")},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${n==="name"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Buscar por Nombre"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="code"?"Cdigo de Acceso":"Nombre de la Escuela"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:a,onChange:S=>i(S.target.value),onKeyPress:S=>S.key==="Enter"&&A(),placeholder:n==="code"?"Ej: CBT001":"Ej: CBT No. 1 Dr. Gustavo Baz",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:A,disabled:o,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center",children:o?r.jsx(cl,{className:"w-5 h-5 animate-spin"}):"Buscar"})]}),m&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m})]}),c.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Resultados (",c.length,")"]}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.map(S=>r.jsx("button",{onClick:()=>b(S),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${(g==null?void 0:g.id)===S.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${(g==null?void 0:g.id)===S.id?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(Gm,{className:`w-6 h-6 ${(g==null?void 0:g.id)===S.id?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:S.nombre}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Gm,{className:"w-4 h-4 mr-1"}),"CCT: ",S.cct]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Kh,{className:"w-4 h-4 mr-1"}),S.municipio]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ke,{className:"w-4 h-4 mr-1"}),S.totalDocentes," docentes"]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:["Turno ",S.turno]}),r.jsx("span",{className:"inline-block ml-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:S.codigoAcceso})]})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${(g==null?void 0:g.id)===S.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:(g==null?void 0:g.id)===S.id&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})},S.id))})]}),r.jsxs("button",{onClick:N,disabled:!g,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${g?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Unirme a esta Escuela",r.jsx(ll,{className:"ml-2 w-5 h-5"})]})]})})},xH=["Matutino","Vespertino","Nocturno","Discontinuo"],vH=["Director","Subdirector","Coordinador Acadmico","Docente"],yH=({onBack:t,onSchoolCreated:e})=>{const[n,s]=M.useState({nombre:"",cct:"",municipio:"",estado:"Mxico",turno:"Matutino",puestoCreador:"Director"}),[a,i]=M.useState({}),[o,l]=M.useState(!1),[c,d]=M.useState(""),m=y=>/^\d{2}[A-Z]{3}\d{4}[A-Z]$/.test(y.toUpperCase()),p=()=>{const y={};return n.nombre.trim()||(y.nombre="El nombre es requerido"),n.cct.trim()?m(n.cct)||(y.cct="Formato de CCT invlido (Ej: 15ECT0001A)"):y.cct="El CCT es requerido",n.municipio.trim()||(y.municipio="El municipio es requerido"),i(y),Object.keys(y).length===0},g=async()=>{var y;if(p()){l(!0),d("");try{const{schoolService:T}=await Ao(async()=>{const{schoolService:S}=await Promise.resolve().then(()=>VI);return{schoolService:S}},void 0),{auth:A}=await Ao(async()=>{const{auth:S}=await Promise.resolve().then(()=>AI);return{auth:S}},void 0),b=(y=A.currentUser)==null?void 0:y.uid;if(!b)throw new Error("No se pudo obtener el ID del usuario");const N=await T.createSchool(n,b);e(N.id,N.nombre,n.puestoCreador)}catch(T){console.error("Error al crear escuela:",T),d(T.message||"Error al crear la escuela. Intenta de nuevo.")}finally{l(!1)}}},x=(y,T)=>{s(A=>({...A,[y]:T})),a[y]&&i(A=>({...A,[y]:void 0}))};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(yd,{className:"w-5 h-5 mr-2"}),"Volver"]}),r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(jt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registrar Nueva Escuela"}),r.jsx("p",{className:"text-gray-600",children:"Crea el perfil de tu escuela"})]})]})]}),c&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[r.jsx(Na,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-800",children:c})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo de la Escuela *"}),r.jsx("input",{type:"text",value:n.nombre,onChange:y=>x("nombre",y.target.value),placeholder:"Ej: CBT No. 1 Dr. Gustavo Baz",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.nombre?"border-red-300":"border-gray-300"}`}),a.nombre&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.nombre})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clave de Centro de Trabajo (CCT) *"}),r.jsx("input",{type:"text",value:n.cct,onChange:y=>x("cct",y.target.value.toUpperCase()),placeholder:"Ej: 15ECT0001A",maxLength:11,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono ${a.cct?"border-red-300":"border-gray-300"}`}),a.cct&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.cct}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formato: 2 dgitos + 3 letras + 4 dgitos + 1 letra"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Municipio *"}),r.jsx("input",{type:"text",value:n.municipio,onChange:y=>x("municipio",y.target.value),placeholder:"Ej: Tlalnepantla",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.municipio?"border-red-300":"border-gray-300"}`}),a.municipio&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.municipio})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsx("input",{type:"text",value:n.estado,onChange:y=>x("estado",y.target.value),placeholder:"Ej: Mxico",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Turno *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:xH.map(y=>r.jsx("button",{type:"button",onClick:()=>x("turno",y),className:`py-3 px-4 rounded-lg border-2 font-medium transition-all ${n.turno===y?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:y},y))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tu Puesto en la Escuela *"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:vH.map(y=>r.jsx("button",{type:"button",onClick:()=>x("puestoCreador",y),className:`py-3 px-4 rounded-lg border-2 font-medium transition-all text-left ${n.puestoCreador===y?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:y},y))})]})]}),r.jsx("button",{onClick:g,disabled:o,className:`w-full mt-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(cl,{className:"w-5 h-5 mr-2 animate-spin"}),"Creando Escuela..."]}):r.jsxs(r.Fragment,{children:["Crear Escuela",r.jsx(ll,{className:"ml-2 w-5 h-5"})]})}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Al crear la escuela, se generar automticamente un cdigo de acceso nico que podrs compartir con otros docentes para que se unan."]})})]})})},bH=["Matemticas","Fsica","Qumica","Biologa","Historia","Geografa","Ingls","Espaol","Filosofa","tica","Informtica","Cultura Digital","Educacin Fsica","Arte","Msica","Orientacin Educativa"],_H=[1,2,3,4,5,6],EH=({schoolName:t,puesto:e,onComplete:n})=>{const[s,a]=M.useState({puesto:e,materias:[],grados:[],telefono:""}),[i,o]=M.useState(""),[l,c]=M.useState(!1),d=e==="Docente"||e==="Coordinador Acadmico",m=T=>{a(A=>{var b;return{...A,materias:(b=A.materias)!=null&&b.includes(T)?A.materias.filter(N=>N!==T):[...A.materias||[],T]}})},p=()=>{var T;i.trim()&&!((T=s.materias)!=null&&T.includes(i.trim()))&&(a(A=>({...A,materias:[...A.materias||[],i.trim()]})),o(""))},g=T=>{a(A=>{var b;return{...A,grados:(b=A.grados)!=null&&b.includes(T)?A.grados.filter(N=>N!==T):[...A.grados||[],T]}})},x=async()=>{c(!0),await new Promise(T=>setTimeout(T,500)),n(s)},y=!d||s.materias&&s.materias.length>0;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 md:p-12",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(Uo,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Completa tu Perfil"}),r.jsxs("p",{className:"text-gray-600",children:["Escuela: ",r.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tu Puesto"}),r.jsx("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(as,{className:"w-5 h-5 text-blue-600 mr-3"}),r.jsx("span",{className:"font-semibold text-blue-900",children:e}),r.jsx(Ql,{className:"w-5 h-5 text-blue-600 ml-auto"})]})})]}),d&&r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Materias que Impartes *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:bH.map(T=>{var A;return r.jsx("button",{type:"button",onClick:()=>m(T),className:`py-2 px-3 rounded-lg border-2 text-sm font-medium transition-all ${(A=s.materias)!=null&&A.includes(T)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:T},T)})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:i,onChange:T=>o(T.target.value),onKeyPress:T=>T.key==="Enter"&&p(),placeholder:"Otra materia...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"Agregar"})]}),s.materias&&s.materias.length>0&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Materias seleccionadas (",s.materias.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.materias.map(T=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[r.jsx(it,{className:"w-3 h-3 mr-1"}),T]},T))})]})]}),d&&r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Semestres que Atiendes (opcional)"}),r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:_H.map(T=>{var A;return r.jsxs("button",{type:"button",onClick:()=>g(T),className:`py-3 px-4 rounded-lg border-2 font-semibold transition-all ${(A=s.grados)!=null&&A.includes(T)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:[T,""]},T)})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono (opcional)"}),r.jsx("input",{type:"tel",value:s.telefono,onChange:T=>a(A=>({...A,telefono:T.target.value})),placeholder:"Ej: 5512345678",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:x,disabled:!y||l,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${y&&!l?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:l?r.jsxs(r.Fragment,{children:[r.jsx(cl,{className:"w-5 h-5 mr-2 animate-spin"}),"Guardando Perfil..."]}):r.jsxs(r.Fragment,{children:["Finalizar Registro",r.jsx(ll,{className:"ml-2 w-5 h-5"})]})}),d&&r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Podrs editar esta informacin ms tarde desde tu perfil."]})})]})})},NH=()=>{var y;const t=Cs(),[e,n]=M.useState("welcome"),[s,a]=M.useState({}),[i,o]=M.useState(""),l=Fa.currentUser,c=((y=l==null?void 0:l.displayName)==null?void 0:y.split(" ")[0])||"Usuario";Hc.useEffect(()=>{console.log(" OnboardingContainer montado. Paso actual:",e)},[e]);const d=T=>{n(T==="join"?"join-school":"create-school")},m=(T,A)=>{a({schoolId:T,schoolName:A,puesto:"Docente"}),n("complete-profile")},p=(T,A,b)=>{a({schoolId:T,schoolName:A,puesto:b}),n("complete-profile")},g=async T=>{try{if(!l||!s.schoolId||!s.schoolName)throw new Error("Informacin incompleta");const b=(l.displayName||"").split(" "),N=b[0]||"Usuario",S=b[1]||"";await qc.createUserProfile(l.uid,l.email||"",N,S,s.schoolId,s.schoolName,T),t("/dashboard")}catch(A){console.error("Error al completar onboarding:",A),o(A.message||"Error al guardar el perfil")}},x=()=>{e==="join-school"||e==="create-school"?n("welcome"):e==="complete-profile"&&(n("welcome"),a({}))};return r.jsxs(r.Fragment,{children:[i&&r.jsxs("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 text-red-800 px-6 py-4 rounded-lg shadow-lg z-50",children:[r.jsx("p",{className:"font-medium",children:"Error"}),r.jsx("p",{className:"text-sm",children:i})]}),e==="welcome"&&r.jsx(pH,{userName:c,onChoice:d,onSchoolSelected:m}),e==="join-school"&&r.jsx(gH,{onBack:x,onSchoolSelected:m}),e==="create-school"&&r.jsx(yH,{onBack:x,onSchoolCreated:p}),e==="complete-profile"&&s.schoolName&&s.puesto&&r.jsx(EH,{schoolName:s.schoolName,puesto:s.puesto,onComplete:g})]})},CH=()=>r.jsx(NH,{}),TH=()=>{const{user:t,loading:e}=ut();if(e)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando..."})]})});if(!t)return r.jsx(cs,{to:"/login",replace:!0});if(t.rol==="superadmin")return r.jsx(cs,{to:"/admin/dashboard",replace:!0});if(t.onboardingCompleto===!1||!t.schoolId||!t.schoolName||!t.nombre||!t.apellidoPaterno)return console.info(" Redirigiendo a onboarding - Completar perfil"),r.jsx(cs,{to:"/onboarding",replace:!0});switch(t.rol){case"superadmin":return r.jsx(cs,{to:"/admin/dashboard",replace:!0});case"directivo":return r.jsx(cs,{to:"/directivo/dashboard",replace:!0});case"maestro":return r.jsx(cs,{to:"/maestro/dashboard",replace:!0});case"alumno":return r.jsx(cs,{to:"/alumno/dashboard",replace:!0});default:return r.jsx(cs,{to:"/login",replace:!0})}},SH=()=>r.jsx(kD,{basename:"/EDUPLANMX/",children:r.jsx(ZV,{children:r.jsxs(uD,{children:[r.jsx(on,{path:"/login",element:r.jsx(tz,{})}),r.jsx(on,{path:"/registro",element:r.jsx(KB,{})}),r.jsx(on,{path:"/onboarding",element:r.jsx(As,{allowedRoles:["maestro","directivo","superadmin","alumno"],children:r.jsx(CH,{})})}),r.jsx(on,{path:"/",element:r.jsx(TH,{})}),r.jsx(on,{path:"/maestro/dashboard",element:r.jsx(As,{allowedRoles:["maestro","superadmin"],children:r.jsx(JB,{})})}),r.jsx(on,{path:"/maestro/guia-curricular",element:r.jsx(As,{allowedRoles:["maestro","superadmin"],children:r.jsx(lH,{})})}),r.jsx(on,{path:"/maestro/guia-curricular/:materiaId",element:r.jsx(As,{allowedRoles:["maestro","superadmin"],children:r.jsx(cH,{})})}),r.jsx(on,{path:"/maestro/herramientas",element:r.jsx(As,{allowedRoles:["maestro","superadmin"],children:r.jsx(fH,{})})}),r.jsx(on,{path:"/directivo/dashboard",element:r.jsx(As,{allowedRoles:["directivo","superadmin"],children:r.jsx(tH,{})})}),r.jsx(on,{path:"/directivo/alumnos",element:r.jsx(As,{allowedRoles:["directivo","superadmin"],children:r.jsx(nH,{})})}),r.jsx(on,{path:"/admin/dashboard",element:r.jsx(As,{allowedRoles:["superadmin"],children:r.jsx(ZB,{})})}),r.jsx(on,{path:"/admin/usuarios",element:r.jsx(As,{allowedRoles:["superadmin"],children:r.jsx(oH,{})})}),r.jsx(on,{path:"/alumno/dashboard",element:r.jsx(As,{allowedRoles:["alumno"],children:r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Alumno"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"En construccin..."})]})})}),r.jsx(on,{path:"*",element:r.jsx(cs,{to:"/",replace:!0})})]})})}),B1=document.getElementById("root");if(!B1)throw new Error("Could not find root element to mount to");const wH=hP.createRoot(B1);wH.render(r.jsx(Hc.StrictMode,{children:r.jsx(SH,{})}));
