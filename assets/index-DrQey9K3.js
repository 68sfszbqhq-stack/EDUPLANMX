var uR=Object.defineProperty;var mR=(t,e,n)=>e in t?uR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rd=(t,e,n)=>mR(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var hR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var NC={exports:{}},Hm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=Symbol.for("react.transitional.element"),pR=Symbol.for("react.fragment");function CC(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var a in e)a!=="key"&&(n[a]=e[a])}else n=e;return e=n.ref,{$$typeof:fR,type:t,key:s,ref:e!==void 0?e:null,props:n}}Hm.Fragment=pR;Hm.jsx=CC;Hm.jsxs=CC;NC.exports=Hm;var r=NC.exports,TC={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0=Symbol.for("react.transitional.element"),gR=Symbol.for("react.portal"),xR=Symbol.for("react.fragment"),vR=Symbol.for("react.strict_mode"),yR=Symbol.for("react.profiler"),bR=Symbol.for("react.consumer"),_R=Symbol.for("react.context"),ER=Symbol.for("react.forward_ref"),NR=Symbol.for("react.suspense"),CR=Symbol.for("react.memo"),SC=Symbol.for("react.lazy"),TR=Symbol.for("react.activity"),Ey=Symbol.iterator;function SR(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var wC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AC=Object.assign,IC={};function Lo(t,e,n){this.props=t,this.context=e,this.refs=IC,this.updater=n||wC}Lo.prototype.isReactComponent={};Lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RC(){}RC.prototype=Lo.prototype;function m0(t,e,n){this.props=t,this.context=e,this.refs=IC,this.updater=n||wC}var h0=m0.prototype=new RC;h0.constructor=m0;AC(h0,Lo.prototype);h0.isPureReactComponent=!0;var Ny=Array.isArray;function Ep(){}var We={H:null,A:null,T:null,S:null},jC=Object.prototype.hasOwnProperty;function f0(t,e,n){var s=n.ref;return{$$typeof:u0,type:t,key:e,ref:s!==void 0?s:null,props:n}}function wR(t,e){return f0(t.type,e,t.props)}function p0(t){return typeof t=="object"&&t!==null&&t.$$typeof===u0}function AR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cy=/\/+/g;function vf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AR(""+t.key):e.toString(36)}function IR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ep,Ep):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Sr(t,e,n,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case u0:case gR:o=!0;break;case SC:return o=t._init,Sr(o(t._payload),e,n,s,a)}}if(o)return a=a(t),o=s===""?"."+vf(t,0):s,Ny(a)?(n="",o!=null&&(n=o.replace(Cy,"$&/")+"/"),Sr(a,e,n,"",function(d){return d})):a!=null&&(p0(a)&&(a=wR(a,n+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(Cy,"$&/")+"/")+o)),e.push(a)),1;o=0;var l=s===""?".":s+":";if(Ny(t))for(var c=0;c<t.length;c++)s=t[c],i=l+vf(s,c),o+=Sr(s,e,n,i,a);else if(c=SR(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,i=l+vf(s,c++),o+=Sr(s,e,n,i,a);else if(i==="object"){if(typeof t.then=="function")return Sr(IR(t),e,n,s,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function jd(t,e,n){if(t==null)return t;var s=[],a=0;return Sr(t,s,"","",function(i){return e.call(n,i,a++)}),s}function RR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ty=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},jR={map:jd,forEach:function(t,e,n){jd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jd(t,function(){e++}),e},toArray:function(t){return jd(t,function(e){return e})||[]},only:function(t){if(!p0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Activity=TR;pe.Children=jR;pe.Component=Lo;pe.Fragment=xR;pe.Profiler=yR;pe.PureComponent=m0;pe.StrictMode=vR;pe.Suspense=NR;pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=We;pe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return We.H.useMemoCache(t)}};pe.cache=function(t){return function(){return t.apply(null,arguments)}};pe.cacheSignal=function(){return null};pe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=AC({},t.props),a=t.key;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)!jC.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(s[i]=e[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];s.children=o}return f0(t.type,a,s)};pe.createContext=function(t){return t={$$typeof:_R,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:bR,_context:t},t};pe.createElement=function(t,e,n){var s,a={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)jC.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(a[s]=e[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return f0(t,i,a)};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:ER,render:t}};pe.isValidElement=p0;pe.lazy=function(t){return{$$typeof:SC,_payload:{_status:-1,_result:t},_init:RR}};pe.memo=function(t,e){return{$$typeof:CR,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=We.T,n={};We.T=n;try{var s=t(),a=We.S;a!==null&&a(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Ep,Ty)}catch(i){Ty(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),We.T=e}};pe.unstable_useCacheRefresh=function(){return We.H.useCacheRefresh()};pe.use=function(t){return We.H.use(t)};pe.useActionState=function(t,e,n){return We.H.useActionState(t,e,n)};pe.useCallback=function(t,e){return We.H.useCallback(t,e)};pe.useContext=function(t){return We.H.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t,e){return We.H.useDeferredValue(t,e)};pe.useEffect=function(t,e){return We.H.useEffect(t,e)};pe.useEffectEvent=function(t){return We.H.useEffectEvent(t)};pe.useId=function(){return We.H.useId()};pe.useImperativeHandle=function(t,e,n){return We.H.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return We.H.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return We.H.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return We.H.useMemo(t,e)};pe.useOptimistic=function(t,e){return We.H.useOptimistic(t,e)};pe.useReducer=function(t,e,n){return We.H.useReducer(t,e,n)};pe.useRef=function(t){return We.H.useRef(t)};pe.useState=function(t){return We.H.useState(t)};pe.useSyncExternalStore=function(t,e,n){return We.H.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return We.H.useTransition()};pe.version="19.2.3";TC.exports=pe;var P=TC.exports;const Gc=EC(P);var MC={exports:{}},$m={},PC={exports:{}},DC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,te){var Y=B.length;B.push(te);e:for(;0<Y;){var ne=Y-1>>>1,de=B[ne];if(0<a(de,te))B[ne]=te,B[Y]=de,Y=ne;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var te=B[0],Y=B.pop();if(Y!==te){B[0]=Y;e:for(var ne=0,de=B.length,we=de>>>1;ne<we;){var tt=2*(ne+1)-1,rt=B[tt],ie=tt+1,xe=B[ie];if(0>a(rt,Y))ie<de&&0>a(xe,rt)?(B[ne]=xe,B[ie]=Y,ne=ie):(B[ne]=rt,B[tt]=Y,ne=tt);else if(ie<de&&0>a(xe,Y))B[ne]=xe,B[ie]=Y,ne=ie;else break e}}return te}function a(B,te){var Y=B.sortIndex-te.sortIndex;return Y!==0?Y:B.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,p=null,g=3,x=!1,y=!1,T=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var te=n(d);te!==null;){if(te.callback===null)s(d);else if(te.startTime<=B)s(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(d)}}function V(B){if(T=!1,D(B),!y)if(n(c)!==null)y=!0,k||(k=!0,M());else{var te=n(d);te!==null&&O(V,te.startTime-B)}}var k=!1,R=-1,_=5,I=-1;function C(){return A?!0:!(t.unstable_now()-I<_)}function E(){if(A=!1,k){var B=t.unstable_now();I=B;var te=!0;try{e:{y=!1,T&&(T=!1,N(R),R=-1),x=!0;var Y=g;try{t:{for(D(B),p=n(c);p!==null&&!(p.expirationTime>B&&C());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,g=p.priorityLevel;var de=ne(p.expirationTime<=B);if(B=t.unstable_now(),typeof de=="function"){p.callback=de,D(B),te=!0;break t}p===n(c)&&s(c),D(B)}else s(c);p=n(c)}if(p!==null)te=!0;else{var we=n(d);we!==null&&O(V,we.startTime-B),te=!1}}break e}finally{p=null,g=Y,x=!1}te=void 0}}finally{te?M():k=!1}}}var M;if(typeof S=="function")M=function(){S(E)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,G=j.port2;j.port1.onmessage=E,M=function(){G.postMessage(null)}}else M=function(){b(E,0)};function O(B,te){R=b(function(){B(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var Y=g;g=te;try{return B()}finally{g=Y}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=g;g=B;try{return te()}finally{g=Y}},t.unstable_scheduleCallback=function(B,te,Y){var ne=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Y+de,B={id:m++,callback:te,priorityLevel:B,startTime:Y,expirationTime:de,sortIndex:-1},Y>ne?(B.sortIndex=Y,e(d,B),n(c)===null&&B===n(d)&&(T?(N(R),R=-1):T=!0,O(V,Y-ne))):(B.sortIndex=de,e(c,B),y||x||(y=!0,k||(k=!0,M()))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var te=g;return function(){var Y=g;g=te;try{return B.apply(this,arguments)}finally{g=Y}}}})(DC);PC.exports=DC;var MR=PC.exports,kC={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PR=P;function LC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ma(){}var cn={d:{f:Ma,r:function(){throw Error(LC(522))},D:Ma,C:Ma,L:Ma,m:Ma,X:Ma,S:Ma,M:Ma},p:0,findDOMNode:null},DR=Symbol.for("react.portal");function kR(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:DR,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var Kl=PR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ym(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=cn;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(LC(299));return kR(t,e,null,n)};mn.flushSync=function(t){var e=Kl.T,n=cn.p;try{if(Kl.T=null,cn.p=2,t)return t()}finally{Kl.T=e,cn.p=n,cn.d.f()}};mn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,cn.d.C(t,e))};mn.prefetchDNS=function(t){typeof t=="string"&&cn.d.D(t)};mn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Ym(n,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?cn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:i}):n==="script"&&cn.d.X(t,{crossOrigin:s,integrity:a,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};mn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ym(e.as,e.crossOrigin);cn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&cn.d.M(t)};mn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Ym(n,e.crossOrigin);cn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};mn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ym(e.as,e.crossOrigin);cn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else cn.d.m(t)};mn.requestFormReset=function(t){cn.d.r(t)};mn.unstable_batchedUpdates=function(t,e){return t(e)};mn.useFormState=function(t,e,n){return Kl.H.useFormState(t,e,n)};mn.useFormStatus=function(){return Kl.H.useHostTransitionStatus()};mn.version="19.2.3";function VC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VC)}catch(t){console.error(t)}}VC(),kC.exports=mn;var LR=kC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=MR,UC=P,VR=LR;function H(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function OC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function FC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sy(t){if(Bc(t)!==t)throw Error(H(188))}function UR(t){var e=t.alternate;if(!e){if(e=Bc(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Sy(a),t;if(i===s)return Sy(a),e;i=i.sibling}throw Error(H(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==s)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function GC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=GC(t),e!==null)return e;t=t.sibling}return null}var et=Object.assign,OR=Symbol.for("react.element"),Md=Symbol.for("react.transitional.element"),Vl=Symbol.for("react.portal"),kr=Symbol.for("react.fragment"),BC=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),qC=Symbol.for("react.consumer"),Xs=Symbol.for("react.context"),g0=Symbol.for("react.forward_ref"),Cp=Symbol.for("react.suspense"),Tp=Symbol.for("react.suspense_list"),x0=Symbol.for("react.memo"),ka=Symbol.for("react.lazy"),Sp=Symbol.for("react.activity"),zR=Symbol.for("react.memo_cache_sentinel"),wy=Symbol.iterator;function wl(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var FR=Symbol.for("react.client.reference");function wp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===FR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kr:return"Fragment";case Np:return"Profiler";case BC:return"StrictMode";case Cp:return"Suspense";case Tp:return"SuspenseList";case Sp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Vl:return"Portal";case Xs:return t.displayName||"Context";case qC:return(t._context.displayName||"Context")+".Consumer";case g0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x0:return e=t.displayName||null,e!==null?e:wp(t.type)||"Memo";case ka:e=t._payload,t=t._init;try{return wp(t(e))}catch{}}return null}var Ul=Array.isArray,ce=UC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=VR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ji={pending:!1,data:null,method:null,action:null},Ap=[],Lr=-1;function Vs(t){return{current:t}}function zt(t){0>Lr||(t.current=Ap[Lr],Ap[Lr]=null,Lr--)}function Ye(t,e){Lr++,Ap[Lr]=t.current,t.current=e}var Rs=Vs(null),gc=Vs(null),Xa=Vs(null),Ou=Vs(null);function zu(t,e){switch(Ye(Xa,e),Ye(gc,t),Ye(Rs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Pb(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Pb(e),t=dw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}zt(Rs),Ye(Rs,t)}function mo(){zt(Rs),zt(gc),zt(Xa)}function Ip(t){t.memoizedState!==null&&Ye(Ou,t);var e=Rs.current,n=dw(e,t.type);e!==n&&(Ye(gc,t),Ye(Rs,n))}function Fu(t){gc.current===t&&(zt(Rs),zt(gc)),Ou.current===t&&(zt(Ou),wc._currentValue=Ji)}var yf,Ay;function Oi(t){if(yf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yf=e&&e[1]||"",Ay=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yf+t+Ay}var bf=!1;function _f(t,e){if(!t||bf)return"";bf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(x){var g=x}Reflect.construct(t,[],p)}else{try{p.call()}catch(x){g=x}t.call(p.prototype)}}else{try{throw Error()}catch(x){g=x}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(x){if(x&&g&&typeof x.stack=="string")return[x.stack,g.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(a=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(s===c.length||a===d.length)for(s=c.length-1,a=d.length-1;1<=s&&0<=a&&c[s]!==d[a];)a--;for(;1<=s&&0<=a;s--,a--)if(c[s]!==d[a]){if(s!==1||a!==1)do if(s--,a--,0>a||c[s]!==d[a]){var m=`
`+c[s].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=s&&0<=a);break}}}finally{bf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Oi(n):""}function GR(t,e){switch(t.tag){case 26:case 27:case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return t.child!==e&&e!==null?Oi("Suspense Fallback"):Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return _f(t.type,!1);case 11:return _f(t.type.render,!1);case 1:return _f(t.type,!0);case 31:return Oi("Activity");default:return""}}function Iy(t){try{var e="",n=null;do e+=GR(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Rp=Object.prototype.hasOwnProperty,v0=Mt.unstable_scheduleCallback,Ef=Mt.unstable_cancelCallback,BR=Mt.unstable_shouldYield,qR=Mt.unstable_requestPaint,jn=Mt.unstable_now,HR=Mt.unstable_getCurrentPriorityLevel,HC=Mt.unstable_ImmediatePriority,$C=Mt.unstable_UserBlockingPriority,Gu=Mt.unstable_NormalPriority,$R=Mt.unstable_LowPriority,YC=Mt.unstable_IdlePriority,YR=Mt.log,JR=Mt.unstable_setDisableYieldValue,qc=null,Mn=null;function Ha(t){if(typeof YR=="function"&&JR(t),Mn&&typeof Mn.setStrictMode=="function")try{Mn.setStrictMode(qc,t)}catch{}}var Pn=Math.clz32?Math.clz32:XR,KR=Math.log,QR=Math.LN2;function XR(t){return t>>>=0,t===0?32:31-(KR(t)/QR|0)|0}var Pd=256,Dd=262144,kd=4194304;function zi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jm(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var a=0,i=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?a=zi(s):(o&=l,o!==0?a=zi(o):n||(n=l&~t,n!==0&&(a=zi(n))))):(l=s&~i,l!==0?a=zi(l):o!==0?a=zi(o):n||(n=s&~t,n!==0&&(a=zi(n)))),a===0?0:e!==0&&e!==a&&!(e&i)&&(i=a&-a,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:a}function Hc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function WR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JC(){var t=kd;return kd<<=1,!(kd&62914560)&&(kd=4194304),t}function Nf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $c(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ZR(t,e,n,s,a,i){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=o&~n;0<n;){var m=31-Pn(n),p=1<<m;l[m]=0,c[m]=-1;var g=d[m];if(g!==null)for(d[m]=null,m=0;m<g.length;m++){var x=g[m];x!==null&&(x.lane&=-536870913)}n&=~p}s!==0&&KC(t,s,0),i!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=i&~(o&~e))}function KC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Pn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function QC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Pn(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}function XC(t,e){var n=e&-e;return n=n&42?1:y0(n),n&(t.suspendedLanes|e)?0:n}function y0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function b0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function WC(){var t=Le.p;return t!==0?t:(t=window.event,t===void 0?32:_w(t.type))}function Ry(t,e){var n=Le.p;try{return Le.p=t,e()}finally{Le.p=n}}var Ni=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ni,bn="__reactProps$"+Ni,Vo="__reactContainer$"+Ni,jp="__reactEvents$"+Ni,ej="__reactListeners$"+Ni,tj="__reactHandles$"+Ni,jy="__reactResources$"+Ni,Yc="__reactMarker$"+Ni;function _0(t){delete t[Yt],delete t[bn],delete t[jp],delete t[ej],delete t[tj]}function Vr(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vo]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ub(t);t!==null;){if(n=t[Yt])return n;t=Ub(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){if(t=t[Yt]||t[Vo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ol(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(H(33))}function Qr(t){var e=t[jy];return e||(e=t[jy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ut(t){t[Yc]=!0}var ZC=new Set,eT={};function ur(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(eT[t]=e,t=0;t<e.length;t++)ZC.add(e[t])}var nj=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),My={},Py={};function sj(t){return Rp.call(Py,t)?!0:Rp.call(My,t)?!1:nj.test(t)?Py[t]=!0:(My[t]=!0,!1)}function du(t,e,n){if(sj(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ld(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Bs(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aj(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mp(t){if(!t._valueTracker){var e=tT(t)?"checked":"value";t._valueTracker=aj(t,e,""+t[e])}}function nT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=tT(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ij=/[\n"\\]/g;function qn(t){return t.replace(ij,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Pp(t,e,n,s,a,i,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Fn(e)):t.value!==""+Fn(e)&&(t.value=""+Fn(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?Dp(t,o,Fn(e)):n!=null?Dp(t,o,Fn(n)):s!=null&&t.removeAttribute("value"),a==null&&i!=null&&(t.defaultChecked=!!i),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Fn(l):t.removeAttribute("name")}function sT(t,e,n,s,a,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){Mp(t);return}n=n!=null?""+Fn(n):"",e=e!=null?""+Fn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??a,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),Mp(t)}function Dp(t,e,n){e==="number"&&Bu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Xr(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function aT(t,e,n){if(e!=null&&(e=""+Fn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Fn(n):""}function iT(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(H(92));if(Ul(s)){if(1<s.length)throw Error(H(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Fn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Mp(t)}function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dy(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||rj.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function rT(t,e,n){if(e!=null&&typeof e!="object")throw Error(H(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var a in e)s=e[a],e.hasOwnProperty(a)&&n[a]!==s&&Dy(t,a,s)}else for(var i in e)e.hasOwnProperty(i)&&Dy(t,i,e[i])}function E0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uu(t){return lj.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ws(){}var kp=null;function N0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ur=null,Wr=null;function ky(t){var e=Uo(t);if(e&&(t=e.stateNode)){var n=t[bn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Pp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+qn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=s[bn]||null;if(!a)throw Error(H(90));Pp(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&nT(s)}break e;case"textarea":aT(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Xr(t,!!n.multiple,e,!1)}}}var Cf=!1;function oT(t,e,n){if(Cf)return t(e,n);Cf=!0;try{var s=t(e);return s}finally{if(Cf=!1,(Ur!==null||Wr!==null)&&(rh(),Ur&&(e=Ur,t=Wr,Wr=Ur=null,ky(e),t)))for(e=0;e<t.length;e++)ky(t[e])}}function xc(t,e){var n=t.stateNode;if(n===null)return null;var s=n[bn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=!1;if(ca)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){Lp=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{Lp=!1}var $a=null,C0=null,mu=null;function lT(){if(mu)return mu;var t,e=C0,n=e.length,s,a="value"in $a?$a.value:$a.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===a[i-s];s++);return mu=a.slice(t,1<s?1-s:void 0)}function hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vd(){return!0}function Ly(){return!1}function _n(t){function e(n,s,a,i,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vd:Ly,this.isPropagationStopped=Ly,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vd)},persist:function(){},isPersistent:Vd}),e}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Km=_n(mr),Jc=et({},mr,{view:0,detail:0}),cj=_n(Jc),Tf,Sf,Il,Qm=et({},Jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Il&&(Il&&t.type==="mousemove"?(Tf=t.screenX-Il.screenX,Sf=t.screenY-Il.screenY):Sf=Tf=0,Il=t),Tf)},movementY:function(t){return"movementY"in t?t.movementY:Sf}}),Vy=_n(Qm),dj=et({},Qm,{dataTransfer:0}),uj=_n(dj),mj=et({},Jc,{relatedTarget:0}),wf=_n(mj),hj=et({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),fj=_n(hj),pj=et({},mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gj=_n(pj),xj=et({},mr,{data:0}),Uy=_n(xj),vj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _j(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bj[t])?!!e[t]:!1}function T0(){return _j}var Ej=et({},Jc,{key:function(t){if(t.key){var e=vj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T0,charCode:function(t){return t.type==="keypress"?hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nj=_n(Ej),Cj=et({},Qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oy=_n(Cj),Tj=et({},Jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T0}),Sj=_n(Tj),wj=et({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aj=_n(wj),Ij=et({},Qm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rj=_n(Ij),jj=et({},mr,{newState:0,oldState:0}),Mj=_n(jj),Pj=[9,13,27,32],S0=ca&&"CompositionEvent"in window,Ql=null;ca&&"documentMode"in document&&(Ql=document.documentMode);var Dj=ca&&"TextEvent"in window&&!Ql,cT=ca&&(!S0||Ql&&8<Ql&&11>=Ql),zy=" ",Fy=!1;function dT(t,e){switch(t){case"keyup":return Pj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Or=!1;function kj(t,e){switch(t){case"compositionend":return uT(e);case"keypress":return e.which!==32?null:(Fy=!0,zy);case"textInput":return t=e.data,t===zy&&Fy?null:t;default:return null}}function Lj(t,e){if(Or)return t==="compositionend"||!S0&&dT(t,e)?(t=lT(),mu=C0=$a=null,Or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cT&&e.locale!=="ko"?null:e.data;default:return null}}var Vj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vj[t.type]:e==="textarea"}function mT(t,e,n,s){Ur?Wr?Wr.push(s):Wr=[s]:Ur=s,e=om(e,"onChange"),0<e.length&&(n=new Km("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Xl=null,vc=null;function Uj(t){ow(t,0)}function Xm(t){var e=Ol(t);if(nT(e))return t}function By(t,e){if(t==="change")return e}var hT=!1;if(ca){var Af;if(ca){var If="oninput"in document;if(!If){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),If=typeof qy.oninput=="function"}Af=If}else Af=!1;hT=Af&&(!document.documentMode||9<document.documentMode)}function Hy(){Xl&&(Xl.detachEvent("onpropertychange",fT),vc=Xl=null)}function fT(t){if(t.propertyName==="value"&&Xm(vc)){var e=[];mT(e,vc,t,N0(t)),oT(Uj,e)}}function Oj(t,e,n){t==="focusin"?(Hy(),Xl=e,vc=n,Xl.attachEvent("onpropertychange",fT)):t==="focusout"&&Hy()}function zj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xm(vc)}function Fj(t,e){if(t==="click")return Xm(e)}function Gj(t,e){if(t==="input"||t==="change")return Xm(e)}function Bj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:Bj;function yc(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Rp.call(e,a)||!Ln(t[a],e[a]))return!1}return!0}function $y(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yy(t,e){var n=$y(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$y(n)}}function pT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Bu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bu(t.document)}return e}function w0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var qj=ca&&"documentMode"in document&&11>=document.documentMode,zr=null,Vp=null,Wl=null,Up=!1;function Jy(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Up||zr==null||zr!==Bu(s)||(s=zr,"selectionStart"in s&&w0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Wl&&yc(Wl,s)||(Wl=s,s=om(Vp,"onSelect"),0<s.length&&(e=new Km("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=zr)))}function Vi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},Rf={},xT={};ca&&(xT=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function hr(t){if(Rf[t])return Rf[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xT)return Rf[t]=e[n];return t}var vT=hr("animationend"),yT=hr("animationiteration"),bT=hr("animationstart"),Hj=hr("transitionrun"),$j=hr("transitionstart"),Yj=hr("transitioncancel"),_T=hr("transitionend"),ET=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function vs(t,e){ET.set(t,e),ur(e,[t])}var qu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zn=[],Gr=0,A0=0;function Wm(){for(var t=Gr,e=A0=Gr=0;e<t;){var n=zn[e];zn[e++]=null;var s=zn[e];zn[e++]=null;var a=zn[e];zn[e++]=null;var i=zn[e];if(zn[e++]=null,s!==null&&a!==null){var o=s.pending;o===null?a.next=a:(a.next=o.next,o.next=a),s.pending=a}i!==0&&NT(n,a,i)}}function Zm(t,e,n,s){zn[Gr++]=t,zn[Gr++]=e,zn[Gr++]=n,zn[Gr++]=s,A0|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function I0(t,e,n,s){return Zm(t,e,n,s),Hu(t)}function fr(t,e){return Zm(t,null,null,e),Hu(t)}function NT(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var a=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(a=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,a&&e!==null&&(a=31-Pn(n),t=i.hiddenUpdates,s=t[a],s===null?t[a]=[e]:s.push(e),e.lane=n|536870912),i):null}function Hu(t){if(50<oc)throw oc=0,rg=null,Error(H(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Br={};function Jj(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,s){return new Jj(t,e,n,s)}function R0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function na(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function CT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function fu(t,e,n,s,a,i){var o=0;if(s=t,typeof t=="function")R0(t)&&(o=1);else if(typeof t=="string")o=ZM(t,n,Rs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Sp:return t=Tn(31,n,e,a),t.elementType=Sp,t.lanes=i,t;case kr:return Ki(n.children,a,i,e);case BC:o=8,a|=24;break;case Np:return t=Tn(12,n,e,a|2),t.elementType=Np,t.lanes=i,t;case Cp:return t=Tn(13,n,e,a),t.elementType=Cp,t.lanes=i,t;case Tp:return t=Tn(19,n,e,a),t.elementType=Tp,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xs:o=10;break e;case qC:o=9;break e;case g0:o=11;break e;case x0:o=14;break e;case ka:o=16,s=null;break e}o=29,n=Error(H(130,t===null?"null":typeof t,"")),s=null}return e=Tn(o,n,e,a),e.elementType=t,e.type=s,e.lanes=i,e}function Ki(t,e,n,s){return t=Tn(7,t,s,e),t.lanes=n,t}function jf(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function TT(t){var e=Tn(18,null,null,0);return e.stateNode=t,e}function Mf(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ky=new WeakMap;function Hn(t,e){if(typeof t=="object"&&t!==null){var n=Ky.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Iy(e)},Ky.set(t,e),e)}return{value:t,source:e,stack:Iy(e)}}var qr=[],Hr=0,$u=null,bc=0,Gn=[],Bn=0,mi=null,Ss=1,ws="";function Js(t,e){qr[Hr++]=bc,qr[Hr++]=$u,$u=t,bc=e}function ST(t,e,n){Gn[Bn++]=Ss,Gn[Bn++]=ws,Gn[Bn++]=mi,mi=t;var s=Ss;t=ws;var a=32-Pn(s)-1;s&=~(1<<a),n+=1;var i=32-Pn(e)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Ss=1<<32-Pn(e)+a|n<<a|s,ws=i+t}else Ss=1<<i|n<<a|s,ws=t}function j0(t){t.return!==null&&(Js(t,1),ST(t,1,0))}function M0(t){for(;t===$u;)$u=qr[--Hr],qr[Hr]=null,bc=qr[--Hr],qr[Hr]=null;for(;t===mi;)mi=Gn[--Bn],Gn[Bn]=null,ws=Gn[--Bn],Gn[Bn]=null,Ss=Gn[--Bn],Gn[Bn]=null}function wT(t,e){Gn[Bn++]=Ss,Gn[Bn++]=ws,Gn[Bn++]=mi,Ss=e.id,ws=e.overflow,mi=t}var Jt=null,Xe=null,Se=!1,Wa=null,$n=!1,zp=Error(H(519));function hi(t){var e=Error(H(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _c(Hn(e,t)),zp}function Qy(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Yt]=t,e[bn]=s,n){case"dialog":be("cancel",e),be("close",e);break;case"iframe":case"object":case"embed":be("load",e);break;case"video":case"audio":for(n=0;n<Tc.length;n++)be(Tc[n],e);break;case"source":be("error",e);break;case"img":case"image":case"link":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"input":be("invalid",e),sT(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":be("invalid",e);break;case"textarea":be("invalid",e),iT(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||cw(e.textContent,n)?(s.popover!=null&&(be("beforetoggle",e),be("toggle",e)),s.onScroll!=null&&be("scroll",e),s.onScrollEnd!=null&&be("scrollend",e),s.onClick!=null&&(e.onclick=Ws),e=!0):e=!1,e||hi(t,!0)}function Xy(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Jt=Jt.return}}function Nr(t){if(t!==Jt)return!1;if(!Se)return Xy(t),Se=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||ug(t.type,t.memoizedProps)),n=!n),n&&Xe&&hi(t),Xy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Xe=Vb(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Xe=Vb(t)}else e===27?(e=Xe,Ci(t.type)?(t=pg,pg=null,Xe=t):Xe=e):Xe=Jt?Jn(t.stateNode.nextSibling):null;return!0}function Zi(){Xe=Jt=null,Se=!1}function Pf(){var t=Wa;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Wa=null),t}function _c(t){Wa===null?Wa=[t]:Wa.push(t)}var Fp=Vs(null),pr=null,Zs=null;function Ua(t,e,n){Ye(Fp,e._currentValue),e._currentValue=n}function sa(t){t._currentValue=Fp.current,zt(Fp)}function Gp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Bp(t,e,n,s){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){var o=a.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=a;for(var c=0;c<e.length;c++)if(l.context===e[c]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Gp(i.return,n,t),s||(o=null);break e}i=l.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(H(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),Gp(o,n,t),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Oo(t,e,n,s){t=null;for(var a=e,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(H(387));if(o=o.memoizedProps,o!==null){var l=a.type;Ln(a.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(a===Ou.current){if(o=a.alternate,o===null)throw Error(H(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(wc):t=[wc])}a=a.return}t!==null&&Bp(e,t,n,s),e.flags|=262144}function Yu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function er(t){pr=t,Zs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return AT(pr,t)}function Ud(t,e){return pr===null&&er(t),AT(t,e)}function AT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Zs===null){if(t===null)throw Error(H(308));Zs=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zs=Zs.next=e;return n}var Kj=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Qj=Mt.unstable_scheduleCallback,Xj=Mt.unstable_NormalPriority,Ct={$$typeof:Xs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function P0(){return{controller:new Kj,data:new Map,refCount:0}}function Kc(t){t.refCount--,t.refCount===0&&Qj(Xj,function(){t.controller.abort()})}var Zl=null,qp=0,po=0,Zr=null;function Wj(t,e){if(Zl===null){var n=Zl=[];qp=0,po=ax(),Zr={status:"pending",value:void 0,then:function(s){n.push(s)}}}return qp++,e.then(Wy,Wy),e}function Wy(){if(--qp===0&&Zl!==null){Zr!==null&&(Zr.status="fulfilled");var t=Zl;Zl=null,po=0,Zr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Zj(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(s.status="rejected",s.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),s}var Zy=ce.S;ce.S=function(t,e){GS=jn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Wj(t,e),Zy!==null&&Zy(t,e)};var Qi=Vs(null);function D0(){var t=Qi.current;return t!==null?t:qe.pooledCache}function pu(t,e){e===null?Ye(Qi,Qi.current):Ye(Qi,e.pool)}function IT(){var t=D0();return t===null?null:{parent:Ct._currentValue,pool:t}}var zo=Error(H(460)),k0=Error(H(474)),eh=Error(H(542)),Ju={then:function(){}};function eb(t){return t=t.status,t==="fulfilled"||t==="rejected"}function RT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ws,Ws),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,nb(t),t;default:if(typeof e.status=="string")e.then(Ws,Ws);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(H(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=s}},function(s){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,nb(t),t}throw Xi=e,zo}}function Fi(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Xi=n,zo):n}}var Xi=null;function tb(){if(Xi===null)throw Error(H(459));var t=Xi;return Xi=null,t}function nb(t){if(t===zo||t===eh)throw Error(H(483))}var eo=null,Ec=0;function Od(t){var e=Ec;return Ec+=1,eo===null&&(eo=[]),RT(eo,t,e)}function Rl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function zd(t,e){throw e.$$typeof===OR?Error(H(525)):(t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function jT(t){function e(b,N){if(t){var S=b.deletions;S===null?(b.deletions=[N],b.flags|=16):S.push(N)}}function n(b,N){if(!t)return null;for(;N!==null;)e(b,N),N=N.sibling;return null}function s(b){for(var N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(b,N){return b=na(b,N),b.index=0,b.sibling=null,b}function i(b,N,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<N?(b.flags|=67108866,N):S):(b.flags|=67108866,N)):(b.flags|=1048576,N)}function o(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function l(b,N,S,D){return N===null||N.tag!==6?(N=jf(S,b.mode,D),N.return=b,N):(N=a(N,S),N.return=b,N)}function c(b,N,S,D){var V=S.type;return V===kr?m(b,N,S.props.children,D,S.key):N!==null&&(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ka&&Fi(V)===N.type)?(N=a(N,S.props),Rl(N,S),N.return=b,N):(N=fu(S.type,S.key,S.props,null,b.mode,D),Rl(N,S),N.return=b,N)}function d(b,N,S,D){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=Mf(S,b.mode,D),N.return=b,N):(N=a(N,S.children||[]),N.return=b,N)}function m(b,N,S,D,V){return N===null||N.tag!==7?(N=Ki(S,b.mode,D,V),N.return=b,N):(N=a(N,S),N.return=b,N)}function p(b,N,S){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=jf(""+N,b.mode,S),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Md:return S=fu(N.type,N.key,N.props,null,b.mode,S),Rl(S,N),S.return=b,S;case Vl:return N=Mf(N,b.mode,S),N.return=b,N;case ka:return N=Fi(N),p(b,N,S)}if(Ul(N)||wl(N))return N=Ki(N,b.mode,S,null),N.return=b,N;if(typeof N.then=="function")return p(b,Od(N),S);if(N.$$typeof===Xs)return p(b,Ud(b,N),S);zd(b,N)}return null}function g(b,N,S,D){var V=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return V!==null?null:l(b,N,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Md:return S.key===V?c(b,N,S,D):null;case Vl:return S.key===V?d(b,N,S,D):null;case ka:return S=Fi(S),g(b,N,S,D)}if(Ul(S)||wl(S))return V!==null?null:m(b,N,S,D,null);if(typeof S.then=="function")return g(b,N,Od(S),D);if(S.$$typeof===Xs)return g(b,N,Ud(b,S),D);zd(b,S)}return null}function x(b,N,S,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return b=b.get(S)||null,l(N,b,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Md:return b=b.get(D.key===null?S:D.key)||null,c(N,b,D,V);case Vl:return b=b.get(D.key===null?S:D.key)||null,d(N,b,D,V);case ka:return D=Fi(D),x(b,N,S,D,V)}if(Ul(D)||wl(D))return b=b.get(S)||null,m(N,b,D,V,null);if(typeof D.then=="function")return x(b,N,S,Od(D),V);if(D.$$typeof===Xs)return x(b,N,S,Ud(N,D),V);zd(N,D)}return null}function y(b,N,S,D){for(var V=null,k=null,R=N,_=N=0,I=null;R!==null&&_<S.length;_++){R.index>_?(I=R,R=null):I=R.sibling;var C=g(b,R,S[_],D);if(C===null){R===null&&(R=I);break}t&&R&&C.alternate===null&&e(b,R),N=i(C,N,_),k===null?V=C:k.sibling=C,k=C,R=I}if(_===S.length)return n(b,R),Se&&Js(b,_),V;if(R===null){for(;_<S.length;_++)R=p(b,S[_],D),R!==null&&(N=i(R,N,_),k===null?V=R:k.sibling=R,k=R);return Se&&Js(b,_),V}for(R=s(R);_<S.length;_++)I=x(R,b,_,S[_],D),I!==null&&(t&&I.alternate!==null&&R.delete(I.key===null?_:I.key),N=i(I,N,_),k===null?V=I:k.sibling=I,k=I);return t&&R.forEach(function(E){return e(b,E)}),Se&&Js(b,_),V}function T(b,N,S,D){if(S==null)throw Error(H(151));for(var V=null,k=null,R=N,_=N=0,I=null,C=S.next();R!==null&&!C.done;_++,C=S.next()){R.index>_?(I=R,R=null):I=R.sibling;var E=g(b,R,C.value,D);if(E===null){R===null&&(R=I);break}t&&R&&E.alternate===null&&e(b,R),N=i(E,N,_),k===null?V=E:k.sibling=E,k=E,R=I}if(C.done)return n(b,R),Se&&Js(b,_),V;if(R===null){for(;!C.done;_++,C=S.next())C=p(b,C.value,D),C!==null&&(N=i(C,N,_),k===null?V=C:k.sibling=C,k=C);return Se&&Js(b,_),V}for(R=s(R);!C.done;_++,C=S.next())C=x(R,b,_,C.value,D),C!==null&&(t&&C.alternate!==null&&R.delete(C.key===null?_:C.key),N=i(C,N,_),k===null?V=C:k.sibling=C,k=C);return t&&R.forEach(function(M){return e(b,M)}),Se&&Js(b,_),V}function A(b,N,S,D){if(typeof S=="object"&&S!==null&&S.type===kr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Md:e:{for(var V=S.key;N!==null;){if(N.key===V){if(V=S.type,V===kr){if(N.tag===7){n(b,N.sibling),D=a(N,S.props.children),D.return=b,b=D;break e}}else if(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===ka&&Fi(V)===N.type){n(b,N.sibling),D=a(N,S.props),Rl(D,S),D.return=b,b=D;break e}n(b,N);break}else e(b,N);N=N.sibling}S.type===kr?(D=Ki(S.props.children,b.mode,D,S.key),D.return=b,b=D):(D=fu(S.type,S.key,S.props,null,b.mode,D),Rl(D,S),D.return=b,b=D)}return o(b);case Vl:e:{for(V=S.key;N!==null;){if(N.key===V)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){n(b,N.sibling),D=a(N,S.children||[]),D.return=b,b=D;break e}else{n(b,N);break}else e(b,N);N=N.sibling}D=Mf(S,b.mode,D),D.return=b,b=D}return o(b);case ka:return S=Fi(S),A(b,N,S,D)}if(Ul(S))return y(b,N,S,D);if(wl(S)){if(V=wl(S),typeof V!="function")throw Error(H(150));return S=V.call(S),T(b,N,S,D)}if(typeof S.then=="function")return A(b,N,Od(S),D);if(S.$$typeof===Xs)return A(b,N,Ud(b,S),D);zd(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,N!==null&&N.tag===6?(n(b,N.sibling),D=a(N,S),D.return=b,b=D):(n(b,N),D=jf(S,b.mode,D),D.return=b,b=D),o(b)):n(b,N)}return function(b,N,S,D){try{Ec=0;var V=A(b,N,S,D);return eo=null,V}catch(R){if(R===zo||R===eh)throw R;var k=Tn(29,R,null,b.mode);return k.lanes=D,k.return=b,k}finally{}}}var tr=jT(!0),MT=jT(!1),La=!1;function L0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Za(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ei(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ke&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,e=Hu(t),NT(t,null,n),e}return Zm(t,s,e,n),Hu(t)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,QC(t,n)}}function Df(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var $p=!1;function tc(){if($p){var t=Zr;if(t!==null)throw t}}function nc(t,e,n,s){$p=!1;var a=t.updateQueue;La=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;o=0,m=d=c=null,l=i;do{var g=l.lane&-536870913,x=g!==l.lane;if(x?(Te&g)===g:(s&g)===g){g!==0&&g===po&&($p=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var y=t,T=l;g=e;var A=n;switch(T.tag){case 1:if(y=T.payload,typeof y=="function"){p=y.call(A,p,g);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=T.payload,g=typeof y=="function"?y.call(A,p,g):y,g==null)break e;p=et({},p,g);break e;case 2:La=!0}}g=l.callback,g!==null&&(t.flags|=64,x&&(t.flags|=8192),x=a.callbacks,x===null?a.callbacks=[g]:x.push(g))}else x={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=x,c=p):m=m.next=x,o|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;x=l,l=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);m===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,i===null&&(a.shared.lanes=0),pi|=o,t.lanes=o,t.memoizedState=p}}function PT(t,e){if(typeof t!="function")throw Error(H(191,t));t.call(e)}function DT(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)PT(n[t],e)}var go=Vs(null),Ku=Vs(0);function sb(t,e){t=ha,Ye(Ku,t),Ye(go,e),ha=t|e.baseLanes}function Yp(){Ye(Ku,ha),Ye(go,go.current)}function V0(){ha=Ku.current,zt(go),zt(Ku)}var Vn=Vs(null),Yn=null;function Oa(t){var e=t.alternate;Ye(pt,pt.current&1),Ye(Vn,t),Yn===null&&(e===null||go.current!==null||e.memoizedState!==null)&&(Yn=t)}function Jp(t){Ye(pt,pt.current),Ye(Vn,t),Yn===null&&(Yn=t)}function kT(t){t.tag===22?(Ye(pt,pt.current),Ye(Vn,t),Yn===null&&(Yn=t)):za()}function za(){Ye(pt,pt.current),Ye(Vn,Vn.current)}function Cn(t){zt(Vn),Yn===t&&(Yn=null),zt(pt)}var pt=Vs(0);function Qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||hg(n)||fg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var da=0,ge=null,Ge=null,Et=null,Xu=!1,to=!1,nr=!1,Wu=0,Nc=0,no=null,eM=0;function ut(){throw Error(H(321))}function U0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function O0(t,e,n,s,a,i){return da=i,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ce.H=t===null||t.memoizedState===null?mS:Q0,nr=!1,i=n(s,a),nr=!1,to&&(i=VT(e,n,s,a)),LT(t),i}function LT(t){ce.H=Cc;var e=Ge!==null&&Ge.next!==null;if(da=0,Et=Ge=ge=null,Xu=!1,Nc=0,no=null,e)throw Error(H(300));t===null||St||(t=t.dependencies,t!==null&&Yu(t)&&(St=!0))}function VT(t,e,n,s){ge=t;var a=0;do{if(to&&(no=null),Nc=0,to=!1,25<=a)throw Error(H(301));if(a+=1,Et=Ge=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ce.H=hS,i=e(n,s)}while(to);return i}function tM(){var t=ce.H,e=t.useState()[0];return e=typeof e.then=="function"?Qc(e):e,t=t.useState()[0],(Ge!==null?Ge.memoizedState:null)!==t&&(ge.flags|=1024),e}function z0(){var t=Wu!==0;return Wu=0,t}function F0(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function G0(t){if(Xu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Xu=!1}da=0,Et=Ge=ge=null,to=!1,Nc=Wu=0,no=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ge.memoizedState=Et=t:Et=Et.next=t,Et}function gt(){if(Ge===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Et===null?ge.memoizedState:Et.next;if(e!==null)Et=e,Ge=t;else{if(t===null)throw ge.alternate===null?Error(H(467)):Error(H(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Et===null?ge.memoizedState=Et=t:Et=Et.next=t}return Et}function th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qc(t){var e=Nc;return Nc+=1,no===null&&(no=[]),t=RT(no,t,e),e=ge,(Et===null?e.memoizedState:Et.next)===null&&(e=e.alternate,ce.H=e===null||e.memoizedState===null?mS:Q0),t}function nh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Qc(t);if(t.$$typeof===Xs)return Kt(t)}throw Error(H(438,String(t)))}function B0(t){var e=null,n=ge.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ge.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=th(),ge.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=zR;return e.index++,n}function ua(t,e){return typeof e=="function"?e(t):e}function gu(t){var e=gt();return q0(e,Ge,t)}function q0(t,e,n){var s=t.queue;if(s===null)throw Error(H(311));s.lastRenderedReducer=n;var a=t.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}e.baseQueue=a=i,s.pending=null}if(i=t.baseState,a===null)t.memoizedState=i;else{e=a.next;var l=o=null,c=null,d=e,m=!1;do{var p=d.lane&-536870913;if(p!==d.lane?(Te&p)===p:(da&p)===p){var g=d.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p===po&&(m=!0);else if((da&g)===g){d=d.next,g===po&&(m=!0);continue}else p={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,o=i):c=c.next=p,ge.lanes|=g,pi|=g;p=d.action,nr&&n(i,p),i=d.hasEagerState?d.eagerState:n(i,p)}else g={lane:p,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=g,o=i):c=c.next=g,ge.lanes|=p,pi|=p;d=d.next}while(d!==null&&d!==e);if(c===null?o=i:c.next=l,!Ln(i,t.memoizedState)&&(St=!0,m&&(n=Zr,n!==null)))throw n;t.memoizedState=i,t.baseState=o,t.baseQueue=c,s.lastRenderedState=i}return a===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function kf(t){var e=gt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Ln(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function UT(t,e,n){var s=ge,a=gt(),i=Se;if(i){if(n===void 0)throw Error(H(407));n=n()}else n=e();var o=!Ln((Ge||a).memoizedState,n);if(o&&(a.memoizedState=n,St=!0),a=a.queue,H0(FT.bind(null,s,a,t),[t]),a.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(s.flags|=2048,xo(9,{destroy:void 0},zT.bind(null,s,a,n,e),null),qe===null)throw Error(H(349));i||da&127||OT(s,e,n)}return n}function OT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e=th(),ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zT(t,e,n,s){e.value=n,e.getSnapshot=s,GT(e)&&BT(t)}function FT(t,e,n){return n(function(){GT(e)&&BT(t)})}function GT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function BT(t){var e=fr(t,2);e!==null&&yn(e,t,2)}function Kp(t){var e=on();if(typeof t=="function"){var n=t;if(t=n(),nr){Ha(!0);try{n()}finally{Ha(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:t},e}function qT(t,e,n,s){return t.baseState=n,q0(t,Ge,typeof s=="function"?s:ua)}function nM(t,e,n,s,a){if(ah(t))throw Error(H(485));if(t=e.action,t!==null){var i={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ce.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,HT(e,i)):(i.next=n.next,e.pending=n.next=i)}}function HT(t,e){var n=e.action,s=e.payload,a=t.state;if(e.isTransition){var i=ce.T,o={};ce.T=o;try{var l=n(a,s),c=ce.S;c!==null&&c(o,l),ab(t,e,l)}catch(d){Qp(t,e,d)}finally{i!==null&&o.types!==null&&(i.types=o.types),ce.T=i}}else try{i=n(a,s),ab(t,e,i)}catch(d){Qp(t,e,d)}}function ab(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){ib(t,e,s)},function(s){return Qp(t,e,s)}):ib(t,e,n)}function ib(t,e,n){e.status="fulfilled",e.value=n,$T(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,HT(t,n)))}function Qp(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,$T(e),e=e.next;while(e!==s)}t.action=null}function $T(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function YT(t,e){return e}function rb(t,e){if(Se){var n=qe.formState;if(n!==null){e:{var s=ge;if(Se){if(Xe){t:{for(var a=Xe,i=$n;a.nodeType!==8;){if(!i){a=null;break t}if(a=Jn(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){Xe=Jn(a.nextSibling),s=a.data==="F!";break e}}hi(s)}s=!1}s&&(e=n[0])}}return n=on(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:YT,lastRenderedState:e},n.queue=s,n=cS.bind(null,ge,s),s.dispatch=n,s=Kp(!1),i=K0.bind(null,ge,!1,s.queue),s=on(),a={state:e,dispatch:null,action:t,pending:null},s.queue=a,n=nM.bind(null,ge,a,i,n),a.dispatch=n,s.memoizedState=t,[e,n,!1]}function ob(t){var e=gt();return JT(e,Ge,t)}function JT(t,e,n){if(e=q0(t,e,YT)[0],t=gu(ua)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Qc(e)}catch(o){throw o===zo?eh:o}else s=e;e=gt();var a=e.queue,i=a.dispatch;return n!==e.memoizedState&&(ge.flags|=2048,xo(9,{destroy:void 0},sM.bind(null,a,n),null)),[s,i,t]}function sM(t,e){t.action=e}function lb(t){var e=gt(),n=Ge;if(n!==null)return JT(e,n,t);gt(),e=e.memoizedState,n=gt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function xo(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ge.updateQueue,e===null&&(e=th(),ge.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function KT(){return gt().memoizedState}function xu(t,e,n,s){var a=on();ge.flags|=t,a.memoizedState=xo(1|e,{destroy:void 0},n,s===void 0?null:s)}function sh(t,e,n,s){var a=gt();s=s===void 0?null:s;var i=a.memoizedState.inst;Ge!==null&&s!==null&&U0(s,Ge.memoizedState.deps)?a.memoizedState=xo(e,i,n,s):(ge.flags|=t,a.memoizedState=xo(1|e,i,n,s))}function cb(t,e){xu(8390656,8,t,e)}function H0(t,e){sh(2048,8,t,e)}function aM(t){ge.flags|=4;var e=ge.updateQueue;if(e===null)e=th(),ge.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function QT(t){var e=gt().memoizedState;return aM({ref:e,nextImpl:t}),function(){if(ke&2)throw Error(H(440));return e.impl.apply(void 0,arguments)}}function XT(t,e){return sh(4,2,t,e)}function WT(t,e){return sh(4,4,t,e)}function ZT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eS(t,e,n){n=n!=null?n.concat([t]):null,sh(4,4,ZT.bind(null,e,t),n)}function $0(){}function tS(t,e){var n=gt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&U0(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function nS(t,e){var n=gt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&U0(e,s[1]))return s[0];if(s=t(),nr){Ha(!0);try{t()}finally{Ha(!1)}}return n.memoizedState=[s,e],s}function Y0(t,e,n){return n===void 0||da&1073741824&&!(Te&261930)?t.memoizedState=e:(t.memoizedState=n,t=qS(),ge.lanes|=t,pi|=t,n)}function sS(t,e,n,s){return Ln(n,e)?n:go.current!==null?(t=Y0(t,n,s),Ln(t,e)||(St=!0),t):!(da&42)||da&1073741824&&!(Te&261930)?(St=!0,t.memoizedState=n):(t=qS(),ge.lanes|=t,pi|=t,e)}function aS(t,e,n,s,a){var i=Le.p;Le.p=i!==0&&8>i?i:8;var o=ce.T,l={};ce.T=l,K0(t,!1,e,n);try{var c=a(),d=ce.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=Zj(c,s);sc(t,e,m,Dn(t))}else sc(t,e,s,Dn(t))}catch(p){sc(t,e,{then:function(){},status:"rejected",reason:p},Dn())}finally{Le.p=i,o!==null&&l.types!==null&&(o.types=l.types),ce.T=o}}function iM(){}function Xp(t,e,n,s){if(t.tag!==5)throw Error(H(476));var a=iS(t).queue;aS(t,a,e,Ji,n===null?iM:function(){return rS(t),n(s)})}function iS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ji,baseState:Ji,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:Ji},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function rS(t){var e=iS(t);e.next===null&&(e=t.alternate.memoizedState),sc(t,e.next.queue,{},Dn())}function J0(){return Kt(wc)}function oS(){return gt().memoizedState}function lS(){return gt().memoizedState}function rM(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Dn();t=Za(n);var s=ei(e,t,n);s!==null&&(yn(s,e,n),ec(s,e,n)),e={cache:P0()},t.payload=e;return}e=e.return}}function oM(t,e,n){var s=Dn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ah(t)?dS(e,n):(n=I0(t,e,n,s),n!==null&&(yn(n,t,s),uS(n,e,s)))}function cS(t,e,n){var s=Dn();sc(t,e,n,s)}function sc(t,e,n,s){var a={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ah(t))dS(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Ln(l,o))return Zm(t,e,a,0),qe===null&&Wm(),!1}catch{}finally{}if(n=I0(t,e,a,s),n!==null)return yn(n,t,s),uS(n,e,s),!0}return!1}function K0(t,e,n,s){if(s={lane:2,revertLane:ax(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ah(t)){if(e)throw Error(H(479))}else e=I0(t,n,s,2),e!==null&&yn(e,t,2)}function ah(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function dS(t,e){to=Xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uS(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,QC(t,n)}}var Cc={readContext:Kt,use:nh,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Cc.useEffectEvent=ut;var mS={readContext:Kt,use:nh,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:cb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,xu(4194308,4,ZT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xu(4194308,4,t,e)},useInsertionEffect:function(t,e){xu(4,2,t,e)},useMemo:function(t,e){var n=on();e=e===void 0?null:e;var s=t();if(nr){Ha(!0);try{t()}finally{Ha(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=on();if(n!==void 0){var a=n(e);if(nr){Ha(!0);try{n(e)}finally{Ha(!1)}}}else a=e;return s.memoizedState=s.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},s.queue=t,t=t.dispatch=oM.bind(null,ge,t),[s.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:function(t){t=Kp(t);var e=t.queue,n=cS.bind(null,ge,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:$0,useDeferredValue:function(t,e){var n=on();return Y0(n,t,e)},useTransition:function(){var t=Kp(!1);return t=aS.bind(null,ge,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ge,a=on();if(Se){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),qe===null)throw Error(H(349));Te&127||OT(s,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,cb(FT.bind(null,s,i,t),[t]),s.flags|=2048,xo(9,{destroy:void 0},zT.bind(null,s,i,n,e),null),n},useId:function(){var t=on(),e=qe.identifierPrefix;if(Se){var n=ws,s=Ss;n=(s&~(1<<32-Pn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Wu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=eM++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:J0,useFormState:rb,useActionState:rb,useOptimistic:function(t){var e=on();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=K0.bind(null,ge,!0,n),n.dispatch=e,[t,e]},useMemoCache:B0,useCacheRefresh:function(){return on().memoizedState=rM.bind(null,ge)},useEffectEvent:function(t){var e=on(),n={impl:t};return e.memoizedState=n,function(){if(ke&2)throw Error(H(440));return n.impl.apply(void 0,arguments)}}},Q0={readContext:Kt,use:nh,useCallback:tS,useContext:Kt,useEffect:H0,useImperativeHandle:eS,useInsertionEffect:XT,useLayoutEffect:WT,useMemo:nS,useReducer:gu,useRef:KT,useState:function(){return gu(ua)},useDebugValue:$0,useDeferredValue:function(t,e){var n=gt();return sS(n,Ge.memoizedState,t,e)},useTransition:function(){var t=gu(ua)[0],e=gt().memoizedState;return[typeof t=="boolean"?t:Qc(t),e]},useSyncExternalStore:UT,useId:oS,useHostTransitionStatus:J0,useFormState:ob,useActionState:ob,useOptimistic:function(t,e){var n=gt();return qT(n,Ge,t,e)},useMemoCache:B0,useCacheRefresh:lS};Q0.useEffectEvent=QT;var hS={readContext:Kt,use:nh,useCallback:tS,useContext:Kt,useEffect:H0,useImperativeHandle:eS,useInsertionEffect:XT,useLayoutEffect:WT,useMemo:nS,useReducer:kf,useRef:KT,useState:function(){return kf(ua)},useDebugValue:$0,useDeferredValue:function(t,e){var n=gt();return Ge===null?Y0(n,t,e):sS(n,Ge.memoizedState,t,e)},useTransition:function(){var t=kf(ua)[0],e=gt().memoizedState;return[typeof t=="boolean"?t:Qc(t),e]},useSyncExternalStore:UT,useId:oS,useHostTransitionStatus:J0,useFormState:lb,useActionState:lb,useOptimistic:function(t,e){var n=gt();return Ge!==null?qT(n,Ge,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:B0,useCacheRefresh:lS};hS.useEffectEvent=QT;function Lf(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wp={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Dn(),a=Za(s);a.payload=e,n!=null&&(a.callback=n),e=ei(t,a,s),e!==null&&(yn(e,t,s),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Dn(),a=Za(s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ei(t,a,s),e!==null&&(yn(e,t,s),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),s=Za(n);s.tag=2,e!=null&&(s.callback=e),e=ei(t,s,n),e!==null&&(yn(e,t,n),ec(e,t,n))}};function db(t,e,n,s,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!yc(n,s)||!yc(a,i):!0}function ub(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Wp.enqueueReplaceState(e,e.state,null)}function sr(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=et({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}function fS(t){qu(t)}function pS(t){console.error(t)}function gS(t){qu(t)}function Zu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function mb(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Zp(t,e,n){return n=Za(n),n.tag=3,n.payload={element:null},n.callback=function(){Zu(t,e)},n}function xS(t){return t=Za(t),t.tag=3,t}function vS(t,e,n,s){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=s.value;t.payload=function(){return a(i)},t.callback=function(){mb(e,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){mb(e,n,s),typeof a!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function lM(t,e,n,s,a){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Oo(e,n,a,!0),n=Vn.current,n!==null){switch(n.tag){case 31:case 13:return Yn===null?am():n.alternate===null&&mt===0&&(mt=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===Ju?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Yf(t,s,a)),!1;case 22:return n.flags|=65536,s===Ju?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Yf(t,s,a)),!1}throw Error(H(435,n.tag))}return Yf(t,s,a),am(),!1}if(Se)return e=Vn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,s!==zp&&(t=Error(H(422),{cause:s}),_c(Hn(t,n)))):(s!==zp&&(e=Error(H(423),{cause:s}),_c(Hn(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,s=Hn(s,n),a=Zp(t.stateNode,s,a),Df(t,a),mt!==4&&(mt=2)),!1;var i=Error(H(520),{cause:s});if(i=Hn(i,n),rc===null?rc=[i]:rc.push(i),mt!==4&&(mt=2),e===null)return!0;s=Hn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=Zp(n.stateNode,s,t),Df(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(ti===null||!ti.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=xS(a),vS(a,t,n,s),Df(n,a),!1}n=n.return}while(n!==null);return!1}var X0=Error(H(461)),St=!1;function Ht(t,e,n,s){e.child=t===null?MT(e,null,n,s):tr(e,t.child,n,s)}function hb(t,e,n,s,a){n=n.render;var i=e.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return er(e),s=O0(t,e,n,o,i,a),l=z0(),t!==null&&!St?(F0(t,e,a),ma(t,e,a)):(Se&&l&&j0(e),e.flags|=1,Ht(t,e,s,a),e.child)}function fb(t,e,n,s,a){if(t===null){var i=n.type;return typeof i=="function"&&!R0(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,yS(t,e,i,s,a)):(t=fu(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!W0(t,a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yc,n(o,s)&&t.ref===e.ref)return ma(t,e,a)}return e.flags|=1,t=na(i,s),t.ref=e.ref,t.return=e,e.child=t}function yS(t,e,n,s,a){if(t!==null){var i=t.memoizedProps;if(yc(i,s)&&t.ref===e.ref)if(St=!1,e.pendingProps=s=i,W0(t,a))t.flags&131072&&(St=!0);else return e.lanes=t.lanes,ma(t,e,a)}return eg(t,e,n,s,a)}function bS(t,e,n,s){var a=s.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,a=0;s!==null;)a=a|s.lanes|s.childLanes,s=s.sibling;s=a&~i}else s=0,e.child=null;return pb(t,e,i,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&pu(e,i!==null?i.cachePool:null),i!==null?sb(e,i):Yp(),kT(e);else return s=e.lanes=536870912,pb(t,e,i!==null?i.baseLanes|n:n,n,s)}else i!==null?(pu(e,i.cachePool),sb(e,i),za(),e.memoizedState=null):(t!==null&&pu(e,null),Yp(),za());return Ht(t,e,a,n),e.child}function zl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function pb(t,e,n,s,a){var i=D0();return i=i===null?null:{parent:Ct._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&pu(e,null),Yp(),kT(e),t!==null&&Oo(t,e,s,!0),e.childLanes=a,null}function vu(t,e){return e=em({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function gb(t,e,n){return tr(e,t.child,null,n),t=vu(e,e.pendingProps),t.flags|=2,Cn(e),e.memoizedState=null,t}function cM(t,e,n){var s=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Se){if(s.mode==="hidden")return t=vu(e,s),e.lanes=536870912,zl(null,t);if(Jp(e),(t=Xe)?(t=mw(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:mi!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},n=TT(t),n.return=e,e.child=n,Jt=e,Xe=null)):t=null,t===null)throw hi(e);return e.lanes=536870912,null}return vu(e,s)}var i=t.memoizedState;if(i!==null){var o=i.dehydrated;if(Jp(e),a)if(e.flags&256)e.flags&=-257,e=gb(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(H(558));else if(St||Oo(t,e,n,!1),a=(n&t.childLanes)!==0,St||a){if(s=qe,s!==null&&(o=XC(s,n),o!==0&&o!==i.retryLane))throw i.retryLane=o,fr(t,o),yn(s,t,o),X0;am(),e=gb(t,e,n)}else t=i.treeContext,Xe=Jn(o.nextSibling),Jt=e,Se=!0,Wa=null,$n=!1,t!==null&&wT(e,t),e=vu(e,s),e.flags|=4096;return e}return t=na(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function yu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(H(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function eg(t,e,n,s,a){return er(e),n=O0(t,e,n,s,void 0,a),s=z0(),t!==null&&!St?(F0(t,e,a),ma(t,e,a)):(Se&&s&&j0(e),e.flags|=1,Ht(t,e,n,a),e.child)}function xb(t,e,n,s,a,i){return er(e),e.updateQueue=null,n=VT(e,s,n,a),LT(t),s=z0(),t!==null&&!St?(F0(t,e,i),ma(t,e,i)):(Se&&s&&j0(e),e.flags|=1,Ht(t,e,n,i),e.child)}function vb(t,e,n,s,a){if(er(e),e.stateNode===null){var i=Br,o=n.contextType;typeof o=="object"&&o!==null&&(i=Kt(o)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Wp,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},L0(e),o=n.contextType,i.context=typeof o=="object"&&o!==null?Kt(o):Br,i.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Lf(e,n,o,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&Wp.enqueueReplaceState(i,i.state,null),nc(e,s,i,a),tc(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var l=e.memoizedProps,c=sr(n,l);i.props=c;var d=i.context,m=n.contextType;o=Br,typeof m=="object"&&m!==null&&(o=Kt(m));var p=n.getDerivedStateFromProps;m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||d!==o)&&ub(e,i,s,o),La=!1;var g=e.memoizedState;i.state=g,nc(e,s,i,a),tc(),d=e.memoizedState,l||g!==d||La?(typeof p=="function"&&(Lf(e,n,p,s),d=e.memoizedState),(c=La||db(e,n,c,s,g,d,o))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),i.props=s,i.state=d,i.context=o,s=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Hp(t,e),o=e.memoizedProps,m=sr(n,o),i.props=m,p=e.pendingProps,g=i.context,d=n.contextType,c=Br,typeof d=="object"&&d!==null&&(c=Kt(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==p||g!==c)&&ub(e,i,s,c),La=!1,g=e.memoizedState,i.state=g,nc(e,s,i,a),tc();var x=e.memoizedState;o!==p||g!==x||La||t!==null&&t.dependencies!==null&&Yu(t.dependencies)?(typeof l=="function"&&(Lf(e,n,l,s),x=e.memoizedState),(m=La||db(e,n,m,s,g,x,c)||t!==null&&t.dependencies!==null&&Yu(t.dependencies))?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,x,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),i.props=s,i.state=x,i.context=c,s=m):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,yu(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=tr(e,t.child,null,a),e.child=tr(e,null,n,a)):Ht(t,e,n,a),e.memoizedState=i.state,t=e.child):t=ma(t,e,a),t}function yb(t,e,n,s){return Zi(),e.flags|=256,Ht(t,e,n,s),e.child}var Vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(t){return{baseLanes:t,cachePool:IT()}}function Of(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=An),t}function _S(t,e,n){var s=e.pendingProps,a=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),o&&(a=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(Se){if(a?Oa(e):za(),(t=Xe)?(t=mw(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:mi!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},n=TT(t),n.return=e,e.child=n,Jt=e,Xe=null)):t=null,t===null)throw hi(e);return fg(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,a?(za(),a=e.mode,l=em({mode:"hidden",children:l},a),s=Ki(s,a,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=Uf(n),s.childLanes=Of(t,o,n),e.memoizedState=Vf,zl(null,s)):(Oa(e),tg(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(i)e.flags&256?(Oa(e),e.flags&=-257,e=zf(t,e,n)):e.memoizedState!==null?(za(),e.child=t.child,e.flags|=128,e=null):(za(),l=s.fallback,a=e.mode,s=em({mode:"visible",children:s.children},a),l=Ki(l,a,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,tr(e,t.child,null,n),s=e.child,s.memoizedState=Uf(n),s.childLanes=Of(t,o,n),e.memoizedState=Vf,e=zl(null,s));else if(Oa(e),fg(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,s=Error(H(419)),s.stack="",s.digest=o,_c({value:s,source:null,stack:null}),e=zf(t,e,n)}else if(St||Oo(t,e,n,!1),o=(n&t.childLanes)!==0,St||o){if(o=qe,o!==null&&(s=XC(o,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,fr(t,s),yn(o,t,s),X0;hg(l)||am(),e=zf(t,e,n)}else hg(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Xe=Jn(l.nextSibling),Jt=e,Se=!0,Wa=null,$n=!1,t!==null&&wT(e,t),e=tg(e,s.children),e.flags|=4096);return e}return a?(za(),l=s.fallback,a=e.mode,c=t.child,d=c.sibling,s=na(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=na(d,l):(l=Ki(l,a,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,zl(null,s),s=e.child,l=t.child.memoizedState,l===null?l=Uf(n):(a=l.cachePool,a!==null?(c=Ct._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=IT(),l={baseLanes:l.baseLanes|n,cachePool:a}),s.memoizedState=l,s.childLanes=Of(t,o,n),e.memoizedState=Vf,zl(t.child,s)):(Oa(e),n=t.child,t=n.sibling,n=na(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function tg(t,e){return e=em({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function em(t,e){return t=Tn(22,t,null,e),t.lanes=0,t}function zf(t,e,n){return tr(e,t.child,null,n),t=tg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Gp(t.return,e,n)}function Ff(t,e,n,s,a,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function ES(t,e,n){var s=e.pendingProps,a=s.revealOrder,i=s.tail;s=s.children;var o=pt.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,Ye(pt,o),Ht(t,e,s,n),s=Se?bc:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bb(t,n,e);else if(t.tag===19)bb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Qu(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Ff(e,!1,a,n,i,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Qu(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Ff(e,!0,n,null,i,s);break;case"together":Ff(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Oo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=na(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=na(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function W0(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Yu(t)))}function dM(t,e,n){switch(e.tag){case 3:zu(e,e.stateNode.containerInfo),Ua(e,Ct,t.memoizedState.cache),Zi();break;case 27:case 5:Ip(e);break;case 4:zu(e,e.stateNode.containerInfo);break;case 10:Ua(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Jp(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Oa(e),e.flags|=128,null):n&e.child.childLanes?_S(t,e,n):(Oa(e),t=ma(t,e,n),t!==null?t.sibling:null);Oa(e);break;case 19:var a=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Oo(t,e,n,!1),s=(n&e.childLanes)!==0),a){if(s)return ES(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ye(pt,pt.current),s)break;return null;case 22:return e.lanes=0,bS(t,e,n,e.pendingProps);case 24:Ua(e,Ct,t.memoizedState.cache)}return ma(t,e,n)}function NS(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)St=!0;else{if(!W0(t,n)&&!(e.flags&128))return St=!1,dM(t,e,n);St=!!(t.flags&131072)}else St=!1,Se&&e.flags&1048576&&ST(e,bc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=Fi(e.elementType),e.type=t,typeof t=="function")R0(t)?(s=sr(t,s),e.tag=1,e=vb(null,e,t,s,n)):(e.tag=0,e=eg(null,e,t,s,n));else{if(t!=null){var a=t.$$typeof;if(a===g0){e.tag=11,e=hb(null,e,t,s,n);break e}else if(a===x0){e.tag=14,e=fb(null,e,t,s,n);break e}}throw e=wp(t)||t,Error(H(306,e,""))}}return e;case 0:return eg(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,a=sr(s,e.pendingProps),vb(t,e,s,a,n);case 3:e:{if(zu(e,e.stateNode.containerInfo),t===null)throw Error(H(387));s=e.pendingProps;var i=e.memoizedState;a=i.element,Hp(t,e),nc(e,s,null,n);var o=e.memoizedState;if(s=o.cache,Ua(e,Ct,s),s!==i.cache&&Bp(e,[Ct],n,!0),tc(),s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=yb(t,e,s,n);break e}else if(s!==a){a=Hn(Error(H(424)),e),_c(a),e=yb(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Xe=Jn(t.firstChild),Jt=e,Se=!0,Wa=null,$n=!0,n=MT(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zi(),s===a){e=ma(t,e,n);break e}Ht(t,e,s,n)}e=e.child}return e;case 26:return yu(t,e),t===null?(n=zb(e.type,null,e.pendingProps,null))?e.memoizedState=n:Se||(n=e.type,t=e.pendingProps,s=lm(Xa.current).createElement(n),s[Yt]=e,s[bn]=t,Qt(s,n,t),Ut(s),e.stateNode=s):e.memoizedState=zb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Ip(e),t===null&&Se&&(s=e.stateNode=hw(e.type,e.pendingProps,Xa.current),Jt=e,$n=!0,a=Xe,Ci(e.type)?(pg=a,Xe=Jn(s.firstChild)):Xe=a),Ht(t,e,e.pendingProps.children,n),yu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Se&&((a=s=Xe)&&(s=zM(s,e.type,e.pendingProps,$n),s!==null?(e.stateNode=s,Jt=e,Xe=Jn(s.firstChild),$n=!1,a=!0):a=!1),a||hi(e)),Ip(e),a=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,ug(a,i)?s=null:o!==null&&ug(a,o)&&(e.flags|=32),e.memoizedState!==null&&(a=O0(t,e,tM,null,null,n),wc._currentValue=a),yu(t,e),Ht(t,e,s,n),e.child;case 6:return t===null&&Se&&((t=n=Xe)&&(n=FM(n,e.pendingProps,$n),n!==null?(e.stateNode=n,Jt=e,Xe=null,t=!0):t=!1),t||hi(e)),null;case 13:return _S(t,e,n);case 4:return zu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=tr(e,null,s,n):Ht(t,e,s,n),e.child;case 11:return hb(t,e,e.type,e.pendingProps,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Ua(e,e.type,s.value),Ht(t,e,s.children,n),e.child;case 9:return a=e.type._context,s=e.pendingProps.children,er(e),a=Kt(a),s=s(a),e.flags|=1,Ht(t,e,s,n),e.child;case 14:return fb(t,e,e.type,e.pendingProps,n);case 15:return yS(t,e,e.type,e.pendingProps,n);case 19:return ES(t,e,n);case 31:return cM(t,e,n);case 22:return bS(t,e,n,e.pendingProps);case 24:return er(e),s=Kt(Ct),t===null?(a=D0(),a===null&&(a=qe,i=P0(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),e.memoizedState={parent:s,cache:a},L0(e),Ua(e,Ct,a)):(t.lanes&n&&(Hp(t,e),nc(e,null,null,n),tc()),a=t.memoizedState,i=e.memoizedState,a.parent!==s?(a={parent:s,cache:s},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Ua(e,Ct,s)):(s=i.cache,Ua(e,Ct,s),s!==a.cache&&Bp(e,[Ct],n,!0))),Ht(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(H(156,e.tag))}function qs(t){t.flags|=4}function Gf(t,e,n,s,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(YS())t.flags|=8192;else throw Xi=Ju,k0}else t.flags&=-16777217}function _b(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!gw(e))if(YS())t.flags|=8192;else throw Xi=Ju,k0}function Fd(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?JC():536870912,t.lanes|=e,vo|=e)}function jl(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&65011712,s|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function uM(t,e,n){var s=e.pendingProps;switch(M0(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(e),null;case 1:return Qe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),sa(Ct),mo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Nr(e)?qs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pf())),Qe(e),null;case 26:var a=e.type,i=e.memoizedState;return t===null?(qs(e),i!==null?(Qe(e),_b(e,i)):(Qe(e),Gf(e,a,null,s,n))):i?i!==t.memoizedState?(qs(e),Qe(e),_b(e,i)):(Qe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&qs(e),Qe(e),Gf(e,a,t,s,n)),null;case 27:if(Fu(e),n=Xa.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&qs(e);else{if(!s){if(e.stateNode===null)throw Error(H(166));return Qe(e),null}t=Rs.current,Nr(e)?Qy(e):(t=hw(a,s,n),e.stateNode=t,qs(e))}return Qe(e),null;case 5:if(Fu(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&qs(e);else{if(!s){if(e.stateNode===null)throw Error(H(166));return Qe(e),null}if(i=Rs.current,Nr(e))Qy(e);else{var o=lm(Xa.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?o.createElement(a,{is:s.is}):o.createElement(a)}}i[Yt]=e,i[bn]=s;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=i;e:switch(Qt(i,a,s),a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&qs(e)}}return Qe(e),Gf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&qs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(H(166));if(t=Xa.current,Nr(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,a=Jt,a!==null)switch(a.tag){case 27:case 5:s=a.memoizedProps}t[Yt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||cw(t.nodeValue,n)),t||hi(e,!0)}else t=lm(t).createTextNode(s),t[Yt]=e,e.stateNode=t}return Qe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Nr(e),n!==null){if(t===null){if(!s)throw Error(H(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(557));t[Yt]=e}else Zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qe(e),t=!1}else n=Pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Cn(e),e):(Cn(e),null);if(e.flags&128)throw Error(H(558))}return Qe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Nr(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(H(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(H(317));a[Yt]=e}else Zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qe(e),a=!1}else a=Pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(Cn(e),e):(Cn(e),null)}return Cn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,a=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(a=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Fd(e,e.updateQueue),Qe(e),null);case 4:return mo(),t===null&&ix(e.stateNode.containerInfo),Qe(e),null;case 10:return sa(e.type),Qe(e),null;case 19:if(zt(pt),s=e.memoizedState,s===null)return Qe(e),null;if(a=(e.flags&128)!==0,i=s.rendering,i===null)if(a)jl(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Qu(t),i!==null){for(e.flags|=128,jl(s,!1),t=i.updateQueue,e.updateQueue=t,Fd(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)CT(n,t),n=n.sibling;return Ye(pt,pt.current&1|2),Se&&Js(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&jn()>nm&&(e.flags|=128,a=!0,jl(s,!1),e.lanes=4194304)}else{if(!a)if(t=Qu(i),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,Fd(e,t),jl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Se)return Qe(e),null}else 2*jn()-s.renderingStartTime>nm&&n!==536870912&&(e.flags|=128,a=!0,jl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=jn(),t.sibling=null,n=pt.current,Ye(pt,a?n&1|2:n&1),Se&&Js(e,s.treeForkCount),t):(Qe(e),null);case 22:case 23:return Cn(e),V0(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Qe(e),e.subtreeFlags&6&&(e.flags|=8192)):Qe(e),n=e.updateQueue,n!==null&&Fd(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&zt(Qi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),sa(Ct),Qe(e),null;case 25:return null;case 30:return null}throw Error(H(156,e.tag))}function mM(t,e){switch(M0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sa(Ct),mo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Fu(e),null;case 31:if(e.memoizedState!==null){if(Cn(e),e.alternate===null)throw Error(H(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Cn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(pt),null;case 4:return mo(),null;case 10:return sa(e.type),null;case 22:case 23:return Cn(e),V0(),t!==null&&zt(Qi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return sa(Ct),null;case 25:return null;default:return null}}function CS(t,e){switch(M0(e),e.tag){case 3:sa(Ct),mo();break;case 26:case 27:case 5:Fu(e);break;case 4:mo();break;case 31:e.memoizedState!==null&&Cn(e);break;case 13:Cn(e);break;case 19:zt(pt);break;case 10:sa(e.type);break;case 22:case 23:Cn(e),V0(),t!==null&&zt(Qi);break;case 24:sa(Ct)}}function Xc(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&t)===t){s=void 0;var i=n.create,o=n.inst;s=i(),o.destroy=s}n=n.next}while(n!==a)}}catch(l){Oe(e,e.return,l)}}function fi(t,e,n){try{var s=e.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var i=a.next;s=i;do{if((s.tag&t)===t){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,a=e;var c=n,d=l;try{d()}catch(m){Oe(a,c,m)}}}s=s.next}while(s!==i)}}catch(m){Oe(e,e.return,m)}}function TS(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{DT(e,n)}catch(s){Oe(t,t.return,s)}}}function SS(t,e,n){n.props=sr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Oe(t,e,s)}}function ac(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(a){Oe(t,e,a)}}function As(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(a){Oe(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Oe(t,e,a)}else n.current=null}function wS(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){Oe(t,t.return,a)}}function Bf(t,e,n){try{var s=t.stateNode;DM(s,t.type,n,e),s[bn]=e}catch(a){Oe(t,t.return,a)}}function AS(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ci(t.type)||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ci(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ng(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ws));else if(s!==4&&(s===27&&Ci(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(ng(t,e,n),t=t.sibling;t!==null;)ng(t,e,n),t=t.sibling}function tm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Ci(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(tm(t,e,n),t=t.sibling;t!==null;)tm(t,e,n),t=t.sibling}function IS(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Qt(e,s,n),e[Yt]=t,e[bn]=n}catch(i){Oe(t,t.return,i)}}var Ks=!1,Nt=!1,Hf=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function hM(t,e){if(t=t.containerInfo,cg=mm,t=gT(t),w0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var x;p!==n||a!==0&&p.nodeType!==3||(l=o+a),p!==i||s!==0&&p.nodeType!==3||(c=o+s),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===a&&(l=o),g===i&&++m===s&&(c=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(dg={focusedElem:t,selectionRange:n},mm=!1,Vt=e;Vt!==null;)if(e=Vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Vt=t;else for(;Vt!==null;){switch(e=Vt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)a=t[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,a=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var y=sr(n.type,a);t=s.getSnapshotBeforeUpdate(y,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(T){Oe(n,n.return,T)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)mg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(H(163))}if(t=e.sibling,t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function RS(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:$s(t,n),s&4&&Xc(5,n);break;case 1:if($s(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){Oe(n,n.return,o)}else{var a=sr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){Oe(n,n.return,o)}}s&64&&TS(n),s&512&&ac(n,n.return);break;case 3:if($s(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{DT(t,e)}catch(o){Oe(n,n.return,o)}}break;case 27:e===null&&s&4&&IS(n);case 26:case 5:$s(t,n),e===null&&s&4&&wS(n),s&512&&ac(n,n.return);break;case 12:$s(t,n);break;case 31:$s(t,n),s&4&&PS(t,n);break;case 13:$s(t,n),s&4&&DS(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=EM.bind(null,n),GM(t,n))));break;case 22:if(s=n.memoizedState!==null||Ks,!s){e=e!==null&&e.memoizedState!==null||Nt,a=Ks;var i=Nt;Ks=s,(Nt=e)&&!i?Ys(t,n,(n.subtreeFlags&8772)!==0):$s(t,n),Ks=a,Nt=i}break;case 30:break;default:$s(t,n)}}function jS(t){var e=t.alternate;e!==null&&(t.alternate=null,jS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&_0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,pn=!1;function Hs(t,e,n){for(n=n.child;n!==null;)MS(t,e,n),n=n.sibling}function MS(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(qc,n)}catch{}switch(n.tag){case 26:Nt||As(n,e),Hs(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Nt||As(n,e);var s=st,a=pn;Ci(n.type)&&(st=n.stateNode,pn=!1),Hs(t,e,n),lc(n.stateNode),st=s,pn=a;break;case 5:Nt||As(n,e);case 6:if(s=st,a=pn,st=null,Hs(t,e,n),st=s,pn=a,st!==null)if(pn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(n.stateNode)}catch(i){Oe(n,e,i)}else try{st.removeChild(n.stateNode)}catch(i){Oe(n,e,i)}break;case 18:st!==null&&(pn?(t=st,kb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Eo(t)):kb(st,n.stateNode));break;case 4:s=st,a=pn,st=n.stateNode.containerInfo,pn=!0,Hs(t,e,n),st=s,pn=a;break;case 0:case 11:case 14:case 15:fi(2,n,e),Nt||fi(4,n,e),Hs(t,e,n);break;case 1:Nt||(As(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&SS(n,e,s)),Hs(t,e,n);break;case 21:Hs(t,e,n);break;case 22:Nt=(s=Nt)||n.memoizedState!==null,Hs(t,e,n),Nt=s;break;default:Hs(t,e,n)}}function PS(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Eo(t)}catch(n){Oe(e,e.return,n)}}}function DS(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Eo(t)}catch(n){Oe(e,e.return,n)}}function fM(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Eb),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Eb),e;default:throw Error(H(435,t.tag))}}function Gd(t,e){var n=fM(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var a=NM.bind(null,t,s);s.then(a,a)}})}function hn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s],i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Ci(l.type)){st=l.stateNode,pn=!1;break e}break;case 5:st=l.stateNode,pn=!1;break e;case 3:case 4:st=l.stateNode.containerInfo,pn=!0;break e}l=l.return}if(st===null)throw Error(H(160));MS(i,o,a),st=null,pn=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)kS(e,t),e=e.sibling}var os=null;function kS(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(e,t),fn(t),s&4&&(fi(3,t,t.return),Xc(3,t),fi(5,t,t.return));break;case 1:hn(e,t),fn(t),s&512&&(Nt||n===null||As(n,n.return)),s&64&&Ks&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var a=os;if(hn(e,t),fn(t),s&512&&(Nt||n===null||As(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":i=a.getElementsByTagName("title")[0],(!i||i[Yc]||i[Yt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),Qt(i,s,n),i[Yt]=t,Ut(i),s=i;break e;case"link":var o=Gb("link","href",a).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}i=a.createElement(s),Qt(i,s,n),a.head.appendChild(i);break;case"meta":if(o=Gb("meta","content",a).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}i=a.createElement(s),Qt(i,s,n),a.head.appendChild(i);break;default:throw Error(H(468,s))}i[Yt]=t,Ut(i),s=i}t.stateNode=s}else Bb(a,t.type,t.stateNode);else t.stateNode=Fb(a,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?Bb(a,t.type,t.stateNode):Fb(a,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Bf(t,t.memoizedProps,n.memoizedProps)}break;case 27:hn(e,t),fn(t),s&512&&(Nt||n===null||As(n,n.return)),n!==null&&s&4&&Bf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(hn(e,t),fn(t),s&512&&(Nt||n===null||As(n,n.return)),t.flags&32){a=t.stateNode;try{fo(a,"")}catch(y){Oe(t,t.return,y)}}s&4&&t.stateNode!=null&&(a=t.memoizedProps,Bf(t,a,n!==null?n.memoizedProps:a)),s&1024&&(Hf=!0);break;case 6:if(hn(e,t),fn(t),s&4){if(t.stateNode===null)throw Error(H(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(y){Oe(t,t.return,y)}}break;case 3:if(Eu=null,a=os,os=cm(e.containerInfo),hn(e,t),os=a,fn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Eo(e.containerInfo)}catch(y){Oe(t,t.return,y)}Hf&&(Hf=!1,LS(t));break;case 4:s=os,os=cm(t.stateNode.containerInfo),hn(e,t),fn(t),os=s;break;case 12:hn(e,t),fn(t);break;case 31:hn(e,t),fn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Gd(t,s)));break;case 13:hn(e,t),fn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ih=jn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Gd(t,s)));break;case 22:a=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Ks,m=Nt;if(Ks=d||a,Nt=m||c,hn(e,t),Nt=m,Ks=d,fn(t),s&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||c||Ks||Nt||Gi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,a)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,g=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(y){Oe(c,c.return,y)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(y){Oe(c,c.return,y)}}}else if(e.tag===18){if(n===null){c=e;try{var x=c.stateNode;a?Lb(x,!0):Lb(c.stateNode,!1)}catch(y){Oe(c,c.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Gd(t,n))));break;case 19:hn(e,t),fn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Gd(t,s)));break;case 30:break;case 21:break;default:hn(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(AS(s)){n=s;break}s=s.return}if(n==null)throw Error(H(160));switch(n.tag){case 27:var a=n.stateNode,i=qf(t);tm(t,i,a);break;case 5:var o=n.stateNode;n.flags&32&&(fo(o,""),n.flags&=-33);var l=qf(t);tm(t,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=qf(t);ng(t,d,c);break;default:throw Error(H(161))}}catch(m){Oe(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LS(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;LS(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function $s(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)RS(t,e.alternate,e),e=e.sibling}function Gi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:fi(4,e,e.return),Gi(e);break;case 1:As(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&SS(e,e.return,n),Gi(e);break;case 27:lc(e.stateNode);case 26:case 5:As(e,e.return),Gi(e);break;case 22:e.memoizedState===null&&Gi(e);break;case 30:Gi(e);break;default:Gi(e)}t=t.sibling}}function Ys(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,a=t,i=e,o=i.flags;switch(i.tag){case 0:case 11:case 15:Ys(a,i,n),Xc(4,i);break;case 1:if(Ys(a,i,n),s=i,a=s.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){Oe(s,s.return,d)}if(s=i,a=s.updateQueue,a!==null){var l=s.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)PT(c[a],l)}catch(d){Oe(s,s.return,d)}}n&&o&64&&TS(i),ac(i,i.return);break;case 27:IS(i);case 26:case 5:Ys(a,i,n),n&&s===null&&o&4&&wS(i),ac(i,i.return);break;case 12:Ys(a,i,n);break;case 31:Ys(a,i,n),n&&o&4&&PS(a,i);break;case 13:Ys(a,i,n),n&&o&4&&DS(a,i);break;case 22:i.memoizedState===null&&Ys(a,i,n),ac(i,i.return);break;case 30:break;default:Ys(a,i,n)}e=e.sibling}}function Z0(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Kc(n))}function ex(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Kc(t))}function is(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)VS(t,e,n,s),e=e.sibling}function VS(t,e,n,s){var a=e.flags;switch(e.tag){case 0:case 11:case 15:is(t,e,n,s),a&2048&&Xc(9,e);break;case 1:is(t,e,n,s);break;case 3:is(t,e,n,s),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Kc(t)));break;case 12:if(a&2048){is(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Oe(e,e.return,c)}}else is(t,e,n,s);break;case 31:is(t,e,n,s);break;case 13:is(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,o=e.alternate,e.memoizedState!==null?i._visibility&2?is(t,e,n,s):ic(t,e):i._visibility&2?is(t,e,n,s):(i._visibility|=2,wr(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),a&2048&&Z0(o,e);break;case 24:is(t,e,n,s),a&2048&&ex(e.alternate,e);break;default:is(t,e,n,s)}}function wr(t,e,n,s,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,o=e,l=n,c=s,d=o.flags;switch(o.tag){case 0:case 11:case 15:wr(i,o,l,c,a),Xc(8,o);break;case 23:break;case 22:var m=o.stateNode;o.memoizedState!==null?m._visibility&2?wr(i,o,l,c,a):ic(i,o):(m._visibility|=2,wr(i,o,l,c,a)),a&&d&2048&&Z0(o.alternate,o);break;case 24:wr(i,o,l,c,a),a&&d&2048&&ex(o.alternate,o);break;default:wr(i,o,l,c,a)}e=e.sibling}}function ic(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,a=s.flags;switch(s.tag){case 22:ic(n,s),a&2048&&Z0(s.alternate,s);break;case 24:ic(n,s),a&2048&&ex(s.alternate,s);break;default:ic(n,s)}e=e.sibling}}var Fl=8192;function Cr(t,e,n){if(t.subtreeFlags&Fl)for(t=t.child;t!==null;)US(t,e,n),t=t.sibling}function US(t,e,n){switch(t.tag){case 26:Cr(t,e,n),t.flags&Fl&&t.memoizedState!==null&&eP(n,os,t.memoizedState,t.memoizedProps);break;case 5:Cr(t,e,n);break;case 3:case 4:var s=os;os=cm(t.stateNode.containerInfo),Cr(t,e,n),os=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Fl,Fl=16777216,Cr(t,e,n),Fl=s):Cr(t,e,n));break;default:Cr(t,e,n)}}function OS(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ml(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Vt=s,FS(s,t)}OS(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zS(t),t=t.sibling}function zS(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&fi(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,bu(t)):Ml(t);break;default:Ml(t)}}function bu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Vt=s,FS(s,t)}OS(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:fi(8,e,e.return),bu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,bu(e));break;default:bu(e)}t=t.sibling}}function FS(t,e){for(;Vt!==null;){var n=Vt;switch(n.tag){case 0:case 11:case 15:fi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Kc(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Vt=s;else e:for(n=t;Vt!==null;){s=Vt;var a=s.sibling,i=s.return;if(jS(s),s===n){Vt=null;break e}if(a!==null){a.return=i,Vt=a;break e}Vt=i}}}var pM={getCacheForType:function(t){var e=Kt(Ct),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Kt(Ct).controller.signal}},gM=typeof WeakMap=="function"?WeakMap:Map,ke=0,qe=null,_e=null,Te=0,Ue=0,Nn=null,Ya=!1,Fo=!1,tx=!1,ha=0,mt=0,pi=0,Wi=0,nx=0,An=0,vo=0,rc=null,gn=null,sg=!1,ih=0,GS=0,nm=1/0,sm=null,ti=null,Rt=0,ni=null,yo=null,aa=0,ag=0,ig=null,BS=null,oc=0,rg=null;function Dn(){return ke&2&&Te!==0?Te&-Te:ce.T!==null?ax():WC()}function qS(){if(An===0)if(!(Te&536870912)||Se){var t=Dd;Dd<<=1,!(Dd&3932160)&&(Dd=262144),An=t}else An=536870912;return t=Vn.current,t!==null&&(t.flags|=32),An}function yn(t,e,n){(t===qe&&(Ue===2||Ue===9)||t.cancelPendingCommit!==null)&&(bo(t,0),Ja(t,Te,An,!1)),$c(t,n),(!(ke&2)||t!==qe)&&(t===qe&&(!(ke&2)&&(Wi|=n),mt===4&&Ja(t,Te,An,!1)),Us(t))}function HS(t,e,n){if(ke&6)throw Error(H(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Hc(t,e),a=s?yM(t,e):$f(t,e,!0),i=s;do{if(a===0){Fo&&!s&&Ja(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!xM(n)){a=$f(t,e,!1),i=!1;continue}if(a===2){if(i=e,t.errorRecoveryDisabledLanes&i)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;a=rc;var c=l.current.memoizedState.isDehydrated;if(c&&(bo(l,o).flags|=256),o=$f(l,o,!1),o!==2){if(tx&&!c){l.errorRecoveryDisabledLanes|=i,Wi|=i,a=4;break e}i=gn,gn=a,i!==null&&(gn===null?gn=i:gn.push.apply(gn,i))}a=o}if(i=!1,a!==2)continue}}if(a===1){bo(t,0),Ja(t,e,0,!0);break}e:{switch(s=t,i=a,i){case 0:case 1:throw Error(H(345));case 4:if((e&4194048)!==e)break;case 6:Ja(s,e,An,!Ya);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(H(329))}if((e&62914560)===e&&(a=ih+300-jn(),10<a)){if(Ja(s,e,An,!Ya),Jm(s,0,!0)!==0)break e;aa=e,s.timeoutHandle=uw(Nb.bind(null,s,n,gn,sm,sg,e,An,Wi,vo,Ya,i,"Throttled",-0,0),a);break e}Nb(s,n,gn,sm,sg,e,An,Wi,vo,Ya,i,null,-0,0)}}break}while(!0);Us(t)}function Nb(t,e,n,s,a,i,o,l,c,d,m,p,g,x){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ws},US(e,i,p);var y=(i&62914560)===i?ih-jn():(i&4194048)===i?GS-jn():0;if(y=tP(p,y),y!==null){aa=i,t.cancelPendingCommit=y(Tb.bind(null,t,e,i,n,s,a,o,l,c,m,p,null,g,x)),Ja(t,i,o,!d);return}}Tb(t,e,i,n,s,a,o,l,c)}function xM(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!Ln(i(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ja(t,e,n,s){e&=~nx,e&=~Wi,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var a=e;0<a;){var i=31-Pn(a),o=1<<i;s[i]=-1,a&=~o}n!==0&&KC(t,n,e)}function rh(){return ke&6?!0:(Wc(0),!1)}function sx(){if(_e!==null){if(Ue===0)var t=_e.return;else t=_e,Zs=pr=null,G0(t),eo=null,Ec=0,t=_e;for(;t!==null;)CS(t.alternate,t),t=t.return;_e=null}}function bo(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,VM(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),aa=0,sx(),qe=t,_e=n=na(t.current,null),Te=e,Ue=0,Nn=null,Ya=!1,Fo=Hc(t,e),tx=!1,vo=An=nx=Wi=pi=mt=0,gn=rc=null,sg=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var a=31-Pn(s),i=1<<a;e|=t[a],s&=~i}return ha=e,Wm(),n}function $S(t,e){ge=null,ce.H=Cc,e===zo||e===eh?(e=tb(),Ue=3):e===k0?(e=tb(),Ue=4):Ue=e===X0?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Nn=e,_e===null&&(mt=1,Zu(t,Hn(e,t.current)))}function YS(){var t=Vn.current;return t===null?!0:(Te&4194048)===Te?Yn===null:(Te&62914560)===Te||Te&536870912?t===Yn:!1}function JS(){var t=ce.H;return ce.H=Cc,t===null?Cc:t}function KS(){var t=ce.A;return ce.A=pM,t}function am(){mt=4,Ya||(Te&4194048)!==Te&&Vn.current!==null||(Fo=!0),!(pi&134217727)&&!(Wi&134217727)||qe===null||Ja(qe,Te,An,!1)}function $f(t,e,n){var s=ke;ke|=2;var a=JS(),i=KS();(qe!==t||Te!==e)&&(sm=null,bo(t,e)),e=!1;var o=mt;e:do try{if(Ue!==0&&_e!==null){var l=_e,c=Nn;switch(Ue){case 8:sx(),o=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(e=!0);var d=Ue;if(Ue=0,Nn=null,$r(t,l,c,d),n&&Fo){o=0;break e}break;default:d=Ue,Ue=0,Nn=null,$r(t,l,c,d)}}vM(),o=mt;break}catch(m){$S(t,m)}while(!0);return e&&t.shellSuspendCounter++,Zs=pr=null,ke=s,ce.H=a,ce.A=i,_e===null&&(qe=null,Te=0,Wm()),o}function vM(){for(;_e!==null;)QS(_e)}function yM(t,e){var n=ke;ke|=2;var s=JS(),a=KS();qe!==t||Te!==e?(sm=null,nm=jn()+500,bo(t,e)):Fo=Hc(t,e);e:do try{if(Ue!==0&&_e!==null){e=_e;var i=Nn;t:switch(Ue){case 1:Ue=0,Nn=null,$r(t,e,i,1);break;case 2:case 9:if(eb(i)){Ue=0,Nn=null,Cb(e);break}e=function(){Ue!==2&&Ue!==9||qe!==t||(Ue=7),Us(t)},i.then(e,e);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:eb(i)?(Ue=0,Nn=null,Cb(e)):(Ue=0,Nn=null,$r(t,e,i,7));break;case 5:var o=null;switch(_e.tag){case 26:o=_e.memoizedState;case 5:case 27:var l=_e;if(o?gw(o):l.stateNode.complete){Ue=0,Nn=null;var c=l.sibling;if(c!==null)_e=c;else{var d=l.return;d!==null?(_e=d,oh(d)):_e=null}break t}}Ue=0,Nn=null,$r(t,e,i,5);break;case 6:Ue=0,Nn=null,$r(t,e,i,6);break;case 8:sx(),mt=6;break e;default:throw Error(H(462))}}bM();break}catch(m){$S(t,m)}while(!0);return Zs=pr=null,ce.H=s,ce.A=a,ke=n,_e!==null?0:(qe=null,Te=0,Wm(),mt)}function bM(){for(;_e!==null&&!BR();)QS(_e)}function QS(t){var e=NS(t.alternate,t,ha);t.memoizedProps=t.pendingProps,e===null?oh(t):_e=e}function Cb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=xb(n,e,e.pendingProps,e.type,void 0,Te);break;case 11:e=xb(n,e,e.pendingProps,e.type.render,e.ref,Te);break;case 5:G0(e);default:CS(n,e),e=_e=CT(e,ha),e=NS(n,e,ha)}t.memoizedProps=t.pendingProps,e===null?oh(t):_e=e}function $r(t,e,n,s){Zs=pr=null,G0(e),eo=null,Ec=0;var a=e.return;try{if(lM(t,a,e,n,Te)){mt=1,Zu(t,Hn(n,t.current)),_e=null;return}}catch(i){if(a!==null)throw _e=a,i;mt=1,Zu(t,Hn(n,t.current)),_e=null;return}e.flags&32768?(Se||s===1?t=!0:Fo||Te&536870912?t=!1:(Ya=t=!0,(s===2||s===9||s===3||s===6)&&(s=Vn.current,s!==null&&s.tag===13&&(s.flags|=16384))),XS(e,t)):oh(e)}function oh(t){var e=t;do{if(e.flags&32768){XS(e,Ya);return}t=e.return;var n=uM(e.alternate,e,ha);if(n!==null){_e=n;return}if(e=e.sibling,e!==null){_e=e;return}_e=e=t}while(e!==null);mt===0&&(mt=5)}function XS(t,e){do{var n=mM(t.alternate,t);if(n!==null){n.flags&=32767,_e=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){_e=t;return}_e=t=n}while(t!==null);mt=6,_e=null}function Tb(t,e,n,s,a,i,o,l,c){t.cancelPendingCommit=null;do lh();while(Rt!==0);if(ke&6)throw Error(H(327));if(e!==null){if(e===t.current)throw Error(H(177));if(i=e.lanes|e.childLanes,i|=A0,ZR(t,n,i,o,l,c),t===qe&&(_e=qe=null,Te=0),yo=e,ni=t,aa=n,ag=i,ig=a,BS=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,CM(Gu,function(){return nw(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ce.T,ce.T=null,a=Le.p,Le.p=2,o=ke,ke|=4;try{hM(t,e,n)}finally{ke=o,Le.p=a,ce.T=s}}Rt=1,WS(),ZS(),ew()}}function WS(){if(Rt===1){Rt=0;var t=ni,e=yo,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ce.T,ce.T=null;var s=Le.p;Le.p=2;var a=ke;ke|=4;try{kS(e,t);var i=dg,o=gT(t.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&pT(l.ownerDocument.documentElement,l)){if(c!==null&&w0(l)){var d=c.start,m=c.end;if(m===void 0&&(m=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(m,l.value.length);else{var p=l.ownerDocument||document,g=p&&p.defaultView||window;if(g.getSelection){var x=g.getSelection(),y=l.textContent.length,T=Math.min(c.start,y),A=c.end===void 0?T:Math.min(c.end,y);!x.extend&&T>A&&(o=A,A=T,T=o);var b=Yy(l,T),N=Yy(l,A);if(b&&N&&(x.rangeCount!==1||x.anchorNode!==b.node||x.anchorOffset!==b.offset||x.focusNode!==N.node||x.focusOffset!==N.offset)){var S=p.createRange();S.setStart(b.node,b.offset),x.removeAllRanges(),T>A?(x.addRange(S),x.extend(N.node,N.offset)):(S.setEnd(N.node,N.offset),x.addRange(S))}}}}for(p=[],x=l;x=x.parentNode;)x.nodeType===1&&p.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var D=p[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}mm=!!cg,dg=cg=null}finally{ke=a,Le.p=s,ce.T=n}}t.current=e,Rt=2}}function ZS(){if(Rt===2){Rt=0;var t=ni,e=yo,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ce.T,ce.T=null;var s=Le.p;Le.p=2;var a=ke;ke|=4;try{RS(t,e.alternate,e)}finally{ke=a,Le.p=s,ce.T=n}}Rt=3}}function ew(){if(Rt===4||Rt===3){Rt=0,qR();var t=ni,e=yo,n=aa,s=BS;e.subtreeFlags&10256||e.flags&10256?Rt=5:(Rt=0,yo=ni=null,tw(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(ti=null),b0(n),e=e.stateNode,Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(qc,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ce.T,a=Le.p,Le.p=2,ce.T=null;try{for(var i=t.onRecoverableError,o=0;o<s.length;o++){var l=s[o];i(l.value,{componentStack:l.stack})}}finally{ce.T=e,Le.p=a}}aa&3&&lh(),Us(t),a=t.pendingLanes,n&261930&&a&42?t===rg?oc++:(oc=0,rg=t):oc=0,Wc(0)}}function tw(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Kc(e)))}function lh(){return WS(),ZS(),ew(),nw()}function nw(){if(Rt!==5)return!1;var t=ni,e=ag;ag=0;var n=b0(aa),s=ce.T,a=Le.p;try{Le.p=32>n?32:n,ce.T=null,n=ig,ig=null;var i=ni,o=aa;if(Rt=0,yo=ni=null,aa=0,ke&6)throw Error(H(331));var l=ke;if(ke|=4,zS(i.current),VS(i,i.current,o,n),ke=l,Wc(0,!1),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(qc,i)}catch{}return!0}finally{Le.p=a,ce.T=s,tw(t,e)}}function Sb(t,e,n){e=Hn(n,e),e=Zp(t.stateNode,e,2),t=ei(t,e,2),t!==null&&($c(t,2),Us(t))}function Oe(t,e,n){if(t.tag===3)Sb(t,t,n);else for(;e!==null;){if(e.tag===3){Sb(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ti===null||!ti.has(s))){t=Hn(n,t),n=xS(2),s=ei(e,n,2),s!==null&&(vS(n,s,e,t),$c(s,2),Us(s));break}}e=e.return}}function Yf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new gM;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(tx=!0,a.add(n),t=_M.bind(null,t,e,n),e.then(t,t))}function _M(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,qe===t&&(Te&n)===n&&(mt===4||mt===3&&(Te&62914560)===Te&&300>jn()-ih?!(ke&2)&&bo(t,0):nx|=n,vo===Te&&(vo=0)),Us(t)}function sw(t,e){e===0&&(e=JC()),t=fr(t,e),t!==null&&($c(t,e),Us(t))}function EM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sw(t,n)}function NM(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(H(314))}s!==null&&s.delete(e),sw(t,n)}function CM(t,e){return v0(t,e)}var im=null,Ar=null,og=!1,rm=!1,Jf=!1,Ka=0;function Us(t){t!==Ar&&t.next===null&&(Ar===null?im=Ar=t:Ar=Ar.next=t),rm=!0,og||(og=!0,SM())}function Wc(t,e){if(!Jf&&rm){Jf=!0;do for(var n=!1,s=im;s!==null;){if(t!==0){var a=s.pendingLanes;if(a===0)var i=0;else{var o=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-Pn(42|t)+1)-1,i&=a&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,wb(s,i))}else i=Te,i=Jm(s,s===qe?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Hc(s,i)||(n=!0,wb(s,i));s=s.next}while(n);Jf=!1}}function TM(){aw()}function aw(){rm=og=!1;var t=0;Ka!==0&&LM()&&(t=Ka);for(var e=jn(),n=null,s=im;s!==null;){var a=s.next,i=iw(s,e);i===0?(s.next=null,n===null?im=a:n.next=a,a===null&&(Ar=n)):(n=s,(t!==0||i&3)&&(rm=!0)),s=a}Rt!==0&&Rt!==5||Wc(t),Ka!==0&&(Ka=0)}function iw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var o=31-Pn(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=WR(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}if(e=qe,n=Te,n=Jm(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ue===2||Ue===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Ef(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Hc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Ef(s),b0(n)){case 2:case 8:n=$C;break;case 32:n=Gu;break;case 268435456:n=YC;break;default:n=Gu}return s=rw.bind(null,t),n=v0(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Ef(s),t.callbackPriority=2,t.callbackNode=null,2}function rw(t,e){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(lh()&&t.callbackNode!==n)return null;var s=Te;return s=Jm(t,t===qe?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(HS(t,s,e),iw(t,jn()),t.callbackNode!=null&&t.callbackNode===n?rw.bind(null,t):null)}function wb(t,e){if(lh())return null;HS(t,e,!0)}function SM(){UM(function(){ke&6?v0(HC,TM):aw()})}function ax(){if(Ka===0){var t=po;t===0&&(t=Pd,Pd<<=1,!(Pd&261888)&&(Pd=256)),Ka=t}return Ka}function Ab(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:uu(""+t)}function Ib(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function wM(t,e,n,s,a){if(e==="submit"&&n&&n.stateNode===a){var i=Ab((a[bn]||null).action),o=s.submitter;o&&(e=(e=o[bn]||null)?Ab(e.formAction):o.getAttribute("formAction"),e!==null&&(i=e,o=null));var l=new Km("action","action",null,s,a);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ka!==0){var c=o?Ib(a,o):new FormData(a);Xp(n,{pending:!0,data:c,method:a.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?Ib(a,o):new FormData(a),Xp(n,{pending:!0,data:c,method:a.method,action:i},i,c))},currentTarget:a}]})}}for(var Kf=0;Kf<Op.length;Kf++){var Qf=Op[Kf],AM=Qf.toLowerCase(),IM=Qf[0].toUpperCase()+Qf.slice(1);vs(AM,"on"+IM)}vs(vT,"onAnimationEnd");vs(yT,"onAnimationIteration");vs(bT,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(Hj,"onTransitionRun");vs($j,"onTransitionStart");vs(Yj,"onTransitionCancel");vs(_T,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tc));function ow(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=d;try{i(a)}catch(m){qu(m)}a.currentTarget=null,i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=d;try{i(a)}catch(m){qu(m)}a.currentTarget=null,i=c}}}}function be(t,e){var n=e[jp];n===void 0&&(n=e[jp]=new Set);var s=t+"__bubble";n.has(s)||(lw(e,t,2,!1),n.add(s))}function Xf(t,e,n){var s=0;e&&(s|=4),lw(n,t,s,e)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function ix(t){if(!t[Bd]){t[Bd]=!0,ZC.forEach(function(n){n!=="selectionchange"&&(RM.has(n)||Xf(n,!1,t),Xf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bd]||(e[Bd]=!0,Xf("selectionchange",!1,e))}}function lw(t,e,n,s){switch(_w(e)){case 2:var a=aP;break;case 8:a=iP;break;default:a=cx}n=a.bind(null,e,n,t),a=void 0,!Lp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Wf(t,e,n,s,a){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;l!==null;){if(o=Vr(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=i=o;continue e}l=l.parentNode}}s=s.return}oT(function(){var d=i,m=N0(n),p=[];e:{var g=ET.get(t);if(g!==void 0){var x=Km,y=t;switch(t){case"keypress":if(hu(n)===0)break e;case"keydown":case"keyup":x=Nj;break;case"focusin":y="focus",x=wf;break;case"focusout":y="blur",x=wf;break;case"beforeblur":case"afterblur":x=wf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=uj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Sj;break;case vT:case yT:case bT:x=fj;break;case _T:x=Aj;break;case"scroll":case"scrollend":x=cj;break;case"wheel":x=Rj;break;case"copy":case"cut":case"paste":x=gj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Oy;break;case"toggle":case"beforetoggle":x=Mj}var T=(e&4)!==0,A=!T&&(t==="scroll"||t==="scrollend"),b=T?g!==null?g+"Capture":null:g;T=[];for(var N=d,S;N!==null;){var D=N;if(S=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||S===null||b===null||(D=xc(N,b),D!=null&&T.push(Sc(N,D,S))),A)break;N=N.return}0<T.length&&(g=new x(g,y,null,n,m),p.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==kp&&(y=n.relatedTarget||n.fromElement)&&(Vr(y)||y[Vo]))break e;if((x||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=d,y=y?Vr(y):null,y!==null&&(A=Bc(y),T=y.tag,y!==A||T!==5&&T!==27&&T!==6)&&(y=null)):(x=null,y=d),x!==y)){if(T=Vy,D="onMouseLeave",b="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(T=Oy,D="onPointerLeave",b="onPointerEnter",N="pointer"),A=x==null?g:Ol(x),S=y==null?g:Ol(y),g=new T(D,N+"leave",x,n,m),g.target=A,g.relatedTarget=S,D=null,Vr(m)===d&&(T=new T(b,N+"enter",y,n,m),T.target=S,T.relatedTarget=A,D=T),A=D,x&&y)t:{for(T=jM,b=x,N=y,S=0,D=b;D;D=T(D))S++;D=0;for(var V=N;V;V=T(V))D++;for(;0<S-D;)b=T(b),S--;for(;0<D-S;)N=T(N),D--;for(;S--;){if(b===N||N!==null&&b===N.alternate){T=b;break t}b=T(b),N=T(N)}T=null}else T=null;x!==null&&Rb(p,g,x,T,!1),y!==null&&A!==null&&Rb(p,A,y,T,!0)}}e:{if(g=d?Ol(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var k=By;else if(Gy(g))if(hT)k=Gj;else{k=zj;var R=Oj}else x=g.nodeName,!x||x.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&E0(d.elementType)&&(k=By):k=Fj;if(k&&(k=k(t,d))){mT(p,k,n,m);break e}R&&R(t,g,d),t==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&Dp(g,"number",g.value)}switch(R=d?Ol(d):window,t){case"focusin":(Gy(R)||R.contentEditable==="true")&&(zr=R,Vp=d,Wl=null);break;case"focusout":Wl=Vp=zr=null;break;case"mousedown":Up=!0;break;case"contextmenu":case"mouseup":case"dragend":Up=!1,Jy(p,n,m);break;case"selectionchange":if(qj)break;case"keydown":case"keyup":Jy(p,n,m)}var _;if(S0)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Or?dT(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(cT&&n.locale!=="ko"&&(Or||I!=="onCompositionStart"?I==="onCompositionEnd"&&Or&&(_=lT()):($a=m,C0="value"in $a?$a.value:$a.textContent,Or=!0)),R=om(d,I),0<R.length&&(I=new Uy(I,t,null,n,m),p.push({event:I,listeners:R}),_?I.data=_:(_=uT(n),_!==null&&(I.data=_)))),(_=Dj?kj(t,n):Lj(t,n))&&(I=om(d,"onBeforeInput"),0<I.length&&(R=new Uy("onBeforeInput","beforeinput",null,n,m),p.push({event:R,listeners:I}),R.data=_)),wM(p,t,d,n,m)}ow(p,e)})}function Sc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function om(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=xc(t,n),a!=null&&s.unshift(Sc(t,a,i)),a=xc(t,e),a!=null&&s.push(Sc(t,a,i))),t.tag===3)return s;t=t.return}return[]}function jM(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rb(t,e,n,s,a){for(var i=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,a?(d=xc(n,i),d!=null&&o.unshift(Sc(n,d,c))):a||(d=xc(n,i),d!=null&&o.push(Sc(n,d,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MM=/\r\n?/g,PM=/\u0000|\uFFFD/g;function jb(t){return(typeof t=="string"?t:""+t).replace(MM,`
`).replace(PM,"")}function cw(t,e){return e=jb(e),jb(t)===e}function Fe(t,e,n,s,a,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||fo(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&fo(t,""+s);break;case"className":Ld(t,"class",s);break;case"tabIndex":Ld(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ld(t,n,s);break;case"style":rT(t,s,i);break;case"data":if(e!=="object"){Ld(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=uu(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",a.name,a,null),Fe(t,e,"formEncType",a.formEncType,a,null),Fe(t,e,"formMethod",a.formMethod,a,null),Fe(t,e,"formTarget",a.formTarget,a,null)):(Fe(t,e,"encType",a.encType,a,null),Fe(t,e,"method",a.method,a,null),Fe(t,e,"target",a.target,a,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=uu(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Ws);break;case"onScroll":s!=null&&be("scroll",t);break;case"onScrollEnd":s!=null&&be("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(H(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=uu(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":be("beforetoggle",t),be("toggle",t),du(t,"popover",s);break;case"xlinkActuate":Bs(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Bs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Bs(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Bs(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Bs(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Bs(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Bs(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Bs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Bs(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":du(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=oj.get(n)||n,du(t,n,s))}}function lg(t,e,n,s,a,i){switch(n){case"style":rT(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(H(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"children":typeof s=="string"?fo(t,s):(typeof s=="number"||typeof s=="bigint")&&fo(t,""+s);break;case"onScroll":s!=null&&be("scroll",t);break;case"onScrollEnd":s!=null&&be("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Ws);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eT.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),i=t[bn]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,a),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,a);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):du(t,n,s)}}}function Qt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",t),be("load",t);var s=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Fe(t,e,i,o,n,null)}}a&&Fe(t,e,"srcSet",n.srcSet,n,null),s&&Fe(t,e,"src",n.src,n,null);return;case"input":be("invalid",t);var l=i=o=a=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var m=n[s];if(m!=null)switch(s){case"name":a=m;break;case"type":o=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(H(137,e));break;default:Fe(t,e,s,m,n,null)}}sT(t,i,l,c,d,o,a,!1);return;case"select":be("invalid",t),s=o=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Fe(t,e,a,l,n,null)}e=i,n=o,t.multiple=!!s,e!=null?Xr(t,!!s,e,!1):n!=null&&Xr(t,!!s,n,!0);return;case"textarea":be("invalid",t),i=a=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(H(91));break;default:Fe(t,e,o,l,n,null)}iT(t,s,a,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Fe(t,e,c,s,n,null)}return;case"dialog":be("beforetoggle",t),be("toggle",t),be("cancel",t),be("close",t);break;case"iframe":case"object":be("load",t);break;case"video":case"audio":for(s=0;s<Tc.length;s++)be(Tc[s],t);break;case"image":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"embed":case"source":case"link":be("error",t),be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Fe(t,e,d,s,n,null)}return;default:if(E0(e)){for(m in n)n.hasOwnProperty(m)&&(s=n[m],s!==void 0&&lg(t,e,m,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Fe(t,e,l,s,n,null))}function DM(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,d=null,m=null;for(x in n){var p=n[x];if(n.hasOwnProperty(x)&&p!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":c=p;default:s.hasOwnProperty(x)||Fe(t,e,x,null,s,p)}}for(var g in s){var x=s[g];if(p=n[g],s.hasOwnProperty(g)&&(x!=null||p!=null))switch(g){case"type":i=x;break;case"name":a=x;break;case"checked":d=x;break;case"defaultChecked":m=x;break;case"value":o=x;break;case"defaultValue":l=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(H(137,e));break;default:x!==p&&Fe(t,e,g,x,s,p)}}Pp(t,o,l,c,d,m,i,a);return;case"select":x=o=l=g=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":x=c;default:s.hasOwnProperty(i)||Fe(t,e,i,null,s,c)}for(a in s)if(i=s[a],c=n[a],s.hasOwnProperty(a)&&(i!=null||c!=null))switch(a){case"value":g=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Fe(t,e,a,i,s,c)}e=l,n=o,s=x,g!=null?Xr(t,!!n,g,!1):!!s!=!!n&&(e!=null?Xr(t,!!n,e,!0):Xr(t,!!n,n?[]:"",!1));return;case"textarea":x=g=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Fe(t,e,l,null,s,a)}for(o in s)if(a=s[o],i=n[o],s.hasOwnProperty(o)&&(a!=null||i!=null))switch(o){case"value":g=a;break;case"defaultValue":x=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(H(91));break;default:a!==i&&Fe(t,e,o,a,s,i)}aT(t,g,x);return;case"option":for(var y in n)if(g=n[y],n.hasOwnProperty(y)&&g!=null&&!s.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:Fe(t,e,y,null,s,g)}for(c in s)if(g=s[c],x=n[c],s.hasOwnProperty(c)&&g!==x&&(g!=null||x!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Fe(t,e,c,g,s,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)g=n[T],n.hasOwnProperty(T)&&g!=null&&!s.hasOwnProperty(T)&&Fe(t,e,T,null,s,g);for(d in s)if(g=s[d],x=n[d],s.hasOwnProperty(d)&&g!==x&&(g!=null||x!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(H(137,e));break;default:Fe(t,e,d,g,s,x)}return;default:if(E0(e)){for(var A in n)g=n[A],n.hasOwnProperty(A)&&g!==void 0&&!s.hasOwnProperty(A)&&lg(t,e,A,void 0,s,g);for(m in s)g=s[m],x=n[m],!s.hasOwnProperty(m)||g===x||g===void 0&&x===void 0||lg(t,e,m,g,s,x);return}}for(var b in n)g=n[b],n.hasOwnProperty(b)&&g!=null&&!s.hasOwnProperty(b)&&Fe(t,e,b,null,s,g);for(p in s)g=s[p],x=n[p],!s.hasOwnProperty(p)||g===x||g==null&&x==null||Fe(t,e,p,g,s,x)}function Mb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kM(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var a=n[s],i=a.transferSize,o=a.initiatorType,l=a.duration;if(i&&l&&Mb(o)){for(o=0,l=a.responseEnd,s+=1;s<n.length;s++){var c=n[s],d=c.startTime;if(d>l)break;var m=c.transferSize,p=c.initiatorType;m&&Mb(p)&&(c=c.responseEnd,o+=m*(c<l?1:(l-d)/(c-d)))}if(--s,e+=8*(i+o)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cg=null,dg=null;function lm(t){return t.nodeType===9?t:t.ownerDocument}function Pb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dw(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function ug(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zf=null;function LM(){var t=window.event;return t&&t.type==="popstate"?t===Zf?!1:(Zf=t,!0):(Zf=null,!1)}var uw=typeof setTimeout=="function"?setTimeout:void 0,VM=typeof clearTimeout=="function"?clearTimeout:void 0,Db=typeof Promise=="function"?Promise:void 0,UM=typeof queueMicrotask=="function"?queueMicrotask:typeof Db<"u"?function(t){return Db.resolve(null).then(t).catch(OM)}:uw;function OM(t){setTimeout(function(){throw t})}function Ci(t){return t==="head"}function kb(t,e){var n=e,s=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(a),Eo(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")lc(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,lc(n);for(var i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Yc]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=o}}else n==="body"&&lc(t.ownerDocument.body);n=a}while(n);Eo(e)}function Lb(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function mg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mg(n),_0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function zM(t,e,n,s){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Yc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function FM(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Jn(t.nextSibling),t===null))return null;return t}function mw(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Jn(t.nextSibling),t===null))return null;return t}function hg(t){return t.data==="$?"||t.data==="$~"}function fg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function GM(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var pg=null;function Vb(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Jn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Ub(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function hw(t,e,n){switch(e=lm(n),t){case"html":if(t=e.documentElement,!t)throw Error(H(452));return t;case"head":if(t=e.head,!t)throw Error(H(453));return t;case"body":if(t=e.body,!t)throw Error(H(454));return t;default:throw Error(H(451))}}function lc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);_0(t)}var Xn=new Map,Ob=new Set;function cm(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ea=Le.d;Le.d={f:BM,r:qM,D:HM,C:$M,L:YM,m:JM,X:QM,S:KM,M:XM};function BM(){var t=Ea.f(),e=rh();return t||e}function qM(t){var e=Uo(t);e!==null&&e.tag===5&&e.type==="form"?rS(e):Ea.r(t)}var Go=typeof document>"u"?null:document;function fw(t,e,n){var s=Go;if(s&&typeof e=="string"&&e){var a=qn(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Ob.has(a)||(Ob.add(a),t={rel:t,crossOrigin:n,href:e},s.querySelector(a)===null&&(e=s.createElement("link"),Qt(e,"link",t),Ut(e),s.head.appendChild(e)))}}function HM(t){Ea.D(t),fw("dns-prefetch",t,null)}function $M(t,e){Ea.C(t,e),fw("preconnect",t,e)}function YM(t,e,n){Ea.L(t,e,n);var s=Go;if(s&&t&&e){var a='link[rel="preload"][as="'+qn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+qn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+qn(n.imageSizes)+'"]')):a+='[href="'+qn(t)+'"]';var i=a;switch(e){case"style":i=_o(t);break;case"script":i=Bo(t)}Xn.has(i)||(t=et({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Xn.set(i,t),s.querySelector(a)!==null||e==="style"&&s.querySelector(Zc(i))||e==="script"&&s.querySelector(ed(i))||(e=s.createElement("link"),Qt(e,"link",t),Ut(e),s.head.appendChild(e)))}}function JM(t,e){Ea.m(t,e);var n=Go;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+qn(s)+'"][href="'+qn(t)+'"]',i=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Bo(t)}if(!Xn.has(i)&&(t=et({rel:"modulepreload",href:t},e),Xn.set(i,t),n.querySelector(a)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ed(i)))return}s=n.createElement("link"),Qt(s,"link",t),Ut(s),n.head.appendChild(s)}}}function KM(t,e,n){Ea.S(t,e,n);var s=Go;if(s&&t){var a=Qr(s).hoistableStyles,i=_o(t);e=e||"default";var o=a.get(i);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(Zc(i)))l.loading=5;else{t=et({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Xn.get(i))&&rx(t,n);var c=o=s.createElement("link");Ut(c),Qt(c,"link",t),c._p=new Promise(function(d,m){c.onload=d,c.onerror=m}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,_u(o,e,s)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(i,o)}}}function QM(t,e){Ea.X(t,e);var n=Go;if(n&&t){var s=Qr(n).hoistableScripts,a=Bo(t),i=s.get(a);i||(i=n.querySelector(ed(a)),i||(t=et({src:t,async:!0},e),(e=Xn.get(a))&&ox(t,e),i=n.createElement("script"),Ut(i),Qt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function XM(t,e){Ea.M(t,e);var n=Go;if(n&&t){var s=Qr(n).hoistableScripts,a=Bo(t),i=s.get(a);i||(i=n.querySelector(ed(a)),i||(t=et({src:t,async:!0,type:"module"},e),(e=Xn.get(a))&&ox(t,e),i=n.createElement("script"),Ut(i),Qt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function zb(t,e,n,s){var a=(a=Xa.current)?cm(a):null;if(!a)throw Error(H(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=_o(n.href),n=Qr(a).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=_o(n.href);var i=Qr(a).hoistableStyles,o=i.get(t);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,o),(i=a.querySelector(Zc(t)))&&!i._p&&(o.instance=i,o.state.loading=5),Xn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Xn.set(t,n),i||WM(a,t,n,o.state))),e&&s===null)throw Error(H(528,""));return o}if(e&&s!==null)throw Error(H(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Bo(n),n=Qr(a).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,t))}}function _o(t){return'href="'+qn(t)+'"'}function Zc(t){return'link[rel="stylesheet"]['+t+"]"}function pw(t){return et({},t,{"data-precedence":t.precedence,precedence:null})}function WM(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Qt(e,"link",n),Ut(e),t.head.appendChild(e))}function Bo(t){return'[src="'+qn(t)+'"]'}function ed(t){return"script[async]"+t}function Fb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+qn(n.href)+'"]');if(s)return e.instance=s,Ut(s),s;var a=et({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Ut(s),Qt(s,"style",a),_u(s,n.precedence,t),e.instance=s;case"stylesheet":a=_o(n.href);var i=t.querySelector(Zc(a));if(i)return e.state.loading|=4,e.instance=i,Ut(i),i;s=pw(n),(a=Xn.get(a))&&rx(s,a),i=(t.ownerDocument||t).createElement("link"),Ut(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Qt(i,"link",s),e.state.loading|=4,_u(i,n.precedence,t),e.instance=i;case"script":return i=Bo(n.src),(a=t.querySelector(ed(i)))?(e.instance=a,Ut(a),a):(s=n,(a=Xn.get(i))&&(s=et({},n),ox(s,a)),t=t.ownerDocument||t,a=t.createElement("script"),Ut(a),Qt(a,"link",s),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(H(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,_u(s,n.precedence,t));return e.instance}function _u(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,i=a,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===e)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function rx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ox(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Eu=null;function Gb(t,e,n){if(Eu===null){var s=new Map,a=Eu=new Map;a.set(n,s)}else a=Eu,s=a.get(n),s||(s=new Map,a.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var i=n[a];if(!(i[Yc]||i[Yt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(e)||"";o=t+o;var l=s.get(o);l?l.push(i):s.set(o,[i])}}return s}function Bb(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function ZM(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function gw(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function eP(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=_o(s.href),i=e.querySelector(Zc(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=dm.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,Ut(i);return}i=e.ownerDocument||e,s=pw(s),(a=Xn.get(a))&&rx(s,a),i=i.createElement("link"),Ut(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Qt(i,"link",s),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=dm.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var ep=0;function tP(t,e){return t.stylesheets&&t.count===0&&Nu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Nu(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&ep===0&&(ep=62500*kM());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nu(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>ep?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(a)}}:null}function dm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var um=null;function Nu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,um=new Map,e.forEach(nP,t),um=null,dm.call(t))}function nP(t,e){if(!(e.state.loading&4)){var n=um.get(t);if(n)var s=n.get(null);else{n=new Map,um.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}a=e.instance,o=a.getAttribute("data-precedence"),i=n.get(o)||s,i===s&&n.set(null,a),n.set(o,a),this.count++,s=dm.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),i?i.parentNode.insertBefore(a,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var wc={$$typeof:Xs,Provider:null,Consumer:null,_currentValue:Ji,_currentValue2:Ji,_threadCount:0};function sP(t,e,n,s,a,i,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.hiddenUpdates=Nf(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function xw(t,e,n,s,a,i,o,l,c,d,m,p){return t=new sP(t,e,n,o,c,d,m,p,l),e=1,i===!0&&(e|=24),i=Tn(3,null,null,e),t.current=i,i.stateNode=t,e=P0(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},L0(i),t}function vw(t){return t?(t=Br,t):Br}function yw(t,e,n,s,a,i){a=vw(a),s.context===null?s.context=a:s.pendingContext=a,s=Za(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=ei(t,s,e),n!==null&&(yn(n,t,e),ec(n,t,e))}function qb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lx(t,e){qb(t,e),(t=t.alternate)&&qb(t,e)}function bw(t){if(t.tag===13||t.tag===31){var e=fr(t,67108864);e!==null&&yn(e,t,67108864),lx(t,67108864)}}function Hb(t){if(t.tag===13||t.tag===31){var e=Dn();e=y0(e);var n=fr(t,e);n!==null&&yn(n,t,e),lx(t,e)}}var mm=!0;function aP(t,e,n,s){var a=ce.T;ce.T=null;var i=Le.p;try{Le.p=2,cx(t,e,n,s)}finally{Le.p=i,ce.T=a}}function iP(t,e,n,s){var a=ce.T;ce.T=null;var i=Le.p;try{Le.p=8,cx(t,e,n,s)}finally{Le.p=i,ce.T=a}}function cx(t,e,n,s){if(mm){var a=gg(s);if(a===null)Wf(t,e,s,hm,n),$b(t,s);else if(oP(a,t,e,n,s))s.stopPropagation();else if($b(t,s),e&4&&-1<rP.indexOf(t)){for(;a!==null;){var i=Uo(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=zi(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Pn(o);l.entanglements[1]|=c,o&=~c}Us(i),!(ke&6)&&(nm=jn()+500,Wc(0))}}break;case 31:case 13:l=fr(i,2),l!==null&&yn(l,i,2),rh(),lx(i,2)}if(i=gg(s),i===null&&Wf(t,e,s,hm,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else Wf(t,e,s,null,n)}}function gg(t){return t=N0(t),dx(t)}var hm=null;function dx(t){if(hm=null,t=Vr(t),t!==null){var e=Bc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=zC(e),t!==null)return t;t=null}else if(n===31){if(t=FC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return hm=t,null}function _w(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(HR()){case HC:return 2;case $C:return 8;case Gu:case $R:return 32;case YC:return 268435456;default:return 32}default:return 32}}var xg=!1,si=null,ai=null,ii=null,Ac=new Map,Ic=new Map,Fa=[],rP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $b(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Ac.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(e.pointerId)}}function Pl(t,e,n,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Uo(e),e!==null&&bw(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function oP(t,e,n,s,a){switch(e){case"focusin":return si=Pl(si,t,e,n,s,a),!0;case"dragenter":return ai=Pl(ai,t,e,n,s,a),!0;case"mouseover":return ii=Pl(ii,t,e,n,s,a),!0;case"pointerover":var i=a.pointerId;return Ac.set(i,Pl(Ac.get(i)||null,t,e,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ic.set(i,Pl(Ic.get(i)||null,t,e,n,s,a)),!0}return!1}function Ew(t){var e=Vr(t.target);if(e!==null){var n=Bc(e);if(n!==null){if(e=n.tag,e===13){if(e=zC(n),e!==null){t.blockedOn=e,Ry(t.priority,function(){Hb(n)});return}}else if(e===31){if(e=FC(n),e!==null){t.blockedOn=e,Ry(t.priority,function(){Hb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gg(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);kp=s,n.target.dispatchEvent(s),kp=null}else return e=Uo(n),e!==null&&bw(e),t.blockedOn=n,!1;e.shift()}return!0}function Yb(t,e,n){Cu(t)&&n.delete(e)}function lP(){xg=!1,si!==null&&Cu(si)&&(si=null),ai!==null&&Cu(ai)&&(ai=null),ii!==null&&Cu(ii)&&(ii=null),Ac.forEach(Yb),Ic.forEach(Yb)}function qd(t,e){t.blockedOn===e&&(t.blockedOn=null,xg||(xg=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,lP)))}var Hd=null;function Jb(t){Hd!==t&&(Hd=t,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,function(){Hd===t&&(Hd=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],a=t[e+2];if(typeof s!="function"){if(dx(s||n)===null)continue;break}var i=Uo(n);i!==null&&(t.splice(e,3),e-=3,Xp(i,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function Eo(t){function e(c){return qd(c,t)}si!==null&&qd(si,t),ai!==null&&qd(ai,t),ii!==null&&qd(ii,t),Ac.forEach(e),Ic.forEach(e);for(var n=0;n<Fa.length;n++){var s=Fa[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Fa.length&&(n=Fa[0],n.blockedOn===null);)Ew(n),n.blockedOn===null&&Fa.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var a=n[s],i=n[s+1],o=a[bn]||null;if(typeof i=="function")o||Jb(n);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[bn]||null)l=o.formAction;else if(dx(a)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),Jb(n)}}}function Nw(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(o){return a=o})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function ux(t){this._internalRoot=t}ch.prototype.render=ux.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));var n=e.current,s=Dn();yw(n,s,t,e,null,null)};ch.prototype.unmount=ux.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yw(t.current,2,null,t,null,null),rh(),e[Vo]=null}};function ch(t){this._internalRoot=t}ch.prototype.unstable_scheduleHydration=function(t){if(t){var e=WC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fa.length&&e!==0&&e<Fa[n].priority;n++);Fa.splice(n,0,t),n===0&&Ew(t)}};var Kb=UC.version;if(Kb!=="19.2.3")throw Error(H(527,Kb,"19.2.3"));Le.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=UR(e),t=t!==null?GC(t):null,t=t===null?null:t.stateNode,t};var cP={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{qc=$d.inject(cP),Mn=$d}catch{}}$m.createRoot=function(t,e){if(!OC(t))throw Error(H(299));var n=!1,s="",a=fS,i=pS,o=gS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=xw(t,1,!1,null,null,n,s,null,a,i,o,Nw),t[Vo]=e.current,ix(t),new ux(e)};$m.hydrateRoot=function(t,e,n){if(!OC(t))throw Error(H(299));var s=!1,a="",i=fS,o=pS,l=gS,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=xw(t,1,!0,e,n??null,s,a,c,i,o,l,Nw),e.context=vw(null),n=e.current,s=Dn(),s=y0(s),a=Za(s),a.callback=null,ei(n,a,s),n=s,e.current.lanes=n,$c(e,n),Us(e),t[Vo]=e.current,ix(t),new ch(e)};$m.version="19.2.3";function Cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cw)}catch(t){console.error(t)}}Cw(),MC.exports=$m;var dP=MC.exports;const uP=EC(dP);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qb="popstate";function mP(t={}){function e(s,a){let{pathname:i,search:o,hash:l}=s.location;return vg("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Rc(a)}return fP(e,n,null,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hP(){return Math.random().toString(36).substring(2,10)}function Xb(t,e){return{usr:t.state,key:t.key,idx:e}}function vg(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?qo(e):e,state:n,key:e&&e.key||s||hP()}}function Rc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function qo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function fP(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l="POP",c=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function p(){l="POP";let A=m(),b=A==null?null:A-d;d=A,c&&c({action:l,location:T.location,delta:b})}function g(A,b){l="PUSH";let N=vg(T.location,A,b);d=m()+1;let S=Xb(N,d),D=T.createHref(N);try{o.pushState(S,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(D)}i&&c&&c({action:l,location:T.location,delta:1})}function x(A,b){l="REPLACE";let N=vg(T.location,A,b);d=m();let S=Xb(N,d),D=T.createHref(N);o.replaceState(S,"",D),i&&c&&c({action:l,location:T.location,delta:0})}function y(A){return pP(A)}let T={get action(){return l},get location(){return t(a,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Qb,p),c=A,()=>{a.removeEventListener(Qb,p),c=null}},createHref(A){return e(a,A)},createURL:y,encodeLocation(A){let b=y(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:x,go(A){return o.go(A)}};return T}function pP(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),it(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Rc(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Tw(t,e,n="/"){return gP(t,e,n,!1)}function gP(t,e,n,s){let a=typeof e=="string"?qo(e):e,i=fa(a.pathname||"/",n);if(i==null)return null;let o=Sw(t);xP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=AP(i);l=SP(o[c],d,s)}return l}function Sw(t,e=[],n=[],s="",a=!1){let i=(o,l,c=a,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&c)return;it(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let p=ia([s,m.relativePath]),g=n.concat(m);o.children&&o.children.length>0&&(it(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Sw(o.children,e,g,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:CP(p,o.index),routesMeta:g})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of ww(o.path))i(o,l,!0,d)}),e}function ww(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=ww(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function xP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TP(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var vP=/^:[\w-]+$/,yP=3,bP=2,_P=1,EP=10,NP=-2,Wb=t=>t==="*";function CP(t,e){let n=t.split("/"),s=n.length;return n.some(Wb)&&(s+=NP),e&&(s+=bP),n.filter(a=>!Wb(a)).reduce((a,i)=>a+(vP.test(i)?yP:i===""?_P:EP),s)}function TP(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function SP(t,e,n=!1){let{routesMeta:s}=t,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=fm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),g=c.route;if(!p&&d&&n&&!s[s.length-1].route.index&&(p=fm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:ia([i,p.pathname]),pathnameBase:MP(ia([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=ia([i,p.pathnameBase]))}return o}function fm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=wP(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,{paramName:m,isOptional:p},g)=>{if(m==="*"){let y=l[g]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function wP(t,e=!1,n=!0){Wn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function AP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function fa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var Aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IP=t=>Aw.test(t);function RP(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?qo(t):t,i;if(n)if(IP(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wn(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Zb(n.substring(1),"/"):i=Zb(n,e)}else i=e;return{pathname:i,search:PP(s),hash:DP(a)}}function Zb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function tp(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mx(t){let e=jP(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function hx(t,e,n,s=!1){let a;typeof t=="string"?a=qo(t):(a={...t},it(!a.pathname||!a.pathname.includes("?"),tp("?","pathname","search",a)),it(!a.pathname||!a.pathname.includes("#"),tp("#","pathname","hash",a)),it(!a.search||!a.search.includes("#"),tp("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;a.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=RP(a,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}var ia=t=>t.join("/").replace(/\/\/+/g,"/"),MP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,kP=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function LP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function VP(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Iw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rw(t,e){let n=t;if(typeof n!="string"||!Aw.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(Iw)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=fa(o.pathname,e);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:a=!0}catch{Wn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jw=["POST","PUT","PATCH","DELETE"];new Set(jw);var UP=["GET",...jw];new Set(UP);var Ho=P.createContext(null);Ho.displayName="DataRouter";var dh=P.createContext(null);dh.displayName="DataRouterState";var OP=P.createContext(!1),Mw=P.createContext({isTransitioning:!1});Mw.displayName="ViewTransition";var zP=P.createContext(new Map);zP.displayName="Fetchers";var FP=P.createContext(null);FP.displayName="Await";var Un=P.createContext(null);Un.displayName="Navigation";var td=P.createContext(null);td.displayName="Location";var ys=P.createContext({outlet:null,matches:[],isDataRoute:!1});ys.displayName="Route";var fx=P.createContext(null);fx.displayName="RouteError";var Pw="REACT_ROUTER_ERROR",GP="REDIRECT",BP="ROUTE_ERROR_RESPONSE";function qP(t){if(t.startsWith(`${Pw}:${GP}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function HP(t){if(t.startsWith(`${Pw}:${BP}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new kP(e.status,e.statusText,e.data)}catch{}}function $P(t,{relative:e}={}){it($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=P.useContext(Un),{hash:a,pathname:i,search:o}=nd(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:ia([n,i])),s.createHref({pathname:l,search:o,hash:a})}function $o(){return P.useContext(td)!=null}function Os(){return it($o(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(td).location}var Dw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kw(t){P.useContext(Un).static||P.useLayoutEffect(t)}function bs(){let{isDataRoute:t}=P.useContext(ys);return t?rD():YP()}function YP(){it($o(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Ho),{basename:e,navigator:n}=P.useContext(Un),{matches:s}=P.useContext(ys),{pathname:a}=Os(),i=JSON.stringify(mx(s)),o=P.useRef(!1);return kw(()=>{o.current=!0}),P.useCallback((c,d={})=>{if(Wn(o.current,Dw),!o.current)return;if(typeof c=="number"){n.go(c);return}let m=hx(c,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ia([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,i,a,t])}P.createContext(null);function JP(){let{matches:t}=P.useContext(ys),e=t[t.length-1];return e?e.params:{}}function nd(t,{relative:e}={}){let{matches:n}=P.useContext(ys),{pathname:s}=Os(),a=JSON.stringify(mx(n));return P.useMemo(()=>hx(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function KP(t,e){return Lw(t,e)}function Lw(t,e,n,s,a){var N;it($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(Un),{matches:o}=P.useContext(ys),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",m=l?l.pathnameBase:"/",p=l&&l.route;{let S=p&&p.path||"";Uw(d,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=Os(),x;if(e){let S=typeof e=="string"?qo(e):e;it(m==="/"||((N=S.pathname)==null?void 0:N.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=g;let y=x.pathname||"/",T=y;if(m!=="/"){let S=m.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let A=Tw(t,{pathname:T});Wn(p||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Wn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=eD(A&&A.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:ia([m,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:ia([m,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,n,s,a);return e&&b?P.createElement(td.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},b):b}function QP(){let t=iD(),e=LP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:i},"ErrorBoundary")," or"," ",P.createElement("code",{style:i},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:a},n):null,o)}var XP=P.createElement(QP,null),Vw=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=HP(t.digest);n&&(t=n)}let e=t!==void 0?P.createElement(ys.Provider,{value:this.props.routeContext},P.createElement(fx.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?P.createElement(WP,{error:t},e):e}};Vw.contextType=OP;var np=new WeakMap;function WP({children:t,error:e}){let{basename:n}=P.useContext(Un);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=qP(e.digest);if(s){let a=np.get(e);if(a)throw a;let i=Rw(s.location,n);if(Iw&&!np.get(e))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw np.set(e,o),o}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function ZP({routeContext:t,match:e,children:n}){let s=P.useContext(Ho);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ys.Provider,{value:t},n)}function eD(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let m=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);it(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let l=!1,c=-1;if(n)for(let m=0;m<i.length;m++){let p=i[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=m),p.route.id){let{loaderData:g,errors:x}=n,y=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=n&&s?(m,p)=>{var g,x;s(m,{location:n.location,params:((x=(g=n.matches)==null?void 0:g[0])==null?void 0:x.params)??{},unstable_pattern:VP(n.matches),errorInfo:p})}:void 0;return i.reduceRight((m,p,g)=>{let x,y=!1,T=null,A=null;n&&(x=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||XP,l&&(c<0&&g===0?(Uw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,A=null):c===g&&(y=!0,A=p.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,g+1)),N=()=>{let S;return x?S=T:y?S=A:p.route.Component?S=P.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=m,P.createElement(ZP,{match:p,routeContext:{outlet:m,matches:b,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(Vw,{location:n.location,revalidation:n.revalidation,component:T,error:x,children:N(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):N()},null)}function px(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tD(t){let e=P.useContext(Ho);return it(e,px(t)),e}function nD(t){let e=P.useContext(dh);return it(e,px(t)),e}function sD(t){let e=P.useContext(ys);return it(e,px(t)),e}function gx(t){let e=sD(t),n=e.matches[e.matches.length-1];return it(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aD(){return gx("useRouteId")}function iD(){var s;let t=P.useContext(fx),e=nD("useRouteError"),n=gx("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function rD(){let{router:t}=tD("useNavigate"),e=gx("useNavigate"),n=P.useRef(!1);return kw(()=>{n.current=!0}),P.useCallback(async(a,i={})=>{Wn(n.current,Dw),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var e_={};function Uw(t,e,n){!e&&!e_[t]&&(e_[t]=!0,Wn(!1,n))}P.memo(oD);function oD({routes:t,future:e,state:n,onError:s}){return Lw(t,void 0,n,s,e)}function rs({to:t,replace:e,state:n,relative:s}){it($o(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(Un);Wn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=P.useContext(ys),{pathname:o}=Os(),l=bs(),c=hx(t,mx(i),o,s==="path"),d=JSON.stringify(c);return P.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:s})},[l,d,s,e,n]),null}function rn(t){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lD({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){it(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[l,a,i,o]);typeof n=="string"&&(n=qo(n));let{pathname:d="/",search:m="",hash:p="",state:g=null,key:x="default"}=n,y=P.useMemo(()=>{let T=fa(d,l);return T==null?null:{location:{pathname:T,search:m,hash:p,state:g,key:x},navigationType:s}},[l,d,m,p,g,x,s]);return Wn(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:P.createElement(Un.Provider,{value:c},P.createElement(td.Provider,{children:e,value:y}))}function cD({children:t,location:e}){return KP(yg(t),e)}function yg(t,e=[]){let n=[];return P.Children.forEach(t,(s,a)=>{if(!P.isValidElement(s))return;let i=[...e,a];if(s.type===P.Fragment){n.push.apply(n,yg(s.props.children,i));return}it(s.type===rn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=yg(s.props.children,i)),n.push(o)}),n}var Tu="get",Su="application/x-www-form-urlencoded";function uh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function dD(t){return uh(t)&&t.tagName.toLowerCase()==="button"}function uD(t){return uh(t)&&t.tagName.toLowerCase()==="form"}function mD(t){return uh(t)&&t.tagName.toLowerCase()==="input"}function hD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fD(t,e){return t.button===0&&(!e||e==="_self")&&!hD(t)}var Yd=null;function pD(){if(Yd===null)try{new FormData(document.createElement("form"),0),Yd=!1}catch{Yd=!0}return Yd}var gD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sp(t){return t!=null&&!gD.has(t)?(Wn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Su}"`),null):t}function xD(t,e){let n,s,a,i,o;if(uD(t)){let l=t.getAttribute("action");s=l?fa(l,e):null,n=t.getAttribute("method")||Tu,a=sp(t.getAttribute("enctype"))||Su,i=new FormData(t)}else if(dD(t)||mD(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?fa(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Tu,a=sp(t.getAttribute("formenctype"))||sp(l.getAttribute("enctype"))||Su,i=new FormData(l,t),!pD()){let{name:d,type:m,value:p}=t;if(m==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,p)}}else{if(uh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Tu,s=null,a=Su,o=t}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vD(t,e,n,s){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${s}`:a.pathname=`${a.pathname}.${s}`:a.pathname==="/"?a.pathname=`_root.${s}`:e&&fa(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function yD(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _D(t,e,n){let s=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await yD(i,n);return o.links?o.links():[]}return[]}));return TD(s.flat(1).filter(bD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function t_(t,e,n,s,a,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var m;return n[d].pathname!==c.pathname||((m=n[d].route.path)==null?void 0:m.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var p;let m=s.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function ED(t,e,{includeHydrateFallback:n}={}){return ND(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function ND(t){return[...new Set(t)]}function CD(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function TD(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let i=JSON.stringify(CD(a));return n.has(i)||(n.add(i),s.push({key:i,link:a})),s},[])}function Ow(){let t=P.useContext(Ho);return xx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function SD(){let t=P.useContext(dh);return xx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vx=P.createContext(void 0);vx.displayName="FrameworkContext";function zw(){let t=P.useContext(vx);return xx(t,"You must render this element inside a <HydratedRouter> element"),t}function wD(t,e){let n=P.useContext(vx),[s,a]=P.useState(!1),[i,o]=P.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:m,onTouchStart:p}=e,g=P.useRef(null);P.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=b=>{b.forEach(N=>{o(N.isIntersecting)})},A=new IntersectionObserver(T,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),P.useEffect(()=>{if(s){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[s]);let x=()=>{a(!0)},y=()=>{a(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Dl(l,x),onBlur:Dl(c,y),onMouseEnter:Dl(d,x),onMouseLeave:Dl(m,y),onTouchStart:Dl(p,x)}]:[!1,g,{}]}function Dl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function AD({page:t,...e}){let{router:n}=Ow(),s=P.useMemo(()=>Tw(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?P.createElement(RD,{page:t,matches:s,...e}):null}function ID(t){let{manifest:e,routeModules:n}=zw(),[s,a]=P.useState([]);return P.useEffect(()=>{let i=!1;return _D(t,e,n).then(o=>{i||a(o)}),()=>{i=!0}},[t,e,n]),s}function RD({page:t,matches:e,...n}){let s=Os(),{future:a,manifest:i,routeModules:o}=zw(),{basename:l}=Ow(),{loaderData:c,matches:d}=SD(),m=P.useMemo(()=>t_(t,e,d,i,s,"data"),[t,e,d,i,s]),p=P.useMemo(()=>t_(t,e,d,i,s,"assets"),[t,e,d,i,s]),g=P.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let T=new Set,A=!1;if(e.forEach(N=>{var D;let S=i.routes[N.route.id];!S||!S.hasLoader||(!m.some(V=>V.route.id===N.route.id)&&N.route.id in c&&((D=o[N.route.id])!=null&&D.shouldRevalidate)||S.hasClientLoader?A=!0:T.add(N.route.id))}),T.size===0)return[];let b=vD(t,l,a.unstable_trailingSlashAwareDataRequests,"data");return A&&T.size>0&&b.searchParams.set("_routes",e.filter(N=>T.has(N.route.id)).map(N=>N.route.id).join(",")),[b.pathname+b.search]},[l,a.unstable_trailingSlashAwareDataRequests,c,s,i,m,e,t,o]),x=P.useMemo(()=>ED(p,i),[p,i]),y=ID(p);return P.createElement(P.Fragment,null,g.map(T=>P.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),x.map(T=>P.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),y.map(({key:T,link:A})=>P.createElement("link",{key:T,nonce:n.nonce,...A})))}function jD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var MD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MD&&(window.__reactRouterVersion="7.12.0")}catch{}function PD({basename:t,children:e,unstable_useTransitions:n,window:s}){let a=P.useRef();a.current==null&&(a.current=mP({window:s,v5Compat:!0}));let i=a.current,[o,l]=P.useState({action:i.action,location:i.location}),c=P.useCallback(d=>{n===!1?l(d):P.startTransition(()=>l(d))},[n]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement(lD,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var Fw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gw=P.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...x},y){let{basename:T,unstable_useTransitions:A}=P.useContext(Un),b=typeof d=="string"&&Fw.test(d),N=Rw(d,T);d=N.to;let S=$P(d,{relative:a}),[D,V,k]=wD(s,x),R=VD(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:A});function _(C){e&&e(C),C.defaultPrevented||R(C)}let I=P.createElement("a",{...x,...k,href:N.absoluteURL||S,onClick:N.isExternal||i?e:_,ref:jD(y,V),target:c,"data-discover":!b&&n==="render"?"true":void 0});return D&&!b?P.createElement(P.Fragment,null,I,P.createElement(AD,{page:S})):I});Gw.displayName="Link";var DD=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},m){let p=nd(o,{relative:d.relative}),g=Os(),x=P.useContext(dh),{navigator:y,basename:T}=P.useContext(Un),A=x!=null&&GD(p)&&l===!0,b=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=g.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(N=N.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&T&&(S=fa(S,T)||S);const D=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let V=N===b||!a&&N.startsWith(b)&&N.charAt(D)==="/",k=S!=null&&(S===b||!a&&S.startsWith(b)&&S.charAt(b.length)==="/"),R={isActive:V,isPending:k,isTransitioning:A},_=V?e:void 0,I;typeof s=="function"?I=s(R):I=[s,V?"active":null,k?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(R):i;return P.createElement(Gw,{...d,"aria-current":_,className:I,ref:m,style:C,to:o,viewTransition:l},typeof c=="function"?c(R):c)});DD.displayName="NavLink";var kD=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:i,method:o=Tu,action:l,onSubmit:c,relative:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...x},y)=>{let{unstable_useTransitions:T}=P.useContext(Un),A=zD(),b=FD(l,{relative:d}),N=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&Fw.test(l),D=V=>{if(c&&c(V),V.defaultPrevented)return;V.preventDefault();let k=V.nativeEvent.submitter,R=(k==null?void 0:k.getAttribute("formmethod"))||o,_=()=>A(k||V.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:a,state:i,relative:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g});T&&n!==!1?P.startTransition(()=>_()):_()};return P.createElement("form",{ref:y,method:N,action:b,onSubmit:s?c:D,...x,"data-discover":!S&&t==="render"?"true":void 0})});kD.displayName="Form";function LD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bw(t){let e=P.useContext(Ho);return it(e,LD(t)),e}function VD(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=bs(),m=Os(),p=nd(t,{relative:i});return P.useCallback(g=>{if(fD(g,e)){g.preventDefault();let x=n!==void 0?n:Rc(m)===Rc(p),y=()=>d(t,{replace:x,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?P.startTransition(()=>y()):y()}},[m,d,p,n,s,e,t,a,i,o,l,c])}var UD=0,OD=()=>`__${String(++UD)}__`;function zD(){let{router:t}=Bw("useSubmit"),{basename:e}=P.useContext(Un),n=aD(),s=t.fetch,a=t.navigate;return P.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=xD(i,e);if(o.navigate===!1){let g=o.fetcherKey||OD();await s(g,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:p,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:p,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,a,e,n])}function FD(t,{relative:e}={}){let{basename:n}=P.useContext(Un),s=P.useContext(ys);it(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...nd(t||".",{relative:e})},o=Os();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();i.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ia([n,i.pathname])),Rc(i)}function GD(t,{relative:e}={}){let n=P.useContext(Mw);it(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Bw("useViewTransitionState"),a=nd(t,{relative:e});if(!n.isTransitioning)return!1;let i=fa(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=fa(n.nextLocation.pathname,s)||n.nextLocation.pathname;return fm(a.pathname,o)!=null||fm(a.pathname,i)!=null}const BD="modulepreload",qD=function(t){return"/EDUPLANMX/"+t},n_={},No=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=qD(c),c in n_)return;n_[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":BD,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,x)=>{p.addEventListener("load",g),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},HD=()=>{};var s_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},$D=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[n++];e[s++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[n++],o=t[n++],l=t[n++],c=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,d=c?t[a+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(g=64)),s.push(n[m],n[p],n[g],n[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$D(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const i=n[t.charAt(a++)],l=a<t.length?n[t.charAt(a)]:0;++a;const d=a<t.length?n[t.charAt(a)]:64;++a;const p=a<t.length?n[t.charAt(a)]:64;if(++a,i==null||l==null||d==null||p==null)throw new YD;const g=i<<2|l>>4;if(s.push(g),d!==64){const x=l<<4&240|d>>2;if(s.push(x),p!==64){const y=d<<6&192|p;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JD=function(t){const e=qw(t);return Hw.encodeByteArray(e,!0)},pm=function(t){return JD(t).replace(/\./g,"")},$w=function(t){try{return Hw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=()=>KD().__FIREBASE_DEFAULTS__,XD=()=>{if(typeof process>"u"||typeof s_>"u")return;const t=s_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$w(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return HD()||QD()||XD()||WD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yw=t=>{var e,n;return(n=(e=mh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ZD=t=>{const e=Yw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Jw=()=>{var t;return(t=mh())==null?void 0:t.config},Kw=t=>{var e;return(e=mh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pm(JSON.stringify(n)),pm(JSON.stringify(o)),""].join(".")}const cc={};function n4(){const t={prod:[],emulator:[]};for(const e of Object.keys(cc))cc[e]?t.emulator.push(e):t.prod.push(e);return t}function s4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let a_=!1;function Xw(t,e){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||cc[t]===e||cc[t]||a_)return;cc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=n4().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{a_=!0,o()},g}function m(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=s4(s),x=n("text"),y=document.getElementById(x)||document.createElement("span"),T=n("learnmore"),A=document.getElementById(T)||document.createElement("a"),b=n("preprendIcon"),N=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),m(A,T);const D=d();c(N,b),S.append(N,y,A,D),document.body.appendChild(S)}i?(y.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function i4(){var e;const t=(e=mh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function l4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c4(){const t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d4(){return!i4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u4(){try{return typeof indexedDB=="object"}catch{return!1}}function m4(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="FirebaseError";class Na extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=h4,Object.setPrototypeOf(this,Na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?f4(i,s):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Na(a,l,s)}}function f4(t,e){return t.replace(p4,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const p4=/\{\$([^}]+)}/g;function g4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const i=t[a],o=e[a];if(i_(i)&&i_(o)){if(!pa(i,o))return!1}else if(i!==o)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function i_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Gl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,i]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function Bl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function x4(t,e){const n=new v4(t,e);return n.subscribe.bind(n)}class v4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");y4(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=ap),a.error===void 0&&(a.error=ap),a.complete===void 0&&(a.complete=ap);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class ar{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new e4;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E4(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:a});s.resolve(i)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const i=this.instances.get(s);return i&&e(i,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_4(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _4(t){return t===Bi?void 0:t}function E4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new b4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const C4={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},T4=Ee.INFO,S4={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},w4=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=S4[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yx{constructor(e){this.name=e,this._logLevel=T4,this._logHandler=w4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const A4=(t,e)=>e.some(n=>t instanceof n);let r_,o_;function I4(){return r_||(r_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R4(){return o_||(o_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,bg=new WeakMap,Zw=new WeakMap,ip=new WeakMap,bx=new WeakMap;function j4(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ri(t.result)),a()},o=()=>{s(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ww.set(n,t)}).catch(()=>{}),bx.set(e,t),e}function M4(t){if(bg.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),a()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});bg.set(t,e)}let _g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P4(t){_g=t(_g)}function D4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(rp(this),e,...n);return Zw.set(s,e.sort?e.sort():[e]),ri(s)}:R4().includes(t)?function(...e){return t.apply(rp(this),e),ri(Ww.get(this))}:function(...e){return ri(t.apply(rp(this),e))}}function k4(t){return typeof t=="function"?D4(t):(t instanceof IDBTransaction&&M4(t),A4(t,I4())?new Proxy(t,_g):t)}function ri(t){if(t instanceof IDBRequest)return j4(t);if(ip.has(t))return ip.get(t);const e=k4(t);return e!==t&&(ip.set(t,e),bx.set(e,t)),e}const rp=t=>bx.get(t);function L4(t,e,{blocked:n,upgrade:s,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),l=ri(o);return s&&o.addEventListener("upgradeneeded",c=>{s(ri(o.result),c.oldVersion,c.newVersion,ri(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),a&&c.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const V4=["get","getKey","getAll","getAllKeys","count"],U4=["put","add","delete","clear"],op=new Map;function l_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(op.get(e))return op.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=U4.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||V4.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),a&&c.done]))[0]};return op.set(e,i),i}P4(t=>({...t,get:(e,n,s)=>l_(e,n)||t.get(e,n,s),has:(e,n)=>!!l_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z4(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function z4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eg="@firebase/app",c_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new yx("@firebase/app"),F4="@firebase/app-compat",G4="@firebase/analytics-compat",B4="@firebase/analytics",q4="@firebase/app-check-compat",H4="@firebase/app-check",$4="@firebase/auth",Y4="@firebase/auth-compat",J4="@firebase/database",K4="@firebase/data-connect",Q4="@firebase/database-compat",X4="@firebase/functions",W4="@firebase/functions-compat",Z4="@firebase/installations",e5="@firebase/installations-compat",t5="@firebase/messaging",n5="@firebase/messaging-compat",s5="@firebase/performance",a5="@firebase/performance-compat",i5="@firebase/remote-config",r5="@firebase/remote-config-compat",o5="@firebase/storage",l5="@firebase/storage-compat",c5="@firebase/firestore",d5="@firebase/ai",u5="@firebase/firestore-compat",m5="firebase",h5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="[DEFAULT]",f5={[Eg]:"fire-core",[F4]:"fire-core-compat",[B4]:"fire-analytics",[G4]:"fire-analytics-compat",[H4]:"fire-app-check",[q4]:"fire-app-check-compat",[$4]:"fire-auth",[Y4]:"fire-auth-compat",[J4]:"fire-rtdb",[K4]:"fire-data-connect",[Q4]:"fire-rtdb-compat",[X4]:"fire-fn",[W4]:"fire-fn-compat",[Z4]:"fire-iid",[e5]:"fire-iid-compat",[t5]:"fire-fcm",[n5]:"fire-fcm-compat",[s5]:"fire-perf",[a5]:"fire-perf-compat",[i5]:"fire-rc",[r5]:"fire-rc-compat",[o5]:"fire-gcs",[l5]:"fire-gcs-compat",[c5]:"fire-fst",[u5]:"fire-fst-compat",[d5]:"fire-vertex","fire-js":"fire-js",[m5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Map,p5=new Map,Cg=new Map;function d_(t,e){try{t.container.addComponent(e)}catch(n){ga.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(Cg.has(e))return ga.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,t);for(const n of gm.values())d_(n,t);for(const n of p5.values())d_(n,t);return!0}function _x(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new sd("app","Firebase",g5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=h5;function eA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Ng,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw oi.create("bad-app-name",{appName:String(a)});if(n||(n=Jw()),!n)throw oi.create("no-options");const i=gm.get(a);if(i){if(pa(n,i.options)&&pa(s,i.config))return i;throw oi.create("duplicate-app",{appName:a})}const o=new N4(a);for(const c of Cg.values())o.addComponent(c);const l=new x5(n,s,o);return gm.set(a,l),l}function tA(t=Ng){const e=gm.get(t);if(!e&&t===Ng&&Jw())return eA();if(!e)throw oi.create("no-app",{appName:t});return e}function li(t,e,n){let s=f5[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const o=[`Unable to register library "${s}" with version "${e}":`];a&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ga.warn(o.join(" "));return}Co(new ar(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="firebase-heartbeat-database",y5=1,jc="firebase-heartbeat-store";let lp=null;function nA(){return lp||(lp=L4(v5,y5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),lp}async function b5(t){try{const n=(await nA()).transaction(jc),s=await n.objectStore(jc).get(sA(t));return await n.done,s}catch(e){if(e instanceof Na)ga.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ga.warn(n.message)}}}async function u_(t,e){try{const s=(await nA()).transaction(jc,"readwrite");await s.objectStore(jc).put(e,sA(t)),await s.done}catch(n){if(n instanceof Na)ga.warn(n.message);else{const s=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ga.warn(s.message)}}}function sA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=1024,E5=30;class N5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T5(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=m_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>E5){const o=S5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ga.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=m_(),{heartbeatsToSend:s,unsentEntries:a}=C5(this._heartbeatsCache.heartbeats),i=pm(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ga.warn(n),""}}}function m_(){return new Date().toISOString().substring(0,10)}function C5(t,e=_5){const n=[];let s=t.slice();for(const a of t){const i=n.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),h_(n)>e){i.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),h_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class T5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u4()?m4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return u_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return u_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function h_(t){return pm(JSON.stringify({version:2,heartbeats:t})).length}function S5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){Co(new ar("platform-logger",e=>new O4(e),"PRIVATE")),Co(new ar("heartbeat",e=>new N5(e),"PRIVATE")),li(Eg,c_,t),li(Eg,c_,"esm2020"),li("fire-js","")}w5("");function aA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A5=aA,iA=new sd("auth","Firebase",aA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=new yx("@firebase/auth");function I5(t,...e){xm.logLevel<=Ee.WARN&&xm.warn(`Auth (${Jo}): ${t}`,...e)}function wu(t,...e){xm.logLevel<=Ee.ERROR&&xm.error(`Auth (${Jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw Nx(t,...e)}function cs(t,...e){return Nx(t,...e)}function Ex(t,e,n){const s={...A5(),[e]:n};return new sd("auth","Firebase",s).create(e,{appName:t.name})}function ra(t){return Ex(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R5(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Zn(t,"argument-error"),Ex(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return iA.create(t,...e)}function oe(t,e,...n){if(!t)throw Nx(e,...n)}function ea(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wu(e),new Error(e)}function xa(t,e){t||ea(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function j5(){return f_()==="http:"||f_()==="https:"}function f_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j5()||o4()||"connection"in navigator)?navigator.onLine:!0}function P5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.shortDelay=e,this.longDelay=n,xa(n>e,"Short delay should be less than long delay!"),this.isMobile=a4()||l4()}get(){return M5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){xa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L5=new id(3e4,6e4);function Ti(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Si(t,e,n,s,a={}){return oA(t,a,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=ad({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return r4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(d.credentials="include"),rA.fetch()(await lA(t,t.config.apiHost,n,l),d)})}async function oA(t,e,n){t._canInitEmulator=!1;const s={...D5,...e};try{const a=new U5(t),i=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Jd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Jd(t,"user-disabled",o);const m=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ex(t,m,d);Zn(t,m)}}catch(a){if(a instanceof Na)throw a;Zn(t,"network-request-failed",{message:String(a)})}}async function rd(t,e,n,s,a={}){const i=await Si(t,e,n,s,a);return"mfaPendingCredential"in i&&Zn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function lA(t,e,n,s){const a=`${e}${n}?${s}`,i=t,o=i.config.emulator?Cx(t.config,a):`${t.config.apiScheme}://${a}`;return k5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function V5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cs(this.auth,"network-request-failed")),L5.get())})}}function Jd(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=cs(t,e,s);return a.customData._tokenResponse=n,a}function p_(t){return t!==void 0&&t.enterprise!==void 0}class O5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return V5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z5(t,e){return Si(t,"GET","/v2/recaptchaConfig",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(t,e){return Si(t,"POST","/v1/accounts:delete",e)}async function vm(t,e){return Si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G5(t,e=!1){const n=vt(t),s=await n.getIdToken(e),a=Tx(s);oe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:s,authTime:dc(cp(a.auth_time)),issuedAtTime:dc(cp(a.iat)),expirationTime:dc(cp(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function cp(t){return Number(t)*1e3}function Tx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const a=$w(n);return a?JSON.parse(a):(wu("Failed to decode base64 JWT payload"),null)}catch(a){return wu("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function g_(t){const e=Tx(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Na&&B5(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function B5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ym(t){var p;const e=t.auth,n=await t.getIdToken(),s=await Mc(t,vm(e,{idToken:n}));oe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const i=(p=a.providerUserInfo)!=null&&p.length?cA(a.providerUserInfo):[],o=$5(t.providerData,i),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Sg(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function H5(t){const e=vt(t);await ym(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $5(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function cA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e){const n=await oA(t,{},async()=>{const s=ad({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=await lA(t,a,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(c.credentials="include"),rA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J5(t,e){return Si(t,"POST","/v2/accounts:revokeToken",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=g_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:i}=await Y5(e,n);this.updateTokensAndExpiration(s,a,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:i}=n,o=new so;return s&&(oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),a&&(oe(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return ea("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new q5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Sg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G5(this,e)}reload(){return H5(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ym(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await Mc(this,F5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:x,providerData:y,stsTokenManager:T}=n;oe(p&&T,e,"internal-error");const A=so.fromJSON(this.name,T);oe(typeof p=="string",e,"internal-error"),Pa(s,e.name),Pa(a,e.name),oe(typeof g=="boolean",e,"internal-error"),oe(typeof x=="boolean",e,"internal-error"),Pa(i,e.name),Pa(o,e.name),Pa(l,e.name),Pa(c,e.name),Pa(d,e.name),Pa(m,e.name);const b=new ls({uid:p,auth:e,email:a,emailVerified:g,displayName:s,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:A,createdAt:d,lastLoginAt:m});return y&&Array.isArray(y)&&(b.providerData=y.map(N=>({...N}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,s=!1){const a=new so;a.updateFromServerResponse(n);const i=new ls({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await ym(i),i}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];oe(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?cA(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),l=new so;l.updateFromIdToken(s);const c=new ls({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new Sg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function ta(t){xa(t instanceof Function,"Expected a class definition");let e=x_.get(t);return e?(xa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dA.type="NONE";const v_=dA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class ao{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:i}=this.auth;this.fullUserKey=Au(this.userKey,a.apiKey,i),this.fullPersistenceKey=Au("persistence",a.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vm(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ao(ta(v_),e,s);const a=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=a[0]||ta(v_);const o=Au(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const g=await vm(e,{idToken:m}).catch(()=>{});if(!g)break;p=await ls._fromGetAccountInfoResponse(e,g,m)}else p=ls._fromJSON(e,m);d!==i&&(l=p),i=d;break}}catch{}const c=a.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ao(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ao(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gA(e))return"Blackberry";if(xA(e))return"Webos";if(mA(e))return"Safari";if((e.includes("chrome/")||hA(e))&&!e.includes("edge/"))return"Chrome";if(pA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function uA(t=sn()){return/firefox\//i.test(t)}function mA(t=sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hA(t=sn()){return/crios\//i.test(t)}function fA(t=sn()){return/iemobile/i.test(t)}function pA(t=sn()){return/android/i.test(t)}function gA(t=sn()){return/blackberry/i.test(t)}function xA(t=sn()){return/webos/i.test(t)}function Sx(t=sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function K5(t=sn()){var e;return Sx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Q5(){return c4()&&document.documentMode===10}function vA(t=sn()){return Sx(t)||pA(t)||xA(t)||gA(t)||/windows phone/i.test(t)||fA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t,e=[]){let n;switch(t){case"Browser":n=y_(sn());break;case"Worker":n=`${y_(sn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e={}){return Si(t,"GET","/v2/passwordPolicy",Ti(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=6;class e3{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Z5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b_(this),this.idTokenSubscription=new b_(this),this.beforeStateQueue=new X5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ta(n)),this._initializationPromise=this.queue(async()=>{var s,a,i;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vm(this,{idToken:e}),s=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ym(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(ra(this));const n=e?vt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),n=new e3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sd("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await J5(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ta(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[ta(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,a);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&I5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wi(t){return vt(t)}class b_{constructor(e){this.auth=e,this.observer=null,this.addObserver=x4(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n3(t){hh=t}function bA(t){return hh.loadJS(t)}function s3(){return hh.recaptchaEnterpriseScript}function a3(){return hh.gapiScript}function i3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class r3{constructor(){this.enterprise=new o3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class o3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const l3="recaptcha-enterprise",_A="NO_RECAPTCHA";class c3{constructor(e){this.type=l3,this.auth=wi(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{z5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new O5(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function a(i,o,l){const c=window.grecaptcha;p_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(_A)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r3().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&p_(window.grecaptcha))a(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=s3();c.length!==0&&(c+=l),bA(c).then(()=>{a(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function __(t,e,n,s=!1,a=!1){const i=new c3(t);let o;if(a)o=_A;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function wg(t,e,n,s,a){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await __(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await __(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t,e){const n=_x(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),i=n.getOptions();if(pa(i,e??{}))return a;Zn(a,"already-initialized")}return n.initialize({options:e})}function u3(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ta);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function m3(t,e,n){const s=wi(t);oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,i=EA(e),{host:o,port:l}=h3(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},m=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),oe(pa(d,s.config.emulator)&&pa(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,Yo(o)?(Qw(`${i}//${o}${c}`),Xw("Auth",!0)):f3()}function EA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h3(t){const e=EA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const i=a[1];return{host:i,port:E_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:E_(o)}}}function E_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,n){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function p3(t,e){return Si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){return rd(t,"POST","/v1/accounts:signInWithPassword",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(t,e){return rd(t,"POST","/v1/accounts:signInWithEmailLink",Ti(t,e))}async function v3(t,e){return rd(t,"POST","/v1/accounts:signInWithEmailLink",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends wx{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Pc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Pc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wg(e,n,"signInWithPassword",g3);case"emailLink":return x3(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wg(e,s,"signUpPassword",p3);case"emailLink":return v3(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return rd(t,"POST","/v1/accounts:signInWithIdp",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="http://localhost";class ir extends wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...i}=n;if(!s||!a)return null;const o=new ir(s,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,io(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:y3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ad(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _3(t){const e=Gl(Bl(t)).link,n=e?Gl(Bl(e)).deep_link_id:null,s=Gl(Bl(t)).deep_link_id;return(s?Gl(Bl(s)).link:null)||s||n||e||t}class Ax{constructor(e){const n=Gl(Bl(e)),s=n.apiKey??null,a=n.oobCode??null,i=b3(n.mode??null);oe(s&&a&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_3(e);try{return new Ax(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,n){return Pc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ax.parseLink(n);return oe(s,"argument-error"),Pc._fromEmailAndCode(e,s.code,s.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Ix{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends od{constructor(){super("facebook.com")}static credential(e){return ir._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ga.credential(e.oauthAccessToken)}catch{return null}}}Ga.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ga.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ir._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Qs.credential(n,s)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends od{constructor(){super("github.com")}static credential(e){return ir._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.GITHUB_SIGN_IN_METHOD="github.com";Ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends od{constructor(){super("twitter.com")}static credential(e,n){return ir._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return qa.credential(n,s)}catch{return null}}}qa.TWITTER_SIGN_IN_METHOD="twitter.com";qa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(t,e){return rd(t,"POST","/v1/accounts:signUp",Ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const i=await ls._fromIdTokenResponse(e,s,a),o=N_(s);return new rr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=N_(s);return new rr({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function N_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Na{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,bm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new bm(e,n,s,a)}}function NA(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bm._fromErrorAndOperation(t,i,e,s):i})}async function N3(t,e,n=!1){const s=await Mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rr._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(t,e,n=!1){const{auth:s}=t;if(Sn(s.app))return Promise.reject(ra(s));const a="reauthenticate";try{const i=await Mc(t,NA(s,a,e,t),n);oe(i.idToken,s,"internal-error");const o=Tx(i.idToken);oe(o,s,"internal-error");const{sub:l}=o;return oe(t.uid===l,s,"user-mismatch"),rr._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e,n=!1){if(Sn(t.app))return Promise.reject(ra(t));const s="signIn",a=await NA(t,s,e),i=await rr._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(i.user),i}async function T3(t,e){return CA(wi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t){const e=wi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S3(t,e,n){if(Sn(t.app))return Promise.reject(ra(t));const s=wi(t),o=await wg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E3).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&TA(t),c}),l=await rr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function w3(t,e,n){return Sn(t.app)?Promise.reject(ra(t)):T3(vt(t),Ko.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&TA(t),s})}function A3(t,e,n,s){return vt(t).onIdTokenChanged(e,n,s)}function I3(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function R3(t,e,n,s){return vt(t).onAuthStateChanged(e,n,s)}function j3(t){return vt(t).signOut()}const _m="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_m,"1"),this.storage.removeItem(_m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=1e3,P3=10;class wA extends SA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);Q5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,P3):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},M3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wA.type="LOCAL";const D3=wA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA extends SA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AA.type="SESSION";const IA=AA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new fh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:i}=n.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await k3(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Rx("",20);a.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:a,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function V3(t){js().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function U3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function z3(){return RA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebaseLocalStorageDb",F3=1,Em="firebaseLocalStorage",MA="fbase_key";class ld{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ph(t,e){return t.transaction([Em],e?"readwrite":"readonly").objectStore(Em)}function G3(){const t=indexedDB.deleteDatabase(jA);return new ld(t).toPromise()}function Ag(){const t=indexedDB.open(jA,F3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Em,{keyPath:MA})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Em)?e(s):(s.close(),await G3(),e(await Ag()))})})}async function C_(t,e,n){const s=ph(t,!0).put({[MA]:e,value:n});return new ld(s).toPromise()}async function B3(t,e){const n=ph(t,!1).get(e),s=await new ld(n).toPromise();return s===void 0?null:s.value}function T_(t,e){const n=ph(t,!0).delete(e);return new ld(n).toPromise()}const q3=800,H3=3;class PA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>H3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fh._getInstance(z3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await U3(),!this.activeServiceWorker)return;this.sender=new L3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ag();return await C_(e,_m,"1"),await T_(e,_m),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>C_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>B3(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=ph(a,!1).getAll();return new ld(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PA.type="LOCAL";const $3=PA;new id(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e){return e?ta(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx extends wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y3(t){return CA(t.auth,new jx(t),t.bypassAuthState)}function J3(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),C3(n,new jx(t),t.bypassAuthState)}async function K3(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),N3(n,new jx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,s,a,i=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y3;case"linkViaPopup":case"linkViaRedirect":return K3;case"reauthViaPopup":case"reauthViaRedirect":return J3;default:Zn(this.auth,"internal-error")}}resolve(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new id(2e3,1e4);async function X3(t,e,n){if(Sn(t.app))return Promise.reject(cs(t,"operation-not-supported-in-this-environment"));const s=wi(t);R5(t,e,Ix);const a=DA(s,n);return new Hi(s,"signInViaPopup",e,a).executeNotNull()}class Hi extends kA{constructor(e,n,s,a,i){super(e,n,a,i),this.provider=s,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){xa(this.filter.length===1,"Popup operations only handle one event");const e=Rx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q3.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="pendingRedirect",Iu=new Map;class Z3 extends kA{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Iu.get(this.auth._key());if(!e){try{const s=await e6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Iu.set(this.auth._key(),e)}return this.bypassAuthState||Iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function e6(t,e){const n=s6(e),s=n6(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function t6(t,e){Iu.set(t._key(),e)}function n6(t){return ta(t._redirectPersistence)}function s6(t){return Au(W3,t.config.apiKey,t.name)}async function a6(t,e,n=!1){if(Sn(t.app))return Promise.reject(ra(t));const s=wi(t),a=DA(s,e),o=await new Z3(s,a,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=10*60*1e3;class r6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!LA(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i6&&this.cachedEventUids.clear(),this.cachedEventUids.has(S_(e))}saveEventToCache(e){this.cachedEventUids.add(S_(e)),this.lastProcessedEventTime=Date.now()}}function S_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e={}){return Si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d6=/^https?/;async function u6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await l6(t);for(const n of e)try{if(m6(n))return}catch{}Zn(t,"unauthorized-domain")}function m6(t){const e=Tg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!d6.test(n))return!1;if(c6.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new id(3e4,6e4);function w_(){const t=js().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f6(t){return new Promise((e,n)=>{var a,i,o;function s(){w_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w_(),n(cs(t,"network-request-failed"))},timeout:h6.get()})}if((i=(a=js().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=js().gapi)!=null&&o.load)s();else{const l=i3("iframefcb");return js()[l]=()=>{gapi.load?s():n(cs(t,"network-request-failed"))},bA(`${a3()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function p6(t){return Ru=Ru||f6(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=new id(5e3,15e3),x6="__/auth/iframe",v6="emulator/auth/iframe",y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _6(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cx(e,v6):`https://${t.config.authDomain}/${x6}`,s={apiKey:e.apiKey,appName:t.name,v:Jo},a=b6.get(t.config.apiHost);a&&(s.eid=a);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ad(s).slice(1)}`}async function E6(t){const e=await p6(t),n=js().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:_6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y6,dontclear:!0},s=>new Promise(async(a,i)=>{await s.restyle({setHideOnLeave:!1});const o=cs(t,"network-request-failed"),l=js().setTimeout(()=>{i(o)},g6.get());function c(){js().clearTimeout(l),a(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C6=500,T6=600,S6="_blank",w6="http://localhost";class A_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A6(t,e,n,s=C6,a=T6){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...N6,width:s.toString(),height:a.toString(),top:i,left:o},d=sn().toLowerCase();n&&(l=hA(d)?S6:n),uA(d)&&(e=e||w6,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[x,y])=>`${g}${x}=${y},`,"");if(K5(d)&&l!=="_self")return I6(e||"",l),new A_(null);const p=window.open(e||"",l,m);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new A_(p)}function I6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="__/auth/handler",j6="emulator/auth/handler",M6=encodeURIComponent("fac");async function I_(t,e,n,s,a,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Jo,eventId:a};if(e instanceof Ix){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",g4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof od){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),d=c?`#${M6}=${encodeURIComponent(c)}`:"";return`${P6(t)}?${ad(l).slice(1)}${d}`}function P6({config:t}){return t.emulator?Cx(t,j6):`https://${t.authDomain}/${R6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="webStorageSupport";class D6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IA,this._completeRedirectFn=a6,this._overrideRedirectResult=t6}async _openPopup(e,n,s,a){var o;xa((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await I_(e,n,s,Tg(),a);return A6(e,i,Rx())}async _openRedirect(e,n,s,a){await this._originValidation(e);const i=await I_(e,n,s,Tg(),a);return V3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:i}=this.eventManagers[n];return a?Promise.resolve(a):(xa(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await E6(e),s=new r6(e);return n.register("authEvent",a=>(oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dp,{type:dp},a=>{var o;const i=(o=a==null?void 0:a[0])==null?void 0:o[dp];i!==void 0&&n(!!i),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vA()||mA()||Sx()}}const k6=D6;var R_="@firebase/auth",j_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U6(t){Co(new ar("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yA(t)},d=new t3(s,a,i,c);return u3(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Co(new ar("auth-internal",e=>{const n=wi(e.getProvider("auth").getImmediate());return(s=>new L6(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(R_,j_,V6(t)),li(R_,j_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=5*60,z6=Kw("authIdTokenMaxAge")||O6;let M_=null;const F6=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>z6)return;const a=n==null?void 0:n.token;M_!==a&&(M_=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function G6(t=tA()){const e=_x(t,"auth");if(e.isInitialized())return e.getImmediate();const n=d3(t,{popupRedirectResolver:k6,persistence:[$3,D3,IA]}),s=Kw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=F6(i.toString());I3(n,o,()=>o(n.currentUser)),A3(n,l=>o(l))}}const a=Yw("auth");return a&&m3(n,`http://${a}`),n}function B6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}n3({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const i=cs("internal-error");i.customData=a,n(i)},s.type="text/javascript",s.charset="UTF-8",B6().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U6("Browser");var P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ci,VA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,_){function I(){}I.prototype=_.prototype,R.F=_.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(C,E,M){for(var j=Array(arguments.length-2),G=2;G<arguments.length;G++)j[G-2]=arguments[G];return _.prototype[E].apply(C,j)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,_,I){I||(I=0);const C=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)C[E]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(E=0;E<16;++E)C[E]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=R.g[0],I=R.g[1],E=R.g[2];let M=R.g[3],j;j=_+(M^I&(E^M))+C[0]+3614090360&4294967295,_=I+(j<<7&4294967295|j>>>25),j=M+(E^_&(I^E))+C[1]+3905402710&4294967295,M=_+(j<<12&4294967295|j>>>20),j=E+(I^M&(_^I))+C[2]+606105819&4294967295,E=M+(j<<17&4294967295|j>>>15),j=I+(_^E&(M^_))+C[3]+3250441966&4294967295,I=E+(j<<22&4294967295|j>>>10),j=_+(M^I&(E^M))+C[4]+4118548399&4294967295,_=I+(j<<7&4294967295|j>>>25),j=M+(E^_&(I^E))+C[5]+1200080426&4294967295,M=_+(j<<12&4294967295|j>>>20),j=E+(I^M&(_^I))+C[6]+2821735955&4294967295,E=M+(j<<17&4294967295|j>>>15),j=I+(_^E&(M^_))+C[7]+4249261313&4294967295,I=E+(j<<22&4294967295|j>>>10),j=_+(M^I&(E^M))+C[8]+1770035416&4294967295,_=I+(j<<7&4294967295|j>>>25),j=M+(E^_&(I^E))+C[9]+2336552879&4294967295,M=_+(j<<12&4294967295|j>>>20),j=E+(I^M&(_^I))+C[10]+4294925233&4294967295,E=M+(j<<17&4294967295|j>>>15),j=I+(_^E&(M^_))+C[11]+2304563134&4294967295,I=E+(j<<22&4294967295|j>>>10),j=_+(M^I&(E^M))+C[12]+1804603682&4294967295,_=I+(j<<7&4294967295|j>>>25),j=M+(E^_&(I^E))+C[13]+4254626195&4294967295,M=_+(j<<12&4294967295|j>>>20),j=E+(I^M&(_^I))+C[14]+2792965006&4294967295,E=M+(j<<17&4294967295|j>>>15),j=I+(_^E&(M^_))+C[15]+1236535329&4294967295,I=E+(j<<22&4294967295|j>>>10),j=_+(E^M&(I^E))+C[1]+4129170786&4294967295,_=I+(j<<5&4294967295|j>>>27),j=M+(I^E&(_^I))+C[6]+3225465664&4294967295,M=_+(j<<9&4294967295|j>>>23),j=E+(_^I&(M^_))+C[11]+643717713&4294967295,E=M+(j<<14&4294967295|j>>>18),j=I+(M^_&(E^M))+C[0]+3921069994&4294967295,I=E+(j<<20&4294967295|j>>>12),j=_+(E^M&(I^E))+C[5]+3593408605&4294967295,_=I+(j<<5&4294967295|j>>>27),j=M+(I^E&(_^I))+C[10]+38016083&4294967295,M=_+(j<<9&4294967295|j>>>23),j=E+(_^I&(M^_))+C[15]+3634488961&4294967295,E=M+(j<<14&4294967295|j>>>18),j=I+(M^_&(E^M))+C[4]+3889429448&4294967295,I=E+(j<<20&4294967295|j>>>12),j=_+(E^M&(I^E))+C[9]+568446438&4294967295,_=I+(j<<5&4294967295|j>>>27),j=M+(I^E&(_^I))+C[14]+3275163606&4294967295,M=_+(j<<9&4294967295|j>>>23),j=E+(_^I&(M^_))+C[3]+4107603335&4294967295,E=M+(j<<14&4294967295|j>>>18),j=I+(M^_&(E^M))+C[8]+1163531501&4294967295,I=E+(j<<20&4294967295|j>>>12),j=_+(E^M&(I^E))+C[13]+2850285829&4294967295,_=I+(j<<5&4294967295|j>>>27),j=M+(I^E&(_^I))+C[2]+4243563512&4294967295,M=_+(j<<9&4294967295|j>>>23),j=E+(_^I&(M^_))+C[7]+1735328473&4294967295,E=M+(j<<14&4294967295|j>>>18),j=I+(M^_&(E^M))+C[12]+2368359562&4294967295,I=E+(j<<20&4294967295|j>>>12),j=_+(I^E^M)+C[5]+4294588738&4294967295,_=I+(j<<4&4294967295|j>>>28),j=M+(_^I^E)+C[8]+2272392833&4294967295,M=_+(j<<11&4294967295|j>>>21),j=E+(M^_^I)+C[11]+1839030562&4294967295,E=M+(j<<16&4294967295|j>>>16),j=I+(E^M^_)+C[14]+4259657740&4294967295,I=E+(j<<23&4294967295|j>>>9),j=_+(I^E^M)+C[1]+2763975236&4294967295,_=I+(j<<4&4294967295|j>>>28),j=M+(_^I^E)+C[4]+1272893353&4294967295,M=_+(j<<11&4294967295|j>>>21),j=E+(M^_^I)+C[7]+4139469664&4294967295,E=M+(j<<16&4294967295|j>>>16),j=I+(E^M^_)+C[10]+3200236656&4294967295,I=E+(j<<23&4294967295|j>>>9),j=_+(I^E^M)+C[13]+681279174&4294967295,_=I+(j<<4&4294967295|j>>>28),j=M+(_^I^E)+C[0]+3936430074&4294967295,M=_+(j<<11&4294967295|j>>>21),j=E+(M^_^I)+C[3]+3572445317&4294967295,E=M+(j<<16&4294967295|j>>>16),j=I+(E^M^_)+C[6]+76029189&4294967295,I=E+(j<<23&4294967295|j>>>9),j=_+(I^E^M)+C[9]+3654602809&4294967295,_=I+(j<<4&4294967295|j>>>28),j=M+(_^I^E)+C[12]+3873151461&4294967295,M=_+(j<<11&4294967295|j>>>21),j=E+(M^_^I)+C[15]+530742520&4294967295,E=M+(j<<16&4294967295|j>>>16),j=I+(E^M^_)+C[2]+3299628645&4294967295,I=E+(j<<23&4294967295|j>>>9),j=_+(E^(I|~M))+C[0]+4096336452&4294967295,_=I+(j<<6&4294967295|j>>>26),j=M+(I^(_|~E))+C[7]+1126891415&4294967295,M=_+(j<<10&4294967295|j>>>22),j=E+(_^(M|~I))+C[14]+2878612391&4294967295,E=M+(j<<15&4294967295|j>>>17),j=I+(M^(E|~_))+C[5]+4237533241&4294967295,I=E+(j<<21&4294967295|j>>>11),j=_+(E^(I|~M))+C[12]+1700485571&4294967295,_=I+(j<<6&4294967295|j>>>26),j=M+(I^(_|~E))+C[3]+2399980690&4294967295,M=_+(j<<10&4294967295|j>>>22),j=E+(_^(M|~I))+C[10]+4293915773&4294967295,E=M+(j<<15&4294967295|j>>>17),j=I+(M^(E|~_))+C[1]+2240044497&4294967295,I=E+(j<<21&4294967295|j>>>11),j=_+(E^(I|~M))+C[8]+1873313359&4294967295,_=I+(j<<6&4294967295|j>>>26),j=M+(I^(_|~E))+C[15]+4264355552&4294967295,M=_+(j<<10&4294967295|j>>>22),j=E+(_^(M|~I))+C[6]+2734768916&4294967295,E=M+(j<<15&4294967295|j>>>17),j=I+(M^(E|~_))+C[13]+1309151649&4294967295,I=E+(j<<21&4294967295|j>>>11),j=_+(E^(I|~M))+C[4]+4149444226&4294967295,_=I+(j<<6&4294967295|j>>>26),j=M+(I^(_|~E))+C[11]+3174756917&4294967295,M=_+(j<<10&4294967295|j>>>22),j=E+(_^(M|~I))+C[2]+718787259&4294967295,E=M+(j<<15&4294967295|j>>>17),j=I+(M^(E|~_))+C[9]+3951481745&4294967295,R.g[0]=R.g[0]+_&4294967295,R.g[1]=R.g[1]+(E+(j<<21&4294967295|j>>>11))&4294967295,R.g[2]=R.g[2]+E&4294967295,R.g[3]=R.g[3]+M&4294967295}s.prototype.v=function(R,_){_===void 0&&(_=R.length);const I=_-this.blockSize,C=this.C;let E=this.h,M=0;for(;M<_;){if(E==0)for(;M<=I;)a(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<_;)if(C[E++]=R.charCodeAt(M++),E==this.blockSize){a(this,C),E=0;break}}else for(;M<_;)if(C[E++]=R[M++],E==this.blockSize){a(this,C),E=0;break}}this.h=E,this.o+=_},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var _=1;_<R.length-8;++_)R[_]=0;_=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=_&255,_/=256;for(this.v(R),R=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)R[_++]=this.g[I]>>>C&255;return R};function i(R,_){var I=l;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=_(R)}function o(R,_){this.h=_;const I=[];let C=!0;for(let E=R.length-1;E>=0;E--){const M=R[E]|0;C&&M==_||(I[E]=M,C=!1)}this.g=I}var l={};function c(R){return-128<=R&&R<128?i(R,function(_){return new o([_|0],_<0?-1:0)}):new o([R|0],R<0?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return A(d(-R));const _=[];let I=1;for(let C=0;R>=I;C++)_[C]=R/I|0,I*=4294967296;return new o(_,0)}function m(R,_){if(R.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(R.charAt(0)=="-")return A(m(R.substring(1),_));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(_,8));let C=p;for(let M=0;M<R.length;M+=8){var E=Math.min(8,R.length-M);const j=parseInt(R.substring(M,M+E),_);E<8?(E=d(Math.pow(_,E)),C=C.j(E).add(d(j))):(C=C.j(I),C=C.add(d(j)))}return C}var p=c(0),g=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-A(this).m();let R=0,_=1;for(let I=0;I<this.g.length;I++){const C=this.i(I);R+=(C>=0?C:4294967296+C)*_,_*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(y(this))return"0";if(T(this))return"-"+A(this).toString(R);const _=d(Math.pow(R,6));var I=this;let C="";for(;;){const E=D(I,_).g;I=b(I,E.j(_));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=E,y(I))return M+C;for(;M.length<6;)M="0"+M;C=M+C}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function y(R){if(R.h!=0)return!1;for(let _=0;_<R.g.length;_++)if(R.g[_]!=0)return!1;return!0}function T(R){return R.h==-1}t.l=function(R){return R=b(this,R),T(R)?-1:y(R)?0:1};function A(R){const _=R.g.length,I=[];for(let C=0;C<_;C++)I[C]=~R.g[C];return new o(I,~R.h).add(g)}t.abs=function(){return T(this)?A(this):this},t.add=function(R){const _=Math.max(this.g.length,R.g.length),I=[];let C=0;for(let E=0;E<=_;E++){let M=C+(this.i(E)&65535)+(R.i(E)&65535),j=(M>>>16)+(this.i(E)>>>16)+(R.i(E)>>>16);C=j>>>16,M&=65535,j&=65535,I[E]=j<<16|M}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(R,_){return R.add(A(_))}t.j=function(R){if(y(this)||y(R))return p;if(T(this))return T(R)?A(this).j(A(R)):A(A(this).j(R));if(T(R))return A(this.j(A(R)));if(this.l(x)<0&&R.l(x)<0)return d(this.m()*R.m());const _=this.g.length+R.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let E=0;E<R.g.length;E++){const M=this.i(C)>>>16,j=this.i(C)&65535,G=R.i(E)>>>16,O=R.i(E)&65535;I[2*C+2*E]+=j*O,N(I,2*C+2*E),I[2*C+2*E+1]+=M*O,N(I,2*C+2*E+1),I[2*C+2*E+1]+=j*G,N(I,2*C+2*E+1),I[2*C+2*E+2]+=M*G,N(I,2*C+2*E+2)}for(R=0;R<_;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=_;R<2*_;R++)I[R]=0;return new o(I,0)};function N(R,_){for(;(R[_]&65535)!=R[_];)R[_+1]+=R[_]>>>16,R[_]&=65535,_++}function S(R,_){this.g=R,this.h=_}function D(R,_){if(y(_))throw Error("division by zero");if(y(R))return new S(p,p);if(T(R))return _=D(A(R),_),new S(A(_.g),A(_.h));if(T(_))return _=D(R,A(_)),new S(A(_.g),_.h);if(R.g.length>30){if(T(R)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=_;C.l(R)<=0;)I=V(I),C=V(C);var E=k(I,1),M=k(C,1);for(C=k(C,2),I=k(I,2);!y(C);){var j=M.add(C);j.l(R)<=0&&(E=E.add(I),M=j),C=k(C,1),I=k(I,1)}return _=b(R,E.j(_)),new S(E,_)}for(E=p;R.l(_)>=0;){for(I=Math.max(1,Math.floor(R.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),M=d(I),j=M.j(_);T(j)||j.l(R)>0;)I-=C,M=d(I),j=M.j(_);y(M)&&(M=g),E=E.add(M),R=b(R,j)}return new S(E,R)}t.B=function(R){return D(this,R).h},t.and=function(R){const _=Math.max(this.g.length,R.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&R.i(C);return new o(I,this.h&R.h)},t.or=function(R){const _=Math.max(this.g.length,R.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|R.i(C);return new o(I,this.h|R.h)},t.xor=function(R){const _=Math.max(this.g.length,R.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^R.i(C);return new o(I,this.h^R.h)};function V(R){const _=R.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=R.i(C)<<1|R.i(C-1)>>>31;return new o(I,R.h)}function k(R,_){const I=_>>5;_%=32;const C=R.g.length-I,E=[];for(let M=0;M<C;M++)E[M]=_>0?R.i(M+I)>>>_|R.i(M+I+1)<<32-_:R.i(M+I);return new o(E,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,VA=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,ci=o}).apply(typeof P_<"u"?P_:typeof self<"u"?self:typeof window<"u"?window:{});var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UA,ql,OA,ju,Ig,zA,FA,GA;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kd=="object"&&Kd];for(var v=0;v<f.length;++v){var w=f[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function a(f,v){if(v)e:{var w=s;f=f.split(".");for(var L=0;L<f.length-1;L++){var U=f[L];if(!(U in w))break e;w=w[U]}f=f[f.length-1],L=w[f],v=v(L),v!=L&&v!=null&&e(w,f,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(v){var w=[],L;for(L in v)Object.prototype.hasOwnProperty.call(v,L)&&w.push([L,v[L]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function c(f,v,w){return f.call.apply(f.bind,arguments)}function d(f,v,w){return d=c,d.apply(null,arguments)}function m(f,v){var w=Array.prototype.slice.call(arguments,1);return function(){var L=w.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function p(f,v){function w(){}w.prototype=v.prototype,f.Z=v.prototype,f.prototype=new w,f.prototype.constructor=f,f.Ob=function(L,U,z){for(var K=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)K[ve-2]=arguments[ve];return v.prototype[U].apply(L,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function x(f){const v=f.length;if(v>0){const w=Array(v);for(let L=0;L<v;L++)w[L]=f[L];return w}return[]}function y(f,v){for(let L=1;L<arguments.length;L++){const U=arguments[L];var w=typeof U;if(w=w!="object"?w:U?Array.isArray(U)?"array":w:"null",w=="array"||w=="object"&&typeof U.length=="number"){w=f.length||0;const z=U.length||0;f.length=w+z;for(let K=0;K<z;K++)f[w+K]=U[K]}else f.push(U)}}class T{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function A(f){o.setTimeout(()=>{throw f},0)}function b(){var f=R;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class N{constructor(){this.h=this.g=null}add(v,w){const L=S.get();L.set(v,w),this.h?this.h.next=L:this.g=L,this.h=L}}var S=new T(()=>new D,f=>f.reset());class D{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let V,k=!1,R=new N,_=()=>{const f=Promise.resolve(void 0);V=()=>{f.then(I)}};function I(){for(var f;f=b();){try{f.h.call(f.g)}catch(w){A(w)}var v=S;v.j(f),v.h<100&&(v.h++,f.next=v.g,v.g=f)}k=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};o.addEventListener("test",w,v),o.removeEventListener("test",w,v)}catch{}return f}();function j(f){return/^[\s\xa0]*$/.test(f)}function G(f,v){E.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,v)}p(G,E),G.prototype.init=function(f,v){const w=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget,v||(w=="mouseover"?v=f.fromElement:w=="mouseout"&&(v=f.toElement)),this.relatedTarget=v,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var O="closure_listenable_"+(Math.random()*1e6|0),B=0;function te(f,v,w,L,U){this.listener=f,this.proxy=null,this.src=v,this.type=w,this.capture=!!L,this.ha=U,this.key=++B,this.da=this.fa=!1}function Y(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ne(f,v,w){for(const L in f)v.call(w,f[L],L,f)}function de(f,v){for(const w in f)v.call(void 0,f[w],w,f)}function we(f){const v={};for(const w in f)v[w]=f[w];return v}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(f,v){let w,L;for(let U=1;U<arguments.length;U++){L=arguments[U];for(w in L)f[w]=L[w];for(let z=0;z<tt.length;z++)w=tt[z],Object.prototype.hasOwnProperty.call(L,w)&&(f[w]=L[w])}}function ie(f){this.src=f,this.g={},this.h=0}ie.prototype.add=function(f,v,w,L,U){const z=f.toString();f=this.g[z],f||(f=this.g[z]=[],this.h++);const K=Bt(f,v,L,U);return K>-1?(v=f[K],w||(v.fa=!1)):(v=new te(v,this.src,z,!!L,U),v.fa=w,f.push(v)),v};function xe(f,v){const w=v.type;if(w in f.g){var L=f.g[w],U=Array.prototype.indexOf.call(L,v,void 0),z;(z=U>=0)&&Array.prototype.splice.call(L,U,1),z&&(Y(v),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Bt(f,v,w,L){for(let U=0;U<f.length;++U){const z=f[U];if(!z.da&&z.listener==v&&z.capture==!!w&&z.ha==L)return U}return-1}var ht="closure_lm_"+(Math.random()*1e6|0),Pt={};function qt(f,v,w,L,U){if(Array.isArray(v)){for(let z=0;z<v.length;z++)qt(f,v[z],w,L,U);return null}return w=Dt(w),f&&f[O]?f.J(v,w,l(L)?!!L.capture:!1,U):yt(f,v,w,!1,L,U)}function yt(f,v,w,L,U,z){if(!v)throw Error("Invalid event type");const K=l(U)?!!U.capture:!!U;let ve=Q(f);if(ve||(f[ht]=ve=new ie(f)),w=ve.add(v,w,L,K,z),w.proxy)return w;if(L=Xt(),w.proxy=L,L.src=f,L.listener=w,f.addEventListener)M||(U=K),U===void 0&&(U=!1),f.addEventListener(v.toString(),L,U);else if(f.attachEvent)f.attachEvent(nt(v.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Xt(){function f(w){return v.call(f.src,f.listener,w)}const v=Ae;return f}function ye(f,v,w,L,U){if(Array.isArray(v))for(var z=0;z<v.length;z++)ye(f,v[z],w,L,U);else L=l(L)?!!L.capture:!!L,w=Dt(w),f&&f[O]?(f=f.i,z=String(v).toString(),z in f.g&&(v=f.g[z],w=Bt(v,w,L,U),w>-1&&(Y(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete f.g[z],f.h--)))):f&&(f=Q(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Bt(v,w,L,U)),(w=f>-1?v[f]:null)&&ae(w))}function ae(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[O])xe(v.i,f);else{var w=f.type,L=f.proxy;v.removeEventListener?v.removeEventListener(w,L,f.capture):v.detachEvent?v.detachEvent(nt(w),L):v.addListener&&v.removeListener&&v.removeListener(L),(w=Q(v))?(xe(w,f),w.h==0&&(w.src=null,v[ht]=null)):Y(f)}}}function nt(f){return f in Pt?Pt[f]:Pt[f]="on"+f}function Ae(f,v){if(f.da)f=!0;else{v=new G(v,this);const w=f.listener,L=f.ha||f.src;f.fa&&ae(f),f=w.call(L,v)}return f}function Q(f){return f=f[ht],f instanceof ie?f:null}var Ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dt(f){return typeof f=="function"?f:(f[Ie]||(f[Ie]=function(v){return f.handleEvent(v)}),f[Ie])}function Me(){C.call(this),this.i=new ie(this),this.M=this,this.G=null}p(Me,C),Me.prototype[O]=!0,Me.prototype.removeEventListener=function(f,v,w,L){ye(this,f,v,w,L)};function ze(f,v){var w,L=f.G;if(L)for(w=[];L;L=L.G)w.push(L);if(f=f.M,L=v.type||v,typeof v=="string")v=new E(v,f);else if(v instanceof E)v.target=v.target||f;else{var U=v;v=new E(L,f),rt(v,U)}U=!0;let z,K;if(w)for(K=w.length-1;K>=0;K--)z=v.g=w[K],U=Gs(z,L,!0,v)&&U;if(z=v.g=f,U=Gs(z,L,!0,v)&&U,U=Gs(z,L,!1,v)&&U,w)for(K=0;K<w.length;K++)z=v.g=w[K],U=Gs(z,L,!1,v)&&U}Me.prototype.N=function(){if(Me.Z.N.call(this),this.i){var f=this.i;for(const v in f.g){const w=f.g[v];for(let L=0;L<w.length;L++)Y(w[L]);delete f.g[v],f.h--}}this.G=null},Me.prototype.J=function(f,v,w,L){return this.i.add(String(f),v,!1,w,L)},Me.prototype.K=function(f,v,w,L){return this.i.add(String(f),v,!0,w,L)};function Gs(f,v,w,L){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();let U=!0;for(let z=0;z<v.length;++z){const K=v[z];if(K&&!K.da&&K.capture==w){const ve=K.listener,It=K.ha||K.src;K.fa&&xe(f.i,K),U=ve.call(It,L)!==!1&&U}}return U&&!L.defaultPrevented}function vd(f,v){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:o.setTimeout(f,v||0)}function bt(f){f.g=vd(()=>{f.g=null,f.i&&(f.i=!1,bt(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class dl extends C{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ul(f){C.call(this),this.h=f,this.g={}}p(ul,C);var Iv=[];function Rv(f){ne(f.g,function(v,w){this.g.hasOwnProperty(w)&&ae(v)},f),f.g={}}ul.prototype.N=function(){ul.Z.N.call(this),Rv(this)},ul.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ef=o.JSON.stringify,F1=o.JSON.parse,G1=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function jv(){}function Mv(){}var ml={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tf(){E.call(this,"d")}p(tf,E);function nf(){E.call(this,"c")}p(nf,E);var Mi={},Pv=null;function yd(){return Pv=Pv||new Me}Mi.Ia="serverreachability";function Dv(f){E.call(this,Mi.Ia,f)}p(Dv,E);function hl(f){const v=yd();ze(v,new Dv(v))}Mi.STAT_EVENT="statevent";function kv(f,v){E.call(this,Mi.STAT_EVENT,f),this.stat=v}p(kv,E);function an(f){const v=yd();ze(v,new kv(v,f))}Mi.Ja="timingevent";function Lv(f,v){E.call(this,Mi.Ja,f),this.size=v}p(Lv,E);function fl(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},v)}function pl(){this.g=!0}pl.prototype.ua=function(){this.g=!1};function B1(f,v,w,L,U,z){f.info(function(){if(f.g)if(z){var K="",ve=z.split("&");for(let Be=0;Be<ve.length;Be++){var It=ve[Be].split("=");if(It.length>1){const kt=It[0];It=It[1];const Ns=kt.split("_");K=Ns.length>=2&&Ns[1]=="type"?K+(kt+"="+It+"&"):K+(kt+"=redacted&")}}}else K=null;else K=z;return"XMLHTTP REQ ("+L+") [attempt "+U+"]: "+v+`
`+w+`
`+K})}function q1(f,v,w,L,U,z,K){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+U+"]: "+v+`
`+w+`
`+z+" "+K})}function br(f,v,w,L){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+$1(f,w)+(L?" "+L:"")})}function H1(f,v){f.info(function(){return"TIMEOUT: "+v})}pl.prototype.info=function(){};function $1(f,v){if(!f.g)return v;if(!v)return null;try{const z=JSON.parse(v);if(z){for(f=0;f<z.length;f++)if(Array.isArray(z[f])){var w=z[f];if(!(w.length<2)){var L=w[1];if(Array.isArray(L)&&!(L.length<1)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(let K=1;K<L.length;K++)L[K]=""}}}}return ef(z)}catch{return v}}var bd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uv;function sf(){}p(sf,jv),sf.prototype.g=function(){return new XMLHttpRequest},Uv=new sf;function gl(f){return encodeURIComponent(String(f))}function Y1(f){var v=1;f=f.split(":");const w=[];for(;v>0&&f.length;)w.push(f.shift()),v--;return f.length&&w.push(f.join(":")),w}function Sa(f,v,w,L){this.j=f,this.i=v,this.l=w,this.S=L||1,this.V=new ul(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ov}function Ov(){this.i=null,this.g="",this.h=!1}var zv={},af={};function rf(f,v,w){f.M=1,f.A=Ed(Es(v)),f.u=w,f.R=!0,Fv(f,null)}function Fv(f,v){f.F=Date.now(),_d(f),f.B=Es(f.A);var w=f.B,L=f.S;Array.isArray(L)||(L=[String(L)]),ey(w.i,"t",L),f.C=0,w=f.j.L,f.h=new Ov,f.g=vy(f.j,w?v:null,!f.u),f.P>0&&(f.O=new dl(d(f.Y,f,f.g),f.P)),v=f.V,w=f.g,L=f.ba;var U="readystatechange";Array.isArray(U)||(U&&(Iv[0]=U.toString()),U=Iv);for(let z=0;z<U.length;z++){const K=qt(w,U[z],L||v.handleEvent,!1,v.h||v);if(!K)break;v.g[K.key]=K}v=f.J?we(f.J):{},f.u?(f.v||(f.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,v)):(f.v="GET",f.g.ea(f.B,f.v,null,v)),hl(),B1(f.i,f.v,f.B,f.l,f.S,f.u)}Sa.prototype.ba=function(f){f=f.target;const v=this.O;v&&Ia(f)==3?v.j():this.Y(f)},Sa.prototype.Y=function(f){try{if(f==this.g)e:{const ve=Ia(this.g),It=this.g.ya(),Be=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||oy(this.g)))){this.K||ve!=4||It==7||(It==8||Be<=0?hl(3):hl(2)),of(this);var v=this.g.ca();this.X=v;var w=J1(this);if(this.o=v==200,q1(this.i,this.v,this.B,this.l,this.S,ve,v),this.o){if(this.U&&!this.L){t:{if(this.g){var L,U=this.g;if((L=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(L)){var z=L;break t}}z=null}if(f=z)br(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lf(this,f);else{this.o=!1,this.m=3,an(12),Pi(this),xl(this);break e}}if(this.R){f=!0;let kt;for(;!this.K&&this.C<w.length;)if(kt=K1(this,w),kt==af){ve==4&&(this.m=4,an(14),f=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==zv){this.m=4,an(15),br(this.i,this.l,w,"[Invalid Chunk]"),f=!1;break}else br(this.i,this.l,kt,null),lf(this,kt);if(Gv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||w.length!=0||this.h.h||(this.m=1,an(16),f=!1),this.o=this.o&&f,!f)br(this.i,this.l,w,"[Invalid Chunked Response]"),Pi(this),xl(this);else if(w.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),gf(K),K.P=!0,an(11))}}else br(this.i,this.l,w,null),lf(this,w);ve==4&&Pi(this),this.o&&!this.K&&(ve==4?fy(this.j,this):(this.o=!1,_d(this)))}else cR(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),Pi(this),xl(this)}}}catch{}finally{}};function J1(f){if(!Gv(f))return f.g.la();const v=oy(f.g);if(v==="")return"";let w="";const L=v.length,U=Ia(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Pi(f),xl(f),"";f.h.i=new o.TextDecoder}for(let z=0;z<L;z++)f.h.h=!0,w+=f.h.i.decode(v[z],{stream:!(U&&z==L-1)});return v.length=0,f.h.g+=w,f.C=0,f.h.g}function Gv(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function K1(f,v){var w=f.C,L=v.indexOf(`
`,w);return L==-1?af:(w=Number(v.substring(w,L)),isNaN(w)?zv:(L+=1,L+w>v.length?af:(v=v.slice(L,L+w),f.C=L+w,v)))}Sa.prototype.cancel=function(){this.K=!0,Pi(this)};function _d(f){f.T=Date.now()+f.H,Bv(f,f.H)}function Bv(f,v){if(f.D!=null)throw Error("WatchDog timer not null");f.D=fl(d(f.aa,f),v)}function of(f){f.D&&(o.clearTimeout(f.D),f.D=null)}Sa.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(H1(this.i,this.B),this.M!=2&&(hl(),an(17)),Pi(this),this.m=2,xl(this)):Bv(this,this.T-f)};function xl(f){f.j.I==0||f.K||fy(f.j,f)}function Pi(f){of(f);var v=f.O;v&&typeof v.dispose=="function"&&v.dispose(),f.O=null,Rv(f.V),f.g&&(v=f.g,f.g=null,v.abort(),v.dispose())}function lf(f,v){try{var w=f.j;if(w.I!=0&&(w.g==f||cf(w.h,f))){if(!f.L&&cf(w.h,f)&&w.I==3){try{var L=w.Ba.g.parse(v)}catch{L=null}if(Array.isArray(L)&&L.length==3){var U=L;if(U[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<f.F)wd(w),Td(w);else break e;pf(w),an(18)}}else w.xa=U[1],0<w.xa-w.K&&U[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=fl(d(w.Va,w),6e3));$v(w.h)<=1&&w.ta&&(w.ta=void 0)}else ki(w,11)}else if((f.L||w.g==f)&&wd(w),!j(v))for(U=w.Ba.g.parse(v),v=0;v<U.length;v++){let Be=U[v];const kt=Be[0];if(!(kt<=w.K))if(w.K=kt,Be=Be[1],w.I==2)if(Be[0]=="c"){w.M=Be[1],w.ba=Be[2];const Ns=Be[3];Ns!=null&&(w.ka=Ns,w.j.info("VER="+w.ka));const Li=Be[4];Li!=null&&(w.za=Li,w.j.info("SVER="+w.za));const Ra=Be[5];Ra!=null&&typeof Ra=="number"&&Ra>0&&(L=1.5*Ra,w.O=L,w.j.info("backChannelRequestTimeoutMs_="+L)),L=w;const ja=f.g;if(ja){const Id=ja.g?ja.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Id){var z=L.h;z.g||Id.indexOf("spdy")==-1&&Id.indexOf("quic")==-1&&Id.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(df(z,z.h),z.h=null))}if(L.G){const xf=ja.g?ja.g.getResponseHeader("X-HTTP-Session-Id"):null;xf&&(L.wa=xf,Ke(L.J,L.G,xf))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-f.F,w.j.info("Handshake RTT: "+w.T+"ms")),L=w;var K=f;if(L.na=xy(L,L.L?L.ba:null,L.W),K.L){Yv(L.h,K);var ve=K,It=L.O;It&&(ve.H=It),ve.D&&(of(ve),_d(ve)),L.g=K}else my(L);w.i.length>0&&Sd(w)}else Be[0]!="stop"&&Be[0]!="close"||ki(w,7);else w.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ki(w,7):ff(w):Be[0]!="noop"&&w.l&&w.l.qa(Be),w.A=0)}}hl(4)}catch{}}var Q1=class{constructor(f,v){this.g=f,this.map=v}};function qv(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hv(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function $v(f){return f.h?1:f.g?f.g.size:0}function cf(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function df(f,v){f.g?f.g.add(v):f.h=v}function Yv(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}qv.prototype.cancel=function(){if(this.i=Jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Jv(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const w of f.g.values())v=v.concat(w.G);return v}return x(f.i)}var Kv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X1(f,v){if(f){f=f.split("&");for(let w=0;w<f.length;w++){const L=f[w].indexOf("=");let U,z=null;L>=0?(U=f[w].substring(0,L),z=f[w].substring(L+1)):U=f[w],v(U,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function wa(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;f instanceof wa?(this.l=f.l,vl(this,f.j),this.o=f.o,this.g=f.g,yl(this,f.u),this.h=f.h,uf(this,ty(f.i)),this.m=f.m):f&&(v=String(f).match(Kv))?(this.l=!1,vl(this,v[1]||"",!0),this.o=bl(v[2]||""),this.g=bl(v[3]||"",!0),yl(this,v[4]),this.h=bl(v[5]||"",!0),uf(this,v[6]||"",!0),this.m=bl(v[7]||"")):(this.l=!1,this.i=new El(null,this.l))}wa.prototype.toString=function(){const f=[];var v=this.j;v&&f.push(_l(v,Qv,!0),":");var w=this.g;return(w||v=="file")&&(f.push("//"),(v=this.o)&&f.push(_l(v,Qv,!0),"@"),f.push(gl(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&f.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(_l(w,w.charAt(0)=="/"?eR:Z1,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",_l(w,nR)),f.join("")},wa.prototype.resolve=function(f){const v=Es(this);let w=!!f.j;w?vl(v,f.j):w=!!f.o,w?v.o=f.o:w=!!f.g,w?v.g=f.g:w=f.u!=null;var L=f.h;if(w)yl(v,f.u);else if(w=!!f.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var U=v.h.lastIndexOf("/");U!=-1&&(L=v.h.slice(0,U+1)+L)}if(U=L,U==".."||U==".")L="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){L=U.lastIndexOf("/",0)==0,U=U.split("/");const z=[];for(let K=0;K<U.length;){const ve=U[K++];ve=="."?L&&K==U.length&&z.push(""):ve==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),L&&K==U.length&&z.push("")):(z.push(ve),L=!0)}L=z.join("/")}else L=U}return w?v.h=L:w=f.i.toString()!=="",w?uf(v,ty(f.i)):w=!!f.m,w&&(v.m=f.m),v};function Es(f){return new wa(f)}function vl(f,v,w){f.j=w?bl(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function yl(f,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);f.u=v}else f.u=null}function uf(f,v,w){v instanceof El?(f.i=v,sR(f.i,f.l)):(w||(v=_l(v,tR)),f.i=new El(v,f.l))}function Ke(f,v,w){f.i.set(v,w)}function Ed(f){return Ke(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function bl(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function _l(f,v,w){return typeof f=="string"?(f=encodeURI(f).replace(v,W1),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function W1(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Qv=/[#\/\?@]/g,Z1=/[#\?:]/g,eR=/[#\?]/g,tR=/[#\?@]/g,nR=/#/g;function El(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Di(f){f.g||(f.g=new Map,f.h=0,f.i&&X1(f.i,function(v,w){f.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}t=El.prototype,t.add=function(f,v){Di(this),this.i=null,f=_r(this,f);let w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(v),this.h+=1,this};function Xv(f,v){Di(f),v=_r(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function Wv(f,v){return Di(f),v=_r(f,v),f.g.has(v)}t.forEach=function(f,v){Di(this),this.g.forEach(function(w,L){w.forEach(function(U){f.call(v,U,L,this)},this)},this)};function Zv(f,v){Di(f);let w=[];if(typeof v=="string")Wv(f,v)&&(w=w.concat(f.g.get(_r(f,v))));else for(f=Array.from(f.g.values()),v=0;v<f.length;v++)w=w.concat(f[v]);return w}t.set=function(f,v){return Di(this),this.i=null,f=_r(this,f),Wv(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},t.get=function(f,v){return f?(f=Zv(this,f),f.length>0?String(f[0]):v):v};function ey(f,v,w){Xv(f,v),w.length>0&&(f.i=null,f.g.set(_r(f,v),x(w)),f.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(let L=0;L<v.length;L++){var w=v[L];const U=gl(w);w=Zv(this,w);for(let z=0;z<w.length;z++){let K=U;w[z]!==""&&(K+="="+gl(w[z])),f.push(K)}}return this.i=f.join("&")};function ty(f){const v=new El;return v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),v}function _r(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function sR(f,v){v&&!f.j&&(Di(f),f.i=null,f.g.forEach(function(w,L){const U=L.toLowerCase();L!=U&&(Xv(this,L),ey(this,U,w))},f)),f.j=v}function aR(f,v){const w=new pl;if(o.Image){const L=new Image;L.onload=m(Aa,w,"TestLoadImage: loaded",!0,v,L),L.onerror=m(Aa,w,"TestLoadImage: error",!1,v,L),L.onabort=m(Aa,w,"TestLoadImage: abort",!1,v,L),L.ontimeout=m(Aa,w,"TestLoadImage: timeout",!1,v,L),o.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else v(!1)}function iR(f,v){const w=new pl,L=new AbortController,U=setTimeout(()=>{L.abort(),Aa(w,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:L.signal}).then(z=>{clearTimeout(U),z.ok?Aa(w,"TestPingServer: ok",!0,v):Aa(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(U),Aa(w,"TestPingServer: error",!1,v)})}function Aa(f,v,w,L,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),L(w)}catch{}}function rR(){this.g=new G1}function mf(f){this.i=f.Sb||null,this.h=f.ab||!1}p(mf,jv),mf.prototype.g=function(){return new Nd(this.i,this.h)};function Nd(f,v){Me.call(this),this.H=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Nd,Me),t=Nd.prototype,t.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=v,this.readyState=1,Cl(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(v.body=f),(this.H||o).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nl(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Cl(this)),this.g&&(this.readyState=3,Cl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ny(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function ny(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Nl(this):Cl(this),this.readyState==3&&ny(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Nl(this))},t.Na=function(f){this.g&&(this.response=f,Nl(this))},t.ga=function(){this.g&&Nl(this)};function Nl(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Cl(f)}t.setRequestHeader=function(f,v){this.A.append(f,v)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=v.next();return f.join(`\r
`)};function Cl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function sy(f){let v="";return ne(f,function(w,L){v+=L,v+=":",v+=w,v+=`\r
`}),v}function hf(f,v,w){e:{for(L in w){var L=!1;break e}L=!0}L||(w=sy(w),typeof f=="string"?w!=null&&gl(w):Ke(f,v,w))}function dt(f){Me.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(dt,Me);var oR=/^https?$/i,lR=["POST","PUT"];t=dt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,v,w,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uv.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(z){ay(this,z);return}if(f=w||"",w=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var U in L)w.set(U,L[U]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const z of L.keys())w.set(z,L.get(z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(w.keys()).find(z=>z.toLowerCase()=="content-type"),U=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(lR,v,void 0)>=0)||L||U||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,K]of w)this.g.setRequestHeader(z,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(z){ay(this,z)}};function ay(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.o=5,iy(f),Cd(f)}function iy(f){f.A||(f.A=!0,ze(f,"complete"),ze(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,ze(this,"complete"),ze(this,"abort"),Cd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cd(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ry(this):this.Xa())},t.Xa=function(){ry(this)};function ry(f){if(f.h&&typeof i<"u"){if(f.v&&Ia(f)==4)setTimeout(f.Ca.bind(f),0);else if(ze(f,"readystatechange"),Ia(f)==4){f.h=!1;try{const z=f.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var L;if(L=z===0){let K=String(f.D).match(Kv)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),L=!oR.test(K?K.toLowerCase():"")}w=L}if(w)ze(f,"complete"),ze(f,"success");else{f.o=6;try{var U=Ia(f)>2?f.g.statusText:""}catch{U=""}f.l=U+" ["+f.ca()+"]",iy(f)}}finally{Cd(f)}}}}function Cd(f,v){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const w=f.g;f.g=null,v||ze(f,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ia(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Ia(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),F1(v)}};function oy(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function cR(f){const v={};f=(f.g&&Ia(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(j(f[L]))continue;var w=Y1(f[L]);const U=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const z=v[U]||[];v[U]=z,z.push(w)}de(v,function(L){return L.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tl(f,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||v}function ly(f){this.za=0,this.i=[],this.j=new pl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tl("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tl("baseRetryDelayMs",5e3,f),this.Za=Tl("retryDelaySeedMs",1e4,f),this.Ta=Tl("forwardChannelMaxRetries",2,f),this.va=Tl("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new qv(f&&f.concurrentRequestLimit),this.Ba=new rR,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ly.prototype,t.ka=8,t.I=1,t.connect=function(f,v,w,L){an(0),this.W=f,this.H=v||{},w&&L!==void 0&&(this.H.OSID=w,this.H.OAID=L),this.F=this.X,this.J=xy(this,null,this.W),Sd(this)};function ff(f){if(cy(f),f.I==3){var v=f.V++,w=Es(f.J);if(Ke(w,"SID",f.M),Ke(w,"RID",v),Ke(w,"TYPE","terminate"),Sl(f,w),v=new Sa(f,f.j,v),v.M=2,v.A=Ed(Es(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=v.A,w=!0),w||(v.g=vy(v.j,null),v.g.ea(v.A)),v.F=Date.now(),_d(v)}gy(f)}function Td(f){f.g&&(gf(f),f.g.cancel(),f.g=null)}function cy(f){Td(f),f.v&&(o.clearTimeout(f.v),f.v=null),wd(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function Sd(f){if(!Hv(f.h)&&!f.m){f.m=!0;var v=f.Ea;V||_(),k||(V(),k=!0),R.add(v,f),f.D=0}}function dR(f,v){return $v(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=v.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=fl(d(f.Ea,f,v),py(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const U=new Sa(this,this.j,f);let z=this.o;if(this.U&&(z?(z=we(z),rt(z,this.U)):z=this.U),this.u!==null||this.R||(U.J=z,z=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var L=this.i[w];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(v+=L,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=uy(this,U,v),w=Es(this.J),Ke(w,"RID",f),Ke(w,"CVER",22),this.G&&Ke(w,"X-HTTP-Session-Id",this.G),Sl(this,w),z&&(this.R?v="headers="+gl(sy(z))+"&"+v:this.u&&hf(w,this.u,z)),df(this.h,U),this.Ra&&Ke(w,"TYPE","init"),this.S?(Ke(w,"$req",v),Ke(w,"SID","null"),U.U=!0,rf(U,w,null)):rf(U,w,v),this.I=2}}else this.I==3&&(f?dy(this,f):this.i.length==0||Hv(this.h)||dy(this))};function dy(f,v){var w;v?w=v.l:w=f.V++;const L=Es(f.J);Ke(L,"SID",f.M),Ke(L,"RID",w),Ke(L,"AID",f.K),Sl(f,L),f.u&&f.o&&hf(L,f.u,f.o),w=new Sa(f,f.j,w,f.D+1),f.u===null&&(w.J=f.o),v&&(f.i=v.G.concat(f.i)),v=uy(f,w,1e3),w.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),df(f.h,w),rf(w,L,v)}function Sl(f,v){f.H&&ne(f.H,function(w,L){Ke(v,L,w)}),f.l&&ne({},function(w,L){Ke(v,L,w)})}function uy(f,v,w){w=Math.min(f.i.length,w);const L=f.l?d(f.l.Ka,f.l,f):null;e:{var U=f.i;let ve=-1;for(;;){const It=["count="+w];ve==-1?w>0?(ve=U[0].g,It.push("ofs="+ve)):ve=0:It.push("ofs="+ve);let Be=!0;for(let kt=0;kt<w;kt++){var z=U[kt].g;const Ns=U[kt].map;if(z-=ve,z<0)ve=Math.max(0,U[kt].g-100),Be=!1;else try{z="req"+z+"_"||"";try{var K=Ns instanceof Map?Ns:Object.entries(Ns);for(const[Li,Ra]of K){let ja=Ra;l(Ra)&&(ja=ef(Ra)),It.push(z+Li+"="+encodeURIComponent(ja))}}catch(Li){throw It.push(z+"type="+encodeURIComponent("_badmap")),Li}}catch{L&&L(Ns)}}if(Be){K=It.join("&");break e}}K=void 0}return f=f.i.splice(0,w),v.G=f,K}function my(f){if(!f.g&&!f.v){f.Y=1;var v=f.Da;V||_(),k||(V(),k=!0),R.add(v,f),f.A=0}}function pf(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=fl(d(f.Da,f),py(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,hy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=fl(d(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),Td(this),hy(this))};function gf(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function hy(f){f.g=new Sa(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var v=Es(f.na);Ke(v,"RID","rpc"),Ke(v,"SID",f.M),Ke(v,"AID",f.K),Ke(v,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ke(v,"TO",f.ia),Ke(v,"TYPE","xmlhttp"),Sl(f,v),f.u&&f.o&&hf(v,f.u,f.o),f.O&&(f.g.H=f.O);var w=f.g;f=f.ba,w.M=1,w.A=Ed(Es(v)),w.u=null,w.R=!0,Fv(w,f)}t.Va=function(){this.C!=null&&(this.C=null,Td(this),pf(this),an(19))};function wd(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function fy(f,v){var w=null;if(f.g==v){wd(f),gf(f),f.g=null;var L=2}else if(cf(f.h,v))w=v.G,Yv(f.h,v),L=1;else return;if(f.I!=0){if(v.o)if(L==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var U=f.D;L=yd(),ze(L,new Lv(L,w)),Sd(f)}else my(f);else if(U=v.m,U==3||U==0&&v.X>0||!(L==1&&dR(f,v)||L==2&&pf(f)))switch(w&&w.length>0&&(v=f.h,v.i=v.i.concat(w)),U){case 1:ki(f,5);break;case 4:ki(f,10);break;case 3:ki(f,6);break;default:ki(f,2)}}}function py(f,v){let w=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(w*=2),w*v}function ki(f,v){if(f.j.info("Error code "+v),v==2){var w=d(f.bb,f),L=f.Ua;const U=!L;L=new wa(L||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vl(L,"https"),Ed(L),U?aR(L.toString(),w):iR(L.toString(),w)}else an(2);f.I=0,f.l&&f.l.pa(v),gy(f),cy(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function gy(f){if(f.I=0,f.ja=[],f.l){const v=Jv(f.h);(v.length!=0||f.i.length!=0)&&(y(f.ja,v),y(f.ja,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.oa()}}function xy(f,v,w){var L=w instanceof wa?Es(w):new wa(w);if(L.g!="")v&&(L.g=v+"."+L.g),yl(L,L.u);else{var U=o.location;L=U.protocol,v=v?v+"."+U.hostname:U.hostname,U=+U.port;const z=new wa(null);L&&vl(z,L),v&&(z.g=v),U&&yl(z,U),w&&(z.h=w),L=z}return w=f.G,v=f.wa,w&&v&&Ke(L,w,v),Ke(L,"VER",f.ka),Sl(f,L),L}function vy(f,v,w){if(v&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Aa&&!f.ma?new dt(new mf({ab:w})):new dt(f.ma),v.Fa(f.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yy(){}t=yy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ad(){}Ad.prototype.g=function(f,v){return new En(f,v)};function En(f,v){Me.call(this),this.g=new ly(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(f?f["X-WebChannel-Client-Profile"]=v.sa:f={"X-WebChannel-Client-Profile":v.sa}),this.g.U=f,(f=v&&v.Qb)&&!j(f)&&(this.g.u=f),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!j(v)&&(this.g.G=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new Er(this)}p(En,Me),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){ff(this.g)},En.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.v&&(w={},w.__data__=ef(f),f=w);v.i.push(new Q1(v.Ya++,f)),v.I==3&&Sd(v)},En.prototype.N=function(){this.g.l=null,delete this.j,ff(this.g),delete this.g,En.Z.N.call(this)};function by(f){tf.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const w in v){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}p(by,tf);function _y(){nf.call(this),this.status=1}p(_y,nf);function Er(f){this.g=f}p(Er,yy),Er.prototype.ra=function(){ze(this.g,"a")},Er.prototype.qa=function(f){ze(this.g,new by(f))},Er.prototype.pa=function(f){ze(this.g,new _y)},Er.prototype.oa=function(){ze(this.g,"b")},Ad.prototype.createWebChannel=Ad.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,GA=function(){return new Ad},FA=function(){return yd()},zA=Mi,Ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bd.NO_ERROR=0,bd.TIMEOUT=8,bd.HTTP_ERROR=6,ju=bd,Vv.COMPLETE="complete",OA=Vv,Mv.EventType=ml,ml.OPEN="a",ml.CLOSE="b",ml.ERROR="c",ml.MESSAGE="d",Me.prototype.listen=Me.prototype.J,ql=Mv,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,UA=dt}).apply(typeof Kd<"u"?Kd:typeof self<"u"?self:typeof window<"u"?window:{});const D_="@firebase/firestore",k_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new yx("@firebase/firestore");function Ir(){return or.logLevel}function ee(t,...e){if(or.logLevel<=Ee.DEBUG){const n=e.map(Mx);or.debug(`Firestore (${Qo}): ${t}`,...n)}}function va(t,...e){if(or.logLevel<=Ee.ERROR){const n=e.map(Mx);or.error(`Firestore (${Qo}): ${t}`,...n)}}function lr(t,...e){if(or.logLevel<=Ee.WARN){const n=e.map(Mx);or.warn(`Firestore (${Qo}): ${t}`,...n)}}function Mx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BA(t,s,n)}function BA(t,e,n){let s=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw va(s),new Error(s)}function Ve(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||BA(e,a,s)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Na{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class q6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H6{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let s=this.i;const a=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new oa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new oa,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new oa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string",31837,{l:s}),new qA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class $6{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y6{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new $6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const s=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const a=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new L_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new L_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=K6(40);for(let i=0;i<a.length;++i)s.length<20&&a[i]<n&&(s+=e.charAt(a[i]%62))}return s}}function Ne(t,e){return t<e?-1:t>e?1:0}function Rg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),i=e.charAt(s);if(a!==i)return up(a)===up(i)?Ne(a,i):up(a)?1:-1}return Ne(t.length,e.length)}const Q6=55296,X6=57343;function up(t){const e=t.charCodeAt(0);return e>=Q6&&e<=X6}function To(t,e,n){return t.length===e.length&&t.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="__name__";class Ts{constructor(e,n,s){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&le(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const i=Ts.compareSegments(e.get(a),n.get(a));if(i!==0)return i}return Ne(e.length,n.length)}static compareSegments(e,n){const s=Ts.isNumericId(e),a=Ts.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):Rg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ci.fromString(e.substring(4,e.length-2))}}class He extends Ts{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new W(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new He(n)}static emptyPath(){return new He([])}}const W6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Ts{construct(e,n,s){return new Ot(e,n,s)}static isValidIdentifier(e){return W6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V_}static keyField(){return new Ot([V_])}static fromServerFormat(e){const n=[];let s="",a=0;const i=()=>{if(s.length===0)throw new W(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new W(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(s+=l,a++):(i(),a++)}if(i(),o)throw new W(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(He.fromString(e))}static fromName(e){return new se(He.fromString(e).popFirst(5))}static empty(){return new se(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e,n){if(!n)throw new W(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YA(t,e,n,s){if(e===!0&&s===!0)throw new W(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U_(t){if(!se.isDocumentKey(t))throw new W(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function O_(t){if(se.isDocumentKey(t))throw new W(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xh(t);throw new W(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Z6(t,e){if(e<=0)throw new W(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function cd(t,e){if(!JA(t))throw new W(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(a&&typeof o!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new W(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=-62135596800,F_=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*F_);return new Pe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<z_)throw new W(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F_}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cd(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:wt("string",Pe._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Pe(0,0))}static max(){return new he(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function ek(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=he.fromTimestamp(s===1e9?new Pe(n+1,0):new Pe(n,s));return new gi(a,se.empty(),e)}function tk(t){return new gi(t.readTime,t.key,Dc)}class gi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new gi(he.min(),se.empty(),Dc)}static max(){return new gi(he.max(),se.empty(),Dc)}}function nk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ak{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==sk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((s,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,a)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,s)=>{n(e)})}static reject(e){return new $((n,s)=>{s(e)})}static waitFor(e){return new $((n,s)=>{let a=0,i=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++i,o&&i===a&&n()},c=>s(c))}),o=!0,i===a&&n()})}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next(a=>a?$.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,i)=>{s.push(n.call(this,a,i))}),this.waitFor(s)}static mapArray(e,n){return new $((s,a)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++l,l===i&&s(o)},m=>a(m))}})}static doWhile(e,n){return new $((s,a)=>{const i=()=>{e()===!0?n().next(()=>{i()},a):s()};i()})}}function ik(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=-1;function yh(t){return t==null}function Nm(t){return t===0&&1/t==-1/0}function rk(t){return typeof t=="number"&&Number.isInteger(t)&&!Nm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="";function ok(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=G_(e)),e=lk(t.get(n),e);return G_(e)}function lk(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const i=t.charAt(a);switch(i){case"\0":n+="";break;case KA:n+="";break;default:n+=i}}return n}function G_(t){return t+KA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,s,a,i){this.key=e,this.value=n,this.color=s??$t.RED,this.left=a??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,i){return new $t(e??this.key,n??this.value,s??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const i=s(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,n,s),null):i===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return $t.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,s,a,i){return this}insert(e,n,s){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new q_(this.data.getIterator())}getIteratorFrom(e){return new q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=s.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new In([])}unionWith(e){let n=new jt(Ot.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new XA("Invalid base64 string: "+i):i}}(e);return new Ft(n)}static fromUint8Array(e){const n=function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i}(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const ck=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=ck.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vi(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="server_timestamp",ZA="__type__",e2="__previous_value__",t2="__local_write_time__";function Dx(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZA])==null?void 0:s.stringValue)===WA}function bh(t){const e=t.mapValue.fields[e2];return Dx(e)?bh(e):e}function kc(t){const e=xi(t.mapValue.fields[t2].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,s,a,i,o,l,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=m}}const Cm="(default)";class So{constructor(e,n){this.projectId=e,this.database=n||Cm}static empty(){return new So("","")}get isDefaultDatabase(){return this.database===Cm}isEqual(e){return e instanceof So&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="__type__",uk="__max__",Xd={mapValue:{}},s2="__vector__",Tm="value";function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dx(t)?4:hk(t)?9007199254740991:mk(t)?10:11:le(28295,{value:t})}function ks(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kc(t).isEqual(kc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=xi(a.timestampValue),l=xi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return vi(a.bytesValue).isEqual(vi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return ft(a.geoPointValue.latitude)===ft(i.geoPointValue.latitude)&&ft(a.geoPointValue.longitude)===ft(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return ft(a.integerValue)===ft(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=ft(a.doubleValue),l=ft(i.doubleValue);return o===l?Nm(o)===Nm(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return To(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return function(a,i){const o=a.mapValue.fields||{},l=i.mapValue.fields||{};if(B_(o)!==B_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ks(o[c],l[c])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function Lc(t,e){return(t.values||[]).find(n=>ks(n,e))!==void 0}function wo(t,e){if(t===e)return 0;const n=yi(t),s=yi(e);if(n!==s)return Ne(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ft(i.integerValue||i.doubleValue),c=ft(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return H_(t.timestampValue,e.timestampValue);case 4:return H_(kc(t),kc(e));case 5:return Rg(t.stringValue,e.stringValue);case 6:return function(i,o){const l=vi(i),c=vi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const m=Ne(l[d],c[d]);if(m!==0)return m}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ne(ft(i.latitude),ft(o.latitude));return l!==0?l:Ne(ft(i.longitude),ft(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,y,T;const l=i.fields||{},c=o.fields||{},d=(g=l[Tm])==null?void 0:g.arrayValue,m=(x=c[Tm])==null?void 0:x.arrayValue,p=Ne(((y=d==null?void 0:d.values)==null?void 0:y.length)||0,((T=m==null?void 0:m.values)==null?void 0:T.length)||0);return p!==0?p:$_(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xd.mapValue&&o===Xd.mapValue)return 0;if(i===Xd.mapValue)return 1;if(o===Xd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=Rg(c[p],m[p]);if(g!==0)return g;const x=wo(l[c[p]],d[m[p]]);if(x!==0)return x}return Ne(c.length,m.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function H_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=xi(t),s=xi(e),a=Ne(n.seconds,s.seconds);return a!==0?a:Ne(n.nanos,s.nanos)}function $_(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const i=wo(n[a],s[a]);if(i)return i}return Ne(n.length,s.length)}function Ao(t){return jg(t)}function jg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=xi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",a=!0;for(const i of n.values||[])a?a=!1:s+=",",s+=jg(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",i=!0;for(const o of s)i?i=!1:a+=",",a+=`${o}:${jg(n.fields[o])}`;return a+"}"}(t.mapValue):le(61005,{value:t})}function Mu(t){switch(yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bh(t);return e?16+Mu(e):16;case 5:return 2*t.stringValue.length;case 6:return vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,i)=>a+Mu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let a=0;return Ai(s.fields,(i,o)=>{a+=i.length+Mu(o)}),a}(t.mapValue);default:throw le(13486,{value:t})}}function Y_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mg(t){return!!t&&"integerValue"in t}function kx(t){return!!t&&"arrayValue"in t}function J_(t){return!!t&&"nullValue"in t}function K_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pu(t){return!!t&&"mapValue"in t}function mk(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[n2])==null?void 0:s.stringValue)===s2}function uc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=uc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uc(t.arrayValue.values[n]);return e}return{...t}}function hk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Pu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(n)}setAll(e){let n=Ot.emptyPath(),s={},a=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,a),s={},a=[],n=l.popLast()}o?s[l.lastSegment()]=uc(o):a.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,a)}delete(e){const n=this.field(e.popLast());Pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Pu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Ai(n,(a,i)=>e[a]=i);for(const a of s)delete e[a]}clone(){return new vn(uc(this.value))}}function a2(t){const e=[];return Ai(t.fields,(n,s)=>{const a=new Ot([n]);if(Pu(s)){const i=a2(s.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,s,a,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new en(e,0,he.min(),he.min(),he.min(),vn.empty(),0)}static newFoundDocument(e,n,s,a){return new en(e,1,n,he.min(),s,a,0)}static newNoDocument(e,n){return new en(e,2,n,he.min(),he.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,he.min(),he.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.position=e,this.inclusive=n}}function Q_(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?s=se.comparator(se.fromName(o.referenceValue),n.key):s=wo(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function X_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function fk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{}class Tt extends i2{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new gk(e,n,s):n==="array-contains"?new yk(e,s):n==="in"?new bk(e,s):n==="not-in"?new _k(e,s):n==="array-contains-any"?new Ek(e,s):new Tt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new xk(e,s):new vk(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wo(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends i2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ps(e,n)}matches(e){return r2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r2(t){return t.op==="and"}function o2(t){return pk(t)&&r2(t)}function pk(t){for(const e of t.filters)if(e instanceof ps)return!1;return!0}function Pg(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+Ao(t.value);if(o2(t))return t.filters.map(e=>Pg(e)).join(",");{const e=t.filters.map(n=>Pg(n)).join(",");return`${t.op}(${e})`}}function l2(t,e){return t instanceof Tt?function(s,a){return a instanceof Tt&&s.op===a.op&&s.field.isEqual(a.field)&&ks(s.value,a.value)}(t,e):t instanceof ps?function(s,a){return a instanceof ps&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((i,o,l)=>i&&l2(o,a.filters[l]),!0):!1}(t,e):void le(19439)}function c2(t){return t instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(t):t instanceof ps?function(n){return n.op.toString()+" {"+n.getFilters().map(c2).join(" ,")+"}"}(t):"Filter"}class gk extends Tt{constructor(e,n,s){super(e,n,s),this.key=se.fromName(s.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class xk extends Tt{constructor(e,n){super(e,"in",n),this.keys=d2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vk extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=d2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>se.fromName(s.referenceValue))}class yk extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kx(n)&&Lc(n.arrayValue,this.value)}}class bk extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class _k extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class Ek extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Lc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n=null,s=[],a=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function W_(t,e=null,n=[],s=[],a=null,i=null,o=null){return new Nk(t,e,n,s,a,i,o)}function Lx(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Pg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ao(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ao(s)).join(",")),e.Te=n}return e.Te}function Vx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!l2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X_(t.startAt,e.startAt)&&X_(t.endAt,e.endAt)}function Dg(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n=null,s=[],a=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ck(t,e,n,s,a,i,o,l){return new Zo(t,e,n,s,a,i,o,l)}function _h(t){return new Zo(t)}function Z_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function u2(t){return t.collectionGroup!==null}function mc(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new jt(Ot.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Vc(i,s))}),n.has(Ot.keyField().canonicalString())||e.Ie.push(new Vc(Ot.keyField(),s))}return e.Ie}function Ms(t){const e=fe(t);return e.Ee||(e.Ee=Tk(e,mc(t))),e.Ee}function Tk(t,e){if(t.limitType==="F")return W_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new Vc(a.field,i)});const n=t.endAt?new Sm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Sm(t.startAt.position,t.startAt.inclusive):null;return W_(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function kg(t,e){const n=t.filters.concat([e]);return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wm(t,e,n){return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return Vx(Ms(t),Ms(e))&&t.limitType===e.limitType}function m2(t){return`${Lx(Ms(t))}|lt:${t.limitType}`}function Rr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>c2(a)).join(", ")}]`),yh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Ao(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Ao(a)).join(",")),`Target(${s})`}(Ms(t))}; limitType=${t.limitType})`}function Nh(t,e){return e.isFoundDocument()&&function(s,a){const i=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):se.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,a){for(const i of mc(s))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,a){for(const i of s.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(s,a){return!(s.startAt&&!function(o,l,c){const d=Q_(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,mc(s),a)||s.endAt&&!function(o,l,c){const d=Q_(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,mc(s),a))}(t,e)}function Sk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h2(t){return(e,n)=>{let s=!1;for(const a of mc(t)){const i=wk(a,e,n);if(i!==0)return i;s=s||a.field.isKeyField()}return 0}}function wk(t,e,n){const s=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?wo(c,d):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,i]of s)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,(n,s)=>{for(const[a,i]of s)e(a,i)})}isEmpty(){return QA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new lt(se.comparator);function ya(){return Ak}const f2=new lt(se.comparator);function Hl(...t){let e=f2;for(const n of t)e=e.insert(n.key,n);return e}function p2(t){let e=f2;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $i(){return hc()}function g2(){return hc()}function hc(){return new gr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ik=new lt(se.comparator),Rk=new jt(se.comparator);function Ce(...t){let e=Rk;for(const n of t)e=e.add(n);return e}const jk=new jt(Ne);function Mk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nm(e)?"-0":e}}function x2(t){return{integerValue:""+t}}function Pk(t,e){return rk(e)?x2(e):Ux(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this._=void 0}}function Dk(t,e,n){return t instanceof Am?function(a,i){const o={fields:{[ZA]:{stringValue:WA},[t2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&Dx(i)&&(i=bh(i)),i&&(o.fields[e2]=i),{mapValue:o}}(n,e):t instanceof Io?y2(t,e):t instanceof Ro?b2(t,e):function(a,i){const o=v2(a,i),l=eE(o)+eE(a.Ae);return Mg(o)&&Mg(a.Ae)?x2(l):Ux(a.serializer,l)}(t,e)}function kk(t,e,n){return t instanceof Io?y2(t,e):t instanceof Ro?b2(t,e):n}function v2(t,e){return t instanceof Im?function(s){return Mg(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Am extends Ch{}class Io extends Ch{constructor(e){super(),this.elements=e}}function y2(t,e){const n=_2(e);for(const s of t.elements)n.some(a=>ks(a,s))||n.push(s);return{arrayValue:{values:n}}}class Ro extends Ch{constructor(e){super(),this.elements=e}}function b2(t,e){let n=_2(e);for(const s of t.elements)n=n.filter(a=>!ks(a,s));return{arrayValue:{values:n}}}class Im extends Ch{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function eE(t){return ft(t.integerValue||t.doubleValue)}function _2(t){return kx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.field=e,this.transform=n}}function Lk(t,e){return t.field.isEqual(e.field)&&function(s,a){return s instanceof Io&&a instanceof Io||s instanceof Ro&&a instanceof Ro?To(s.elements,a.elements,ks):s instanceof Im&&a instanceof Im?ks(s.Ae,a.Ae):s instanceof Am&&a instanceof Am}(t.transform,e.transform)}class Vk{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Du(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Th{}function N2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sh(t.key,dn.none()):new dd(t.key,t.data,dn.none());{const n=t.data,s=vn.empty();let a=new jt(Ot.comparator);for(let i of e.fields)if(!a.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),a=a.add(i)}return new Ii(t.key,s,new In(a.toArray()),dn.none())}}function Uk(t,e,n){t instanceof dd?function(a,i,o){const l=a.value.clone(),c=nE(a.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ii?function(a,i,o){if(!Du(a.precondition,i))return void i.convertToUnknownDocument(o.version);const l=nE(a.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(C2(a)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fc(t,e,n,s){return t instanceof dd?function(i,o,l,c){if(!Du(i.precondition,o))return l;const d=i.value.clone(),m=sE(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ii?function(i,o,l,c){if(!Du(i.precondition,o))return l;const d=sE(i.fieldTransforms,c,o),m=o.data;return m.setAll(C2(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return Du(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Ok(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),i=v2(s.transform,a||null);i!=null&&(n===null&&(n=vn.empty()),n.set(s.field,i))}return n||null}function tE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&To(s,a,(i,o)=>Lk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dd extends Th{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ii extends Th{constructor(e,n,s,a,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function nE(t,e,n){const s=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const i=t[a],o=i.transform,l=e.data.field(i.field);s.set(i.field,kk(o,l,n[a]))}return s}function sE(t,e,n){const s=new Map;for(const a of t){const i=a.transform,o=n.data.field(a.field);s.set(a.field,Dk(i,o,e))}return s}class Sh extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zk extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Uk(i,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=fc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=fc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=g2();return this.mutations.forEach(a=>{const i=e.get(a.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(a.key)?null:l;const c=N2(o,l);c!==null&&s.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(n,s)=>tE(n,s))&&To(this.baseMutations,e.baseMutations,(n,s)=>tE(n,s))}}class Ox{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ve(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return Ik}();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,s[o].version);return new Ox(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Re;function qk(t){switch(t){case q.OK:return le(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function T2(t){if(t===void 0)return va("GRPC error has no .code"),q.UNKNOWN;switch(t){case _t.OK:return q.OK;case _t.CANCELLED:return q.CANCELLED;case _t.UNKNOWN:return q.UNKNOWN;case _t.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case _t.INTERNAL:return q.INTERNAL;case _t.UNAVAILABLE:return q.UNAVAILABLE;case _t.UNAUTHENTICATED:return q.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case _t.NOT_FOUND:return q.NOT_FOUND;case _t.ALREADY_EXISTS:return q.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return q.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case _t.ABORTED:return q.ABORTED;case _t.OUT_OF_RANGE:return q.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return q.UNIMPLEMENTED;case _t.DATA_LOSS:return q.DATA_LOSS;default:return le(39323,{code:t})}}(Re=_t||(_t={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new ci([4294967295,4294967295],0);function aE(t){const e=Hk().encode(t),n=new VA;return n.update(e),new Uint8Array(n.digest())}function iE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ci([n,s],0),new ci([a,i],0)]}class zx{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(s<0)throw new $l(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ci.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(ci.fromNumber(s)));return a.compare($k)===1&&(a=new ci([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=aE(e),[s,a]=iE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,a,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new zx(i,a,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=aE(e),[s,a]=iE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,a,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,s,a,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ud.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new wh(he.min(),a,new lt(Ne),ya(),Ce())}}class ud{constructor(e,n,s,a,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ud(s,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class S2{constructor(e,n){this.targetId=e,this.Ce=n}}class w2{constructor(e,n,s=Ft.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class rE{constructor(){this.ve=0,this.Fe=oE(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),s=Ce();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:le(38017,{changeType:i})}}),new ud(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=oE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Yk{constructor(e){this.Ge=e,this.ze=new Map,this.je=ya(),this.Je=Wd(),this.He=Wd(),this.Ye=new lt(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,a)=>{this.rt(a)&&n(a)})}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const i=a.target;if(Dg(i))if(s===0){const o=new se(i.path);this.et(n,o,en.newNoDocument(o,he.min()))}else Ve(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:i=0}=n;let o,l;try{o=vi(s).toUint8Array()}catch(c){if(c instanceof XA)return lr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new zx(o,a,i)}catch(c){return lr(c instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),a++)}),a}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Dg(l.target)){const c=new se(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,en.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Ce();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const a=new wh(e,n,this.Ye,this.je,s);return this.je=ya(),this.Je=Wd(),this.He=Wd(),this.Ye=new lt(Ne),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wd(){return new lt(se.comparator)}function oE(){return new lt(se.comparator)}const Jk={asc:"ASCENDING",desc:"DESCENDING"},Kk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"};class Xk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lg(t,e){return t.useProto3Json||yh(e)?e:{value:e}}function Rm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wk(t,e){return Rm(t,e.toTimestamp())}function Ps(t){return Ve(!!t,49232),he.fromTimestamp(function(n){const s=xi(n);return new Pe(s.seconds,s.nanos)}(t))}function Fx(t,e){return Vg(t,e).canonicalString()}function Vg(t,e){const n=function(a){return new He(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I2(t){const e=He.fromString(t);return Ve(D2(e),10190,{key:e.toString()}),e}function Ug(t,e){return Fx(t.databaseId,e.path)}function mp(t,e){const n=I2(e);if(n.get(1)!==t.databaseId.projectId)throw new W(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(j2(n))}function R2(t,e){return Fx(t.databaseId,e)}function Zk(t){const e=I2(t);return e.length===4?He.emptyPath():j2(e)}function Og(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function j2(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lE(t,e,n){return{name:Ug(t,e),fields:n.value.mapValue.fields}}function eL(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:le(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(Ve(m===void 0||typeof m=="string",58123),Ft.fromBase64String(m||"")):(Ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ft.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?q.UNKNOWN:T2(d.code);return new W(m,d.message||"")}(o);n=new w2(s,a,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=mp(t,s.document.name),i=Ps(s.document.updateTime),o=s.document.createTime?Ps(s.document.createTime):he.min(),l=new vn({mapValue:{fields:s.document.fields}}),c=en.newFoundDocument(a,i,o,l),d=s.targetIds||[],m=s.removedTargetIds||[];n=new ku(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=mp(t,s.document),i=s.readTime?Ps(s.readTime):he.min(),o=en.newNoDocument(a,i),l=s.removedTargetIds||[];n=new ku([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=mp(t,s.document),i=s.removedTargetIds||[];n=new ku([],i,a,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:i}=s,o=new Bk(a,i),l=s.targetId;n=new S2(l,o)}}return n}function tL(t,e){let n;if(e instanceof dd)n={update:lE(t,e.key,e.value)};else if(e instanceof Sh)n={delete:Ug(t,e.key)};else if(e instanceof Ii)n={update:lE(t,e.key,e.data),updateMask:dL(e.fieldMask)};else{if(!(e instanceof zk))return le(16599,{Vt:e.type});n={verify:Ug(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Am)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Io)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ro)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Im)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw le(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:Wk(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le(27497)}(t,e.precondition)),n}function nL(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(a,i){let o=a.updateTime?Ps(a.updateTime):Ps(i);return o.isEqual(he.min())&&(o=Ps(i)),new Vk(o,a.transformResults||[])}(n,e))):[]}function sL(t,e){return{documents:[R2(t,e.path)]}}function aL(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=R2(t,a);const i=function(d){if(d.length!==0)return P2(ps.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:jr(g.field),direction:oL(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lg(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:a}}function iL(t){let e=Zk(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ve(s===1,65062);const m=n.from[0];m.allDescendants?a=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=M2(p);return g instanceof ps&&o2(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(y){return new Vc(Mr(y.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,yh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,x=p.values||[];return new Sm(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new Sm(x,g)}(n.endAt)),Ck(e,a,o,i,l,"F",c,d)}function rL(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Mr(n.unaryFilter.field);return Tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Mr(n.unaryFilter.field);return Tt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Mr(n.unaryFilter.field);return Tt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mr(n.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(Mr(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ps.create(n.compositeFilter.filters.map(s=>M2(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function oL(t){return Jk[t]}function lL(t){return Kk[t]}function cL(t){return Qk[t]}function jr(t){return{fieldPath:t.canonicalString()}}function Mr(t){return Ot.fromServerFormat(t.fieldPath)}function P2(t){return t instanceof Tt?function(n){if(n.op==="=="){if(K_(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NAN"}};if(J_(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K_(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NAN"}};if(J_(n.value))return{unaryFilter:{field:jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jr(n.field),op:lL(n.op),value:n.value}}}(t):t instanceof ps?function(n){const s=n.getFilters().map(a=>P2(a));return s.length===1?s[0]:{compositeFilter:{op:cL(n.op),filters:s}}}(t):le(54877,{filter:t})}function dL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function D2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n,s,a,i=he.min(),o=he.min(),l=Ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.yt=e}}function mL(t){const e=iL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.Cn=new fL}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(gi.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class fL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new jt(He.comparator),i=!a.has(s);return this.index[n]=a.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new jt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k2=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(k2,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="LruGarbageCollector",pL=1048576;function uE([t,e],[n,s]){const a=Ne(t,n);return a===0?Ne(e,s):a}class gL{constructor(e){this.Ir=e,this.buffer=new jt(uE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();uE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(dE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wo(n)?ee(dE,"Ignoring IndexedDB error during garbage collection: ",n):await Xo(n)}await this.Vr(3e5)})}}class vL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return $.resolve(vh.ce);const s=new gL(n);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(cE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,i,o,l,c,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),a=this.params.maximumSequenceNumbersToCollect):a=p,o=Date.now(),this.nthSequenceNumber(e,a))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(d=Date.now(),Ir()<=Ee.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:p})))}}function yL(t,e){return new vL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.changes=new gr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&fc(s.mutation,a,In.empty(),Pe.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ce()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ce()){const a=$i();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(i=>{let o=Hl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=$i();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ce()))}populateOverlays(e,n,s){const a=[];return s.forEach(i=>{n.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,a){let i=ya();const o=hc(),l=function(){return hc()}();return n.forEach((c,d)=>{const m=s.get(d.key);a.has(d.key)&&(m===void 0||m.mutation instanceof Ii)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),fc(m.mutation,d,m.mutation.getFieldMask(),Pe.now())):o.set(d.key,In.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new _L(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=hc();let a=new lt((o,l)=>o-l),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=s.get(c)||In.empty();m=l.applyToLocalView(d,m),s.set(c,m);const p=(a.get(l.batchId)||Ce()).add(c);a=a.insert(l.batchId,p)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,m=c.value,p=g2();m.forEach(g=>{if(!i.has(g)){const x=N2(n.get(g),s.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return $.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-i.size):$.resolve($i());let l=Dc,c=i;return o.next(d=>$.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ce())).next(m=>({batchId:l,changes:p2(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(s=>{let a=Hl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const i=n.collectionGroup;let o=Hl();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const d=function(p,g){return new Zo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,a).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,a))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,en.newInvalidDocument(m)))});let l=Hl();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&fc(m.mutation,d,In.empty(),Pe.now()),Nh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Ps(a.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(a){return{name:a.name,query:mL(a.bundledQuery),readTime:Ps(a.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.overlays=new lt(se.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$i();return $.forEach(n,a=>this.getOverlay(e,a).next(i=>{i!==null&&s.set(a,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const a=$i(),i=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&a.set(c.getKey(),c)}return $.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let i=new lt((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let m=i.get(d.largestBatchId);m===null&&(m=$i(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=$i(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=a)););return $.resolve(l)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Gk(n,s));let i=this.qr.get(n);i===void 0&&(i=Ce(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.Qr=new jt(Lt.$r),this.Ur=new jt(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Lt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new se(new He([])),s=new Lt(n,e),a=new Lt(n,e+1),i=[];return this.Ur.forEachInRange([s,a],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new se(new He([])),s=new Lt(n,e),a=new Lt(n,e+1);let i=Ce();return this.Ur.forEachInRange([s,a],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Lt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return se.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Lt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Fk(i,n,s,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Lt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),i=a<0?0:a;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Px:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Lt(n,0),a=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,a],o=>{const l=this.Xr(o.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new jt(Ne);return n.forEach(a=>{const i=new Lt(a,0),o=new Lt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let i=s;se.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new se(i),0);let l=new jt(Ne);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===a&&(l=l.add(c.Yr)),!0)},o),$.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,a=>{const i=new Lt(a.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Lt(n,0),a=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.ri=e,this.docs=function(){return new lt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),i=a?a.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let s=ya();return n.forEach(a=>{const i=this.docs.get(a);s=s.insert(a,i?i.document.mutableCopy():en.newInvalidDocument(a))}),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let i=ya();const o=n.path,l=new se(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||nk(tk(m),s)<=0||(a.has(m.key)||Nh(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,s,a){le(9500)}ii(e,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new AL(this)}getSize(e){return $.resolve(this.size)}}class AL extends bL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.persistence=e,this.si=new gr(n=>Lx(n),Vx),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new Gx,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,n){return this.si.forEach((s,a)=>n(a)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let a=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),$.waitFor(i).next(()=>a)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,i=[];return a&&n.forEach(o=>{i.push(a.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.ui={},this.overlays={},this.ci=new vh(0),this.li=!1,this.li=!0,this.hi=new TL,this.referenceDelegate=e(this),this.Pi=new IL(this),this.indexManager=new hL,this.remoteDocumentCache=function(a){return new wL(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new uL(n),this.Ii=new NL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SL(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ee("MemoryPersistence","Starting transaction:",e);const a=new RL(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class RL extends ak{constructor(e){super(),this.currentSequenceNumber=e}}class Bx{constructor(e){this.persistence=e,this.Ri=new Gx,this.Vi=null}static mi(e){return new Bx(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,s=>{const a=se.fromPath(s);return this.gi(e,a).next(i=>{i||n.removeEntry(a,he.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jm{constructor(e,n){this.persistence=e,this.pi=new gr(s=>ok(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=yL(this,n)}static mi(e,n){return new jm(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(s,a)=>this.br(e,s,a).next(i=>i?$.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mu(e.data.value)),n}br(e,n,s){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return $.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Ce(),a=Ce();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new qx(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return d4()?8:ik(sn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,a,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new jL;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,a){return s.documentReadCount<this.fs?(Ir()<=Ee.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Rr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ir()<=Ee.DEBUG&&ee("QueryEngine","Query:",Rr(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Ir()<=Ee.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Rr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(n))):$.resolve())}ys(e,n){if(Z_(n))return $.resolve(null);let s=Ms(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=wm(n,null,"F"),s=Ms(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Ce(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,wm(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,s,a){return Z_(n)||a.isEqual(he.min())?$.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,a)?$.resolve(null):(Ir()<=Ee.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Rr(n)),this.vs(e,o,n,ek(a,Dc)).next(l=>l))})}Ds(e,n){let s=new jt(h2(e));return n.forEach((a,i)=>{Nh(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,n,s){return Ir()<=Ee.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Rr(n)),this.ps.getDocumentsMatchingQuery(e,n,gi.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LocalStore",PL=3e8;class DL{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new lt(Ne),this.xs=new gr(i=>Lx(i),Vx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function kL(t,e,n,s){return new DL(t,e,n,s)}async function V2(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(i=>(a=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Ce();for(const d of a){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function LL(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,m){const p=d.batch,g=p.keys();let x=$.resolve();return g.forEach(y=>{x=x.next(()=>m.getEntry(c,y)).next(T=>{const A=d.docVersions.get(y);Ve(A!==null,48541),T.version.compareTo(A)<0&&(p.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),m.addEntry(T)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function U2(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function VL(t,e){const n=fe(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=a.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(Ft.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,s)),a=a.insert(p,x),function(T,A,b){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=PL?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,x,m)&&l.push(n.Pi.updateTargetData(i,x))});let c=ya(),d=Ce();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(UL(i,o,e.documentUpdates).next(m=>{c=m.ks,d=m.qs})),!s.isEqual(he.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(m)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=a,i))}function UL(t,e,n){let s=Ce(),a=Ce();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=ya();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ee(Hx,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:a}})}function OL(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Px),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zL(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Pi.getTargetData(s,e).next(i=>i?(a=i,$.resolve(a)):n.Pi.allocateTargetId(s).next(o=>(a=new Qa(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function zg(t,e,n){const s=fe(t),a=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Wo(o))throw o;ee(Hx,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function mE(t,e,n){const s=fe(t);let a=he.min(),i=Ce();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const p=fe(c),g=p.xs.get(m);return g!==void 0?$.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(s,o,Ms(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?a:he.min(),n?i:Ce())).next(l=>(FL(s,Sk(e),l),{documents:l,Qs:i})))}function FL(t,e,n){let s=t.Os.get(e)||he.min();n.forEach((a,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class hE{constructor(){this.activeTargetIds=Mk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GL{constructor(){this.Mo=new hE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="ConnectivityMonitor";class pE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(fE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(fE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd=null;function Fg(){return Zd===null?Zd=function(){return 268435456+Math.round(2147483648*Math.random())}():Zd++,"0x"+Zd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="RestConnection",qL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Cm?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,i){const o=Fg(),l=this.zo(e,n.toUriEncodedString());ee(hp,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,i);const{host:d}=new URL(l),m=Yo(d);return this.Jo(e,l,c,s,m).then(p=>(ee(hp,`Received RPC '${e}' ${o}: `,p),p),p=>{throw lr(hp,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,a,i,o){return this.Go(e,n,s,a,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,i)=>e[i]=a),s&&s.headers.forEach((a,i)=>e[i]=a)}zo(e,n){const s=qL[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class YL extends HL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,i){const o=Fg();return new Promise((l,c)=>{const d=new UA;d.setWithCredentials(!0),d.listenOnce(OA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ju.NO_ERROR:const p=d.getResponseJson();ee(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case ju.TIMEOUT:ee(Wt,`RPC '${e}' ${o} timed out`),c(new W(q.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const g=d.getStatus();if(ee(Wt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const T=function(b){const N=b.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(N)>=0?N:q.UNKNOWN}(y.status);c(new W(T,y.message))}else c(new W(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new W(q.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ee(Wt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(a);ee(Wt,`RPC '${e}' ${o} sending request:`,a),d.send(n,"POST",m,s,15)})}T_(e,n,s){const a=Fg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GA(),l=FA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const m=i.join("");ee(Wt,`Creating RPC '${e}' stream ${a}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,x=!1;const y=new $L({Yo:A=>{x?ee(Wt,`Not sending because RPC '${e}' stream ${a} is closed:`,A):(g||(ee(Wt,`Opening RPC '${e}' stream ${a} transport.`),p.open(),g=!0),ee(Wt,`RPC '${e}' stream ${a} sending:`,A),p.send(A))},Zo:()=>p.close()}),T=(A,b,N)=>{A.listen(b,S=>{try{N(S)}catch(D){setTimeout(()=>{throw D},0)}})};return T(p,ql.EventType.OPEN,()=>{x||(ee(Wt,`RPC '${e}' stream ${a} transport opened.`),y.o_())}),T(p,ql.EventType.CLOSE,()=>{x||(x=!0,ee(Wt,`RPC '${e}' stream ${a} transport closed`),y.a_(),this.E_(p))}),T(p,ql.EventType.ERROR,A=>{x||(x=!0,lr(Wt,`RPC '${e}' stream ${a} transport errored. Name:`,A.name,"Message:",A.message),y.a_(new W(q.UNAVAILABLE,"The operation could not be completed")))}),T(p,ql.EventType.MESSAGE,A=>{var b;if(!x){const N=A.data[0];Ve(!!N,16349);const S=N,D=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(D){ee(Wt,`RPC '${e}' stream ${a} received error:`,D);const V=D.status;let k=function(I){const C=_t[I];if(C!==void 0)return T2(C)}(V),R=D.message;k===void 0&&(k=q.INTERNAL,R="Unknown error status: "+V+" with message "+D.message),x=!0,y.a_(new W(k,R)),p.close()}else ee(Wt,`RPC '${e}' stream ${a} received:`,N),y.u_(N)}}),T(l,zA.STAT_EVENT,A=>{A.stat===Ig.PROXY?ee(Wt,`RPC '${e}' stream ${a} detected buffering proxy`):A.stat===Ig.NOPROXY&&ee(Wt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return new Xk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,s=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="PersistentStream";class z2{constructor(e,n,s,a,i,o,l,c){this.Mi=e,this.S_=s,this.b_=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(va(n.toString()),va("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===n&&this.G_(s,a)},s=>{e(()=>{const a=new W(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(gE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ee(gE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JL extends z2{constructor(e,n,s,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eL(this.serializer,e),s=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Ps(o.readTime):he.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Og(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Dg(c)?{documents:sL(i,c)}:{query:aL(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=A2(i,o.resumeToken);const d=Lg(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=Rm(i,o.snapshotVersion.toTimestamp());const d=Lg(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=rL(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Og(this.serializer),n.removeTarget=e,this.q_(n)}}class KL extends z2{constructor(e,n,s,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nL(e.writeResults,e.commitTime),s=Ps(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Og(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>tL(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{}class XL extends QL{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new W(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Vg(n,s),a,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(q.UNKNOWN,i.toString())})}Ho(e,n,s,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Vg(n,s),a,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class WL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(va(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="RemoteStore";class ZL{constructor(e,n,s,a,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{xr(this)&&(ee(cr,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.Ea.add(4),await md(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ih(d)}(this))})}),this.Ra=new WL(s,a)}}async function Ih(t){if(xr(t))for(const e of t.da)await e(!0)}async function md(t){for(const e of t.da)await e(!1)}function F2(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kx(n)?Jx(n):el(n).O_()&&Yx(n,e))}function $x(t,e){const n=fe(t),s=el(n);n.Ia.delete(e),s.O_()&&G2(n,e),n.Ia.size===0&&(s.O_()?s.L_():xr(n)&&n.Ra.set("Unknown"))}function Yx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(t).Y_(e)}function G2(t,e){t.Va.Ue(e),el(t).Z_(e)}function Jx(t){t.Va=new Yk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),el(t).start(),t.Ra.ua()}function Kx(t){return xr(t)&&!el(t).x_()&&t.Ia.size>0}function xr(t){return fe(t).Ea.size===0}function B2(t){t.Va=void 0}async function eV(t){t.Ra.set("Online")}async function tV(t){t.Ia.forEach((e,n)=>{Yx(t,e)})}async function nV(t,e){B2(t),Kx(t)?(t.Ra.ha(e),Jx(t)):t.Ra.set("Unknown")}async function sV(t,e,n){if(t.Ra.set("Online"),e instanceof w2&&e.state===2&&e.cause)try{await async function(a,i){const o=i.cause;for(const l of i.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(t,e)}catch(s){ee(cr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Mm(t,s)}else if(e instanceof ku?t.Va.Ze(e):e instanceof S2?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const s=await U2(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(Ft.EMPTY_BYTE_STRING,m.snapshotVersion)),G2(i,c);const p=new Qa(m.target,c,d,m.sequenceNumber);Yx(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ee(cr,"Failed to raise snapshot:",s),await Mm(t,s)}}async function Mm(t,e,n){if(!Wo(e))throw e;t.Ea.add(1),await md(t),t.Ra.set("Offline"),n||(n=()=>U2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(cr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ih(t)})}function q2(t,e){return e().catch(n=>Mm(t,n,e))}async function Rh(t){const e=fe(t),n=bi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Px;for(;aV(e);)try{const a=await OL(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,iV(e,a)}catch(a){await Mm(e,a)}H2(e)&&$2(e)}function aV(t){return xr(t)&&t.Ta.length<10}function iV(t,e){t.Ta.push(e);const n=bi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function H2(t){return xr(t)&&!bi(t).x_()&&t.Ta.length>0}function $2(t){bi(t).start()}async function rV(t){bi(t).ra()}async function oV(t){const e=bi(t);for(const n of t.Ta)e.ea(n.mutations)}async function lV(t,e,n){const s=t.Ta.shift(),a=Ox.from(s,e,n);await q2(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Rh(t)}async function cV(t,e){e&&bi(t).X_&&await async function(s,a){if(function(o){return qk(o)&&o!==q.ABORTED}(a.code)){const i=s.Ta.shift();bi(s).B_(),await q2(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Rh(s)}}(t,e),H2(t)&&$2(t)}async function xE(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ee(cr,"RemoteStore received new credentials");const s=xr(n);n.Ea.add(3),await md(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ih(n)}async function dV(t,e){const n=fe(t);e?(n.Ea.delete(2),await Ih(n)):e||(n.Ea.add(2),await md(n),n.Ra.set("Unknown"))}function el(t){return t.ma||(t.ma=function(n,s,a){const i=fe(n);return i.sa(),new JL(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:eV.bind(null,t),t_:tV.bind(null,t),r_:nV.bind(null,t),H_:sV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Kx(t)?Jx(t):t.Ra.set("Unknown")):(await t.ma.stop(),B2(t))})),t.ma}function bi(t){return t.fa||(t.fa=function(n,s,a){const i=fe(n);return i.sa(),new KL(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:rV.bind(null,t),r_:cV.bind(null,t),ta:oV.bind(null,t),na:lV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rh(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(cr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,s,a,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=i,this.deferred=new oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,i){const o=Date.now()+s,l=new Qx(e,n,o,a,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xx(t,e){if(va("AsyncQueue",`${e}: ${t}`),Wo(t))return new W(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||se.comparator(n.key,s.key):(n,s)=>se.comparator(n.key,s.key),this.keyedMap=Hl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=s.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ro;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.ga=new lt(se.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Mo{constructor(e,n,s,a,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,a,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Mo(e,n,ro.emptySet(n),o,s,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class mV{constructor(){this.queries=yE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=fe(n),i=a.queries;a.queries=yE(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new W(q.ABORTED,"Firestore shutting down"))}}function yE(){return new gr(t=>m2(t),Eh)}async function Wx(t,e){const n=fe(t);let s=3;const a=e.query;let i=n.queries.get(a);i?!i.ba()&&e.Da()&&(s=2):(i=new uV,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(o){const l=Xx(o,`Initialization of query '${Rr(e.query)}' failed`);return void e.onError(l)}n.queries.set(a,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ev(n)}async function Zx(t,e){const n=fe(t),s=e.query;let a=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function hV(t,e){const n=fe(t);let s=!1;for(const a of e){const i=a.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(a)&&(s=!0);o.wa=a}}s&&ev(n)}function fV(t,e,n){const s=fe(t),a=s.queries.get(e);if(a)for(const i of a.Sa)i.onError(n);s.queries.delete(e)}function ev(t){t.Ca.forEach(e=>{e.next()})}var Gg,bE;(bE=Gg||(Gg={})).Ma="default",bE.Cache="cache";class tv{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.key=e}}class J2{constructor(e){this.key=e}}class pV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=h2(e),this.tu=new ro(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new vE,a=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,d=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((m,p)=>{const g=a.get(m),x=Nh(this.query,p)?p:null,y=!!g&&this.mutatedKeys.has(g.key),T=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;g&&x?g.data.isEqual(x.data)?y!==T&&(s.track({type:3,doc:x}),A=!0):this.su(g,x)||(s.track({type:2,doc:x}),A=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!g&&x?(s.track({type:0,doc:x}),A=!0):g&&!x&&(s.track({type:1,doc:g}),A=!0,(c||d)&&(l=!0)),A&&(x?(o=o.add(x),i=T?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(x,y){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:A})}};return T(x)-T(y)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(s),a=a??!1;const l=n&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Mo(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new J2(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new Y2(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nv="SyncEngine";class gV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class xV{constructor(e){this.key=e,this.hu=!1}}class vV{constructor(e,n,s,a,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new gr(l=>m2(l),Eh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(se.comparator),this.Au=new Map,this.Ru=new Gx,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yV(t,e,n=!0){const s=eI(t);let a;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await K2(s,e,n,!0),a}async function bV(t,e){const n=eI(t);await K2(n,e,!0,!1)}async function K2(t,e,n,s){const a=await zL(t.localStore,Ms(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await _V(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&n&&F2(t.remoteStore,a),l}async function _V(t,e,n,s,a){t.pu=(p,g,x)=>async function(T,A,b,N){let S=A.view.ru(b);S.Cs&&(S=await mE(T.localStore,A.query,!1).then(({documents:R})=>A.view.ru(R,S)));const D=N&&N.targetChanges.get(A.targetId),V=N&&N.targetMismatches.get(A.targetId)!=null,k=A.view.applyChanges(S,T.isPrimaryClient,D,V);return EE(T,A.targetId,k.au),k.snapshot}(t,p,g,x);const i=await mE(t.localStore,e,!0),o=new pV(e,i.Qs),l=o.ru(i.documents),c=ud.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),d=o.applyChanges(l,t.isPrimaryClient,c);EE(t,n,d.au);const m=new gV(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function EV(t,e,n){const s=fe(t),a=s.Tu.get(e),i=s.Iu.get(a.targetId);if(i.length>1)return s.Iu.set(a.targetId,i.filter(o=>!Eh(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await zg(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&$x(s.remoteStore,a.targetId),Bg(s,a.targetId)}).catch(Xo)):(Bg(s,a.targetId),await zg(s.localStore,a.targetId,!0))}async function NV(t,e){const n=fe(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$x(n.remoteStore,s.targetId))}async function CV(t,e,n){const s=jV(t);try{const a=await function(o,l){const c=fe(o),d=Pe.now(),m=l.reduce((x,y)=>x.add(y.key),Ce());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let y=ya(),T=Ce();return c.Ns.getEntries(x,m).next(A=>{y=A,y.forEach((b,N)=>{N.isValidDocument()||(T=T.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,y)).next(A=>{p=A;const b=[];for(const N of l){const S=Ok(N,p.get(N.key).overlayedDocument);S!=null&&b.push(new Ii(N.key,S,a2(S.value.mapValue),dn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,b,l)}).next(A=>{g=A;const b=A.applyToLocalDocumentSet(p,T);return c.documentOverlayCache.saveOverlays(x,A.batchId,b)})}).then(()=>({batchId:g.batchId,changes:p2(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new lt(Ne)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(s,a.batchId,n),await hd(s,a.changes),await Rh(s.remoteStore)}catch(a){const i=Xx(a,"Failed to persist write");n.reject(i)}}async function Q2(t,e){const n=fe(t);try{const s=await VL(n.localStore,e);e.targetChanges.forEach((a,i)=>{const o=n.Au.get(i);o&&(Ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?Ve(o.hu,14607):a.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))}),await hd(n,s,e)}catch(s){await Xo(s)}}function _E(t,e,n){const s=fe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let d=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&ev(c)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function TV(t,e,n){const s=fe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),i=a&&a.key;if(i){let o=new lt(se.comparator);o=o.insert(i,en.newNoDocument(i,he.min()));const l=Ce().add(i),c=new wh(he.min(),new Map,new lt(Ne),o,l);await Q2(s,c),s.du=s.du.remove(i),s.Au.delete(e),sv(s)}else await zg(s.localStore,e,!1).then(()=>Bg(s,e,n)).catch(Xo)}async function SV(t,e){const n=fe(t),s=e.batch.batchId;try{const a=await LL(n.localStore,e);W2(n,s,null),X2(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await hd(n,a)}catch(a){await Xo(a)}}async function wV(t,e,n){const s=fe(t);try{const a=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Ve(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(s.localStore,e);W2(s,e,n),X2(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await hd(s,a)}catch(a){await Xo(a)}}function X2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function W2(t,e,n){const s=fe(t);let a=s.Vu[s.currentUser.toKey()];if(a){const i=a.get(e);i&&(n?i.reject(n):i.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Bg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||Z2(t,s)})}function Z2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($x(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sv(t))}function EE(t,e,n){for(const s of n)s instanceof Y2?(t.Ru.addReference(s.key,e),AV(t,s)):s instanceof J2?(ee(nv,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Z2(t,s.key)):le(19791,{wu:s})}function AV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ee(nv,"New document in limbo: "+n),t.Eu.add(s),sv(t))}function sv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se(He.fromString(e)),s=t.fu.next();t.Au.set(s,new xV(n)),t.du=t.du.insert(n,s),F2(t.remoteStore,new Qa(Ms(_h(n.path)),s,"TargetPurposeLimboResolution",vh.ce))}}async function hd(t,e,n){const s=fe(t),a=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(d=>{var m;if((d||n)&&s.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){a.push(d);const p=qx.As(c.targetId,d);i.push(p)}}))}),await Promise.all(o),s.Pu.H_(a),await async function(c,d){const m=fe(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(d,g=>$.forEach(g.Es,x=>m.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>$.forEach(g.ds,x=>m.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!Wo(p))throw p;ee(Hx,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=m.Ms.get(g),y=x.snapshotVersion,T=x.withLastLimboFreeSnapshotVersion(y);m.Ms=m.Ms.insert(g,T)}}}(s.localStore,i))}async function IV(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ee(nv,"User change. New user:",e.toKey());const s=await V2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await hd(n,s.Ls)}}function RV(t,e){const n=fe(t),s=n.Au.get(e);if(s&&s.hu)return Ce().add(s.key);{let a=Ce();const i=n.Iu.get(e);if(!i)return a;for(const o of i){const l=n.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function eI(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TV.bind(null,e),e.Pu.H_=hV.bind(null,e.eventManager),e.Pu.yu=fV.bind(null,e.eventManager),e}function jV(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wV.bind(null,e),e}class Pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kL(this.persistence,new ML,e.initialUser,this.serializer)}Cu(e){return new L2(Bx.mi,this.serializer)}Du(e){return new GL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pm.provider={build:()=>new Pm};class MV extends Pm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof jm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xL(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new L2(s=>jm.mi(s,n),this.serializer)}}class qg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_E(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=IV.bind(null,this.syncEngine),await dV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mV}()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),s=function(i){return new YL(i)}(e.databaseInfo);return function(i,o,l,c){return new XL(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,i,o,l){return new ZL(s,a,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>_E(this.syncEngine,n,0),function(){return pE.v()?new pE:new BL}())}createSyncEngine(e,n){return function(a,i,o,l,c,d,m){const p=new vV(a,i,o,l,c,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const i=fe(a);ee(cr,"RemoteStore shutting down."),i.Ea.add(5),await md(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qg.provider={build:()=>new qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):va("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="FirestoreClient";class PV{constructor(e,n,s,a,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Zt.UNAUTHENTICATED,this.clientId=gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ee(_i,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ee(_i,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Xx(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function pp(t,e){t.asyncQueue.verifyOperationInProgress(),ee(_i,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async a=>{s.isEqual(a)||(await V2(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DV(t);ee(_i,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>xE(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,a)=>xE(e.remoteStore,a)),t._onlineComponents=e}async function DV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(_i,"Using user provided OfflineComponentProvider");try{await pp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===q.FAILED_PRECONDITION||a.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;lr("Error using user provided cache. Falling back to memory cache: "+n),await pp(t,new Pm)}}else ee(_i,"Using default OfflineComponentProvider"),await pp(t,new MV(void 0));return t._offlineComponents}async function tI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(_i,"Using user provided OnlineComponentProvider"),await NE(t,t._uninitializedComponentsProvider._online)):(ee(_i,"Using default OnlineComponentProvider"),await NE(t,new qg))),t._onlineComponents}function kV(t){return tI(t).then(e=>e.syncEngine)}async function Dm(t){const e=await tI(t),n=e.eventManager;return n.onListen=yV.bind(null,e.syncEngine),n.onUnlisten=EV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NV.bind(null,e.syncEngine),n}function LV(t,e,n={}){const s=new oa;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new av({next:g=>{m.Nu(),o.enqueueAndForget(()=>Zx(i,p));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new W(q.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&c&&c.source==="server"?d.reject(new W(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new tv(_h(l.path),m,{includeMetadataChanges:!0,qa:!0});return Wx(i,p)}(await Dm(t),t.asyncQueue,e,n,s)),s.promise}function VV(t,e,n={}){const s=new oa;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new av({next:g=>{m.Nu(),o.enqueueAndForget(()=>Zx(i,p)),g.fromCache&&c.source==="server"?d.reject(new W(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new tv(l,m,{includeMetadataChanges:!0,qa:!0});return Wx(i,p)}(await Dm(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firestore.googleapis.com",TE=!0;class SE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sI,this.ssl=TE}else this.host=e.host,this.ssl=e.ssl??TE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pL)throw new W(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nI(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new HA;switch(s.type){case"firstParty":return new Y6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new W(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=CE.get(n);s&&(ee("ComponentProvider","Removing Datastore"),CE.delete(n),s.terminate())}(this),Promise.resolve()}}function aI(t,e,n,s={}){var d;t=nn(t,jh);const a=Yo(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;a&&(Qw(`https://${l}`),Xw("Firestore",!0)),i.host!==sI&&i.host!==l&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:a,emulatorOptions:s};if(!pa(c,o)&&(t._setSettings(c),s.mockUserToken)){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=Zt.MOCK_USER;else{m=t4(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new W(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Zt(g)}t._authCredentials=new q6(new qA(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zs(this.firestore,e,this._query)}}class ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(cd(n,ot._jsonSchema))return new ot(e,s||null,new se(He.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:wt("string",ot._jsonSchemaVersion),referencePath:wt("string")};class la extends zs{constructor(e,n,s){super(e,n,_h(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new se(e))}withConverter(e){return new la(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=vt(t),$A("collection","path",e),t instanceof jh){const s=He.fromString(e,...n);return O_(s),new la(t,null,s)}{if(!(t instanceof ot||t instanceof la))throw new W(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return O_(s),new la(t.firestore,null,s)}}function re(t,e,...n){if(t=vt(t),arguments.length===1&&(e=gh.newId()),$A("doc","path",e),t instanceof jh){const s=He.fromString(e,...n);return U_(s),new ot(t,null,new se(s))}{if(!(t instanceof ot||t instanceof la))throw new W(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return U_(s),new ot(t.firestore,t instanceof la?t.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="AsyncQueue";class AE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O2(this,"async_queue_retry"),this._c=()=>{const s=fp();s&&ee(wE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new oa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wo(e))throw e;ee(wE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,va("INTERNAL UNHANDLED ERROR: ",IE(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Qx.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&le(47125,{Pc:IE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function IE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const i of s)if(i in a&&typeof a[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gs extends jh{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new AE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AE(e),this._firestoreClient=void 0,await e}}}function iI(t,e){const n=typeof t=="object"?t:tA(),s=typeof t=="string"?t:Cm,a=_x(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const i=ZD("firestore");i&&aI(a,...i)}return a}function tl(t){if(t._terminated)throw new W(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UV(t),t._firestoreClient}function UV(t){var s,a,i;const e=t._freezeSettings(),n=function(l,c,d,m){return new dk(l,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,nI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(Ft.fromBase64String(e))}catch(n){throw new W(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cd(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:wt("string",wn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(cd(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:wt("string",ds._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cd(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new us(e.vectorValues);throw new W(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:wt("string",us._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=/^__.*__$/;class zV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new dd(e,this.data,n,this.fieldTransforms)}}class rI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class Mh{constructor(e,n,s,a,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return km(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oI(this.Ac)&&OV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ah(e)}Cc(e,n,s,a=!1){return new Mh({Ac:e,methodName:n,Dc:s,path:Ot.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(t){const e=t._freezeSettings(),n=Ah(t._databaseId);return new FV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iv(t,e,n,s,a,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,a);lv("Data must be an object, but it was:",o,s);const l=uI(s,o);let c,d;if(i.merge)c=new In(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Hg(e,p,n);if(!o.contains(g))throw new W(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);hI(m,g)||m.push(g)}c=new In(m),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new zV(new vn(l),c,d)}class Ph extends sl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ph}}function lI(t,e,n){return new Mh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rv extends sl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=lI(this,e,!0),s=this.vc.map(i=>vr(i,n)),a=new Io(s);return new E2(e.path,a)}isEqual(e){return e instanceof rv&&pa(this.vc,e.vc)}}class ov extends sl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=lI(this,e,!0),s=this.vc.map(i=>vr(i,n)),a=new Ro(s);return new E2(e.path,a)}isEqual(e){return e instanceof ov&&pa(this.vc,e.vc)}}function cI(t,e,n,s){const a=t.Cc(1,e,n);lv("Data must be an object, but it was:",a,s);const i=[],o=vn.empty();Ai(s,(c,d)=>{const m=cv(e,c,n);d=vt(d);const p=a.yc(m);if(d instanceof Ph)i.push(m);else{const g=vr(d,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new In(i);return new rI(o,l,a.fieldTransforms)}function dI(t,e,n,s,a,i){const o=t.Cc(1,e,n),l=[Hg(e,s,n)],c=[a];if(i.length%2!=0)throw new W(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Hg(e,i[g])),c.push(i[g+1]);const d=[],m=vn.empty();for(let g=l.length-1;g>=0;--g)if(!hI(d,l[g])){const x=l[g];let y=c[g];y=vt(y);const T=o.yc(x);if(y instanceof Ph)d.push(x);else{const A=vr(y,T);A!=null&&(d.push(x),m.set(x,A))}}const p=new In(d);return new rI(m,p,o.fieldTransforms)}function GV(t,e,n,s=!1){return vr(n,t.Cc(s?4:3,e))}function vr(t,e){if(mI(t=vt(t)))return lv("Unsupported field value:",e,t),uI(t,e);if(t instanceof sl)return function(s,a){if(!oI(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const i=[];let o=0;for(const l of s){let c=vr(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,a){if((s=vt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Pk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Pe.fromDate(s);return{timestampValue:Rm(a.serializer,i)}}if(s instanceof Pe){const i=new Pe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Rm(a.serializer,i)}}if(s instanceof ds)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wn)return{bytesValue:A2(a.serializer,s._byteString)};if(s instanceof ot){const i=a.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fx(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof us)return function(o,l){return{mapValue:{fields:{[n2]:{stringValue:s2},[Tm]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ux(l.serializer,d)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${xh(s)}`)}(t,e)}function uI(t,e){const n={};return QA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,(s,a)=>{const i=vr(a,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function mI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof ds||t instanceof wn||t instanceof ot||t instanceof sl||t instanceof us)}function lv(t,e,n){if(!mI(n)||!JA(n)){const s=xh(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Hg(t,e,n){if((e=vt(e))instanceof nl)return e._internalPath;if(typeof e=="string")return cv(t,e);throw km("Field path arguments must be of type string or ",t,!1,void 0,n)}const BV=new RegExp("[~\\*/\\[\\]]");function cv(t,e,n){if(e.search(BV)>=0)throw km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nl(...e.split("."))._internalPath}catch{throw km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function km(t,e,n,s,a){const i=s&&!s.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${a}`),c+=")"),new W(q.INVALID_ARGUMENT,l+t+c)}function hI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,s,a,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qV extends fI{data(){return super.data()}}function Dh(t,e){return typeof e=="string"?cv(t,e):e instanceof nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dv{}class kh extends dv{}function $e(t,e,...n){let s=[];e instanceof dv&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Lh).length,l=i.filter(c=>c instanceof pd).length;if(o>1||o>0&&l>0)throw new W(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)t=a._apply(t);return t}class pd extends kh{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new pd(e,n,s)}_apply(e){const n=this._parse(e);return gI(e._query,n),new zs(e.firestore,e.converter,kg(e._query,n))}_parse(e){const n=fd(e.firestore);return function(i,o,l,c,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new W(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){ME(p,m);const y=[];for(const T of p)y.push(jE(c,i,T));g={arrayValue:{values:y}}}else g=jE(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||ME(p,m),g=GV(l,o,p,m==="in"||m==="not-in");return Tt.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ze(t,e,n){const s=e,a=Dh("where",t);return pd._create(a,s,n)}class Lh extends dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,i){let o=a;const l=i.getFlattenedFilters();for(const c of l)gI(o,c),o=kg(o,c)}(e._query,n),new zs(e.firestore,e.converter,kg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vh extends kh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vh(e,n)}_apply(e){const n=function(a,i,o){if(a.startAt!==null)throw new W(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new W(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(i,o)}(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,function(a,i){const o=a.explicitOrderBy.concat([i]);return new Zo(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function Ds(t,e="asc"){const n=e,s=Dh("orderBy",t);return Vh._create(s,n)}class Uh extends kh{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Uh(e,n,s)}_apply(e){return new zs(e.firestore,e.converter,wm(e._query,this._limit,this._limitType))}}function oo(t){return Z6("limit",t),Uh._create("limit",t,"F")}function jE(t,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new W(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u2(e)&&n.indexOf("/")!==-1)throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(He.fromString(n));if(!se.isDocumentKey(s))throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Y_(t,new se(s))}if(n instanceof ot)return Y_(t,n._key);throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(n)}.`)}function ME(t,e){if(!Array.isArray(t)||t.length===0)throw new W(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gI(t,e){const n=function(a,i){for(const o of a)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xI{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ai(e,(a,i)=>{s[a]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,a,i;const n=(i=(a=(s=e.fields)==null?void 0:s[Tm].arrayValue)==null?void 0:a.values)==null?void 0:i.map(o=>ft(o.doubleValue));return new us(n)}convertGeoPoint(e){return new ds(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=bh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const n=xi(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);Ve(D2(s),9688,{name:e});const a=new So(s.get(1),s.get(3)),i=new se(s.popFirst(5));return a.isEqual(n)||va(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Yr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class di extends fI{constructor(e,n,s,a,i,o){super(e,n,s,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Dh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:wt("string",di._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class pc extends di{data(e={}){return super.data(e)}}class ui{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Yr(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new pc(this._firestore,this._userDataWriter,s.key,s,new Yr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new pc(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Yr(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new pc(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Yr(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:HV(l.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ui._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t){t=nn(t,ot);const e=nn(t.firestore,gs);return LV(tl(e),t._key).then(n=>yI(e,t,n))}ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:wt("string",ui._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class mv extends xI{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function je(t){t=nn(t,zs);const e=nn(t.firestore,gs),n=tl(e),s=new mv(e);return pI(t._query),VV(n,t._query).then(a=>new ui(e,s,t,a))}function dr(t,e,n){t=nn(t,ot);const s=nn(t.firestore,gs),a=uv(t.converter,e,n);return al(s,[iv(fd(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,dn.none())])}function xt(t,e,n,...s){t=nn(t,ot);const a=nn(t.firestore,gs),i=fd(a);let o;return o=typeof(e=vt(e))=="string"||e instanceof nl?dI(i,"updateDoc",t._key,e,n,s):cI(i,"updateDoc",t._key,e),al(a,[o.toMutation(t._key,dn.exists(!0))])}function xs(t){return al(nn(t.firestore,gs),[new Sh(t._key,dn.none())])}function es(t,e){const n=nn(t.firestore,gs),s=re(t),a=uv(t.converter,e);return al(n,[iv(fd(t.firestore),"addDoc",s._key,a,t.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then(()=>s)}function vI(t,...e){var c,d,m;t=vt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||RE(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(RE(e[s])){const p=e[s];e[s]=(c=p.next)==null?void 0:c.bind(p),e[s+1]=(d=p.error)==null?void 0:d.bind(p),e[s+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof ot)o=nn(t.firestore,gs),l=_h(t._key.path),i={next:p=>{e[s]&&e[s](yI(o,t,p))},error:e[s+1],complete:e[s+2]};else{const p=nn(t,zs);o=nn(p.firestore,gs),l=p._query;const g=new mv(o);i={next:x=>{e[s]&&e[s](new ui(o,g,p,x))},error:e[s+1],complete:e[s+2]},pI(t._query)}return function(g,x,y,T){const A=new av(T),b=new tv(x,A,y);return g.asyncQueue.enqueueAndForget(async()=>Wx(await Dm(g),b)),()=>{A.Nu(),g.asyncQueue.enqueueAndForget(async()=>Zx(await Dm(g),b))}}(tl(o),l,a,i)}function al(t,e){return function(s,a){const i=new oa;return s.asyncQueue.enqueueAndForget(async()=>CV(await kV(s),a,i)),i.promise}(tl(t),e)}function yI(t,e,n){const s=n.docs.get(e._key),a=new mv(t);return new di(t,a,e._key,s,new Yr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=fd(e)}set(e,n,s){this._verifyNotCommitted();const a=gp(e,this._firestore),i=uv(a.converter,n,s),o=iv(this._dataReader,"WriteBatch.set",a._key,i,a.converter!==null,s);return this._mutations.push(o.toMutation(a._key,dn.none())),this}update(e,n,s,...a){this._verifyNotCommitted();const i=gp(e,this._firestore);let o;return o=typeof(n=vt(n))=="string"||n instanceof nl?dI(this._dataReader,"WriteBatch.update",i._key,n,s,a):cI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gp(e,this._firestore);return this._mutations=this._mutations.concat(new Sh(n._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gp(t,e){if((t=vt(t)).firestore!==e)throw new W(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function hv(...t){return new rv("arrayUnion",t)}function _I(...t){return new ov("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t){return tl(t=nn(t,gs)),new bI(t,e=>al(t,e))}(function(e,n=!0){(function(a){Qo=a})(Jo),Co(new ar("firestore",(s,{instanceIdentifier:a,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new gs(new H6(s.getProvider("auth-internal")),new J6(o,s.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(d.options.projectId,m)}(o,a),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),li(D_,k_,e),li(D_,k_,"esm2020")})();const $V=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xI,Bytes:wn,CollectionReference:la,DocumentReference:ot,DocumentSnapshot:di,FieldPath:nl,FieldValue:sl,Firestore:gs,FirestoreError:W,GeoPoint:ds,Query:zs,QueryCompositeFilterConstraint:Lh,QueryConstraint:kh,QueryDocumentSnapshot:pc,QueryFieldFilterConstraint:pd,QueryLimitConstraint:Uh,QueryOrderByConstraint:Vh,QuerySnapshot:ui,SnapshotMetadata:Yr,Timestamp:Pe,VectorValue:us,WriteBatch:bI,_AutoId:gh,_ByteString:Ft,_DatabaseId:So,_DocumentKey:se,_EmptyAuthCredentialsProvider:HA,_FieldPath:Ot,_cast:nn,_logWarn:lr,_validateIsNotUsedTogether:YA,addDoc:es,arrayRemove:_I,arrayUnion:hv,collection:ue,connectFirestoreEmulator:aI,deleteDoc:xs,doc:re,ensureFirestoreConfigured:tl,executeWrite:al,getDoc:kn,getDocs:je,getFirestore:iI,limit:oo,onSnapshot:vI,orderBy:Ds,query:$e,setDoc:dr,updateDoc:xt,where:Ze,writeBatch:EI},Symbol.toStringTag,{value:"Module"}));var YV="firebase",JV="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(YV,JV,"app");const KV={apiKey:"AIzaSyC-Ry46hCfXxez-lfA5ZX792AOIbmOc6Vw",authDomain:"eduplanmx.firebaseapp.com",projectId:"eduplanmx",storageBucket:"eduplanmx.firebasestorage.app",messagingSenderId:"144677335686",appId:"1:144677335686:web:cd82543b32b323e3ea5707"},NI=eA(KV),J=iI(NI),Va=G6(NI),CI=Object.freeze(Object.defineProperty({__proto__:null,auth:Va,db:J},Symbol.toStringTag,{value:"Module"})),eu="users";class QV{async login(e){try{const n=await w3(Va,e.email,e.password),s=await this.getUserData(n.user.uid);if(!s)throw new Error("Usuario no encontrado en la base de datos");if(!s.activo)throw new Error("Usuario inactivo. Contacta al administrador.");return await this.updateLastAccess(n.user.uid),s}catch(n){throw console.error("Error en login:",n),n.code==="auth/user-not-found"?new Error("Usuario no encontrado"):n.code==="auth/wrong-password"?new Error("Contrasea incorrecta"):n.code==="auth/invalid-email"?new Error("Email invlido"):n.code==="auth/user-disabled"?new Error("Usuario deshabilitado"):n}}async logout(){try{await j3(Va)}catch(e){throw console.error("Error en logout:",e),new Error("Error al cerrar sesin")}}async loginWithGoogle(){var e;try{const n=new Qs;n.setCustomParameters({prompt:"select_account"});const a=(await X3(Va,n)).user;let i=await this.getUserData(a.uid);if(!i){const o=((e=a.displayName)==null?void 0:e.split(" "))||["Usuario","Google"],l=o[0]||"Usuario",c=o[1]||"Google",d=o[2]||"";i={id:a.uid,email:a.email||"",nombre:l,apellidoPaterno:c,apellidoMaterno:d,rol:"maestro",activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),creadoPor:"google-auth"},await dr(re(J,eu,a.uid),i),console.log(" Nuevo usuario creado desde Google:",i.email)}if(i.activo===!1)throw console.error(" Acceso denegado: Usuario inactivo en Firestore",i),new Error("Usuario inactivo. Contacta al administrador.");return await this.updateLastAccess(a.uid),i}catch(n){throw console.error("Error en login con Google:",n),n.code==="auth/popup-closed-by-user"?new Error("Inicio de sesin cancelado"):n.code==="auth/popup-blocked"?new Error("Popup bloqueado. Permite popups para este sitio."):n.code==="auth/cancelled-popup-request"?new Error("Inicio de sesin cancelado"):n}}async register(e,n){try{const s=await S3(Va,e.email,e.password),a={id:s.user.uid,email:e.email,nombre:e.nombre,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,rol:e.rol,institucionId:e.institucionId,gruposAsignados:[],activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),creadoPor:n};return await dr(re(J,eu,s.user.uid),a),a}catch(s){throw console.error("Error en registro:",s),s.code==="auth/email-already-in-use"?new Error("El email ya est registrado"):s.code==="auth/weak-password"?new Error("La contrasea debe tener al menos 6 caracteres"):s}}async getUserData(e){try{const n=await kn(re(J,eu,e));return n.exists()?n.data():null}catch(n){throw console.error("Error al obtener datos del usuario:",n),new Error("Error al obtener datos del usuario")}}async updateLastAccess(e){try{await xt(re(J,eu,e),{ultimoAcceso:new Date().toISOString()})}catch(n){console.error("Error al actualizar ltimo acceso:",n)}}onAuthStateChanged(e){return R3(Va,e)}getCurrentUser(){return Va.currentUser}}const Pr=new QV,TI=P.createContext(void 0),XV=({children:t})=>{const[e,n]=P.useState(null),[s,a]=P.useState(!0);P.useEffect(()=>{const d=Pr.onAuthStateChanged(async m=>{if(m)try{const p=await Pr.getUserData(m.uid);if((p==null?void 0:p.rol)==="superadmin"){console.log(" SuperAdmin detectado - Saltando onboarding"),n({...p,onboardingCompleto:!0,schoolId:"system",schoolName:"Sistema Central"}),a(!1);return}const{schoolService:g}=await No(async()=>{const{schoolService:y}=await Promise.resolve().then(()=>PI);return{schoolService:y}},[]);if(await g.needsOnboarding(m.uid))console.log(" Usuario necesita completar onboarding"),n({...p,onboardingCompleto:!1});else{const y=await g.getUserProfile(m.uid);y?(console.log(" Usuario con onboarding completo:",y.schoolName),n({...p,schoolId:y.schoolId,schoolName:y.schoolName,puesto:y.puesto,onboardingCompleto:!0})):n({...p,onboardingCompleto:!1})}}catch(p){console.error("Error al cargar datos del usuario:",p),n(null)}else n(null);a(!1)});return()=>d()},[]);const c={user:e,loading:s,login:async(d,m)=>{a(!0);try{const p=await Pr.login({email:d,password:m});n(p)}catch(p){throw a(!1),p}},loginWithGoogle:async()=>{a(!0);try{const d=await Pr.loginWithGoogle();n(d)}catch(d){throw a(!1),d}},logout:async()=>{try{await Pr.logout(),n(null)}catch(d){throw d}},isAuthenticated:!!e};return r.jsx(TI.Provider,{value:c,children:t})},ct=()=>{const t=P.useContext(TI);if(t===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return t},Cs=({children:t,allowedRoles:e})=>{const{user:n,loading:s}=ct(),a=Os();return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando..."})]})}):n?!(n.rol==="superadmin")&&(n.onboardingCompleto===!1||!n.schoolId||!n.schoolName||!n.nombre||!n.apellidoPaterno)&&a.pathname!=="/onboarding"?(console.info(" Redirigiendo a onboarding - Completar perfil. Path actual:",a.pathname),r.jsx(rs,{to:"/onboarding",replace:!0})):e&&!e.includes(n.rol)?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center max-w-md border border-red-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-6",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Acceso Denegado"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"No tienes permisos para acceder a esta seccin."}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Tu rol: ",r.jsx("span",{className:"font-semibold text-indigo-600",children:n.rol})]}),r.jsx("button",{onClick:()=>window.history.back(),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Volver"})]})}):r.jsx(r.Fragment,{children:t}):r.jsx(rs,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZV=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),PE=t=>{const e=ZV(t);return e.charAt(0).toUpperCase()+e.slice(1)},SI=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),eU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>P.createElement("svg",{ref:c,...tU,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:SI("lucide",a),...!i&&!eU(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,m])=>P.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(t,e)=>{const n=P.forwardRef(({className:s,...a},i)=>P.createElement(nU,{ref:i,iconNode:e,className:SI(`lucide-${WV(PE(t))}`,`lucide-${t}`,s),...a}));return n.displayName=PE(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gd=X("arrow-left",sU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],il=X("arrow-right",aU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],xp=X("award",iU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],oU=X("book-marked",rU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],at=X("book-open",lU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],DE=X("book",cU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],kE=X("bug",dU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Lm=X("building-2",uU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Oh=X("calendar",mU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yl=X("check",hU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],LE=X("chevron-down",fU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gU=X("chevron-right",pU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],VE=X("chevron-up",xU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ba=X("circle-alert",vU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Is=X("circle-check-big",yU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Uc=X("circle-check",bU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],wI=X("circle-plus",_U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Vm=X("circle-x",EU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Po=X("clock",NU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],TU=X("copy",CU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],wU=X("crown",SU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],UE=X("database",AU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],RU=X("dollar-sign",IU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zh=X("download",jU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],PU=X("dumbbell",MU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$g=X("external-link",DU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LU=X("eye",kU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],UU=X("file-pen-line",VU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ls=X("file-text",OU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],FU=X("folder-open",zU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Oc=X("funnel",GU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vp=X("globe",BU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ts=X("graduation-cap",qU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yg=X("heart",HU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],YU=X("history",$U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],AI=X("house",JU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],QU=X("info",KU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],II=X("list",XU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rl=X("loader-circle",WU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],eO=X("loader",ZU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Jg=X("lock",tO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],sO=X("log-in",nO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fh=X("log-out",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Gh=X("mail",iO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Bh=X("map-pin",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],lO=X("monitor",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],dO=X("network",cO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],mO=X("panels-top-left",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xd=X("pen",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pO=X("phone",fO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],On=X("plus",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vO=X("power-off",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],bO=X("power",yO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],EO=X("refresh-cw",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ri=X("save",NO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],At=X("school",CO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fs=X("search",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wO=X("send",SO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fv=X("settings",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],RI=X("shield-check",IO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qh=X("shield",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Do=X("sparkles",jO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],PO=X("square-check-big",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jI=X("square-pen",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kn=X("target",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ns=X("trash-2",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],UO=X("trending-down",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ms=X("trending-up",OO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ei=X("triangle-alert",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Lu=X("upload",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],OE=X("user-plus",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ko=X("user",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Je=X("users",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],$O=X("video",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JO=X("wifi-off",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Kg=X("wifi",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],XO=X("wrench",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ss=X("x",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ez=X("zap",ZO),tz=()=>{const[t,e]=P.useState(""),[n,s]=P.useState(""),[a,i]=P.useState(""),[o,l]=P.useState(!1),{login:c,loginWithGoogle:d}=ct(),m=bs(),p=async x=>{x.preventDefault(),i(""),l(!0);try{await c(t,n),m("/")}catch(y){i(y.message||"Error al iniciar sesin")}finally{l(!1)}},g=async()=>{i(""),l(!0);try{await d(),m("/")}catch(x){i(x.message||"Error al iniciar sesin con Google")}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl mb-4",children:r.jsx(At,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"EduPlan MX"}),r.jsx("p",{className:"text-slate-600",children:"Plataforma de Diagnstico Socioeducativo"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-slate-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Iniciar Sesin"}),a&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(ba,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-800",children:a})]}),r.jsxs("form",{onSubmit:p,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Gh,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"email",type:"email",value:t,onChange:x=>e(x.target.value),required:!0,className:"block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"tu@email.com",disabled:o})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Jg,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"password",type:"password",value:n,onChange:x=>s(x.target.value),required:!0,className:"block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"",disabled:o})]})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Iniciando sesin..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sO,{className:"w-5 h-5"}),"Iniciar Sesin"]})})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-slate-500",children:"O contina con"})})]}),r.jsxs("button",{onClick:g,disabled:o,className:"w-full bg-white border-2 border-slate-300 text-slate-700 py-3 px-4 rounded-xl font-semibold hover:bg-slate-50 hover:border-slate-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-3",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{type:"button",className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",disabled:!0,children:"Olvidaste tu contrasea?"})})]}),r.jsx("div",{className:"mt-8 text-center text-sm text-slate-500",children:r.jsx("p",{children:" 2026 EduPlan MX - Bachillerato General Oficial"})})]})})},MI=[{materia:"Pensamiento Matemtico I",semestre:1,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO I",semestre:1,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Procedural","Procesos de intuicin y razonamiento"],metas_aprendizaje:["M1","M2"],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Discute la importancia de la toma de decisiones basada en datos y cuestiona la validez de la informacin estadstica.",tematicas:["Estadstica bsica","Toma de decisiones"]},{id:2,descripcion:"Identifica la incertidumbre como consecuencia de la variabilidad y a travs de simulaciones considera la frecuencia de eventos.",tematicas:["Incertidumbre","Variabilidad","Frecuencia"]},{id:3,descripcion:"Identifica la equiprobabilidad como hiptesis y observa la ley de los grandes nmeros.",tematicas:["Equiprobabilidad","Ley de los grandes nmeros"]},{id:4,descripcion:"Elige una tcnica de conteo (combinaciones, ordenaciones) para calcular el total de casos posibles y favorables.",tematicas:["Tcnicas de conteo","Combinatoria"]},{id:5,descripcion:"Observa cmo la probabilidad de un evento se actualiza con informacin adicional (Probabilidad condicional).",tematicas:["Probabilidad condicional"]},{id:6,descripcion:"Selecciona una problemtica para recolectar datos. Distingue variables cualitativas y cuantitativas.",tematicas:["Variables estadsticas","Recoleccin de datos"]},{id:7,descripcion:"Analiza datos categricos y cuantitativos mediante representaciones grficas (barras, pastel, puntos).",tematicas:["Grficos estadsticos"]},{id:8,descripcion:"Analiza la relacin entre dos variables categricas mediante tablas de doble entrada.",tematicas:["Tablas de contingencia"]},{id:9,descripcion:"Analiza datos cuantitativos a travs de medidas de tendencia central y dispersin.",tematicas:["Media, mediana, moda","Dispersin"]},{id:10,descripcion:"Analiza la distribucin de datos cuantitativos (forma, centro, dispersin).",tematicas:["Distribuciones de datos"]},{id:11,descripcion:"Construye e interpreta grficas de caja y bigotes (Boxplots).",tematicas:["Boxplots","Cuartiles"]},{id:12,descripcion:"Introduce el concepto de correlacin y la distingue de causalidad.",tematicas:["Correlacin vs Causalidad"]},{id:13,descripcion:"Analiza la asociacin entre variables cuantitativas (regresin lineal simple).",tematicas:["Regresin lineal"]},{id:14,descripcion:"Analiza la asociacin entre dos variables cuantitativas a travs del coeficiente de correlacin de Pearson.",tematicas:["Coeficiente de Pearson"]},{id:15,descripcion:"Valora la importancia de la Probabilidad y Estadstica en la construccin de conocimiento.",tematicas:["Aplicaciones estadsticas"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.720Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lengua y Comunicacin I",semestre:1,metadata:{nombre_uac:"LENGUA Y COMUNICACIN I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende por qu es importante saber resumir y relatar, e identifica la diferencia entre ambos.",tematicas:["Resumen y Relato"]},{id:2,descripcion:"Identifica los tipos de fuentes de informacin y la validez de los contenidos.",tematicas:["Fuentes de informacin"]},{id:3,descripcion:"Distingue la lengua oral de la lengua escrita y los usos en diferentes contextos.",tematicas:["Oralidad vs Escritura"]},{id:4,descripcion:"Comprende y aplica las reglas de acentuacin, puntuacin y uso de grafas.",tematicas:["Ortografa","Puntuacin"]},{id:5,descripcion:"Realiza la composicin de resmenes y relatos simples a partir de diversas fuentes.",tematicas:["Composicin de textos"]},{id:6,descripcion:"Identifica y aplica las etapas del proceso de lectura: prelectura, lectura y poslectura.",tematicas:["Proceso de lectura"]},{id:7,descripcion:"Analiza un relato para identificar los elementos narrativos bsicos.",tematicas:["Narrativa","Personajes","Trama"]},{id:8,descripcion:"Distingue las ideas principales de las secundarias en un texto.",tematicas:["Comprensin lectora"]},{id:9,descripcion:"Identifica las caractersticas del resumen y su utilidad acadmica.",tematicas:["El Resumen"]},{id:10,descripcion:"Identifica las caractersticas del relato y su funcin social.",tematicas:["El Relato"]},{id:11,descripcion:"Reconoce la estructura de los textos informativos bsicos.",tematicas:["Textos informativos"]},{id:12,descripcion:"Utiliza organizadores grficos para procesar informacin.",tematicas:["Mapas mentales","Cuadros sinpticos"]},{id:13,descripcion:"Expone de manera oral un resumen o relato ante una audiencia.",tematicas:["Expresin oral"]},{id:14,descripcion:"Revisa y corrige sus textos (propiedades de la redaccin: adecuacin, coherencia y cohesin).",tematicas:["Correccin de textos"]},{id:15,descripcion:"Utiliza herramientas digitales para la elaboracin de textos sencillos.",tematicas:["Herramientas digitales"]},{id:16,descripcion:"Reflexiona sobre la importancia de la lengua para la interaccin social.",tematicas:["Reflexin lingstica"]}],organizador_curricular:{propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."],categorias:["Comunicacin","Pensamiento Crtico"],metas_aprendizaje:["Hablar","Escuchar","Leer","Escribir"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Cultura Digital I",semestre:1,metadata:{nombre_uac:"CULTURA DIGITAL I",semestre:1,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Identifica y aplica la normatividad que regula el ciberespacio y servicios digitales; cuida su salud digital y el medio ambiente.",tematicas:["Ciudadana Digital","Ciberseguridad","Salud digital"]},{id:2,descripcion:"Reconoce su identidad como ciudadano en el ciberespacio con derechos y obligaciones.",tematicas:["Identidad digital","Derechos digitales"]},{id:3,descripcion:"Conoce y utiliza herramientas de productividad: procesadores de texto.",tematicas:["Procesadores de texto"]},{id:4,descripcion:"Conoce y utiliza herramientas de productividad: hojas de clculo.",tematicas:["Hojas de clculo","Excel bsico"]},{id:5,descripcion:"Conoce y utiliza herramientas de productividad: presentaciones electrnicas.",tematicas:["Presentaciones","PowerPoint/Canva"]},{id:6,descripcion:"Identifica y aplica estrategias de bsqueda de informacin confiable en internet.",tematicas:["Bsqueda de informacin","Fuentes confiables"]},{id:7,descripcion:"Utiliza herramientas digitales para la comunicacin y colaboracin en lnea.",tematicas:["Correo electrnico","Nube","Colaboracin"]},{id:8,descripcion:"Comprende los conceptos bsicos de algoritmos y pensamiento computacional.",tematicas:["Algoritmos","Lgica computacional"]},{id:9,descripcion:"Utiliza el pensamiento computacional para la resolucin de problemas cotidianos.",tematicas:["Resolucin de problemas","Diagramas de flujo"]}],organizador_curricular:{propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."],categorias:["Ciudadana Digital","Pensamiento Computacional"],metas_aprendizaje:["Uso tico de TIC","Programacin bsica"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"La Materia y sus Interacciones",semestre:1,metadata:{nombre_uac:"LA MATERIA Y SUS INTERACCIONES",semestre:1,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"La materia es todo lo que ocupa un lugar en el espacio y tiene masa. Todas las sustancias estn formadas por tomos.",tematicas:["Concepto de materia","tomos","Modelos atmicos"]},{id:2,descripcion:"Las molculas estn formadas por tomos unidos por enlaces qumicos.",tematicas:["Molculas","Enlaces qumicos (Inico, Covalente)"]},{id:3,descripcion:"Identifica que la temperatura es una medida de la energa cintica promedio de las partculas.",tematicas:["Temperatura","Energa cintica"]},{id:4,descripcion:"Utiliza la teora cintico-molecular para explicar los estados de agregacin.",tematicas:["Estados de la materia","Cambios de estado"]},{id:5,descripcion:"Comprende que en una reaccin qumica la masa se conserva (Ley de Lavoisier).",tematicas:["Reacciones qumicas","Conservacin de la materia"]},{id:6,descripcion:"Distingue entre sistemas abiertos, cerrados y aislados.",tematicas:["Sistemas termodinmicos"]},{id:7,descripcion:"Identifica las propiedades extensivas e intensivas de la materia.",tematicas:["Propiedades de la materia"]},{id:8,descripcion:"Clasifica las sustancias en elementos, compuestos y mezclas.",tematicas:["Clasificacin de la materia","Tabla peridica"]},{id:9,descripcion:"Examina cmo la estructura de los materiales determina sus propiedades y usos.",tematicas:["Materiales","Estructura-Propiedad"]},{id:10,descripcion:"Analiza la energa involucrada en las reacciones qumicas (endotrmicas y exotrmicas).",tematicas:["Energa en reacciones","Entalpa"]},{id:11,descripcion:"Comprende el concepto de rapidez de reaccin y los factores que la afectan.",tematicas:["Cintica qumica"]},{id:12,descripcion:"Utiliza el concepto de mol para cuantificar la materia.",tematicas:["El Mol","Estequiometra bsica"]},{id:13,descripcion:"Analiza la importancia de los recursos naturales y su transformacin sinttica.",tematicas:["Recursos naturales","Materiales sintticos"]},{id:14,descripcion:"Reflexiona sobre el impacto ambiental de los procesos qumicos y el desarrollo sostenible.",tematicas:["Qumica verde","Impacto ambiental"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La Materia y sus Interacciones bajo el marco del MCCEMS 2025."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Humanidades I",semestre:1,metadata:{nombre_uac:"HUMANIDADES I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Explora a partir de la pregunta 'Por qu estoy aqu?' para acercarse a los saberes, recursos y prcticas filosficas.",tematicas:["Asombro filosfico","El cuestionamiento"]},{id:2,descripcion:"Reconoce la experiencia de s misma/o analizando discursos clsicos y contemporneos.",tematicas:["Conocimiento de s mismo"]},{id:3,descripcion:"Pone en cuestin la manera en que los otros dan sentido a su realidad.",tematicas:["Alteridad","El Otro"]},{id:4,descripcion:"Cuestiona cmo sus pasiones y virtudes configuran su propia experiencia.",tematicas:["Pasiones","Virtudes","tica"]},{id:5,descripcion:"Reflexiona sobre la vida buena y la felicidad desde diversas perspectivas.",tematicas:["Eudaimona","Felicidad","Vida buena"]},{id:6,descripcion:"Analiza la relacin entre el placer y la vida buena.",tematicas:["Hedonismo","Placer vs Felicidad"]},{id:7,descripcion:"Examina la validez de los argumentos y las falacias en discursos cotidianos.",tematicas:["Lgica","Argumentacin","Falacias"]},{id:8,descripcion:"Identifica los fines de la argumentacin en diferentes contextos.",tematicas:["Debate","Persuasin"]},{id:9,descripcion:"Reflexiona sobre la libertad y la responsabilidad.",tematicas:["Libertad","Determinismo","Responsabilidad"]},{id:10,descripcion:"Comprende el sentido de la vida desde una perspectiva humanista.",tematicas:["Sentido de la vida","Existencialismo"]}],organizador_curricular:{propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ciencias Sociales I",semestre:1,metadata:{nombre_uac:"CIENCIAS SOCIALES I",semestre:1,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Reconoce sus necesidades materiales (vitales y no vitales) personales, familiares y de su comunidad para comprender y explicar la forma en que se satisfacen.",tematicas:["Necesidades humanas","Satisfactores"]},{id:2,descripcion:"Identifica los procesos de produccin y distribucin vigentes en su comunidad.",tematicas:["Produccin","Distribucin","Economa local"]},{id:3,descripcion:"Distingue las caractersticas de las formas de produccin: esclavismo, feudalismo, capitalismo y socialismo.",tematicas:["Modos de produccin","Historia econmica"]},{id:4,descripcion:"Define qu es el Estado y comprende su funcin en la sociedad.",tematicas:["El Estado","Gobierno","Instituciones"]},{id:5,descripcion:"Analiza la relacin entre el ciudadano y el Estado: derechos y obligaciones.",tematicas:["Ciudadana","Contrato social"]},{id:6,descripcion:"Identifica las estructuras sociales: familia, escuela, comunidad.",tematicas:["Estructura social","Instituciones sociales"]},{id:7,descripcion:"Comprende el concepto de desigualdad social y sus manifestaciones.",tematicas:["Desigualdad","Pobreza","Clases sociales"]},{id:8,descripcion:"Analiza el papel de las normas sociales y jurdicas en la convivencia.",tematicas:["Normas","Leyes","Derecho"]},{id:9,descripcion:"Reflexiona sobre la diversidad cultural y la identidad.",tematicas:["Cultura","Diversidad","Identidad"]},{id:10,descripcion:"Identifica problemas sociales contemporneos en su entorno.",tematicas:["Problemas sociales","Comunidad"]},{id:11,descripcion:"Comprende la importancia de la participacin ciudadana.",tematicas:["Participacin","Democracia"]},{id:12,descripcion:"Analiza la relacin entre bienestar y organizacin social.",tematicas:["Bienestar social","Organizacin"]}],organizador_curricular:{propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."],categorias:["Conciencia Social","Historia"],metas_aprendizaje:["Interpretacin histrica","Participacin ciudadana"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingls I",semestre:1,metadata:{nombre_uac:"LENGUA EXTRANJERA INGLS I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende y utiliza el verbo 'to be' en presente simple para dar y pedir informacin personal.",tematicas:["Verb to be","Personal information"]},{id:2,descripcion:"Utiliza los pronombres personales y adjetivos posesivos.",tematicas:["Subject pronouns","Possessive adjectives"]},{id:3,descripcion:"Describe su entorno inmediato utilizando vocabulario bsico y preposiciones de lugar.",tematicas:["Prepositions of place","Classroom objects"]},{id:4,descripcion:"Expresa la existencia de objetos y personas singulares y plurales (There is/There are).",tematicas:["There is / There are","Plurals"]},{id:5,descripcion:"Utiliza los artculos definidos e indefinidos (a/an/the) correctamente.",tematicas:["Articles"]},{id:6,descripcion:"Describe caractersticas fsicas y de personalidad usando adjetivos calificativos.",tematicas:["Adjectives","Physical description"]},{id:7,descripcion:"Utiliza los adjetivos demostrativos (this/that/these/those).",tematicas:["Demonstratives"]},{id:8,descripcion:"Expresa posesin utilizando el genitivo sajn ('s) y adjetivos posesivos.",tematicas:["Possessive 's"]},{id:9,descripcion:"Formula preguntas simples con Wh- questions.",tematicas:["Wh- questions"]},{id:10,descripcion:"Comprende y utiliza el Presente Simple para hablar de hechos generales.",tematicas:["Simple Present (affirmative)"]},{id:11,descripcion:"Utiliza el Presente Simple en formas negativa e interrogativa.",tematicas:["Simple Present (negative/interrogative)"]},{id:12,descripcion:"Expresa gustos y preferencias (like/love/hate).",tematicas:["Likes and dislikes"]},{id:13,descripcion:"Habla sobre la familia y relaciones de parentesco.",tematicas:["Family members"]},{id:14,descripcion:"Describe ocupaciones y profesiones.",tematicas:["Occupations"]},{id:15,descripcion:"Identifica y utiliza nmeros cardinales y ordinales.",tematicas:["Numbers","Dates"]},{id:16,descripcion:"Comprende textos breves y sencillos sobre temas familiares.",tematicas:["Reading comprehension"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls I bajo el marco del MCCEMS 2025."],categorias:["Comunicacin Extranjera","Interculturalidad"],metas_aprendizaje:["Listening","Reading","Speaking","Writing"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico II",semestre:2,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO II",semestre:2,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"Compara cualitativamente dos o ms eventos para determinar cul es ms probable o si son equiprobables.",tematicas:["Probabilidad intuitiva"]},{id:2,descripcion:"Calcula la probabilidad terica de eventos simples en experimentos aleatorios.",tematicas:["Probabilidad clsica"]},{id:3,descripcion:"Distingue entre eventos mutuamente excluyentes y no excluyentes, y calcula sus probabilidades.",tematicas:["Eventos excluyentes","Regla de la suma"]},{id:4,descripcion:"Distingue entre eventos independientes y dependientes, y utiliza la regla del producto.",tematicas:["Independencia","Regla del producto"]},{id:5,descripcion:"Utiliza el lenguaje algebraico para representar patrones y relaciones.",tematicas:["Lenguaje algebraico"]},{id:6,descripcion:"Opera con expresiones algebraicas (suma, resta, multiplicacin).",tematicas:["Operaciones algebraicas"]},{id:7,descripcion:"Resuelve ecuaciones lineales de una variable y las interpreta grficamente.",tematicas:["Ecuaciones lineales"]},{id:8,descripcion:"Resuelve sistemas de dos ecuaciones lineales con dos variables.",tematicas:["Sistemas de ecuaciones 2x2"]},{id:9,descripcion:"Resuelve ecuaciones cuadrticas completas e incompletas por diversos mtodos.",tematicas:["Ecuaciones cuadrticas"]},{id:10,descripcion:"Identifica y analiza las caractersticas de figuras geomtricas (polgonos).",tematicas:["Polgonos"]},{id:11,descripcion:"Calcula permetros y reas de figuras compuestas.",tematicas:["reas y permetros"]},{id:12,descripcion:"Aplica el Teorema de Tales y la semejanza de tringulos.",tematicas:["Semejanza","Teorema de Tales"]},{id:13,descripcion:"Aplica el Teorema de Pitgoras en la resolucin de problemas.",tematicas:["Teorema de Pitgoras"]},{id:14,descripcion:"Utiliza las razones trigonomtricas (seno, coseno, tangente) en tringulos rectngulos.",tematicas:["Trigonometra bsica"]}],organizador_curricular:{propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."],categorias:["Pensamiento Lgico","Modelacin"],metas_aprendizaje:["Resolucin de problemas","Pensamiento algortmico"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lengua y Comunicacin II",semestre:2,metadata:{nombre_uac:"LENGUA Y COMUNICACIN II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende qu es el ensayo, sus caractersticas, estructura y tipos.",tematicas:["El Ensayo"]},{id:2,descripcion:"Distingue entre opinin, postura y argumento.",tematicas:["Argumentacin"]},{id:3,descripcion:"Identifica las premisas y conclusiones en un argumento.",tematicas:["Estructura del argumento"]},{id:4,descripcion:"Analiza textos argumentativos e identifica su tesis.",tematicas:["Lectura argumentativa"]},{id:5,descripcion:"Utiliza los diferentes tipos de argumentos (autoridad, datos, ejemplos).",tematicas:["Tipos de argumentos"]},{id:6,descripcion:"Comprende y evita el uso de falacias en su argumentacin.",tematicas:["Falacias argumentativas"]},{id:7,descripcion:"Redacta un ensayo breve sobre un tema de inters.",tematicas:["Escritura de ensayo"]},{id:8,descripcion:"Utiliza citas textuales y referencias bibliogrficas (APA) para fundamentar sus ideas.",tematicas:["Citas y Referencias","APA"]},{id:9,descripcion:"Realiza exposiciones orales argumentativas.",tematicas:["Exposicin oral"]},{id:10,descripcion:"Participa en debates respetando las reglas de intervencin y escucha activa.",tematicas:["Debate"]},{id:11,descripcion:"Analiza discursos pblicos para evaluar su efectividad persuasiva.",tematicas:["Anlisis del discurso"]},{id:12,descripcion:"Utiliza medios digitales para difundir sus textos argumentativos.",tematicas:["Medios digitales"]},{id:13,descripcion:"Reflexiona sobre la tica en la comunicacin y la argumentacin.",tematicas:["tica comunicativa"]}],organizador_curricular:{propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."],categorias:["Comunicacin","Pensamiento Crtico"],metas_aprendizaje:["Hablar","Escuchar","Leer","Escribir"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conservacin de la Energa",semestre:2,metadata:{nombre_uac:"CONSERVACIN DE LA ENERGA Y SUS INTERACCIONES CON LA MATERIA",semestre:2,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"La energa se conserva, no se crea ni se destruye, solo se transforma.",tematicas:["Ley de conservacin de la energa"]},{id:2,descripcion:"Identifica diversas formas de energa (cintica, potencial, trmica, elctrica).",tematicas:["Formas de energa"]},{id:3,descripcion:"Calcula la energa cintica y potencial en sistemas mecnicos.",tematicas:["Energa Mecnica"]},{id:4,descripcion:"Comprende el concepto de trabajo mecnico y su relacin con la energa.",tematicas:["Trabajo y Potencia"]},{id:5,descripcion:"Analiza la transferencia de calor y el equilibrio trmico.",tematicas:["Calor y Temperatura"]},{id:6,descripcion:"Explica el funcionamiento de mquinas trmicas simples.",tematicas:["Mquinas trmicas"]},{id:7,descripcion:"Analiza fenmenos elctricos y magnticos.",tematicas:["Electricidad y Magnetismo"]},{id:8,descripcion:"Comprende los circuitos elctricos bsicos (serie y paralelo).",tematicas:["Circuitos elctricos"]},{id:9,descripcion:"Analiza la generacin y consumo de energa elctrica.",tematicas:["Generacin de energa"]},{id:10,descripcion:"Evala fuentes de energa renovables y no renovables.",tematicas:["Fuentes de energa","Sustentabilidad"]},{id:11,descripcion:"Reflexiona sobre la eficiencia energtica y el ahorro de energa.",tematicas:["Eficiencia energtica"]},{id:12,descripcion:"Analiza el impacto social y ambiental del uso de la energa.",tematicas:["Impacto ambiental"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conservacin de la Energa bajo el marco del MCCEMS 2025."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Cultura Digital II",semestre:2,metadata:{nombre_uac:"CULTURA DIGITAL II - Aprendizaje individual y colaborativo",semestre:2,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Herramientas digitales innovadoras","TICCAD para investigacin","Investigacin digital","Software estadstico","Pginas web"],metas_aprendizaje:["Interacte con las TICCAD para potenciar su aprendizaje autnomo y colaborativo, de una forma creativa e innovadora, de acuerdo con las caractersticas y necesidades de su contexto."],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Utiliza herramientas digitales de una manera innovadora y eficiente para acceder al conocimiento y la experiencia de aprendizaje de las diferentes asignaturas.",metas:["Trabajo colaborativo digital","Herramientas de trabajo colaborativo digital libre (Cryptpad, Riseup pad, entre otras)"],tematicas:["Trabajo colaborativo digital","Cryptpad","Riseup pad","Herramientas colaborativas de libre acceso"]},{id:2,descripcion:"Utiliza las TICCAD para interactuar y comunicarse con equipos colaborativos de trabajo, e investigar, buscar, discriminar y gestionar informacin de una situacin, fenmeno o problemtica personal, social o ambiental.",metas:["Tecnologas de Informacin, Comunicacin, Conocimiento y Aprendizajes Digitales de libre acceso (Cryptpad, Riseup pad, entre otras)"],tematicas:["TICCAD","Investigacin digital","Gestin de informacin","Trabajo colaborativo","Problemticas sociales y ambientales"]},{id:3,descripcion:"Aplica tcnicas y mtodos de investigacin digital para buscar, recopilar, extraer, organizar y difundir informacin de una situacin, fenmeno o problemtica personal, social o ambiental.",metas:["Tcnicas y mtodos de investigacin digital (Ciberetnografa, anlisis en lnea de contenido, grupo focal, entrevista, observacin, entre otros)"],tematicas:["Ciberetnografa","Anlisis de contenido en lnea","Grupo focal virtual","Entrevista digital","Observacin en lnea","Mtodos de investigacin digital"]},{id:4,descripcion:"Procesa datos relacionados con una situacin, fenmeno o problemtica de ndole personal, social o ambiental, utilizando herramientas de software que permitan calcular medidas de tendencia central y dispersin, as como generar representaciones grficas que contribuyan a su anlisis.",metas:["Licencias permisivas (Cryptpad, Riseup pad, Libre office, entre otras)","Software estadstico libre (Jamovi, XLSTAT Free, JASP, entre otros)"],tematicas:["Software estadstico libre","Jamovi","XLSTAT Free","JASP","Anlisis de datos","Medidas de tendencia central","Dispersin","Grficas estadsticas","Licencias permisivas","LibreOffice"]},{id:5,descripcion:"Utiliza las pginas web para ayudar a difundir informacin sobre una situacin, fenmeno o problemtica personal, social o ambiental relacionada con otras asignaturas.",metas:["Pginas web (que impliquen un diseo simple, por ejemplo: Wordpress, Blogspot, entre otras)"],tematicas:["Creacin de pginas web","WordPress","Blogspot","Difusin de informacin","Diseo web simple","Proyectos interdisciplinarios"]}],url_fuente:"https://www.dgb.sep.gob.mx/informacion-academica/programas-de-estudio/cultura-digital-ii.pdf",fecha_extraccion:"2026-01-29",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ciencias Sociales II",semestre:2,metadata:{nombre_uac:"CIENCIAS SOCIALES II",semestre:2,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Analiza las caractersticas del sistema econmico actual y su impacto local.",tematicas:["Economa actual","Globalizacin"]},{id:2,descripcion:"Identifica los agentes econmicos: familia, empresas y Estado.",tematicas:["Agentes econmicos"]},{id:3,descripcion:"Comprende el funcionamiento del mercado: oferta y demanda.",tematicas:["Mercado","Oferta y Demanda"]},{id:4,descripcion:"Analiza el papel del dinero y el sistema financiero.",tematicas:["Dinero","Bancos"]},{id:5,descripcion:"Reflexiona sobre el trabajo, el empleo y el salario.",tematicas:["Mercado laboral"]},{id:6,descripcion:"Identifica las funciones de la administracin pblica.",tematicas:["Administracin pblica"]},{id:7,descripcion:"Analiza polticas pblicas que atienden problemas sociales.",tematicas:["Polticas pblicas"]},{id:8,descripcion:"Comprende la estructura poltica del sistema mexicano.",tematicas:["Sistema poltico mexicano"]},{id:9,descripcion:"Reflexiona sobre la participacin democrtica y electoral.",tematicas:["Democracia","Elecciones"]},{id:10,descripcion:"Analiza los movimientos sociales y su impacto en el cambio social.",tematicas:["Movimientos sociales"]}],organizador_curricular:{propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."],categorias:["Conciencia Social","Historia"],metas_aprendizaje:["Interpretacin histrica","Participacin ciudadana"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Humanidades II",semestre:2,metadata:{nombre_uac:"HUMANIDADES II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Examina la experiencia de lo colectivo y la comunidad.",tematicas:["Comunidad","Colectividad"]},{id:2,descripcion:"Analiza las formas de organizacin poltica y social.",tematicas:["Poltica","Sociedad"]},{id:3,descripcion:"Reflexiona sobre la justicia y las leyes.",tematicas:["Justicia","Legalidad"]},{id:4,descripcion:"Cuestiona las relaciones de poder en la sociedad.",tematicas:["Poder","Autoridad"]},{id:5,descripcion:"Analiza la relacin entre el individuo y el Estado.",tematicas:["Ciudadano y Estado"]},{id:6,descripcion:"Explora conceptos de utopa y distopa social.",tematicas:["Utopa","Futuro social"]},{id:7,descripcion:"Reflexiona sobre la guerra, la paz y la violencia.",tematicas:["Paz y Violencia"]},{id:8,descripcion:"Analiza el impacto de la tecnologa en la humanidad.",tematicas:["Tecnologa y Humanismo"]},{id:9,descripcion:"Reflexiona sobre el arte y la esttica como formas de expresin humana.",tematicas:["Arte","Esttica"]}],organizador_curricular:{propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingls II",semestre:2,metadata:{nombre_uac:"LENGUA EXTRANJERA INGLS II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Describe acciones que estn sucediendo en el momento (Present Continuous).",tematicas:["Present Continuous"]},{id:2,descripcion:"Compara el uso del Presente Simple con el Presente Continuo.",tematicas:["Simple Present vs Continuous"]},{id:3,descripcion:"Expresa habilidades y posibilidades (Can/Can't).",tematicas:["Modal verb Can"]},{id:4,descripcion:"Habla sobre eventos pasados usando el verbo To Be en pasado (Was/Were).",tematicas:["Past of To Be"]},{id:5,descripcion:"Describe eventos terminados en el pasado usando verbos regulares e irregulares (Simple Past).",tematicas:["Simple Past (Regular/Irregular)"]},{id:6,descripcion:"Utiliza expresiones de tiempo pasado (yesterday, last week, ago).",tematicas:["Time expressions"]},{id:7,descripcion:"Formula preguntas en pasado simple (Did).",tematicas:["Questions in Past"]},{id:8,descripcion:"Utiliza sustantivos contables e incontables y cuantificadores (some, any, much, many).",tematicas:["Countable/Uncountable","Quantifiers"]},{id:9,descripcion:"Expresa planes futuros e intenciones (Going to).",tematicas:["Future with Going to"]},{id:10,descripcion:"Comprende y da instrucciones sencillas (Imperatives).",tematicas:["Imperatives","Directions"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls II bajo el marco del MCCEMS 2025."],categorias:["Comunicacin Extranjera","Interculturalidad"],metas_aprendizaje:["Listening","Reading","Speaking","Writing"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Laboratorio de Investigacin",semestre:1,metadata:{nombre_uac:"LABORATORIO DE INVESTIGACIN",semestre:1,creditos:3,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Metodologa"],metas_aprendizaje:["Desarrolla habilidades de investigacin"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Laboratorio de Investigacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la investigacin cientfica y social para el desarrollo del conocimiento.",tematicas:["Importancia de la investigacin"]},{id:2,descripcion:"Identifica los tipos de investigacin (documental, de campo, experimental) y sus caractersticas.",tematicas:["Tipos de investigacin"]},{id:3,descripcion:"Plantea un problema de investigacin delimitando su alcance y objetivos.",tematicas:["Planteamiento del problema"]},{id:4,descripcion:"Elabora hiptesis y variables para su comprobacin.",tematicas:["Hiptesis","Variables"]},{id:5,descripcion:"Selecciona tcnicas e instrumentos para la recoleccin de datos.",tematicas:["Recoleccin de datos"]},{id:6,descripcion:"Analiza e interpreta los resultados obtenidos en una investigacin.",tematicas:["Anlisis de resultados"]},{id:7,descripcion:"Elabora un reporte de investigacin siguiendo una estructura formal.",tematicas:["Reporte de investigacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T16:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Taller de Ciencias I",semestre:2,metadata:{nombre_uac:"TALLER DE CIENCIAS I",semestre:2,creditos:3,horas_semanales:3},organizador_curricular:{categorias:["Ciencias Experimentales"],metas_aprendizaje:["Aplica el mtodo cientfico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Aplica el mtodo cientfico experimental para validar hiptesis.",tematicas:["Mtodo cientfico"]},{id:2,descripcion:"Reconoce las normas de seguridad y el manejo de material de laboratorio.",tematicas:["Seguridad en laboratorio"]},{id:3,descripcion:"Realiza mediciones precisas utilizando instrumentos de laboratorio.",tematicas:["Medicin","Instrumentos"]},{id:4,descripcion:"Disea experimentos sencillos para probar relaciones causa-efecto.",tematicas:["Diseo experimental"]},{id:5,descripcion:"Registra y analiza datos experimentales utilizando tablas y grficas.",tematicas:["Anlisis de datos"]},{id:6,descripcion:"Elabora informes de laboratorio comunicando resultados y conclusiones.",tematicas:["Informe de laboratorio"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T16:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Pensamiento Matemtico III",semestre:3,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO III",semestre:3,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Nmero, lgebra y variacin","Forma, espacio y medida","Anlisis de datos"],metas_aprendizaje:["Resolver problemas","Modelar matemticamente","Argumentar soluciones"],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Aplica el razonamiento lgico-matemtico en la solucin de problemas cotidianos",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Nmeros reales y operaciones","Jerarqua de operaciones","Razones y proporciones","Porcentajes en la vida diaria"]},{id:2,descripcion:"Utiliza el lenguaje algebraico para representar y generalizar situaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Expresiones algebraicas","Leyes de exponentes","Polinomios basicos","Factorizacin"]},{id:3,descripcion:"Analiza las propiedades de las figuras geomtricas y sus relaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["ngulos y tringulos","Teorema de Pitgoras","Polgonos regulares","Clculo de reas y permetros"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761601",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Lengua y Comunicacin III",semestre:3,metadata:{nombre_uac:"LENGUA Y COMUNICACIN III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Atender y entender","La exploracin del mundo a travs de la lectura","La expresin verbal, visual y grfica"],metas_aprendizaje:["Comunicarse asertivamente","Leer crticamente","Escribir con coherencia"],propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la comunicacin asertiva en diversos contextos",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Proceso comunicativo","Intencin comunicativa","Funciones del lenguaje","Barreras de comunicacin"]},{id:2,descripcion:"Analiza textos de diversa ndole identificando ideas principales y secundarias",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Tipos de texto","Estrategias de lectura","Resumen y sntesis","Organizadores grficos"]},{id:3,descripcion:"Produce textos escritos con estructura lgica y correccin gramatical",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Proceso de escritura","Ortografa y puntuacin","Coherencia y cohesin","Tipologa textual"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761604",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ingls III",semestre:3,metadata:{nombre_uac:"INGLS III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Listening","Speaking","Reading","Writing"],metas_aprendizaje:["Comprensin auditiva","Expresin oral","Comprensin lectora"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende y utiliza expresiones cotidianas de uso muy frecuente",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Saludos y despedidas","Informacin personal","Verbo to be","Presente simple"]},{id:2,descripcion:"Describe situaciones personales, rutinas y hbitos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Rutinas diarias","Adverbios de frecuencia","Gustos y disgustos","Descripciones fsicas"]},{id:3,descripcion:"Interacta en situaciones sencillas sobre temas conocidos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Presente continuo","Futuro simple (will/going to)","Pasado simple","Vocabulario temtico"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761607",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ecosistemas: interacciones, energa y dinmica",semestre:3,metadata:{nombre_uac:"ECOSISTEMAS: INTERACCIONES, ENERGA Y DINMICA",semestre:3,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ecosistemas: interacciones, energa y dinmica bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761610",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ciencias Sociales III",semestre:3,metadata:{nombre_uac:"CIENCIAS SOCIALES III",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["El bienestar y la satisfaccin de las necesidades","La organizacin de la sociedad","Las normas sociales y jurdicas"],metas_aprendizaje:["Anlisis social","Pensamiento crtico","Conciencia histrica"],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Analiza procesos sociales y su impacto en la comunidad",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Individuo y sociedad","Procesos de socializacin","Estratificacin social","Problemas sociales contemporneos"]},{id:2,descripcion:"Comprende las estructuras econmicas y polticas",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Modos de produccin","Sectores econmicos","Formas de gobierno","Democracia y participacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761613",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Humanidades III",semestre:3,metadata:{nombre_uac:"HUMANIDADES III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761615",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica I",semestre:3,metadata:{nombre_uac:"CONCIENCIA HISTRICA I",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761617",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ingls IV",semestre:4,metadata:{nombre_uac:"INGLS IV",semestre:4,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Listening","Speaking","Reading","Writing"],metas_aprendizaje:["Comprensin auditiva","Expresin oral","Comprensin lectora"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls IV bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende y utiliza expresiones cotidianas de uso muy frecuente",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Saludos y despedidas","Informacin personal","Verbo to be","Presente simple"]},{id:2,descripcion:"Describe situaciones personales, rutinas y hbitos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Rutinas diarias","Adverbios de frecuencia","Gustos y disgustos","Descripciones fsicas"]},{id:3,descripcion:"Interacta en situaciones sencillas sobre temas conocidos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Presente continuo","Futuro simple (will/going to)","Pasado simple","Vocabulario temtico"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761620",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Reacciones Qumicas",semestre:4,metadata:{nombre_uac:"REACCIONES QUMICAS",semestre:4,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Reacciones Qumicas bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761622",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Matemticas IV (Propedutico)",semestre:4,metadata:{nombre_uac:"MATEMTICAS IV (PROPEDUTICO)",semestre:4,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Nmero, lgebra y variacin","Forma, espacio y medida","Anlisis de datos"],metas_aprendizaje:["Resolver problemas","Modelar matemticamente","Argumentar soluciones"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Matemticas IV (Propedutico) bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Aplica el razonamiento lgico-matemtico en la solucin de problemas cotidianos",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Nmeros reales y operaciones","Jerarqua de operaciones","Razones y proporciones","Porcentajes en la vida diaria"]},{id:2,descripcion:"Utiliza el lenguaje algebraico para representar y generalizar situaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Expresiones algebraicas","Leyes de exponentes","Polinomios basicos","Factorizacin"]},{id:3,descripcion:"Analiza las propiedades de las figuras geomtricas y sus relaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["ngulos y tringulos","Teorema de Pitgoras","Polgonos regulares","Clculo de reas y permetros"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761625",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Temas de Ciencias Sociales",semestre:4,metadata:{nombre_uac:"TEMAS DE CIENCIAS SOCIALES",semestre:4,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["El bienestar y la satisfaccin de las necesidades","La organizacin de la sociedad","Las normas sociales y jurdicas"],metas_aprendizaje:["Anlisis social","Pensamiento crtico","Conciencia histrica"],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Analiza procesos sociales y su impacto en la comunidad",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Individuo y sociedad","Procesos de socializacin","Estratificacin social","Problemas sociales contemporneos"]},{id:2,descripcion:"Comprende las estructuras econmicas y polticas",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Modos de produccin","Sectores econmicos","Formas de gobierno","Democracia y participacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761630",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica II",semestre:5,metadata:{nombre_uac:"CONCIENCIA HISTRICA II",semestre:5,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761634",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"La Energa",semestre:5,metadata:{nombre_uac:"LA ENERGA",semestre:5,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La Energa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761638",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Temas Selectos de Humanidades",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE HUMANIDADES",semestre:5,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761640",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica III",semestre:6,metadata:{nombre_uac:"CONCIENCIA HISTRICA III",semestre:6,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761643",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Cultura Digital III",semestre:6,metadata:{nombre_uac:"CULTURA DIGITAL III",semestre:6,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Ciudadana Digital","Pensamiento Computacional","Creatividad Digital"],metas_aprendizaje:["Usar tecnologa responsablemente","Resolver problemas con algoritmos","Crear contenido digital"],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Identifica y aplica normas de ciberseguridad y ciudadana digital",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Identidad digital","Huella digital","Ciberseguridad bsica","Normas de etiqueta en red"]},{id:2,descripcion:"Aplica el pensamiento computacional para la resolucin de problemas",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Algoritmos","Diagramas de flujo","Estructuras de control","Resolucin de problemas"]},{id:3,descripcion:"Utiliza herramientas de software para la productividad y colaboracin",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Procesadores de texto avanzados","Hojas de clculo","Herramientas colaborativas","Almacenamiento en la nube"]},{id:4,descripcion:"Desarrolla contenidos digitales multimedia",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Edicin de imgenes","Edicin de audio/video","Presentaciones interactivas","Derechos de autor"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761646",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Herencia y Evolucin",semestre:6,metadata:{nombre_uac:"HERENCIA Y EVOLUCIN",semestre:6,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Herencia y Evolucin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761648",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Filosofa",semestre:6,metadata:{nombre_uac:"FILOSOFA",semestre:6,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Filosofa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761650",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Cultura Digital III",semestre:3,metadata:{nombre_uac:"CULTURA DIGITAL III",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Pensamiento Computacional","Ciudadana Digital","Creatividad Digital"],metas_aprendizaje:["M1. Utiliza herramientas avanzadas de procesamiento de datos","M2. Desarrolla soluciones mediante algoritmos y programacin","M3. Aplica principios de ciudadana en entornos virtuales complejos"],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Integra el pensamiento computacional para el anlisis de problemas complejos y la toma de decisiones basada en datos.",tematicas:["Pensamiento Computacional Avanzado","Anlisis de Datos","Toma de Decisiones"]},{id:2,descripcion:"Utiliza estructuras de control condicionales (if-else) y repetitivas (bucles) en un lenguaje de programacin estructurado.",tematicas:["Programacin Estructurada","Condicionales","Ciclos/Bucles"]},{id:3,descripcion:"Disea y desarrolla algoritmos que resuelven problemas matemticos o lgicos de su entorno acadmico.",tematicas:["Diseo de Algoritmos","Lgica de Programacin","Resolucin de Problemas"]},{id:4,descripcion:"Comprende los fundamentos de las Bases de Datos y su importancia en la organizacin de la informacin.",tematicas:["Bases de Datos","Organizacin de Informacin","Tablas y Registros"]},{id:5,descripcion:"Utiliza herramientas de diseo web bsico (HTML/CSS) para la difusin de informacin.",tematicas:["Desarrollo Web","HTML","CSS"]},{id:6,descripcion:"Analiza crticamente el impacto de la Inteligencia Artificial y el Big Data en la sociedad actual.",tematicas:["Inteligencia Artificial","Big Data","tica Digital"]},{id:7,descripcion:"Aplica normas de seguridad digital avanzada y proteccin de datos personales en transacciones y trmites en lnea.",tematicas:["Ciberseguridad","Proteccin de Datos","Trmites Digitales"]},{id:8,descripcion:"Colabora en proyectos digitales multidisciplinarios utilizando plataformas de gestin de proyectos.",tematicas:["Trabajo Colaborativo","Gestin de Proyectos","Herramientas Digitales"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-12T12:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Formacin Socioemocional I",semestre:1,metadata:{nombre_uac:"FORMACIN SOCIOEMOCIONAL I",semestre:1,creditos:0,horas_semanales:2,enfoque:"Educacin Fsica y Bienestar"},organizador_curricular:{categorias:["Responsabilidad Social","Cuidado Fsico Corporal","Bienestar Emocional Afectivo","Actividades Fsicas y Deportivas"],metas_aprendizaje:["M1 Prctica y Colaboracin Ciudadana: Valore la importancia de la construccin de ciudadana para involucrarse como agente de transformacin social.","M2 Educacin para la Salud: Cuide su salud a partir de la reflexin y transformacin de prcticas cotidianas para el bienestar personal y colectivo.","M3 Actividades Fsicas y Deportivas: Desarrolle hbitos conscientes y reflexivos en torno a la actividad fsica como medio para el desarrollo integral.","M4 Educacin Integral en Sexualidad y Gnero: Cuide su salud y proteja su integridad al desarrollar relaciones sociales y sexuales constructivas e igualitarias.","M5 Actividades Artsticas y Culturales: Desarrolle sensibilidad esttica y tica mediante el disfrute y el goce del arte como forma de comunicacin."],propositos_formativos:["Reconoce los principales instrumentos que tutelan los derechos humanos en general, y especficamente de las infancias, adolescencias y juventudes.","Analiza las causas de las situaciones de inseguridad y violencia existentes en su entorno familiar, escolar o comunitario y que afectan su bienestar fsico, mental, emocional o social, para promover acciones colectivas de autocuidado y una cultura de paz.","Reflexiona desde la perspectiva de gnero sobre las dimensiones de la violencia de gnero contra las mujeres y contra las diversidades sexogenricas, para promover relaciones de respeto a partir del reconocimiento de los derechos humanos.","Investiga la forma en que los hbitos de consumo, formas de produccin en la comunidad, y prcticas y comportamientos en la vida cotidiana influyen en el medio ambiente, el cambio climtico y el bienestar personal y colectivo a nivel local, nacional e internacional.","Desarrollar las habilidades de dilogo y escucha activa para la construccin de grupos de trabajo colaborativo durante la identificacin y solucin de problemas de su entorno.","Desarrolla, junto con la comunidad estudiantil a la que pertenece, una conciencia crtica y reflexiva sobre los hbitos que configuran su existencia, y promueve el cuidado de s como una prctica tica que articula el bienestar fsico, emocional, mental y social.","Desarrolla la capacidad de discernir y elegir prcticas alimenticias que expresen un cuidado consciente de s, del cuerpo y del entorno, para fomentar una relacin tica con la alimentacin que reconozca su dimensin cultural, ecolgica y poltica, y que contribuya a una vida ms justa y sostenible.","Identifica, analiza y transforma los factores que afectan el bienestar, a partir del ejercicio del cuidado de s con autoconocimiento, autodominio y libertad tica, para convertirse en agente activo de la salud que reconoce su poder de decisin ante prcticas riesgosas.","Impulsa la construccin de las relaciones interpersonales, basadas en el respeto, el dilogo y el reconocimiento de las diferencias entre personas, entediendo que el cuidado de s, incluye la manera de vincularse con las dems personas, para promover una tica de la convivencia que contribuya al bienestar comn y a la transformacin de dinmicas violentas.","Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.","Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.","Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.","Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.","Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas.","Comprende la identidad y orientacin sexual, as como la construccin de vnculos afectivos saludables, mediante habilidades de comunicacin, dilogo y responsabilidad afectiva en relaciones sociales.","Reconoce las dimensiones de la sexualidad desde un enfoque de derechos humanos y sexuales, desmitificando creencias, hbitos y estereotipos, y valorando la diversidad sexual como parte de la identidad y expresin colectiva.","Analiza la influencia de los roles de gnero en la toma de decisiones sobre la vida sexual y reproductiva, y promueve tanto la prevencin de embarazos no planificados como el ejercicio informado y corresponsable de la sexualidad.","Desarrolla una conciencia crtica sobre le cuerpo, la autonoma y el placer, al cuestionar las normas sociales, culturales y de gnero que propician la discriminacin y la violencia.","Ejerce una ciudadana sexual crtica e informada, que integra el cuidado de s, el acceso a la salud sexual y reproductiva, y la construccin de un proyecto de vida con perspectiva de gnero, libre de estereotipos, violencias y jerarquas.","Participa de diversas expresiones artsticas para comunicar emociones, ideas y experiencias personales y del colectivo al que pertenece.","Genera manifestaciones artsticas variadas como formas de expresin poltica frente a los problemas que afectan a su comunidad y entorno.","Recrea la obra de artistas cuyas creaciones buscaron problematizar la realidad y dar cuenta de un posicionamiento poltico, y formaron parte de procesos colectivos de transformacin social.","Experimenta el arte como un espacio para el autodescubrimiento y el autoconocimiento en el marco de la complejidad de su contexto y momento histrico."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la cultura fsica como un derecho humano que contribuye al bienestar integral y la salud.",tematicas:["Cultura fsica","Derecho humano","Bienestar integral"]},{id:2,descripcion:"Identifica y practica hbitos de higiene, alimentacin y descanso para favorecer su desarrollo fsico y prevenir enfermedades.",tematicas:["Higiene","Alimentacin saludable","Hbitos de descanso"]},{id:3,descripcion:"Determina su condicin fsica actual a travs de pruebas de valoracin diagnstica para establecer metas de mejora personal.",tematicas:["Condicin fsica","Valoracin funcional","Metas personales"]},{id:4,descripcion:"Ejecuta actividades de activacin fsica sistemtica para fortalecer sus capacidades fsicas (fuerza, resistencia, velocidad, flexibilidad).",tematicas:["Capacidades fsicas","Activacin fsica","Entrenamiento bsico"]},{id:5,descripcion:"Reconoce la importancia de practicar deporte y actividad fsica para la regulacin de emociones y reduccin del estrs.",tematicas:["Regulacin emocional","Manejo de estrs","Salud mental"]},{id:6,descripcion:"Participa en juegos y actividades deportivas de conjunto promoviendo la integracin, el respeto y la colaboracin grupal.",tematicas:["Deportes de conjunto","Valores sociales","Trabajo en equipo"]},{id:7,descripcion:"Analiza los riesgos del sedentarismo en la sociedad actual y propone alternativas para una vida activa en su comunidad.",tematicas:["Sedentarismo","Vida saludable","Propuesta comunitaria"]},{id:8,descripcion:"Aplica tcnicas de respiracin y relajacin post-ejercicio para favorecer la recuperacin fsica y el equilibrio mental.",tematicas:["Tcnicas de relajacin","Recuperacin fsica","Equilibrio mental"]}],url_fuente:"https://dgb.sep.gob.mx/storage/recursos/2024/07/V2N8WnBUGb-programa_formacion_socioemocional-19%20080724.pdf",orientaciones_didacticas:["Aprendizaje Basado en Proyectos (ABP)","Crculos deliberativos y dilogos socrticos","Juegos de roles y sociodramas","Cartografas sociales y mapeos comunitarios","Asambleas escolares y deportivas","Cine-debates y anlisis de medios","Campaas de sensibilizacin pblica","Teatro y expresiones artsticas colaborativas"],criterios_evaluacion:[{aspecto:"Autoconocimiento",descripcion:"Capacidad de reconocer emociones y necesidades personales.",porcentaje:20},{aspecto:"Participacin Colaborativa",descripcion:"Integracin y respeto en actividades de grupo.",porcentaje:30},{aspecto:"Reflexin Crtica",descripcion:"Anlisis sobre el impacto de hbitos y conductas en el bienestar.",porcentaje:25},{aspecto:"Accin Transformadora",descripcion:"Propuesta y ejecucin de acciones para la mejora del entorno.",porcentaje:25}],bibliografia:[{tipo:"libro",titulo:"Y el cerebro cre al hombre",autor:"Damasio, A.",ao:2010,disponibilidad:"digital"},{tipo:"libro",titulo:"Crear capacidades: Propuesta para el desarrollo humano",autor:"Nussbaum, M.",ao:2012,disponibilidad:"biblioteca"},{tipo:"libro",titulo:"Homo Ludens",autor:"Huizinga, J.",ao:2012,disponibilidad:"biblioteca"},{tipo:"manual",titulo:"Programas de Estudio MCCEMS 2025",autor:"DGB-SEP",ao:2025,disponibilidad:"digital"}],fecha_extraccion:"2026-02-08T01:33:44.724Z"},{materia:"La materia y sus interacciones CNEYT I",semestre:1,metadata:{nombre_uac:"LA MATERIA Y SUS INTERACCIONES CNEYT I",semestre:1,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La materia y sus interacciones CNEYT I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de La materia y sus interacciones CNEYT I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de La materia y sus interacciones CNEYT I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conservacin de la energa y su interaccin con la materia CNEYT II",semestre:2,metadata:{nombre_uac:"CONSERVACIN DE LA ENERGA Y SU INTERACCIN CON LA MATERIA CNEYT II",semestre:2,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conservacin de la energa y su interaccin con la materia CNEYT II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Conservacin de la energa y su interaccin con la materia CNEYT II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Conservacin de la energa y su interaccin con la materia CNEYT II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ecosistemas, interacciones, energia y dinamica CNEYT III",semestre:3,metadata:{nombre_uac:"ECOSISTEMAS, INTERACCIONES, ENERGIA Y DINAMICA CNEYT III",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ecosistemas, interacciones, energia y dinamica CNEYT III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Ecosistemas, interacciones, energia y dinamica CNEYT III.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Ecosistemas, interacciones, energia y dinamica CNEYT III en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ciencias Sociales III",semestre:4,metadata:{nombre_uac:"CIENCIAS SOCIALES III",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Ciencias Sociales III.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Ciencias Sociales III en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conciencia Histrica I",semestre:4,metadata:{nombre_uac:"CONCIENCIA HISTRICA I",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Conciencia Histrica I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Conciencia Histrica I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Reacciones qumicas conservacin de la materia CNEYT IV",semestre:4,metadata:{nombre_uac:"REACCIONES QUMICAS CONSERVACIN DE LA MATERIA CNEYT IV",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Reacciones qumicas conservacin de la materia CNEYT IV bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Reacciones qumicas conservacin de la materia CNEYT IV.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Reacciones qumicas conservacin de la materia CNEYT IV en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"La energa en los procesos de la vida diaria CNEYT V",semestre:5,metadata:{nombre_uac:"LA ENERGA EN LOS PROCESOS DE LA VIDA DIARIA CNEYT V",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La energa en los procesos de la vida diaria CNEYT V bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de La energa en los procesos de la vida diaria CNEYT V.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de La energa en los procesos de la vida diaria CNEYT V en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos Fsicos I",semestre:5,metadata:{nombre_uac:"ANLISIS DE FENMENOS FSICOS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos Fsicos I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Anlisis de Fenmenos Fsicos I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Anlisis de Fenmenos Fsicos I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Derecho y Sociedad I",semestre:5,metadata:{nombre_uac:"DERECHO Y SOCIEDAD I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Derecho y Sociedad I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Derecho y Sociedad I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Derecho y Sociedad I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Fundamentos de Administracin I",semestre:5,metadata:{nombre_uac:"FUNDAMENTOS DE ADMINISTRACIN I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Fundamentos de Administracin I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Fundamentos de Administracin I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Fundamentos de Administracin I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Organismos, estructuras y procesos CNEYT VI",semestre:6,metadata:{nombre_uac:"ORGANISMOS, ESTRUCTURAS Y PROCESOS CNEYT VI",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Organismos, estructuras y procesos CNEYT VI bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Organismos, estructuras y procesos CNEYT VI.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Organismos, estructuras y procesos CNEYT VI en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos Fsicos II",semestre:6,metadata:{nombre_uac:"ANLISIS DE FENMENOS FSICOS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos Fsicos II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Anlisis de Fenmenos Fsicos II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Anlisis de Fenmenos Fsicos II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Derecho y Sociedad II",semestre:6,metadata:{nombre_uac:"DERECHO Y SOCIEDAD II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Derecho y Sociedad II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Derecho y Sociedad II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Derecho y Sociedad II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Races etimolgicas del espaol I",semestre:5,metadata:{nombre_uac:"RACES ETIMOLGICAS DEL ESPAOL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Races etimolgicas del espaol I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Races etimolgicas del espaol I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Races etimolgicas del espaol I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Races etimolgicas del espaol I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Probabilidad y Estadstica I",semestre:5,metadata:{nombre_uac:"TALLER DE PROBABILIDAD Y ESTADSTICA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Probabilidad y Estadstica I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Probabilidad y Estadstica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Probabilidad y Estadstica I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Probabilidad y Estadstica I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Comunicacin y Sociedad I",semestre:5,metadata:{nombre_uac:"COMUNICACIN Y SOCIEDAD I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Comunicacin y Sociedad I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Comunicacin y Sociedad I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Comunicacin y Sociedad I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Comunicacin y Sociedad I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Pensamiento Variacional I",semestre:5,metadata:{nombre_uac:"TALLER DE PENSAMIENTO VARIACIONAL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Pensamiento Variacional I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Pensamiento Variacional I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Pensamiento Variacional I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Pensamiento Variacional I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Psicologa I",semestre:5,metadata:{nombre_uac:"PSICOLOGA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Psicologa I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Psicologa I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Psicologa I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Psicologa I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Filosfico I",semestre:5,metadata:{nombre_uac:"PENSAMIENTO FILOSFICO I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Filosfico I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Filosfico I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Filosfico I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Filosfico I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos y Procesos Biolgicos",semestre:5,metadata:{nombre_uac:"ANLISIS DE FENMENOS Y PROCESOS BIOLGICOS",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Anlisis de Fenmenos y Procesos Biolgicos."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos y Procesos Biolgicos bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Anlisis de Fenmenos y Procesos Biolgicos.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Anlisis de Fenmenos y Procesos Biolgicos.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico Aplicado a las Finanzas I",semestre:5,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO APLICADO A LAS FINANZAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Matemtico Aplicado a las Finanzas I."],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Matemtico Aplicado a las Finanzas I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Matemtico Aplicado a las Finanzas I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingles V",semestre:5,metadata:{nombre_uac:"INGLES V",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Ingles V."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingles V bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Ingles V.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Ingles V.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Dibujo Tcnico I",semestre:5,metadata:{nombre_uac:"DIBUJO TCNICO I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Dibujo Tcnico I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Dibujo Tcnico I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Dibujo Tcnico I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Dibujo Tcnico I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Salud Integral I",semestre:5,metadata:{nombre_uac:"SALUD INTEGRAL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Salud Integral I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Salud Integral I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Salud Integral I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Salud Integral I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Economa I. La funcin de los agentes econmicos en la sociedad",semestre:5,metadata:{nombre_uac:"ECONOMA I. LA FUNCIN DE LOS AGENTES ECONMICOS EN LA SOCIEDAD",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Economa I. La funcin de los agentes econmicos en la sociedad."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Economa I. La funcin de los agentes econmicos en la sociedad bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Economa I. La funcin de los agentes econmicos en la sociedad.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Economa I. La funcin de los agentes econmicos en la sociedad.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Procesos ContabIes I",semestre:5,metadata:{nombre_uac:"PROCESOS CONTABIES I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Procesos ContabIes I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Procesos ContabIes I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Procesos ContabIes I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Procesos ContabIes I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Ciencias Sociales I",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE CIENCIAS SOCIALES I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Ciencias Sociales I."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Ciencias Sociales I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Ciencias Sociales I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Arte y Cultura I",semestre:5,metadata:{nombre_uac:"ARTE Y CULTURA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Arte y Cultura I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Arte y Cultura I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Arte y Cultura I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Arte y Cultura I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lgica y Pensamiento Crtico",semestre:5,metadata:{nombre_uac:"LGICA Y PENSAMIENTO CRTICO",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Lgica y Pensamiento Crtico."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Lgica y Pensamiento Crtico bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Lgica y Pensamiento Crtico.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Lgica y Pensamiento Crtico.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Fundamentos de Administracin II",semestre:6,metadata:{nombre_uac:"FUNDAMENTOS DE ADMINISTRACIN II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Fundamentos de Administracin II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Fundamentos de Administracin II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Fundamentos de Administracin II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Fundamentos de Administracin II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Organizacin del flujo de materia y energa en los organismos II",semestre:6,metadata:{nombre_uac:"ORGANIZACIN DEL FLUJO DE MATERIA Y ENERGA EN LOS ORGANISMOS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Organizacin del flujo de materia y energa en los organismos II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Organizacin del flujo de materia y energa en los organismos II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Organizacin del flujo de materia y energa en los organismos II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Organizacin del flujo de materia y energa en los organismos II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Races etimolgicas del espaol II",semestre:6,metadata:{nombre_uac:"RACES ETIMOLGICAS DEL ESPAOL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Races etimolgicas del espaol II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Races etimolgicas del espaol II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Races etimolgicas del espaol II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Races etimolgicas del espaol II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Probabilidad y Estadstica II",semestre:6,metadata:{nombre_uac:"TALLER DE PROBABILIDAD Y ESTADSTICA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Probabilidad y Estadstica II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Probabilidad y Estadstica II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Probabilidad y Estadstica II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Probabilidad y Estadstica II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Pensamiento Variacional II",semestre:6,metadata:{nombre_uac:"TALLER DE PENSAMIENTO VARIACIONAL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Pensamiento Variacional II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Pensamiento Variacional II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Pensamiento Variacional II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Pensamiento Variacional II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Comunicacin y Sociedad II",semestre:6,metadata:{nombre_uac:"COMUNICACIN Y SOCIEDAD II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Comunicacin y Sociedad II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Comunicacin y Sociedad II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Comunicacin y Sociedad II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Comunicacin y Sociedad II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Psicologa II",semestre:6,metadata:{nombre_uac:"PSICOLOGA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Psicologa II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Psicologa II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Psicologa II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Psicologa II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Filosfico II",semestre:6,metadata:{nombre_uac:"PENSAMIENTO FILOSFICO II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Filosfico II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Filosfico II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Filosfico II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Filosfico II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Biologa",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE BIOLOGA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Biologa."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Biologa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Biologa.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Biologa.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingles VI",semestre:6,metadata:{nombre_uac:"INGLES VI",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Ingles VI."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingles VI bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Ingles VI.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Ingles VI.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Dibujo TcnicoII",semestre:6,metadata:{nombre_uac:"DIBUJO TCNICOII",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Dibujo TcnicoII."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Dibujo TcnicoII bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Dibujo TcnicoII.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Dibujo TcnicoII.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico Aplicado a las Finanzas-II",semestre:6,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO APLICADO A LAS FINANZAS-II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Matemtico Aplicado a las Finanzas-II."],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Matemtico Aplicado a las Finanzas-II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Matemtico Aplicado a las Finanzas-II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Salud Integral II",semestre:6,metadata:{nombre_uac:"SALUD INTEGRAL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Salud Integral II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Salud Integral II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Salud Integral II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Salud Integral II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Economa II. Poltica econmica y poltica pblica mexicana",semestre:6,metadata:{nombre_uac:"ECONOMA II. POLTICA ECONMICA Y POLTICA PBLICA MEXICANA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Economa II. Poltica econmica y poltica pblica mexicana."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Economa II. Poltica econmica y poltica pblica mexicana bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Economa II. Poltica econmica y poltica pblica mexicana.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Economa II. Poltica econmica y poltica pblica mexicana.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Procesos ContabIes II",semestre:6,metadata:{nombre_uac:"PROCESOS CONTABIES II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Procesos ContabIes II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Procesos ContabIes II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Procesos ContabIes II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Procesos ContabIes II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Ciencias Sociales II",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE CIENCIAS SOCIALES II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Ciencias Sociales II."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Ciencias Sociales II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Ciencias Sociales II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Arte y Cultura II",semestre:6,metadata:{nombre_uac:"ARTE Y CULTURA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Arte y Cultura II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Arte y Cultura II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Arte y Cultura II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Arte y Cultura II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Experiencia Esttica",semestre:6,metadata:{nombre_uac:"EXPERIENCIA ESTTICA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Experiencia Esttica."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Experiencia Esttica bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Experiencia Esttica.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Experiencia Esttica.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Tecnologas de la Comunicacin y la Informacin",semestre:3,metadata:{nombre_uac:"TECNOLOGAS DE LA COMUNICACIN Y LA INFORMACIN",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Tecnologas de la Comunicacin y la Informacin."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Tecnologas de la Comunicacin y la Informacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Tecnologas de la Comunicacin y la Informacin.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Tecnologas de la Comunicacin y la Informacin.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Higiene y Salud Comunitaria",semestre:3,metadata:{nombre_uac:"HIGIENE Y SALUD COMUNITARIA",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Higiene y Salud Comunitaria."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Higiene y Salud Comunitaria bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Higiene y Salud Comunitaria.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Higiene y Salud Comunitaria.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Diseo grfico",semestre:3,metadata:{nombre_uac:"DISEO GRFICO",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Diseo grfico."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Diseo grfico bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Diseo grfico.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Diseo grfico.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Literario",semestre:5,metadata:{nombre_uac:"PENSAMIENTO LITERARIO",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Pensamiento Literario."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Literario bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Pensamiento Literario.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Cultura Digital",semestre:5,metadata:{nombre_uac:"TALLER DE CULTURA DIGITAL",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Cultura Digital."],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Cultura Digital.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Matemticas I",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE MATEMTICAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Temas Selectos de Matemticas I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Matemticas I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Temas Selectos de Matemticas I.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Matemticas II",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE MATEMTICAS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Temas Selectos de Matemticas II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Matemticas II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Temas Selectos de Matemticas II.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Espacio y Sociedad",semestre:5,metadata:{nombre_uac:"ESPACIO Y SOCIEDAD",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Espacio y Sociedad."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Espacio y Sociedad bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Espacio y Sociedad.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Ciencias I",semestre:5,metadata:{nombre_uac:"TALLER DE CIENCIAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Ciencias I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Ciencias I.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Laboratorio de Investigacin",semestre:5,metadata:{nombre_uac:"LABORATORIO DE INVESTIGACIN",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Laboratorio de Investigacin."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Laboratorio de Investigacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Laboratorio de Investigacin.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Ciencias II",semestre:6,metadata:{nombre_uac:"TALLER DE CIENCIAS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Ciencias II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Ciencias II.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Fsicas y Deportivas I 2025",semestre:1,metadata:{nombre_uac:"ACTIVIDADES FSICAS Y DEPORTIVAS I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Vida Saludable","Cultura Fsica"],metas_aprendizaje:["Desarrollo fsico","Cuidado de la salud"],propositos_formativos:["Fomentar hbitos de vida saludable y la prctica regular de actividad fsica."]},progresiones:[{id:1,descripcion:"Evala su condicin fsica actual mediante pruebas diagnsticas para identificar reas de oportunidad en su salud y capacidades fsicas.",tematicas:["Diagnstico fsico","ndice de Masa Corporal","Capacidades fsicas condicionales"]},{id:2,descripcion:"Comprende los beneficios fisiolgicos y psicolgicos de la actividad fsica regular y los riesgos del sedentarismo.",tematicas:["Salud y deporte","Sedentarismo","Beneficios de la actividad fsica"]},{id:3,descripcion:"Desarrolla sus capacidades fsicas condicionales (fuerza, velocidad, resistencia y flexibilidad) a travs de rutinas especficas.",tematicas:["Acondicionamiento fsico","Rutinas de ejercicio","Fuerza y resistencia"]},{id:4,descripcion:"Aplica los fundamentos tcnicos bsicos de un deporte de conjunto o individual, respetando sus reglas.",tematicas:["Fundamentos deportivos","Reglamento deportivo","Tcnica individual"]},{id:5,descripcion:"Practica el juego limpio (Fair Play) y el trabajo colaborativo en actividades ldicas y deportivas.",tematicas:["Valores en el deporte","Trabajo en equipo","Juego limpio"]}],orientaciones_didacticas:["Asambleas deportivas","Diarios de reflexin corporal"],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Fsicas y Deportivas II 2025",semestre:2,metadata:{nombre_uac:"ACTIVIDADES FSICAS Y DEPORTIVAS II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Vida Saludable","Integracin Social"],metas_aprendizaje:["Convivencia deportiva","Gestin de torneos"],propositos_formativos:["Integrar el deporte como medio para la convivencia social y el desarrollo personal."]},progresiones:[{id:1,descripcion:"Perfecciona las tcnicas y tcticas de un deporte especfico, integrando estrategias de juego colectivo.",tematicas:["Estrategia deportiva","Tctica","Tcnica avanzada"]},{id:2,descripcion:"Organiza y participa en torneos deportivos intramuros, asumiendo diferentes roles (jugador, rbitro, organizador).",tematicas:["Organizacin de eventos","Arbitraje","Gestin deportiva"]},{id:3,descripcion:"Disea un plan personal de actividad fsica para mantener un estilo de vida saludable a largo plazo.",tematicas:["Plan de vida saludable","Hbitos saludables","Autocuidado"]},{id:4,descripcion:"Analiza el impacto del deporte en la integracin social y la prevencin de conductas de riesgo.",tematicas:["Deporte y sociedad","Prevencin de adicciones","Convivencia sana"]},{id:5,descripcion:"Demuestra liderazgo y actitudes positivas al resolver conflictos durante la prctica deportiva.",tematicas:["Liderazgo","Resolucin de conflictos","Inteligencia emocional en el deporte"]}],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Prctica y Colaboracin Ciudadana I 2025",semestre:1,metadata:{nombre_uac:"PRCTICA Y COLABORACIN CIUDADANA I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Valore la importancia de la construccin de ciudadana..."],propositos_formativos:["Reconoce los principales instrumentos que tutelan los derechos humanos...","Analiza las causas de las situaciones de inseguridad y violencia...","Reflexiona desde la perspectiva de gnero...","Investiga la forma en que los hbitos de consumo...","Desarrolla las habilidades de dilogo..."]},progresiones:[],orientaciones_didacticas:["Proyectos sociales"],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Prctica y Colaboracin Ciudadana II 2025",semestre:2,metadata:{nombre_uac:"PRCTICA Y COLABORACIN CIUDADANA II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Valore la importancia de la construccin de ciudadana..."],propositos_formativos:["Accin ciudadana y democracia participativa."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin para la Salud I 2025",semestre:1,metadata:{nombre_uac:"EDUCACIN PARA LA SALUD I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud a partir de la reflexin y transformacin de prcticas cotidianas..."],propositos_formativos:["Desarrolla una conciencia crtica sobre los hbitos...","Discernir y elegir prcticas alimenticias...","Identifica, analiza y transforma factores de riesgo...","Impulsa la construccin de relaciones interpersonales..."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin para la Salud II 2025",semestre:2,metadata:{nombre_uac:"EDUCACIN PARA LA SALUD II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud..."],propositos_formativos:["Bienestar integral y prevencin."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin Integral en Sexualidad y Gnero I 2025",semestre:1,metadata:{nombre_uac:"EDUCACIN INTEGRAL EN SEXUALIDAD Y GNERO I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud y proteja su integridad..."],propositos_formativos:["Comprende la identidad y orientacin sexual...","Reconoce las dimensiones de la sexualidad...","Analiza la influencia de los roles de gnero...","Desarrolla una conciencia crtica sobre el cuerpo...","Ejerce una ciudadana sexual crtica e informada."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin Integral en Sexualidad y Gnero II 2025",semestre:2,metadata:{nombre_uac:"EDUCACIN INTEGRAL EN SEXUALIDAD Y GNERO II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud..."],propositos_formativos:["Derechos y autonoma corporal."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Artsticas y Culturales I 2025",semestre:1,metadata:{nombre_uac:"ACTIVIDADES ARTSTICAS Y CULTURALES I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle sensibilidad esttica y tica..."],propositos_formativos:["Participa de diversas expresiones artsticas...","Genera manifestaciones artsticas variadas...","Recrea la obra de artistas...","Experimenta el arte como un espacio para el autodescubrimiento."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Artsticas y Culturales II 2025",semestre:2,metadata:{nombre_uac:"ACTIVIDADES ARTSTICAS Y CULTURALES II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle sensibilidad esttica y tica..."],propositos_formativos:["Expresin y goce esttico."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"}];class nz{constructor(){Rd(this,"programas",[]);Rd(this,"indexPorMateria",new Map);Rd(this,"indexPorSemestre",new Map);this.cargarProgramas(),this.construirIndices()}cargarProgramas(){try{this.programas=MI,console.log(` Cargados ${this.programas.length} programas MCCEMS`)}catch(e){console.error(" Error cargando programas SEP:",e),this.programas=[]}}construirIndices(){this.programas.forEach(e=>{const n=this.normalizarNombre(e.materia);this.indexPorMateria.has(n)||this.indexPorMateria.set(n,[]),this.indexPorMateria.get(n).push(e)}),this.programas.forEach(e=>{this.indexPorSemestre.has(e.semestre)||this.indexPorSemestre.set(e.semestre,[]),this.indexPorSemestre.get(e.semestre).push(e)})}normalizarNombre(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").trim()}buscarPorMateria(e){const n=this.normalizarNombre(e);if(this.indexPorMateria.has(n))return this.indexPorMateria.get(n);const s=[];return this.indexPorMateria.forEach((a,i)=>{(i.includes(n)||n.includes(i))&&s.push(...a)}),s}buscarPorSemestre(e){return this.indexPorSemestre.get(e)||[]}buscarPorMateriaYSemestre(e,n){return this.buscarPorMateria(e).find(i=>i.semestre===n)||null}obtenerProgresiones(e,n){let s;if(n!==void 0){const a=this.buscarPorMateriaYSemestre(e,n);s=a?[a]:[]}else s=this.buscarPorMateria(e);return s.flatMap(a=>a.progresiones)}obtenerMetasAprendizaje(e,n){const s=this.buscarPorMateriaYSemestre(e,n);return(s==null?void 0:s.organizador_curricular.metas_aprendizaje)||[]}validarPlaneacion(e,n,s){const a=this.buscarPorMateriaYSemestre(e,n);if(!a)return{esValida:!1,progresionesOficiales:[],coincidencias:0,sugerencias:[`No se encontr el programa oficial para ${e} semestre ${n}`]};const i=a.progresiones;let o=0;const l=[];return s.forEach(c=>{const d=this.normalizarNombre(c);if(i.some(p=>this.normalizarNombre(p.descripcion).includes(d)||d.includes(this.normalizarNombre(p.descripcion))))o++;else{const p=i[0];l.push(`"${c}" no coincide con progresiones oficiales. Considera: "${p.descripcion.substring(0,100)}..."`)}}),{esValida:o>0,progresionesOficiales:i,coincidencias:o,sugerencias:l.slice(0,3)}}generarContextoIA(e,n){var i,o,l,c,d,m;const s=this.buscarPorMateriaYSemestre(e,n);return s?`
PROGRAMA OFICIAL MCCEMS - DGB/SEP
Materia: ${s.materia}
Semestre: ${s.semestre}
${s.metadata.creditos?`Crditos: ${s.metadata.creditos}`:""}
${s.metadata.horas_semanales?`Horas semanales: ${s.metadata.horas_semanales}`:""}

ORGANIZADOR CURRICULAR:
Categoras: ${((o=(i=s.organizador_curricular)==null?void 0:i.categorias)==null?void 0:o.join(", "))||"No definidas"}

PROGRESIONES DE APRENDIZAJE (${((l=s.progresiones)==null?void 0:l.length)||0} total):
${((c=s.progresiones)==null?void 0:c.slice(0,5).map(p=>`${p.id}. ${p.descripcion.substring(0,150)}...`).join(`
`))||"Sin progresiones registradas"}

METAS DE APRENDIZAJE:
${((m=(d=s.organizador_curricular)==null?void 0:d.metas_aprendizaje)==null?void 0:m.slice(0,3).join(`
`))||"Generales del MCCEMS"}

Fuente oficial: ${s.url_fuente||"DGB-SEP"}
Fecha de extraccin: ${s.fecha_extraccion?new Date(s.fecha_extraccion).toLocaleDateString("es-MX"):"Reciente"}
        `.trim():`No se encontr informacin oficial para ${e} semestre ${n}.`}obtenerEstadisticas(){return{totalProgramas:this.programas.length,programasPorSemestre:Array.from(this.indexPorSemestre.entries()).map(([e,n])=>({semestre:e,cantidad:n.length})).sort((e,n)=>e.semestre-n.semestre),materiasDisponibles:Array.from(this.indexPorMateria.keys()),ultimaActualizacion:this.programas.reduce((e,n)=>{const s=new Date(n.fecha_extraccion);return s>e?s:e},new Date(0))}}}const Rn=new nz,sz=({subject:t,setSubject:e})=>{const[n,s]=P.useState([]),[a,i]=P.useState(!0);P.useEffect(()=>{const g=Rn.obtenerEstadisticas().materiasDisponibles,x=[];g.forEach(A=>{const b=Rn.buscarPorMateria(A);x.push(...b)});const y=new Map;x.forEach(A=>y.set(A.materia+A.semestre,A));const T=Array.from(y.values());T.sort((A,b)=>A.semestre!==b.semestre?A.semestre-b.semestre:A.materia.localeCompare(b.materia)),s(T),i(!1)},[]);const o=p=>{var y,T;const g=p.target.value,x=n.find(A=>A.materia===g);x&&e({subjectId:x.materia,subjectName:x.materia,mccemsCategory:((T=(y=x.organizador_curricular)==null?void 0:y.categorias)==null?void 0:T[0])||"Asignatura MCCEMS",formativePurpose:`Alinear al programa oficial de ${x.materia} (Semestre ${x.semestre})`,curriculumContent:`Basado en el documento oficial: ${x.url_fuente}`})},{user:l}=ct(),c=[],d={};n.forEach(p=>{var x;const g=(x=l==null?void 0:l.materias)==null?void 0:x.some(y=>y.toLowerCase()===p.materia.toLowerCase());g&&(c.find(y=>y.materia===p.materia)||c.push(p)),g||(d[p.semestre]||(d[p.semestre]=[]),d[p.semestre].push(p))});const m=n.find(p=>p.materia===t.subjectId)||n.find(p=>p.materia===t.subjectName);return r.jsxs("div",{className:"space-y-4 bg-indigo-50/50 p-6 rounded-2xl border border-indigo-100",children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-800 font-bold text-sm mb-2",children:[r.jsx(oU,{className:"w-4 h-4"}),"Configuracin Curricular Oficial (SEP - DGB)"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-tight",children:"Selecciona tu Asignatura Oficial"}),a?r.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm p-3",children:[r.jsx(rl,{className:"w-4 h-4 animate-spin"})," Cargando catlogo oficial..."]}):r.jsxs("select",{value:t.subjectName,onChange:o,className:"w-full px-4 py-3 rounded-xl border border-white bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-slate-700 font-medium cursor-pointer",children:[r.jsx("option",{value:"",children:"-- Elige una Materia del Catlogo --"}),c.length>0&&r.jsx("optgroup",{label:" Mis Materias Asignadas",children:c.map(p=>r.jsx("option",{value:p.materia,children:p.materia},`my-${p.materia}`))}),Object.keys(d).map(p=>r.jsx("optgroup",{label:`Semestre ${p}`,children:d[Number(p)].map(g=>r.jsx("option",{value:g.materia,children:g.materia},g.materia+g.semestre))},p))]})]}),m&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl border border-indigo-100 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 text-emerald-700 p-2 rounded-lg",children:r.jsx(RI,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase",children:"Programa Oficial Detectado"}),r.jsxs("div",{className:"text-[11px] text-slate-500 truncate max-w-[200px] md:max-w-md",children:[m.materia," (Semestre ",m.semestre,")"]})]})]}),r.jsx("a",{href:m.url_fuente,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver Programa Oficial",children:r.jsx($g,{className:"w-5 h-5"})})]})]})},Tr="schools",zE="users";class az{generateAccessCode(e){return e.replace(/[^A-Z0-9]/gi,"").toUpperCase().substring(0,8)}async createSchool(e,n){try{const s=this.generateAccessCode(e.cct);if(await this.getSchoolByCCT(e.cct))throw new Error("Ya existe una escuela registrada con este CCT");const i={nombre:e.nombre,cct:e.cct.toUpperCase(),municipio:e.municipio,estado:e.estado,turno:e.turno,codigoAcceso:s,createdAt:new Date().toISOString(),createdBy:n,activa:!0,estadisticas:{totalDocentes:1,totalPlaneaciones:0,ultimaActualizacion:new Date().toISOString()},directivos:[n]};return{id:(await es(ue(J,Tr),i)).id,...i}}catch(s){throw console.error("Error al crear escuela:",s),s}}async getSchoolByCCT(e){try{const n=$e(ue(J,Tr),Ze("cct","==",e.toUpperCase()),oo(1)),s=await je(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){throw console.error("Error al buscar escuela por CCT:",n),n}}async getSchoolByCode(e){try{const n=$e(ue(J,Tr),Ze("codigoAcceso","==",e.toUpperCase()),oo(1)),s=await je(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){throw console.error("Error al buscar escuela por cdigo:",n),n}}async searchSchools(e){try{const n=$e(ue(J,Tr),Ze("activa","==",!0),Ds("nombre"),oo(50)),a=(await je(n)).docs.map(l=>({id:l.id,...l.data()})),i=e.toLowerCase();return a.filter(l=>l.nombre.toLowerCase().includes(i)||l.cct.toLowerCase().includes(i)||l.municipio.toLowerCase().includes(i)).map(l=>({id:l.id,nombre:l.nombre,cct:l.cct,municipio:l.municipio,turno:l.turno,codigoAcceso:l.codigoAcceso,totalDocentes:l.estadisticas.totalDocentes}))}catch(n){throw console.error("Error al buscar escuelas:",n),n}}async getSchoolById(e){try{const n=re(J,Tr,e),s=await kn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error al obtener escuela:",n),n}}async createUserProfile(e,n,s,a,i,o,l){try{const c=["Director","Subdirector"].includes(l.puesto)?"directivo":"maestro",d={email:n,nombre:s,apellidoPaterno:a,schoolId:i,schoolName:o,puesto:l.puesto,rol:c,materias:l.materias,grados:l.grados,telefono:l.telefono,createdAt:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),onboardingCompleto:!0},m=re(J,zE,e);return await dr(m,d,{merge:!0}),await this.incrementSchoolDocentes(i),{id:e,...d}}catch(c){throw console.error("Error al crear perfil de usuario:",c),c}}async getUserProfile(e){try{const n=re(J,zE,e),s=await kn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error al obtener perfil de usuario:",n),n}}async incrementSchoolDocentes(e){var n;try{const s=re(J,Tr,e),a=await kn(s);if(a.exists()){const i=((n=a.data().estadisticas)==null?void 0:n.totalDocentes)||0;await xt(s,{"estadisticas.totalDocentes":i+1,"estadisticas.ultimaActualizacion":new Date().toISOString()})}}catch(s){console.error("Error al incrementar docentes:",s)}}async needsOnboarding(e){try{const n=await this.getUserProfile(e);return!n||!n.onboardingCompleto}catch(n){return console.error("Error al verificar onboarding:",n),!0}}}const zc=new az,PI=Object.freeze(Object.defineProperty({__proto__:null,schoolService:zc},Symbol.toStringTag,{value:"Module"})),iz=({school:t,setSchool:e,subject:n,setSubject:s})=>{const a=d=>{e(m=>({...m,[d.target.name]:d.target.value}))},i=d=>{s(m=>({...m,[d.target.name]:d.target.value}))},{user:o}=ct(),[l,c]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(o&&o.schoolId&&(e(m=>({...m,schoolName:o.schoolName||m.schoolName})),!t.cct||t.cct!==o.schoolName)){c(!0);try{const m=await zc.getSchoolById(o.schoolId);if(m){e(p=>({...p,cct:m.cct||p.cct,municipality:m.municipio||p.municipality,shift:m.turno!=="Matutino"?m.turno:p.shift,vision:m.vision||p.vision,infrastructure:m.infraestructura||p.infrastructure}));try{const{doc:p,getDoc:g}=await No(async()=>{const{doc:A,getDoc:b}=await Promise.resolve().then(()=>$V);return{doc:A,getDoc:b}},void 0),{db:x}=await No(async()=>{const{db:A}=await Promise.resolve().then(()=>CI);return{db:A}},void 0),y=p(x,"pmc",o.schoolId),T=await g(y);if(T.exists()){const A=T.data();if(A.metas&&Array.isArray(A.metas)){const b=A.metas.map(N=>` ${N.description||"Meta sin descripcin"} (${N.area})`).join(`
`);e(N=>({...N,communityGoals:b}))}}}catch(p){console.error("Error loading PMC goals:",p)}}}catch(m){console.error("Error loading school details:",m)}finally{c(!1)}}})()},[o,o==null?void 0:o.schoolId]),r.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[r.jsxs("section",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold uppercase tracking-wider text-xs",children:[r.jsx(At,{className:"w-4 h-4"}),"Contexto Institucional"]}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-1",children:"Identidad de la Escuela"})]}),o&&r.jsxs("div",{className:"text-right hidden md:block",children:[r.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Autocompletado para"}),r.jsxs("p",{className:"text-sm font-medium text-indigo-600",children:[o.nombre," ",o.apellidoPaterno]})]})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 bg-indigo-50 p-3 rounded-lg mb-4 text-sm",children:[r.jsx(rl,{className:"w-4 h-4 animate-spin"}),"Sincronizando datos de tu escuela..."]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Lm,{className:"w-4 h-4 text-slate-400"})," Nombre del Plantel"]}),r.jsx("input",{name:"schoolName",value:t.schoolName,onChange:a,className:`w-full px-4 py-2 rounded-xl border outline-none transition-all ${o!=null&&o.schoolName?"bg-indigo-50 border-indigo-200":"border-slate-200 focus:ring-2 focus:ring-indigo-500"}`,placeholder:"Ej. Bachillerato Gral. Oficial Emiliano Zapata"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-slate-400"})," Clave de Centro de Trabajo (CCT) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{name:"cct",value:t.cct,onChange:a,className:`w-full px-4 py-2 rounded-xl border outline-none transition-all uppercase ${t.cct?"border-slate-200 focus:ring-2 focus:ring-indigo-500":"border-red-200 bg-red-50"}`,placeholder:"Ej. 21EBH0000X"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Turno"}),r.jsxs("select",{name:"shift",value:t.shift,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:[r.jsx("option",{value:"Matutino",children:"Matutino"}),r.jsx("option",{value:"Vespertino",children:"Vespertino"}),r.jsx("option",{value:"Nocturno",children:"Nocturno"}),r.jsx("option",{value:"Discontinuo",children:"Discontinuo"}),r.jsx("option",{value:"Mixto",children:"Mixto"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Ciclo Escolar"}),r.jsx("input",{name:"cycle",value:t.cycle,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Ej. 2024-2025"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Municipio"}),r.jsx("input",{name:"municipality",value:t.municipality,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Ej. Puebla, Tehuacn..."})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-slate-400"})," Infraestructura"]}),r.jsx("input",{name:"infrastructure",value:t.infrastructure,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Aulas, Proyector, Internet..."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Visin de Direccin"}),r.jsx("textarea",{name:"vision",value:t.vision,onChange:a,rows:2,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Qu busca lograr la direccin?"})]})]})]}),r.jsxs("section",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold uppercase tracking-wider text-xs",children:[r.jsx(at,{className:"w-4 h-4"}),"Marco Curricular Comn (MCCEMS)"]}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-1",children:"Vinculacin con Normativa SEP"})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsx(sz,{subject:n,setSubject:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Materia / UAC"}),r.jsx("input",{name:"subjectName",value:n.subjectName,onChange:i,className:"w-full px-4 py-2 rounded-xl border border-slate-200 bg-slate-50 text-slate-500",placeholder:"Seleccionado automticamente...",readOnly:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Categora MCCEMS"}),r.jsx("input",{name:"mccemsCategory",value:n.mccemsCategory,className:"w-full px-4 py-2 rounded-xl border border-slate-200 bg-slate-50 text-slate-500 capitalize",readOnly:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:["Contenidos Adicionales de la Escuela",r.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-400 px-2 py-0.5 rounded-full uppercase",children:"Opcional"})]}),r.jsx("textarea",{name:"curriculumContent",value:n.curriculumContent,onChange:i,rows:4,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-mono text-[11px]",placeholder:"Pega aqu progresiones especficas si no usas las del selector..."})]})]})]}),r.jsxs("div",{className:"bg-amber-50 p-6 rounded-3xl border border-amber-100 flex items-start gap-4",children:[r.jsx("div",{className:"bg-amber-500 text-white rounded-xl p-2 mt-0.5 shadow-sm",children:r.jsx(QU,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-amber-900 text-sm",children:"Informacin Importante"}),r.jsx("p",{className:"text-xs text-amber-800 leading-relaxed mt-1",children:"Al seleccionar una UAC arriba, la IA consultar automticamente los documentos base del MCCEMS (2022-2024), las Progresiones de Aprendizaje y las Lneas de Poltica Pblica de la SEP. Esto garantiza que tus planeaciones sean tcnica y legalmente vlidas para auditoras de supervisin."})]})]})]})};var DI={exports:{}};(function(t,e){(function(n,s){t.exports=s(P)})(typeof self<"u"?self:hR,function(n){return function(){var s={155:function(N){N.exports=n}},a={};function i(N){var S=a[N];if(S!==void 0)return S.exports;var D=a[N]={exports:{}};return s[N](D,D.exports,i),D.exports}i.d=function(N,S){for(var D in S)i.o(S,D)&&!i.o(N,D)&&Object.defineProperty(N,D,{enumerable:!0,get:S[D]})},i.o=function(N,S){return Object.prototype.hasOwnProperty.call(N,S)},i.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{useReactToPrint:function(){return b}});var l=i(155);const c="printWindow";function d({level:N="error",messages:S,suppressErrors:D=!1}){D||(N==="error"?console.error(S):N==="warning"?console.warn(S):console.debug(S))}function m(N,S){if(S||!N){const D=document.getElementById(c);D&&document.body.removeChild(D)}}function p(N){return N instanceof Error?N:new Error("Unknown Error")}function g(N,S){const{documentTitle:D,onAfterPrint:V,onPrintError:k,preserveAfterPrint:R,print:_,suppressErrors:I}=S;setTimeout(()=>{var C,E;if(N.contentWindow){let j=function(){V==null||V(),m(R)};var M=j;if(N.contentWindow.focus(),_)_(N).then(j).catch(G=>{k?k("print",p(G)):d({messages:["An error was thrown by the specified `print` function"],suppressErrors:I})});else{if(N.contentWindow.print){const G=(E=(C=N.contentDocument)===null||C===void 0?void 0:C.title)!==null&&E!==void 0?E:"",O=N.ownerDocument.title;D&&(N.ownerDocument.title=D,N.contentDocument&&(N.contentDocument.title=D)),N.contentWindow.print(),D&&(N.ownerDocument.title=O,N.contentDocument&&(N.contentDocument.title=G))}else d({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:I});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(G=>{var O,B;return((B=(O=navigator.userAgent)!==null&&O!==void 0?O:navigator.vendor)!==null&&B!==void 0?B:"opera"in window&&window.opera).match(G)})?setTimeout(j,500):j()}}else d({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:I})},500)}function x(N){const S=[],D=document.createTreeWalker(N,NodeFilter.SHOW_ELEMENT,null);let V=D.nextNode();for(;V;)S.push(V),V=D.nextNode();return S}function y(N,S,D){const V=x(N),k=x(S);if(V.length===k.length)for(let R=0;R<V.length;R++){const _=V[R],I=k[R],C=_.shadowRoot;if(C!==null){const E=I.attachShadow({mode:C.mode});E.innerHTML=C.innerHTML,y(C,E,D)}}else d({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",N,S],suppressErrors:D})}const T=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function A(N,S,D,V){var k,R,_,I,C;const{contentNode:E,clonedContentNode:M,clonedImgNodes:j,clonedVideoNodes:G,numResourcesToLoad:O,originalCanvasNodes:B}=D,{bodyClass:te,fonts:Y,ignoreGlobalStyles:ne,pageStyle:de,nonce:we,suppressErrors:tt,copyShadowRoots:rt}=V;N.onload=null;const ie=(k=N.contentDocument)!==null&&k!==void 0?k:(R=N.contentWindow)===null||R===void 0?void 0:R.document;if(ie){const xe=ie.body.appendChild(M);rt&&y(E,xe,!!tt),Y&&(!((_=N.contentDocument)===null||_===void 0)&&_.fonts&&(!((I=N.contentWindow)===null||I===void 0)&&I.FontFace)?Y.forEach(ye=>{const ae=new FontFace(ye.family,ye.source,{weight:ye.weight,style:ye.style});N.contentDocument.fonts.add(ae),ae.loaded.then(()=>{S(ae)}).catch(nt=>{S(ae,["Failed loading the font:",ae,"Load error:",p(nt)])})}):(Y.forEach(ye=>{S(ye)}),d({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:tt})));const Bt=de??T,ht=ie.createElement("style");we&&(ht.setAttribute("nonce",we),ie.head.setAttribute("nonce",we)),ht.appendChild(ie.createTextNode(Bt)),ie.head.appendChild(ht),te&&ie.body.classList.add(...te.split(" "));const Pt=ie.querySelectorAll("canvas");for(let ye=0;ye<B.length;++ye){const ae=B[ye],nt=Pt[ye];if(nt===void 0){d({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ae],suppressErrors:tt});continue}const Ae=nt.getContext("2d");Ae&&Ae.drawImage(ae,0,0)}for(let ye=0;ye<j.length;ye++){const ae=j[ye],nt=ae.getAttribute("src");if(nt){const Ae=new Image;Ae.onload=()=>{S(ae)},Ae.onerror=(Q,Ie,Dt,Me,ze)=>{S(ae,["Error loading <img>",ae,"Error",ze])},Ae.src=nt}else S(ae,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ae])}for(let ye=0;ye<G.length;ye++){const ae=G[ye];ae.preload="auto";const nt=ae.getAttribute("poster");if(nt){const Ae=new Image;Ae.onload=()=>{S(ae)},Ae.onerror=(Q,Ie,Dt,Me,ze)=>{S(ae,["Error loading video poster",nt,"for video",ae,"Error:",ze])},Ae.src=nt}else ae.readyState>=2?S(ae):ae.src?(ae.onloadeddata=()=>{S(ae)},ae.onerror=(Ae,Q,Ie,Dt,Me)=>{S(ae,["Error loading video",ae,"Error",Me])},ae.onstalled=()=>{S(ae,["Loading video stalled, skipping",ae])}):S(ae,["Error loading video, `src` is empty",ae])}const qt="select",yt=E.querySelectorAll(qt),Xt=ie.querySelectorAll(qt);for(let ye=0;ye<yt.length;ye++)Xt[ye].value=yt[ye].value;if(!ne){const ye=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ae=0,nt=ye.length;ae<nt;++ae){const Ae=ye[ae];if(Ae.tagName.toLowerCase()==="style"){const Q=ie.createElement(Ae.tagName),Ie=Ae.sheet;if(Ie){let Dt="";try{const Me=Ie.cssRules.length;for(let ze=0;ze<Me;++ze)typeof Ie.cssRules[ze].cssText=="string"&&(Dt+=`${Ie.cssRules[ze].cssText}\r
`)}catch(Me){d({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",Ae,`Original error: ${p(Me).message}`],level:"warning"})}Q.setAttribute("id",`react-to-print-${ae}`),we&&Q.setAttribute("nonce",we),Q.appendChild(ie.createTextNode(Dt)),ie.head.appendChild(Q)}}else if(Ae.getAttribute("href"))if(Ae.hasAttribute("disabled"))d({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",Ae],level:"warning"}),S(Ae);else{const Q=ie.createElement(Ae.tagName);for(let Ie=0,Dt=Ae.attributes.length;Ie<Dt;++Ie){const Me=Ae.attributes[Ie];Me&&Q.setAttribute(Me.nodeName,(C=Me.nodeValue)!==null&&C!==void 0?C:"")}Q.onload=()=>{S(Q)},Q.onerror=(Ie,Dt,Me,ze,Gs)=>{S(Q,["Failed to load",Q,"Error:",Gs])},we&&Q.setAttribute("nonce",we),ie.head.appendChild(Q)}else d({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",Ae],level:"warning"}),S(Ae)}}}O===0&&g(N,V)}function b({bodyClass:N,contentRef:S,copyShadowRoots:D,documentTitle:V,fonts:k,ignoreGlobalStyles:R,nonce:_,onAfterPrint:I,onBeforePrint:C,onPrintError:E,pageStyle:M,preserveAfterPrint:j,print:G,printIframeProps:O,suppressErrors:B}){return(0,l.useCallback)(Y=>{function ne(){const de={bodyClass:N,contentRef:S,copyShadowRoots:D,documentTitle:V,fonts:k,ignoreGlobalStyles:R,nonce:_,onAfterPrint:I,onPrintError:E,pageStyle:M,preserveAfterPrint:j,print:G,suppressErrors:B},we=function(ie){const xe=document.createElement("iframe");return xe.width=`${document.documentElement.clientWidth}px`,xe.height=`${document.documentElement.clientHeight}px`,xe.style.position="absolute",xe.style.top=`-${document.documentElement.clientHeight+100}px`,xe.style.left=`-${document.documentElement.clientWidth+100}px`,xe.id=c,xe.srcdoc="<!DOCTYPE html>",ie&&(ie.allow&&(xe.allow=ie.allow),ie.referrerPolicy!==void 0&&(xe.referrerPolicy=ie.referrerPolicy),ie.sandbox!==void 0&&(xe.sandbox=ie.sandbox)),xe}(O),tt=function(ie,xe){const{contentRef:Bt,fonts:ht,ignoreGlobalStyles:Pt,suppressErrors:qt}=xe,yt=function({contentRef:Q,optionalContent:Ie,suppressErrors:Dt}){return Ie&&typeof Ie=="function"?(Q&&d({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),Ie()):Q?Q.current:void d({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Dt})}({contentRef:Bt,optionalContent:ie,suppressErrors:qt});if(!yt)return;const Xt=yt.cloneNode(!0),ye=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ae=Xt.querySelectorAll("img"),nt=Xt.querySelectorAll("video"),Ae=ht?ht.length:0;return{contentNode:yt,clonedContentNode:Xt,clonedImgNodes:ae,clonedVideoNodes:nt,numResourcesToLoad:(Pt?0:ye.length)+ae.length+nt.length+Ae,originalCanvasNodes:yt.querySelectorAll("canvas")}}(Y,de);if(!tt)return void d({messages:["There is nothing to print"],suppressErrors:B});const rt=function(ie,xe,Bt){const{suppressErrors:ht}=ie,Pt=[],qt=[];return function(yt,Xt){Pt.includes(yt)?d({level:"debug",messages:["Tried to mark a resource that has already been handled",yt],suppressErrors:ht}):(Xt?(d({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...Xt],suppressErrors:ht}),qt.push(yt)):Pt.push(yt),Pt.length+qt.length===xe&&g(Bt,ie))}}(de,tt.numResourcesToLoad,we);(function(ie,xe,Bt,ht){ie.onload=()=>{A(ie,xe,Bt,ht)},document.body.appendChild(ie)})(we,rt,tt,de)}m(j,!0),C?C().then(()=>{ne()}).catch(de=>{E==null||E("onBeforePrint",p(de))}):ne()},[N,S,D,V,k,R,_,I,C,E,M,j,G,B])}return o}()})})(DI);var kI=DI.exports,rz={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oz,lz;function cz(){return{geminiUrl:oz,vertexUrl:lz}}function dz(t,e,n,s){var a,i;if(!(t!=null&&t.baseUrl)){const o=cz();return e?(a=o.vertexUrl)!==null&&a!==void 0?a:n:(i=o.geminiUrl)!==null&&i!==void 0?i:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ca{}function Z(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const i=e[a];return i!=null?String(i):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function h(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const m=c[d];h(m,e.slice(i+1),n[d])}else for(const d of c)h(d,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];h(c[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const a=e[s];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(l=>u(l,e.slice(s+1),n)):n}else return n}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function uz(t,e){for(const[n,s]of Object.entries(e)){const a=n.split("."),i=s.split("."),o=new Set;let l=-1;for(let c=0;c<a.length;c++)if(a[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}Qg(t,a,i,0,o)}}function Qg(t,e,n,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2),l=t;if(o in l&&Array.isArray(l[o]))for(const c of l[o])Qg(c,e,n,s+1,a)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,l=Object.keys(o).filter(d=>!d.startsWith("_")&&!a.has(d)),c={};for(const d of l)c[d]=o[d];for(const[d,m]of Object.entries(c)){const p=[];for(const g of n.slice(s))g==="*"?p.push(d):p.push(g);h(o,p,m)}for(const d of l)delete o[d]}}else{const o=t;i in o&&Qg(o[i],e,n,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mz(t){const e={},n=u(t,["operationName"]);n!=null&&h(e,["operationName"],n);const s=u(t,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function hz(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],pz(o)),e}function fz(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],gz(o)),e}function pz(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xz(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function gz(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vz(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function xz(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],Cz(n)),e}function vz(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],Tz(n)),e}function yz(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function bz(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function _z(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Ez(o)),e}function Ez(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function LI(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Nz(o)),e}function Nz(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function Cz(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],pv(s));const a=u(t,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function Tz(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],pv(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(FE||(FE={}));var GE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(GE||(GE={}));var BE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(BE||(BE={}));var F;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(F||(F={}));var qE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qE||(qE={}));var HE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(HE||(HE={}));var $E;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($E||($E={}));var YE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(YE||(YE={}));var JE;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(JE||(JE={}));var KE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(KE||(KE={}));var QE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(QE||(QE={}));var XE;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(XE||(XE={}));var WE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(WE||(WE={}));var ZE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ZE||(ZE={}));var eN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(eN||(eN={}));var tN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(tN||(tN={}));var nN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(nN||(nN={}));var sN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sN||(sN={}));var aN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(aN||(aN={}));var iN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(iN||(iN={}));var rN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rN||(rN={}));var Um;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Um||(Um={}));var oN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(oN||(oN={}));var lN;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lN||(lN={}));var cN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(cN||(cN={}));var Xg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xg||(Xg={}));var dN;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(dN||(dN={}));var uN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(uN||(uN={}));var mN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(mN||(mN={}));var hN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hN||(hN={}));var fN;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(fN||(fN={}));var pN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pN||(pN={}));var gN;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(gN||(gN={}));var xN;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xN||(xN={}));var vN;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vN||(vN={}));var yN;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(yN||(yN={}));var bN;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bN||(bN={}));var _N;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(_N||(_N={}));var EN;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(EN||(EN={}));var NN;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(NN||(NN={}));var CN;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(CN||(CN={}));var TN;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TN||(TN={}));var SN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(SN||(SN={}));var wN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wN||(wN={}));var AN;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(AN||(AN={}));var IN;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(IN||(IN={}));var RN;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(RN||(RN={}));var jN;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(jN||(jN={}));var MN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(MN||(MN={}));var PN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(PN||(PN={}));var DN;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(DN||(DN={}));var kN;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kN||(kN={}));var LN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(LN||(LN={}));var VN;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(VN||(VN={}));var Jr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Jr||(Jr={}));class Wg{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class kl{get text(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const p=[];for(const g of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,y]of Object.entries(g))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;m=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const p of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&m.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,s,a,i,o,l,c,d;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,s,a,i,o,l,c,d;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class UN{}class ON{}class Sz{}class wz{}class Az{}class Iz{}class zN{}class FN{}class GN{}class Rz{}class Om{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Om;let a;const i=e;return n?a=fz(i):a=hz(i),Object.assign(s,a),s}}class BN{}class qN{}class HN{}class $N{}class jz{}class Mz{}class Pz{}class gv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new gv,i=_z(e);return Object.assign(s,i),s}}class Dz{}class kz{}class Lz{}class YN{}class Vz{get text(){var e,n,s;let a="",i=!1;const o=[];for(const l of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,a+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?a:void 0}get data(){var e,n,s;let a="";const i=[];for(const o of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&i.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(a+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Uz{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new xv,i=LI(e);return Object.assign(s,i),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function VI(t,e){const n=De(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function UI(t){return Array.isArray(t)?t.map(e=>zm(e)):[zm(t)]}function zm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function OI(t){const e=zm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zI(t){const e=zm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function FI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>JN(e)):[JN(t)]}function Zg(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function KN(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function QN(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tn(t){if(t==null)throw new Error("ContentUnion is required");return Zg(t)?t:{role:"user",parts:FI(t)}}function vv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=tn(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=tn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tn(n)):[tn(e)]}function Qn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(KN(t)||QN(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(t)]}const e=[],n=[],s=Zg(t[0]);for(const a of t){const i=Zg(a);if(i!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(a);else{if(KN(a)||QN(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return s||e.push({role:"user",parts:FI(n)}),e}function Oz(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(F).includes(n[0].toUpperCase())?n[0].toUpperCase():F.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(F).includes(s.toUpperCase())?s.toUpperCase():F.TYPE_UNSPECIFIED})}}function lo(t){const e={},n=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Oz(t.type,e);for(const[o,l]of Object.entries(t))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(F).includes(l.toUpperCase())?l.toUpperCase():F.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=lo(l);else if(s.includes(o)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(lo(d))}e[o]=c}else if(a.includes(o)){const c={};for(const[d,m]of Object.entries(l))c[d]=lo(m);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=l}return e}function yv(t){return lo(t)}function bv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function _v(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ol(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=lo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=lo(e.response));return t}function ll(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zz(t,e,n,s=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Ta(t,e){if(typeof e!="string")throw new Error("name must be a string");return zz(t,e,"cachedContents")}function GI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ji(t){return pv(t)}function Fz(t){return t!=null&&typeof t=="object"&&"name"in t}function Gz(t){return t!=null&&typeof t=="object"&&"video"in t}function Bz(t){return t!=null&&typeof t=="object"&&"uri"in t}function BI(t){var e;let n;if(Fz(t)&&(n=t.name),!(Bz(t)&&(n=t.uri,n===void 0))&&!(Gz(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function HI(t){for(const e of["models","tunedModels","publisherModels"])if(qz(t,e))return t[e];return[]}function qz(t,e){return t!==null&&typeof t=="object"&&e in t}function Hz(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $z(t,e={}){const n=[],s=new Set;for(const a of t){const i=a.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const o=Hz(a,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function $I(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Yz(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function YI(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let i=!1;for(const o of a){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function cl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function JI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jz(t){const e={},n=u(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const s=u(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>AF(o))),h(e,["inlinedResponses"],i)}const a=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["inlinedEmbedContentResponses"],i)}return e}function Kz(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const s=u(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const a=u(t,["bigqueryDestination","outputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Qz(t){const e={},n=u(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const s=u(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const a=u(t,["bigqueryUri"]);if(a!=null&&h(e,["bigqueryDestination","outputUri"],a),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vu(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["metadata","state"]);a!=null&&h(e,["state"],JI(a));const i=u(t,["metadata","createTime"]);i!=null&&h(e,["createTime"],i);const o=u(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const l=u(t,["metadata","updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(t,["metadata","model"]);c!=null&&h(e,["model"],c);const d=u(t,["metadata","output"]);return d!=null&&h(e,["dest"],Jz(YI(d))),e}function e0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["state"]);a!=null&&h(e,["state"],JI(a));const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["createTime"]);o!=null&&h(e,["createTime"],o);const l=u(t,["startTime"]);l!=null&&h(e,["startTime"],l);const c=u(t,["endTime"]);c!=null&&h(e,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(e,["updateTime"],d);const m=u(t,["model"]);m!=null&&h(e,["model"],m);const p=u(t,["inputConfig"]);p!=null&&h(e,["src"],Xz(p));const g=u(t,["outputConfig"]);g!=null&&h(e,["dest"],Kz(YI(g)));const x=u(t,["completionStats"]);return x!=null&&h(e,["completionStats"],x),e}function Xz(t){const e={},n=u(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const s=u(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const a=u(t,["bigquerySource","inputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Wz(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&h(n,["fileName"],s);const a=u(e,["inlinedRequests"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>wF(t,o))),h(n,["requests","requests"],i)}return n}function Zz(t){const e={},n=u(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const s=u(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const a=u(t,["bigqueryUri"]);if(a!=null&&h(e,["bigquerySource","inputUri"],a),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eF(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],cl(t,s)),n}function nF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],cl(t,s)),n}function sF(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const s=u(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],aF(s));const a=u(t,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const i=u(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const l=u(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&h(e,["index"],c);const d=u(t,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const m=u(t,["safetyRatings"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),h(e,["safetyRatings"],g)}const p=u(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function aF(t){const e={},n=u(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["citations"],s)}return e}function KI(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>kF(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function iF(t,e){const n={},s=u(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function rF(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["dest"]);return e!==void 0&&a!=null&&h(e,["outputConfig"],Qz(Yz(a))),n}function XN(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["src"]);a!=null&&h(n,["batch","inputConfig"],Wz(t,$I(t,a)));const i=u(e,["config"]);return i!=null&&iF(i,n),n}function oF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],De(t,s));const a=u(e,["src"]);a!=null&&h(n,["inputConfig"],Zz($I(t,a)));const i=u(e,["config"]);return i!=null&&rF(i,n),n}function lF(t,e){const n={},s=u(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),n}function cF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["src"]);a!=null&&h(n,["batch","inputConfig"],gF(t,a));const i=u(e,["config"]);return i!=null&&lF(i,n),n}function dF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],cl(t,s)),n}function uF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],cl(t,s)),n}function mF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);return i!=null&&h(e,["error"],i),e}function hF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);return i!=null&&h(e,["error"],i),e}function fF(t,e){const n={},s=u(e,["contents"]);if(s!=null){let i=vv(t,s);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["requests[]","request","content"],i)}const a=u(e,["config"]);return a!=null&&(h(n,["_self"],pF(a,n)),uz(n,{"requests[].*":"requests[].request.*"})),n}function pF(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gF(t,e){const n={},s=u(e,["fileName"]);s!=null&&h(n,["file_name"],s);const a=u(e,["inlinedRequests"]);return a!=null&&h(n,["requests"],fF(t,a)),n}function xF(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vF(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yF(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bF(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],KI(tn(a)));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const A=u(e,["responseMimeType"]);A!=null&&h(s,["responseMimeType"],A);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],yv(b));const N=u(e,["responseJsonSchema"]);if(N!=null&&h(s,["responseJsonSchema"],N),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(e,["safetySettings"]);if(n!==void 0&&S!=null){let j=S;Array.isArray(j)&&(j=j.map(G=>LF(G))),h(n,["safetySettings"],j)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let j=ll(D);Array.isArray(j)&&(j=j.map(G=>UF(ol(G)))),h(n,["tools"],j)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&h(n,["toolConfig"],VF(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=u(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],Ta(t,k));const R=u(e,["responseModalities"]);R!=null&&h(s,["responseModalities"],R);const _=u(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const I=u(e,["speechConfig"]);if(I!=null&&h(s,["speechConfig"],bv(I)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=u(e,["thinkingConfig"]);C!=null&&h(s,["thinkingConfig"],C);const E=u(e,["imageConfig"]);E!=null&&h(s,["imageConfig"],SF(E));const M=u(e,["enableEnhancedCivicAnswers"]);return M!=null&&h(s,["enableEnhancedCivicAnswers"],M),s}function _F(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>sF(d))),h(e,["candidates"],c)}const a=u(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const i=u(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&h(e,["responseId"],o);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function EF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],cl(t,s)),n}function NF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],cl(t,s)),n}function CF(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function TF(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function SF(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["request","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let l=Qn(a);Array.isArray(l)&&(l=l.map(c=>KI(c))),h(n,["request","contents"],l)}const i=u(e,["metadata"]);i!=null&&h(n,["metadata"],i);const o=u(e,["config"]);return o!=null&&h(n,["request","generationConfig"],bF(t,o,u(n,["request"],{}))),n}function AF(t){const e={},n=u(t,["response"]);n!=null&&h(e,["response"],_F(n));const s=u(t,["error"]);return s!=null&&h(e,["error"],s),e}function IF(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);if(e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function RF(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const i=u(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function jF(t){const e={},n=u(t,["config"]);return n!=null&&IF(n,e),e}function MF(t){const e={},n=u(t,["config"]);return n!=null&&RF(n,e),e}function PF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["operations"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>Vu(o))),h(e,["batchJobs"],i)}return e}function DF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["batchPredictionJobs"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>e0(o))),h(e,["batchJobs"],i)}return e}function kF(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],xF(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],vF(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],eF(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function LF(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function VF(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],yF(s)),e}function UF(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],CF(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],TF(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _a;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(_a||(_a={}));class yr{constructor(e,n,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,a)}init(e,n,s){var a,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!s||Object.keys(s).length===0?o={config:{}}:typeof s=="object"?o=Object.assign({},s):o=s,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(a=o.config)===null||a===void 0?void 0:a.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OF extends Ca{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yr(_a.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=XN(this.apiClient,e),s=n._url,a=Z("{model}:batchGenerateContent",s),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const m of c){const p=Object.assign({},m);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const x=p.request;x.systemInstruction=g,p.request=x}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?s.dest=`${i.slice(0,-6)}/dest`:s.dest=`${i}_dest_${a}`;else if(o)s.dest=`${o}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=oF(this.apiClient,e);return l=Z("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>e0(m))}else{const d=XN(this.apiClient,e);return l=Z("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Vu(m))}}async createEmbeddingsInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cF(this.apiClient,e);return i=Z("{model}:asyncBatchEmbedContent",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>Vu(c))}}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=NF(this.apiClient,e);return l=Z("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>e0(m))}else{const d=EF(this.apiClient,e);return l=Z("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Vu(m))}}async cancel(e){var n,s,a,i;let o="",l={};if(this.apiClient.isVertexAI()){const c=nF(this.apiClient,e);o=Z("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const c=tF(this.apiClient,e);o=Z("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=MF(e);return l=Z("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=DF(m),g=new YN;return Object.assign(g,p),g})}else{const d=jF(e);return l=Z("batches",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=PF(m),g=new YN;return Object.assign(g,p),g})}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=uF(this.apiClient,e);return l=Z("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>hF(m))}else{const d=dF(this.apiClient,e);return l=Z("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>mF(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zF(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function WN(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>c9(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function FF(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let m=Qn(o);Array.isArray(m)&&(m=m.map(p=>WN(p))),h(e,["contents"],m)}const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&h(e,["systemInstruction"],WN(tn(l)));const c=u(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>u9(p))),h(e,["tools"],m)}const d=u(t,["toolConfig"]);if(e!==void 0&&d!=null&&h(e,["toolConfig"],d9(d)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function GF(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let p=Qn(o);Array.isArray(p)&&(p=p.map(g=>g)),h(e,["contents"],p)}const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&h(e,["systemInstruction"],tn(l));const c=u(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>m9(g))),h(e,["tools"],p)}const d=u(t,["toolConfig"]);e!==void 0&&d!=null&&h(e,["toolConfig"],d);const m=u(t,["kmsKeyName"]);return e!==void 0&&m!=null&&h(e,["encryption_spec","kmsKeyName"],m),n}function BF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],VI(t,s));const a=u(e,["config"]);return a!=null&&FF(a,n),n}function qF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],VI(t,s));const a=u(e,["config"]);return a!=null&&GF(a,n),n}function HF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ta(t,s)),n}function $F(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ta(t,s)),n}function YF(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function JF(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function KF(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QF(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XF(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WF(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ZF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ta(t,s)),n}function e9(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ta(t,s)),n}function t9(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n9(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function a9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function i9(t){const e={},n=u(t,["config"]);return n!=null&&s9(n,e),e}function r9(t){const e={},n=u(t,["config"]);return n!=null&&a9(n,e),e}function o9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function l9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function c9(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],KF(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],QF(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],zF(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function d9(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],XF(s)),e}function u9(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],t9(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],n9(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function m9(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>WF(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function h9(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function f9(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function p9(t,e){const n={},s=u(e,["name"]);s!=null&&h(n,["_url","name"],Ta(t,s));const a=u(e,["config"]);return a!=null&&h9(a,n),n}function g9(t,e){const n={},s=u(e,["name"]);s!=null&&h(n,["_url","name"],Ta(t,s));const a=u(e,["config"]);return a!=null&&f9(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x9 extends Ca{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yr(_a.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=qF(this.apiClient,e);return l=Z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=BF(this.apiClient,e);return l=Z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=e9(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=ZF(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=$F(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=JF(m),g=new HN;return Object.assign(g,p),g})}else{const d=HF(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=YF(m),g=new HN;return Object.assign(g,p),g})}}async update(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=g9(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=p9(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=r9(e);return l=Z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=l9(m),g=new $N;return Object.assign(g,p),g})}else{const d=i9(e);return l=Z("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=o9(m),g=new $N;return Object.assign(g,p),g})}}}function Fm(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function ZN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(t){return this instanceof me?(this.v=t,this):new me(t)}function hs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(x){return function(y){return Promise.resolve(y).then(x,p)}}function l(x,y){s[x]&&(a[x]=function(T){return new Promise(function(A,b){i.push([x,T,A,b])>1||c(x,T)})},y&&(a[x]=y(a[x])))}function c(x,y){try{d(s[x](y))}catch(T){g(i[0][3],T)}}function d(x){x.value instanceof me?Promise.resolve(x.value.v).then(m,p):g(i[0][2],x)}function m(x){c("next",x)}function p(x){c("throw",x)}function g(x,y){x(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function fs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ZN=="function"?ZN(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(i){n[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v9(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:QI(n)}function QI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function y9(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function eC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let i=!0;for(;s<n&&t[s].role==="model";)a.push(t[s]),i&&!QI(t[s])&&(i=!1),s++;i?e.push(...a):e.pop()}return e}class b9{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new _9(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _9{constructor(e,n,s,a={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=a,this.history=i,this.sendPromise=Promise.resolve(),y9(i)}async sendMessage(e){var n;await this.sendPromise;const s=tn(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,l;const c=await a,d=(o=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,m=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];m!=null&&(g=(l=m.slice(p))!==null&&l!==void 0?l:[]);const x=d?[d]:[];this.recordHistory(s,x,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const s=tn(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const i=await a;return this.processStreamResponse(i,s)}getHistory(e=!1){const n=e?eC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return hs(this,arguments,function*(){var a,i,o,l,c,d;const m=[];try{for(var p=!0,g=fs(e),x;x=yield me(g.next()),a=x.done,!a;p=!0){l=x.value,p=!1;const y=l;if(v9(y)){const T=(d=(c=y.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;T!==void 0&&m.push(T)}yield yield me(y)}}catch(y){i={error:y}}finally{try{!p&&!a&&(o=g.return)&&(yield me(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,m)})}recordHistory(e,n,s){let a=[];n.length>0&&n.every(i=>i.role!==void 0)?a=n:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...eC(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Hh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E9(t){const e={},n=u(t,["file"]);return n!=null&&h(e,["file"],n),e}function N9(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function C9(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],BI(n)),e}function T9(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function S9(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],BI(n)),e}function w9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function A9(t){const e={},n=u(t,["config"]);return n!=null&&w9(n,e),e}function I9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["files"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R9 extends Ca{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yr(_a.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=A9(e);return i=Z("files",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=I9(c),m=new Dz;return Object.assign(m,d),m})}}async createInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=E9(e);return i=Z("upload/v1beta/files",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=N9(c),m=new kz;return Object.assign(m,d),m})}}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=S9(e);return i=Z("files/{file}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=C9(e);return i=Z("files/{file}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=T9(c),m=new Lz;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uu(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function j9(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Y9(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function M9(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function P9(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D9(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function k9(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=u(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const a=u(t,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const i=u(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const l=u(t,["frequencyPenalty"]);l!=null&&h(e,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&h(e,["logprobs"],c);const d=u(t,["maxOutputTokens"]);d!=null&&h(e,["maxOutputTokens"],d);const m=u(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const p=u(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const g=u(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const x=u(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const y=u(t,["responseModalities"]);y!=null&&h(e,["responseModalities"],y);const T=u(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const A=u(t,["routingConfig"]);A!=null&&h(e,["routingConfig"],A);const b=u(t,["seed"]);b!=null&&h(e,["seed"],b);const N=u(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],N);const S=u(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const D=u(t,["temperature"]);D!=null&&h(e,["temperature"],D);const V=u(t,["thinkingConfig"]);V!=null&&h(e,["thinkingConfig"],V);const k=u(t,["topK"]);k!=null&&h(e,["topK"],k);const R=u(t,["topP"]);if(R!=null&&h(e,["topP"],R),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L9(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function V9(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function U9(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],_v(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],j9(tn(y)));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let k=ll(T);Array.isArray(k)&&(k=k.map(R=>K9(ol(R)))),h(e,["setup","tools"],k)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&h(e,["setup","sessionResumption"],J9(A));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const S=u(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);if(e!==void 0&&V!=null&&h(e,["setup","proactivity"],V),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function O9(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],k9(s));const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],_v(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],tn(y));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let R=ll(T);Array.isArray(R)&&(R=R.map(_=>Q9(ol(_)))),h(e,["setup","tools"],R)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&h(e,["setup","sessionResumption"],A);const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const S=u(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);e!==void 0&&V!=null&&h(e,["setup","proactivity"],V);const k=u(t,["explicitVadSignal"]);return e!==void 0&&k!=null&&h(e,["setup","explicitVadSignal"],k),n}function z9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],De(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],U9(a,n)),n}function F9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],De(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],O9(a,n)),n}function G9(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function B9(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["weightedPrompts"],s)}return e}function q9(t){const e={},n=u(t,["media"]);if(n!=null){let d=UI(n);Array.isArray(d)&&(d=d.map(m=>Uu(m))),h(e,["mediaChunks"],d)}const s=u(t,["audio"]);s!=null&&h(e,["audio"],Uu(zI(s)));const a=u(t,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const i=u(t,["video"]);i!=null&&h(e,["video"],Uu(OI(i)));const o=u(t,["text"]);o!=null&&h(e,["text"],o);const l=u(t,["activityStart"]);l!=null&&h(e,["activityStart"],l);const c=u(t,["activityEnd"]);return c!=null&&h(e,["activityEnd"],c),e}function H9(t){const e={},n=u(t,["media"]);if(n!=null){let d=UI(n);Array.isArray(d)&&(d=d.map(m=>m)),h(e,["mediaChunks"],d)}const s=u(t,["audio"]);s!=null&&h(e,["audio"],zI(s));const a=u(t,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const i=u(t,["video"]);i!=null&&h(e,["video"],OI(i));const o=u(t,["text"]);o!=null&&h(e,["text"],o);const l=u(t,["activityStart"]);l!=null&&h(e,["activityStart"],l);const c=u(t,["activityEnd"]);return c!=null&&h(e,["activityEnd"],c),e}function $9(t){const e={},n=u(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const s=u(t,["serverContent"]);s!=null&&h(e,["serverContent"],s);const a=u(t,["toolCall"]);a!=null&&h(e,["toolCall"],a);const i=u(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],i);const o=u(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],X9(o));const l=u(t,["goAway"]);l!=null&&h(e,["goAway"],l);const c=u(t,["sessionResumptionUpdate"]);c!=null&&h(e,["sessionResumptionUpdate"],c);const d=u(t,["voiceActivityDetectionSignal"]);return d!=null&&h(e,["voiceActivityDetectionSignal"],d),e}function Y9(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],M9(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],P9(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],Uu(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function J9(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function K9(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],L9(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],V9(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function Q9(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>D9(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function X9(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const a=u(t,["candidatesTokenCount"]);a!=null&&h(e,["responseTokenCount"],a);const i=u(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const o=u(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const l=u(t,["totalTokenCount"]);l!=null&&h(e,["totalTokenCount"],l);const c=u(t,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["promptTokensDetails"],x)}const d=u(t,["cacheTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["cacheTokensDetails"],x)}const m=u(t,["candidatesTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["responseTokensDetails"],x)}const p=u(t,["toolUsePromptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["toolUsePromptTokensDetails"],x)}const g=u(t,["trafficType"]);return g!=null&&h(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W9(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Z9(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const s=u(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],e7(s));const a=u(t,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const i=u(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const l=u(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&h(e,["index"],c);const d=u(t,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const m=u(t,["safetyRatings"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),h(e,["safetyRatings"],g)}const p=u(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function e7(t){const e={},n=u(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["citations"],s)}return e}function t7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let i=Qn(a);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["contents"],i)}return n}function n7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(e,["tokensInfo"],a)}return e}function s7(t){const e={},n=u(t,["values"]);n!=null&&h(e,["values"],n);const s=u(t,["statistics"]);return s!=null&&h(e,["statistics"],a7(s)),e}function a7(t){const e={},n=u(t,["truncated"]);n!=null&&h(e,["truncated"],n);const s=u(t,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function $h(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>h8(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function i7(t){const e={},n=u(t,["controlType"]);n!=null&&h(e,["controlType"],n);const s=u(t,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function r7(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function o7(t,e){const n={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],tn(s));const a=u(t,["tools"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>e1(l))),h(e,["tools"],o)}const i=u(t,["generationConfig"]);return e!==void 0&&i!=null&&h(e,["generationConfig"],W7(i)),n}function l7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>$h(l))),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&r7(i),n}function c7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&o7(i,n),n}function d7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const a=u(t,["cachedContentTokenCount"]);return a!=null&&h(e,["cachedContentTokenCount"],a),e}function u7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function m7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function h7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function f7(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function p7(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function g7(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const x=u(t,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=u(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const A=u(t,["addWatermark"]);e!==void 0&&A!=null&&h(e,["parameters","addWatermark"],A);const b=u(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=u(t,["editMode"]);e!==void 0&&N!=null&&h(e,["parameters","editMode"],N);const S=u(t,["baseSteps"]);return e!==void 0&&S!=null&&h(e,["parameters","editConfig","baseSteps"],S),n}function x7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>y8(c))),h(n,["instances[0]","referenceImages"],l)}const o=u(e,["config"]);return o!=null&&g7(o,n),n}function v7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Yh(i))),h(e,["generatedImages"],a)}return e}function y7(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function b7(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["instances[]","title"],a);const i=u(t,["outputDimensionality"]);e!==void 0&&i!=null&&h(e,["parameters","outputDimensionality"],i);const o=u(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const l=u(t,["autoTruncate"]);return e!==void 0&&l!=null&&h(e,["parameters","autoTruncate"],l),n}function _7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let l=vv(t,a);Array.isArray(l)&&(l=l.map(c=>c)),h(n,["requests[]","content"],l)}const i=u(e,["config"]);i!=null&&y7(i,n);const o=u(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],De(t,o)),n}function E7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=vv(t,a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["instances[]","content"],o)}const i=u(e,["config"]);return i!=null&&b7(i,n),n}function N7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["embeddings"],i)}const a=u(t,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function C7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions[]","embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>s7(o))),h(e,["embeddings"],i)}const a=u(t,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function T7(t){const e={},n=u(t,["endpoint"]);n!=null&&h(e,["name"],n);const s=u(t,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function S7(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function w7(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function A7(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function I7(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function R7(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],$h(tn(a)));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const A=u(e,["responseMimeType"]);A!=null&&h(s,["responseMimeType"],A);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],yv(b));const N=u(e,["responseJsonSchema"]);if(N!=null&&h(s,["responseJsonSchema"],N),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(e,["safetySettings"]);if(n!==void 0&&S!=null){let j=S;Array.isArray(j)&&(j=j.map(G=>b8(G))),h(n,["safetySettings"],j)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let j=ll(D);Array.isArray(j)&&(j=j.map(G=>w8(ol(G)))),h(n,["tools"],j)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&h(n,["toolConfig"],S8(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=u(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],Ta(t,k));const R=u(e,["responseModalities"]);R!=null&&h(s,["responseModalities"],R);const _=u(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const I=u(e,["speechConfig"]);if(I!=null&&h(s,["speechConfig"],bv(I)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=u(e,["thinkingConfig"]);C!=null&&h(s,["thinkingConfig"],C);const E=u(e,["imageConfig"]);E!=null&&h(s,["imageConfig"],s8(E));const M=u(e,["enableEnhancedCivicAnswers"]);return M!=null&&h(s,["enableEnhancedCivicAnswers"],M),s}function j7(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],tn(a));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const A=u(e,["responseMimeType"]);A!=null&&h(s,["responseMimeType"],A);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],yv(b));const N=u(e,["responseJsonSchema"]);N!=null&&h(s,["responseJsonSchema"],N);const S=u(e,["routingConfig"]);S!=null&&h(s,["routingConfig"],S);const D=u(e,["modelSelectionConfig"]);D!=null&&h(s,["modelConfig"],D);const V=u(e,["safetySettings"]);if(n!==void 0&&V!=null){let B=V;Array.isArray(B)&&(B=B.map(te=>te)),h(n,["safetySettings"],B)}const k=u(e,["tools"]);if(n!==void 0&&k!=null){let B=ll(k);Array.isArray(B)&&(B=B.map(te=>e1(ol(te)))),h(n,["tools"],B)}const R=u(e,["toolConfig"]);n!==void 0&&R!=null&&h(n,["toolConfig"],R);const _=u(e,["labels"]);n!==void 0&&_!=null&&h(n,["labels"],_);const I=u(e,["cachedContent"]);n!==void 0&&I!=null&&h(n,["cachedContent"],Ta(t,I));const C=u(e,["responseModalities"]);C!=null&&h(s,["responseModalities"],C);const E=u(e,["mediaResolution"]);E!=null&&h(s,["mediaResolution"],E);const M=u(e,["speechConfig"]);M!=null&&h(s,["speechConfig"],bv(M));const j=u(e,["audioTimestamp"]);j!=null&&h(s,["audioTimestamp"],j);const G=u(e,["thinkingConfig"]);G!=null&&h(s,["thinkingConfig"],G);const O=u(e,["imageConfig"]);if(O!=null&&h(s,["imageConfig"],a8(O)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function tC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>$h(l))),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&h(n,["generationConfig"],R7(t,i,n)),n}function nC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&h(n,["generationConfig"],j7(t,i,n)),n}function sC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>Z9(d))),h(e,["candidates"],c)}const a=u(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const i=u(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&h(e,["responseId"],o);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function aC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["candidates"],d)}const a=u(t,["createTime"]);a!=null&&h(e,["createTime"],a);const i=u(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const l=u(t,["responseId"]);l!=null&&h(e,["responseId"],l);const c=u(t,["usageMetadata"]);return c!=null&&h(e,["usageMetadata"],c),e}function M7(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const i=u(t,["guidanceScale"]);if(e!==void 0&&i!=null&&h(e,["parameters","guidanceScale"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=u(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&h(e,["parameters","includeSafetyAttributes"],c);const d=u(t,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const m=u(t,["language"]);e!==void 0&&m!=null&&h(e,["parameters","language"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const g=u(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=u(t,["imageSize"]);if(e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function P7(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const x=u(t,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=u(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const A=u(t,["addWatermark"]);e!==void 0&&A!=null&&h(e,["parameters","addWatermark"],A);const b=u(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=u(t,["imageSize"]);e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N);const S=u(t,["enhancePrompt"]);return e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S),n}function D7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["config"]);return i!=null&&M7(i,n),n}function k7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["config"]);return i!=null&&P7(i,n),n}function L7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>J7(o))),h(e,["generatedImages"],i)}const a=u(t,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],WI(a)),e}function V7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Yh(o))),h(e,["generatedImages"],i)}const a=u(t,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],ZI(a)),e}function U7(t,e){const n={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=u(t,["durationSeconds"]);if(e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const o=u(t,["resolution"]);e!==void 0&&o!=null&&h(e,["parameters","resolution"],o);const l=u(t,["personGeneration"]);if(e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=u(t,["negativePrompt"]);e!==void 0&&c!=null&&h(e,["parameters","negativePrompt"],c);const d=u(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&h(e,["parameters","enhancePrompt"],d),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=u(t,["lastFrame"]);e!==void 0&&m!=null&&h(e,["instances[0]","lastFrame"],Jh(m));const p=u(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>z8(x))),h(e,["instances[0]","referenceImages"],g)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function O7(t,e){const n={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const i=u(t,["fps"]);e!==void 0&&i!=null&&h(e,["parameters","fps"],i);const o=u(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const l=u(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=u(t,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const g=u(t,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const x=u(t,["enhancePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x);const y=u(t,["generateAudio"]);e!==void 0&&y!=null&&h(e,["parameters","generateAudio"],y);const T=u(t,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],_s(T));const A=u(t,["referenceImages"]);if(e!==void 0&&A!=null){let S=A;Array.isArray(S)&&(S=S.map(D=>F8(D))),h(e,["instances[0]","referenceImages"],S)}const b=u(t,["mask"]);e!==void 0&&b!=null&&h(e,["instances[0]","mask"],O8(b));const N=u(t,["compressionQuality"]);return e!==void 0&&N!=null&&h(e,["parameters","compressionQuality"],N),n}function z7(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],q7(o)),e}function F7(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],H7(o)),e}function G7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],Jh(i));const o=u(e,["video"]);o!=null&&h(n,["instances[0]","video"],t1(o));const l=u(e,["source"]);l!=null&&$7(l,n);const c=u(e,["config"]);return c!=null&&U7(c,n),n}function B7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],_s(i));const o=u(e,["video"]);o!=null&&h(n,["instances[0]","video"],n1(o));const l=u(e,["source"]);l!=null&&Y7(l,n);const c=u(e,["config"]);return c!=null&&O7(c,n),n}function q7(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Q7(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function H7(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>X7(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function $7(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],Jh(a));const i=u(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],t1(i)),n}function Y7(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],_s(a));const i=u(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],n1(i)),n}function J7(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],i8(n));const s=u(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const a=u(t,["_self"]);return a!=null&&h(e,["safetyAttributes"],WI(a)),e}function Yh(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],XI(n));const s=u(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const a=u(t,["_self"]);a!=null&&h(e,["safetyAttributes"],ZI(a));const i=u(t,["prompt"]);return i!=null&&h(e,["enhancedPrompt"],i),e}function K7(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["mask"],XI(n));const s=u(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(e,["labels"],a)}return e}function Q7(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],V8(n)),e}function X7(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],U8(n)),e}function W7(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=u(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const a=u(t,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const i=u(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const l=u(t,["frequencyPenalty"]);l!=null&&h(e,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&h(e,["logprobs"],c);const d=u(t,["maxOutputTokens"]);d!=null&&h(e,["maxOutputTokens"],d);const m=u(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const p=u(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const g=u(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const x=u(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const y=u(t,["responseModalities"]);y!=null&&h(e,["responseModalities"],y);const T=u(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const A=u(t,["routingConfig"]);A!=null&&h(e,["routingConfig"],A);const b=u(t,["seed"]);b!=null&&h(e,["seed"],b);const N=u(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],N);const S=u(t,["stopSequences"]);S!=null&&h(e,["stopSequences"],S);const D=u(t,["temperature"]);D!=null&&h(e,["temperature"],D);const V=u(t,["thinkingConfig"]);V!=null&&h(e,["thinkingConfig"],V);const k=u(t,["topK"]);k!=null&&h(e,["topK"],k);const R=u(t,["topP"]);if(R!=null&&h(e,["topP"],R),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Z7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function e8(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],De(t,s)),n}function t8(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n8(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s8(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function a8(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);s!=null&&h(e,["imageSize"],s);const a=u(t,["personGeneration"]);a!=null&&h(e,["personGeneration"],a);const i=u(t,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const o=u(t,["outputCompressionQuality"]);return o!=null&&h(e,["imageOutputOptions","compressionQuality"],o),e}function i8(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],ji(n));const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function XI(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],ji(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function Jh(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],ji(n));const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _s(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],ji(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function r8(t,e,n){const s={},a=u(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&h(n,["_url","models_url"],qI(t,l)),s}function o8(t,e,n){const s={},a=u(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&h(n,["_url","models_url"],qI(t,l)),s}function l8(t,e){const n={},s=u(e,["config"]);return s!=null&&r8(t,s,n),n}function c8(t,e){const n={},s=u(e,["config"]);return s!=null&&o8(t,s,n),n}function d8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["_self"]);if(a!=null){let i=HI(a);Array.isArray(i)&&(i=i.map(o=>t0(o))),h(e,["models"],i)}return e}function u8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["_self"]);if(a!=null){let i=HI(a);Array.isArray(i)&&(i=i.map(o=>n0(o))),h(e,["models"],i)}return e}function m8(t){const e={},n=u(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const s=u(t,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const a=u(t,["maskDilation"]);return a!=null&&h(e,["dilation"],a),e}function t0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);a!=null&&h(e,["description"],a);const i=u(t,["version"]);i!=null&&h(e,["version"],i);const o=u(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],A8(o));const l=u(t,["inputTokenLimit"]);l!=null&&h(e,["inputTokenLimit"],l);const c=u(t,["outputTokenLimit"]);c!=null&&h(e,["outputTokenLimit"],c);const d=u(t,["supportedGenerationMethods"]);d!=null&&h(e,["supportedActions"],d);const m=u(t,["temperature"]);m!=null&&h(e,["temperature"],m);const p=u(t,["maxTemperature"]);p!=null&&h(e,["maxTemperature"],p);const g=u(t,["topP"]);g!=null&&h(e,["topP"],g);const x=u(t,["topK"]);x!=null&&h(e,["topK"],x);const y=u(t,["thinking"]);return y!=null&&h(e,["thinking"],y),e}function n0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);a!=null&&h(e,["description"],a);const i=u(t,["versionId"]);i!=null&&h(e,["version"],i);const o=u(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>T7(g))),h(e,["endpoints"],p)}const l=u(t,["labels"]);l!=null&&h(e,["labels"],l);const c=u(t,["_self"]);c!=null&&h(e,["tunedModelInfo"],I8(c));const d=u(t,["defaultCheckpointId"]);d!=null&&h(e,["defaultCheckpointId"],d);const m=u(t,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>g)),h(e,["checkpoints"],p)}return e}function h8(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],S7(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],w7(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],W9(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function f8(t){const e={},n=u(t,["productImage"]);return n!=null&&h(e,["image"],_s(n)),e}function p8(t,e){const n={},s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["baseSteps"]);e!==void 0&&a!=null&&h(e,["parameters","baseSteps"],a);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=u(t,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const l=u(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const c=u(t,["personGeneration"]);e!==void 0&&c!=null&&h(e,["parameters","personGeneration"],c);const d=u(t,["addWatermark"]);e!==void 0&&d!=null&&h(e,["parameters","addWatermark"],d);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const p=u(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const g=u(t,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const x=u(t,["labels"]);return e!==void 0&&x!=null&&h(e,["labels"],x),n}function g8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["source"]);a!=null&&v8(a,n);const i=u(e,["config"]);return i!=null&&p8(i,n),n}function x8(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Yh(a))),h(e,["generatedImages"],s)}return e}function v8(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["personImage"]);e!==void 0&&a!=null&&h(e,["instances[0]","personImage","image"],_s(a));const i=u(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>f8(l))),h(e,["instances[0]","productImages"],o)}return n}function y8(t){const e={},n=u(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],_s(n));const s=u(t,["referenceId"]);s!=null&&h(e,["referenceId"],s);const a=u(t,["referenceType"]);a!=null&&h(e,["referenceType"],a);const i=u(t,["maskImageConfig"]);i!=null&&h(e,["maskImageConfig"],m8(i));const o=u(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],i7(o));const l=u(t,["styleImageConfig"]);l!=null&&h(e,["styleImageConfig"],l);const c=u(t,["subjectImageConfig"]);return c!=null&&h(e,["subjectImageConfig"],c),e}function WI(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function ZI(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function b8(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function _8(t){const e={},n=u(t,["image"]);return n!=null&&h(e,["image"],_s(n)),e}function E8(t,e){const n={},s=u(t,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const a=u(t,["maxPredictions"]);e!==void 0&&a!=null&&h(e,["parameters","maxPredictions"],a);const i=u(t,["confidenceThreshold"]);e!==void 0&&i!=null&&h(e,["parameters","confidenceThreshold"],i);const o=u(t,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const l=u(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","binaryColorThreshold"],l);const c=u(t,["labels"]);return e!==void 0&&c!=null&&h(e,["labels"],c),n}function N8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["source"]);a!=null&&T8(a,n);const i=u(e,["config"]);return i!=null&&E8(i,n),n}function C8(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>K7(a))),h(e,["generatedMasks"],s)}return e}function T8(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],_s(a));const i=u(t,["scribbleImage"]);return e!==void 0&&i!=null&&h(e,["instances[0]","scribble"],_8(i)),n}function S8(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],A7(s)),e}function w8(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],t8(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],n8(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function e1(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>I7(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function A8(t){const e={},n=u(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function I8(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function R8(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function j8(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function M8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","name"],De(t,s));const a=u(e,["config"]);return a!=null&&R8(a,n),n}function P8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["config"]);return a!=null&&j8(a,n),n}function D8(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const i=u(t,["personGeneration"]);e!==void 0&&i!=null&&h(e,["parameters","personGeneration"],i);const o=u(t,["includeRaiReason"]);e!==void 0&&o!=null&&h(e,["parameters","includeRaiReason"],o);const l=u(t,["outputMimeType"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","mimeType"],l);const c=u(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&h(e,["parameters","outputOptions","compressionQuality"],c);const d=u(t,["enhanceInputImage"]);e!==void 0&&d!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=u(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const p=u(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&h(e,["parameters","sampleCount"],g);const x=u(t,["mode"]);return e!==void 0&&x!=null&&h(e,["parameters","mode"],x),n}function k8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],De(t,s));const a=u(e,["image"]);a!=null&&h(n,["instances[0]","image"],_s(a));const i=u(e,["upscaleFactor"]);i!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=u(e,["config"]);return o!=null&&D8(o,n),n}function L8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Yh(i))),h(e,["generatedImages"],a)}return e}function V8(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],ji(s));const a=u(t,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function U8(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],ji(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function O8(t){const e={},n=u(t,["image"]);n!=null&&h(e,["_self"],_s(n));const s=u(t,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function z8(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],Jh(n));const s=u(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function F8(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],_s(n));const s=u(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function t1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["videoBytes"]);s!=null&&h(e,["encodedVideo"],ji(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["encoding"],a),e}function n1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],ji(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G8(t,e){const n={},s=u(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),n}function B8(t){const e={},n=u(t,["config"]);return n!=null&&G8(n,e),e}function q8(t,e){const n={},s=u(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function H8(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&q8(s,e),e}function $8(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function Y8(t,e){const n={},s=u(t,["customMetadata"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["customMetadata"],i)}const a=u(t,["chunkingConfig"]);return e!==void 0&&a!=null&&h(e,["chunkingConfig"],a),n}function J8(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Q8(o)),e}function K8(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=u(t,["fileName"]);s!=null&&h(e,["fileName"],s);const a=u(t,["config"]);return a!=null&&Y8(a,e),e}function Q8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function X8(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function W8(t){const e={},n=u(t,["config"]);return n!=null&&X8(n,e),e}function Z8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["fileSearchStores"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["fileSearchStores"],i)}return e}function s1(t,e){const n={},s=u(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const a=u(t,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const i=u(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const o=u(t,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),n}function eG(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=u(t,["config"]);return s!=null&&s1(s,e),e}function tG(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nG="Content-Type",sG="X-Server-Timeout",aG="User-Agent",s0="x-goog-api-client",iG="1.35.0",rG=`google-genai-sdk/${iG}`,oG="v1beta1",lG="v1beta";class cG{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:oG,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:lG,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const a=[this.getRequestUrlInternal(n)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))a.searchParams.append(o,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.unaryApiCall(a,i,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[a,i]of Object.entries(n))typeof i=="object"?s[a]=Object.assign(Object.assign({},s[a]),i):i!==void 0&&(s[a]=i);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.streamApiCall(a,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,a){if(n&&n.timeout||a){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&dG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await iC(a),new Wg(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await iC(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return hs(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),i=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let o="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield me(a.read());if(d){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(m,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const T=JSON.parse(JSON.stringify(y.error)),A=T.status,b=T.code,N=`got status: ${A}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new Hh({message:N,status:b})}}catch(y){if(y.name==="ApiError")throw y}o+=p;let g=-1,x=0;for(;;){g=-1,x=0;for(const A of c){const b=o.indexOf(A);b!==-1&&(g===-1||b<g)&&(g=b,x=A.length)}if(g===-1)break;const y=o.substring(0,g);o=o.substring(g+x);const T=y.trim();if(T.startsWith(l)){const A=T.substring(l.length).trim();try{const b=new Response(A,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield me(new Wg(b))}catch(b){throw new Error(`exception parsing stream chunk ${A}. ${b}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=rG+" "+this.clientOptions.userAgentExtra;return e[aG]=n,e[s0]=n,e[nG]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))s.append(a,i);e.timeout&&e.timeout>0&&s.append(sG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);a.sizeBytes=String(o.size);const l=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=l;const c={file:a},d=this.getFileName(e),m=Z("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(m,a.sizeBytes,a.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,s){var a;const i=this.clientOptions.uploader,o=await i.stat(n),l=String(o.size),c=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),p={};s!=null&&s1(s,p);const g=await this.fetchUploadUrl(d,l,c,m,p,s==null?void 0:s.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,a,i,o){var l;let c={};o?c=o:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function iC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw n>=400&&n<600?new Hh({message:a,status:n}):new Error(a)}}function dG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(i,o){const l=Object.assign({},i);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c],m=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?l[c]=s(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const a=s(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uG="mcp_used/unknown";let mG=!1;function a1(t){for(const e of t)if(hG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return mG}function i1(t){var e;const n=(e=t[s0])!==null&&e!==void 0?e:"";t[s0]=(n+` ${uG}`).trimStart()}function hG(t){return t!==null&&typeof t=="object"&&t instanceof Ev}function fG(t){return hs(this,arguments,function*(n,s=100){let a,i=0;for(;i<s;){const o=yield me(n.listTools({cursor:a}));for(const l of o.tools)yield yield me(l),i++;if(!o.nextCursor)break;a=o.nextCursor}})}class Ev{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ev(e,n)}async initialize(){var e,n,s,a;if(this.mcpTools.length>0)return;const i={},o=[];for(const m of this.mcpClients)try{for(var l=!0,c=(n=void 0,fs(fG(m))),d;d=await c.next(),e=d.done,!e;l=!0){a=d.value,l=!1;const p=a;o.push(p);const g=p.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=m}}catch(p){n={error:p}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),$z(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await a.callTool({name:s.name,arguments:s.args},void 0,i);n.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pG(t,e,n){const s=new Uz;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(s,a),e(s)}class gG{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=yG(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${a}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const m=new Promise(S=>{d=S}),p=e.callbacks,g=function(){d({})},x=this.apiClient,y={onopen:g,onmessage:S=>{pG(x,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(s=p==null?void 0:p.onclose)!==null&&s!==void 0?s:function(S){}},T=this.webSocketFactory.create(c,vG(o),y);T.connect(),await m;const N={setup:{model:De(this.apiClient,e.model)}};return T.send(JSON.stringify(N)),new xG(T,this.apiClient)}}class xG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=B9(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=G9(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Jr.PLAY)}pause(){this.sendPlaybackControl(Jr.PAUSE)}stop(){this.sendPlaybackControl(Jr.STOP)}resetContext(){this.sendPlaybackControl(Jr.RESET_CONTEXT)}close(){this.conn.close()}}function vG(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function yG(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _G(t,e,n){const s=new Vz;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const i=JSON.parse(a);if(t.isVertexAI()){const o=$9(i);Object.assign(s,o)}else Object.assign(s,i);e(s)}class EG{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new gG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,a,i,o,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&a1(e.config.tools)&&i1(p);const g=SG(p);if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,m);else{const I=this.apiClient.getApiKey();let C="BidiGenerateContent",E="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),C="BidiGenerateContentConstrained",E="access_token"),m=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${C}?${E}=${I}`}let x=()=>{};const y=new Promise(I=>{x=I}),T=e.callbacks,A=function(){var I;(I=T==null?void 0:T.onopen)===null||I===void 0||I.call(T),x({})},b=this.apiClient,N={onopen:A,onmessage:I=>{_G(b,T.onmessage,I)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(I){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(I){}},S=this.webSocketFactory.create(m,TG(g),N);S.connect(),await y;let D=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const I=this.apiClient.getProject(),C=this.apiClient.getLocation();D=`projects/${I}/locations/${C}/`+D}let V={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Um.AUDIO]}:e.config.responseModalities=[Um.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],R=[];for(const I of k)if(this.isCallableTool(I)){const C=I;R.push(await C.tool())}else R.push(I);R.length>0&&(e.config.tools=R);const _={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=F9(this.apiClient,_):V=z9(this.apiClient,_),delete V.config,S.send(JSON.stringify(V)),new CG(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const NG={turnComplete:!0};class CG{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Qn(n.turns),e.isVertexAI()||(s=s.map(a=>$h(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(bG)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},NG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:H9(e)}:n={realtimeInput:q9(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function TG(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function SG(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rC=10;function oC(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(co(o)){a=!0;break}if(!a)return!0;const i=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function co(t){return"callTool"in t&&typeof t.callTool=="function"}function wG(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>co(a)))!==null&&s!==void 0?s:!1}function lC(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(co(s))return;const i=s;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(a)}),n}function cC(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AG extends Ca{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,a,i,o,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!wG(n)||oC(n.config))return await this.generateContentInternal(c);const d=lC(n);if(d.length>0){const T=d.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let m,p;const g=Qn(c.contents),x=(i=(a=(s=c.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&i!==void 0?i:rC;let y=0;for(;y<x&&(m=await this.generateContentInternal(c),!(!m.functionCalls||m.functionCalls.length===0));){const T=m.candidates[0].content,A=[];for(const b of(l=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(co(b)){const S=await b.callTool(m.functionCalls);A.push(...S)}y++,p={role:"user",parts:A},c.contents=Qn(c.contents),c.contents.push(T),c.contents.push(p),cC(c.config)&&(g.push(T),g.push(p))}return cC(c.config)&&(m.automaticFunctionCallingHistory=g),m},this.generateContentStream=async n=>{var s,a,i,o,l;if(this.maybeMoveToResponseJsonSchem(n),oC(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=lC(n);if(c.length>0){const p=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,m=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var a;let i;const o=[];if(s!=null&&s.generatedImages)for(const c of s.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:o.push(c);let l;return i?l={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:s.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:s.sdkHttpResponse},l}),this.list=async n=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new yr(_a.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var s,a,i,o,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,a;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async c=>co(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(l.config.tools=o,e.config&&e.config.tools&&a1(e.config.tools)){const c=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),i1(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,s,a;const i=new Map;for(const o of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(co(o)){const l=o,c=await l.tool();for(const d of(a=c.functionDeclarations)!==null&&a!==void 0?a:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,s,a;const i=(a=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:rC;let o=!1,l=0;const c=await this.initAfcToolsMap(e);return function(d,m,p){return hs(this,arguments,function*(){for(var g,x,y,T,A,b;l<i;){o&&(l++,o=!1);const V=yield me(d.processParamsMaybeAddMcpUsage(p)),k=yield me(d.generateContentStreamInternal(V)),R=[],_=[];try{for(var N=!0,S=(x=void 0,fs(k)),D;D=yield me(S.next()),g=D.done,!g;N=!0){T=D.value,N=!1;const I=T;if(yield yield me(I),I.candidates&&(!((A=I.candidates[0])===null||A===void 0)&&A.content)){_.push(I.candidates[0].content);for(const C of(b=I.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(l<i&&C.functionCall){if(!C.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(C.functionCall.name)){const E=yield me(m.get(C.functionCall.name).callTool([C.functionCall]));R.push(...E)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${C.functionCall.name}`)}}}}catch(I){x={error:I}}finally{try{!N&&!g&&(y=S.return)&&(yield me(y.call(S)))}finally{if(x)throw x.error}}if(R.length>0){o=!0;const I=new kl;I.candidates=[{content:{role:"user",parts:R}}],yield yield me(I);const C=[];C.push(..._),C.push({role:"user",parts:R});const E=Qn(p.contents).concat(C);p.contents=E}else break}})}(this,c,e)}async generateContentInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=nC(this.apiClient,e);return l=Z("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=aC(m),g=new kl;return Object.assign(g,p),g})}else{const d=tC(this.apiClient,e);return l=Z("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=sC(m),g=new kl;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=nC(this.apiClient,e);return l=Z("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return hs(this,arguments,function*(){var g,x,y,T;try{for(var A=!0,b=fs(p),N;N=yield me(b.next()),g=N.done,!g;A=!0){T=N.value,A=!1;const S=T,D=aC(yield me(S.json()));D.sdkHttpResponse={headers:S.headers};const V=new kl;Object.assign(V,D),yield yield me(V)}}catch(S){x={error:S}}finally{try{!A&&!g&&(y=b.return)&&(yield me(y.call(b)))}finally{if(x)throw x.error}}})})}else{const d=tC(this.apiClient,e);return l=Z("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return hs(this,arguments,function*(){var g,x,y,T;try{for(var A=!0,b=fs(p),N;N=yield me(b.next()),g=N.done,!g;A=!0){T=N.value,A=!1;const S=T,D=sC(yield me(S.json()));D.sdkHttpResponse={headers:S.headers};const V=new kl;Object.assign(V,D),yield yield me(V)}}catch(S){x={error:S}}finally{try{!A&&!g&&(y=b.return)&&(yield me(y.call(b)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=E7(this.apiClient,e);return l=Z("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=C7(m),g=new UN;return Object.assign(g,p),g})}else{const d=_7(this.apiClient,e);return l=Z("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=N7(m),g=new UN;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=k7(this.apiClient,e);return l=Z("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=V7(m),g=new ON;return Object.assign(g,p),g})}else{const d=D7(this.apiClient,e);return l=Z("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=L7(m),g=new ON;return Object.assign(g,p),g})}}async editImageInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=x7(this.apiClient,e);return i=Z("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=v7(c),m=new Sz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=k8(this.apiClient,e);return i=Z("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=L8(c),m=new wz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=g8(this.apiClient,e);return i=Z("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=x8(c),m=new Az;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=N8(this.apiClient,e);return i=Z("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=C8(c),m=new Iz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=e8(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>n0(m))}else{const d=Z7(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>t0(m))}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=c8(this.apiClient,e);return l=Z("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=u8(m),g=new zN;return Object.assign(g,p),g})}else{const d=l8(this.apiClient,e);return l=Z("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=d8(m),g=new zN;return Object.assign(g,p),g})}}async update(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=P8(this.apiClient,e);return l=Z("{model}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>n0(m))}else{const d=M8(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>t0(m))}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=h7(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=p7(m),g=new FN;return Object.assign(g,p),g})}else{const d=m7(this.apiClient,e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=f7(m),g=new FN;return Object.assign(g,p),g})}}async countTokens(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=c7(this.apiClient,e);return l=Z("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=u7(m),g=new GN;return Object.assign(g,p),g})}else{const d=l7(this.apiClient,e);return l=Z("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=d7(m),g=new GN;return Object.assign(g,p),g})}}async computeTokens(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=t7(this.apiClient,e);return i=Z("{model}:computeTokens",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=n7(c),m=new Rz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=B7(this.apiClient,e);return l=Z("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=F7(m),g=new Om;return Object.assign(g,p),g})}else{const d=G7(this.apiClient,e);return l=Z("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=z7(m),g=new Om;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IG extends Ca{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bz(e);return l=Z("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}else{const d=yz(e);return l=Z("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}}async fetchPredictVideosOperationInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=mz(e);return i=Z("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RG(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function jG(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>zG(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function MG(t,e,n){const s={},a=u(e,["expireTime"]);n!==void 0&&a!=null&&h(n,["expireTime"],a);const i=u(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&h(n,["newSessionExpireTime"],i);const o=u(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const l=u(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&h(n,["bidiGenerateContentSetup"],OG(t,l));const c=u(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&h(n,["fieldMask"],c),s}function PG(t,e){const n={},s=u(e,["config"]);return s!=null&&h(n,["config"],MG(t,s,n)),n}function DG(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function kG(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LG(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function VG(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function UG(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],_v(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],jG(tn(y)));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let k=ll(T);Array.isArray(k)&&(k=k.map(R=>GG(ol(R)))),h(e,["setup","tools"],k)}const A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&h(e,["setup","sessionResumption"],FG(A));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const S=u(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&h(e,["setup","realtimeInputConfig"],S);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);if(e!==void 0&&V!=null&&h(e,["setup","proactivity"],V),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function OG(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],De(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],UG(a,n)),n}function zG(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],DG(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],kG(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],RG(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function FG(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GG(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],LG(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],VG(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BG(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(i=>`${n}.${i}`);e.push(...a)}else e.push(n)}return e.join(",")}function qG(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const i=BG(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];a.length>0&&(l=a.map(d=>o.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class HG extends Ca{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=PG(this.apiClient,e);i=Z("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const c=qG(l,e.config);return a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),a.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $G(t,e){const n={},s=u(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function YG(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&$G(s,e),e}function JG(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function KG(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function QG(t){const e={},n=u(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const s=u(t,["config"]);return s!=null&&KG(s,e),e}function XG(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["documents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WG extends Ca{constructor(e){super(),this.apiClient=e,this.list=async n=>new yr(_a.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=JG(e);return i=Z("{name}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=YG(e);a=Z("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=QG(e);return i=Z("{parent}/documents",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=XG(c),m=new jz;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZG extends Ca{constructor(e,n=new WG(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new yr(_a.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=B8(e);return i=Z("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$8(e);return i=Z("{name}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=H8(e);a=Z("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=W8(e);return i=Z("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=Z8(c),m=new Mz;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eG(e);return i=Z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=tG(c),m=new Pz;return Object.assign(m,d),m})}}async importFile(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=K8(e);return i=Z("{file_search_store_name}:importFile",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=J8(c),m=new gv;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let r1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return r1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const eB=()=>r1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const i0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class as extends Error{}class un extends as{constructor(e,n,s,a){super(`${un.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new Kh({message:s,cause:i0(n)});const i=n;return e===400?new l1(e,i,s,a):e===401?new c1(e,i,s,a):e===403?new d1(e,i,s,a):e===404?new u1(e,i,s,a):e===409?new m1(e,i,s,a):e===422?new h1(e,i,s,a):e===429?new f1(e,i,s,a):e>=500?new p1(e,i,s,a):new un(e,i,s,a)}}class r0 extends un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Kh extends un{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class o1 extends Kh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class l1 extends un{}class c1 extends un{}class d1 extends un{}class u1 extends un{}class m1 extends un{}class h1 extends un{}class f1 extends un{}class p1 extends un{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tB=/^[a-z][a-z0-9+.-]*:/i,nB=t=>tB.test(t);let o0=t=>(o0=Array.isArray,o0(t));const sB=o0;let aB=sB;const dC=aB;function iB(t){if(!t)return!0;for(const e in t)return!1;return!0}function rB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const oB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new as(`${t} must be an integer`);if(e<0)throw new as(`${t} must be a positive integer`);return e},lB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uB=()=>{var t,e,n,s,a;const i=dB();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":mC(Deno.build.os),"X-Stainless-Arch":uC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":mC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":uC((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const o=mB();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,i=s[2]||0,o=s[3]||0;return{browser:e,version:`${a}.${i}.${o}`}}}return null}const uC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",mC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let tu;const hB=()=>tu??(tu=uB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function g1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function pB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return g1({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function x1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function gB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v1=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function yp(t,e,n){return v1(),new File(t,e??"unknown_file",n)}function vB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const yB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&y1(t),_B=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function EB(t,e,n){if(v1(),t=await t,bB(t))return t instanceof File?t:yp([await t.arrayBuffer()],t.name);if(_B(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),yp(await l0(a),e,n)}const s=await l0(t);if(e||(e=vB(t)),!(n!=null&&n.type)){const a=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return yp(s,e,n)}async function l0(t){var e,n,s,a,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(y1(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(yB(t))try{for(var l=!0,c=fs(t),d;d=await c.next(),e=d.done,!e;l=!0){a=d.value,l=!1;const m=a;o.push(...await l0(m))}}catch(m){n={error:m}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(n)throw n.error}}else{const m=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${NB(t)}`)}return o}function NB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b1{constructor(e){this._client=e}}b1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _1(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const hC=Object.freeze(Object.create(null)),CB=(t=_1)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const i=[],o=n.reduce((m,p,g)=>{var x,y,T;/[?#]/.test(p)&&(a=!0);const A=s[g];let b=(a?encodeURIComponent:t)(""+A);return g!==s.length&&(A==null||typeof A=="object"&&A.toString===((T=Object.getPrototypeOf((y=Object.getPrototypeOf((x=A.hasOwnProperty)!==null&&x!==void 0?x:hC))!==null&&y!==void 0?y:hC))===null||T===void 0?void 0:T.toString))&&(b=A+"",i.push({start:m.length+p.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),m+p+(g===s.length?"":b)},""),l=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((m,p)=>m.start-p.start),i.length>0){let m=0;const p=i.reduce((g,x)=>{const y=" ".repeat(x.start-m),T="^".repeat(x.length);return m=x.start+x.length,g+y+T},"");throw new as(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${p}`)}return o},nu=CB(_1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E1 extends b1{create(e,n){var s;const{api_version:a=this._client.apiVersion}=e,i=Fm(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new as("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new as("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(nu`/${a}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(nu`/${a}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(nu`/${a}/interactions/${e}/cancel`,s)}get(e,n={},s){var a;const i=n??{},{api_version:o=this._client.apiVersion}=i,l=Fm(i,["api_version"]);return this._client.get(nu`/${o}/interactions/${e}`,Object.assign(Object.assign({query:l},s),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}E1._key=Object.freeze(["interactions"]);class N1 extends E1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TB(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let su;function Nv(t){let e;return(su??(e=new globalThis.TextEncoder,su=e.encode.bind(e)))(t)}let au;function fC(t){let e;return(au??(e=new globalThis.TextDecoder,au=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Nv(e):e;this.buffer=TB([this.buffer,n]);const s=[];let a;for(;(a=SB(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(fC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,o=fC(this.buffer.subarray(0,i));s.push(o),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Qh.NEWLINE_CHARS=new Set([`
`,"\r"]);Qh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function SB(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function wB(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gm={off:0,error:200,warn:300,info:400,debug:500},pC=(t,e,n)=>{if(t){if(rB(Gm,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Gm))}`)}};function Jl(){}function iu(t,e,n){return!e||Gm[t]>Gm[n]?Jl:e[t].bind(e)}const AB={error:Jl,warn:Jl,info:Jl,debug:Jl};let gC=new WeakMap;function ln(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return AB;const a=gC.get(n);if(a&&a[0]===s)return a[1];const i={error:iu("error",n,s),warn:iu("warn",n,s),info:iu("info",n,s),debug:iu("debug",n,s)};return gC.set(n,[s,i]),i}const qi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kr{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let a=!1;const i=s?ln(s):console;function o(){return hs(this,arguments,function*(){var c,d,m,p;if(a)throw new as("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let g=!1;try{try{for(var x=!0,y=fs(IB(e,n)),T;T=yield me(y.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const A=p;if(!g)if(A.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield me(JSON.parse(A.data))}catch(b){throw i.error("Could not parse message into JSON:",A.data),i.error("From chunk:",A.raw),b}}}catch(A){d={error:A}}finally{try{!x&&!c&&(m=y.return)&&(yield me(m.call(y)))}finally{if(d)throw d.error}}g=!0}catch(A){if(a0(A))return yield me(void 0);throw A}finally{g||n.abort()}})}return new Kr(o,n,s)}static fromReadableStream(e,n,s){let a=!1;function i(){return hs(this,arguments,function*(){var c,d,m,p;const g=new Qh,x=x1(e);try{for(var y=!0,T=fs(x),A;A=yield me(T.next()),c=A.done,!c;y=!0){p=A.value,y=!1;const b=p;for(const N of g.decode(b))yield yield me(N)}}catch(b){d={error:b}}finally{try{!y&&!c&&(m=T.return)&&(yield me(m.call(T)))}finally{if(d)throw d.error}}for(const b of g.flush())yield yield me(b)})}function o(){return hs(this,arguments,function*(){var c,d,m,p;if(a)throw new as("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let g=!1;try{try{for(var x=!0,y=fs(i()),T;T=yield me(y.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const A=p;g||A&&(yield yield me(JSON.parse(A)))}}catch(A){d={error:A}}finally{try{!x&&!c&&(m=y.return)&&(yield me(m.call(y)))}finally{if(d)throw d.error}}g=!0}catch(A){if(a0(A))return yield me(void 0);throw A}finally{g||n.abort()}})}return new Kr(o,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=i=>({next:()=>{if(i.length===0){const o=s.next();e.push(o),n.push(o)}return i.shift()}});return[new Kr(()=>a(e),this.controller,this.client),new Kr(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return g1({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:i}=await n.next();if(i)return s.close();const o=Nv(JSON.stringify(a)+`
`);s.enqueue(o)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function IB(t,e){return hs(this,arguments,function*(){var s,a,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new as("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new as("Attempted to iterate over a response with no body");const l=new jB,c=new Qh,d=x1(t.body);try{for(var m=!0,p=fs(RB(d)),g;g=yield me(p.next()),s=g.done,!s;m=!0){o=g.value,m=!1;const x=o;for(const y of c.decode(x)){const T=l.decode(y);T&&(yield yield me(T))}}}catch(x){a={error:x}}finally{try{!m&&!s&&(i=p.return)&&(yield me(i.call(p)))}finally{if(a)throw a.error}}for(const x of c.flush()){const y=l.decode(x);y&&(yield yield me(y))}})}function RB(t){return hs(this,arguments,function*(){var n,s,a,i;let o=new Uint8Array;try{for(var l=!0,c=fs(t),d;d=yield me(c.next()),n=d.done,!n;l=!0){i=d.value,l=!1;const m=i;if(m==null)continue;const p=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?Nv(m):m;let g=new Uint8Array(o.length+p.length);g.set(o),g.set(p,o.length),o=g;let x;for(;(x=wB(o))!==-1;)yield yield me(o.slice(0,x)),o=o.slice(x)}}catch(m){s={error:m}}finally{try{!l&&!n&&(a=c.return)&&(yield me(a.call(c)))}finally{if(s)throw s.error}}o.length>0&&(yield yield me(o))})}class jB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=MB(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function MB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function PB(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:i}=e,o=await(async()=>{var l;if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Kr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return ln(t).debug(`[${s}] response parsed`,qi({retryOfRequestLogID:a,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cv extends Promise{constructor(e,n,s=PB){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Cv(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C1=Symbol("brand.privateNullableHeaders");function*DB(t){if(!t)return;if(C1 in t){const{values:s,nulls:a}=t;yield*s.entries();for(const i of a)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():dC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const i=dC(s[1])?s[1]:[s[1]];let o=!1;for(const l of i)l!==void 0&&(e&&!o&&(o=!0,yield[a,null]),yield[a,l])}}const Ll=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[i,o]of DB(s)){const l=i.toLowerCase();a.has(l)||(e.delete(i),a.add(l)),o===null?(e.delete(i),n.add(l)):(e.append(i,o),n.delete(l))}}return{[C1]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bp=t=>{var e,n,s,a,i,o;if(typeof globalThis.process<"u")return(s=(n=(e=rz)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||i===void 0?void 0:i.call(a,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var T1;class Xh{constructor(e){var n,s,a,i,o,l,c,{baseURL:d=bp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(n=bp("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,g=Fm(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:m,apiVersion:p},g),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(s=x.timeout)!==null&&s!==void 0?s:Xh.DEFAULT_TIMEOUT,this.logger=(a=x.logger)!==null&&a!==void 0?a:console;const y="warn";this.logLevel=y,this.logLevel=(o=(i=pC(x.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:pC(bp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:y,this.fetchOptions=x.fetchOptions,this.maxRetries=(l=x.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=x.fetch)!==null&&c!==void 0?c:fB(),this.encoder=xB,this._options=x,this.apiKey=m,this.apiVersion=p,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ll([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ll([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ll([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new as(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Dr}`}defaultIdempotencyKey(){return`stainless-node-retry-${eB()}`}makeStatusError(e,n,s,a){return un.generate(e,n,s,a)}buildURL(e,n,s){const a=!this.baseURLOverridden()&&s||this.baseURL,i=nB(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return iB(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new Cv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var a,i,o;const l=await e,c=(a=l.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:m,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:m,options:l});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=s===void 0?"":`, retryOf: ${s}`,y=Date.now();if(ln(this).debug(`[${g}] sending request`,qi({retryOfRequestLogID:s,method:l.method,url:m,options:l,headers:d.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new r0;const T=new AbortController,A=await this.fetchWithTimeout(m,d,p,T).catch(i0),b=Date.now();if(A instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((o=l.signal)===null||o===void 0)&&o.aborted)throw new r0;const D=a0(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(n)return ln(this).info(`[${g}] connection ${D?"timed out":"failed"} - ${S}`),ln(this).debug(`[${g}] connection ${D?"timed out":"failed"} (${S})`,qi({retryOfRequestLogID:s,url:m,durationMs:b-y,message:A.message})),this.retryRequest(l,n,s??g);throw ln(this).info(`[${g}] connection ${D?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${g}] connection ${D?"timed out":"failed"} (error; no more retries left)`,qi({retryOfRequestLogID:s,url:m,durationMs:b-y,message:A.message})),D?new o1:new Kh({cause:A})}const N=`[${g}${x}] ${d.method} ${m} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${b-y}ms`;if(!A.ok){const S=await this.shouldRetry(A);if(n&&S){const I=`retrying, ${n} attempts remaining`;return await gB(A.body),ln(this).info(`${N} - ${I}`),ln(this).debug(`[${g}] response error (${I})`,qi({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:b-y})),this.retryRequest(l,n,s??g,A.headers)}const D=S?"error; no more retries left":"error; not retryable";ln(this).info(`${N} - ${D}`);const V=await A.text().catch(I=>i0(I).message),k=lB(V),R=k?void 0:V;throw ln(this).debug(`[${g}] response error (${D})`,qi({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,message:R,durationMs:Date.now()-y})),this.makeStatusError(A.status,k,R,A.headers)}return ln(this).info(N),ln(this).debug(`[${g}] response start`,qi({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:b-y})),{response:A,options:l,controller:T,requestLogID:g,retryOfRequestLogID:s,startTime:y}}async fetchWithTimeout(e,n,s,a){const i=n||{},{signal:o,method:l}=i,c=Fm(i,["signal","method"]);o&&o.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),s),m=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:a.signal},m?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){var i;let o;const l=a==null?void 0:a.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(o=d)}const c=a==null?void 0:a.get("retry-after");if(c&&!o){const d=parseFloat(c);Number.isNaN(d)?o=Date.parse(c)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,d)}return await cB(o),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return o*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,a,i;const o=Object.assign({},e),{method:l,path:c,query:d,defaultBaseURL:m}=o,p=this.buildURL(c,d,m);"timeout"in o&&oB("timeout",o.timeout),o.timeout=(s=o.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:g,body:x}=this.buildBody({options:o}),y=await this.buildHeaders({options:e,method:l,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let l=Ll([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),hB()),this._options.defaultHeaders,s,e.headers,o]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ll([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:pB(e)}:this.encoder({body:e,headers:s})}}Xh.DEFAULT_TIMEOUT=6e4;class Gt extends Xh{constructor(){super(...arguments),this.interactions=new N1(this)}}T1=Gt;Gt.GeminiNextGenAPIClient=T1;Gt.GeminiNextGenAPIClientError=as;Gt.APIError=un;Gt.APIConnectionError=Kh;Gt.APIConnectionTimeoutError=o1;Gt.APIUserAbortError=r0;Gt.NotFoundError=u1;Gt.ConflictError=m1;Gt.RateLimitError=f1;Gt.BadRequestError=l1;Gt.AuthenticationError=c1;Gt.InternalServerError=p1;Gt.PermissionDeniedError=d1;Gt.UnprocessableEntityError=h1;Gt.toFile=EB;Gt.Interactions=N1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function LB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function VB(t,e){const n={},s=u(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function UB(t,e){const n={},s=u(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function OB(t,e,n){const s={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=u(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&h(e,["displayName"],a),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=u(t,["epochCount"]);e!==void 0&&i!=null&&h(e,["tuningTask","hyperparameters","epochCount"],i);const o=u(t,["learningRateMultiplier"]);if(o!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],o),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=u(t,["batchSize"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","batchSize"],l);const c=u(t,["learningRate"]);if(e!==void 0&&c!=null&&h(e,["tuningTask","hyperparameters","learningRate"],c),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function zB(t,e,n){const s={};let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const x=u(t,["validationDataset"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec"],xC(x))}else if(a==="PREFERENCE_TUNING"){const x=u(t,["validationDataset"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec"],xC(x))}const i=u(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&h(e,["tunedModelDisplayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const x=u(t,["epochCount"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(l==="PREFERENCE_TUNING"){const x=u(t,["epochCount"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const x=u(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(c==="PREFERENCE_TUNING"){const x=u(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const x=u(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(d==="PREFERENCE_TUNING"){const x=u(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let m=u(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const x=u(t,["adapterSize"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(m==="PREFERENCE_TUNING"){const x=u(t,["adapterSize"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=u(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const g=u(t,["beta"]);return e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),s}function FB(t,e){const n={},s=u(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const a=u(t,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const i=u(t,["trainingDataset"]);i!=null&&WB(i);const o=u(t,["config"]);return o!=null&&OB(o,n),n}function GB(t,e){const n={},s=u(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const a=u(t,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const i=u(t,["trainingDataset"]);i!=null&&ZB(i,n,e);const o=u(t,["config"]);return o!=null&&zB(o,n,e),n}function BB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function qB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function HB(t,e,n){const s={},a=u(t,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),s}function $B(t,e,n){const s={},a=u(t,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),s}function YB(t,e){const n={},s=u(t,["config"]);return s!=null&&HB(s,n),n}function JB(t,e){const n={},s=u(t,["config"]);return s!=null&&$B(s,n),n}function KB(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const i=u(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>S1(l))),h(n,["tuningJobs"],o)}return n}function QB(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const i=u(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>c0(l))),h(n,["tuningJobs"],o)}return n}function XB(t,e){const n={},s=u(t,["name"]);s!=null&&h(n,["model"],s);const a=u(t,["name"]);return a!=null&&h(n,["endpoint"],a),n}function WB(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(n,["examples","examples"],a)}return n}function ZB(t,e,n){const s={};let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function S1(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["state"]);i!=null&&h(n,["state"],GI(i));const o=u(t,["createTime"]);o!=null&&h(n,["createTime"],o);const l=u(t,["tuningTask","startTime"]);l!=null&&h(n,["startTime"],l);const c=u(t,["tuningTask","completeTime"]);c!=null&&h(n,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(n,["updateTime"],d);const m=u(t,["description"]);m!=null&&h(n,["description"],m);const p=u(t,["baseModel"]);p!=null&&h(n,["baseModel"],p);const g=u(t,["_self"]);return g!=null&&h(n,["tunedModel"],XB(g)),n}function c0(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["state"]);i!=null&&h(n,["state"],GI(i));const o=u(t,["createTime"]);o!=null&&h(n,["createTime"],o);const l=u(t,["startTime"]);l!=null&&h(n,["startTime"],l);const c=u(t,["endTime"]);c!=null&&h(n,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(n,["updateTime"],d);const m=u(t,["error"]);m!=null&&h(n,["error"],m);const p=u(t,["description"]);p!=null&&h(n,["description"],p);const g=u(t,["baseModel"]);g!=null&&h(n,["baseModel"],g);const x=u(t,["tunedModel"]);x!=null&&h(n,["tunedModel"],x);const y=u(t,["preTunedModel"]);y!=null&&h(n,["preTunedModel"],y);const T=u(t,["supervisedTuningSpec"]);T!=null&&h(n,["supervisedTuningSpec"],T);const A=u(t,["preferenceOptimizationSpec"]);A!=null&&h(n,["preferenceOptimizationSpec"],A);const b=u(t,["tuningDataStats"]);b!=null&&h(n,["tuningDataStats"],b);const N=u(t,["encryptionSpec"]);N!=null&&h(n,["encryptionSpec"],N);const S=u(t,["partnerModelTuningSpec"]);S!=null&&h(n,["partnerModelTuningSpec"],S);const D=u(t,["customBaseModel"]);D!=null&&h(n,["customBaseModel"],D);const V=u(t,["experiment"]);V!=null&&h(n,["experiment"],V);const k=u(t,["labels"]);k!=null&&h(n,["labels"],k);const R=u(t,["outputUri"]);R!=null&&h(n,["outputUri"],R);const _=u(t,["pipelineJob"]);_!=null&&h(n,["pipelineJob"],_);const I=u(t,["serviceAccount"]);I!=null&&h(n,["serviceAccount"],I);const C=u(t,["tunedModelDisplayName"]);C!=null&&h(n,["tunedModelDisplayName"],C);const E=u(t,["veoTuningSpec"]);return E!=null&&h(n,["veoTuningSpec"],E),n}function eq(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["metadata"]);i!=null&&h(n,["metadata"],i);const o=u(t,["done"]);o!=null&&h(n,["done"],o);const l=u(t,["error"]);return l!=null&&h(n,["error"],l),n}function xC(t,e){const n={},s=u(t,["gcsUri"]);s!=null&&h(n,["validationDatasetUri"],s);const a=u(t,["vertexDatasetResource"]);return a!=null&&h(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tq extends Ca{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yr(_a.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:a});return i.baseModel=void 0,await this.tuneInternal(i)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),i=await this.tuneMldevInternal(a);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Xg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=qB(e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>c0(m))}else{const d=BB(e);return l=Z("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>S1(m))}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=JB(e);return l=Z("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=QB(m),g=new BN;return Object.assign(g,p),g})}else{const d=YB(e);return l=Z("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=KB(m),g=new BN;return Object.assign(g,p),g})}}async cancel(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=LB(e);return l=Z("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=UB(m),g=new qN;return Object.assign(g,p),g})}else{const d=kB(e);return l=Z("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=VB(m),g=new qN;return Object.assign(g,p),g})}}async tuneInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=GB(e,e);return i=Z("tuningJobs",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>c0(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=FB(e);return i=Z("tunedModels",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>eq(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sq=1024*1024*8,aq=3,iq=1e3,rq=2,Bm="x-goog-upload-status";async function oq(t,e,n){var s;const a=await w1(t,e,n),i=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Bm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function lq(t,e,n){var s;const a=await w1(t,e,n),i=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Bm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=LI(i),l=new xv;return Object.assign(l,o),l}async function w1(t,e,n){var s,a;let i=0,o=0,l=new Wg(new Response),c="upload";for(i=t.size;o<i;){const d=Math.min(sq,i-o),m=t.slice(o,o+d);o+d>=i&&(c+=", finalize");let p=0,g=iq;for(;p<aq&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((s=l==null?void 0:l.headers)===null||s===void 0)&&s[Bm]));)p++,await dq(g),g=g*rq;if(o+=d,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[Bm])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function cq(t){return{size:t.size,type:t.type}}function dq(t){return new Promise(e=>setTimeout(e,t))}class uq{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oq(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lq(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mq{create(e,n,s){return new hq(e,n,s)}}class hq{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vC="x-goog-api-key";class fq{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(vC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pq="gl-node/";class A1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Gt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=dz(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new fq(this.apiKey);this.apiClient=new cG({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:pq+"web",uploader:new uq,downloader:new nq}),this.models=new AG(this.apiClient),this.live=new EG(this.apiClient,a,new mq),this.batches=new OF(this.apiClient),this.chats=new b9(this.models,this.apiClient),this.caches=new x9(this.apiClient),this.files=new R9(this.apiClient),this.operations=new IG(this.apiClient),this.authTokens=new HG(this.apiClient),this.tunings=new tq(this.apiClient),this.fileSearchStores=new ZG(this.apiClient)}}const gq="AIzaSyDE6z8pU6Y63Vly8gCH4oYu3_FnCqBieZw",xq=async(t,e,n,s)=>{var p,g,x,y,T,A,b,N,S,D,V,k,R,_,I,C;const a=(s==null?void 0:s.trim())||gq,i=new A1({apiKey:a}),o="gemini-2.5-flash",l=Rn.buscarPorMateria(n.subjectName),c=l.length>0?l[0]:null;let d="";c?d=Rn.generarContextoIA(c.materia,c.semestre):d="No se encontr programa oficial especfico. Usar lineamientos generales del MCCEMS 2024.";const m=`
    Eres un experto pedagogo de la DGB/SEP con nivel de Supervisor Escolar.
    Tu tarea es generar una Planeacin Didctica detallada y rigurosa para Educacin Media Superior.

    REQUISITOS OBLIGATORIOS (CRITERIOS DE REVISIN):

    1. DATOS GENERALES:
       - Define un "periodo aproximado" realista para cubrir el contenido.
       - Calcula las horas totales con base en la carga semanal (ej. semanal * num_semanas).

    2. PROGRESIONES (NO PONGAS RESMENES):
       - Usa el TEXTO EXACTO y COMPLETO de la progresin oficial.
       - Indica el ID de la progresin (ej. "Progresin 1.3").
       
    3. CATEGORAS Y SUBCATEGORAS (MCCEMS):
       - Identifica las CATEGORAS centrales (Conceptos clave).
       - Identifica las SUBCATEGORAS (Conceptos transversales o integradores).

    4. VINCULACIN PAEC (Programa Aula-Escuela-Comunidad):
       - Define una problemtica comunitaria REAL o SIMULADA relacionada con el tema (ej. "Uso excesivo de redes en la comunidad", "Falta de agua", etc.).
       - Propn un proyecto breve que aborde esto.
       - Si no aplica, explcalo, pero intenta vincularlo.

    5. FUNDAMENTACIN PEDAGGICA (NUEVO REQUISITO):
       - Justifica: Por qu estas actividades? (Estilo DGB).
       - Vinculacin: Relaciona con reas transversales (Pensamiento Crtico, Ciencias, etc.).
       - Socioemocional: Qu recursos socioemocionales se activan?

    6. ESTUDIO INDEPENDIENTE:
       - Actividades fuera del aula (tareas).
       - Tiempo estimado.
       - Cmo se revisar (retroalimentacin).

    7. TABLA DE EVALUACIN (RIGUROSA):
       - Desglosa Instrumento, Porcentaje y Agente.
       - IMPORTANTSIMO: Define "criteria" (Qu se evala exactamente? ej. "Ortografa y redaccin", "Trabajo en equipo").

    SECUENCIA DIDCTICA:
    - Separa claramente: Docente (Enseanza) vs Alumno (Aprendizaje).
    
    INFORMACIN OFICIAL:
    ${d}

    CONTEXTO ESCOLAR:
    - Escuela: ${e.schoolName} (CCT: ${e.cct||"NO CAPTURADA"})
    - Diagnstico: ${e.vision}
    - Solicitud Usuario: "${t}"
  `;try{const E=await i.models.generateContent({model:o,contents:`Genera la planeacin completa para ${n.subjectName} cumpliendo estrictamente los 7 puntos de revisin.`,config:{systemInstruction:m,responseMimeType:"application/json",maxOutputTokens:8192,responseSchema:{type:F.OBJECT,properties:{title:{type:F.STRING},date:{type:F.STRING},subject:{type:F.STRING},meta:{type:F.OBJECT,properties:{teacher:{type:F.STRING},cycle:{type:F.STRING},period:{type:F.STRING},gradeGroup:{type:F.STRING},totalSessions:{type:F.NUMBER},hoursPerWeek:{type:F.NUMBER},startDate:{type:F.STRING},endDate:{type:F.STRING}}},context:{type:F.OBJECT,properties:{diagnosis:{type:F.STRING},studentProfile:{type:F.STRING}},required:["diagnosis","studentProfile"]},curricularElements:{type:F.OBJECT,properties:{progression:{type:F.STRING},progressionId:{type:F.STRING},learningGoals:{type:F.ARRAY,items:{type:F.STRING}},categories:{type:F.ARRAY,items:{type:F.STRING}},subcategories:{type:F.ARRAY,items:{type:F.STRING}}},required:["progression","learningGoals","categories"]},paec:{type:F.OBJECT,properties:{isLinked:{type:F.BOOLEAN},communityProblem:{type:F.STRING},projectTrigger:{type:F.STRING}}},fundamento:{type:F.OBJECT,properties:{progressionJustification:{type:F.STRING},sociocognitiveLink:{type:F.STRING},socioemotionalLink:{type:F.STRING},transversalityLink:{type:F.STRING}},required:["progressionJustification","sociocognitiveLink"]},independentStudy:{type:F.OBJECT,properties:{activities:{type:F.STRING},feedbackLink:{type:F.STRING},resources:{type:F.STRING},estimatedTime:{type:F.STRING}}},sessions:{type:F.ARRAY,items:{type:F.OBJECT,properties:{sessionNumber:{type:F.NUMBER},date:{type:F.STRING},topic:{type:F.STRING},sequence:{type:F.OBJECT,properties:{opening:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]},development:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]},closing:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]}},required:["opening","development","closing"]},resources:{type:F.ARRAY,items:{type:F.STRING}}},required:["sessionNumber","sequence"]}},evaluationTable:{type:F.ARRAY,items:{type:F.OBJECT,properties:{instrument:{type:F.STRING},percentage:{type:F.NUMBER},agent:{type:F.STRING},criteria:{type:F.STRING}},required:["instrument","percentage","agent","criteria"]}},evaluationDetails:{type:F.OBJECT,properties:{diagnostic:{type:F.STRING},formative:{type:F.STRING},summative:{type:F.STRING},instruments:{type:F.ARRAY,items:{type:F.STRING}},criteria:{type:F.ARRAY,items:{type:F.STRING}}}},teacherReflection:{type:F.OBJECT,properties:{strengths:{type:F.STRING},opportunities:{type:F.STRING},adjustments:{type:F.STRING}}},duaStrategies:{type:F.STRING},evaluation:{type:F.STRING},resources:{type:F.ARRAY,items:{type:F.STRING}},duration:{type:F.STRING},mccemsAlignment:{type:F.OBJECT,properties:{documentUrl:{type:F.STRING},validated:{type:F.BOOLEAN}}},transversality:{type:F.OBJECT,properties:{paecTopics:{type:F.ARRAY,items:{type:F.STRING}},relationToOtherSubjects:{type:F.STRING}}},sequence:{type:F.OBJECT,properties:{opening:{type:F.STRING},development:{type:F.STRING},closing:{type:F.STRING}}}},required:["title","subject","sessions","meta","evaluationTable","fundamento","paec","independentStudy","curricularElements"]}}});let M;try{M=JSON.parse(E.text||"{}")}catch(G){throw console.error("Error al procesar JSON (Posible respuesta trunca):",G),new Error("La planeacin es muy extensa y se cort. Intenta generar menos sesiones (ej. reducir a 3) o ser ms especfico.")}M.sessions&&Array.isArray(M.sessions)&&(M.sessions=M.sessions.map(G=>{var O,B,te,Y,ne,de,we,tt,rt,ie,xe,Bt,ht,Pt,qt,yt,Xt,ye,ae,nt,Ae,Q,Ie,Dt;return{...G,date:G.date||"Por asignar",topic:G.topic||"Tema General",sequence:{opening:{activity:((B=(O=G.sequence)==null?void 0:O.opening)==null?void 0:B.activity)||"El docente inicia la sesin...",studentActivity:((Y=(te=G.sequence)==null?void 0:te.opening)==null?void 0:Y.studentActivity)||"Los alumnos atienden y participan...",time:((de=(ne=G.sequence)==null?void 0:ne.opening)==null?void 0:de.time)||"15 min",evidence:((tt=(we=G.sequence)==null?void 0:we.opening)==null?void 0:tt.evidence)||"Participacin"},development:{activity:((ie=(rt=G.sequence)==null?void 0:rt.development)==null?void 0:ie.activity)||"El docente explica...",studentActivity:((Bt=(xe=G.sequence)==null?void 0:xe.development)==null?void 0:Bt.studentActivity)||"Los alumnos realizan...",time:((Pt=(ht=G.sequence)==null?void 0:ht.development)==null?void 0:Pt.time)||"30 min",evidence:((yt=(qt=G.sequence)==null?void 0:qt.development)==null?void 0:yt.evidence)||"Apuntes/Ejercicios"},closing:{activity:((ye=(Xt=G.sequence)==null?void 0:Xt.closing)==null?void 0:ye.activity)||"El docente concluye...",studentActivity:((nt=(ae=G.sequence)==null?void 0:ae.closing)==null?void 0:nt.studentActivity)||"Los alumnos reflexionan...",time:((Q=(Ae=G.sequence)==null?void 0:Ae.closing)==null?void 0:Q.time)||"15 min",evidence:((Dt=(Ie=G.sequence)==null?void 0:Ie.closing)==null?void 0:Dt.evidence)||"Reflexin"}},resources:Array.isArray(G.resources)?G.resources:G.resources?[G.resources]:[]}}));const j={...M,learningGoal:((g=(p=M.curricularElements)==null?void 0:p.learningGoals)==null?void 0:g[0])||"",progression:((x=M.curricularElements)==null?void 0:x.progression)||"",sequence:(y=M.sequence)!=null&&y.opening?M.sequence:{opening:((N=(b=(A=(T=M.sessions)==null?void 0:T[0])==null?void 0:A.sequence)==null?void 0:b.opening)==null?void 0:N.activity)||"Consultar desglose por sesiones",development:((k=(V=(D=(S=M.sessions)==null?void 0:S[0])==null?void 0:D.sequence)==null?void 0:V.development)==null?void 0:k.activity)||"Consultar desglose por sesiones",closing:((C=(I=(_=(R=M.sessions)==null?void 0:R[0])==null?void 0:_.sequence)==null?void 0:I.closing)==null?void 0:C.activity)||"Consultar desglose por sesiones"},teacherReflection:M.teacherReflection||{strengths:"",opportunities:"",adjustments:""}};return c&&(j.mccemsAlignment||(j.mccemsAlignment={documentUrl:"",validated:!1}),j.mccemsAlignment.documentUrl=c.url_fuente,j.mccemsAlignment.validated=!0),j}catch(E){throw console.error("Error Gemini:",E),new Error(E.message||"Error al generar la planeacin. Intenta de nuevo.")}},vq=async()=>{try{const t=await je(ue(J,"alumnos")),e=t.size;if(e===0)return"No hay alumnos registrados en la base de datos.";const n=t.docs.map(g=>g.data());let s=0,a=0,i=0,o=0,l=0,c=0;const d=new Set;n.forEach(g=>{var x;g.estiloAprendizaje==="Visual"&&s++,g.estiloAprendizaje==="Auditivo"&&a++,g.estiloAprendizaje==="Kinestsico"&&i++,g.estiloAprendizaje==="Lecto-escritor"&&o++,(x=g.situacionLaboral)!=null&&x.includes("Trabaja")&&l++,c+=parseFloat(g.promedioAnterior||"0"),g.intereses&&Array.isArray(g.intereses)&&g.intereses.forEach(y=>d.add(y))});const m=(c/e).toFixed(1),p=Array.from(d).slice(0,5).join(", ");return`GRUPO CONFORMADO POR ${e} ESTUDIANTES REALES.
        Perfil de Aprendizaje: ${s} Visuales, ${a} Auditivos, ${i} Kinestsicos, ${o} Lecto-escritores.
        Contexto Socioeconmico: ${l} alumnos trabajan y estudian (${Math.round(l/e*100)}%).
        Nivel Acadmico: Promedio general de ${m}.
        Intereses Principales del Grupo: ${p}.
        
        IMPORTANTE: Adapta las estrategias didcticas a este perfil especfico (ej. si hay muchos kinestsicos, incluye actividades prcticas).`}catch(t){return console.error("Error fetching student stats",t),"Error al analizar base de datos de alumnos."}},I1=Gc.forwardRef(({plan:t,teacherName:e,schoolName:n,cct:s},a)=>{var i,o,l,c,d,m,p,g,x,y,T,A,b,N,S,D,V,k,R,_,I,C,E,M,j,G;return r.jsxs("article",{ref:a,className:"bg-white border border-slate-200 shadow-2xl rounded-none md:rounded-3xl p-10 print:p-0 print:border-none print:shadow-none font-serif text-sm print:w-full print:m-0 max-w-[216mm] mx-auto",children:[r.jsxs("div",{className:"flex justify-start items-center gap-6 mb-6 border-b-2 border-slate-900 pb-4",children:[r.jsx("img",{src:"/assets/logo_puebla_gob.png",alt:"Puebla Gobierno del Estado - Educacin",className:"h-16 w-auto object-contain"}),r.jsx("img",{src:"/assets/logo_puebla_amor.png",alt:"Por Amor a Puebla - Pensar en Grande",className:"h-12 w-auto object-contain"})]}),r.jsxs("div",{className:"mb-6 border border-slate-900 rounded-sm",children:[r.jsx("div",{className:"bg-slate-800 text-white px-3 py-1 border-b border-slate-900 font-bold text-xs uppercase text-center print:bg-slate-900 print:text-white",children:"I. Datos Generales de Identificacin"}),r.jsxs("div",{className:"grid grid-cols-4 text-xs divide-x divide-slate-300 border-b border-slate-300",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Plantel"}),r.jsx("span",{className:"font-bold text-slate-900",children:n||"Escuela"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"C.C.T."}),r.jsx("span",{className:"font-bold text-slate-900",children:s||"NO CAPTURADA"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Docente"}),r.jsx("span",{className:"font-bold text-slate-900",children:e||((i=t.meta)==null?void 0:i.teacher)})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Ciclo Escolar"}),r.jsx("span",{className:"font-bold text-slate-900",children:((o=t.meta)==null?void 0:o.cycle)||"2024-2025"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 text-xs divide-x divide-slate-300",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"UAC (Unidad de Aprendizaje)"}),r.jsx("span",{className:"font-bold text-slate-900 bg-yellow-50 px-1",children:t.subject})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Grupo / Semestre"}),r.jsx("span",{className:"font-bold text-slate-900",children:(l=t.meta)==null?void 0:l.gradeGroup})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Periodo de Trabajo"}),r.jsxs("span",{className:"font-bold text-slate-900",children:[((c=t.meta)==null?void 0:c.startDate)||"Inicio"," - ",((d=t.meta)==null?void 0:d.endDate)||"Fin",r.jsxs("span",{className:"text-slate-500 font-normal ml-1",children:["(",((m=t.meta)==null?void 0:m.hoursPerWeek)||4," hrs/sem)"]})]})]})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-900 rounded-sm",children:[r.jsx("div",{className:"bg-slate-100 px-3 py-1 border-b border-slate-300 font-bold text-xs uppercase print:bg-slate-200",children:"II. Elementos del Marco Curricular Comn"}),r.jsxs("div",{className:"p-3 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[r.jsx("span",{className:"text-[10px] font-bold text-white bg-slate-800 px-2 py-0.5 rounded",children:((p=t.curricularElements)==null?void 0:p.progressionId)||"Progresin"}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Descripcin de la Progresin:"})]}),r.jsxs("p",{className:"text-xs text-slate-900 italic bg-slate-50 p-2 border border-slate-200 rounded text-justify",children:['"',((g=t.curricularElements)==null?void 0:g.progression)||t.progression,'"']})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 border-b border-slate-200",children:"Categoras (Conceptos Centrales)"}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-800",children:((y=(x=t.curricularElements)==null?void 0:x.categories)==null?void 0:y.map((O,B)=>r.jsx("li",{children:O},B)))||r.jsx("li",{className:"text-red-500",children:"Sin categoras definidas"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 border-b border-slate-200",children:"Subcategoras (Conceptos Transversales)"}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-800",children:((A=(T=t.curricularElements)==null?void 0:T.subcategories)==null?void 0:A.map((O,B)=>r.jsx("li",{children:O},B)))||r.jsx("li",{children:"Se aborda de forma integradora."})})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Metas de Aprendizaje:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:(b=t.curricularElements)==null?void 0:b.learningGoals.map((O,B)=>r.jsx("span",{className:"bg-indigo-50 text-indigo-800 text-[10px] px-2 py-1 rounded border border-indigo-100",children:O},B))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"border border-slate-300 rounded-sm p-3 bg-white",children:[r.jsxs("div",{className:"font-bold text-xs uppercase text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:["III. Vinculacin PAEC",(N=t.paec)!=null&&N.isLinked?r.jsx("span",{className:"text-green-600",children:" Aplica"}):r.jsx("span",{className:"text-slate-400",children:" No aplica"})]}),(S=t.paec)!=null&&S.isLinked?r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-slate-600 block text-[10px] uppercase",children:"Problemtica Comunitaria:"}),t.paec.communityProblem]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-slate-600 block text-[10px] uppercase",children:"Proyecto / Accin:"}),t.paec.projectTrigger]})]}):r.jsx("p",{className:"text-xs text-slate-400 italic",children:"No se vincula directamente con un proyecto comunitario en esta sesin."})]}),r.jsxs("div",{className:"border border-slate-300 rounded-sm p-3 bg-white",children:[r.jsx("div",{className:"font-bold text-xs uppercase text-slate-700 mb-2 border-b border-slate-200 pb-1",children:"IV. Diagnstico del Grupo"}),r.jsx("p",{className:"text-xs text-slate-800 text-justify line-clamp-6",children:((D=t.context)==null?void 0:D.studentProfile)||((V=t.context)==null?void 0:V.diagnosis)||"Sin diagnstico registrado."})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-300 rounded-sm",children:[r.jsx("div",{className:"bg-slate-100 px-3 py-1 border-b border-slate-300 font-bold text-xs uppercase print:bg-slate-200",children:"V. Fundamentacin y Transversalidad"}),r.jsxs("div",{className:"p-3 text-xs space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Justificacin de Actividades (Dua/Estilos)"}),r.jsx("p",{className:"text-justify",children:((k=t.fundamento)==null?void 0:k.progressionJustification)||t.duaStrategies})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Vinculacin Socioemocional"}),r.jsx("p",{className:"text-justify",children:((R=t.fundamento)==null?void 0:R.socioemotionalLink)||"Fomento del bienestar y la colaboracin."})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Transversalidad con otras reas"}),r.jsx("p",{className:"italic text-slate-700",children:((_=t.fundamento)==null?void 0:_.transversalityLink)||((I=t.transversality)==null?void 0:I.relationToOtherSubjects)})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"bg-slate-900 text-white px-3 py-2 font-bold text-sm uppercase text-center print:bg-slate-900 rounded-t-sm",children:"VI. Secuencia Didctica"}),r.jsx("div",{className:"border border-slate-900 border-t-0 p-0",children:(C=t.sessions)==null?void 0:C.map((O,B)=>r.jsxs("div",{className:"avoid-break border-b border-slate-400 last:border-b-0",children:[r.jsxs("div",{className:"bg-slate-100 p-2 text-xs font-bold border-b border-slate-300 flex justify-between print:bg-slate-200",children:[r.jsxs("span",{children:["SESIN ",O.sessionNumber,": ",O.topic]}),r.jsx("span",{children:O.date})]}),r.jsxs("table",{className:"w-full text-left text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-300 bg-slate-50 text-[10px] uppercase text-slate-500",children:[r.jsx("th",{className:"p-2 w-[10%]",children:"Fase / Tiempo"}),r.jsx("th",{className:"p-2 w-[35%]",children:"Actividad Docente (Enseanza)"}),r.jsx("th",{className:"p-2 w-[35%]",children:"Actividad Estudiante (Aprendizaje)"}),r.jsx("th",{className:"p-2 w-[20%]",children:"Evaluacin / Evidencia"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[r.jsxs("tr",{className:"align-top",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Inicio ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:O.sequence.opening.time})]}),r.jsx("td",{className:"p-2",children:O.sequence.opening.activity}),r.jsx("td",{className:"p-2",children:O.sequence.opening.studentActivity}),r.jsx("td",{className:"p-2 italic",children:O.sequence.opening.evidence})]}),r.jsxs("tr",{className:"align-top bg-white",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Desarrollo ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:O.sequence.development.time})]}),r.jsx("td",{className:"p-2",children:O.sequence.development.activity}),r.jsx("td",{className:"p-2",children:O.sequence.development.studentActivity}),r.jsx("td",{className:"p-2 italic",children:O.sequence.development.evidence})]}),r.jsxs("tr",{className:"align-top",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Cierre ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:O.sequence.closing.time})]}),r.jsx("td",{className:"p-2",children:O.sequence.closing.activity}),r.jsx("td",{className:"p-2",children:O.sequence.closing.studentActivity}),r.jsx("td",{className:"p-2 italic",children:O.sequence.closing.evidence})]})]})]}),r.jsxs("div",{className:"p-2 bg-slate-50 border-t border-slate-200 text-[10px] text-slate-500",children:[r.jsx("span",{className:"font-bold uppercase mr-2",children:"Recursos:"}),O.resources.join(", ")]})]},B))})]}),r.jsxs("div",{className:"mb-6 border border-slate-500 rounded-sm bg-white avoid-break",children:[r.jsx("div",{className:"bg-slate-700 text-white px-3 py-1 border-b border-slate-500 font-bold text-xs uppercase print:bg-slate-800",children:"VII. Estudio Independiente"}),r.jsxs("div",{className:"p-3 text-xs grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Actividades Autnomas"}),r.jsx("p",{children:((E=t.independentStudy)==null?void 0:E.activities)||"Repaso y organizacin de apuntes."})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Tiempo Estimado"}),r.jsx("p",{children:((M=t.independentStudy)==null?void 0:M.estimatedTime)||"60 min semana"})]}),r.jsxs("div",{className:"md:col-span-3 border-t border-slate-200 pt-2 mt-1",children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Estrategia de Retroalimentacin"}),r.jsx("p",{className:"italic text-slate-700",children:((j=t.independentStudy)==null?void 0:j.feedbackLink)||"Revisin en la siguiente clase mediante preguntas aleatorias."})]})]})]}),t.evaluationTable&&t.evaluationTable.length>0&&r.jsxs("div",{className:"mb-6 border border-slate-500 rounded-sm avoid-break",children:[r.jsx("div",{className:"bg-slate-700 text-white px-3 py-2 border-b border-slate-500 font-bold text-sm uppercase text-center print:bg-slate-800 print:text-white",children:"VIII. Plan de Evaluacin y Acreditacin"}),r.jsxs("table",{className:"w-full text-left text-xs border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-100 border-b border-slate-400 text-slate-800 print:bg-slate-200",children:[r.jsx("th",{className:"p-3 border-r border-slate-300 w-[25%] font-bold uppercase text-[10px]",children:"Instrumento / Evidencia"}),r.jsx("th",{className:"p-3 border-r border-slate-300 w-[10%] text-center font-bold uppercase text-[10px]",children:"Valor"}),r.jsx("th",{className:"p-3 border-r border-slate-300 w-[15%] font-bold uppercase text-[10px]",children:"Agente"}),r.jsx("th",{className:"p-3 w-[50%] font-bold uppercase text-[10px]",children:"Criterio Especfico"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-300",children:[t.evaluationTable.map((O,B)=>r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("td",{className:"p-3 border-r border-slate-300 font-bold text-slate-900",children:O.instrument}),r.jsxs("td",{className:"p-3 border-r border-slate-300 text-center font-bold",children:[O.percentage,"%"]}),r.jsx("td",{className:"p-3 border-r border-slate-300 text-slate-700",children:O.agent}),r.jsx("td",{className:"p-3 text-slate-700 align-top",children:O.criteria})]},B)),r.jsxs("tr",{className:"bg-slate-100 font-bold text-slate-900 border-t-2 border-slate-400",children:[r.jsx("td",{className:"p-3 border-r border-slate-300 text-right uppercase text-[10px]",children:"Total Acumulado"}),r.jsxs("td",{className:"p-3 border-r border-slate-300 text-center",children:[t.evaluationTable.reduce((O,B)=>O+B.percentage,0),"%"]}),r.jsx("td",{colSpan:2,className:"p-3 bg-slate-50 text-[10px] font-normal italic text-slate-500",children:"* La evaluacin formativa es continua y sistemtica."})]})]})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-400 border-dashed rounded-sm p-4 bg-slate-50/50 avoid-break print:block hidden",children:[r.jsx("div",{className:"font-bold text-xs uppercase text-slate-500 mb-4 text-center",children:"IX. Retroalimentacin de la Prctica Docente (A llenar al finalizar la unidad)"}),r.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{children:r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"Fortalezas / Lo que funcion"})}),r.jsx("div",{children:r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"reas de Oportunidad / Lo que no funcion"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"Ajustes para futuras planeaciones"}),r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300 pt-8",children:"Firma del Docente"})]})]})]}),r.jsxs("div",{className:"mt-12 flex justify-between items-end pt-8 border-t border-slate-200",children:[r.jsx("div",{className:"text-center w-1/3",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:e||((G=t.meta)==null?void 0:G.teacher)}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Docente"})]})}),r.jsx("div",{className:"text-center w-1/3",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Revisin Tcnica"}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Coordinacin Acadmica"})]})}),r.jsx("div",{className:"text-center w-1/3",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Vo. Bo."}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Direccin del Plantel"})]})})]})]})}),yq=({plan:t,subjectName:e,semestre:n})=>{var c,d;const s=P.useMemo(()=>{var V,k;const m=[];let p=0,g=0;const x=(R,_,I,C,E=!1)=>{g+=E?20:10,_?(p+=E?20:10,m.push({id:R,label:R,status:"pass",message:I})):m.push({id:R,label:R,status:E?"fail":"warning",message:C})},y=Rn.buscarPorMateria(e),T=y.find(R=>!n||R.semestre===n)||y[0],A=!!t.progression;let b=!1,N="No identificado";if(T&&A){const R=T.progresiones.find(_=>t.progression.includes(_.descripcion.substring(0,50))||_.descripcion.includes(t.progression.substring(0,50)));R&&(b=!0,N=R.id.toString())}x("Alineacin de Progresin",b,`Progresin oficial detectada (ID: ${N})`,T?"La progresin no coincide exactamente con el catlogo oficial":"No se encontr programa oficial para validar",!0),x("Vinculacin PAEC",!!((V=t.paec)!=null&&V.isLinked)&&!!t.paec.communityProblem,"Problemtica comunitaria definida","Falta definir la problemtica PAEC",!0),x("Evaluacin Formativa",!!t.evaluationTable&&t.evaluationTable.length>0,"Tabla de evaluacin presente","No se detectaron criterios de evaluacin"),x("Recursos Didcticos",!!t.resources&&t.resources.length>0,"Recursos listados","Falta lista de recursos"),x("Actividades de Aprendizaje",!!t.sessions&&t.sessions.length>0||!!t.sequence,"Secuencia didctica completa","Secuencia didctica incompleta",!0);const S=!!((k=t.meta)!=null&&k.hoursPerWeek);x("Marco Temporal",S,"Tiempos definidos en metadatos","Faltan metadatos de tiempo");const D=g>0?Math.round(p/g*100):0;return{results:m,finalScore:D,programaOficial:T}},[t,e,n]),{results:a,finalScore:i,programaOficial:o}=s,l=m=>m>=90?"text-emerald-600 bg-emerald-50 border-emerald-200":m>=70?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200";return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-700",children:r.jsx(RI,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Auditora Pedaggica MCCEMS"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Validacin de alineacin con la Nueva Escuela Mexicana"})]})]}),r.jsxs("div",{className:`px-4 py-2 rounded-xl border font-bold text-xl flex items-center gap-2 ${l(i)}`,children:[r.jsxs("span",{children:[i,"%"]}),r.jsx("span",{className:"text-xs font-normal uppercase tracking-wider opacity-80",children:"Cumplimiento"})]})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Resultados del Anlisis"}),a.map((m,p)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[m.status==="pass"&&r.jsx(Uc,{className:"w-5 h-5 text-emerald-500 shrink-0 mt-0.5"}),m.status==="warning"&&r.jsx(Ei,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),m.status==="fail"&&r.jsx(Vm,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-700 text-sm",children:m.label}),r.jsx("p",{className:"text-xs text-slate-500",children:m.message})]})]},p))]}),r.jsxs("div",{className:"bg-indigo-50 rounded-xl p-5 border border-indigo-100",children:[r.jsxs("h4",{className:"text-indigo-800 font-bold mb-3 flex items-center gap-2",children:[r.jsx(at,{className:"w-4 h-4"}),"Referencia Oficial Utilizada"]}),o?r.jsxs("div",{className:"space-y-3 text-sm text-indigo-900/80",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Programa:"})," ",o.materia]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Semestre:"})," ",o.semestre]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Categoras MCC:"})," ",((d=(c=o.organizador_curricular)==null?void 0:c.categorias)==null?void 0:d.join(", "))||"No definidas"]}),r.jsx("div",{className:"pt-2 border-t border-indigo-200 mt-2",children:r.jsx("p",{className:"text-xs text-indigo-700",children:"Este auditor verifica que los contenidos generados correspondan con el programa oficial vigente de la SEP (2023-2024)."})})]}):r.jsxs("div",{className:"text-amber-700 text-sm flex items-center gap-2",children:[r.jsx(Ei,{className:"w-4 h-4"}),"No se encontr el programa oficial en la base de datos local para comparar."]})]})]})]})},Tv={getActiveProjects:async t=>{if(!t)return[];try{const e=re(J,"pmc",t),n=await kn(e);if(n.exists()){const s=n.data();return s.pecProjects&&Array.isArray(s.pecProjects)&&s.pecProjects.length>0?s.pecProjects:(s.paec||[]).map(i=>{const o=i;return{id:o.id,name:`Atencin a: ${o.name||o.titulo}`,problemId:o.id,justification:o.descripcion||"Sin justificacin",generalObjective:`Contribuir a la solucin de: ${o.name||o.titulo}`,specificObjectives:[],duration:"Ciclo Escolar",stages:[],products:[]}})}return[]}catch(e){return console.error("Error al cargar proyectos PEC:",e),[]}},getProjectById:async(t,e)=>(await Tv.getActiveProjects(t)).find(s=>s.id===e)},bq=({school:t,subject:e,teacherName:n,onSave:s})=>{const{user:a}=ct(),[i,o]=P.useState(""),[l,c]=P.useState([]),[d,m]=P.useState(""),[p,g]=P.useState(""),[x,y]=P.useState(1),[T,A]=P.useState("Rbrica"),[b,N]=P.useState(null),[S,D]=P.useState(4),[V,k]=P.useState(""),[R,_]=P.useState(""),[I,C]=P.useState("Aprendizaje Basado en Proyectos (ABP)"),[E,M]=P.useState("manual"),[j,G]=P.useState(""),[O,B]=P.useState([]),[te,Y]=P.useState(""),[ne,de]=P.useState(""),[we,tt]=P.useState(""),[rt,ie]=P.useState(!1),[xe,Bt]=P.useState(null),[ht,Pt]=P.useState(null),[qt,yt]=P.useState(!1),Xt=P.useRef(null),ye=kI.useReactToPrint({contentRef:Xt,documentTitle:`Planeacion-${e.subjectName}-${new Date().toLocaleDateString()}`});P.useEffect(()=>{if(e.subjectName){const Q=Rn.buscarPorMateria(e.subjectName);if(Q.length>0){const Ie=Q[0];c(Ie.progresiones||[]),N(Ie.semestre)}else c([])}},[e.subjectName]),P.useEffect(()=>{(async()=>{const Ie=await vq();tt(Ie)})()},[]),P.useEffect(()=>{(async()=>{if(a!=null&&a.schoolId){const Ie=await Tv.getActiveProjects(a.schoolId);B(Ie)}})()},[a==null?void 0:a.schoolId]);const ae=async()=>{var Me,ze,Gs,vd;if(!d&&!p){Pt("Por favor selecciona una progresin o escribe un tema.");return}ie(!0),Pt(null),Bt(null);let Q="",Ie=null;if(E==="manual")Q=`PROBLEMTICA PAEC: "${j||"A sugerencia de la IA basndose en el contexto"}"`,Ie=j?{isLinked:!0,communityProblem:j,projectTrigger:"Proyecto integrador"}:null;else{const bt=O.find(dl=>dl.id===te);bt&&(Q=`
           VINCULACIN AL PROYECTO ESCOLAR COMUNITARIO (PEC):
           - Nombre Proyecto: "${bt.name}"
           - Problemtica: "${bt.problemId}"
           - Justificacin: "${bt.justification}"
           - Objetivo General: "${bt.generalObjective}"
           - ACTIVIDAD ESPECFICA A DESARROLLAR EN ESTA CLASE: "${ne}"
           
           INSTRUCCIN SOBRE PEC:
           La planeacin DEBE girar en torno a contribuir a este proyecto desde la asignatura de ${e.subjectName}.
         `,Ie={isLinked:!0,communityProblem:bt.name,projectTrigger:bt.generalObjective})}const Dt=`
      Genera una planeacin didctica para la materia "${e.subjectName}" (Semestre ${b||"General"}).
      
      CONTEXTO ESCOLAR:
      - Escuela: ${t.schoolName}
      - Turno: ${t.shift||"Matutino"}
      - Municipio: ${t.municipality||"Puebla"}
      - Visin: ${t.vision}
      
      DATOS DEL DOCENTE:
      - Nombre: ${n||"Por definir"}
      
      CONFIGURACIN DE TIEMPO (REQUERIDO):
      - Sesiones: ${x}
      - Horas por semana: ${S}
      - Periodo: Del ${V||"Inicio"} al ${R||"Fin"}
      - DURACIN POR SESIN: 50 MINUTOS (ESTRICTO).
      
      DIAGNSTICO DEL GRUPO (DATOS REALES):
      ${we||"No hay datos de alumnos registrados."}

      CONFIGURACIN PEDAGGICA:
      1. PROGRESIN OFICIAL: "${d||"No especificada"}"
      2. TEMA / SITUACIN: "${p}"
      3. ESTRATEGIA DIDCTICA: "${I}"
      4. ESTRATEGIA DE EVALUACIN: "${T}"
      
      ${Q}
      
      INSTRUCCIONES CLAVE:
      - Usa la Estrategia Didctica seleccionada como eje de la secuencia.
      - Si hay Problemtica PAEC/PEC, vincula todas las actividades a ella.
      - Detalla actividad docente vs estudiante.
      - Incluye tabla de evaluacin con criterios especficos.
      - IMPORTANTE: Ajusta los tiempos de Inicio, Desarrollo y Cierre para que sumen EXACTAMENTE 50 minutos por sesin (Ej. 10min, 30min, 10min).
    `;try{const bt=await xq(Dt,t,e,i),dl={...bt,meta:{...bt.meta,teacher:n||((Me=bt.meta)==null?void 0:Me.teacher)||"",cycle:((ze=bt.meta)==null?void 0:ze.cycle)||"2024-2025",period:((Gs=bt.meta)==null?void 0:Gs.period)||"Semestral",gradeGroup:((vd=bt.meta)==null?void 0:vd.gradeGroup)||"General",totalSessions:x,hoursPerWeek:S,startDate:V||"Por definir",endDate:R||"Por definir"},paec:Ie||bt.paec,pecLinkage:E==="linked"?{isLinked:!0,pecId:te,pecActivity:ne}:void 0};Bt(dl)}catch(bt){Pt(bt.message||"Error al generar la planeacin.")}finally{ie(!1)}},nt=()=>{xe&&(s(xe),alert("Planeacin guardada con xito."))},Ae=()=>{if(!xe)return;let Q=`PLANEACIN: ${xe.title||xe.subject}
`;navigator.clipboard.writeText(Q),yt(!0),setTimeout(()=>yt(!1),2e3)};return r.jsxs("div",{className:"space-y-8 pb-20",children:[r.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-200 shadow-sm no-print",children:[r.jsxs("h3",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center gap-2",children:[r.jsx(Do,{className:"w-5 h-5 text-amber-500"}),"Configurador de Clase (Oficial SEP)"]}),r.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-100",children:[r.jsxs("label",{className:"text-xs font-bold text-indigo-700 uppercase flex items-center gap-2 mb-2",children:[r.jsx(Do,{className:"w-3 h-3"})," API Key de Gemini (Opcional - Para mayor velocidad)"]}),r.jsx("input",{type:"password",value:i,onChange:Q=>o(Q.target.value),placeholder:"Pegar Google Gemini API Key aqu...",className:"w-full p-2 rounded-lg border border-indigo-200 bg-white text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 font-mono"}),r.jsx("p",{className:"text-[10px] text-indigo-500 mt-1",children:"Usar tu propia clave asegura que no tengas lmites de cuota. Si lo dejas vaco, se usar la del sistema."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(at,{className:"w-4 h-4 text-indigo-500"}),"Progresin de Aprendizaje (",l.length," disponibles)"]}),r.jsxs("select",{value:d,onChange:Q=>m(Q.target.value),className:"w-full p-3 rounded-xl border border-slate-200 bg-slate-50 focus:border-indigo-500 focus:bg-white transition-all text-sm",children:[r.jsx("option",{value:"",children:"-- Selecciona una progresin oficial --"}),l.map(Q=>r.jsxs("option",{value:Q.descripcion,children:[Q.id,". ",Q.descripcion.substring(0,120),"..."]},Q.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),"Tema o Situacin Especfica"]}),r.jsx("input",{type:"text",value:p,onChange:Q=>g(Q.target.value),placeholder:"Ej. Ciberseguridad y redes sociales...",className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-emerald-500 transition-all text-sm"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-orange-500"}),"Estrategia Didctica"]}),r.jsxs("select",{value:I,onChange:Q=>C(Q.target.value),className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-orange-500 text-sm",children:[r.jsx("option",{value:"Aprendizaje Basado en Proyectos (ABP)",children:"Aprendizaje Basado en Proyectos (ABP)"}),r.jsx("option",{value:"Aprendizaje Basado en Problemas (ABPr)",children:"Aprendizaje Basado en Problemas (ABPr)"}),r.jsx("option",{value:"Estudio de Casos",children:"Estudio de Casos"}),r.jsx("option",{value:"Aprendizaje Colaborativo",children:"Aprendizaje Colaborativo"}),r.jsx("option",{value:"Aula Invertida",children:"Aula Invertida"}),r.jsx("option",{value:"Indagacin (STEAM)",children:"Indagacin (STEAM)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-pink-500"}),"Vinculacin PEC"]}),r.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-0.5",children:[r.jsx("button",{onClick:()=>M("manual"),className:`px-2 py-0.5 text-[10px] rounded-md font-bold transition-all ${E==="manual"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:"Manual"}),r.jsx("button",{onClick:()=>M("linked"),className:`px-2 py-0.5 text-[10px] rounded-md font-bold transition-all ${E==="linked"?"bg-pink-500 shadow text-white":"text-slate-400"}`,children:"Proyecto Vinculado"})]})]}),E==="manual"?r.jsx("input",{type:"text",value:j,onChange:Q=>G(Q.target.value),placeholder:"Ej. Falta de agua, Contaminacin...",className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-pink-500 text-sm"}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:te,onChange:Q=>Y(Q.target.value),className:"w-full p-3 rounded-xl border border-pink-200 bg-pink-50 focus:border-pink-500 text-sm text-pink-900 font-medium",children:[r.jsx("option",{value:"",children:"-- Selecciona Proyecto Activo --"}),O.map(Q=>r.jsx("option",{value:Q.id,children:Q.name},Q.id))]}),te&&r.jsx("input",{type:"text",value:ne,onChange:Q=>de(Q.target.value),placeholder:"Qu actividad especfica del proyecto hars?",className:"w-full p-2 rounded-lg border border-pink-200 bg-white text-xs"})]})]})]}),r.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-slate-100",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2 mb-2",children:[r.jsx(Po,{className:"w-3 h-3"})," Duracin"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("select",{value:x,onChange:Q=>y(Number(Q.target.value)),className:"w-full p-2 rounded-lg border border-slate-200 text-sm",children:[1,2,3,4,5,6].map(Q=>r.jsxs("option",{value:Q,children:[Q," Sesiones"]},Q))}),r.jsx("select",{value:S,onChange:Q=>D(Number(Q.target.value)),className:"w-full p-2 rounded-lg border border-slate-200 text-sm",children:[1,2,3,4,5,6,7,8].map(Q=>r.jsxs("option",{value:Q,children:[Q," Hrs/Sem"]},Q))})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2 mb-2",children:[r.jsx(Oh,{className:"w-3 h-3"})," Periodo de Aplicacin"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"date",className:"p-2 border border-slate-200 rounded-lg text-xs",value:V,onChange:Q=>k(Q.target.value)}),r.jsx("input",{type:"date",className:"p-2 border border-slate-200 rounded-lg text-xs",value:R,onChange:Q=>_(Q.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2 mb-2",children:[r.jsx(II,{className:"w-3 h-3"})," Tipo de Evaluacin"]}),r.jsxs("select",{value:T,onChange:Q=>A(Q.target.value),className:"w-full p-2 rounded-lg border border-slate-200 bg-white focus:border-purple-500 text-sm",children:[r.jsx("option",{value:"Rbrica Detallada",children:"Rbrica Detallada"}),r.jsx("option",{value:"Lista de Cotejo",children:"Lista de Cotejo"}),r.jsx("option",{value:"Gua de Observacin",children:"Gua de Observacin"}),r.jsx("option",{value:"Proyecto Transversal",children:"Proyecto Transversal"})]})]})]})]}),r.jsxs("button",{disabled:rt||!d&&!p,onClick:ae,className:`w-full py-4 rounded-xl font-bold flex justify-center items-center gap-2 shadow-lg transition-all ${rt||!d&&!p?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":"bg-indigo-600 text-white hover:bg-indigo-700 active:scale-95"} `,children:[rt?r.jsx(rl,{className:"w-5 h-5 animate-spin"}):r.jsx(wO,{className:"w-5 h-5"}),rt?"Generando Planeacin Oficial...":"Generar Planeacin Completa"]})]}),ht&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl animate-in zoom-in duration-300",children:ht}),xe&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-700",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4 no-print",children:[r.jsxs("h4",{className:"font-bold text-slate-700 uppercase tracking-widest text-xs flex items-center gap-2",children:[r.jsx(Uc,{className:"w-4 h-4 text-emerald-500"})," Planeacin Lista"]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold hover:bg-indigo-100 transition-colors",title:"Guardar en historial",children:[r.jsx(Ri,{className:"w-4 h-4"})," Guardar"]}),r.jsxs("button",{onClick:Ae,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${qt?"bg-emerald-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:"Copiar texto plano",children:[qt?r.jsx(Uc,{className:"w-4 h-4"}):r.jsx(TU,{className:"w-4 h-4"}),qt?"Copiado":"Copiar Texto"]}),r.jsxs("button",{onClick:()=>ye(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 transition-shadow shadow-lg shadow-slate-200",title:"Imprimir o guardar como PDF",children:[r.jsx(zh,{className:"w-4 h-4"})," Exportar a PDF"]})]})]}),r.jsx("div",{className:"mb-8 no-print animate-in fade-in slide-in-from-bottom-4 duration-700 delay-300",children:r.jsx(yq,{plan:xe,subjectName:e.subjectName,semestre:b||void 0})}),r.jsx("div",{className:"overflow-auto border border-slate-100 rounded-3xl shadow-xl print:shadow-none print:border-none print:rounded-none",children:r.jsx(I1,{ref:Xt,plan:xe,teacherName:n})})]})]})},yC=["Sofa","Santiago","Valentina","Sebastin","Mara","Alejandro","Ximena","Mateo","Camila","Nicols","Valeria","Diego","Ana","Samuel","Jos","Daniela","Luis","Fernanda","Gabriel","Mariana"],ru=["Garca","Rodrguez","Martnez","Hernndez","Lpez","Gonzlez","Prez","Snchez","Ramrez","Torres","Flores","Rivera","Gmez","Daz","Cruz","Reyes","Morales","Ortiz","Gutirrez","Castillo"],bC=["Visual","Auditivo","Kinestsico","Lecto-escritor"],_C=["Alto","Medio","Bajo","En riesgo"],ou=["Tecnologa","Artes","Deportes","Ciencias","Redes Sociales","Msica","Videojuegos","Lectura"],R1=async(t=60)=>{const e=EI(J),n=ue(J,"alumnos"),s=Array.from({length:t}).map(()=>{const a=yC[Math.floor(Math.random()*yC.length)],i=ru[Math.floor(Math.random()*ru.length)],o=ru[Math.floor(Math.random()*ru.length)];return{nombre:a,apellidoPaterno:i,apellidoMaterno:o,matricula:`2024${Math.floor(1e3+Math.random()*9e3)}`,email:`${a.toLowerCase()}.${i.toLowerCase()}@escuela.edu.mx`,estiloAprendizaje:bC[Math.floor(Math.random()*bC.length)],situacionLaboral:Math.random()>.7?"Trabaja y estudia":"Estudiante",promedioAnterior:(6+Math.random()*4).toFixed(1),nivelSocioemocional:_C[Math.floor(Math.random()*_C.length)],intereses:[ou[Math.floor(Math.random()*ou.length)],ou[Math.floor(Math.random()*ou.length)]],asistencias:Math.floor(80+Math.random()*20),grupo:"A",grado:"1"}});return s.forEach(a=>{const i=re(n);e.set(i,a)}),await e.commit(),s.length},_q={id:"paec-2025-001",encabezado:{institucion_superior:"Secretara de Educacin Pblica",subsecretaria:"Subsecretara de Educacin Media Superior",direccion_general:"Direccin de Bachilleratos Estatales y Preparatoria Abierta",supervision_escolar:"Zona Escolar 013",nombre_escuela:'Bachillerato General Oficial "Carlos Camacho Espritu"',turno:"Vespertino",cct:"21EBH0026G"},identidad:{nombre_programa:"PAEC - Programa Aula Escuela Comunidad",titulo_proyecto:"Cuidado y prevencin de la salud: Un enfoque integral",tipo_documento:"Plan Factible",ciclo_escolar:"2025  2026",fecha_elaboracion:new Date().toLocaleDateString("es-MX")},contenido:{justificacion:"El proyecto busca identificar problemticas crticas como el sedentarismo y la mala alimentacin. A travs de actividades interdisciplinarias, los estudiantes diagnostican hbitos, calculan su IMC y participan en activaciones fsicas.",proposito_general:"Identificar y atender problemas de salud mediante investigacin y accin colectiva (Rally deportivo, ferias de salud) para fomentar el bienestar integral.",metodologia_diseno:"Aprendizaje Basado en Proyectos Comunitarios, integrando transversalidad con Cultura Digital, Ciencias y Educacin Fsica."},matriz_actividades:[{id:"act-01",fase_proyecto:"Identificacin",asignatura:"Cultura Digital II",proposito_formativo:"Analizar datos estadsticos de salud escolar.",contenidos_formativos:"Hoja de Clculo, Grficos Estadsticos",actividades_clave:"Diseo de encuestas digitales sobre hbitos alimenticios.",semana_ejecucion:"2 Semana Septiembre",participantes:["Docentes","Estudiantes"],instrumento_evaluacion:"Lista de Cotejo",evidencia_esperada:"Base de datos en Excel"},{id:"act-02",fase_proyecto:"Accin",asignatura:"Ciencias Naturales",proposito_formativo:"Comprender el metabolismo y nutricin.",contenidos_formativos:"IMC, Nutricin Celular",actividades_clave:"Jornada de medicin de peso y talla (Clculo IMC).",semana_ejecucion:"1 Semana Noviembre",participantes:["Docentes","Estudiantes","Padres"],instrumento_evaluacion:"Rbrica",evidencia_esperada:"Ficha clnica individual"}],ficha_administrativa:{entidad_federativa:"Puebla",municipio:"Puebla",localidad:"U.H. Dr. Mateo de Regil Rodrguez",duracion_proyecto:"Semestral",estatus:"Proceso",poblacion:{estudiantes_hombres:0,estudiantes_mujeres:0,estudiantes_nobinarios:0,padres_tutores:120,docentes:12,administrativos:3,directivos:1,total_participantes:0}},firmas:[{nombre:"C. Luisa Luna Barrios",cargo:"Docente Responsable"},{nombre:"C. Alejandra Adriana Marciano Mendoza",cargo:"Docente Responsable"},{nombre:"C. Hortensia Vallejo Vzquez",cargo:"Docente Responsable"},{nombre:"C. Griselda Caselin Cruz",cargo:"Docente Responsable"},{nombre:"C. Beatriz Snchez Torres",cargo:"Docente Responsable"},{nombre:"Jose Roberto Mendoza Mendoza",cargo:"Docente Responsable"}]},j1=({onClose:t,diagnostico:e})=>{const[n,s]=P.useState(_q);P.useEffect(()=>{e&&s(m=>{var p;return{...m,identidad:{...m.identidad,titulo_proyecto:(p=e.problemaPAEC)!=null&&p.problema?`Intervencin: ${e.problemaPAEC.problema}`:m.identidad.titulo_proyecto},ficha_administrativa:{...m.ficha_administrativa,poblacion:{...m.ficha_administrativa.poblacion,total_participantes:e.totalAlumnos||0,estudiantes_hombres:Math.floor((e.totalAlumnos||0)/2),estudiantes_mujeres:Math.ceil((e.totalAlumnos||0)/2)}}}})},[e]);const{encabezado:a,identidad:i,contenido:o,matriz_actividades:l,ficha_administrativa:c,firmas:d}=n;return r.jsxs("div",{className:"fixed inset-0 bg-slate-100 z-50 overflow-y-auto animate-in slide-in-from-bottom duration-300",children:[r.jsxs("nav",{className:"sticky top-0 bg-white border-b border-slate-200 z-40 px-6 py-4 flex justify-between items-center shadow-sm print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-bold text-slate-800 text-lg",children:"Visor de Plan Factible"}),r.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 text-xs rounded-full border border-slate-200",children:"Borrador"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors shadow-sm",children:[r.jsx(zh,{className:"w-4 h-4"})," Exportar PDF"]}),r.jsx("button",{onClick:t,className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})]}),r.jsxs("main",{className:"max-w-[21cm] mx-auto bg-white min-h-[29.7cm] shadow-2xl my-8 p-[2cm] print:shadow-none print:my-0 print:p-0 print:w-full",children:[r.jsxs("header",{className:"border-b-2 border-slate-800 pb-6 mb-8 text-center text-slate-900",children:[r.jsx("h1",{className:"text-sm font-bold uppercase tracking-widest text-slate-500",children:a.institucion_superior}),r.jsx("h2",{className:"text-xs font-semibold uppercase text-slate-500 mb-4",children:a.subsecretaria}),r.jsxs("div",{className:"flex justify-between items-end border-b border-slate-200 pb-2 mb-2 text-xs font-mono text-slate-600",children:[r.jsx("span",{children:a.supervision_escolar}),r.jsxs("span",{children:["CCT: ",r.jsx("strong",{children:a.cct})]})]}),r.jsx("div",{className:"text-3xl font-serif font-bold mt-4 mb-1",children:a.nombre_escuela}),r.jsxs("div",{className:"text-sm italic text-slate-600",children:["Turno: ",a.turno]})]}),r.jsx("section",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 mb-8 print:bg-white print:border-slate-800",children:r.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Programa"}),r.jsx("div",{className:"font-bold text-lg text-slate-800",children:i.nombre_programa})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Ciclo Escolar"}),r.jsx("div",{className:"font-bold text-lg text-slate-800",children:i.ciclo_escolar})]}),r.jsxs("div",{className:"col-span-2 mt-2 pt-4 border-t border-slate-200 border-dashed",children:[r.jsx("span",{className:"block text-xs font-bold text-indigo-600 uppercase tracking-wider mb-1",children:"Ttulo del Proyecto"}),r.jsxs("div",{className:"text-2xl font-extrabold text-indigo-900 leading-tight",children:['"',i.titulo_proyecto,'"']})]})]})}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase border-b border-slate-300 pb-2 mb-4",children:[r.jsx(Bh,{className:"w-4 h-4"})," Contexto y Poblacin"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Ubicacin"}),r.jsxs("div",{className:"font-semibold",children:[c.localidad,", ",c.municipio]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Poblacin Estudiantil"}),r.jsxs("div",{className:"font-semibold",children:[c.poblacion.total_participantes," Alumnos"]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Padres de Familia"}),r.jsxs("div",{className:"font-semibold",children:[c.poblacion.padres_tutores," Tutores"]})]})]})]}),r.jsxs("section",{className:"mb-8 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase mb-2",children:"Justificacin"}),r.jsx("p",{className:"text-justify text-slate-700 text-sm leading-relaxed",children:o.justificacion})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase mb-2",children:"Propsito General"}),r.jsx("p",{className:"text-justify text-slate-700 text-sm leading-relaxed",children:o.proposito_general})]})]}),r.jsxs("section",{className:"mb-12",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase border-b border-slate-300 pb-2 mb-4",children:[r.jsx(II,{className:"w-4 h-4"})," Matriz de Actividades y Transversalidad"]}),r.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-slate-100 text-slate-700 font-bold border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 w-1/6",children:"Fase"}),r.jsx("th",{className:"p-3 w-1/6",children:"Asignatura"}),r.jsx("th",{className:"p-3 w-1/3",children:"Actividad Clave"}),r.jsx("th",{className:"p-3 w-1/6",children:"Evidencia"}),r.jsx("th",{className:"p-3 w-1/6",children:"Fecha"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(m=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 font-semibold text-slate-900",children:m.fase_proyecto}),r.jsx("td",{className:"p-3 text-indigo-700",children:m.asignatura}),r.jsx("td",{className:"p-3 text-slate-600",children:m.actividades_clave}),r.jsx("td",{className:"p-3 text-slate-500 italic",children:m.evidencia_esperada}),r.jsx("td",{className:"p-3 text-slate-500 text-xs",children:m.semana_ejecucion})]},m.id))})]})})]}),r.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-slate-800 break-inside-avoid",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase mb-8",children:[r.jsx(UU,{className:"w-4 h-4"})," Comit Responsable"]}),r.jsx("div",{className:"grid grid-cols-2 gap-x-12 gap-y-16",children:d.map((m,p)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-b border-black w-2/3 mx-auto mb-2"}),r.jsx("div",{className:"font-bold text-sm",children:m.nombre}),r.jsx("div",{className:"text-xs text-slate-500 uppercase",children:m.cargo})]},p))}),r.jsxs("div",{className:"mt-12 text-[10px] text-center text-slate-400 font-mono",children:["Documento generado digitalmente por Plataforma EDUPLANMX | ",new Date().getFullYear()]})]})]})]})},Eq=({setView:t,recentPlansCount:e})=>{const[n,s]=Gc.useState(!1);return n?r.jsx(j1,{onClose:()=>s(!1),diagnostico:null}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 rounded-3xl p-8 text-white shadow-xl shadow-indigo-100 relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Ahorra horas administrativas"}),r.jsx("p",{className:"text-indigo-100 max-w-md",children:"Genera planeaciones didcticas alineadas al MCCEMS en segundos. Solo indica qu quieres hacer en clase y nosotros nos encargamos del formato SEP."}),r.jsxs("button",{onClick:()=>t("generator"),className:"mt-6 bg-white text-indigo-600 px-6 py-3 rounded-xl font-bold hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"}),"Empezar Planeacin"]})]}),r.jsx("div",{className:"absolute right-[-20px] bottom-[-20px] opacity-10",children:r.jsx(at,{className:"w-64 h-64"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-xl flex items-center justify-center text-blue-600 mb-4",children:r.jsx(Po,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:e}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Planes Generados"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-emerald-50 w-12 h-12 rounded-xl flex items-center justify-center text-emerald-600 mb-4",children:r.jsx(ms,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"100%"}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Alineado a la SEP"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-amber-50 w-12 h-12 rounded-xl flex items-center justify-center text-amber-600 mb-4",children:r.jsx(at,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"4.0"}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Versin MCCEMS 2024"})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-8 shadow-sm",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800",children:"Acciones Rpidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>t("context"),className:"p-4 border border-slate-100 rounded-2xl hover:border-indigo-200 hover:bg-indigo-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Actualizar Contexto Escolar"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Define tu escuela, comunidad y metas directivas."})]}),r.jsxs("button",{onClick:()=>t("plans"),className:"p-4 border border-slate-100 rounded-2xl hover:border-indigo-200 hover:bg-indigo-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Revisar Historial"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Accede a tus planeaciones anteriores para reutilizarlas."})]}),r.jsxs("button",{onClick:async()=>{confirm("Generar 60 alumnos ficticios para pruebas de contexto?")&&(await R1(60),alert("Alumnos generados! Ahora al planear, la IA detectar este contexto."))},className:"p-4 border border-slate-100 rounded-2xl hover:border-emerald-200 hover:bg-emerald-50 transition-all text-left group",children:[r.jsx("div",{className:"font-semibold text-slate-800 group-hover:text-emerald-700",children:"Generar Alumnos Demo"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Puebla la base de datos con 60 estudiantes para pruebas."})]}),r.jsxs("button",{onClick:()=>s(!0),className:"p-4 border border-slate-100 rounded-2xl hover:border-blue-200 hover:bg-blue-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Ver Plan Factible (Web)"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Visualiza el sitio web generado para el proyecto de Salud."})]})]})]})]})},M1=async(t,e,n)=>{var s,a;try{if(!e||!n)throw new Error("userId y schoolId son requeridos");const i={userId:e,schoolId:n,title:t.title||t.subject||"Sin ttulo",subject:t.subject||"",grade:(s=t.meta)==null?void 0:s.gradeGroup,semester:(a=t.meta)==null?void 0:a.semester,content:t,createdAt:Pe.now(),updatedAt:Pe.now(),tags:[],isPublic:!1},o=await es(ue(J,"planeaciones"),i);return console.log(" Planeacin creada:",o.id),o.id}catch(i){throw console.error(" Error al crear planeacin:",i),i}},Wh=async(t,e)=>{var n;try{if(!t||!e)return console.warn(" getMisPlaneaciones: userId o schoolId vacos",{userId:t,schoolId:e}),[];const s=$e(ue(J,"planeaciones"),Ze("schoolId","==",e),Ze("userId","==",t),Ds("createdAt","desc")),i=(await je(s)).docs.map(o=>({id:o.id,...o.data()}));return console.log(` Cargadas ${i.length} planeaciones del docente`),i}catch(s){if((s==null?void 0:s.code)==="failed-precondition"||(n=s==null?void 0:s.message)!=null&&n.includes("index")){console.warn(" ndice faltante en Firestore. Usando consulta sin ordenar..."),console.warn(" Para solucionarlo, ve a Firebase Console > Firestore > Indexes y crea el ndice sugerido");try{const a=$e(ue(J,"planeaciones"),Ze("schoolId","==",e),Ze("userId","==",t)),o=(await je(a)).docs.map(l=>({id:l.id,...l.data()}));return o.sort((l,c)=>{const d=l.createdAt instanceof Pe?l.createdAt.toDate():new Date(l.createdAt);return(c.createdAt instanceof Pe?c.createdAt.toDate():new Date(c.createdAt)).getTime()-d.getTime()}),console.log(` Cargadas ${o.length} planeaciones (sin ndice)`),o}catch(a){return console.error(" Error en consulta fallback:",a),[]}}return console.error(" Error al cargar planeaciones del docente:",s),[]}},Sv=async(t,e)=>{try{if(!t)throw new Error("schoolId es requerido");let n=$e(ue(J,"planeaciones"),Ze("schoolId","==",t),Ds("createdAt","desc"));e&&(n=$e(n,oo(e)));const a=(await je(n)).docs.map(i=>({id:i.id,...i.data()}));return console.log(` Cargadas ${a.length} planeaciones de la escuela`),a}catch(n){throw console.error(" Error al cargar planeaciones de la escuela:",n),n}},Zh=async(t,e)=>{try{const n=re(J,"planeaciones",t),s=await kn(n);if(!s.exists())return console.warn(" Planeacin no encontrada:",t),null;const a={id:s.id,...s.data()};if(a.schoolId!==e)throw console.error(" Acceso denegado: planeacin de otra escuela"),new Error("No tienes permiso para ver esta planeacin");return a}catch(n){throw console.error(" Error al obtener planeacin:",n),n}},P1=async(t,e,n,s)=>{try{const a=await Zh(t,s);if(!a)throw new Error("Planeacin no encontrada");if(a.userId!==n)throw new Error("No tienes permiso para editar esta planeacin");const i=re(J,"planeaciones",t);await xt(i,{...e,updatedAt:Pe.now()}),console.log(" Planeacin actualizada:",t)}catch(a){throw console.error(" Error al actualizar planeacin:",a),a}},D1=async(t,e,n)=>{try{const s=await Zh(t,n);if(!s)throw new Error("Planeacin no encontrada");if(s.userId!==e)throw new Error("No tienes permiso para eliminar esta planeacin");const a=re(J,"planeaciones",t);await xs(a),console.log(" Planeacin eliminada:",t)}catch(s){throw console.error(" Error al eliminar planeacin:",s),s}},k1=async(t,e)=>{var n,s;try{const a=await Wh(t,e),i={total:a.length,porMateria:{},porSemestre:{},ultimaCreada:(s=(n=a[0])==null?void 0:n.createdAt)==null?void 0:s.toString()};return a.forEach(o=>{if(o.subject&&(i.porMateria[o.subject]=(i.porMateria[o.subject]||0)+1),o.semester){const l=o.semester.toString();i.porSemestre[l]=(i.porSemestre[l]||0)+1}}),i}catch(a){throw console.error(" Error al obtener estadsticas:",a),a}},L1=async(t,e,n)=>{try{const s=n?await Wh(n,e):await Sv(e),a=t.toLowerCase(),i=s.filter(o=>{var l,c,d;return((l=o.title)==null?void 0:l.toLowerCase().includes(a))||((c=o.subject)==null?void 0:c.toLowerCase().includes(a))||((d=o.tags)==null?void 0:d.some(m=>m.toLowerCase().includes(a)))});return console.log(` Encontradas ${i.length} planeaciones para "${t}"`),i}catch(s){throw console.error(" Error al buscar planeaciones:",s),s}},qm={crear:M1,getMias:Wh,getEscuela:Sv,getById:Zh,actualizar:P1,eliminar:D1,getEstadisticas:k1,buscar:L1},Nq=Object.freeze(Object.defineProperty({__proto__:null,actualizarPlaneacion:P1,buscarPlaneaciones:L1,crearPlaneacion:M1,eliminarPlaneacion:D1,getEstadisticasPlaneaciones:k1,getMisPlaneaciones:Wh,getPlaneacion:Zh,getPlaneacionesEscuela:Sv,planeacionesService:qm},Symbol.toStringTag,{value:"Module"})),Cq=()=>{var k,R;const{user:t}=ct(),[e,n]=P.useState([]),[s,a]=P.useState([]),[i,o]=P.useState(null),[l,c]=P.useState(!0),[d,m]=P.useState(""),[p,g]=P.useState("all"),[x,y]=P.useState("all"),T=P.useRef(null),A=kI.useReactToPrint({contentRef:T,documentTitle:i?`Planeacion-${i.subject}`:"Planeacion"});P.useEffect(()=>{t!=null&&t.id&&(t!=null&&t.schoolId)&&b()},[t]),P.useEffect(()=>{N()},[e,d,p,x]);const b=async()=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.schoolId)))try{c(!0);const _=await qm.getMias(t.id,t.schoolId);n(_)}catch(_){console.error("Error al cargar planeaciones:",_);const I=localStorage.getItem("savedPlans");if(I){const C=JSON.parse(I);n(C.map(E=>{var M,j;return{id:E.id||Date.now().toString(),userId:t.id,schoolId:t.schoolId,title:E.title||E.subject,subject:E.subject,semester:(M=E.meta)==null?void 0:M.semester,content:E,createdAt:((j=E.meta)==null?void 0:j.startDate)||new Date().toISOString()}}))}}finally{c(!1)}},N=()=>{let _=[...e];if(d){const I=d.toLowerCase();_=_.filter(C=>{var E,M;return((E=C.title)==null?void 0:E.toLowerCase().includes(I))||((M=C.subject)==null?void 0:M.toLowerCase().includes(I))})}p!=="all"&&(_=_.filter(I=>I.subject===p)),x!=="all"&&(_=_.filter(I=>{var C;return((C=I.semester)==null?void 0:C.toString())===x})),a(_)},S=async(_,I)=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.schoolId)||!window.confirm(`Ests seguro de eliminar la planeacin "${I}"?

Esta accin no se puede deshacer.`)))try{await qm.eliminar(_,t.id,t.schoolId),n(M=>M.filter(j=>j.id!==_));const E=localStorage.getItem("savedPlans");if(E){const j=JSON.parse(E).filter(G=>G.id!==_);localStorage.setItem("savedPlans",JSON.stringify(j))}console.log(" Planeacin eliminada:",_)}catch(E){console.error("Error al eliminar planeacin:",E),alert("Error al eliminar la planeacin. Intenta de nuevo.")}},D=Array.from(new Set(e.map(_=>_.subject).filter(Boolean))),V=Array.from(new Set(e.map(_=>_.semester).filter(Boolean))).sort();return l?r.jsxs("div",{className:"text-center py-20",children:[r.jsx(eO,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando planeaciones..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-slate-300",children:[r.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400",children:r.jsx(Ls,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"No hay planes guardados"}),r.jsx("p",{className:"text-slate-500 mt-2",children:"Tus planeaciones generadas aparecern aqu."})]}):i?r.jsxs("div",{className:"animate-in fade-in duration-300 pb-20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 no-print",children:[r.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-xl transition-colors font-bold text-sm",children:[r.jsx(gd,{className:"w-4 h-4"})," Volver al Historial"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>S(i.id,i.title),className:"flex items-center gap-2 px-4 py-2 bg-rose-50 text-rose-600 rounded-xl text-sm font-bold hover:bg-rose-100 transition-all",children:[r.jsx(ns,{className:"w-4 h-4"})," Eliminar"]}),r.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 shadow-lg shadow-slate-200 transition-all",children:[r.jsx(zh,{className:"w-4 h-4"})," Imprimir / PDF"]})]})]}),r.jsx("div",{className:"overflow-auto border border-slate-100 rounded-3xl shadow-xl print:shadow-none print:border-none print:rounded-none",children:r.jsx(I1,{ref:T,plan:i.content,teacherName:(R=(k=i.content)==null?void 0:k.meta)==null?void 0:R.teacher})})]}):r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ls,{className:"w-6 h-6 text-indigo-600"}),"Tu Historial de Planeaciones",r.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",s.length,")"]})]})}),r.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por ttulo o materia...",value:d,onChange:_=>m(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Oc,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filtros:"})]}),r.jsxs("select",{value:p,onChange:_=>g(_.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"Todas las materias"}),D.map(_=>r.jsx("option",{value:_,children:_},_))]}),r.jsxs("select",{value:x,onChange:_=>y(_.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"Todos los semestres"}),V.map(_=>r.jsxs("option",{value:_,children:["Semestre ",_]},_))]}),(d||p!=="all"||x!=="all")&&r.jsx("button",{onClick:()=>{m(""),g("all"),y("all")},className:"px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Limpiar filtros"})]})]}),s.length===0?r.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:r.jsx("p",{className:"text-slate-600",children:"No se encontraron planeaciones con los filtros seleccionados."})}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map((_,I)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 transition-all flex justify-between items-center group shadow-sm hover:shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-bold group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:s.length-I}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800",children:_.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:[r.jsx(at,{className:"w-3 h-3"})," ",_.subject]}),_.semester&&r.jsxs("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:[r.jsx(Oh,{className:"w-3 h-3"})," Semestre ",_.semester]}),r.jsx("span",{className:"text-xs text-slate-400",children:new Date(_.createdAt).toLocaleDateString("es-MX")})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>S(_.id,_.title),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar planeacin",children:r.jsx(ns,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>o(_),className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-100 transition-colors",children:["Ver Detalle ",r.jsx(il,{className:"w-4 h-4"})]})]})]},_.id||I))})]})},Tq="AIzaSyDE6z8pU6Y63Vly8gCH4oYu3_FnCqBieZw",Sq=new A1({apiKey:Tq}),wq={async procesarDiagnosticoGrupal(t){const e="gemini-2.0-flash-lite-preview-02-05",n=t.map(a=>{var i,o,l,c,d,m;return{situacion:((i=a.datosNEM)==null?void 0:i.situacionFamiliar)||"Estudiante",estilo:((o=a.datosNEM)==null?void 0:o.estiloAprendizaje)||"No definido",promedio:((l=a.datosAdministrativos)==null?void 0:l.promedioSecundaria)||0,barreras:((c=a.datosNEM)==null?void 0:c.barrerasAprendizaje)||[],internet:(d=a.datosNEM)!=null&&d.accesoInternet?"S":"No",intereses:((m=a.datosNEM)==null?void 0:m.intereses)||[]}}),s=`
      Analiza los siguientes ${t.length} perfiles de alumnos y genera un Diagnstico Socioeducativo Grupal para el Programa de Mejora Continua (PMC) y el Programa Aula-Escuela-Comunidad (PAEC).

      DATOS DE LOS ALUMNOS (Muestra aleatoria):
      ${JSON.stringify(n.slice(0,50))} 
      (Nota: Si hay ms de 50, generaliza basado en esta muestra).

      Genera un JSON con la siguiente estructura exacta:
      {
        "promedioGrupal": number (promedio general calculado con 1 decimal),
        "perfilAprendizaje": {
           "estilosDominantes": string[] (ej. ["Visual", "Kinestsico"]),
           "ganchosInteres": string[] (ej. ["Tecnologa", "Ftbol"]),
           "recomendacionesDidacticas": string[] (3 estrategias concretas para este grupo)
        },
        "alertasAbandono": [
           { "alumnoId": "ID_X", "nombreAlumno": "Nombre (Inventado para proteger privacidad en este demo o usar ID)", "nivelRiesgo": "Alto" | "Medio", "factoresRiesgo": string[], "recomendaciones": string[] }
        ] (Identifica 3-5 casos hipotticos en riesgo basado en bajos promedios o situacin laboral),
        "problemaPAEC": {
           "problema": string (Problema central detectado ej. "Desercin por falta de recursos"),
           "frecuencia": number (estimado de alumnos afectados),
           "porcentaje": number (porcentaje estimado)
        },
        "problemasSecundarios": [
           { "problema": string, "porcentaje": number }
        ],
        "metasPMC": string[] (3 objetivos prioritarios para el plan de mejora),
        "contextoDigital": {
           "porcentajeConectividad": number (0-100),
           "conInternet": number (conteo),
           "sinInternet": number (conteo)
        }
      }
    `;try{let i=(await Sq.models.generateContent({model:e,contents:s,config:{responseMimeType:"application/json",responseSchema:{type:F.OBJECT,properties:{promedioGrupal:{type:F.NUMBER},perfilAprendizaje:{type:F.OBJECT,properties:{estilosDominantes:{type:F.ARRAY,items:{type:F.STRING}},ganchosInteres:{type:F.ARRAY,items:{type:F.STRING}},recomendacionesDidacticas:{type:F.ARRAY,items:{type:F.STRING}}}},alertasAbandono:{type:F.ARRAY,items:{type:F.OBJECT,properties:{alumnoId:{type:F.STRING},nombreAlumno:{type:F.STRING},nivelRiesgo:{type:F.STRING},factoresRiesgo:{type:F.ARRAY,items:{type:F.STRING}},recomendaciones:{type:F.ARRAY,items:{type:F.STRING}}}}},problemaPAEC:{type:F.OBJECT,properties:{problema:{type:F.STRING},frecuencia:{type:F.NUMBER},porcentaje:{type:F.NUMBER}}},problemasSecundarios:{type:F.ARRAY,items:{type:F.OBJECT,properties:{problema:{type:F.STRING},porcentaje:{type:F.NUMBER}}}},metasPMC:{type:F.ARRAY,items:{type:F.STRING}},contextoDigital:{type:F.OBJECT,properties:{porcentajeConectividad:{type:F.NUMBER},conInternet:{type:F.NUMBER},sinInternet:{type:F.NUMBER}}}}}}})).text;if(!i)throw new Error("La respuesta de la IA lleg vaca.");i=i.replace(/```json/g,"").replace(/```/g,"").trim();try{return JSON.parse(i)}catch(o){throw console.error(" Error de sintaxis en JSON recibido de IA:",o),console.log(" Texto crudo recibido:",i),new Error("El diagnstico generado tiene un formato invlido. Intenta de nuevo.")}}catch(a){throw console.error("Error generando diagnstico IA:",a),new Error("No se pudo generar el diagnstico inteligente.")}}},_p="formulario_alumno_progreso",Aq=()=>{const e=(()=>{const d=localStorage.getItem(_p);if(d)try{return JSON.parse(d)}catch{return null}return null})(),[n,s]=P.useState((e==null?void 0:e.datosAdmin)||{curp:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",genero:"Prefiero no decir",promedioSecundaria:8,tipoSecundaria:"General",sostenimiento:"Pblico"}),[a,i]=P.useState((e==null?void 0:e.redApoyo)||{nombreTutor:"",parentesco:"Padre",telefonoPadre:"",telefonoMadre:"",telefonoTutor:"",telefonoEmergencia:""}),[o,l]=P.useState((e==null?void 0:e.datosNEM)||{tipoFamilia:"Nuclear",gradoEstudioPadre:"Secundaria",gradoEstudioMadre:"Secundaria",ocupacionPadre:"Obrero",ocupacionMadre:"Hogar",situacionLaboral:"Solo estudia",tipoVivienda:"Propia",serviciosVivienda:{agua:!0,luz:!0,drenaje:!0,internet:!1,tvCable:!1,aireAcondicionado:!1},ingresosMensuales:"5001-10000",personasAportanIngreso:2,cuentaConBeca:!1,institucionSalud:"IMSS",enfermedadesCronicas:[],problemasComunitarios:[],deficienciasServicios:[],consumoSustanciasCuadra:[],consumoSustanciasCasa:[],frecuenciaDiscusionesComunidad:"Rara vez",intensidadPeleasComunidad:"Ninguna",frecuenciaDiscusionesFamilia:"Rara vez",intensidadPeleasFamilia:"Ninguna",tradicionesLocales:[],practicasDiscriminatorias:[],materiasPreferidas:[],actividadesInteres:[]});return P.useEffect(()=>{const d={datosAdmin:n,redApoyo:a,datosNEM:o,lastSaved:new Date().toISOString()};localStorage.setItem(_p,JSON.stringify(d))},[n,a,o]),{datosAdmin:n,setDatosAdmin:s,redApoyo:a,setRedApoyo:i,datosNEM:o,setDatosNEM:l,limpiarProgreso:()=>{localStorage.removeItem(_p)}}},Iq=({datosAdmin:t,setDatosAdmin:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-indigo-100 p-3 rounded-xl",children:r.jsx(ko,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Identidad y Trayectoria Acadmica"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin bsica del alumno"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CURP *"}),r.jsx("input",{type:"text",value:t.curp,onChange:n=>e({...t,curp:n.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"XXXX000000XXXXXX00",maxLength:18})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre(s) *"}),r.jsx("input",{type:"text",value:t.nombre,onChange:n=>e({...t,nombre:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Juan"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",value:t.apellidoPaterno,onChange:n=>e({...t,apellidoPaterno:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apellido Materno *"}),r.jsx("input",{type:"text",value:t.apellidoMaterno,onChange:n=>e({...t,apellidoMaterno:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Garca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gnero"}),r.jsxs("select",{value:t.genero,onChange:n=>e({...t,genero:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"Masculino",children:"Masculino (H)"}),r.jsx("option",{value:"Femenino",children:"Femenino (M)"}),r.jsx("option",{value:"Otro",children:"Otro"}),r.jsx("option",{value:"Prefiero no decir",children:"Prefiero no decir"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Promedio de Secundaria"}),r.jsx("input",{type:"number",step:"0.1",min:"5",max:"10",value:t.promedioSecundaria,onChange:n=>e({...t,promedioSecundaria:parseFloat(n.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Secundaria"}),r.jsxs("select",{value:t.tipoSecundaria,onChange:n=>e({...t,tipoSecundaria:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Tcnica",children:"Tcnica"}),r.jsx("option",{value:"Telesecundaria",children:"Telesecundaria"}),r.jsx("option",{value:"Particular",children:"Particular"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sostenimiento"}),r.jsxs("select",{value:t.sostenimiento,onChange:n=>e({...t,sostenimiento:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"Pblico",children:"Pblica"}),r.jsx("option",{value:"Privado",children:"Privada"})]})]})]})]}),Rq=({datosNEM:t,setDatosNEM:e,redApoyo:n,setRedApoyo:s})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:r.jsx(Je,{className:"w-6 h-6 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Estructura Familiar y Red de Apoyo"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin del entorno familiar"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Familia"}),r.jsxs("select",{value:t.tipoFamilia,onChange:a=>e({...t,tipoFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[r.jsx("option",{value:"Nuclear",children:"Nuclear (Padres e hijos)"}),r.jsx("option",{value:"Extensa",children:"Extensa (Con abuelos, tos, etc.)"}),r.jsx("option",{value:"Monoparental",children:"Monoparental (Un solo padre)"}),r.jsx("option",{value:"Compuesta",children:"Compuesta (Familias mixtas)"}),r.jsx("option",{value:"Homoparental",children:"Homoparental"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(pO,{className:"w-5 h-5 text-emerald-600"}),r.jsx("h4",{className:"font-semibold text-slate-800",children:"Red de Apoyo y Contactos"})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre del Tutor Responsable"}),r.jsx("input",{type:"text",value:n.nombreTutor,onChange:a=>s({...n,nombreTutor:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Nombre completo del tutor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Parentesco del Tutor"}),r.jsxs("select",{value:n.parentesco,onChange:a=>s({...n,parentesco:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[r.jsx("option",{value:"Padre",children:"Padre"}),r.jsx("option",{value:"Madre",children:"Madre"}),r.jsx("option",{value:"Hermano",children:"Hermano/a"}),r.jsx("option",{value:"To",children:"To/a"}),r.jsx("option",{value:"Abuelo",children:"Abuelo/a"}),r.jsx("option",{value:"Otro",children:"Otro"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono del Padre"}),r.jsx("input",{type:"tel",value:n.telefonoPadre,onChange:a=>s({...n,telefonoPadre:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono de la Madre"}),r.jsx("input",{type:"tel",value:n.telefonoMadre,onChange:a=>s({...n,telefonoMadre:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono del Tutor"}),r.jsx("input",{type:"tel",value:n.telefonoTutor,onChange:a=>s({...n,telefonoTutor:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono de Emergencia"}),r.jsx("input",{type:"tel",value:n.telefonoEmergencia,onChange:a=>s({...n,telefonoEmergencia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]})]})]}),jq=({datosNEM:t,setDatosNEM:e})=>{var n;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:r.jsx(RU,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Capital Socioeconmico y Bienestar"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin econmica y de salud"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Nivel Educativo de los Padres"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escolaridad del Padre"}),r.jsxs("select",{value:t.gradoEstudioPadre,onChange:s=>e({...t,gradoEstudioPadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Sin estudios",children:"Sin estudios"}),r.jsx("option",{value:"Primaria",children:"Primaria"}),r.jsx("option",{value:"Secundaria",children:"Secundaria"}),r.jsx("option",{value:"Preparatoria",children:"Preparatoria"}),r.jsx("option",{value:"Licenciatura",children:"Licenciatura"}),r.jsx("option",{value:"Posgrado",children:"Posgrado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escolaridad de la Madre"}),r.jsxs("select",{value:t.gradoEstudioMadre,onChange:s=>e({...t,gradoEstudioMadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Sin estudios",children:"Sin estudios"}),r.jsx("option",{value:"Primaria",children:"Primaria"}),r.jsx("option",{value:"Secundaria",children:"Secundaria"}),r.jsx("option",{value:"Preparatoria",children:"Preparatoria"}),r.jsx("option",{value:"Licenciatura",children:"Licenciatura"}),r.jsx("option",{value:"Posgrado",children:"Posgrado"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Situacin Laboral de los Padres"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ocupacin del Padre"}),r.jsxs("select",{value:t.ocupacionPadre,onChange:s=>e({...t,ocupacionPadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hogar",children:"Hogar"}),r.jsx("option",{value:"Profesionista",children:"Profesionista"}),r.jsx("option",{value:"Tcnico",children:"Tcnico"}),r.jsx("option",{value:"Obrero",children:"Obrero"}),r.jsx("option",{value:"Negocio propio",children:"Negocio propio"}),r.jsx("option",{value:"Comercio",children:"Comercio"}),r.jsx("option",{value:"Desempleado",children:"Desempleado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ocupacin de la Madre"}),r.jsxs("select",{value:t.ocupacionMadre,onChange:s=>e({...t,ocupacionMadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hogar",children:"Hogar"}),r.jsx("option",{value:"Profesionista",children:"Profesionista"}),r.jsx("option",{value:"Tcnico",children:"Tcnico"}),r.jsx("option",{value:"Obrero",children:"Obrero"}),r.jsx("option",{value:"Negocio propio",children:"Negocio propio"}),r.jsx("option",{value:"Comercio",children:"Comercio"}),r.jsx("option",{value:"Desempleado",children:"Desempleado"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Estabilidad del Alumno"]})}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Situacin Laboral"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["Solo estudia","Estudia y trabaja","Trabaja y estudia"].map(s=>r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-slate-200 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[r.jsx("input",{type:"radio",name:"situacionLaboral",value:s,checked:t.situacionLaboral===s,onChange:a=>e({...t,situacionLaboral:a.target.value}),className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s))})]}),t.situacionLaboral!=="Solo estudia"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Horas de trabajo por semana"}),r.jsx("input",{type:"number",min:"1",max:"60",value:t.horasTrabajoSemanal||"",onChange:s=>e({...t,horasTrabajoSemanal:parseInt(s.target.value)||void 0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 20"})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(AI,{className:"w-5 h-5 text-blue-600"}),"Vivienda y Servicios"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Vivienda"}),r.jsxs("select",{value:t.tipoVivienda,onChange:s=>e({...t,tipoVivienda:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Propia",children:"Propia"}),r.jsx("option",{value:"Rentada",children:"Rentada"}),r.jsx("option",{value:"Prestada",children:"Prestada"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Servicios Disponibles"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(t.serviciosVivienda||{}).map(s=>{var a;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((a=t.serviciosVivienda)==null?void 0:a[s])||!1,onChange:i=>e({...t,serviciosVivienda:{...t.serviciosVivienda,[s]:i.target.checked}}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-700 capitalize",children:s==="tvCable"?"TV Cable":s==="aireAcondicionado"?"Aire Acondicionado":s})]},s)})})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Economa Familiar"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ingresos Mensuales Familiares"}),r.jsxs("select",{value:t.ingresosMensuales,onChange:s=>e({...t,ingresosMensuales:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"0-5000",children:"$0 - $5,000"}),r.jsx("option",{value:"5001-10000",children:"$5,001 - $10,000"}),r.jsx("option",{value:"10001-20000",children:"$10,001 - $20,000"}),r.jsx("option",{value:"20001-40000",children:"$20,001 - $40,000"}),r.jsx("option",{value:"40001+",children:"Ms de $40,000"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Personas que aportan al ingreso"}),r.jsx("input",{type:"number",min:"0",max:"10",value:t.personasAportanIngreso||2,onChange:s=>e({...t,personasAportanIngreso:parseInt(s.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border border-slate-200 rounded-lg hover:bg-blue-50 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:t.cuentaConBeca||!1,onChange:s=>e({...t,cuentaConBeca:s.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"El alumno cuenta con beca"})]})}),t.cuentaConBeca&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Beca"}),r.jsx("input",{type:"text",value:t.tipoBeca||"",onChange:s=>e({...t,tipoBeca:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Benito Jurez, Jvenes Escribiendo el Futuro"})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(Yg,{className:"w-5 h-5 text-blue-600"}),"Salud"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Institucin de Seguridad Social"}),r.jsxs("select",{value:t.institucionSalud,onChange:s=>e({...t,institucionSalud:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"IMSS",children:"IMSS"}),r.jsx("option",{value:"ISSSTE",children:"ISSSTE"}),r.jsx("option",{value:"Bienestar",children:"Bienestar"}),r.jsx("option",{value:"Seguro privado",children:"Seguro privado"}),r.jsx("option",{value:"Ninguna",children:"Ninguna"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Enfermedades o condiciones crnicas (opcional)"}),r.jsx("textarea",{value:((n=t.enfermedadesCronicas)==null?void 0:n.join(", "))||"",onChange:s=>e({...t,enfermedadesCronicas:s.target.value?s.target.value.split(",").map(a=>a.trim()):[]}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Ej: Diabetes, Asma, Hipertensin (separadas por comas)"})]}),t.enfermedadesCronicas&&t.enfermedadesCronicas.length>0&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tratamiento"}),r.jsx("textarea",{value:t.tratamientoEnfermedades||"",onChange:s=>e({...t,tratamientoEnfermedades:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Describe el tratamiento que sigue"})]})]})]})},Mq=({datosNEM:t,setDatosNEM:e})=>{var s;const n=(a,i)=>a.includes(i)?a.filter(o=>o!==i):[...a,i];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-amber-100 p-3 rounded-xl",children:r.jsx(Bh,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Contexto Comunitario y Social (PAEC)"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Problemticas del entorno y convivencia"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(Ei,{className:"w-5 h-5 text-amber-600"}),"Problemtica Local (Selecciona los 3 principales)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Mala alimentacin","Contaminacin","Pandillerismo","Violencia","Adicciones","Robos","Falta de servicios pblicos","Desempleo","Inseguridad","Falta de espacios recreativos","Problemas de salud pblica"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.problemasComunitarios)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.problemasComunitarios)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,problemasComunitarios:n(t.problemasComunitarios||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Servicios Deficientes en la Comunidad"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Alumbrado pblico","Transporte pblico","reas verdes","Centros de salud","Rampas para discapacidad"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.deficienciasServicios)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.deficienciasServicios)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,deficienciasServicios:n(t.deficienciasServicios||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Ei,{className:"w-5 h-5 text-red-600"}),"Factores de Riesgo Prximos"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Consumo de sustancias en la cuadra"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Alcohol","Tabaco","Drogas","Ninguno"].map(a=>{var i;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((i=t.consumoSustanciasCuadra)==null?void 0:i.includes(a))||!1,onChange:()=>e({...t,consumoSustanciasCuadra:n(t.consumoSustanciasCuadra||[],a)}),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Consumo de sustancias dentro de casa"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Alcohol","Tabaco","Drogas","Ninguno"].map(a=>{var i;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((i=t.consumoSustanciasCasa)==null?void 0:i.includes(a))||!1,onChange:()=>e({...t,consumoSustanciasCasa:n(t.consumoSustanciasCasa||[],a)}),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Je,{className:"w-5 h-5 text-amber-600"}),"Convivencia Social"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia de discusiones en la comunidad"}),r.jsxs("select",{value:t.frecuenciaDiscusionesComunidad,onChange:a=>e({...t,frecuenciaDiscusionesComunidad:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Nunca",children:"Nunca"}),r.jsx("option",{value:"Rara vez",children:"Rara vez"}),r.jsx("option",{value:"A veces",children:"A veces"}),r.jsx("option",{value:"Frecuente",children:"Frecuente"}),r.jsx("option",{value:"Muy frecuente",children:"Muy frecuente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Intensidad de peleas en la comunidad"}),r.jsxs("select",{value:t.intensidadPeleasComunidad,onChange:a=>e({...t,intensidadPeleasComunidad:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Ninguna",children:"Ninguna"}),r.jsx("option",{value:"Leve",children:"Leve"}),r.jsx("option",{value:"Moderada",children:"Moderada"}),r.jsx("option",{value:"Grave",children:"Grave"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia de discusiones en la familia"}),r.jsxs("select",{value:t.frecuenciaDiscusionesFamilia,onChange:a=>e({...t,frecuenciaDiscusionesFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Nunca",children:"Nunca"}),r.jsx("option",{value:"Rara vez",children:"Rara vez"}),r.jsx("option",{value:"A veces",children:"A veces"}),r.jsx("option",{value:"Frecuente",children:"Frecuente"}),r.jsx("option",{value:"Muy frecuente",children:"Muy frecuente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Intensidad de peleas en la familia"}),r.jsxs("select",{value:t.intensidadPeleasFamilia,onChange:a=>e({...t,intensidadPeleasFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Ninguna",children:"Ninguna"}),r.jsx("option",{value:"Leve",children:"Leve"}),r.jsx("option",{value:"Moderada",children:"Moderada"}),r.jsx("option",{value:"Grave",children:"Grave"})]})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-4",children:"Cultura y Valores"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tradiciones locales identificadas (opcional)"}),r.jsx("textarea",{value:((s=t.tradicionesLocales)==null?void 0:s.join(", "))||"",onChange:a=>e({...t,tradicionesLocales:a.target.value?a.target.value.split(",").map(i=>i.trim()):[]}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",rows:2,placeholder:"Ej: Da de Muertos, Fiestas patronales, Carnaval (separadas por comas)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Prcticas discriminatorias detectadas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Machismo","Homofobia","Racismo","Clasismo","Ninguna"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.practicasDiscriminatorias)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.practicasDiscriminatorias)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,practicasDiscriminatorias:n(t.practicasDiscriminatorias||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]})]})]})]})},Pq=({datosNEM:t,setDatosNEM:e})=>{const n=(s,a)=>s.includes(a)?s.filter(i=>i!==a):[...s,a];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:r.jsx(Yg,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Perfil de Intereses y Motivacin"}),r.jsx("p",{className:"text-sm text-slate-500",children:'El "Hook" Pedaggico - Lo que te apasiona'})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(at,{className:"w-5 h-5 text-purple-600"}),"Afinidad Acadmica - Materias que ms te agradan"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Matemticas","Espaol","Ingls","Ciencias Naturales","Ciencias Sociales","Artes","Educacin Fsica","Tecnologa","Historia"].map(s=>{var a,i;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(a=t.materiasPreferidas)!=null&&a.includes(s)?"bg-purple-50 border-purple-300":"border-slate-200 hover:bg-purple-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((i=t.materiasPreferidas)==null?void 0:i.includes(s))||!1,onChange:()=>e({...t,materiasPreferidas:n(t.materiasPreferidas||[],s)}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s)})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Preferencias de Ocio - Actividades recreativas que disfrutas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Deportes","Msica","Arte y Dibujo","Tecnologa","Lectura","Videojuegos","Redes Sociales (TikTok/YouTube)","Voluntariado","Ciencia","Investigacin"].map(s=>{var a,i;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(a=t.actividadesInteres)!=null&&a.includes(s)?"bg-purple-50 border-purple-300":"border-slate-200 hover:bg-purple-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((i=t.actividadesInteres)==null?void 0:i.includes(s))||!1,onChange:()=>e({...t,actividadesInteres:n(t.actividadesInteres||[],s)}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s)})})]}),r.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:r.jsx(Yg,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Casi listo!"}),r.jsx("p",{className:"text-sm text-slate-600",children:'Gracias por compartir esta informacin. Nos ayudar a personalizar las clases segn tus intereses y necesidades. Al hacer clic en "Guardar Alumno", tu informacin se guardar de forma segura.'})]})]})})]})},V1=({onGuardar:t,onCancelar:e})=>{const[n,s]=P.useState(1),a=5,{datosAdmin:i,setDatosAdmin:o,redApoyo:l,setRedApoyo:c,datosNEM:d,setDatosNEM:m,limpiarProgreso:p}=Aq(),g=()=>{const y={id:`ALU-${Date.now()}`,datosAdministrativos:i,datosNEM:{...d,redApoyo:l},fechaRegistro:new Date().toISOString()};t(y),p()},x=()=>{switch(n){case 1:return r.jsx(Iq,{datosAdmin:i,setDatosAdmin:o});case 2:return r.jsx(Rq,{datosNEM:d,setDatosNEM:m,redApoyo:l,setRedApoyo:c});case 3:return r.jsx(jq,{datosNEM:d,setDatosNEM:m});case 4:return r.jsx(Mq,{datosNEM:d,setDatosNEM:m});case 5:return r.jsx(Pq,{datosNEM:d,setDatosNEM:m});default:return null}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full my-8 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white rounded-t-2xl flex-shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Registro de Alumno"}),r.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["Paso ",n," de ",a]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"mt-4 bg-white/20 rounded-full h-2",children:r.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${n/a*100}%`}})}),r.jsx("div",{className:"mt-4 flex justify-between text-xs",children:["Identidad","Familia","Economa","Comunidad","Intereses"].map((y,T)=>r.jsxs("div",{className:`flex flex-col items-center ${n===T+1?"text-white":"text-indigo-200"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-1 ${n>T+1?"bg-white text-indigo-600":n===T+1?"bg-white text-indigo-600 ring-2 ring-white/50":"bg-white/20"}`,children:n>T+1?"":T+1}),r.jsx("span",{className:"hidden md:block",children:y})]},y))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x()}),r.jsxs("div",{className:"border-t border-slate-200 p-6 flex justify-between items-center flex-shrink-0 bg-slate-50",children:[r.jsx("button",{onClick:()=>s(Math.max(1,n-1)),disabled:n===1,className:"px-6 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:" Anterior"}),r.jsxs("div",{className:"text-sm text-slate-500",children:[n<a&&"Tu progreso se guarda automticamente",n===a&&"ltimo paso! Revisa y guarda"]}),n<a?r.jsx("button",{onClick:()=>s(n+1),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Siguiente "}):r.jsxs("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg hover:from-emerald-700 hover:to-green-700 transition-all flex items-center gap-2 font-semibold shadow-lg",children:[r.jsx(Ri,{className:"w-5 h-5"}),"Guardar Alumno"]})]})]})})},lu="alumnos";class Dq{async guardarAlumno(e){try{const n={...e,fechaRegistro:Pe.now().toDate().toISOString()};return(await es(ue(J,lu),n)).id}catch(n){throw console.error("Error al guardar alumno:",n),new Error("No se pudo guardar el alumno en Firebase")}}async obtenerAlumnos(){try{const e=$e(ue(J,lu),Ds("fechaRegistro","desc")),n=await je(e),s=[];return n.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(e){throw console.error("Error al obtener alumnos:",e),new Error("No se pudieron obtener los alumnos de Firebase")}}async actualizarAlumno(e,n){try{const s=re(J,lu,e);await xt(s,n)}catch(s){throw console.error("Error al actualizar alumno:",s),new Error("No se pudo actualizar el alumno en Firebase")}}async eliminarAlumno(e){try{await xs(re(J,lu,e))}catch(n){throw console.error("Error al eliminar alumno:",n),new Error("No se pudo eliminar el alumno de Firebase")}}async sincronizarDesdeLocalStorage(){try{const e=localStorage.getItem("alumnos");if(!e)return;const n=JSON.parse(e);for(const s of n)await this.guardarAlumno({datosAdministrativos:s.datosAdministrativos,datosNEM:s.datosNEM,fechaRegistro:s.fechaRegistro});console.log(` ${n.length} alumnos sincronizados a Firebase`)}catch(e){throw console.error("Error al sincronizar alumnos:",e),new Error("No se pudieron sincronizar los alumnos")}}}const d0=new Dq,kq=()=>{var A,b,N,S,D,V,k,R,_,I,C,E,M,j,G,O,B,te;const[t,e]=P.useState([]),[n,s]=P.useState(null),[a,i]=P.useState(!1),[o,l]=P.useState(!0),[c,d]=P.useState(!1),[m,p]=P.useState(!1);P.useEffect(()=>{g()},[]);const g=async()=>{l(!0);try{console.log(" Iniciando carga de alumnos desde Firebase (forzado)...");const Y=await d0.obtenerAlumnos();Y.length>0?(e(Y),console.log(` XITO: Se cargaron ${Y.length} alumnos reales de la base de datos.`)):(console.warn(" La coleccin de alumnos en Firebase est vaca."),e([]))}catch(Y){console.error(" CRTICO: Error al conectar con Firebase:",Y),alert("Error de conexin con la base de datos de alumnos.")}finally{l(!1)}},x=async Y=>{try{await d0.guardarAlumno(Y),console.log(" Alumno guardado en Firebase"),await g(),d(!1)}catch(ne){console.error(" Error al guardar alumno:",ne),alert("Hubo un error al guardar el alumno. Por favor intenta de nuevo.")}},y=async()=>{if(t.length===0){alert("Necesitas al menos un alumno registrado para generar el diagnstico");return}i(!0);try{const Y=await wq.procesarDiagnosticoGrupal(t);s(Y),console.log("Diagnstico generado:",Y)}catch(Y){console.error("Error al generar diagnstico:",Y),alert("Hubo un error al generar el diagnstico. Verifica tu API Key.")}finally{i(!1)}},T=Y=>{switch(Y){case"Crtico":return"bg-red-100 text-red-800 border-red-200";case"Alto":return"bg-orange-100 text-orange-800 border-orange-200";case"Medio":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}};return m?r.jsx(j1,{onClose:()=>p(!1),diagnostico:n}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Diagnstico Socioeducativo"}),r.jsx("p",{className:"text-indigo-100",children:"Mdulo Raz - Anlisis inteligente del contexto del alumno para PAEC y PMC"}),r.jsxs("div",{className:"mt-6 flex gap-4",children:[r.jsxs("button",{onClick:()=>d(!0),className:"bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"}),"Registrar Alumno"]}),r.jsxs("button",{onClick:y,disabled:a||t.length===0,className:"bg-indigo-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-900 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Ls,{className:"w-5 h-5"}),a?"Procesando...":"Generar Diagnstico"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:r.jsx(Je,{className:"w-6 h-6 text-blue-600"})}),r.jsx("div",{children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-400",children:"..."}),r.jsx("div",{className:"text-sm text-slate-500",children:"Cargando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:t.length}),r.jsx("div",{className:"text-sm text-slate-500",children:"Alumnos Registrados"})]})})]})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:r.jsx(ms,{className:"w-6 h-6 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:n.promedioGrupal}),r.jsx("div",{className:"text-sm text-slate-500",children:"Promedio Grupal"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-amber-100 p-3 rounded-xl",children:r.jsx(Ei,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:((A=n.alertasAbandono)==null?void 0:A.length)||0}),r.jsx("div",{className:"text-sm text-slate-500",children:"Alertas de Riesgo"})]})]})}),n.contextoDigital&&r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:r.jsx(Kg,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[n.contextoDigital.porcentajeConectividad||0,"%"]}),r.jsx("div",{className:"text-sm text-slate-500",children:"Con Internet"})]})]})})]})]}),n&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-6 h-6 text-indigo-600"}),"Perfil de Aprendizaje Grupal"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Estilos Dominantes"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(N=(b=n.perfilAprendizaje)==null?void 0:b.estilosDominantes)==null?void 0:N.map((Y,ne)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm",children:Y},ne))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Ganchos de Inters"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(D=(S=n.perfilAprendizaje)==null?void 0:S.ganchosInteres)==null?void 0:D.map((Y,ne)=>r.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:Y},ne))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Recomendaciones Didcticas"}),r.jsx("ul",{className:"space-y-2",children:(k=(V=n.perfilAprendizaje)==null?void 0:V.recomendacionesDidacticas)==null?void 0:k.map((Y,ne)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[r.jsx("span",{className:"text-indigo-600 font-bold",children:""}),Y]},ne))})]})]})]}),n.alertasAbandono&&n.alertasAbandono.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Ei,{className:"w-6 h-6 text-amber-600"}),"Semforo de Abandono Escolar"]}),r.jsx("div",{className:"space-y-3",children:n.alertasAbandono.map((Y,ne)=>{var de,we;return r.jsxs("div",{className:`p-4 rounded-xl border ${T(Y.nivelRiesgo)}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:Y.nombreAlumno}),r.jsxs("p",{className:"text-xs opacity-75",children:["ID: ",Y.alumnoId]})]}),r.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold",children:["Riesgo ",Y.nivelRiesgo]})]}),r.jsxs("div",{className:"text-sm mb-2",children:[r.jsx("strong",{children:"Factores:"})," ",(de=Y.factoresRiesgo)==null?void 0:de.join(", ")]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Recomendaciones:"}),r.jsx("ul",{className:"mt-1 space-y-1",children:(we=Y.recomendaciones)==null?void 0:we.map((tt,rt)=>r.jsxs("li",{children:[" ",tt]},rt))})]})]},ne)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Problema PAEC Prioritario"}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[r.jsx("div",{className:"text-3xl font-bold text-amber-900 mb-2",children:((R=n.problemaPAEC)==null?void 0:R.problema)||"No detectado"}),r.jsxs("div",{className:"text-sm text-amber-700",children:["Reportado por ",((_=n.problemaPAEC)==null?void 0:_.frecuencia)||0," alumnos (",((I=n.problemaPAEC)==null?void 0:I.porcentaje)||0,"%)"]})]}),((C=n.problemasSecundarios)==null?void 0:C.length)>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2 text-sm",children:"Problemas Secundarios"}),r.jsx("div",{className:"space-y-2",children:(E=n.problemasSecundarios)==null?void 0:E.map((Y,ne)=>r.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[r.jsx("span",{children:Y.problema}),r.jsxs("span",{className:"font-semibold",children:[Y.porcentaje,"%"]})]},ne))})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Metas PMC Sugeridas"}),r.jsx("ul",{className:"space-y-3",children:(M=n.metasPMC)==null?void 0:M.map((Y,ne)=>r.jsxs("li",{className:"flex items-start gap-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[r.jsx("span",{className:"bg-emerald-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:ne+1}),r.jsx("span",{className:"text-sm text-slate-700",children:Y})]},ne))})]})]}),n.contextoDigital&&r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Contexto Digital del Grupo"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kg,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"font-semibold text-green-900",children:"Con Internet"})]}),r.jsx("div",{className:"text-3xl font-bold text-green-900",children:((j=n.contextoDigital)==null?void 0:j.conInternet)||0}),r.jsxs("div",{className:"text-sm text-green-700",children:["alumnos (",((G=n.contextoDigital)==null?void 0:G.porcentajeConectividad)||0,"%)"]})]}),r.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(JO,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"font-semibold text-red-900",children:"Sin Internet"})]}),r.jsx("div",{className:"text-3xl font-bold text-red-900",children:((O=n.contextoDigital)==null?void 0:O.sinInternet)||0}),r.jsxs("div",{className:"text-sm text-red-700",children:["alumnos (",100-(((B=n.contextoDigital)==null?void 0:B.porcentajeConectividad)||0),"%)"]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[r.jsx("div",{className:"font-semibold text-blue-900 mb-2",children:"Recomendacin"}),r.jsx("div",{className:"text-sm text-blue-700",children:(((te=n.contextoDigital)==null?void 0:te.porcentajeConectividad)||0)>=70?"Puedes usar actividades digitales con alternativas offline":"Prioriza actividades presenciales y sin conexin"})]})]})]})]}),c&&r.jsx(V1,{onGuardar:x,onCancelar:()=>d(!1)})]})},uo=({activeView:t,onNavigate:e})=>{const{logout:n,user:s}=ct(),a=[{id:"dashboard",label:"Dashboard",icon:mO},{id:"guia-curricular",label:"Gua Curricular",icon:at},{id:"herramientas",label:"Herramientas",icon:Do},{id:"context",label:"Contexto Escolar",icon:fv},{id:"diagnostico",label:"Diagnstico",icon:Je},{id:"generator",label:"Nueva Planeacin",icon:wI},{id:"plans",label:"Historial",icon:YU},{id:"pmc",label:"PMC Directivo",icon:ms},{id:"paec",label:"Comit PAEC",icon:dO}];return(s==null?void 0:s.rol)==="superadmin"&&(a.push({id:"admin-asignacion",label:"Asignar Materias",icon:at}),a.push({id:"admin-alumnos",label:"Gestin de Alumnos",icon:Je})),r.jsxs("aside",{className:"w-64 bg-indigo-900 text-white flex-shrink-0 flex flex-col hidden md:flex h-screen sticky top-0",children:[r.jsxs("div",{className:"p-6 border-b border-indigo-800",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ts,{className:"w-8 h-8 text-indigo-300"}),r.jsx("h1",{className:"font-bold text-xl tracking-tight",children:"EduPlan MX"})]}),r.jsx("p",{className:"text-xs text-indigo-300 mt-2 uppercase font-semibold",children:"Bachillerato Oficial"})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto",children:a.map(i=>{const o=i.icon,l=t===i.id;return r.jsxs("button",{onClick:()=>e(i.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${l?"bg-indigo-800 text-white shadow-lg shadow-indigo-900/50":"hover:bg-indigo-800/50 text-indigo-100"}`,children:[r.jsx(o,{className:`w-5 h-5 ${l?"text-indigo-300":""}`}),r.jsx("span",{className:"font-medium",children:i.label})]},i.id)})}),r.jsxs("div",{className:"p-4 border-t border-indigo-800",children:[r.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-500/10 text-indigo-200 hover:text-red-200 transition-colors",children:[r.jsx(Fh,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Cerrar Sesin"})]}),r.jsx("div",{className:"mt-4 text-xs text-indigo-400 text-center",children:"v1.0.0 - Hecho para Mxico"})]})]})},Ui="materias";class Lq{async obtenerTodas(){try{const e=ue(J,Ui),n=$e(e,Ds("nombre","asc"));return(await je(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error al obtener materias:",e),new Error("Error al obtener materias")}}async obtenerPorGrado(e){try{const n=ue(J,Ui),s=$e(n,Ze("grado","==",e),Ze("activa","==",!0),Ds("nombre","asc"));return(await je(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener materias por grado:",n),new Error("Error al obtener materias por grado")}}async obtenerPorId(e){try{const n=await kn(re(J,Ui,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error al obtener materia:",n),new Error("Error al obtener materia")}}async crear(e,n){try{const s={...e,activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:n};return{id:(await es(ue(J,Ui),s)).id,...s}}catch(s){throw console.error("Error al crear materia:",s),new Error("Error al crear materia")}}async actualizar(e,n){try{await xt(re(J,Ui,e),n)}catch(s){throw console.error("Error al actualizar materia:",s),new Error("Error al actualizar materia")}}async cambiarEstado(e,n){try{await xt(re(J,Ui,e),{activa:n})}catch(s){throw console.error("Error al cambiar estado:",s),new Error("Error al cambiar estado")}}async eliminar(e){try{await xs(re(J,Ui,e))}catch(n){throw console.error("Error al eliminar materia:",n),new Error("Error al eliminar materia")}}async obtenerEstadisticas(){try{const e=await this.obtenerTodas();return{total:e.length,activas:e.filter(n=>n.activa).length,inactivas:e.filter(n=>!n.activa).length,porGrado:{primero:e.filter(n=>n.grado===1).length,segundo:e.filter(n=>n.grado===2).length,tercero:e.filter(n=>n.grado===3).length},totalHoras:e.reduce((n,s)=>n+s.horasSemanales,0),totalUnidades:e.reduce((n,s)=>n+s.unidades.length,0)}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("Error al obtener estadsticas")}}async buscar(e){try{const n=await this.obtenerTodas(),s=e.toLowerCase();return n.filter(a=>a.nombre.toLowerCase().includes(s)||a.clave.toLowerCase().includes(s))}catch(n){throw console.error("Error al buscar materias:",n),new Error("Error al buscar materias")}}async obtenerResumen(e){try{const n=await this.obtenerPorId(e);return n?{id:n.id,nombre:n.nombre,clave:n.clave,grado:n.grado,horasSemanales:n.horasSemanales,totalHoras:n.totalHoras,totalUnidades:n.unidades.length,totalTemas:n.unidades.reduce((s,a)=>s+a.temas.length,0),activa:n.activa}:null}catch(n){throw console.error("Error al obtener resumen:",n),new Error("Error al obtener resumen")}}}const wv=new Lq,Vq=()=>{const{user:t}=ct(),[e,n]=P.useState([]),[s,a]=P.useState([]),[i,o]=P.useState([]),[l,c]=P.useState(""),[d,m]=P.useState(""),[p,g]=P.useState("A"),[x,y]=P.useState("2025-2026"),[T,A]=P.useState(!0),[b,N]=P.useState(!1),[S,D]=P.useState(null),[V,k]=P.useState(null);P.useEffect(()=>{(async()=>{try{const I=ue(J,"usuarios"),C=$e(I,Ze("rol","==","maestro")),M=(await je(C)).docs.map(B=>B.data());n(M);const j=await wv.obtenerTodas();a(j);const G=ue(J,"asignaciones"),O=vI(G,B=>{const te=B.docs.map(Y=>({id:Y.id,...Y.data()}));o(te),A(!1)});return()=>O()}catch(I){console.error("Error cargando datos:",I),D("Error al cargar los catlogos"),A(!1)}})()},[]);const R=async()=>{if(!l||!d||!p){D("Por favor completa todos los campos");return}N(!0),D(null),k(null);try{const _=e.find(M=>M.id===l),I=s.find(M=>M.id===d);if(!_||!I)throw new Error("Datos invlidos");if(i.find(M=>M.maestroId===l&&M.materiaId===d&&M.grupo===p&&M.cicloEscolar===x)){D("Esta asignacin ya existe"),N(!1);return}const E={maestroId:l,maestroNombre:`${_.nombre} ${_.apellidoPaterno}`,materiaId:d,materiaNombre:I.nombre,grupo:p,cicloEscolar:x,fechaAsignacion:new Date().toISOString(),activa:!0,creadoPor:(t==null?void 0:t.id)||"admin"};await es(ue(J,"asignaciones"),E),k("Materia asignada correctamente"),m("")}catch(_){console.error("Error al asignar:",_),D(_.message||"Error al guardar la asignacin")}finally{N(!1)}};return T?r.jsx("div",{className:"p-8 text-center",children:"Cargando mdulo de asignaciones..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"mb-8",children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Je,{className:"w-8 h-8 text-indigo-600"}),"Asignacin de Carga Acadmica"]}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Asigna las materias del MCCEMS a los docentes para el ciclo escolar."})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(Po,{className:"w-5 h-5 text-indigo-500"}),"Nueva Asignacin"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Docente"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:l,onChange:_=>c(_.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar docente..."}),e.map(_=>r.jsxs("option",{value:_.id,children:[_.nombre," ",_.apellidoPaterno," ",_.apellidoMaterno]},_.id))]})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Unidad de Aprendizaje Curricular (UAC)"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:_=>m(_.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar materia..."}),s.map(_=>r.jsxs("option",{value:_.id,children:["[",_.clave,"] ",_.nombre," (",_.horasSemanales," hrs)"]},_.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Grupo"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:_=>g(_.target.value),children:[r.jsx("option",{value:"A",children:"Grupo A"}),r.jsx("option",{value:"B",children:"Grupo B"}),r.jsx("option",{value:"C",children:"Grupo C"}),r.jsx("option",{value:"D",children:"Grupo D"}),r.jsx("option",{value:"E",children:"Grupo E"}),r.jsx("option",{value:"F",children:"Grupo F"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mr-4",children:[S&&r.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg text-sm",children:[r.jsx(ba,{className:"w-4 h-4"}),S]}),V&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-3 rounded-lg text-sm",children:[r.jsx(Is,{className:"w-4 h-4"}),V]})]}),r.jsxs("button",{onClick:R,disabled:b,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-all font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-200",children:[b?r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):r.jsx(Ri,{className:"w-5 h-5"}),"Asignar Materia"]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[r.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["Asignaciones Actuales (",x,")"]}),r.jsxs("span",{className:"text-xs font-medium text-slate-500 bg-slate-100 px-3 py-1 rounded-full",children:[i.length," registros"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-900 font-semibold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Docente"}),r.jsx("th",{className:"px-6 py-4",children:"Materia / UAC"}),r.jsx("th",{className:"px-6 py-4",children:"Grupo"}),r.jsx("th",{className:"px-6 py-4",children:"Ciclo"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map(_=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:_.maestroNombre}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(at,{className:"w-4 h-4 text-indigo-400"}),_.materiaNombre]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded-md font-bold",children:_.grupo})}),r.jsx("td",{className:"px-6 py-4",children:_.cicloEscolar}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("button",{className:"text-red-500 hover:text-red-700 text-xs font-medium",children:"Eliminar"})})]},_.id)),i.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:"No hay asignaciones registradas para este ciclo. Uses el formulario de arriba para comenzar."})})]})]})})]})]})},Uq=()=>{const[t,e]=P.useState([]),[n,s]=P.useState(!0),[a,i]=P.useState("");P.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const c=ue(J,"alumnos"),m=(await je(c)).docs.map(p=>({id:p.id,...p.data()}));e(m),console.log("Alumnos cargados:",m)}catch(c){console.error("Error cargando alumnos:",c)}finally{s(!1)}},l=t.filter(c=>{const d=a.toLowerCase(),m=`${c.nombre||""} ${c.apellidoPaterno||""} ${c.apellidoMaterno||""} ${c.apellido||""}`,p=c.matricula||c.id||"",g=c.email||"";return m.toLowerCase().includes(d)||p.toLowerCase().includes(d)||g.toLowerCase().includes(d)});return n?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando base de datos de alumnos..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Je,{className:"w-8 h-8 text-indigo-600"}),"Gestin de Alumnos"]}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Administra la base de datos de estudiantes matriculados."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{className:"bg-white text-indigo-600 border border-indigo-200 px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-indigo-50 transition-colors shadow-sm font-bold text-xs",onClick:async()=>{confirm("Generar 60 alumnos de prueba? Esto agregar datos a la base de datos real.")&&(s(!0),await R1(60),await o(),alert("60 Alumnos generados con xito!"))},children:[r.jsx(Do,{className:"w-4 h-4"}),"Generar 60 (Demo)"]}),r.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-colors shadow-sm",onClick:()=>alert("Funcin de agregar alumno pendiente de implementacin"),children:[r.jsx(wI,{className:"w-5 h-5"}),"Nuevo Alumno"]})]})]}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, matrcula o email...",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a,onChange:c=>i(c.target.value)})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-900 font-semibold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Estudiante"}),r.jsx("th",{className:"px-6 py-4",children:"Matrcula / ID"}),r.jsx("th",{className:"px-6 py-4",children:"Situacin"}),r.jsx("th",{className:"px-6 py-4",children:"Tipo Beca"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(c=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsxs("div",{className:"font-medium text-slate-900",children:[c.nombre," ",c.apellidoPaterno||c.apellido," ",c.apellidoMaterno]}),c.email&&r.jsx("div",{className:"text-xs text-slate-400",children:c.email})]}),r.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:c.matricula||c.id}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c.situacionLaboral==="Trabaja y estudia"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:c.situacionLaboral||"Estudiante"})}),r.jsx("td",{className:"px-6 py-4",children:c.tipoBeca?r.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs",children:c.tipoBeca}):r.jsx("span",{className:"text-slate-400 italic",children:"Sin beca"})}),r.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[r.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-indigo-600 transition-colors",title:"Editar",children:r.jsx(jI,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 hover:bg-red-50 rounded-lg text-slate-500 hover:text-red-600 transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})]},c.id)),l.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:a?"No se encontraron alumnos con esa bsqueda.":"No hay alumnos registrados."})})]})]})}),r.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/50 text-xs text-slate-500 flex justify-between items-center",children:[r.jsxs("span",{children:["Mostrando ",l.length," registros"]}),r.jsx("span",{children:"Coleccin: /alumnos"})]})]})]})},Oq=({onClose:t})=>{const{user:e}=ct(),[n,s]=P.useState(!1),[a,i]=P.useState(!1),[o,l]=P.useState({nombre:(e==null?void 0:e.nombre)||"",apellidoPaterno:(e==null?void 0:e.apellidoPaterno)||"",apellidoMaterno:(e==null?void 0:e.apellidoMaterno)||"",puesto:(e==null?void 0:e.puesto)||"",materias:(e==null?void 0:e.materias)||[],grados:(e==null?void 0:e.grados)||[]}),c=async()=>{if(e!=null&&e.id)try{i(!0),await xt(re(J,"users",e.id),{...o,updatedAt:new Date().toISOString()}),alert(" Perfil actualizado correctamente"),s(!1),window.location.reload()}catch(m){console.error("Error al actualizar perfil:",m),alert(" Error al actualizar el perfil")}finally{i(!1)}},d=()=>{confirm(`Quieres volver a configurar tu perfil?

Esto te llevar al proceso de onboarding.`)&&e!=null&&e.id&&xt(re(J,"users",e.id),{onboardingCompleto:!1}).then(()=>{window.location.href="/onboarding"})};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(ko,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Mi Perfil"}),r.jsx("p",{className:"text-indigo-100 text-sm",children:e.email})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(ko,{className:"w-5 h-5 text-indigo-600"}),"Informacin Personal"]}),!n&&r.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors",children:[r.jsx(xd,{className:"w-4 h-4"}),"Editar"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre"}),n?r.jsx("input",{type:"text",value:o.nombre,onChange:m=>l({...o,nombre:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.nombre})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Paterno"}),n?r.jsx("input",{type:"text",value:o.apellidoPaterno,onChange:m=>l({...o,apellidoPaterno:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.apellidoPaterno})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Materno"}),n?r.jsx("input",{type:"text",value:o.apellidoMaterno,onChange:m=>l({...o,apellidoMaterno:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.apellidoMaterno||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Puesto"}),n?r.jsx("input",{type:"text",value:o.puesto,onChange:m=>l({...o,puesto:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Docente, Director, etc."}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.puesto||"No especificado"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-4",children:[r.jsx(At,{className:"w-5 h-5 text-indigo-600"}),"Escuela"]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Nombre"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.schoolName||"No asignada"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Cdigo"}),r.jsx("p",{className:"text-slate-900 font-medium font-mono",children:e.schoolId||"No asignado"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Rol"}),r.jsx("p",{className:"text-slate-900 font-medium capitalize",children:e.rol})]})]}),!e.schoolId&&r.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx("p",{className:"text-amber-800 text-sm mb-2",children:" No tienes una escuela asignada. Completa el onboarding para configurar tu perfil."}),r.jsx("button",{onClick:d,className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors",children:"Completar Configuracin"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(at,{className:"w-5 h-5 text-indigo-600"}),"Materias"]}),e.materias&&e.materias.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:e.materias.map((m,p)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-sm font-medium",children:m},p))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No hay materias asignadas"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(ts,{className:"w-5 h-5 text-indigo-600"}),"Semestres"]}),e.grados&&e.grados.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:e.grados.map((m,p)=>r.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:[m,""]},p))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No hay semestres asignados"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(Gh,{className:"w-5 h-5 text-indigo-600"}),"Correo Electrnico"]}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.email}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"El correo no se puede modificar"})]}),n&&r.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[r.jsxs("button",{onClick:c,disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[r.jsx(Ri,{className:"w-5 h-5"}),a?"Guardando...":"Guardar Cambios"]}),r.jsx("button",{onClick:()=>s(!1),disabled:a,className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors disabled:opacity-50",children:"Cancelar"})]}),!n&&r.jsx("div",{className:"pt-4 border-t",children:r.jsx("button",{onClick:d,className:"w-full px-4 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Reconfigurar Perfil Completo"})})]})]})}):null},zq=({user:t})=>{const[e,n]=P.useState(!1);return r.jsxs(r.Fragment,{children:[e&&r.jsx(Oq,{onClose:()=>n(!1)}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(At,{className:"w-6 h-6 mr-3 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100",children:"Escuela"}),r.jsx("h2",{className:"text-2xl font-bold",children:t.schoolName||"Sin escuela asignada"})]})]}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(ko,{className:"w-5 h-5 mr-3 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100",children:"Docente"}),r.jsxs("h3",{className:"text-xl font-semibold",children:[t.nombre," ",t.apellidoPaterno," ",t.apellidoMaterno]}),r.jsx("p",{className:"text-sm text-indigo-200",children:t.puesto||"Docente"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.materias&&t.materias.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(at,{className:"w-5 h-5 mr-2 mt-1 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100 mb-1",children:"Materias"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.materias.map((s,a)=>r.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:s},a))})]})]}),t.grados&&t.grados.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(ts,{className:"w-5 h-5 mr-2 mt-1 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100 mb-1",children:"Semestres"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.grados.map((s,a)=>r.jsxs("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:[s,""]},a))})]})]})]})]}),r.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-center",children:[r.jsx("p",{className:"text-xs text-indigo-100 mb-1",children:"Rol"}),r.jsx("p",{className:"text-lg font-bold capitalize",children:t.rol})]}),r.jsxs("button",{onClick:()=>n(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg transition-colors text-sm font-medium",title:"Ver perfil",children:[r.jsx(fv,{className:"w-4 h-4"}),"Perfil"]})]})]})})]})},Fq=({totalPlaneaciones:t,totalMaterias:e,totalSemestres:n,promedioSemanal:s=0})=>{const a=[{title:"Planeaciones",value:t,icon:Ls,color:"bg-blue-500",textColor:"text-blue-600"},{title:"Materias",value:e,icon:at,color:"bg-green-500",textColor:"text-green-600"},{title:"Semestres",value:n,icon:ts,color:"bg-purple-500",textColor:"text-purple-600"},{title:"Promedio Semanal",value:s.toFixed(1),icon:ms,color:"bg-orange-500",textColor:"text-orange-600"}];return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:a.map((i,o)=>{const l=i.icon;return r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:i.title}),r.jsx("p",{className:`text-3xl font-bold ${i.textColor}`,children:i.value})]}),r.jsx("div",{className:`${i.color} p-3 rounded-lg`,children:r.jsx(l,{className:"w-8 h-8 text-white"})})]})},o)})})},Gq=({onNewPlaneacion:t,onViewPlaneaciones:e,onHerramientas:n,onContexto:s})=>{const a=[{title:"Nueva Planeacin",description:"Crear una nueva planeacin didctica",icon:On,color:"bg-indigo-600 hover:bg-indigo-700",onClick:t},{title:"Ver Planeaciones",description:"Consultar planeaciones guardadas",icon:Ls,color:"bg-green-600 hover:bg-green-700",onClick:e},{title:"Herramientas",description:"Acceder a herramientas didcticas",icon:XO,color:"bg-purple-600 hover:bg-purple-700",onClick:n},{title:"Contexto Escolar",description:"Configurar contexto de la escuela",icon:fv,color:"bg-orange-600 hover:bg-orange-700",onClick:s}];return r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" Acciones Rpidas"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((i,o)=>{const l=i.icon;return r.jsxs("button",{onClick:i.onClick,className:`${i.color} text-white rounded-lg p-6 text-left transition-all transform hover:scale-105 shadow-md hover:shadow-lg`,children:[r.jsx(l,{className:"w-8 h-8 mb-3"}),r.jsx("h4",{className:"text-lg font-bold mb-1",children:i.title}),r.jsx("p",{className:"text-sm opacity-90",children:i.description})]},o)})})]})},Bq=({planeaciones:t,onView:e,onViewAll:n,onCreate:s})=>t.length===0?r.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-8",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:""}),"Planeaciones Recientes"]}),r.jsxs("div",{className:"text-center py-10 bg-slate-50 rounded-2xl border border-dashed border-slate-300",children:[r.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-slate-300",children:r.jsx(Ls,{className:"w-8 h-8"})}),r.jsx("p",{className:"text-slate-600 font-semibold text-lg",children:"An no has creado planeaciones"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1 max-w-xs mx-auto",children:"Comienza creando tu primera planeacin didctica alineada al MCCEMS."}),s&&r.jsxs("button",{onClick:s,className:"mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-indigo-100 flex items-center gap-2 mx-auto",children:[r.jsx(On,{className:"w-5 h-5"}),"Crear Nueva Planeacin"]})]})]}):r.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx("span",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:""}),"Planeaciones Recientes"]}),r.jsxs("button",{onClick:n,className:"text-indigo-600 hover:text-indigo-700 font-bold text-sm flex items-center gap-1 group",children:["Ver todas",r.jsx(il,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),r.jsx("div",{className:"space-y-4",children:t.slice(0,5).map(a=>r.jsxs("div",{className:"group border border-slate-100 bg-slate-50/30 rounded-2xl p-4 hover:border-indigo-200 hover:bg-white hover:shadow-xl hover:shadow-indigo-50/50 transition-all cursor-pointer relative overflow-hidden",onClick:()=>e(a.id),children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg mr-3 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:r.jsx(at,{className:"w-4 h-4"})}),r.jsx("h4",{className:"font-bold text-slate-800 group-hover:text-indigo-900 transition-colors",children:a.titulo||a.materia})]}),r.jsxs("div",{className:"flex flex-wrap items-center text-xs text-slate-500 gap-4 ml-11",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ls,{className:"w-3.5 h-3.5 text-slate-400"}),a.materia]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ts,{className:"w-3.5 h-3.5 text-slate-400"}),a.semestre," Semestre"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Oh,{className:"w-3.5 h-3.5 text-slate-400"}),new Date(a.fecha).toLocaleDateString("es-MX",{day:"numeric",month:"short",year:"numeric"})]})]})]}),r.jsx("button",{onClick:i=>{i.stopPropagation(),e(a.id)},className:"ml-4 p-3 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Ver detalles",children:r.jsx(LU,{className:"w-5 h-5"})})]})]},a.id))}),t.length>5&&r.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:r.jsxs("button",{onClick:n,className:"bg-slate-900 text-white px-8 py-3 rounded-2xl font-bold text-sm hover:bg-indigo-600 transition-all shadow-lg shadow-slate-200 flex items-center gap-2 mx-auto",children:["Gestionar todas las planeaciones",r.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-lg text-xs",children:t.length})]})})]}),qq=({onNavigate:t})=>{var p,g;const{user:e}=ct(),[n,s]=P.useState([]),[a,i]=P.useState(!1),[o,l]=P.useState({total:0,promedioSemanal:0});P.useEffect(()=>{e!=null&&e.id&&c()},[e==null?void 0:e.id,e==null?void 0:e.schoolId]);const c=async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.schoolId)){console.warn(" No se pueden cargar planeaciones: faltan IDs",{userId:e==null?void 0:e.id,schoolId:e==null?void 0:e.schoolId}),s([]),i(!1);return}try{i(!0),console.log(" Cargando planeaciones para:",{userId:e.id,schoolId:e.schoolId});const x=await qm.getMias(e.id,e.schoolId);console.log(" Planeaciones recuperadas:",x.length);const y=x.map(b=>{let N=new Date().toISOString();return b.createdAt&&(typeof b.createdAt=="string"?N=b.createdAt:typeof b.createdAt=="object"&&"toDate"in b.createdAt&&(N=b.createdAt.toDate().toISOString())),{id:b.id,materia:b.subject,semestre:b.semester||1,fecha:N,titulo:b.title}});s(y);const T=x.length,A=d(x);l({total:T,promedioSemanal:A})}catch(x){console.error("Error al cargar planeaciones:",x);const y=localStorage.getItem("savedPlans");if(y){const T=JSON.parse(y);s(T),l({total:T.length,promedioSemanal:0})}}finally{i(!1)}},d=x=>{if(x.length===0)return 0;const y=x.map(N=>new Date(N.createdAt||N.fecha)),T=new Date(Math.min(...y.map(N=>N.getTime()))),b=Math.max(1,Math.ceil((new Date().getTime()-T.getTime())/(7*24*60*60*1e3)));return x.length/b},m=x=>{t("plans")};return e?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx(zq,{user:e}),r.jsx(Fq,{totalPlaneaciones:o.total,totalMaterias:((p=e.materias)==null?void 0:p.length)||0,totalSemestres:((g=e.grados)==null?void 0:g.length)||0,promedioSemanal:o.promedioSemanal}),r.jsx(Gq,{onNewPlaneacion:()=>t("generator"),onViewPlaneaciones:()=>t("plans"),onHerramientas:()=>t("herramientas"),onContexto:()=>t("context")}),a?r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(x=>r.jsx("div",{className:"h-20 bg-gray-100 rounded"},x))})]})}):r.jsx(Bq,{planeaciones:n,onView:m,onViewAll:()=>t("plans"),onCreate:()=>t("generator")}),o.total===0&&!a&&r.jsxs("div",{className:"mt-6 bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-indigo-900 mb-2",children:"Bienvenido a EDUPLANMX! "}),r.jsx("p",{className:"text-indigo-700 mb-4",children:"Ests listo para comenzar a crear planeaciones didcticas personalizadas. Tu informacin ya est configurada y lista para usar."}),r.jsx("button",{onClick:()=>t("generator"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors",children:"Crear Mi Primera Planeacin"})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-lg text-gray-600",children:"Cargando..."})})})},U1=({readOnly:t=!1})=>{const{user:e}=ct(),[n,s]=P.useState(!1),[a,i]=P.useState(!1),[o,l]=P.useState(null),[c,d]=P.useState({abandonoEscolar:0,reprobacion:0,eficienciaTerminal:0,matriculaTotal:0}),[m,p]=P.useState({aulasConElectricidad:!1,aulasConInternet:!1,laboratorioComputacion:!1,instalacionesDeportivas:!1,fortalezas:[],areasOportunidad:[],descripcionGeneral:""}),[g,x]=P.useState(""),[y,T]=P.useState("");P.useEffect(()=>{e!=null&&e.schoolId&&A()},[e==null?void 0:e.schoolId]);const A=async()=>{if(e!=null&&e.schoolId){s(!0);try{const D=re(J,"pmc",e.schoolId),V=await kn(D);if(V.exists()){const k=V.data();k.indicadores&&d(k.indicadores),k.infraestructura&&p(k.infraestructura)}}catch(D){console.error("Error al cargar datos:",D),l({type:"error",text:"Error al cargar la informacin."})}finally{s(!1)}}},b=async()=>{if(e!=null&&e.schoolId){i(!0),l(null);try{const D=re(J,"pmc",e.schoolId);await dr(D,{schoolId:e.schoolId,indicadores:c,infraestructura:m,updatedAt:new Date().toISOString()},{merge:!0}),l({type:"success",text:"Informacin actualizada correctamente."}),setTimeout(()=>l(null),3e3)}catch(D){console.error("Error al guardar:",D),l({type:"error",text:"Error al guardar los cambios."})}finally{i(!1)}}},N=(D,V,k)=>{V.trim()&&(p(R=>({...R,[D]:[...R[D],V.trim()]})),k(""))},S=(D,V)=>{p(k=>({...k,[D]:k[D].filter((R,_)=>_!==V)}))};return n?r.jsx("div",{className:"p-8 text-center",children:"Cargando indicadores..."}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Diagnstico Escolar (PMC)"}),r.jsx("p",{className:"text-slate-600",children:"Indicadores acadmicos e infraestructura del plantel"})]}),!t&&r.jsx("button",{onClick:b,disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors shadow-sm",children:a?"Guardando...":r.jsxs(r.Fragment,{children:[r.jsx(Ri,{className:"w-4 h-4"}),"Guardar Cambios"]})})]}),o&&r.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-2 ${o.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[o.type==="success"?r.jsx(Is,{className:"w-5 h-5"}):r.jsx(ba,{className:"w-5 h-5"}),o.text]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(ms,{className:"w-5 h-5 text-indigo-600"}),"Indicadores Acadmicos"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border border-red-100",children:[r.jsx("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"Abandon Escolar (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(UO,{className:"w-5 h-5 text-red-500"}),r.jsx("input",{type:"number",disabled:t,value:c.abandonoEscolar,onChange:D=>d({...c,abandonoEscolar:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-red-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100",children:[r.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-1",children:"Reprobacin (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ba,{className:"w-5 h-5 text-orange-500"}),r.jsx("input",{type:"number",disabled:t,value:c.reprobacion,onChange:D=>d({...c,reprobacion:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-orange-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100",children:[r.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Eficiencia Terminal (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ms,{className:"w-5 h-5 text-green-500"}),r.jsx("input",{type:"number",disabled:t,value:c.eficienciaTerminal,onChange:D=>d({...c,eficienciaTerminal:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-green-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[r.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Matrcula Total"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Je,{className:"w-5 h-5 text-blue-500"}),r.jsx("input",{type:"number",disabled:t,value:c.matriculaTotal,onChange:D=>d({...c,matriculaTotal:parseInt(D.target.value)||0}),className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(At,{className:"w-5 h-5 text-indigo-600"}),"Infraestructura y Equipamiento"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.aulasConElectricidad?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,aulasConElectricidad:!m.aulasConElectricidad}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ez,{className:`w-5 h-5 ${m.aulasConElectricidad?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.aulasConElectricidad?"text-indigo-900":"text-slate-600"}`,children:"Electricidad"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.aulasConElectricidad?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.aulasConElectricidad?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.aulasConInternet?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,aulasConInternet:!m.aulasConInternet}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Kg,{className:`w-5 h-5 ${m.aulasConInternet?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.aulasConInternet?"text-indigo-900":"text-slate-600"}`,children:"Internet"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.aulasConInternet?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.aulasConInternet?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.laboratorioComputacion?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,laboratorioComputacion:!m.laboratorioComputacion}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(lO,{className:`w-5 h-5 ${m.laboratorioComputacion?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.laboratorioComputacion?"text-indigo-900":"text-slate-600"}`,children:"Laboratorio de Cmputo"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.laboratorioComputacion?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.laboratorioComputacion?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.instalacionesDeportivas?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,instalacionesDeportivas:!m.instalacionesDeportivas}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(PU,{className:`w-5 h-5 ${m.instalacionesDeportivas?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.instalacionesDeportivas?"text-indigo-900":"text-slate-600"}`,children:"Instalaciones Deportivas"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.instalacionesDeportivas?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.instalacionesDeportivas?"translate-x-4":""}`})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex justify-between items-center",children:["Descripcin General y Diagnstico de Salud",r.jsx("span",{className:"text-xs font-normal text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full",children:"Requerido para PAEC"})]}),!t&&r.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-800",children:[r.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-blue-200 text-blue-800 w-5 h-5 flex items-center justify-center rounded-full text-xs",children:"i"}),"Gua para Alineacin con Rbrica PAEC 2025"]}),r.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-blue-700 opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Conectar datos con salud:"})," Relaciona los indicadores (abandono, reprobacin) con determinantes de salud (cansancio, alimentacin, estrs, trabajo)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Inters Genuino:"})," Menciona explcitamente inquietudes del alumnado (ej. ",r.jsx("em",{children:'"el estudiantado manifest preocupacin por..."'}),")."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Metodologa de Indagacin:"})," Cita los instrumentos usados (encuestas, observacin) y la gua metodolgica."]})]})]}),r.jsx("textarea",{disabled:t,className:"w-full border border-slate-300 rounded-xl p-4 h-48 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y text-slate-700 disabled:bg-slate-50 leading-relaxed",placeholder:`Ejemplo de redaccin ideal:

"El plantel atiende a 108 estudiantes en turno vespertino... condiciones que impactan en sus hbitos de sueo y alimentacin. Se observa cansancio y estrs relacionados con el abandono escolar.

El estudiantado expres preocupacin por la falta de opciones de comida saludable...

Este diagnstico se elabor a partir de encuestas breves y observacin directa, siguiendo la metodologa sugerida en el PAEC 2025..."`,value:m.descripcionGeneral,onChange:D=>p({...m,descripcionGeneral:D.target.value})}),r.jsx("p",{className:"text-xs text-slate-400 mt-2 text-right",children:"Esta descripcin fundamentar la problemtica seleccionada en el PAEC."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Principales Fortalezas"]}),r.jsx("div",{className:"space-y-2 mb-3",children:m.fortalezas.map((D,V)=>r.jsxs("div",{className:"flex justify-between items-center bg-green-50 text-green-800 px-3 py-2 rounded-lg text-sm border border-green-100",children:[r.jsx("span",{children:D}),!t&&r.jsx("button",{onClick:()=>S("fortalezas",V),className:"text-green-600 hover:text-green-800 font-bold ml-2",children:""})]},V))}),!t&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ej: Docentes comprometidos con la salud, Espacios verdes...",value:g,onChange:D=>x(D.target.value),onKeyDown:D=>D.key==="Enter"&&N("fortalezas",g,x)}),r.jsx("button",{onClick:()=>N("fortalezas",g,x),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-green-700",children:"Agregar"})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"reas de Oportunidad"]}),r.jsx("div",{className:"space-y-2 mb-3",children:m.areasOportunidad.map((D,V)=>r.jsxs("div",{className:"flex justify-between items-center bg-orange-50 text-orange-800 px-3 py-2 rounded-lg text-sm border border-orange-100",children:[r.jsx("span",{children:D}),!t&&r.jsx("button",{onClick:()=>S("areasOportunidad",V),className:"text-orange-600 hover:text-orange-800 font-bold ml-2",children:""})]},V))}),!t&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Alumnos solicitan mejores opciones alimenticias...",value:y,onChange:D=>T(D.target.value),onKeyDown:D=>D.key==="Enter"&&N("areasOportunidad",y,T)}),r.jsx("button",{onClick:()=>N("areasOportunidad",y,T),className:"bg-orange-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-orange-700",children:"Agregar"})]})]})]})]})]})},Hq=()=>{const{user:t}=ct(),[e,n]=P.useState("diagnostico"),[s,a]=P.useState(null),[i,o]=P.useState(!1),[l,c]=P.useState([]);P.useEffect(()=>{t!=null&&t.schoolId&&d()},[t==null?void 0:t.schoolId]);const d=async()=>{if(t!=null&&t.schoolId){o(!0);try{const y=re(J,"pmc",t.schoolId),T=await kn(y);if(T.exists()){const A=T.data();A.metas&&c(A.metas)}}catch(y){console.error("Error al cargar metas:",y)}finally{o(!1)}}},m=async()=>{if(t!=null&&t.schoolId)try{const y=re(J,"pmc",t.schoolId);await dr(y,{metas:l},{merge:!0});const T=new Date().toLocaleTimeString();a(T),alert("Metas guardadas correctamente en la nube ")}catch(y){console.error("Error al guardar metas:",y),alert("Error al guardar. Intenta de nuevo.")}},p=()=>{const y={id:Date.now().toString(),area:"Aprendizaje",description:"",actions:[],progress:0};c([...l,y])},g=(y,T,A)=>{c(l.map(b=>b.id===y?{...b,[T]:A}:b))},x=y=>{confirm("Ests seguro de eliminar esta meta?")&&c(l.filter(T=>T.id!==y))};return r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(ms,{className:"w-8 h-8 text-indigo-600"}),"Plan de Mejora Continua (PMC)"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Gestin del diagnstico y metas institucionales"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[s&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Guardado: ",s]}),r.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(Ri,{className:"w-4 h-4"})," Guardar Metas"]})]})]}),r.jsxs("div",{className:"flex border-b border-slate-200",children:[r.jsx("button",{onClick:()=>n("diagnostico"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="diagnostico"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"1. Diagnstico Institucional"}),r.jsx("button",{onClick:()=>n("metas"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="metas"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"2. Metas y Acciones"}),r.jsx("button",{onClick:()=>n("seguimiento"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="seguimiento"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"3. Seguimiento"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-slate-200 shadow-sm",children:[e==="diagnostico"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx(U1,{readOnly:!0})}),e==="metas"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-sm font-bold text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(On,{className:"w-4 h-4"})," Agregar Nueva Meta"]})}),l.length===0?r.jsx("div",{className:"text-center py-12 text-slate-400",children:"No hay metas definidas. Comienza agregando una meta prioritaria."}):r.jsx("div",{className:"space-y-6",children:l.map((y,T)=>r.jsxs("div",{className:"border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-4",children:[r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"rea de Atencin"}),r.jsxs("select",{value:y.area,onChange:A=>g(y.id,"area",A.target.value),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium",children:[r.jsx("option",{value:"Aprendizaje",children:"Aprendizaje"}),r.jsx("option",{value:"Formacin Docente",children:"Formacin Docente"}),r.jsx("option",{value:"Infraestructura",children:"Infraestructura"}),r.jsx("option",{value:"Convivencia",children:"Convivencia Escolar"}),r.jsx("option",{value:"Vinculacin",children:"Vinculacin (PAEC)"})]})]}),r.jsxs("div",{className:"md:col-span-8",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Descripcin de la Meta"}),r.jsx("input",{type:"text",className:"w-full p-2 border border-slate-200 rounded-lg text-sm",placeholder:"Ej. Reducir la desercin en un 5%...",value:y.description,onChange:A=>g(y.id,"description",A.target.value)})]}),r.jsx("div",{className:"md:col-span-1 flex items-end justify-center",children:r.jsx("button",{onClick:()=>x(y.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:r.jsx(ns,{className:"w-5 h-5"})})})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-end",children:r.jsx("button",{className:"text-xs font-bold text-indigo-600",children:"+ Gestionar Acciones y Responsables"})})]},y.id))})]}),e==="seguimiento"&&r.jsx("div",{className:"animate-in fade-in",children:l.length===0?r.jsx("div",{className:"text-center py-12 text-slate-500 italic",children:"Define metas primero para darles seguimiento."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-blue-800 text-sm mb-6",children:[r.jsx("strong",{children:"Panel de Control:"})," Actualiza el porcentaje de avance de cada meta trimestralmente."]}),l.map(y=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-slate-100 text-slate-600 uppercase mb-2 inline-block",children:y.area}),r.jsx("h3",{className:"font-bold text-slate-800",children:y.description||"Sin descripcin"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[y.progress||0,"%"]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Avance Global"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-500",style:{width:`${y.progress||0}%`}})}),r.jsx("div",{className:"flex items-center gap-4 mt-2",children:r.jsx("input",{type:"range",min:"0",max:"100",value:y.progress||0,onChange:T=>g(y.id,"progress",Number(T.target.value)),className:"w-full"})})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2",children:[r.jsx(PO,{className:"w-3 h-3"})," Evidencias Recientes"]}),r.jsx("div",{className:"text-sm text-slate-400 italic",children:"No hay evidencias cargadas para este periodo."}),r.jsx("button",{className:"mt-2 text-xs font-medium text-indigo-600 hover:underline",children:"+ Cargar Evidencia"})]})]},y.id))]})})]})]})},O1=({readOnly:t=!1})=>{var D,V,k,R,_,I;const{user:e}=ct(),[n,s]=P.useState([]),[a,i]=P.useState(!1),[o,l]=P.useState(!1),[c,d]=P.useState({titulo:"",descripcion:"",prioridad:"Media",causas:[],afectados:[],criterios:{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1}}),[m,p]=P.useState(""),[g,x]=P.useState("");P.useEffect(()=>{e!=null&&e.schoolId&&y()},[e==null?void 0:e.schoolId]);const y=async()=>{if(e!=null&&e.schoolId){i(!0);try{const C=re(J,"pmc",e.schoolId),E=await kn(C);if(E.exists()){const M=E.data();M.paec&&s(M.paec)}}catch(C){console.error("Error al cargar PAEC:",C)}finally{i(!1)}}},T=async()=>{if(!(e!=null&&e.schoolId)||!c.titulo)return;const C={id:Math.random().toString(36).substr(2,9),titulo:c.titulo||"Sin ttulo",descripcion:c.descripcion||"",prioridad:c.prioridad,causas:c.causas||[],afectados:c.afectados||[],criterios:c.criterios||{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1},seleccionada:!1,fechaRegistro:new Date().toISOString()};try{const E=re(J,"pmc",e.schoolId);await dr(E,{paec:hv(C)},{merge:!0}),s([...n,C]),l(!1),d({titulo:"",descripcion:"",prioridad:"Media",causas:[],afectados:[],criterios:{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1}})}catch(E){console.error("Error al agregar problemtica:",E)}},A=async C=>{if(!(e!=null&&e.schoolId))return;const E=n.find(M=>M.id===C);if(E&&confirm("Ests seguro de eliminar esta problemtica?"))try{const M=re(J,"pmc",e.schoolId);await xt(M,{paec:_I(E)}),s(n.filter(j=>j.id!==C))}catch(M){console.error("Error al eliminar:",M)}},b=async C=>{if(!(e!=null&&e.schoolId))return;const E=n.map(M=>({...M,seleccionada:M.id===C}));s(E);try{const M=re(J,"pmc",e.schoolId);await xt(M,{paec:E})}catch(M){console.error("Error al actualizar prioridad:",M),y()}},N=(C,E,M)=>{E.trim()&&(d(j=>({...j,[C]:[...j[C]||[],E.trim()]})),M(""))},S=(C,E)=>{d(M=>({...M,[C]:(M[C]||[]).filter((j,G)=>G!==E)}))};return a?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando PAEC..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Programa Aula Escuela Comunidad (PAEC)"}),r.jsx("p",{className:"text-slate-600",children:"Diagnstico comunitario y seleccin de problemticas"})]}),!t&&r.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(On,{className:"w-4 h-4"}),"Nueva Problemtica"]})]}),o&&!t&&r.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 shadow-sm animate-in fade-in slide-in-from-top-4",children:[r.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Registrar Nueva Problemtica"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Problemtica Identificada"}),r.jsx("input",{type:"text",className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Contaminacin del ro local",value:c.titulo,onChange:C=>d({...c,titulo:C.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nivel de Impacto"}),r.jsxs("select",{className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",value:c.prioridad,onChange:C=>d({...c,prioridad:C.target.value}),children:[r.jsx("option",{value:"Alta",children:"Alta"}),r.jsx("option",{value:"Media",children:"Media"}),r.jsx("option",{value:"Baja",children:"Baja"})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Descripcin y Justificacin"}),r.jsx("span",{className:"text-xs text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full",children:"Formato Sugerido"})]}),r.jsxs("div",{className:"mb-3 bg-blue-50 border border-blue-100 rounded-lg p-3 text-xs text-blue-800",children:[r.jsx("h4",{className:"font-bold mb-1",children:"Estructura Recomendada para Rbrica PAEC:"}),r.jsxs("ul",{className:"list-disc pl-4 space-y-1 opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"1. El Problema (Precisin):"})," Qu pasa exactamente? (Conductas observables, riesgos de salud)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"2. El Contexto:"})," Cmo se ve esto en TU escuela? (Menciona el nombre del plantel y situaciones locales)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"3. La Indagacin:"})," Cmo te diste cuenta? (Observacin, encuestas, comentarios)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"4. La Propuesta:"})," Qu vamos a hacer para transformar esto? (Talleres, actividades formativas)."]})]})]}),r.jsx("textarea",{className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm h-48 resize-y focus:ring-2 focus:ring-indigo-500 leading-relaxed",placeholder:`Ejemplo de redaccin:

"Los alumnos buscan estar en buen estado fsico... sin embargo, no cuentan con orientacin profesional... (El Problema).

En el contexto del Bachillerato Gral. [Nombre]... se han identificado comentarios sobre presin esttica... (El Contexto).

Esta problemtica fue identificada a partir de observaciones en el aula y encuestas breves... (La Indagacin).

La propuesta consiste en desarrollar talleres y actividades que fortalezcan conocimientos y actitudes para el cuidado de la salud..." (La Propuesta).`,value:c.descripcion,onChange:C=>d({...c,descripcion:C.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Causas Principales"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-2 py-1 text-sm",placeholder:"Ej: Basura",value:m,onChange:C=>p(C.target.value),onKeyDown:C=>C.key==="Enter"&&N("causas",m,p)}),r.jsx("button",{onClick:()=>N("causas",m,p),className:"bg-slate-200 px-3 py-1 rounded text-sm hover:bg-slate-300",children:"+"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(D=c.causas)==null?void 0:D.map((C,E)=>r.jsxs("span",{className:"bg-white border border-slate-200 px-2 py-1 rounded text-xs flex items-center gap-1",children:[C," ",r.jsx("button",{onClick:()=>S("causas",E),className:"text-red-500 ml-1",children:""})]},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Poblacin Afectada"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-2 py-1 text-sm",placeholder:"Ej: Estudiantes",value:g,onChange:C=>x(C.target.value),onKeyDown:C=>C.key==="Enter"&&N("afectados",g,x)}),r.jsx("button",{onClick:()=>N("afectados",g,x),className:"bg-slate-200 px-3 py-1 rounded text-sm hover:bg-slate-300",children:"+"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(V=c.afectados)==null?void 0:V.map((C,E)=>r.jsxs("span",{className:"bg-white border border-slate-200 px-2 py-1 rounded text-xs flex items-center gap-1",children:[C," ",r.jsx("button",{onClick:()=>S("afectados",E),className:"text-red-500 ml-1",children:""})]},E))})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:[r.jsx("h4",{className:"text-sm font-semibold text-slate-800 mb-3",children:"Criterios de Viabilidad"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(k=c.criterios)==null?void 0:k.impactoSocial,onChange:C=>d({...c,criterios:{...c.criterios,impactoSocial:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Impacto Social Alto"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(R=c.criterios)==null?void 0:R.viabilidad,onChange:C=>d({...c,criterios:{...c.criterios,viabilidad:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Viabilidad Tcnica/Financiera"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(_=c.criterios)==null?void 0:_.interesEstudiantil,onChange:C=>d({...c,criterios:{...c.criterios,interesEstudiantil:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Inters del Estudiantado"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(I=c.criterios)==null?void 0:I.transversalidad,onChange:C=>d({...c,criterios:{...c.criterios,transversalidad:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Oportunidad de Transversalidad"]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancelar"}),r.jsx("button",{onClick:T,disabled:!c.titulo,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors font-medium",children:"Registrar Problemtica"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.length===0&&!o&&r.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[r.jsx(Kn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-medium text-slate-600",children:"No hay problemticas registradas"}),r.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Comienza registrando las necesidades de tu comunidad escolar"}),!t&&r.jsx("button",{onClick:()=>l(!0),className:"text-indigo-600 font-medium hover:underline",children:"Registrar ahora"})]}),n.map(C=>r.jsxs("div",{className:`bg-white rounded-xl border p-6 transition-all ${C.seleccionada?"border-green-500 shadow-md ring-1 ring-green-500":"border-slate-200 hover:shadow-md"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:C.titulo}),C.seleccionada&&r.jsxs("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1",children:[r.jsx(Uc,{className:"w-3 h-3"})," Prioridad del Ciclo"]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-bold ${C.prioridad==="Alta"?"bg-red-100 text-red-700":C.prioridad==="Media"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:C.prioridad})]}),r.jsx("p",{className:"text-slate-600 text-sm",children:C.descripcion})]}),!t&&r.jsxs("div",{className:"flex items-center gap-2",children:[!C.seleccionada&&r.jsx("button",{onClick:()=>b(C.id),className:"text-sm text-slate-500 hover:text-green-600 px-3 py-1 rounded hover:bg-green-50 transition-colors",title:"Seleccionar como prioridad",children:"Seleccionar"}),r.jsx("button",{onClick:()=>A(C.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(ns,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[r.jsx(Ei,{className:"w-3 h-3"})," Causas:"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.causas.map((E,M)=>r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs",children:E},M))})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[r.jsx(Je,{className:"w-3 h-3"})," Afectados:"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.afectados.map((E,M)=>r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs",children:E},M))})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[r.jsx("span",{className:"font-semibold text-slate-700 block mb-2 text-xs uppercase tracking-wider",children:"Criterios Cumplidos:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.impactoSocial?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Yl,{className:"w-3 h-3"})," Impacto Social"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.viabilidad?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Yl,{className:"w-3 h-3"})," Viabilidad"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.interesEstudiantil?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Yl,{className:"w-3 h-3"})," Inters Alumnos"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.transversalidad?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Yl,{className:"w-3 h-3"})," Transversalidad"]})]})]})]})]},C.id))]})]})},$q=()=>{var _,I,C;const{user:t}=ct(),[e,n]=P.useState(!1),[s,a]=P.useState(!1),[i,o]=P.useState([]),[l,c]=P.useState({name:"",problemId:"",justification:"",generalObjective:"",specificObjectives:[],duration:"",stages:[{name:"Diagnstica",period:"",activities:[]},{name:"Planeacin",period:"",activities:[]},{name:"Ejecucin",period:"",activities:[]},{name:"Cierre y Valoracin",period:"",activities:[]}],products:[]}),[d,m]=P.useState(""),[p,g]=P.useState(""),[x,y]=P.useState({});P.useEffect(()=>{t!=null&&t.schoolId&&T()},[t==null?void 0:t.schoolId]);const T=async()=>{if(t!=null&&t.schoolId){n(!0);try{const E=re(J,"pmc",t.schoolId),M=await kn(E);if(M.exists()){const j=M.data();o(j.paec||[])}}catch(E){console.error("Error loading problems:",E)}finally{n(!1)}}},A=async()=>{if(!(t!=null&&t.schoolId)||!l.name||!l.problemId){alert("Por favor completa el nombre del proyecto y selecciona una problemtica.");return}a(!0);try{const E={...l,id:Math.random().toString(36).substr(2,9)},M=re(J,"pmc",t.schoolId);await xt(M,{pecProjects:hv(E)}),alert("Proyecto PEC diseado exitosamente "),c({name:"",problemId:"",justification:"",generalObjective:"",specificObjectives:[],duration:"",stages:[{name:"Diagnstica",period:"",activities:[]},{name:"Planeacin",period:"",activities:[]},{name:"Ejecucin",period:"",activities:[]},{name:"Cierre y Valoracin",period:"",activities:[]}],products:[]})}catch(E){console.error("Error saving PEC:",E),alert("Error al guardar el proyecto.")}finally{a(!1)}},b=()=>{d.trim()&&(c(E=>({...E,specificObjectives:[...E.specificObjectives||[],d.trim()]})),m(""))},N=E=>{c(M=>{var j;return{...M,specificObjectives:(j=M.specificObjectives)==null?void 0:j.filter((G,O)=>O!==E)}})},S=()=>{p.trim()&&(c(E=>({...E,products:[...E.products||[],p.trim()]})),g(""))},D=E=>{c(M=>{var j;return{...M,products:(j=M.products)==null?void 0:j.filter((G,O)=>O!==E)}})},V=E=>{const M=x[E];if(!(M!=null&&M.trim()))return;const j=[...l.stages||[]];j[E].activities.push(M.trim()),c(G=>({...G,stages:j})),y(G=>({...G,[E]:""}))},k=(E,M)=>{const j=[...l.stages||[]];j[E].activities=j[E].activities.filter((G,O)=>O!==M),c(G=>({...G,stages:j}))},R=(E,M)=>{const j=[...l.stages||[]];j[E].period=M,c(G=>({...G,stages:j}))};return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"bg-indigo-50 p-6 border-b border-indigo-100",children:[r.jsxs("h2",{className:"text-xl font-bold text-indigo-900 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-6 h-6"})," Diseador de Proyectos Escolares (PEC)"]}),r.jsx("p",{className:"text-indigo-700 text-sm mt-1",children:"Estructura tu proyecto transversal vinculando las problemticas del diagnstico."})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"1. Problemtica a Atender (Diagnstico)"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:l.problemId,onChange:E=>{const M=E.target.value,j=i.find(G=>G.id===M);c(G=>({...G,problemId:M,justification:j?`Atendiendo a la problemtica de ${j.titulo}...`:G.justification}))},children:[r.jsx("option",{value:"",children:"-- Selecciona una problemtica del PAEC --"}),i.map(E=>r.jsxs("option",{value:E.id,children:[E.titulo," (Prioridad: ",E.prioridad,")"]},E.id))]}),l.problemId&&r.jsxs("div",{className:"p-3 bg-green-50 text-green-800 text-xs rounded-lg border border-green-100 flex items-center gap-2",children:[r.jsx(Uc,{className:"w-4 h-4"})," Problemtica vinculada correctamente"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"2. Ttulo del Proyecto"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 font-bold text-lg",placeholder:"Ej: Feria de la Salud Integral 2024...",value:l.name,onChange:E=>c({...l,name:E.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"3. Justificacin"}),r.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl h-24 focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Por qu es importante realizar este proyecto?",value:l.justification,onChange:E=>c({...l,justification:E.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"4. Objetivo General"}),r.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl h-32 focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Qu queremos lograr a largo plazo?",value:l.generalObjective,onChange:E=>c({...l,generalObjective:E.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"5. Objetivos Especficos"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 p-2 border border-slate-300 rounded-lg text-sm",placeholder:"Agregar objetivo...",value:d,onChange:E=>m(E.target.value),onKeyDown:E=>E.key==="Enter"&&b()}),r.jsx("button",{onClick:b,className:"bg-indigo-100 text-indigo-700 px-3 rounded-lg hover:bg-indigo-200",children:r.jsx(On,{className:"w-4 h-4"})})]}),r.jsx("ul",{className:"space-y-2 max-h-24 overflow-y-auto",children:(_=l.specificObjectives)==null?void 0:_.map((E,M)=>r.jsxs("li",{className:"flex justify-between items-center text-sm bg-slate-50 p-2 rounded border border-slate-100",children:[r.jsxs("span",{children:[" ",E]}),r.jsx("button",{onClick:()=>N(M),className:"text-red-400 hover:text-red-600",children:""})]},M))})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("label",{className:"block text-lg font-bold text-slate-800",children:"6. Cronograma de Actividades (Por Fases)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Duracin Total:"}),r.jsx("input",{type:"text",className:"border border-slate-300 rounded-lg px-3 py-1 text-sm w-48",placeholder:"Ej: Agosto - Diciembre 2024",value:l.duration,onChange:E=>c({...l,duration:E.target.value})})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(I=l.stages)==null?void 0:I.map((E,M)=>r.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:[r.jsxs("h4",{className:"font-bold text-indigo-800 mb-2 flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 flex items-center justify-center rounded-full text-xs",children:M+1}),E.name]}),r.jsx("input",{type:"text",className:"w-full text-xs p-1 mb-3 border border-slate-200 rounded text-slate-500",placeholder:"Periodo (Ej: Agosto)",value:E.period,onChange:j=>R(M,j.target.value)}),r.jsx("div",{className:"space-y-2 mb-3 min-h-[80px]",children:E.activities.map((j,G)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-slate-100 text-xs flex justify-between group",children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>k(M,G),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},G))}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{type:"text",className:"flex-1 text-xs p-1 border border-slate-300 rounded",placeholder:"Nueva actividad...",value:x[M]||"",onChange:j=>y({...x,[M]:j.target.value}),onKeyDown:j=>j.key==="Enter"&&V(M)}),r.jsx("button",{onClick:()=>V(M),className:"bg-indigo-600 text-white rounded px-2 text-xs",children:"+"})]})]},M))})]}),r.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"7. Productos Entregables (Evidencias)"}),r.jsxs("div",{className:"flex gap-4 mb-4",children:[r.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-300 rounded-xl",placeholder:"Ej: Video documental, Mural comunitario, Huerto escolar...",value:p,onChange:E=>g(E.target.value),onKeyDown:E=>E.key==="Enter"&&S()}),r.jsx("button",{onClick:S,className:"bg-indigo-600 text-white px-6 rounded-xl font-bold hover:bg-indigo-700",children:"Agregar"})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:(C=l.products)==null?void 0:C.map((E,M)=>r.jsxs("div",{className:"bg-white px-4 py-2 rounded-full border border-indigo-100 text-indigo-700 font-medium flex items-center gap-2 shadow-sm",children:[E,r.jsx("button",{onClick:()=>D(M),className:"text-indigo-300 hover:text-red-500",children:""})]},M))})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:r.jsx("button",{onClick:A,disabled:s,className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transform hover:-translate-y-1 transition-all disabled:opacity-50",children:s?"Guardando Proyecto...":r.jsxs(r.Fragment,{children:[r.jsx(Ri,{className:"w-5 h-5"})," Guardar Proyecto PEC"]})})})]})]})},Yq=()=>{const{user:t}=ct(),[e,n]=P.useState("diagnostico"),[s,a]=P.useState([]);return P.useEffect(()=>{(async()=>{if(t!=null&&t.schoolId){const o=await Tv.getActiveProjects(t.schoolId);a(o)}})()},[t==null?void 0:t.schoolId]),r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8 relative",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(Je,{className:"w-8 h-8 text-pink-600"}),"Comit PAEC"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Programa Aula Escuela Comunidad - Diagnstico y Proyectos"})]})}),r.jsxs("div",{className:"flex gap-4 border-b border-slate-200 pb-1",children:[r.jsxs("button",{onClick:()=>n("diagnostico"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="diagnostico"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(Ei,{className:"w-4 h-4"})," Diagnstico Comunitario"]}),r.jsxs("button",{onClick:()=>n("banco"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="banco"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(FU,{className:"w-4 h-4"})," Banco de Proyectos (PEC)"]}),r.jsxs("button",{onClick:()=>n("nuevo"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="nuevo"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(On,{className:"w-4 h-4"})," Disear Nuevo PEC"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 min-h-[500px]",children:[e==="diagnostico"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-900 text-sm mb-6",children:[r.jsx("strong",{children:"Instrucciones:"})," Este diagnstico es gestionado por el Director. Aqu puedes consultar las problemticas prioritarias identificadas para vincularlas a tus proyectos."]}),r.jsx(O1,{readOnly:!0})]}),e==="banco"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:s.map(i=>r.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:shadow-lg transition-shadow bg-white",children:[r.jsx("div",{className:"h-24 bg-gradient-to-r from-pink-500 to-purple-600 p-4 relative",children:r.jsx("div",{className:"absolute top-4 right-4 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-bold",children:i.duration})}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:i.name}),r.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-4",children:i.generalObjective}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Kn,{className:"w-4 h-4 text-pink-500"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Productos:"})," ",i.products.length," definidos"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Je,{className:"w-4 h-4 text-purple-500"}),r.jsx("span",{children:"Vinculado a Planeaciones"})]})]}),r.jsx("button",{className:"w-full py-2 bg-slate-100 text-slate-700 rounded-lg font-bold text-sm hover:bg-slate-200 transition-colors",children:"Ver Detalles y Avances"})]})]},i.id))}),e==="nuevo"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx($q,{})})]})]})},Jq=()=>{const t=bs(),e=Os(),{user:n,logout:s}=ct(),[a,i]=P.useState(()=>{var T;return((T=e.state)==null?void 0:T.view)||"dashboard"}),[o,l]=P.useState(()=>{const T=localStorage.getItem("schoolContext");return T?JSON.parse(T):{schoolName:"Bachillerato General Oficial",cct:"",cycle:"2024-2025",shift:"Matutino",municipality:"",vision:"",communityGoals:"",infrastructure:""}}),[c,d]=P.useState(()=>{const T=localStorage.getItem("subjectContext");return T?JSON.parse(T):{subjectId:"",subjectName:"",formativePurpose:"",curriculumContent:"",mccemsCategory:""}}),[m,p]=P.useState(()=>{const T=localStorage.getItem("savedPlans");return T?JSON.parse(T):[]});P.useEffect(()=>{localStorage.setItem("schoolContext",JSON.stringify(o)),localStorage.setItem("subjectContext",JSON.stringify(c)),localStorage.setItem("savedPlans",JSON.stringify(m)),localStorage.setItem("savedPlans",JSON.stringify(m))},[o,c,m]),P.useEffect(()=>{n&&(n.schoolName&&(!o.schoolName||o.schoolName==="Bachillerato General Oficial")&&l(T=>({...T,schoolName:n.schoolName})),!c.subjectName&&n.materias&&n.materias.length>0&&d(T=>({...T,subjectName:n.materias[0],subjectId:n.materias[0]})))},[n]);const g=async T=>{if(p(A=>[T,...A]),n!=null&&n.id&&(n!=null&&n.schoolId))try{const{planeacionesService:A}=await No(async()=>{const{planeacionesService:b}=await Promise.resolve().then(()=>Nq);return{planeacionesService:b}},void 0);await A.crear(T,n.id,n.schoolId),console.log(" Planeacin guardada en Firestore")}catch(A){console.error(" Error al guardar en Firestore:",A)}},x=T=>{T==="guia-curricular"?t("/maestro/guia-curricular"):T==="herramientas"?t("/maestro/herramientas"):i(T)},y=()=>{switch(a){case"dashboard":return r.jsx(qq,{onNavigate:x});case"admin-asignacion":return r.jsx(Vq,{});case"admin-alumnos":return r.jsx(Uq,{});case"pmc":return r.jsx(Hq,{});case"paec":return r.jsx(Yq,{});case"context":return r.jsx(iz,{school:o,setSchool:l,subject:c,setSubject:d});case"generator":return r.jsx(bq,{school:o,subject:c,teacherName:n?`${n.nombre} ${n.apellidoPaterno}`:void 0,onSave:g});case"plans":return r.jsx(Cq,{});case"diagnostico":return r.jsx(kq,{});default:return r.jsx(Eq,{setView:i,recentPlansCount:m.length})}};return r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(uo,{activeView:a,onNavigate:x}),r.jsxs("main",{className:"flex-1 overflow-y-auto h-screen",children:[r.jsxs("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10 px-8 py-4 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold capitalize text-slate-700",children:a==="dashboard"?"Bienvenido, Docente":a.replace("_"," ")}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-medium border border-indigo-100",children:o.schoolName}),n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-semibold text-slate-700",children:[n.nombre," ",n.apellidoPaterno]}),r.jsx("div",{className:"text-xs text-slate-500 capitalize",children:n.rol})]}),r.jsx("button",{onClick:s,className:"flex md:hidden items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-xl hover:bg-red-100 transition-colors border border-red-200",title:"Cerrar sesin",children:r.jsx(Fh,{className:"w-4 h-4"})})]}):null]})]}),r.jsx("div",{className:"p-8 max-w-5xl mx-auto pb-24",children:y()})]})]})},Kq=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(!1),[a,i]=P.useState(!1),[o,l]=P.useState(""),c=async d=>{i(!0),l(d.datosAdministrativos.nombre);try{await d0.guardarAlumno({datosAdministrativos:d.datosAdministrativos,datosNEM:d.datosNEM,fechaRegistro:d.fechaRegistro}),e(!1),s(!0),setTimeout(()=>{s(!1)},5e3)}catch(m){console.error("Error al guardar alumno:",m),alert("Hubo un error al guardar tu informacin. Por favor, intenta de nuevo.")}finally{i(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-3 rounded-xl",children:r.jsx(At,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"EduPlan MX"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Registro de Alumnos - Bachillerato General Oficial"})]})]})})}),r.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[!t&&!n&&r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 mb-8 border border-slate-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full mb-6",children:r.jsx(OE,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Bienvenido!"}),r.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-2xl mx-auto",children:"Completa tu registro para que podamos conocerte mejor y ofrecerte la mejor experiencia educativa personalizada."}),r.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center gap-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 shadow-lg",children:[r.jsx(OE,{className:"w-6 h-6"}),"Comenzar Registro"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Fcil y Rpido"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Solo 4 pasos sencillos para completar tu registro"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Seguro"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Tu informacin est protegida y es confidencial"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-purple-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Personalizado"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Nos ayuda a adaptar las clases a tus necesidades"})]})]})]}),n&&r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center border border-green-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:r.jsx(Is,{className:"w-12 h-12 text-green-600"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Registro Exitoso!"}),r.jsxs("p",{className:"text-xl text-slate-600 mb-6",children:["Gracias ",r.jsx("span",{className:"font-semibold text-indigo-600",children:o}),", tu informacin ha sido guardada correctamente."]}),r.jsx("p",{className:"text-slate-500 mb-8",children:"Tu docente podr utilizar esta informacin para personalizar las clases y ofrecerte una mejor experiencia educativa."}),r.jsx("button",{onClick:()=>{s(!1),e(!0)},className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Registrar Otro Alumno"})]}),t&&r.jsx(V1,{onGuardar:c,onCancelar:()=>e(!1)}),a&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Guardando tu informacin..."})]})})]}),r.jsx("footer",{className:"bg-white border-t border-slate-200 mt-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsx("p",{className:"text-center text-sm text-slate-500",children:" 2026 EduPlan MX - Bachillerato General Oficial"})})})]})},Qq=()=>{const[t,e]=P.useState([]),[n,s]=P.useState(!0),[a,i]=P.useState(""),[o,l]=P.useState(!1),[c,d]=P.useState(null),[m,p]=P.useState({nombre:"",codigo:"",direccion:"",telefono:"",email:""});P.useEffect(()=>{g()},[]);const g=async()=>{try{s(!0);const b=await je(ue(J,"schools")),N=await Promise.all(b.docs.map(async S=>{const D=S.data(),V=$e(ue(J,"users"),Ze("schoolId","==",S.id)),k=await je(V),R=$e(ue(J,"planeaciones"),Ze("schoolId","==",S.id)),_=await je(R);return{id:S.id,nombre:D.nombre,codigo:D.codigo,direccion:D.direccion,telefono:D.telefono,email:D.email,createdAt:D.createdAt,userCount:k.size,planCount:_.size}}));e(N)}catch(b){console.error("Error al cargar escuelas:",b),alert("Error al cargar las escuelas")}finally{s(!1)}},x=async b=>{if(b.preventDefault(),!m.nombre||!m.codigo){alert("Nombre y cdigo son obligatorios");return}try{c?(await xt(re(J,"schools",c.id),{...m,updatedAt:new Date().toISOString()}),alert(" Escuela actualizada correctamente")):(await es(ue(J,"schools"),{...m,createdAt:new Date().toISOString()}),alert(" Escuela creada correctamente")),l(!1),d(null),p({nombre:"",codigo:"",direccion:"",telefono:"",email:""}),g()}catch(N){console.error("Error al guardar escuela:",N),alert(" Error al guardar la escuela")}},y=b=>{d(b),p({nombre:b.nombre,codigo:b.codigo,direccion:b.direccion||"",telefono:b.telefono||"",email:b.email||""}),l(!0)},T=async b=>{if(b.userCount>0){alert(` No puedes eliminar esta escuela porque tiene ${b.userCount} usuarios registrados.

Primero debes reasignar o eliminar los usuarios.`);return}if(window.confirm(`Ests seguro de eliminar la escuela "${b.nombre}"?

Esta accin no se puede deshacer.`))try{await xs(re(J,"schools",b.id)),alert(" Escuela eliminada correctamente"),g()}catch(S){console.error("Error al eliminar escuela:",S),alert(" Error al eliminar la escuela")}},A=t.filter(b=>b.nombre.toLowerCase().includes(a.toLowerCase())||b.codigo.toLowerCase().includes(a.toLowerCase()));return n?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(At,{className:"w-7 h-7 text-indigo-600"}),"Gestin de Escuelas"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Administra todas las escuelas del sistema"})]}),r.jsxs("button",{onClick:()=>{d(null),p({nombre:"",codigo:"",direccion:"",telefono:"",email:""}),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(On,{className:"w-5 h-5"}),"Nueva Escuela"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",value:a,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-2xl border border-indigo-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:"Total Escuelas"}),r.jsx("p",{className:"text-3xl font-bold text-indigo-900 mt-1",children:t.length})]}),r.jsx(At,{className:"w-12 h-12 text-indigo-600 opacity-50"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl border border-purple-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total Usuarios"}),r.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:t.reduce((b,N)=>b+(N.userCount||0),0)})]}),r.jsx(Je,{className:"w-12 h-12 text-purple-600 opacity-50"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-2xl border border-emerald-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Total Planeaciones"}),r.jsx("p",{className:"text-3xl font-bold text-emerald-900 mt-1",children:t.reduce((b,N)=>b+(N.planCount||0),0)})]}),r.jsx(at,{className:"w-12 h-12 text-emerald-600 opacity-50"})]})})]}),A.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[r.jsx(At,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:a?"No se encontraron escuelas":"No hay escuelas registradas"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:A.map(b=>r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 transition-all shadow-sm hover:shadow-md",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:r.jsx(At,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:b.nombre}),r.jsxs("p",{className:"text-sm text-slate-500",children:["Cdigo: ",b.codigo]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[b.direccion&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Direccin"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.direccion})]}),b.telefono&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Telfono"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.telefono})]}),b.email&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.email})]})]}),r.jsxs("div",{className:"flex gap-4 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Je,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:[b.userCount," usuarios"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(at,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:[b.planCount," planeaciones"]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>y(b),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(xd,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>T(b),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-5 h-5"})})]})]})},b.id))}),o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:c?"Editar Escuela":"Nueva Escuela"}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})}),r.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre de la Escuela *"}),r.jsx("input",{type:"text",required:!0,value:m.nombre,onChange:b=>p({...m,nombre:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Preparatoria Regional de Arandas"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cdigo de Escuela *"}),r.jsx("input",{type:"text",required:!0,value:m.codigo,onChange:b=>p({...m,codigo:b.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: PREP-ARANDAS-001"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Este cdigo debe ser nico"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Direccin"}),r.jsx("input",{type:"text",value:m.direccion,onChange:b=>p({...m,direccion:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Av. Principal #123, Arandas, Jalisco"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telfono"}),r.jsx("input",{type:"tel",value:m.telefono,onChange:b=>p({...m,telefono:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: 348-123-4567"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:m.email,onChange:b=>p({...m,email:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: contacto@escuela.edu.mx"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:c?"Guardar Cambios":"Crear Escuela"}),r.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors",children:"Cancelar"})]})]})]})})]})},Xq=()=>{const[t,e]=P.useState([]),[n,s]=P.useState([]),[a,i]=P.useState(!0),[o,l]=P.useState(""),[c,d]=P.useState("all"),[m,p]=P.useState("all"),[g,x]=P.useState(!1),[y,T]=P.useState(null),[A,b]=P.useState({email:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",rol:"maestro",schoolId:"",puesto:"",activo:!0});P.useEffect(()=>{N()},[]);const N=async()=>{try{i(!0);const[E,M]=await Promise.all([je(ue(J,"users")),je(ue(J,"schools"))]),j=E.docs.map(O=>({id:O.id,...O.data()})),G=M.docs.map(O=>({id:O.id,nombre:O.data().nombre,codigo:O.data().codigo}));e(j),s(G)}catch(E){console.error("Error al cargar datos:",E),alert("Error al cargar los datos")}finally{i(!1)}},S=async E=>{if(E.preventDefault(),!A.email||!A.nombre||!A.apellidoPaterno){alert("Email, nombre y apellido paterno son obligatorios");return}if(A.rol!=="superadmin"&&!A.schoolId){alert("Debes seleccionar una escuela para este usuario");return}try{const M=A.schoolId?n.find(G=>G.id===A.schoolId):null,j={email:A.email.toLowerCase(),nombre:A.nombre,apellidoPaterno:A.apellidoPaterno,apellidoMaterno:A.apellidoMaterno||"",rol:A.rol,schoolId:A.schoolId||null,schoolName:(M==null?void 0:M.nombre)||null,puesto:A.puesto||"",activo:A.activo,onboardingCompleto:A.rol==="superadmin"?!0:!!A.schoolId,materias:[],grados:[],updatedAt:new Date().toISOString()};y?(await xt(re(J,"users",y.id),j),alert(" Usuario actualizado correctamente")):(await es(ue(J,"users"),{...j,createdAt:new Date().toISOString()}),alert(` Usuario creado correctamente

 IMPORTANTE: El usuario debe iniciar sesin con Google usando este email para activar su cuenta.`)),x(!1),T(null),R(),N()}catch(M){console.error("Error al guardar usuario:",M),alert(" Error al guardar el usuario")}},D=E=>{T(E),b({email:E.email,nombre:E.nombre,apellidoPaterno:E.apellidoPaterno,apellidoMaterno:E.apellidoMaterno||"",rol:E.rol,schoolId:E.schoolId||"",puesto:E.puesto||"",activo:E.activo}),x(!0)},V=async E=>{const M=!E.activo,j=M?`Activar al usuario ${E.nombre} ${E.apellidoPaterno}?`:`Desactivar al usuario ${E.nombre} ${E.apellidoPaterno}?

No podr acceder al sistema.`;if(confirm(j))try{await xt(re(J,"users",E.id),{activo:M,updatedAt:new Date().toISOString()}),alert(` Usuario ${M?"activado":"desactivado"} correctamente`),N()}catch(G){console.error("Error al cambiar estado:",G),alert(" Error al cambiar el estado del usuario")}},k=async E=>{if(window.confirm(`Ests seguro de eliminar al usuario ${E.nombre} ${E.apellidoPaterno}?

Email: ${E.email}
Rol: ${E.rol}

Esta accin no se puede deshacer.`))try{await xs(re(J,"users",E.id)),alert(" Usuario eliminado correctamente"),N()}catch(j){console.error("Error al eliminar usuario:",j),alert(" Error al eliminar el usuario")}},R=()=>{b({email:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",rol:"maestro",schoolId:"",puesto:"",activo:!0})},_=t.filter(E=>{const M=E.nombre.toLowerCase().includes(o.toLowerCase())||E.apellidoPaterno.toLowerCase().includes(o.toLowerCase())||E.email.toLowerCase().includes(o.toLowerCase())||E.schoolName&&E.schoolName.toLowerCase().includes(o.toLowerCase()),j=c==="all"||E.rol===c,G=m==="all"||E.schoolId===m;return M&&j&&G}),I={total:t.length,activos:t.filter(E=>E.activo).length,inactivos:t.filter(E=>!E.activo).length,superadmin:t.filter(E=>E.rol==="superadmin").length,directivo:t.filter(E=>E.rol==="directivo").length,maestro:t.filter(E=>E.rol==="maestro").length,alumno:t.filter(E=>E.rol==="alumno").length},C=E=>{switch(E){case"superadmin":return"bg-red-100 text-red-700 border-red-200";case"directivo":return"bg-blue-100 text-blue-700 border-blue-200";case"maestro":return"bg-green-100 text-green-700 border-green-200";case"alumno":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Je,{className:"w-7 h-7 text-indigo-600"}),"Gestin de Usuarios"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Administra todos los usuarios del sistema"})]}),r.jsxs("button",{onClick:()=>{T(null),R(),x(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(On,{className:"w-5 h-5"}),"Nuevo Usuario"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:I.total})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Activos"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:I.activos})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Inactivos"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:I.inactivos})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Superadmin"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:I.superadmin})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[r.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Directivos"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:I.directivo})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Maestros"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:I.maestro})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:[r.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Alumnos"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:I.alumno})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o escuela...",value:o,onChange:E=>l(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Oc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"all",children:"Todos los roles"}),r.jsx("option",{value:"superadmin",children:"Superadmin"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(At,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:m,onChange:E=>p(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"all",children:"Todas las escuelas"}),n.map(E=>r.jsx("option",{value:E.id,children:E.nombre},E.id))]})]})]}),_.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[r.jsx(Je,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:o||c!=="all"||m!=="all"?"No se encontraron usuarios con los filtros aplicados":"No hay usuarios registrados"})]}):r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Escuela"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:_.map(E=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-slate-900",children:[E.nombre," ",E.apellidoPaterno," ",E.apellidoMaterno]}),E.puesto&&r.jsx("p",{className:"text-sm text-slate-500",children:E.puesto})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gh,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:E.email})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${C(E.rol)}`,children:[r.jsx(qh,{className:"w-3 h-3"}),E.rol]})}),r.jsx("td",{className:"px-6 py-4",children:E.schoolName?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(At,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:E.schoolName})]}):r.jsx("span",{className:"text-sm text-slate-400",children:"Sin escuela"})}),r.jsx("td",{className:"px-6 py-4",children:E.activo?r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[r.jsx(Is,{className:"w-3 h-3"}),"Activo"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-medium",children:[r.jsx(Vm,{className:"w-3 h-3"}),"Inactivo"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>D(E),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(xd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>V(E),className:`p-2 rounded-lg transition-colors ${E.activo?"text-slate-600 hover:bg-slate-100":"text-green-600 hover:bg-green-50"}`,title:E.activo?"Desactivar":"Activar",children:r.jsx(EO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>k(E),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})})]},E.id))})]})})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:y?"Editar Usuario":"Nuevo Usuario"}),r.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})}),r.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",required:!0,value:A.email,onChange:E=>b({...A,email:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"usuario@ejemplo.com",disabled:!!y}),!y&&r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"El usuario debe iniciar sesin con este email en Google"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre *"}),r.jsx("input",{type:"text",required:!0,value:A.nombre,onChange:E=>b({...A,nombre:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Jos"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",required:!0,value:A.apellidoPaterno,onChange:E=>b({...A,apellidoPaterno:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Mendoza"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Materno"}),r.jsx("input",{type:"text",value:A.apellidoMaterno,onChange:E=>b({...A,apellidoMaterno:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Garca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Puesto"}),r.jsx("input",{type:"text",value:A.puesto,onChange:E=>b({...A,puesto:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Docente, Director, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Rol *"}),r.jsxs("select",{required:!0,value:A.rol,onChange:E=>b({...A,rol:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"alumno",children:"Alumno"}),r.jsx("option",{value:"superadmin",children:"Superadmin"})]})]}),A.rol!=="superadmin"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Escuela *"}),r.jsxs("select",{required:A.rol!=="superadmin",value:A.schoolId,onChange:E=>b({...A,schoolId:E.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"",children:"Selecciona una escuela"}),n.map(E=>r.jsxs("option",{value:E.id,children:[E.nombre," (",E.codigo,")"]},E.id))]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:A.activo,onChange:E=>b({...A,activo:E.target.checked}),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Usuario activo"})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:y?"Guardar Cambios":"Crear Usuario"}),r.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors",children:"Cancelar"})]})]})]})})]})},Av=({directorSchoolId:t})=>{const[e,n]=P.useState("alumnos"),[s,a]=P.useState(t||""),[i,o]=P.useState([]),[l,c]=P.useState(null),[d,m]=P.useState(!1),[p,g]=P.useState(null),[x,y]=P.useState(!1);Gc.useEffect(()=>{t||T()},[t]);const T=async()=>{try{const I=(await je(ue(J,"schools"))).docs.map(C=>({id:C.id,nombre:C.data().nombre,codigo:C.data().codigo}));o(I)}catch(_){console.error("Error al cargar escuelas:",_)}},A=()=>{const _=["nombre","apellidoPaterno","apellidoMaterno","matricula","email","grado","grupo","telefono","fechaNacimiento"],I=["Juan,Prez,Garca,2024001,juan.perez@ejemplo.com,1,A,3481234567,2008-05-15","Mara,Lpez,Martnez,2024002,maria.lopez@ejemplo.com,2,B,3481234568,2007-08-20","Carlos,Snchez,Rodrguez,2024003,carlos.sanchez@ejemplo.com,3,A,3481234569,2006-03-10"],C=[_.join(","),...I].join(`
`);N(C,"plantilla_alumnos.csv")},b=()=>{const _=["nombre","apellidoPaterno","apellidoMaterno","email","puesto","telefono","materias","grados"],I=['Ana,Martnez,Lpez,ana.martinez@ejemplo.com,Docente,3481234570,"Matemticas;Fsica","1;2;3"','Pedro,Gonzlez,Hernndez,pedro.gonzalez@ejemplo.com,Director,3481234571,"Administracin",""','Laura,Ramrez,Torres,laura.ramirez@ejemplo.com,Docente,3481234572,"Espaol;Literatura","2;3"'],C=[_.join(","),...I].join(`
`);N(C,"plantilla_maestros.csv")},N=(_,I)=>{const C=new Blob([_],{type:"text/csv;charset=utf-8;"}),E=document.createElement("a"),M=URL.createObjectURL(C);E.setAttribute("href",M),E.setAttribute("download",I),E.style.visibility="hidden",document.body.appendChild(E),E.click(),document.body.removeChild(E)},S=_=>{_.target.files&&_.target.files[0]&&(c(_.target.files[0]),g(null))},D=_=>_.split(`
`).filter(C=>C.trim()).map(C=>{const E=[];let M="",j=!1;for(let G=0;G<C.length;G++){const O=C[G];O==='"'?j=!j:O===","&&!j?(E.push(M.trim()),M=""):M+=O}return E.push(M.trim()),E}),V=async _=>{const I={success:0,errors:0,warnings:0,details:[]},C=_[0].map(M=>M.toLowerCase().trim()),E=_.slice(1);for(let M=0;M<E.length;M++){const j=E[M],G=M+2;try{const O={};if(C.forEach((Y,ne)=>{var de;O[Y]=((de=j[ne])==null?void 0:de.trim())||""}),!O.nombre||!O.apellidopaterno||!O.matricula){I.errors++,I.details.push({row:G,status:"error",message:"Faltan campos obligatorios (nombre, apellidoPaterno, matricula)",data:O});continue}const B=$e(ue(J,"alumnos"),Ze("matricula","==",O.matricula),Ze("schoolId","==",s));if(!(await je(B)).empty){I.warnings++,I.details.push({row:G,status:"warning",message:`Matrcula ${O.matricula} ya existe, se omiti`,data:O});continue}await es(ue(J,"alumnos"),{nombre:O.nombre,apellidoPaterno:O.apellidopaterno,apellidoMaterno:O.apellidomaterno||"",matricula:O.matricula,email:O.email||"",grado:parseInt(O.grado)||1,grupo:O.grupo||"A",telefono:O.telefono||"",fechaNacimiento:O.fechanacimiento||"",schoolId:s,activo:!0,createdAt:new Date().toISOString()}),I.success++,I.details.push({row:G,status:"success",message:`Alumno ${O.nombre} ${O.apellidopaterno} importado correctamente`,data:O})}catch(O){I.errors++,I.details.push({row:G,status:"error",message:`Error: ${O.message}`,data:j})}}return I},k=async _=>{const I={success:0,errors:0,warnings:0,details:[]},C=_[0].map(M=>M.toLowerCase().trim()),E=_.slice(1);for(let M=0;M<E.length;M++){const j=E[M],G=M+2;try{const O={};if(C.forEach((we,tt)=>{var rt;O[we]=((rt=j[tt])==null?void 0:rt.trim())||""}),!O.nombre||!O.apellidopaterno||!O.email){I.errors++,I.details.push({row:G,status:"error",message:"Faltan campos obligatorios (nombre, apellidoPaterno, email)",data:O});continue}const B=$e(ue(J,"users"),Ze("email","==",O.email.toLowerCase()));if(!(await je(B)).empty){I.warnings++,I.details.push({row:G,status:"warning",message:`Email ${O.email} ya existe, se omiti`,data:O});continue}const Y=O.materias?O.materias.split(";").map(we=>we.trim()).filter(Boolean):[],ne=O.grados?O.grados.split(";").map(we=>parseInt(we.trim())).filter(Boolean):[],de=i.find(we=>we.id===s);await es(ue(J,"users"),{email:O.email.toLowerCase(),nombre:O.nombre,apellidoPaterno:O.apellidopaterno,apellidoMaterno:O.apellidomaterno||"",rol:"maestro",schoolId:s,schoolName:(de==null?void 0:de.nombre)||"",puesto:O.puesto||"Docente",telefono:O.telefono||"",materias:Y,grados:ne,activo:!0,onboardingCompleto:!0,createdAt:new Date().toISOString()}),I.success++,I.details.push({row:G,status:"success",message:`Maestro ${O.nombre} ${O.apellidopaterno} importado correctamente`,data:O})}catch(O){I.errors++,I.details.push({row:G,status:"error",message:`Error: ${O.message}`,data:j})}}return I},R=async()=>{if(!l){alert("Por favor selecciona un archivo CSV");return}if(!s){alert("Por favor selecciona una escuela");return}m(!0),g(null);try{const _=await l.text(),I=D(_);if(I.length<2){alert("El archivo CSV est vaco o no tiene datos"),m(!1);return}let C;e==="alumnos"?C=await V(I):C=await k(I),g(C),y(!0)}catch(_){console.error("Error al importar:",_),alert(`Error al procesar el archivo: ${_.message}`)}finally{m(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Lu,{className:"w-7 h-7 text-indigo-600"}),"Importacin Masiva CSV"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Importa alumnos o maestros desde archivos CSV"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"1. Selecciona el Tipo de Importacin"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>n("alumnos"),className:`p-6 rounded-xl border-2 transition-all ${e==="alumnos"?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Je,{className:`w-6 h-6 ${e==="alumnos"?"text-indigo-600":"text-slate-400"}`}),r.jsx("h4",{className:"font-bold text-slate-800",children:"Alumnos"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Importa lista de alumnos con matrcula, grado y grupo"})]}),r.jsxs("button",{onClick:()=>n("maestros"),className:`p-6 rounded-xl border-2 transition-all ${e==="maestros"?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ts,{className:`w-6 h-6 ${e==="maestros"?"text-indigo-600":"text-slate-400"}`}),r.jsx("h4",{className:"font-bold text-slate-800",children:"Maestros"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Importa lista de maestros con materias y grados"})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"2. Descarga la Plantilla CSV"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Descarga la plantilla de ejemplo y llnala con tus datos. Incluye ejemplos para guiarte."}),r.jsxs("button",{onClick:e==="alumnos"?A:b,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors",children:[r.jsx(zh,{className:"w-5 h-5"}),"Descargar Plantilla de ",e==="alumnos"?"Alumnos":"Maestros"]}),r.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-xl",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[r.jsx(Ls,{className:"w-4 h-4"}),"Campos del CSV"]}),e==="alumnos"?r.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"nombre"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoPaterno"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoMaterno"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"matricula"})," (obligatorio, nico)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"email"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grado"})," (1-6)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grupo"})," (A, B, C, etc.)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"telefono"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"fechaNacimiento"})," (YYYY-MM-DD)"]})]}):r.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"nombre"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoPaterno"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoMaterno"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"email"})," (obligatorio, nico)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"puesto"})," (Docente, Coordinador, etc.)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"telefono"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"materias"})," (separadas por ;)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grados"})," (separados por ;)"]})]})]})]}),!t&&r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"3. Selecciona la Escuela"}),r.jsxs("div",{className:"relative",children:[r.jsx(At,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:s,onChange:_=>a(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"",children:"Selecciona una escuela"}),i.map(_=>r.jsxs("option",{value:_.id,children:[_.nombre," (",_.codigo,")"]},_.id))]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"4. Sube tu Archivo CSV"}),r.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-indigo-400 transition-colors",children:[r.jsx("input",{type:"file",accept:".csv",onChange:S,className:"hidden",id:"csv-upload"}),r.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[r.jsx(Lu,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l?r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-slate-800 mb-1",children:l.name}),r.jsx("p",{className:"text-sm text-slate-500",children:"Click para cambiar archivo"})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-slate-800 mb-1",children:"Click para seleccionar archivo CSV"}),r.jsx("p",{className:"text-sm text-slate-500",children:"o arrastra y suelta aqu"})]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:R,disabled:!l||!s||d,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Importando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lu,{className:"w-5 h-5"}),"Importar ",e==="alumnos"?"Alumnos":"Maestros"]})})}),x&&p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Resultado de Importacin"}),r.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Is,{className:"w-5 h-5 text-green-600"}),r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Exitosos"})]}),r.jsx("p",{className:"text-3xl font-bold text-green-900",children:p.success})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ba,{className:"w-5 h-5 text-amber-600"}),r.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Advertencias"})]}),r.jsx("p",{className:"text-3xl font-bold text-amber-900",children:p.warnings})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Vm,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm font-medium text-red-600",children:"Errores"})]}),r.jsx("p",{className:"text-3xl font-bold text-red-900",children:p.errors})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"Detalles de Importacin"}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.details.map((_,I)=>r.jsx("div",{className:`p-3 rounded-lg border ${_.status==="success"?"bg-green-50 border-green-200":_.status==="warning"?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[_.status==="success"&&r.jsx(Is,{className:"w-4 h-4 text-green-600 mt-0.5"}),_.status==="warning"&&r.jsx(ba,{className:"w-4 h-4 text-amber-600 mt-0.5"}),_.status==="error"&&r.jsx(Vm,{className:"w-4 h-4 text-red-600 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm font-medium text-slate-800",children:["Fila ",_.row,": ",_.message]})})]})},I))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:"Cerrar"})})]})]})})]})},Wq=()=>{const{user:t}=ct(),[e,n]=P.useState([]),[s,a]=P.useState(!1),[i,o]=P.useState(""),[l,c]=P.useState(!1),[d,m]=P.useState(!1),[p,g]=P.useState(null),[x,y]=P.useState([]),[T,A]=P.useState(""),[b,N]=P.useState({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"});P.useEffect(()=>{S()},[]),P.useEffect(()=>{T?D():n([])},[T]);const S=async()=>{try{const E=(await je(ue(J,"schools"))).docs.map(M=>({id:M.id,...M.data()}));y(E.sort((M,j)=>M.nombre.localeCompare(j.nombre)))}catch(C){console.error("Error loading schools:",C)}},D=async()=>{if(T){a(!0);try{const C=$e(ue(J,"alumnos"),Ze("schoolId","==",T)),M=(await je(C)).docs.map(j=>({id:j.id,...j.data()}));M.sort((j,G)=>{const O=j.grado||"0",B=G.grado||"0";if(O!==B)return O.localeCompare(B);const te=j.grupo||"A",Y=G.grupo||"A";if(te!==Y)return te.localeCompare(Y);const ne=j.apellidoPaterno||j.lastName||"",de=G.apellidoPaterno||G.lastName||"";return ne.localeCompare(de)}),n(M)}catch(C){console.error("Error loading students:",C)}finally{a(!1)}}},V=C=>{C?(g(C),N({nombre:C.nombre||C.firstName||"",apellidoPaterno:C.apellidoPaterno||C.lastName||"",apellidoMaterno:C.apellidoMaterno||"",curp:C.curp||"",matricula:C.matricula||"",email:C.email||"",grado:C.grado||"",grupo:C.grupo||"",turno:C.turno||"Matutino"})):(g(null),N({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"})),c(!0)},k=async()=>{if(T){if(!b.nombre||!b.grado||!b.grupo){alert("Por favor completa Nombre, Grado y Grupo.");return}try{const C=x.find(M=>M.id===T),E={...b,firstName:b.nombre,lastName:`${b.apellidoPaterno} ${b.apellidoMaterno||""}`.trim(),schoolId:T,schoolName:(C==null?void 0:C.nombre)||"",updatedAt:new Date().toISOString()};if(p!=null&&p.id)await xt(re(J,"alumnos",p.id),E),n(M=>M.map(j=>j.id===p.id?{...j,...E}:j));else{const M=await es(ue(J,"alumnos"),{...E,createdAt:new Date().toISOString()});n(j=>[...j,{id:M.id,...E}])}c(!1)}catch(C){console.error("Error saving student:",C),alert("Error al guardar alumno.")}}},R=async(C,E)=>{if(confirm(`Ests seguro de eliminar al alumno ${E}?`))try{await xs(re(J,"alumnos",C)),n(M=>M.filter(j=>j.id!==C))}catch(M){console.error("Error deleting:",M)}},_=async()=>{if(e.length!==0&&confirm(` ZONA DE PELIGRO 

Ests a punto de ELIMINAR PERMANENTEMENTE a todos los ${e.length} alumnos registrados en esta escuela.

Ests absolutamente seguro?`)){a(!0);try{const C=e.map(E=>xs(re(J,"alumnos",E.id)));await Promise.all(C),n([]),alert(" Se han eliminado todos los alumnos de la escuela.")}catch(C){console.error("Error al borrar todo:",C),alert("Ocurri un error al intentar borrar los registros.")}finally{a(!1)}}},I=e.filter(C=>{const E=i.toLowerCase(),M=`${C.nombre||C.firstName||""} ${C.apellidoPaterno||C.lastName||""} ${C.apellidoMaterno||""}`.toLowerCase(),j=C.curp?C.curp.toLowerCase().includes(E):!1,G=C.matricula?C.matricula.toLowerCase().includes(E):!1,O=C.grupo?C.grupo.toLowerCase().includes(E):!1;return M.includes(E)||j||G||O});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Je,{className:"w-7 h-7 text-indigo-600"}),"Gestin Global de Alumnos"]}),r.jsx("p",{className:"text-slate-600",children:"Administra los alumnos de cualquier escuela registrada"})]}),r.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex items-center gap-2 min-w-[300px]",children:[r.jsx(At,{className:"w-5 h-5 text-slate-400 ml-2"}),r.jsxs("select",{value:T,onChange:C=>A(C.target.value),className:"w-full p-2 bg-transparent border-none focus:ring-0 text-slate-700 font-medium",children:[r.jsx("option",{value:"",children:"-- Selecciona una Escuela --"}),x.map(C=>r.jsx("option",{value:C.id,children:C.nombre},C.id))]})]})]}),T?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[r.jsxs("div",{className:"flex-1 relative max-w-md",children:[r.jsx(Fs,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar alumno...",value:i,onChange:C=>o(C.target.value)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>m(!0),className:"text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-50 border border-slate-200 flex items-center gap-2",children:[r.jsx(Je,{className:"w-4 h-4"}),"Importar"]}),e.length>0&&r.jsxs("button",{onClick:_,className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold border border-red-100 hover:bg-red-100 flex items-center gap-2",children:[r.jsx(ns,{className:"w-4 h-4"}),"Borrar Todos"]}),r.jsxs("button",{onClick:()=>V(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx(On,{className:"w-4 h-4"}),"Nuevo"]})]})]}),s?r.jsx("div",{className:"py-12 flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600 text-xs uppercase font-bold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Alumno"}),r.jsx("th",{className:"p-4",children:"Matrcula"}),r.jsx("th",{className:"p-4",children:"Grado/Grupo"}),r.jsx("th",{className:"p-4 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:I.length>0?I.map(C=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-bold text-slate-900",children:[C.nombre||C.firstName," ",C.apellidoPaterno||C.lastName," ",C.apellidoMaterno]}),r.jsx("div",{className:"text-xs text-slate-500",children:C.email})]}),r.jsx("td",{className:"p-4 text-sm font-mono",children:C.matricula||"---"}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-bold",children:[C.grado,' "',C.grupo,'"']})}),r.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>V(C),className:"p-1 text-slate-400 hover:text-indigo-600",children:r.jsx(xd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>R(C.id,C.nombre||""),className:"p-1 text-slate-400 hover:text-red-600",children:r.jsx(ns,{className:"w-4 h-4"})})]})]},C.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No hay alumnos en esta escuela."})})})]})})]}):r.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-12 text-center",children:[r.jsx("div",{className:"bg-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:r.jsx(At,{className:"w-8 h-8 text-indigo-500"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Selecciona una escuela para comenzar"}),r.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"Para gestionar los alumnos (ver, editar, agregar o importar), primero debes seleccionar la escuela a la que pertenecen."})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b flex justify-between items-center sticky top-0 bg-white",children:[r.jsxs("h3",{className:"text-xl font-bold",children:[p?"Editar":"Nuevo"," Alumno"]}),r.jsx("button",{onClick:()=>c(!1),children:r.jsx(ss,{className:"w-6 h-6 text-slate-400"})})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Nombre",value:b.nombre,onChange:C=>N({...b,nombre:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Apellido Paterno",value:b.apellidoPaterno,onChange:C=>N({...b,apellidoPaterno:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Apellido Materno",value:b.apellidoMaterno,onChange:C=>N({...b,apellidoMaterno:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Matrcula",value:b.matricula,onChange:C=>N({...b,matricula:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Email",value:b.email,onChange:C=>N({...b,email:C.target.value})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:"p-3 border rounded-lg w-1/2",value:b.grado,onChange:C=>N({...b,grado:C.target.value}),children:[r.jsx("option",{value:"",children:"Grado"}),[1,2,3,4,5,6].map(C=>r.jsxs("option",{value:C,children:[C,""]},C))]}),r.jsx("input",{className:"p-3 border rounded-lg w-1/2",placeholder:"Grupo",value:b.grupo,onChange:C=>N({...b,grupo:C.target.value.toUpperCase()}),maxLength:2})]})]}),r.jsxs("div",{className:"p-6 border-t flex justify-end gap-3 rounded-b-2xl bg-slate-50",children:[r.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg",children:"Cancelar"}),r.jsx("button",{onClick:k,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold",children:"Guardar"})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Importacin Masiva"}),r.jsx("button",{onClick:()=>{m(!1),D()},children:r.jsx(ss,{className:"w-6 h-6 text-slate-400"})})]}),r.jsx("div",{className:"p-8",children:r.jsx(Av,{directorSchoolId:T})})]})})]})},Zq=()=>{const t=bs(),{logout:e,user:n}=ct(),[s,a]=P.useState("overview"),i=async()=>{try{await e(),t("/login")}catch(l){console.error("Error al cerrar sesin:",l)}},o=[{id:"overview",label:"Vista General",icon:AI},{id:"schools",label:"Escuelas",icon:At},{id:"users",label:"Usuarios",icon:Je},{id:"students",label:"Alumnos",icon:ts},{id:"data",label:"Base de Datos",icon:UE},{id:"import",label:"Importar CSV",icon:Lu}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(ts,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"EduPlan MX"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[n&&r.jsxs("div",{className:"text-right mr-4",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[n.nombre," ",n.apellidoPaterno]}),r.jsx("p",{className:"text-xs text-slate-500",children:n.email})]}),r.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors font-medium",title:"Cerrar sesin",children:[r.jsx(Fh,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Cerrar Sesin"})]})]})]})})}),r.jsx("div",{className:"bg-white border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-8",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto",children:o.map(l=>{const c=l.icon,d=s===l.id;return r.jsxs("button",{onClick:()=>a(l.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${d?"border-indigo-600 text-indigo-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:[r.jsx(c,{className:"w-5 h-5"}),l.label]},l.id)})})})}),r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[s==="overview"&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard Super Admin"}),r.jsx("p",{className:"text-slate-600 mb-8",children:"Vista general del sistema EduPlan MX"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.slice(1).map(l=>{const c=l.icon;return r.jsxs("button",{onClick:()=>a(l.id),className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 hover:shadow-lg transition-all text-left group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:r.jsx(c,{className:"w-6 h-6 text-indigo-600"})})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:l.label}),r.jsxs("p",{className:"text-sm text-slate-500",children:[l.id==="schools"&&"Administra todas las escuelas del sistema",l.id==="users"&&"Gestiona usuarios y sus roles",l.id==="data"&&"Consulta y exporta datos",l.id==="import"&&"Importa datos masivos desde CSV"]})]},l.id)})}),r.jsxs("div",{className:"mt-8 bg-indigo-50 border border-indigo-200 rounded-2xl p-6",children:[r.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:" Panel de Administracin Completo"}),r.jsx("p",{className:"text-indigo-800 text-sm",children:"Desde aqu puedes administrar todo el sistema EduPlan MX. Selecciona una seccin del men superior para comenzar."})]})]}),s==="schools"&&r.jsx(Qq,{}),s==="users"&&r.jsx(Xq,{}),s==="students"&&r.jsx(Wq,{}),s==="data"&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx(UE,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Base de Datos"}),r.jsx("p",{className:"text-slate-600",children:"En desarrollo... (Fase 4)"})]}),s==="import"&&r.jsx(Av,{})]})})]})},eH={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600"},cu=({title:t,value:e,icon:n,color:s,subtitle:a})=>r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-3 rounded-xl ${eH[s]}`,children:r.jsx(n,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-3xl font-bold text-slate-800",children:e}),r.jsx("div",{className:"text-sm text-slate-600 font-medium",children:t}),a&&r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:a})]})]})}),tH=()=>{var S,D,V,k,R;const t=bs(),{user:e,logout:n}=ct(),[s,a]=P.useState({maestros:0,alumnos:0,planeaciones:0,grupos:0}),[i,o]=P.useState("general"),[l,c]=P.useState(!0),[d,m]=P.useState(!1),[p,g]=P.useState(null);P.useEffect(()=>{e!=null&&e.schoolId&&x()},[e==null?void 0:e.schoolId]);const x=async()=>{if(e!=null&&e.schoolId)try{c(!0);const _=$e(ue(J,"users"),Ze("schoolId","==",e.schoolId),Ze("rol","==","maestro")),I=await je(_),C=$e(ue(J,"alumnos"),Ze("schoolId","==",e.schoolId)),E=await je(C),M=$e(ue(J,"planeaciones"),Ze("schoolId","==",e.schoolId)),j=await je(M),G=new Set;E.docs.forEach(O=>{const B=O.data();B.grado&&B.grupo&&G.add(`${B.grado}-${B.grupo}`)}),a({maestros:I.size,alumnos:E.size,planeaciones:j.size,grupos:G.size})}catch(_){console.error("Error al cargar estadsticas:",_)}finally{c(!1)}},y=async()=>{try{await n(),t("/login")}catch(_){console.error("Error al cerrar sesin:",_)}},T=async()=>{try{const _=$e(ue(J,"alumnos"),oo(1)),I=await je(_);I.empty?g({message:"No students found at all in DB"}):g({id:I.docs[0].id,data:I.docs[0].data(),mySchoolId:e==null?void 0:e.schoolId,match:I.docs[0].data().schoolId===(e==null?void 0:e.schoolId)?"YES":"NO"})}catch(_){console.error(_),g({error:JSON.stringify(_)})}},[A,b]=P.useState(""),N=async()=>{if(!(!(e!=null&&e.schoolId)||!(e!=null&&e.schoolName))&&confirm(` ACCIN CRTICA 

Ests seguro de asignar TODOS los alumnos existentes en la base de datos a TU escuela actual?

Escuela: ${e.schoolName}
ID: ${e.schoolId}

Esto mover a todos los alumnos hurfanos a tu panel. Solo haz esto si ests seguro de que, en este sistema, T eres la nica escuela activa.`)){b(" Migrando alumnos, por favor espera...");try{const _=$e(ue(J,"alumnos")),I=await je(_);let C=0;const E=I.docs.map(async M=>{if(M.data().schoolId!==e.schoolId)return C++,xt(re(J,"alumnos",M.id),{schoolId:e.schoolId,schoolName:e.schoolName})});await Promise.all(E),b(` xito! Se han asociado ${C} alumnos a tu escuela.`),x(),T()}catch(_){console.error(_),b(` Error migrando: ${_}`)}}};return l?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando informacin de tu escuela..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(Lm,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:(e==null?void 0:e.schoolName)||"Mi Escuela"}),r.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Panel Directivo"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"hidden md:block text-right mr-2",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[e==null?void 0:e.nombre," ",e==null?void 0:e.apellidoPaterno]}),r.jsx("p",{className:"text-xs text-slate-500",children:e==null?void 0:e.email})]}),r.jsx("button",{onClick:()=>{m(!d),T()},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Diagnstico de Datos",children:r.jsx(kE,{className:"w-5 h-5"})}),r.jsx("button",{onClick:y,className:"p-2 text-slate-400 hover:text-red-500 transition-colors rounded-lg hover:bg-red-50",title:"Cerrar sesin",children:r.jsx(Fh,{className:"w-5 h-5"})})]})]})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"flex border-b border-slate-200 mb-8 overflow-x-auto",children:[r.jsx("button",{onClick:()=>o("general"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="general"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Vista General"}),r.jsx("button",{onClick:()=>o("pmc"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="pmc"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Diagnstico (PMC)"}),r.jsx("button",{onClick:()=>o("paec"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="paec"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Programa Aula Escuela Comunidad (PAEC)"})]}),i==="general"&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(cu,{title:"Maestros",value:s.maestros,icon:ts,color:"blue",subtitle:"Docentes registrados"}),r.jsx(cu,{title:"Alumnos",value:s.alumnos,icon:Je,color:"green",subtitle:"Estudiantes activos"}),r.jsx(cu,{title:"Planeaciones",value:s.planeaciones,icon:Ls,color:"purple",subtitle:"Documentos creados"}),r.jsx(cu,{title:"Grupos",value:s.grupos,icon:Je,color:"orange",subtitle:"Grupos activos"})]}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Gestin Escolar"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("button",{onClick:()=>t("/directivo/maestros"),className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(ts,{className:"w-6 h-6 text-blue-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Maestros"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Administrar plantilla docente y asignaciones"})]}),r.jsxs("button",{onClick:()=>t("/directivo/alumnos"),className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-green-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(Je,{className:"w-6 h-6 text-green-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Alumnos"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Lista de estudiantes y grupos"})]}),r.jsxs("button",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-purple-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(ms,{className:"w-6 h-6 text-purple-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Reportes"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Estadsticas de aprovechamiento y entregas"})]})]})]}),i==="pmc"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsx(U1,{})}),i==="paec"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsx(O1,{})}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-2xl p-6 flex items-start gap-4",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-full flex-shrink-0",children:r.jsx(Oh,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-blue-900 font-bold mb-1",children:"Panel de Director Activo"}),r.jsxs("p",{className:"text-blue-700 text-sm",children:["Bienvenido al panel de direccin. Desde aqu podrs gestionar toda la informacin de",r.jsxs("span",{className:"font-semibold",children:[" ",e==null?void 0:e.schoolName]}),". Prximamente se habilitarn ms funciones de reportes avanzados."]})]})]})]}),r.jsx("button",{onClick:()=>{m(!d),T()},className:"fixed bottom-4 right-4 bg-slate-800 text-white p-3 rounded-full shadow-lg hover:bg-slate-700 transition-colors z-50 origin-center hover:scale-110",title:"Herramienta de Diagnstico",children:r.jsx(kE,{className:"w-5 h-5"})}),d&&r.jsxs("div",{className:"fixed bottom-20 right-4 bg-white p-6 shadow-2xl border border-slate-200 rounded-2xl max-w-md z-50 text-xs font-mono overflow-auto max-h-[80vh] w-full animate-in slide-in-from-bottom-5",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[r.jsx("h4",{className:"font-bold text-sm text-slate-800",children:"Diagnstico de Datos"}),r.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-red-500",children:"cerrar"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[r.jsx("h5",{className:"font-bold text-slate-600 mb-1",children:"Mi Usuario (Director)"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nombre:"})," ",e==null?void 0:e.nombre]}),r.jsxs("p",{children:[r.jsx("strong",{children:"School Name:"})," ",e==null?void 0:e.schoolName]}),r.jsxs("p",{className:"text-blue-600 break-all",children:[r.jsx("strong",{children:"School ID (Firestore):"})," ",e==null?void 0:e.schoolId]})]}),r.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[r.jsx("h5",{className:"font-bold text-slate-600 mb-1",children:"Estadsticas Actuales"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Alumnos (filtrados por ID):"})," ",s.alumnos]})]}),p&&r.jsxs("div",{className:"bg-indigo-50 p-3 rounded border border-indigo-100",children:[r.jsx("h5",{className:"font-bold text-indigo-800 mb-1",children:"Muestra de Alumno (Cualquiera en DB)"}),p.message?r.jsx("p",{children:p.message}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"ID Alumno:"})," ",p.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nombre:"})," ",((S=p.data)==null?void 0:S.nombre)||((D=p.data)==null?void 0:D.firstName)," ",((V=p.data)==null?void 0:V.apellidoPaterno)||((k=p.data)==null?void 0:k.lastName)]}),r.jsxs("p",{className:"text-red-600 break-all text-xs",children:[r.jsx("strong",{children:"School ID Actual:"})," ",(R=p.data)==null?void 0:R.schoolId]}),r.jsxs("div",{className:`mt-2 p-2 rounded text-center font-bold text-white text-xs ${p.match==="YES"?"bg-green-500":"bg-red-500"}`,children:["Coincide ID? ",p.match]})]})]}),r.jsx("div",{className:"text-slate-500 italic text-[10px] mt-2",children:"*Si el ID no coincide, contacta a soporte para migracin de datos."}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[r.jsx("h5",{className:"font-bold text-red-600 mb-2",children:" Zona de Peligro / Reparacin"}),r.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Si ves 0 alumnos pero sabes que existen, usa este botn para adoptarlos a tu escuela."}),A&&r.jsx("div",{className:`mb-3 p-2 rounded text-xs font-bold ${A.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:A}),r.jsxs("button",{onClick:N,className:"w-full bg-red-50 text-red-600 border border-red-200 py-2 rounded font-bold hover:bg-red-100 transition-colors",children:[" Asociar TODOS los alumnos a M (",e==null?void 0:e.schoolName,")"]})]})]})]})]})},nH=()=>{const t=bs(),{user:e}=ct(),[n,s]=P.useState([]),[a,i]=P.useState(!0),[o,l]=P.useState(""),[c,d]=P.useState(!1),[m,p]=P.useState(!1),[g,x]=P.useState(null),[y,T]=P.useState({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"});P.useEffect(()=>{e!=null&&e.schoolId&&A()},[e==null?void 0:e.schoolId]);const A=async()=>{if(e!=null&&e.schoolId){i(!0);try{const k=$e(ue(J,"alumnos"),Ze("schoolId","==",e.schoolId)),_=(await je(k)).docs.map(I=>({id:I.id,...I.data()}));_.sort((I,C)=>{const E=I.grado||"0",M=C.grado||"0";if(E!==M)return E.localeCompare(M);const j=I.grupo||"A",G=C.grupo||"A";if(j!==G)return j.localeCompare(G);const O=I.apellidoPaterno||I.lastName||"",B=C.apellidoPaterno||C.lastName||"";return O.localeCompare(B)}),s(_)}catch(k){console.error("Error loading students:",k)}finally{i(!1)}}},b=k=>{k?(x(k),T({nombre:k.nombre||k.firstName||"",apellidoPaterno:k.apellidoPaterno||k.lastName||"",apellidoMaterno:k.apellidoMaterno||"",curp:k.curp||"",matricula:k.matricula||"",email:k.email||"",grado:k.grado||"",grupo:k.grupo||"",turno:k.turno||"Matutino"})):(x(null),T({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"})),d(!0)},N=async()=>{if(e!=null&&e.schoolId){if(!y.nombre||!y.grado||!y.grupo){alert("Por favor completa Nombre, Grado y Grupo.");return}try{const k={...y,firstName:y.nombre,lastName:`${y.apellidoPaterno} ${y.apellidoMaterno||""}`.trim(),schoolId:e.schoolId,schoolName:e.schoolName,updatedAt:new Date().toISOString()};if(g!=null&&g.id)await xt(re(J,"alumnos",g.id),k),s(R=>R.map(_=>_.id===g.id?{..._,...k}:_));else{const R=await es(ue(J,"alumnos"),{...k,createdAt:new Date().toISOString()});s(_=>[..._,{id:R.id,...k}])}d(!1)}catch(k){console.error("Error saving student:",k),alert("Error al guardar alumno.")}}},S=async(k,R)=>{if(confirm(`Ests seguro de eliminar al alumno ${R}?`))try{await xs(re(J,"alumnos",k)),s(_=>_.filter(I=>I.id!==k))}catch(_){console.error("Error deleting:",_)}},D=async()=>{if(n.length!==0&&confirm(` ZONA DE PELIGRO 

Ests a punto de ELIMINAR PERMANENTEMENTE a todos los ${n.length} alumnos registrados en esta escuela.

Ests absolutamente seguro?`)&&confirm(`LTIMA ADVERTENCIA:

Esta accin NO se puede deshacer. Se borrarn todos los datos, calificaciones y asistencias asociadas a estos alumnos.

Proceder con la eliminacin total?`)){i(!0);try{const k=n.map(R=>xs(re(J,"alumnos",R.id)));await Promise.all(k),s([]),alert(" Se han eliminado todos los alumnos de la escuela.")}catch(k){console.error("Error al borrar todo:",k),alert("Ocurri un error al intentar borrar los registros.")}finally{i(!1)}}},V=n.filter(k=>{const R=o.toLowerCase(),_=`${k.nombre||k.firstName||""} ${k.apellidoPaterno||k.lastName||""} ${k.apellidoMaterno||""}`.toLowerCase(),I=k.curp?k.curp.toLowerCase().includes(R):!1,C=k.matricula?k.matricula.toLowerCase().includes(R):!1,E=k.email?k.email.toLowerCase().includes(R):!1,M=k.grupo?k.grupo.toLowerCase().includes(R):!1;return _.includes(R)||I||C||E||M});return r.jsxs("div",{className:"min-h-screen bg-slate-50",children:[r.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/directivo/dashboard"),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(gd,{className:"w-5 h-5 text-slate-500"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Je,{className:"w-6 h-6 text-indigo-600"}),"Gestin de Alumnos"]}),r.jsxs("p",{className:"text-sm text-slate-500",children:[n.length," estudiantes registrados en ",e==null?void 0:e.schoolName]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>p(!0),className:"text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-100 flex items-center gap-2 border border-slate-200",children:[r.jsx(Je,{className:"w-4 h-4"}),"Importar Excel/CSV"]}),n.length>0&&r.jsxs("button",{onClick:D,className:"text-red-500 hover:text-red-700 px-4 py-2 rounded-lg font-bold hover:bg-red-50 flex items-center gap-2 border border-transparent hover:border-red-100 transition-all",title:"Eliminar a todos los alumnos mostrados",children:[r.jsx(ns,{className:"w-4 h-4"}),"Borrar Todos"]}),r.jsxs("button",{onClick:()=>b(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-indigo-700 flex items-center gap-2 shadow-sm shadow-indigo-200",children:[r.jsx(On,{className:"w-4 h-4"}),"Nuevo Alumno"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-6 flex gap-4",children:r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Fs,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Buscar por nombre, matrcula, CURP...",value:o,onChange:k=>l(k.target.value)})]})}),a?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 text-slate-600 text-xs font-bold uppercase tracking-wider",children:[r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Alumno"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Matrcula / CURP"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Grado/Grupo"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Turno"}),r.jsx("th",{className:"p-4 border-b border-slate-200 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:V.length>0?V.map(k=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-bold text-slate-900",children:[k.nombre||k.firstName," ",k.apellidoPaterno||k.lastName," ",k.apellidoMaterno||""]}),r.jsx("div",{className:"text-xs text-slate-500",children:k.email})]}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"text-sm font-mono text-slate-800",children:k.matricula||"S/M"}),r.jsx("div",{className:"text-xs text-slate-400",children:k.curp||""})]}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[k.grado||"?",' "',k.grupo||"?",'"']})}),r.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.turno||"N/A"}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>b(k),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"Editar",children:r.jsx(xd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>S(k.id,`${k.nombre||k.firstName} ${k.apellidoPaterno||k.lastName}`),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})})]},k.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No se encontraron alumnos."})})})]})}),r.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 text-xs text-slate-500 flex justify-between",children:r.jsxs("span",{children:["Mostrando ",V.length," de ",n.length," registros"]})})]})]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:g?"Editar Alumno":"Registrar Nuevo Alumno"}),r.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600",children:r.jsx(ss,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Nombre(s) *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.nombre,onChange:k=>T({...y,nombre:k.target.value}),placeholder:"Ej. Juan Pablo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.apellidoPaterno,onChange:k=>T({...y,apellidoPaterno:k.target.value}),placeholder:"Ej. Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Apellido Materno"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.apellidoMaterno,onChange:k=>T({...y,apellidoMaterno:k.target.value}),placeholder:"Ej. Lpez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Matrcula"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.matricula,onChange:k=>T({...y,matricula:k.target.value}),placeholder:"Opcional"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"CURP"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 uppercase",value:y.curp,onChange:k=>T({...y,curp:k.target.value.toUpperCase()}),placeholder:"Opcional",maxLength:18})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Correo Electrnico"}),r.jsx("input",{type:"email",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.email,onChange:k=>T({...y,email:k.target.value}),placeholder:"ejemplo@escuela.mx"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Grado *"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl bg-white",value:y.grado,onChange:k=>T({...y,grado:k.target.value}),children:[r.jsx("option",{value:"",children:"Selecciona"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"6",children:"6"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Grupo *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl uppercase text-center",value:y.grupo,onChange:k=>T({...y,grupo:k.target.value.toUpperCase()}),placeholder:"A",maxLength:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Turno"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl bg-white",value:y.turno,onChange:k=>T({...y,turno:k.target.value}),children:[r.jsx("option",{value:"Matutino",children:"Matutino"}),r.jsx("option",{value:"Vespertino",children:"Vespertino"}),r.jsx("option",{value:"Completo",children:"Completo"}),r.jsx("option",{value:"",children:"N/A"})]})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3 bg-slate-50 rounded-b-2xl",children:[r.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),r.jsxs("button",{onClick:N,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-colors flex items-center gap-2",children:[r.jsx(Ri,{className:"w-4 h-4"}),"Guardar Alumno"]})]})]})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Importacin Masiva de Alumnos"}),r.jsx("button",{onClick:()=>{p(!1),A()},className:"text-slate-400 hover:text-slate-600",children:r.jsx(ss,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"p-8",children:r.jsx(Av,{directorSchoolId:e==null?void 0:e.schoolId})})]})})]})},Da="usuarios";class sH{async obtenerTodos(){try{const e=ue(J,Da),n=$e(e,Ds("fechaCreacion","desc"));return(await je(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error al obtener usuarios:",e),new Error("Error al obtener usuarios")}}async obtenerPorRol(e){try{const n=ue(J,Da),s=$e(n,Ze("rol","==",e),Ds("fechaCreacion","desc"));return(await je(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener usuarios por rol:",n),new Error("Error al obtener usuarios por rol")}}async obtenerPorInstitucion(e){try{const n=ue(J,Da),s=$e(n,Ze("institucionId","==",e),Ds("fechaCreacion","desc"));return(await je(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener usuarios por institucin:",n),new Error("Error al obtener usuarios por institucin")}}async obtenerPorId(e){try{const n=await kn(re(J,Da,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error al obtener usuario:",n),new Error("Error al obtener usuario")}}async cambiarRol(e,n){try{await xt(re(J,Da,e),{rol:n})}catch(s){throw console.error("Error al cambiar rol:",s),new Error("Error al cambiar rol")}}async actualizar(e,n){try{await xt(re(J,Da,e),n)}catch(s){throw console.error("Error al actualizar usuario:",s),new Error("Error al actualizar usuario")}}async cambiarEstado(e,n){try{await xt(re(J,Da,e),{activo:n})}catch(s){throw console.error("Error al cambiar estado:",s),new Error("Error al cambiar estado")}}async eliminar(e){try{await xs(re(J,Da,e))}catch(n){throw console.error("Error al eliminar usuario:",n),new Error("Error al eliminar usuario")}}async obtenerEstadisticas(){try{const e=await this.obtenerTodos();return{total:e.length,activos:e.filter(n=>n.activo).length,inactivos:e.filter(n=>!n.activo).length,porRol:{superadmin:e.filter(n=>n.rol==="superadmin").length,directivo:e.filter(n=>n.rol==="directivo").length,maestro:e.filter(n=>n.rol==="maestro").length,alumno:e.filter(n=>n.rol==="alumno").length}}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("Error al obtener estadsticas")}}}const Fc=new sH,aH=({usuario:t,onCerrar:e,onCambiado:n})=>{var d;const[s,a]=P.useState(t.rol),[i,o]=P.useState(!1),l=[{value:"superadmin",label:"Super Administrador",description:"Control total del sistema",color:"border-red-300 bg-red-50"},{value:"directivo",label:"Directivo",description:"Gestin de institucin",color:"border-blue-300 bg-blue-50"},{value:"maestro",label:"Maestro",description:"Gestin de grupos y alumnos",color:"border-green-300 bg-green-50"},{value:"alumno",label:"Alumno",description:"Acceso a su perfil",color:"border-purple-300 bg-purple-50"}],c=async()=>{var p;if(s===t.rol){e();return}if(window.confirm(`Ests seguro de cambiar el rol de ${t.nombre} ${t.apellidoPaterno} a ${(p=l.find(g=>g.value===s))==null?void 0:p.label}?`))try{o(!0),await Fc.cambiarRol(t.id,s),n()}catch(g){console.error("Error al cambiar rol:",g),alert("Error al cambiar rol")}finally{o(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(qh,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Cambiar Rol"}),r.jsxs("p",{className:"text-sm text-slate-600",children:[t.nombre," ",t.apellidoPaterno]})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6 text-slate-600"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3",children:[r.jsx(ba,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Importante:"}),r.jsx("p",{children:"Cambiar el rol afectar los permisos y el acceso del usuario al sistema."})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol Actual"}),r.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:r.jsx("span",{className:"text-lg font-semibold text-slate-900",children:(d=l.find(m=>m.value===t.rol))==null?void 0:d.label})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Nuevo Rol"}),r.jsx("div",{className:"space-y-3",children:l.map(m=>r.jsx("button",{onClick:()=>a(m.value),className:`w-full p-4 border-2 rounded-xl text-left transition-all ${s===m.value?`${m.color} border-opacity-100`:"border-slate-200 bg-white hover:bg-slate-50"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:m.label}),r.jsx("div",{className:"text-sm text-slate-600",children:m.description})]}),s===m.value&&r.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},m.value))})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[r.jsx("button",{onClick:e,disabled:i,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancelar"}),r.jsx("button",{onClick:c,disabled:i||s===t.rol,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando..."]}):"Cambiar Rol"})]})]})})},iH=({usuarios:t,onEditar:e,onActualizar:n,currentUserId:s})=>{const[a,i]=P.useState(null),[o,l]=P.useState(null),c=y=>({superadmin:"bg-red-100 text-red-800 border-red-200",directivo:"bg-blue-100 text-blue-800 border-blue-200",maestro:"bg-green-100 text-green-800 border-green-200",alumno:"bg-purple-100 text-purple-800 border-purple-200"})[y]||"bg-gray-100 text-gray-800 border-gray-200",d=y=>({superadmin:"Super Admin",directivo:"Directivo",maestro:"Maestro",alumno:"Alumno"})[y]||y,m=async y=>{if(y.id===s){alert("No puedes desactivar tu propia cuenta");return}if(window.confirm(`Ests seguro de ${y.activo?"desactivar":"activar"} a ${y.nombre} ${y.apellidoPaterno}?`))try{l(y.id),await Fc.cambiarEstado(y.id,!y.activo),n()}catch(A){console.error("Error al cambiar estado:",A),alert("Error al cambiar estado del usuario")}finally{l(null)}},p=async y=>{if(y.id===s){alert("No puedes eliminar tu propia cuenta");return}if(window.confirm(`Ests seguro de eliminar a ${y.nombre} ${y.apellidoPaterno}?

Esta accin no se puede deshacer.`))try{l(y.id),await Fc.eliminar(y.id),n()}catch(A){console.error("Error al eliminar usuario:",A),alert("Error al eliminar usuario")}finally{l(null)}},g=y=>{if(y.id===s){alert("No puedes cambiar tu propio rol");return}i(y)},x=()=>{i(null),n()};return t.length===0?r.jsx("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:r.jsx("p",{className:"text-slate-600",children:"No se encontraron usuarios"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"ltimo Acceso"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:[y.nombre.charAt(0),y.apellidoPaterno.charAt(0)]}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-slate-900",children:[y.nombre," ",y.apellidoPaterno]}),y.id===s&&r.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"(T)"})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:y.email}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("button",{onClick:()=>g(y),disabled:y.id===s||o===y.id,className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${c(y.rol)} hover:opacity-80 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,children:[r.jsx(qh,{className:"w-3 h-3"}),d(y.rol)]})}),r.jsx("td",{className:"px-6 py-4",children:y.activo?r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Activo"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold",children:[r.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),"Inactivo"]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(y.ultimoAcceso).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>e(y),disabled:o===y.id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Editar",children:r.jsx(jI,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>m(y),disabled:y.id===s||o===y.id,className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors disabled:opacity-50",title:y.activo?"Desactivar":"Activar",children:y.activo?r.jsx(vO,{className:"w-4 h-4"}):r.jsx(bO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(y),disabled:y.id===s||o===y.id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})})]},y.id))})]})})}),a&&r.jsx(aH,{usuario:a,onCerrar:()=>i(null),onCambiado:x})]})},rH=({usuario:t,onCerrar:e,onGuardado:n})=>{const{user:s}=ct(),a=!!t,[i,o]=P.useState({email:(t==null?void 0:t.email)||"",nombre:(t==null?void 0:t.nombre)||"",apellidoPaterno:(t==null?void 0:t.apellidoPaterno)||"",apellidoMaterno:(t==null?void 0:t.apellidoMaterno)||"",rol:(t==null?void 0:t.rol)||"maestro",password:"",confirmarPassword:""}),[l,c]=P.useState(!1),[d,m]=P.useState(""),p=y=>{o({...i,[y.target.name]:y.target.value}),m("")},g=()=>{if(!i.email||!i.nombre||!i.apellidoPaterno)return m("Por favor completa todos los campos obligatorios"),!1;if(!a){if(!i.password)return m("La contrasea es obligatoria"),!1;if(i.password.length<6)return m("La contrasea debe tener al menos 6 caracteres"),!1;if(i.password!==i.confirmarPassword)return m("Las contraseas no coinciden"),!1}return!0},x=async()=>{if(g())try{if(c(!0),a)await Fc.actualizar(t.id,{nombre:i.nombre,apellidoPaterno:i.apellidoPaterno,apellidoMaterno:i.apellidoMaterno,email:i.email});else{const y={email:i.email,password:i.password,nombre:i.nombre,apellidoPaterno:i.apellidoPaterno,apellidoMaterno:i.apellidoMaterno,rol:i.rol};await Pr.register(y,(s==null?void 0:s.id)||"system")}n()}catch(y){console.error("Error al guardar usuario:",y),m(y.message||"Error al guardar usuario")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(ko,{className:"w-6 h-6 text-indigo-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:a?"Editar Usuario":"Crear Nuevo Usuario"})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6 text-slate-600"})})]}),r.jsxs("div",{className:"p-6",children:[d&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(ba,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-800",children:d})]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"email",name:"email",type:"email",value:i.email,onChange:p,disabled:a,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-slate-100 disabled:cursor-not-allowed",placeholder:"usuario@ejemplo.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre *"}),r.jsx("input",{id:"nombre",name:"nombre",type:"text",value:i.nombre,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Juan"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apellidoPaterno",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Apellido Paterno *"}),r.jsx("input",{id:"apellidoPaterno",name:"apellidoPaterno",type:"text",value:i.apellidoPaterno,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apellidoMaterno",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Apellido Materno"}),r.jsx("input",{id:"apellidoMaterno",name:"apellidoMaterno",type:"text",value:i.apellidoMaterno,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Garca"})]})]}),!a&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rol",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol *"}),r.jsxs("div",{className:"relative",children:[r.jsx(qh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{id:"rol",name:"rol",value:i.rol,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"superadmin",children:"Super Administrador"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]})]}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"password",name:"password",type:"password",value:i.password,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Mnimo 6 caracteres"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmarPassword",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Confirmar Contrasea *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"confirmarPassword",name:"confirmarPassword",type:"password",value:i.confirmarPassword,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Repite la contrasea"})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[r.jsx("button",{onClick:e,disabled:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancelar"}),r.jsx("button",{onClick:x,disabled:l,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando..."]}):a?"Guardar Cambios":"Crear Usuario"})]})]})})},oH=()=>{const{user:t}=ct(),[e,n]=P.useState([]),[s,a]=P.useState([]),[i,o]=P.useState(!0),[l,c]=P.useState(!1),[d,m]=P.useState(null),[p,g]=P.useState(""),[x,y]=P.useState("todos"),[T,A]=P.useState("todos");P.useEffect(()=>{b()},[]),P.useEffect(()=>{N()},[e,p,x,T]);const b=async()=>{try{o(!0);const R=await Fc.obtenerTodos();n(R)}catch(R){console.error("Error al cargar usuarios:",R),alert("Error al cargar usuarios")}finally{o(!1)}},N=()=>{let R=[...e];if(p){const _=p.toLowerCase();R=R.filter(I=>I.nombre.toLowerCase().includes(_)||I.apellidoPaterno.toLowerCase().includes(_)||I.email.toLowerCase().includes(_))}x!=="todos"&&(R=R.filter(_=>_.rol===x)),T==="activos"?R=R.filter(_=>_.activo):T==="inactivos"&&(R=R.filter(_=>!_.activo)),a(R)},S=()=>{m(null),c(!0)},D=R=>{m(R),c(!0)},V=()=>{c(!1),m(null)},k=()=>{c(!1),m(null),b()};return i?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando usuarios..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Gestin de Usuarios"}),r.jsx("p",{className:"text-slate-600",children:"Administra usuarios, roles y permisos del sistema"})]}),r.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors shadow-lg",children:[r.jsx(On,{className:"w-5 h-5"}),"Crear Usuario"]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:p,onChange:R=>g(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Oc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:x,onChange:R=>y(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"todos",children:"Todos los roles"}),r.jsx("option",{value:"superadmin",children:"Super Admin"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Oc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:T,onChange:R=>A(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"activos",children:"Activos"}),r.jsx("option",{value:"inactivos",children:"Inactivos"})]})]})]}),r.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Mostrando ",r.jsx("span",{className:"font-semibold text-slate-900",children:s.length})," de ",r.jsx("span",{className:"font-semibold text-slate-900",children:e.length})," usuarios"]})]}),r.jsx(iH,{usuarios:s,onEditar:D,onActualizar:b,currentUserId:(t==null?void 0:t.id)||""}),l&&r.jsx(rH,{usuario:d,onCerrar:V,onGuardado:k})]})})},lH=()=>{const t=bs(),[e,n]=P.useState([]),[s,a]=P.useState(!0);P.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);let d=[];try{d=(await wv.obtenerTodas()).filter(T=>T.activa)}catch(y){console.error("Error cargando materias DB:",y)}let m=[];const p=Rn.obtenerEstadisticas();p.totalProgramas>0?p.materiasDisponibles.forEach(y=>{m.push(...Rn.buscarPorMateria(y))}):(console.warn("Servicio vaco, usando Fallback JSON directo"),m=MI);const g=[];m.forEach(y=>{var A,b,N,S,D,V,k,R;if(!d.some(_=>_.nombre.toLowerCase().trim()===y.materia.toLowerCase().trim()&&_.grado===y.semestre))try{const _={id:`sep-${String(y.materia).replace(/\s+/g,"-")}-${y.semestre}`,nombre:y.materia,clave:`SEP-${y.semestre}${String(y.materia).substring(0,3).toUpperCase()}`,grado:y.semestre,categoria:((b=(A=y.organizador_curricular)==null?void 0:A.categorias)==null?void 0:b[0])||"Unidad de Aprendizaje",horasSemanales:((N=y.metadata)==null?void 0:N.horas_semanales)||4,totalHoras:(((S=y.metadata)==null?void 0:S.horas_semanales)||4)*16,proposito:((V=(D=y.organizador_curricular)==null?void 0:D.propositos_formativos)==null?void 0:V[0])||`Programa oficial del MCCEMS para ${y.materia}.`,competencias:((k=y.organizador_curricular)==null?void 0:k.metas_aprendizaje)||[],ejesFormativos:((R=y.organizador_curricular)==null?void 0:R.categorias)||[],unidades:y.unidades||[],bibliografiaBasica:y.bibliografia||[],bibliografiaComplementaria:[],recursosDigitales:[],criteriosEvaluacion:(y.criterios_evaluacion||[]).map(I=>({aspecto:I.aspecto,descripcion:I.descripcion,porcentaje:I.porcentaje})),instrumentosEvaluacion:[],activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:"SEP-OFFICIAL"};g.push(_)}catch(_){console.error("Error adaptando programa:",y.materia,_)}});const x=[...d,...g].sort((y,T)=>{const A=Number(y.grado)||0,b=Number(T.grado)||0;return A!==b?A-b:y.nombre.localeCompare(T.nombre)});x.length===0&&console.error("No se encontraron materias ni en DB ni en Oficiales"),n(x)}catch(d){console.error("Error crtico al cargar materias:",d)}finally{a(!1)}},o=d=>d.toLowerCase().includes("matemticas")?"":d.toLowerCase().includes("espaol")?"":d.toLowerCase().includes("qumica")?"":d.toLowerCase().includes("historia")?"":d.toLowerCase().includes("ingls")?"":"",l=d=>d.toLowerCase().includes("matemticas")?"from-blue-500 to-indigo-600":d.toLowerCase().includes("espaol")?"from-green-500 to-emerald-600":d.toLowerCase().includes("qumica")?"from-purple-500 to-violet-600":d.toLowerCase().includes("historia")?"from-orange-500 to-red-600":d.toLowerCase().includes("ingls")?"from-cyan-500 to-blue-600":"from-slate-500 to-slate-600",c=d=>{d!=="guia-curricular"&&t("/maestro/dashboard",{state:{view:d}})};return s?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(uo,{activeView:"guia-curricular",onNavigate:c}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando materias..."})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(uo,{activeView:"guia-curricular",onNavigate:c}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:" Gua Curricular Interactiva"}),r.jsx("p",{className:"text-lg text-slate-600",children:"Explora el programa completo de cada materia con contenidos, recursos y evaluacin"})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-6 mb-8 text-white",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:r.jsx(Kn,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Qu encontrars aqu?"}),r.jsxs("ul",{className:"space-y-2 text-white/90",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Programa completo del semestre por unidades y temas"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Propsitos formativos y competencias a desarrollar"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Contenidos detallados y aprendizajes esperados"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Recursos digitales, bibliografa y actividades sugeridas"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Criterios e instrumentos de evaluacin"]})]})]})]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Selecciona una materia:"}),e.length===0?r.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:[r.jsx(at,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 text-lg",children:"No hay materias disponibles"}),r.jsx("p",{className:"text-slate-500 text-sm mt-2 mb-6",children:"Contacta al administrador para agregar materias"}),r.jsxs("div",{className:"max-w-md mx-auto bg-slate-100 p-4 rounded-lg text-left text-xs font-mono text-slate-600",children:[r.jsx("p",{className:"font-bold mb-2",children:"Diagnstico de Sistema:"}),r.jsxs("p",{children:[" Programas Oficiales (JSON + Index): ",Rn.obtenerEstadisticas().totalProgramas]}),r.jsxs("p",{children:[" Materias en Base de Datos: ",s?"Cargando...":"Verificando..."]}),r.jsx("p",{className:"mt-2 text-[10px] text-slate-400",children:'Si "Programas Oficiales" es 0, hay un error en el archivo de datos local (programas_sep.json).'})]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition-colors font-medium text-sm",children:"Recargar Pgina"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(d=>r.jsxs("button",{onClick:()=>t(`/maestro/guia-curricular/${d.id}`),className:"group bg-white rounded-2xl p-6 border-2 border-slate-200 hover:border-indigo-400 hover:shadow-xl transition-all duration-300 text-left",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${l(d.nombre)} rounded-2xl flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform`,children:o(d.nombre)}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-semibold",children:[d.grado," Semestre"]}),d.id.startsWith("sep-")&&r.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-lg text-[10px] font-bold",children:"DGB/SEP 2025"})]})]}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-indigo-600 transition-colors",children:d.nombre}),r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:d.proposito}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx(Po,{className:"w-4 h-4 text-indigo-500"}),r.jsxs("span",{children:[d.horasSemanales," hrs/semana  ",d.totalHoras," hrs totales"]})]}),r.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:d.unidades&&d.unidades.length>0?r.jsxs(r.Fragment,{children:[r.jsx(at,{className:"w-4 h-4 text-indigo-500"}),r.jsxs("span",{children:[d.unidades.length," unidades  ",d.unidades.reduce((m,p)=>m+p.temas.length,0)," temas"]})]}):(()=>{const m=Rn.buscarPorMateriaYSemestre(d.nombre,d.grado);return m&&m.progresiones?r.jsxs(r.Fragment,{children:[r.jsx(Kn,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-semibold text-green-700",children:[m.progresiones.length," Progresiones Oficiales"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(at,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-400",children:"Programa en actualizacin"})]})})()})]}),r.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-semibold group-hover:gap-3 transition-all",children:[r.jsx("span",{children:"Ver programa completo"}),r.jsx(gU,{className:"w-5 h-5"})]})]},d.id))})]}),r.jsxs("div",{className:"mt-12 bg-white rounded-2xl p-6 border border-slate-200",children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-3",children:" Tip para Maestros"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Cada materia incluye el programa completo del semestre con todos los contenidos, recursos digitales recomendados, bibliografa y criterios de evaluacin. salo como gua para planear tus clases y asegurarte de cubrir todos los temas."})]})]})})]})},cH=()=>{var A,b,N,S,D,V;const{materiaId:t}=JP(),e=bs(),[n,s]=P.useState(null),[a,i]=P.useState(!0),[o,l]=P.useState(1),[c,d]=P.useState(null),[m,p]=P.useState(!1);P.useEffect(()=>{t&&g()},[t]);const g=async()=>{var k,R,_,I,C,E;try{i(!0);let M=await wv.obtenerPorId(t);if(!M&&(t!=null&&t.startsWith("sep-"))){console.log(" Materia no en DB, buscando en Fallback local...");const G=Rn.obtenerEstadisticas().materiasDisponibles;let O=null;for(const B of G)if(O=Rn.buscarPorMateria(B).find(Y=>`sep-${String(Y.materia).replace(/\s+/g,"-")}-${Y.semestre}`===t),O)break;O&&(M={id:t,nombre:O.materia,clave:`SEP-${O.semestre}${String(O.materia).substring(0,3).toUpperCase()}`,grado:O.semestre,categoria:((R=(k=O.organizador_curricular)==null?void 0:k.categorias)==null?void 0:R[0])||"Unidad de Aprendizaje",horasSemanales:((_=O.metadata)==null?void 0:_.horas_semanales)||4,totalHoras:(((I=O.metadata)==null?void 0:I.horas_semanales)||4)*16,proposito:`Programa oficial del MCCEMS para ${O.materia}.`,competencias:((C=O.organizador_curricular)==null?void 0:C.metas_aprendizaje)||[],ejesFormativos:((E=O.organizador_curricular)==null?void 0:E.categorias)||[],unidades:[],bibliografiaBasica:[],bibliografiaComplementaria:[],recursosDigitales:[],criteriosEvaluacion:[],instrumentosEvaluacion:[],activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:"SEP-OFFICIAL"})}if(s(M),M)try{const j=Rn.buscarPorMateriaYSemestre(M.nombre,M.grado);d(j),console.log(" Programa oficial SEP encontrado:",j)}catch{console.log(" No se encontr programa oficial SEP para esta materia"),d(null)}}catch(M){console.error("Error al cargar materia:",M)}finally{i(!1)}},x=k=>{l(o===k?null:k)},y=k=>{switch(k){case"video":return r.jsx($O,{className:"w-4 h-4"});case"plataforma":return r.jsx(vp,{className:"w-4 h-4"});case"libro":return r.jsx(DE,{className:"w-4 h-4"});default:return r.jsx(Ls,{className:"w-4 h-4"})}},T=k=>{if(k==="guia-curricular"){e("/maestro/guia-curricular");return}e("/maestro/dashboard",{state:{view:k}})};return a?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(uo,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando programa..."})]})})]}):n?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(uo,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("button",{onClick:()=>e("/maestro/guia-curricular"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(gd,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Volver a la gua"})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 mb-8 text-white",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[n.nombre,n.id.startsWith("sep-")&&r.jsxs("span",{className:"bg-white/20 text-white text-xs px-2 py-1 rounded-lg border border-white/30 flex items-center gap-1 font-semibold",children:[r.jsx(xp,{className:"w-3 h-3"}),"Versin 2025"]})]}),r.jsx("p",{className:"text-white/90 text-lg mb-4",children:"Programa del Semestre"}),r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx("span",{className:"font-semibold",children:"Clave:"})," ",n.clave]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx(Po,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.horasSemanales," hrs/semana"]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx(at,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.totalHoras," hrs totales"]})]})]})]})})}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Kn,{className:"w-5 h-5 text-indigo-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Propsitos Formativos (Versin 2025)"})]}),(A=c==null?void 0:c.organizador_curricular)!=null&&A.propositos_formativos&&c.organizador_curricular.propositos_formativos.length>0?r.jsx("div",{className:"space-y-3",children:c.organizador_curricular.propositos_formativos.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg border-l-4 border-indigo-500",children:[r.jsx("div",{className:"bg-indigo-600 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:R+1}),r.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:k})]},R))}):r.jsx("p",{className:"text-slate-700 leading-relaxed",children:n.proposito})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:r.jsx(xp,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Competencias a Desarrollar"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.competencias.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Is,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-slate-700",children:k})]},R))})]}),c&&r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-2 border-indigo-200 shadow-md",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(xp,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[" Programa Oficial DGB/SEP",r.jsx("span",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded-full",children:"MCCEMS"})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Marco Curricular Comn de la Educacin Media Superior"})]})]}),c.url_fuente&&r.jsxs("a",{href:c.url_fuente,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 flex items-center gap-1 text-sm font-medium transition-colors",children:[r.jsx($g,{className:"w-4 h-4"}),"Ver PDF oficial"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[((b=c.metadata)==null?void 0:b.creditos)&&r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Crditos"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:c.metadata.creditos})]}),((N=c.metadata)==null?void 0:N.horas_semanales)&&r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Horas/Semana"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:c.metadata.horas_semanales})]}),r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Progresiones"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:((S=c.progresiones)==null?void 0:S.length)||0})]}),r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Categoras"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:((V=(D=c.organizador_curricular)==null?void 0:D.categorias)==null?void 0:V.length)||0})]})]}),c.progresiones&&c.progresiones.length>0&&r.jsxs("div",{className:"bg-white/80 rounded-xl p-4",children:[r.jsxs("button",{onClick:()=>p(!m),className:"w-full flex items-center justify-between text-left font-semibold text-slate-900 hover:text-indigo-700 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ms,{className:"w-5 h-5 text-indigo-600"}),"Progresiones de Aprendizaje Oficiales (",c.progresiones.length,")"]}),m?r.jsx(VE,{className:"w-5 h-5"}):r.jsx(LE,{className:"w-5 h-5"})]}),m&&r.jsx("div",{className:"mt-4 space-y-4 max-h-[600px] overflow-y-auto",children:c.progresiones.map((k,R)=>r.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200 hover:border-indigo-300 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-indigo-600 text-white font-bold min-w-[32px] h-8 flex items-center justify-center rounded-lg text-sm shadow-sm",children:k.id}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-slate-900 font-medium text-sm leading-relaxed mb-2",children:k.descripcion}),k.metas&&k.metas.length>0&&r.jsxs("div",{className:"mt-3 pl-3 border-l-2 border-green-400 bg-green-50/50 rounded-r py-2 pr-2",children:[r.jsx("p",{className:"text-xs font-semibold text-green-700 mb-1",children:" Metas de Aprendizaje:"}),k.metas.map((_,I)=>r.jsxs("div",{className:"text-xs text-slate-700 flex items-start gap-1 mt-1",children:[r.jsx(Is,{className:"w-3 h-3 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:_})]},I))]}),k.tematicas&&k.tematicas.length>0&&r.jsxs("div",{className:"mt-3 pl-3 border-l-2 border-blue-400 bg-blue-50/50 rounded-r py-2 pr-2",children:[r.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:" Temticas a desarrollar:"}),r.jsx("ul",{className:"space-y-1",children:k.tematicas.map((_,I)=>r.jsxs("li",{className:"text-xs text-slate-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-500 font-bold",children:""}),r.jsx("span",{className:"flex-1",children:_})]},I))})]})]})]})},R))})]}),r.jsxs("div",{className:"mt-4 text-xs text-slate-600 flex items-center justify-between",children:[r.jsx("span",{children:"Fuente: DGB/SEP - Marco Curricular Comn"}),c.fecha_extraccion&&r.jsxs("span",{children:["Extrado: ",new Date(c.fecha_extraccion).toLocaleDateString("es-MX")]})]})]}),n.ejesFormativos&&n.ejesFormativos.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:r.jsx(at,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Ejes Formativos / Categoras"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.ejesFormativos.map((k,R)=>r.jsx("span",{className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-xl text-sm font-medium border border-blue-100",children:k},R))})]}),(c==null?void 0:c.orientaciones_didacticas)&&c.orientaciones_didacticas.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-cyan-100 p-2 rounded-lg",children:r.jsx(ms,{className:"w-5 h-5 text-cyan-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Orientaciones Didcticas Sugeridas"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.orientaciones_didacticas.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[r.jsx("div",{className:"bg-cyan-500 w-2 h-2 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-slate-700 text-sm",children:k})]},R))})]}),n.unidades&&n.unidades.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:" Unidades del Programa"}),r.jsx("div",{className:"space-y-4",children:n.unidades.map(k=>r.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("button",{onClick:()=>x(k.numero),className:"w-full p-6 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[r.jsx("div",{className:"bg-indigo-100 text-indigo-700 w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg",children:k.numero}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900",children:k.nombre}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Po,{className:"w-4 h-4"}),k.duracionHoras," horas"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(at,{className:"w-4 h-4"}),k.temas.length," temas"]})]})]})]}),o===k.numero?r.jsx(VE,{className:"w-6 h-6 text-slate-400"}):r.jsx(LE,{className:"w-6 h-6 text-slate-400"})]}),o===k.numero&&r.jsxs("div",{className:"border-t border-slate-200 p-6 bg-slate-50",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:" Propsito:"}),r.jsx("p",{className:"text-slate-700",children:k.proposito})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:" Temas:"}),r.jsx("div",{className:"space-y-4",children:k.temas.map(R=>r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded-lg text-sm font-bold",children:R.numero}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h5",{className:"font-bold text-slate-900",children:R.nombre}),r.jsxs("span",{className:"text-xs text-slate-500",children:[R.duracionHoras," horas"]})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Contenidos:"}),r.jsx("ul",{className:"space-y-1",children:R.contenidos.map((_,I)=>r.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[r.jsx("span",{className:"text-indigo-500 mt-1",children:""}),r.jsx("span",{children:_})]},I))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Aprendizajes Esperados:"}),r.jsx("ul",{className:"space-y-1",children:R.aprendizajesEsperados.map((_,I)=>r.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:_})]},I))})]})]},R.numero))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:" Actividades Sugeridas:"}),r.jsx("ul",{className:"space-y-2",children:k.actividadesSugeridas.map((R,_)=>r.jsxs("li",{className:"flex items-start gap-2 text-slate-700",children:[r.jsx(ms,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-1"}),r.jsx("span",{className:"text-sm",children:R})]},_))})]})]})]},k.numero))})]}),n.recursosDigitales&&n.recursosDigitales.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:r.jsx(vp,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Recursos Digitales Recomendados"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.recursosDigitales.map((k,R)=>r.jsxs("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-3 p-4 border border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 transition-all group",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors",children:y(k.tipo)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h4",{className:"font-semibold text-slate-900 group-hover:text-purple-700 transition-colors",children:k.nombre}),r.jsx($g,{className:"w-4 h-4 text-slate-400 flex-shrink-0"})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:k.descripcion})]})]},R))})]}),n.criteriosEvaluacion&&n.criteriosEvaluacion.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:r.jsx(Is,{className:"w-5 h-5 text-orange-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Criterios de Evaluacin"})]}),r.jsx("div",{className:"space-y-3",children:n.criteriosEvaluacion.map((k,R)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900",children:k.aspecto}),r.jsx("p",{className:"text-sm text-slate-600",children:k.descripcion})]}),r.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[k.porcentaje,"%"]})]},R))})]}),n.bibliografiaBasica&&n.bibliografiaBasica.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:r.jsx(DE,{className:"w-5 h-5 text-slate-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Bibliografa Recomendada"})]}),r.jsx("div",{className:"space-y-2",children:n.bibliografiaBasica.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"bg-white p-1 rounded border border-slate-200",children:k.disponibilidad==="digital"?r.jsx(vp,{className:"w-3 h-3 text-blue-500"}):r.jsx(at,{className:"w-3 h-3 text-slate-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-slate-700 text-sm font-medium",children:k.titulo}),r.jsxs("p",{className:"text-slate-500 text-xs italic",children:[k.autor," ",k.ao?`(${k.ao})`:""]})]})]},R))})]})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(uo,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg text-slate-600",children:"Materia no encontrada"}),r.jsx("button",{onClick:()=>e("/maestro/guia-curricular"),className:"mt-4 text-indigo-600 hover:text-indigo-700",children:"Volver a la gua"})]})})]})},Yi=[],dH=t=>t==="all"?Yi:Yi.filter(e=>e.category===t),uH=t=>{const e=t.toLowerCase();return Yi.filter(n=>n.name.toLowerCase().includes(e)||n.description.toLowerCase().includes(e)||n.tags.some(s=>s.toLowerCase().includes(e)))},mH=({tool:t})=>{const e=bs(),n=()=>{e(`/maestro/herramientas/${t.id}`)};return r.jsxs("div",{onClick:n,className:"group relative bg-white rounded-2xl border-2 border-slate-200 p-6 hover:border-indigo-500 hover:shadow-xl transition-all duration-300 cursor-pointer",children:[t.isPro&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(wU,{className:"w-5 h-5 text-amber-500"})}),t.isNew&&r.jsx("div",{className:"absolute top-4 right-4 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Nuevo"}),r.jsx("div",{className:"mb-4 p-3 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl w-fit group-hover:scale-110 transition-transform",children:r.jsx(t.icon,{className:"w-8 h-8 text-indigo-600"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors",children:t.name}),r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:t.description}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.tags.slice(0,3).map((s,a)=>r.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-lg",children:s},a)),t.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-lg",children:["+",t.tags.length-3]})]}),r.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Do,{className:"w-5 h-5 text-indigo-500"})})]})},hH=[{id:"all",name:"Todas",color:"slate"},{id:"planeacion",name:"Planeacin",color:"indigo"},{id:"actividades",name:"Actividades",color:"emerald"},{id:"evaluacion",name:"Evaluacin",color:"purple"},{id:"materiales",name:"Materiales",color:"amber"},{id:"comunicacion",name:"Comunicacin",color:"pink"}],fH=()=>{const[t,e]=P.useState("all"),[n,s]=P.useState(""),a=P.useMemo(()=>{let i=dH(t);return n.trim()&&(i=uH(n)),i},[t,n]);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto p-6 pb-20",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl",children:r.jsx(Do,{className:"w-10 h-10 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Herramientas Educativas"}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[Yi.length," herramientas disponibles para potenciar tu enseanza"]})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:n,onChange:i=>s(i.target.value),placeholder:"Buscar herramientas...",className:"w-full pl-12 pr-4 py-4 rounded-2xl border-2 border-slate-200 bg-white focus:border-indigo-500 focus:outline-none transition-colors text-lg"})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Oc,{className:"w-5 h-5 text-slate-600"}),r.jsx("span",{className:"font-bold text-slate-700",children:"Categoras"})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:hH.map(i=>{const o=t===i.id,l=i.id==="all"?Yi.length:Yi.filter(c=>c.category===i.id).length;return r.jsxs("button",{onClick:()=>e(i.id),className:`px-6 py-3 rounded-xl font-bold transition-all ${o?`bg-${i.color}-500 text-white shadow-lg scale-105`:"bg-white text-slate-700 border-2 border-slate-200 hover:border-slate-300"}`,children:[i.name,r.jsxs("span",{className:`ml-2 text-sm ${o?"text-white/80":"text-slate-500"}`,children:["(",l,")"]})]},i.id)})})]}),a.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(i=>r.jsx(mH,{tool:i},i.id))}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"No se encontraron herramientas"}),r.jsx("p",{className:"text-slate-600",children:"Intenta con otra bsqueda o categora"})]}),Yi.length===0&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"Prximamente"}),r.jsx("p",{className:"text-slate-600",children:"Las herramientas se estn configurando..."})]})]})})},pH=({userName:t,onChoice:e,onSchoolSelected:n})=>{const[s,a]=P.useState(null),[i,o]=P.useState([]),[l,c]=P.useState([]),[d,m]=P.useState(""),[p,g]=P.useState(!1),[x,y]=P.useState(null);P.useEffect(()=>{T()},[]),P.useEffect(()=>{if(d){const b=i.filter(N=>N.nombre.toLowerCase().includes(d.toLowerCase())||N.codigo.toLowerCase().includes(d.toLowerCase()));c(b)}else c(i)},[d,i]);const T=async()=>{try{g(!0);const N=(await je(ue(J,"schools"))).docs.map(S=>({id:S.id,nombre:S.data().nombre,codigo:S.data().codigo,direccion:S.data().direccion}));o(N),c(N)}catch(b){console.error("Error al cargar escuelas:",b)}finally{g(!1)}},A=()=>{s==="join"&&x&&n?n(x.id,x.nombre):s==="create"?e("create"):s==="join"&&!x&&e("join")};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:r.jsx(ts,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Bienvenido a EDUPLANMX!"}),r.jsxs("p",{className:"text-xl text-gray-600",children:["Hola, ",r.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]}),r.jsx("div",{className:"mb-8",children:r.jsx("p",{className:"text-center text-gray-700 text-lg",children:"Para comenzar, necesitamos conocer tu escuela:"})}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{children:[r.jsx("button",{onClick:()=>a("join"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ${s==="join"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${s==="join"?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(Je,{className:`w-6 h-6 ${s==="join"?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Mi escuela ya est registrada"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Selecciona tu escuela de la lista o bscala por nombre/cdigo"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s==="join"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:s==="join"&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})}),s==="join"&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"relative mb-4",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",value:d,onChange:b=>m(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Cargando escuelas..."})]}):l.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(At,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:d?"No se encontraron escuelas":"No hay escuelas registradas"}),r.jsx("button",{onClick:()=>a("create"),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Registra la primera escuela"})]}):r.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:l.map(b=>r.jsx("button",{onClick:()=>y(b),className:`w-full p-3 rounded-lg border transition-all text-left ${(x==null?void 0:x.id)===b.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-white"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(At,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${(x==null?void 0:x.id)===b.id?"text-blue-600":"text-gray-400"}`}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:b.nombre}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Cdigo: ",b.codigo]}),b.direccion&&r.jsxs("p",{className:"text-xs text-gray-400 flex items-center mt-1",children:[r.jsx(Bh,{className:"w-3 h-3 mr-1"}),b.direccion]})]}),r.jsx("div",{className:"ml-2",children:r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${(x==null?void 0:x.id)===b.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:(x==null?void 0:x.id)===b.id&&r.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})})]})},b.id))}),l.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsx("button",{onClick:()=>{y(null),e("join")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"No encuentras tu escuela? Bscala por cdigo CCT"})})]})]}),r.jsx("button",{onClick:()=>a("create"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ${s==="create"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${s==="create"?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(At,{className:`w-6 h-6 ${s==="create"?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Registrar una nueva escuela"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Crea el perfil de tu escuela y s el primero en registrarla"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s==="create"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:s==="create"&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})})]}),r.jsxs("button",{onClick:A,disabled:!s||s==="join"&&!x,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${s&&(s==="create"||x)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Continuar",r.jsx(il,{className:"ml-2 w-5 h-5"})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Sistema de Planeacin Didctica  MCCEMS 2024"})})]})})},gH=({onBack:t,onSchoolSelected:e})=>{const[n,s]=P.useState("code"),[a,i]=P.useState(""),[o,l]=P.useState(!1),[c,d]=P.useState([]),[m,p]=P.useState(""),[g,x]=P.useState(null),y=async()=>{if(!a.trim()){p("Por favor ingresa un cdigo de acceso");return}l(!0),p("");try{const S=await zc.getSchoolByCode(a.trim());S?d([{id:S.id,nombre:S.nombre,cct:S.cct,municipio:S.municipio,turno:S.turno,codigoAcceso:S.codigoAcceso,totalDocentes:S.estadisticas.totalDocentes}]):(p("No se encontr ninguna escuela con ese cdigo"),d([]))}catch{p("Error al buscar la escuela. Intenta de nuevo."),d([])}finally{l(!1)}},T=async()=>{if(!a.trim()||a.length<3){p("Por favor ingresa al menos 3 caracteres");return}l(!0),p("");try{const S=await zc.searchSchools(a.trim());S.length>0?d(S):(p("No se encontraron escuelas con ese nombre"),d([]))}catch{p("Error al buscar escuelas. Intenta de nuevo."),d([])}finally{l(!1)}},A=()=>{n==="code"?y():T()},b=S=>{x(S)},N=()=>{g&&e(g.id,g.nombre)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(gd,{className:"w-5 h-5 mr-2"}),"Volver"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Buscar tu Escuela"}),r.jsx("p",{className:"text-gray-600",children:"Encuentra tu escuela para unirte a ella"})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsx("button",{onClick:()=>{s("code"),i(""),d([]),p("")},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${n==="code"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Buscar por Cdigo"}),r.jsx("button",{onClick:()=>{s("name"),i(""),d([]),p("")},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${n==="name"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Buscar por Nombre"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="code"?"Cdigo de Acceso":"Nombre de la Escuela"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:a,onChange:S=>i(S.target.value),onKeyPress:S=>S.key==="Enter"&&A(),placeholder:n==="code"?"Ej: CBT001":"Ej: CBT No. 1 Dr. Gustavo Baz",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:A,disabled:o,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center",children:o?r.jsx(rl,{className:"w-5 h-5 animate-spin"}):"Buscar"})]}),m&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m})]}),c.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Resultados (",c.length,")"]}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.map(S=>r.jsx("button",{onClick:()=>b(S),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${(g==null?void 0:g.id)===S.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${(g==null?void 0:g.id)===S.id?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(Lm,{className:`w-6 h-6 ${(g==null?void 0:g.id)===S.id?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:S.nombre}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Lm,{className:"w-4 h-4 mr-1"}),"CCT: ",S.cct]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Bh,{className:"w-4 h-4 mr-1"}),S.municipio]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Je,{className:"w-4 h-4 mr-1"}),S.totalDocentes," docentes"]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:["Turno ",S.turno]}),r.jsx("span",{className:"inline-block ml-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:S.codigoAcceso})]})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${(g==null?void 0:g.id)===S.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:(g==null?void 0:g.id)===S.id&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})},S.id))})]}),r.jsxs("button",{onClick:N,disabled:!g,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${g?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Unirme a esta Escuela",r.jsx(il,{className:"ml-2 w-5 h-5"})]})]})})},xH=["Matutino","Vespertino","Nocturno","Discontinuo"],vH=["Director","Subdirector","Coordinador Acadmico","Docente"],yH=({onBack:t,onSchoolCreated:e})=>{const[n,s]=P.useState({nombre:"",cct:"",municipio:"",estado:"Mxico",turno:"Matutino",puestoCreador:"Director"}),[a,i]=P.useState({}),[o,l]=P.useState(!1),[c,d]=P.useState(""),m=y=>/^\d{2}[A-Z]{3}\d{4}[A-Z]$/.test(y.toUpperCase()),p=()=>{const y={};return n.nombre.trim()||(y.nombre="El nombre es requerido"),n.cct.trim()?m(n.cct)||(y.cct="Formato de CCT invlido (Ej: 15ECT0001A)"):y.cct="El CCT es requerido",n.municipio.trim()||(y.municipio="El municipio es requerido"),i(y),Object.keys(y).length===0},g=async()=>{var y;if(p()){l(!0),d("");try{const{schoolService:T}=await No(async()=>{const{schoolService:S}=await Promise.resolve().then(()=>PI);return{schoolService:S}},void 0),{auth:A}=await No(async()=>{const{auth:S}=await Promise.resolve().then(()=>CI);return{auth:S}},void 0),b=(y=A.currentUser)==null?void 0:y.uid;if(!b)throw new Error("No se pudo obtener el ID del usuario");const N=await T.createSchool(n,b);e(N.id,N.nombre,n.puestoCreador)}catch(T){console.error("Error al crear escuela:",T),d(T.message||"Error al crear la escuela. Intenta de nuevo.")}finally{l(!1)}}},x=(y,T)=>{s(A=>({...A,[y]:T})),a[y]&&i(A=>({...A,[y]:void 0}))};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(gd,{className:"w-5 h-5 mr-2"}),"Volver"]}),r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(At,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registrar Nueva Escuela"}),r.jsx("p",{className:"text-gray-600",children:"Crea el perfil de tu escuela"})]})]})]}),c&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[r.jsx(ba,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-800",children:c})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo de la Escuela *"}),r.jsx("input",{type:"text",value:n.nombre,onChange:y=>x("nombre",y.target.value),placeholder:"Ej: CBT No. 1 Dr. Gustavo Baz",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.nombre?"border-red-300":"border-gray-300"}`}),a.nombre&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.nombre})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clave de Centro de Trabajo (CCT) *"}),r.jsx("input",{type:"text",value:n.cct,onChange:y=>x("cct",y.target.value.toUpperCase()),placeholder:"Ej: 15ECT0001A",maxLength:11,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono ${a.cct?"border-red-300":"border-gray-300"}`}),a.cct&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.cct}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formato: 2 dgitos + 3 letras + 4 dgitos + 1 letra"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Municipio *"}),r.jsx("input",{type:"text",value:n.municipio,onChange:y=>x("municipio",y.target.value),placeholder:"Ej: Tlalnepantla",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.municipio?"border-red-300":"border-gray-300"}`}),a.municipio&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.municipio})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsx("input",{type:"text",value:n.estado,onChange:y=>x("estado",y.target.value),placeholder:"Ej: Mxico",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Turno *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:xH.map(y=>r.jsx("button",{type:"button",onClick:()=>x("turno",y),className:`py-3 px-4 rounded-lg border-2 font-medium transition-all ${n.turno===y?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:y},y))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tu Puesto en la Escuela *"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:vH.map(y=>r.jsx("button",{type:"button",onClick:()=>x("puestoCreador",y),className:`py-3 px-4 rounded-lg border-2 font-medium transition-all text-left ${n.puestoCreador===y?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:y},y))})]})]}),r.jsx("button",{onClick:g,disabled:o,className:`w-full mt-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(rl,{className:"w-5 h-5 mr-2 animate-spin"}),"Creando Escuela..."]}):r.jsxs(r.Fragment,{children:["Crear Escuela",r.jsx(il,{className:"ml-2 w-5 h-5"})]})}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Al crear la escuela, se generar automticamente un cdigo de acceso nico que podrs compartir con otros docentes para que se unan."]})})]})})},bH=["Matemticas","Fsica","Qumica","Biologa","Historia","Geografa","Ingls","Espaol","Filosofa","tica","Informtica","Cultura Digital","Educacin Fsica","Arte","Msica","Orientacin Educativa"],_H=[1,2,3,4,5,6],EH=({schoolName:t,puesto:e,onComplete:n})=>{const[s,a]=P.useState({puesto:e,materias:[],grados:[],telefono:""}),[i,o]=P.useState(""),[l,c]=P.useState(!1),d=e==="Docente"||e==="Coordinador Acadmico",m=T=>{a(A=>{var b;return{...A,materias:(b=A.materias)!=null&&b.includes(T)?A.materias.filter(N=>N!==T):[...A.materias||[],T]}})},p=()=>{var T;i.trim()&&!((T=s.materias)!=null&&T.includes(i.trim()))&&(a(A=>({...A,materias:[...A.materias||[],i.trim()]})),o(""))},g=T=>{a(A=>{var b;return{...A,grados:(b=A.grados)!=null&&b.includes(T)?A.grados.filter(N=>N!==T):[...A.grados||[],T]}})},x=async()=>{c(!0),await new Promise(T=>setTimeout(T,500)),n(s)},y=!d||s.materias&&s.materias.length>0;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 md:p-12",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(ko,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Completa tu Perfil"}),r.jsxs("p",{className:"text-gray-600",children:["Escuela: ",r.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tu Puesto"}),r.jsx("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ts,{className:"w-5 h-5 text-blue-600 mr-3"}),r.jsx("span",{className:"font-semibold text-blue-900",children:e}),r.jsx(Yl,{className:"w-5 h-5 text-blue-600 ml-auto"})]})})]}),d&&r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Materias que Impartes *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:bH.map(T=>{var A;return r.jsx("button",{type:"button",onClick:()=>m(T),className:`py-2 px-3 rounded-lg border-2 text-sm font-medium transition-all ${(A=s.materias)!=null&&A.includes(T)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:T},T)})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:i,onChange:T=>o(T.target.value),onKeyPress:T=>T.key==="Enter"&&p(),placeholder:"Otra materia...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"Agregar"})]}),s.materias&&s.materias.length>0&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Materias seleccionadas (",s.materias.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.materias.map(T=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[r.jsx(at,{className:"w-3 h-3 mr-1"}),T]},T))})]})]}),d&&r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Semestres que Atiendes (opcional)"}),r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:_H.map(T=>{var A;return r.jsxs("button",{type:"button",onClick:()=>g(T),className:`py-3 px-4 rounded-lg border-2 font-semibold transition-all ${(A=s.grados)!=null&&A.includes(T)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:[T,""]},T)})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono (opcional)"}),r.jsx("input",{type:"tel",value:s.telefono,onChange:T=>a(A=>({...A,telefono:T.target.value})),placeholder:"Ej: 5512345678",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:x,disabled:!y||l,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${y&&!l?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:l?r.jsxs(r.Fragment,{children:[r.jsx(rl,{className:"w-5 h-5 mr-2 animate-spin"}),"Guardando Perfil..."]}):r.jsxs(r.Fragment,{children:["Finalizar Registro",r.jsx(il,{className:"ml-2 w-5 h-5"})]})}),d&&r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Podrs editar esta informacin ms tarde desde tu perfil."]})})]})})},NH=()=>{var y;const t=bs(),[e,n]=P.useState("welcome"),[s,a]=P.useState({}),[i,o]=P.useState(""),l=Va.currentUser,c=((y=l==null?void 0:l.displayName)==null?void 0:y.split(" ")[0])||"Usuario";Gc.useEffect(()=>{console.log(" OnboardingContainer montado. Paso actual:",e)},[e]);const d=T=>{n(T==="join"?"join-school":"create-school")},m=(T,A)=>{a({schoolId:T,schoolName:A,puesto:"Docente"}),n("complete-profile")},p=(T,A,b)=>{a({schoolId:T,schoolName:A,puesto:b}),n("complete-profile")},g=async T=>{try{if(!l||!s.schoolId||!s.schoolName)throw new Error("Informacin incompleta");const b=(l.displayName||"").split(" "),N=b[0]||"Usuario",S=b[1]||"";await zc.createUserProfile(l.uid,l.email||"",N,S,s.schoolId,s.schoolName,T),t("/dashboard")}catch(A){console.error("Error al completar onboarding:",A),o(A.message||"Error al guardar el perfil")}},x=()=>{e==="join-school"||e==="create-school"?n("welcome"):e==="complete-profile"&&(n("welcome"),a({}))};return r.jsxs(r.Fragment,{children:[i&&r.jsxs("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 text-red-800 px-6 py-4 rounded-lg shadow-lg z-50",children:[r.jsx("p",{className:"font-medium",children:"Error"}),r.jsx("p",{className:"text-sm",children:i})]}),e==="welcome"&&r.jsx(pH,{userName:c,onChoice:d,onSchoolSelected:m}),e==="join-school"&&r.jsx(gH,{onBack:x,onSchoolSelected:m}),e==="create-school"&&r.jsx(yH,{onBack:x,onSchoolCreated:p}),e==="complete-profile"&&s.schoolName&&s.puesto&&r.jsx(EH,{schoolName:s.schoolName,puesto:s.puesto,onComplete:g})]})},CH=()=>r.jsx(NH,{}),TH=()=>{const{user:t,loading:e}=ct();if(e)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando..."})]})});if(!t)return r.jsx(rs,{to:"/login",replace:!0});if(t.rol==="superadmin")return r.jsx(rs,{to:"/admin/dashboard",replace:!0});if(t.onboardingCompleto===!1||!t.schoolId||!t.schoolName||!t.nombre||!t.apellidoPaterno)return console.info(" Redirigiendo a onboarding - Completar perfil"),r.jsx(rs,{to:"/onboarding",replace:!0});switch(t.rol){case"superadmin":return r.jsx(rs,{to:"/admin/dashboard",replace:!0});case"directivo":return r.jsx(rs,{to:"/directivo/dashboard",replace:!0});case"maestro":return r.jsx(rs,{to:"/maestro/dashboard",replace:!0});case"alumno":return r.jsx(rs,{to:"/alumno/dashboard",replace:!0});default:return r.jsx(rs,{to:"/login",replace:!0})}},SH=()=>r.jsx(PD,{basename:"/EDUPLANMX/",children:r.jsx(XV,{children:r.jsxs(cD,{children:[r.jsx(rn,{path:"/login",element:r.jsx(tz,{})}),r.jsx(rn,{path:"/registro",element:r.jsx(Kq,{})}),r.jsx(rn,{path:"/onboarding",element:r.jsx(Cs,{allowedRoles:["maestro","directivo","superadmin","alumno"],children:r.jsx(CH,{})})}),r.jsx(rn,{path:"/",element:r.jsx(TH,{})}),r.jsx(rn,{path:"/maestro/dashboard",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(Jq,{})})}),r.jsx(rn,{path:"/maestro/guia-curricular",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(lH,{})})}),r.jsx(rn,{path:"/maestro/guia-curricular/:materiaId",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(cH,{})})}),r.jsx(rn,{path:"/maestro/herramientas",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(fH,{})})}),r.jsx(rn,{path:"/directivo/dashboard",element:r.jsx(Cs,{allowedRoles:["directivo","superadmin"],children:r.jsx(tH,{})})}),r.jsx(rn,{path:"/directivo/alumnos",element:r.jsx(Cs,{allowedRoles:["directivo","superadmin"],children:r.jsx(nH,{})})}),r.jsx(rn,{path:"/admin/dashboard",element:r.jsx(Cs,{allowedRoles:["superadmin"],children:r.jsx(Zq,{})})}),r.jsx(rn,{path:"/admin/usuarios",element:r.jsx(Cs,{allowedRoles:["superadmin"],children:r.jsx(oH,{})})}),r.jsx(rn,{path:"/alumno/dashboard",element:r.jsx(Cs,{allowedRoles:["alumno"],children:r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Alumno"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"En construccin..."})]})})}),r.jsx(rn,{path:"*",element:r.jsx(rs,{to:"/",replace:!0})})]})})}),z1=document.getElementById("root");if(!z1)throw new Error("Could not find root element to mount to");const wH=uP.createRoot(z1);wH.render(r.jsx(Gc.StrictMode,{children:r.jsx(SH,{})}));
