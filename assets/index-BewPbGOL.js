var uR=Object.defineProperty;var mR=(t,e,n)=>e in t?uR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ad=(t,e,n)=>mR(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var hR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var EC={exports:{}},Bm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=Symbol.for("react.transitional.element"),pR=Symbol.for("react.fragment");function NC(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var a in e)a!=="key"&&(n[a]=e[a])}else n=e;return e=n.ref,{$$typeof:fR,type:t,key:s,ref:e!==void 0?e:null,props:n}}Bm.Fragment=pR;Bm.jsx=NC;Bm.jsxs=NC;EC.exports=Bm;var r=EC.exports,CC={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0=Symbol.for("react.transitional.element"),gR=Symbol.for("react.portal"),xR=Symbol.for("react.fragment"),vR=Symbol.for("react.strict_mode"),yR=Symbol.for("react.profiler"),bR=Symbol.for("react.consumer"),_R=Symbol.for("react.context"),ER=Symbol.for("react.forward_ref"),NR=Symbol.for("react.suspense"),CR=Symbol.for("react.memo"),TC=Symbol.for("react.lazy"),TR=Symbol.for("react.activity"),_y=Symbol.iterator;function SR(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var SC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wC=Object.assign,AC={};function Do(t,e,n){this.props=t,this.context=e,this.refs=AC,this.updater=n||SC}Do.prototype.isReactComponent={};Do.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Do.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IC(){}IC.prototype=Do.prototype;function d0(t,e,n){this.props=t,this.context=e,this.refs=AC,this.updater=n||SC}var u0=d0.prototype=new IC;u0.constructor=d0;wC(u0,Do.prototype);u0.isPureReactComponent=!0;var Ey=Array.isArray;function bp(){}var et={H:null,A:null,T:null,S:null},RC=Object.prototype.hasOwnProperty;function m0(t,e,n){var s=n.ref;return{$$typeof:c0,type:t,key:e,ref:s!==void 0?s:null,props:n}}function wR(t,e){return m0(t.type,e,t.props)}function h0(t){return typeof t=="object"&&t!==null&&t.$$typeof===c0}function AR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ny=/\/+/g;function gf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AR(""+t.key):e.toString(36)}function IR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(bp,bp):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Tr(t,e,n,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case c0:case gR:o=!0;break;case TC:return o=t._init,Tr(o(t._payload),e,n,s,a)}}if(o)return a=a(t),o=s===""?"."+gf(t,0):s,Ey(a)?(n="",o!=null&&(n=o.replace(Ny,"$&/")+"/"),Tr(a,e,n,"",function(d){return d})):a!=null&&(h0(a)&&(a=wR(a,n+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(Ny,"$&/")+"/")+o)),e.push(a)),1;o=0;var l=s===""?".":s+":";if(Ey(t))for(var c=0;c<t.length;c++)s=t[c],i=l+gf(s,c),o+=Tr(s,e,n,i,a);else if(c=SR(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,i=l+gf(s,c++),o+=Tr(s,e,n,i,a);else if(i==="object"){if(typeof t.then=="function")return Tr(IR(t),e,n,s,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function Id(t,e,n){if(t==null)return t;var s=[],a=0;return Tr(t,s,"","",function(i){return e.call(n,i,a++)}),s}function RR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},jR={map:Id,forEach:function(t,e,n){Id(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Id(t,function(){e++}),e},toArray:function(t){return Id(t,function(e){return e})||[]},only:function(t){if(!h0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Activity=TR;ge.Children=jR;ge.Component=Do;ge.Fragment=xR;ge.Profiler=yR;ge.PureComponent=d0;ge.StrictMode=vR;ge.Suspense=NR;ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et;ge.__COMPILER_RUNTIME={__proto__:null,c:function(t){return et.H.useMemoCache(t)}};ge.cache=function(t){return function(){return t.apply(null,arguments)}};ge.cacheSignal=function(){return null};ge.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=wC({},t.props),a=t.key;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)!RC.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(s[i]=e[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];s.children=o}return m0(t.type,a,s)};ge.createContext=function(t){return t={$$typeof:_R,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:bR,_context:t},t};ge.createElement=function(t,e,n){var s,a={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)RC.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(a[s]=e[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return m0(t,i,a)};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:ER,render:t}};ge.isValidElement=h0;ge.lazy=function(t){return{$$typeof:TC,_payload:{_status:-1,_result:t},_init:RR}};ge.memo=function(t,e){return{$$typeof:CR,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=et.T,n={};et.T=n;try{var s=t(),a=et.S;a!==null&&a(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(bp,Cy)}catch(i){Cy(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),et.T=e}};ge.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()};ge.use=function(t){return et.H.use(t)};ge.useActionState=function(t,e,n){return et.H.useActionState(t,e,n)};ge.useCallback=function(t,e){return et.H.useCallback(t,e)};ge.useContext=function(t){return et.H.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t,e){return et.H.useDeferredValue(t,e)};ge.useEffect=function(t,e){return et.H.useEffect(t,e)};ge.useEffectEvent=function(t){return et.H.useEffectEvent(t)};ge.useId=function(){return et.H.useId()};ge.useImperativeHandle=function(t,e,n){return et.H.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return et.H.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return et.H.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return et.H.useMemo(t,e)};ge.useOptimistic=function(t,e){return et.H.useOptimistic(t,e)};ge.useReducer=function(t,e,n){return et.H.useReducer(t,e,n)};ge.useRef=function(t){return et.H.useRef(t)};ge.useState=function(t){return et.H.useState(t)};ge.useSyncExternalStore=function(t,e,n){return et.H.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return et.H.useTransition()};ge.version="19.2.3";CC.exports=ge;var M=CC.exports;const zc=_C(M);var jC={exports:{}},qm={},MC={exports:{}},PC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,te){var Y=G.length;G.push(te);e:for(;0<Y;){var ne=Y-1>>>1,de=G[ne];if(0<a(de,te))G[ne]=te,G[Y]=de,Y=ne;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var te=G[0],Y=G.pop();if(Y!==te){G[0]=Y;e:for(var ne=0,de=G.length,ye=de>>>1;ne<ye;){var Qe=2*(ne+1)-1,Ge=G[Qe],ie=Qe+1,Ae=G[ie];if(0>a(Ge,Y))ie<de&&0>a(Ae,Ge)?(G[ne]=Ae,G[ie]=Y,ne=ie):(G[ne]=Ge,G[Qe]=Y,ne=Qe);else if(ie<de&&0>a(Ae,Y))G[ne]=Ae,G[ie]=Y,ne=ie;else break e}}return te}function a(G,te){var Y=G.sortIndex-te.sortIndex;return Y!==0?Y:G.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,p=null,g=3,x=!1,y=!1,T=!1,I=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var te=n(d);te!==null;){if(te.callback===null)s(d);else if(te.startTime<=G)s(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(d)}}function V(G){if(T=!1,D(G),!y)if(n(c)!==null)y=!0,k||(k=!0,P());else{var te=n(d);te!==null&&O(V,te.startTime-G)}}var k=!1,R=-1,E=5,S=-1;function C(){return I?!0:!(t.unstable_now()-S<E)}function _(){if(I=!1,k){var G=t.unstable_now();S=G;var te=!0;try{e:{y=!1,T&&(T=!1,N(R),R=-1),x=!0;var Y=g;try{t:{for(D(G),p=n(c);p!==null&&!(p.expirationTime>G&&C());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,g=p.priorityLevel;var de=ne(p.expirationTime<=G);if(G=t.unstable_now(),typeof de=="function"){p.callback=de,D(G),te=!0;break t}p===n(c)&&s(c),D(G)}else s(c);p=n(c)}if(p!==null)te=!0;else{var ye=n(d);ye!==null&&O(V,ye.startTime-G),te=!1}}break e}finally{p=null,g=Y,x=!1}te=void 0}}finally{te?P():k=!1}}}var P;if(typeof w=="function")P=function(){w(_)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=_,P=function(){H.postMessage(null)}}else P=function(){b(_,0)};function O(G,te){R=b(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var Y=g;g=te;try{return G()}finally{g=Y}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=g;g=G;try{return te()}finally{g=Y}},t.unstable_scheduleCallback=function(G,te,Y){var ne=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Y+de,G={id:m++,callback:te,priorityLevel:G,startTime:Y,expirationTime:de,sortIndex:-1},Y>ne?(G.sortIndex=Y,e(d,G),n(c)===null&&G===n(d)&&(T?(N(R),R=-1):T=!0,O(V,Y-ne))):(G.sortIndex=de,e(c,G),y||x||(y=!0,k||(k=!0,P()))),G},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(G){var te=g;return function(){var Y=g;g=te;try{return G.apply(this,arguments)}finally{g=Y}}}})(PC);MC.exports=PC;var MR=MC.exports,DC={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PR=M;function kC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ja(){}var cn={d:{f:ja,r:function(){throw Error(kC(522))},D:ja,C:ja,L:ja,m:ja,X:ja,S:ja,M:ja},p:0,findDOMNode:null},DR=Symbol.for("react.portal");function kR(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:DR,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var Yl=PR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Hm(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=cn;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(kC(299));return kR(t,e,null,n)};mn.flushSync=function(t){var e=Yl.T,n=cn.p;try{if(Yl.T=null,cn.p=2,t)return t()}finally{Yl.T=e,cn.p=n,cn.d.f()}};mn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,cn.d.C(t,e))};mn.prefetchDNS=function(t){typeof t=="string"&&cn.d.D(t)};mn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Hm(n,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?cn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:i}):n==="script"&&cn.d.X(t,{crossOrigin:s,integrity:a,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};mn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Hm(e.as,e.crossOrigin);cn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&cn.d.M(t)};mn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Hm(n,e.crossOrigin);cn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};mn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Hm(e.as,e.crossOrigin);cn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else cn.d.m(t)};mn.requestFormReset=function(t){cn.d.r(t)};mn.unstable_batchedUpdates=function(t,e){return t(e)};mn.useFormState=function(t,e,n){return Yl.H.useFormState(t,e,n)};mn.useFormStatus=function(){return Yl.H.useHostTransitionStatus()};mn.version="19.2.3";function LC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LC)}catch(t){console.error(t)}}LC(),DC.exports=mn;var LR=DC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=MR,VC=M,VR=LR;function q(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function UC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if(Fc(t)!==t)throw Error(q(188))}function UR(t){var e=t.alternate;if(!e){if(e=Fc(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,s=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ty(a),t;if(i===s)return Ty(a),e;i=i.sibling}throw Error(q(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==s)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function FC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=FC(t),e!==null)return e;t=t.sibling}return null}var nt=Object.assign,OR=Symbol.for("react.element"),Rd=Symbol.for("react.transitional.element"),kl=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),GC=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),BC=Symbol.for("react.consumer"),Qs=Symbol.for("react.context"),f0=Symbol.for("react.forward_ref"),Ep=Symbol.for("react.suspense"),Np=Symbol.for("react.suspense_list"),p0=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),Cp=Symbol.for("react.activity"),zR=Symbol.for("react.memo_cache_sentinel"),Sy=Symbol.iterator;function Tl(t){return t===null||typeof t!="object"?null:(t=Sy&&t[Sy]||t["@@iterator"],typeof t=="function"?t:null)}var FR=Symbol.for("react.client.reference");function Tp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===FR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dr:return"Fragment";case _p:return"Profiler";case GC:return"StrictMode";case Ep:return"Suspense";case Np:return"SuspenseList";case Cp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case kl:return"Portal";case Qs:return t.displayName||"Context";case BC:return(t._context.displayName||"Context")+".Consumer";case f0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case p0:return e=t.displayName||null,e!==null?e:Tp(t.type)||"Memo";case Da:e=t._payload,t=t._init;try{return Tp(t(e))}catch{}}return null}var Ll=Array.isArray,ce=VC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke=VR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Yi={pending:!1,data:null,method:null,action:null},Sp=[],kr=-1;function Vs(t){return{current:t}}function Ot(t){0>kr||(t.current=Sp[kr],Sp[kr]=null,kr--)}function Je(t,e){kr++,Sp[kr]=t.current,t.current=e}var Rs=Vs(null),fc=Vs(null),Qa=Vs(null),Vu=Vs(null);function Uu(t,e){switch(Je(Qa,e),Je(fc,t),Je(Rs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Mb(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Mb(e),t=cw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ot(Rs),Je(Rs,t)}function uo(){Ot(Rs),Ot(fc),Ot(Qa)}function wp(t){t.memoizedState!==null&&Je(Vu,t);var e=Rs.current,n=cw(e,t.type);e!==n&&(Je(fc,t),Je(Rs,n))}function Ou(t){fc.current===t&&(Ot(Rs),Ot(fc)),Vu.current===t&&(Ot(Vu),Tc._currentValue=Yi)}var xf,wy;function Ui(t){if(xf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xf=e&&e[1]||"",wy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xf+t+wy}var vf=!1;function yf(t,e){if(!t||vf)return"";vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(x){var g=x}Reflect.construct(t,[],p)}else{try{p.call()}catch(x){g=x}t.call(p.prototype)}}else{try{throw Error()}catch(x){g=x}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(x){if(x&&g&&typeof x.stack=="string")return[x.stack,g.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(a=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(s===c.length||a===d.length)for(s=c.length-1,a=d.length-1;1<=s&&0<=a&&c[s]!==d[a];)a--;for(;1<=s&&0<=a;s--,a--)if(c[s]!==d[a]){if(s!==1||a!==1)do if(s--,a--,0>a||c[s]!==d[a]){var m=`
`+c[s].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=s&&0<=a);break}}}finally{vf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ui(n):""}function GR(t,e){switch(t.tag){case 26:case 27:case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return t.child!==e&&e!==null?Ui("Suspense Fallback"):Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return yf(t.type,!1);case 11:return yf(t.type.render,!1);case 1:return yf(t.type,!0);case 31:return Ui("Activity");default:return""}}function Ay(t){try{var e="",n=null;do e+=GR(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ap=Object.prototype.hasOwnProperty,g0=Mt.unstable_scheduleCallback,bf=Mt.unstable_cancelCallback,BR=Mt.unstable_shouldYield,qR=Mt.unstable_requestPaint,jn=Mt.unstable_now,HR=Mt.unstable_getCurrentPriorityLevel,qC=Mt.unstable_ImmediatePriority,HC=Mt.unstable_UserBlockingPriority,zu=Mt.unstable_NormalPriority,$R=Mt.unstable_LowPriority,$C=Mt.unstable_IdlePriority,YR=Mt.log,JR=Mt.unstable_setDisableYieldValue,Gc=null,Mn=null;function qa(t){if(typeof YR=="function"&&JR(t),Mn&&typeof Mn.setStrictMode=="function")try{Mn.setStrictMode(Gc,t)}catch{}}var Pn=Math.clz32?Math.clz32:XR,KR=Math.log,QR=Math.LN2;function XR(t){return t>>>=0,t===0?32:31-(KR(t)/QR|0)|0}var jd=256,Md=262144,Pd=4194304;function Oi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $m(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var a=0,i=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?a=Oi(s):(o&=l,o!==0?a=Oi(o):n||(n=l&~t,n!==0&&(a=Oi(n))))):(l=s&~i,l!==0?a=Oi(l):o!==0?a=Oi(o):n||(n=s&~t,n!==0&&(a=Oi(n)))),a===0?0:e!==0&&e!==a&&!(e&i)&&(i=a&-a,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:a}function Bc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function WR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YC(){var t=Pd;return Pd<<=1,!(Pd&62914560)&&(Pd=4194304),t}function _f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qc(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ZR(t,e,n,s,a,i){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=o&~n;0<n;){var m=31-Pn(n),p=1<<m;l[m]=0,c[m]=-1;var g=d[m];if(g!==null)for(d[m]=null,m=0;m<g.length;m++){var x=g[m];x!==null&&(x.lane&=-536870913)}n&=~p}s!==0&&JC(t,s,0),i!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=i&~(o&~e))}function JC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Pn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function KC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Pn(n),a=1<<s;a&e|t[s]&e&&(t[s]|=e),n&=~a}}function QC(t,e){var n=e&-e;return n=n&42?1:x0(n),n&(t.suspendedLanes|e)?0:n}function x0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function v0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function XC(){var t=ke.p;return t!==0?t:(t=window.event,t===void 0?32:bw(t.type))}function Iy(t,e){var n=ke.p;try{return ke.p=t,e()}finally{ke.p=n}}var Ei=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Ei,bn="__reactProps$"+Ei,ko="__reactContainer$"+Ei,Ip="__reactEvents$"+Ei,ej="__reactListeners$"+Ei,tj="__reactHandles$"+Ei,Ry="__reactResources$"+Ei,Hc="__reactMarker$"+Ei;function y0(t){delete t[Ht],delete t[bn],delete t[Ip],delete t[ej],delete t[tj]}function Lr(t){var e=t[Ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ko]||n[Ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vb(t);t!==null;){if(n=t[Ht])return n;t=Vb(t)}return e}t=n,n=t.parentNode}return null}function Lo(t){if(t=t[Ht]||t[ko]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Vl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(q(33))}function Kr(t){var e=t[Ry];return e||(e=t[Ry]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Vt(t){t[Hc]=!0}var WC=new Set,ZC={};function dr(t,e){mo(t,e),mo(t+"Capture",e)}function mo(t,e){for(ZC[t]=e,t=0;t<e.length;t++)WC.add(e[t])}var nj=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jy={},My={};function sj(t){return Ap.call(My,t)?!0:Ap.call(jy,t)?!1:nj.test(t)?My[t]=!0:(jy[t]=!0,!1)}function lu(t,e,n){if(sj(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Dd(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Gs(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aj(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rp(t){if(!t._valueTracker){var e=eT(t)?"checked":"value";t._valueTracker=aj(t,e,""+t[e])}}function tT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=eT(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ij=/[\n"\\]/g;function qn(t){return t.replace(ij,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function jp(t,e,n,s,a,i,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Fn(e)):t.value!==""+Fn(e)&&(t.value=""+Fn(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?Mp(t,o,Fn(e)):n!=null?Mp(t,o,Fn(n)):s!=null&&t.removeAttribute("value"),a==null&&i!=null&&(t.defaultChecked=!!i),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Fn(l):t.removeAttribute("name")}function nT(t,e,n,s,a,i,o,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){Rp(t);return}n=n!=null?""+Fn(n):"",e=e!=null?""+Fn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??a,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),Rp(t)}function Mp(t,e,n){e==="number"&&Fu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Qr(t,e,n,s){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function sT(t,e,n){if(e!=null&&(e=""+Fn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Fn(n):""}function aT(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(q(92));if(Ll(s)){if(1<s.length)throw Error(q(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Fn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Rp(t)}function ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Py(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||rj.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function iT(t,e,n){if(e!=null&&typeof e!="object")throw Error(q(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var a in e)s=e[a],e.hasOwnProperty(a)&&n[a]!==s&&Py(t,a,s)}else for(var i in e)e.hasOwnProperty(i)&&Py(t,i,e[i])}function b0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cu(t){return lj.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Xs(){}var Pp=null;function _0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vr=null,Xr=null;function Dy(t){var e=Lo(t);if(e&&(t=e.stateNode)){var n=t[bn]||null;e:switch(t=e.stateNode,e.type){case"input":if(jp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+qn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var a=s[bn]||null;if(!a)throw Error(q(90));jp(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&tT(s)}break e;case"textarea":sT(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Qr(t,!!n.multiple,e,!1)}}}var Ef=!1;function rT(t,e,n){if(Ef)return t(e,n);Ef=!0;try{var s=t(e);return s}finally{if(Ef=!1,(Vr!==null||Xr!==null)&&(ah(),Vr&&(e=Vr,t=Xr,Xr=Vr=null,Dy(e),t)))for(e=0;e<t.length;e++)Dy(t[e])}}function pc(t,e){var n=t.stateNode;if(n===null)return null;var s=n[bn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dp=!1;if(la)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){Dp=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{Dp=!1}var Ha=null,E0=null,du=null;function oT(){if(du)return du;var t,e=E0,n=e.length,s,a="value"in Ha?Ha.value:Ha.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===a[i-s];s++);return du=a.slice(t,1<s?1-s:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kd(){return!0}function ky(){return!1}function _n(t){function e(n,s,a,i,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kd:ky,this.isPropagationStopped=ky,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kd)},persist:function(){},isPersistent:kd}),e}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ym=_n(ur),$c=nt({},ur,{view:0,detail:0}),cj=_n($c),Nf,Cf,wl,Jm=nt({},$c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(Nf=t.screenX-wl.screenX,Cf=t.screenY-wl.screenY):Cf=Nf=0,wl=t),Nf)},movementY:function(t){return"movementY"in t?t.movementY:Cf}}),Ly=_n(Jm),dj=nt({},Jm,{dataTransfer:0}),uj=_n(dj),mj=nt({},$c,{relatedTarget:0}),Tf=_n(mj),hj=nt({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),fj=_n(hj),pj=nt({},ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gj=_n(pj),xj=nt({},ur,{data:0}),Vy=_n(xj),vj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _j(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bj[t])?!!e[t]:!1}function N0(){return _j}var Ej=nt({},$c,{key:function(t){if(t.key){var e=vj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N0,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nj=_n(Ej),Cj=nt({},Jm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uy=_n(Cj),Tj=nt({},$c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N0}),Sj=_n(Tj),wj=nt({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aj=_n(wj),Ij=nt({},Jm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rj=_n(Ij),jj=nt({},ur,{newState:0,oldState:0}),Mj=_n(jj),Pj=[9,13,27,32],C0=la&&"CompositionEvent"in window,Jl=null;la&&"documentMode"in document&&(Jl=document.documentMode);var Dj=la&&"TextEvent"in window&&!Jl,lT=la&&(!C0||Jl&&8<Jl&&11>=Jl),Oy=" ",zy=!1;function cT(t,e){switch(t){case"keyup":return Pj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ur=!1;function kj(t,e){switch(t){case"compositionend":return dT(e);case"keypress":return e.which!==32?null:(zy=!0,Oy);case"textInput":return t=e.data,t===Oy&&zy?null:t;default:return null}}function Lj(t,e){if(Ur)return t==="compositionend"||!C0&&cT(t,e)?(t=oT(),du=E0=Ha=null,Ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lT&&e.locale!=="ko"?null:e.data;default:return null}}var Vj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vj[t.type]:e==="textarea"}function uT(t,e,n,s){Vr?Xr?Xr.push(s):Xr=[s]:Vr=s,e=im(e,"onChange"),0<e.length&&(n=new Ym("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Kl=null,gc=null;function Uj(t){rw(t,0)}function Km(t){var e=Vl(t);if(tT(e))return t}function Gy(t,e){if(t==="change")return e}var mT=!1;if(la){var Sf;if(la){var wf="oninput"in document;if(!wf){var By=document.createElement("div");By.setAttribute("oninput","return;"),wf=typeof By.oninput=="function"}Sf=wf}else Sf=!1;mT=Sf&&(!document.documentMode||9<document.documentMode)}function qy(){Kl&&(Kl.detachEvent("onpropertychange",hT),gc=Kl=null)}function hT(t){if(t.propertyName==="value"&&Km(gc)){var e=[];uT(e,gc,t,_0(t)),rT(Uj,e)}}function Oj(t,e,n){t==="focusin"?(qy(),Kl=e,gc=n,Kl.attachEvent("onpropertychange",hT)):t==="focusout"&&qy()}function zj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Km(gc)}function Fj(t,e){if(t==="click")return Km(e)}function Gj(t,e){if(t==="input"||t==="change")return Km(e)}function Bj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:Bj;function xc(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Ap.call(e,a)||!Ln(t[a],e[a]))return!1}return!0}function Hy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $y(t,e){var n=Hy(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hy(n)}}function fT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Fu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function T0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var qj=la&&"documentMode"in document&&11>=document.documentMode,Or=null,kp=null,Ql=null,Lp=!1;function Yy(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lp||Or==null||Or!==Fu(s)||(s=Or,"selectionStart"in s&&T0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ql&&xc(Ql,s)||(Ql=s,s=im(kp,"onSelect"),0<s.length&&(e=new Ym("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Or)))}function Li(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zr={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},Af={},gT={};la&&(gT=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function mr(t){if(Af[t])return Af[t];if(!zr[t])return t;var e=zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gT)return Af[t]=e[n];return t}var xT=mr("animationend"),vT=mr("animationiteration"),yT=mr("animationstart"),Hj=mr("transitionrun"),$j=mr("transitionstart"),Yj=mr("transitioncancel"),bT=mr("transitionend"),_T=new Map,Vp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vp.push("scrollEnd");function vs(t,e){_T.set(t,e),dr(e,[t])}var Gu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zn=[],Fr=0,S0=0;function Qm(){for(var t=Fr,e=S0=Fr=0;e<t;){var n=zn[e];zn[e++]=null;var s=zn[e];zn[e++]=null;var a=zn[e];zn[e++]=null;var i=zn[e];if(zn[e++]=null,s!==null&&a!==null){var o=s.pending;o===null?a.next=a:(a.next=o.next,o.next=a),s.pending=a}i!==0&&ET(n,a,i)}}function Xm(t,e,n,s){zn[Fr++]=t,zn[Fr++]=e,zn[Fr++]=n,zn[Fr++]=s,S0|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function w0(t,e,n,s){return Xm(t,e,n,s),Bu(t)}function hr(t,e){return Xm(t,null,null,e),Bu(t)}function ET(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var a=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(a=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,a&&e!==null&&(a=31-Pn(n),t=i.hiddenUpdates,s=t[a],s===null?t[a]=[e]:s.push(e),e.lane=n|536870912),i):null}function Bu(t){if(50<ic)throw ic=0,ag=null,Error(q(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Gr={};function Jj(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,s){return new Jj(t,e,n,s)}function A0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ta(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function NT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function mu(t,e,n,s,a,i){var o=0;if(s=t,typeof t=="function")A0(t)&&(o=1);else if(typeof t=="string")o=ZM(t,n,Rs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Cp:return t=Tn(31,n,e,a),t.elementType=Cp,t.lanes=i,t;case Dr:return Ji(n.children,a,i,e);case GC:o=8,a|=24;break;case _p:return t=Tn(12,n,e,a|2),t.elementType=_p,t.lanes=i,t;case Ep:return t=Tn(13,n,e,a),t.elementType=Ep,t.lanes=i,t;case Np:return t=Tn(19,n,e,a),t.elementType=Np,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qs:o=10;break e;case BC:o=9;break e;case f0:o=11;break e;case p0:o=14;break e;case Da:o=16,s=null;break e}o=29,n=Error(q(130,t===null?"null":typeof t,"")),s=null}return e=Tn(o,n,e,a),e.elementType=t,e.type=s,e.lanes=i,e}function Ji(t,e,n,s){return t=Tn(7,t,s,e),t.lanes=n,t}function If(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function CT(t){var e=Tn(18,null,null,0);return e.stateNode=t,e}function Rf(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Jy=new WeakMap;function Hn(t,e){if(typeof t=="object"&&t!==null){var n=Jy.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ay(e)},Jy.set(t,e),e)}return{value:t,source:e,stack:Ay(e)}}var Br=[],qr=0,qu=null,vc=0,Gn=[],Bn=0,ui=null,Ss=1,ws="";function Ys(t,e){Br[qr++]=vc,Br[qr++]=qu,qu=t,vc=e}function TT(t,e,n){Gn[Bn++]=Ss,Gn[Bn++]=ws,Gn[Bn++]=ui,ui=t;var s=Ss;t=ws;var a=32-Pn(s)-1;s&=~(1<<a),n+=1;var i=32-Pn(e)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Ss=1<<32-Pn(e)+a|n<<a|s,ws=i+t}else Ss=1<<i|n<<a|s,ws=t}function I0(t){t.return!==null&&(Ys(t,1),TT(t,1,0))}function R0(t){for(;t===qu;)qu=Br[--qr],Br[qr]=null,vc=Br[--qr],Br[qr]=null;for(;t===ui;)ui=Gn[--Bn],Gn[Bn]=null,ws=Gn[--Bn],Gn[Bn]=null,Ss=Gn[--Bn],Gn[Bn]=null}function ST(t,e){Gn[Bn++]=Ss,Gn[Bn++]=ws,Gn[Bn++]=ui,Ss=e.id,ws=e.overflow,ui=t}var $t=null,Ze=null,we=!1,Xa=null,$n=!1,Up=Error(q(519));function mi(t){var e=Error(q(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yc(Hn(e,t)),Up}function Ky(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Ht]=t,e[bn]=s,n){case"dialog":_e("cancel",e),_e("close",e);break;case"iframe":case"object":case"embed":_e("load",e);break;case"video":case"audio":for(n=0;n<Nc.length;n++)_e(Nc[n],e);break;case"source":_e("error",e);break;case"img":case"image":case"link":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"input":_e("invalid",e),nT(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":_e("invalid",e);break;case"textarea":_e("invalid",e),aT(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||lw(e.textContent,n)?(s.popover!=null&&(_e("beforetoggle",e),_e("toggle",e)),s.onScroll!=null&&_e("scroll",e),s.onScrollEnd!=null&&_e("scrollend",e),s.onClick!=null&&(e.onclick=Xs),e=!0):e=!1,e||mi(t,!0)}function Qy(t){for($t=t.return;$t;)switch($t.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:$t=$t.return}}function Er(t){if(t!==$t)return!1;if(!we)return Qy(t),we=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||cg(t.type,t.memoizedProps)),n=!n),n&&Ze&&mi(t),Qy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));Ze=Lb(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));Ze=Lb(t)}else e===27?(e=Ze,Ni(t.type)?(t=hg,hg=null,Ze=t):Ze=e):Ze=$t?Jn(t.stateNode.nextSibling):null;return!0}function Wi(){Ze=$t=null,we=!1}function jf(){var t=Xa;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Xa=null),t}function yc(t){Xa===null?Xa=[t]:Xa.push(t)}var Op=Vs(null),fr=null,Ws=null;function Va(t,e,n){Je(Op,e._currentValue),e._currentValue=n}function na(t){t._currentValue=Op.current,Ot(Op)}function zp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Fp(t,e,n,s){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){var o=a.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=a;for(var c=0;c<e.length;c++)if(l.context===e[c]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),zp(i.return,n,t),s||(o=null);break e}i=l.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(q(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),zp(o,n,t),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Vo(t,e,n,s){t=null;for(var a=e,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(q(387));if(o=o.memoizedProps,o!==null){var l=a.type;Ln(a.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(a===Vu.current){if(o=a.alternate,o===null)throw Error(q(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(Tc):t=[Tc])}a=a.return}t!==null&&Fp(e,t,n,s),e.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zi(t){fr=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return wT(fr,t)}function Ld(t,e){return fr===null&&Zi(t),wT(t,e)}function wT(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ws===null){if(t===null)throw Error(q(308));Ws=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ws=Ws.next=e;return n}var Kj=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Qj=Mt.unstable_scheduleCallback,Xj=Mt.unstable_NormalPriority,Nt={$$typeof:Qs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function j0(){return{controller:new Kj,data:new Map,refCount:0}}function Yc(t){t.refCount--,t.refCount===0&&Qj(Xj,function(){t.controller.abort()})}var Xl=null,Gp=0,fo=0,Wr=null;function Wj(t,e){if(Xl===null){var n=Xl=[];Gp=0,fo=nx(),Wr={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Gp++,e.then(Xy,Xy),e}function Xy(){if(--Gp===0&&Xl!==null){Wr!==null&&(Wr.status="fulfilled");var t=Xl;Xl=null,fo=0,Wr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Zj(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(s.status="rejected",s.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),s}var Wy=ce.S;ce.S=function(t,e){FS=jn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Wj(t,e),Wy!==null&&Wy(t,e)};var Ki=Vs(null);function M0(){var t=Ki.current;return t!==null?t:qe.pooledCache}function hu(t,e){e===null?Je(Ki,Ki.current):Je(Ki,e.pool)}function AT(){var t=M0();return t===null?null:{parent:Nt._currentValue,pool:t}}var Uo=Error(q(460)),P0=Error(q(474)),Wm=Error(q(542)),$u={then:function(){}};function Zy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function IT(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Xs,Xs),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,tb(t),t;default:if(typeof e.status=="string")e.then(Xs,Xs);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(q(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=s}},function(s){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,tb(t),t}throw Qi=e,Uo}}function zi(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Qi=n,Uo):n}}var Qi=null;function eb(){if(Qi===null)throw Error(q(459));var t=Qi;return Qi=null,t}function tb(t){if(t===Uo||t===Wm)throw Error(q(483))}var Zr=null,bc=0;function Vd(t){var e=bc;return bc+=1,Zr===null&&(Zr=[]),IT(Zr,t,e)}function Al(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ud(t,e){throw e.$$typeof===OR?Error(q(525)):(t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function RT(t){function e(b,N){if(t){var w=b.deletions;w===null?(b.deletions=[N],b.flags|=16):w.push(N)}}function n(b,N){if(!t)return null;for(;N!==null;)e(b,N),N=N.sibling;return null}function s(b){for(var N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(b,N){return b=ta(b,N),b.index=0,b.sibling=null,b}function i(b,N,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<N?(b.flags|=67108866,N):w):(b.flags|=67108866,N)):(b.flags|=1048576,N)}function o(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function l(b,N,w,D){return N===null||N.tag!==6?(N=If(w,b.mode,D),N.return=b,N):(N=a(N,w),N.return=b,N)}function c(b,N,w,D){var V=w.type;return V===Dr?m(b,N,w.props.children,D,w.key):N!==null&&(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Da&&zi(V)===N.type)?(N=a(N,w.props),Al(N,w),N.return=b,N):(N=mu(w.type,w.key,w.props,null,b.mode,D),Al(N,w),N.return=b,N)}function d(b,N,w,D){return N===null||N.tag!==4||N.stateNode.containerInfo!==w.containerInfo||N.stateNode.implementation!==w.implementation?(N=Rf(w,b.mode,D),N.return=b,N):(N=a(N,w.children||[]),N.return=b,N)}function m(b,N,w,D,V){return N===null||N.tag!==7?(N=Ji(w,b.mode,D,V),N.return=b,N):(N=a(N,w),N.return=b,N)}function p(b,N,w){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=If(""+N,b.mode,w),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rd:return w=mu(N.type,N.key,N.props,null,b.mode,w),Al(w,N),w.return=b,w;case kl:return N=Rf(N,b.mode,w),N.return=b,N;case Da:return N=zi(N),p(b,N,w)}if(Ll(N)||Tl(N))return N=Ji(N,b.mode,w,null),N.return=b,N;if(typeof N.then=="function")return p(b,Vd(N),w);if(N.$$typeof===Qs)return p(b,Ld(b,N),w);Ud(b,N)}return null}function g(b,N,w,D){var V=N!==null?N.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return V!==null?null:l(b,N,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rd:return w.key===V?c(b,N,w,D):null;case kl:return w.key===V?d(b,N,w,D):null;case Da:return w=zi(w),g(b,N,w,D)}if(Ll(w)||Tl(w))return V!==null?null:m(b,N,w,D,null);if(typeof w.then=="function")return g(b,N,Vd(w),D);if(w.$$typeof===Qs)return g(b,N,Ld(b,w),D);Ud(b,w)}return null}function x(b,N,w,D,V){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return b=b.get(w)||null,l(N,b,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Rd:return b=b.get(D.key===null?w:D.key)||null,c(N,b,D,V);case kl:return b=b.get(D.key===null?w:D.key)||null,d(N,b,D,V);case Da:return D=zi(D),x(b,N,w,D,V)}if(Ll(D)||Tl(D))return b=b.get(w)||null,m(N,b,D,V,null);if(typeof D.then=="function")return x(b,N,w,Vd(D),V);if(D.$$typeof===Qs)return x(b,N,w,Ld(N,D),V);Ud(N,D)}return null}function y(b,N,w,D){for(var V=null,k=null,R=N,E=N=0,S=null;R!==null&&E<w.length;E++){R.index>E?(S=R,R=null):S=R.sibling;var C=g(b,R,w[E],D);if(C===null){R===null&&(R=S);break}t&&R&&C.alternate===null&&e(b,R),N=i(C,N,E),k===null?V=C:k.sibling=C,k=C,R=S}if(E===w.length)return n(b,R),we&&Ys(b,E),V;if(R===null){for(;E<w.length;E++)R=p(b,w[E],D),R!==null&&(N=i(R,N,E),k===null?V=R:k.sibling=R,k=R);return we&&Ys(b,E),V}for(R=s(R);E<w.length;E++)S=x(R,b,E,w[E],D),S!==null&&(t&&S.alternate!==null&&R.delete(S.key===null?E:S.key),N=i(S,N,E),k===null?V=S:k.sibling=S,k=S);return t&&R.forEach(function(_){return e(b,_)}),we&&Ys(b,E),V}function T(b,N,w,D){if(w==null)throw Error(q(151));for(var V=null,k=null,R=N,E=N=0,S=null,C=w.next();R!==null&&!C.done;E++,C=w.next()){R.index>E?(S=R,R=null):S=R.sibling;var _=g(b,R,C.value,D);if(_===null){R===null&&(R=S);break}t&&R&&_.alternate===null&&e(b,R),N=i(_,N,E),k===null?V=_:k.sibling=_,k=_,R=S}if(C.done)return n(b,R),we&&Ys(b,E),V;if(R===null){for(;!C.done;E++,C=w.next())C=p(b,C.value,D),C!==null&&(N=i(C,N,E),k===null?V=C:k.sibling=C,k=C);return we&&Ys(b,E),V}for(R=s(R);!C.done;E++,C=w.next())C=x(R,b,E,C.value,D),C!==null&&(t&&C.alternate!==null&&R.delete(C.key===null?E:C.key),N=i(C,N,E),k===null?V=C:k.sibling=C,k=C);return t&&R.forEach(function(P){return e(b,P)}),we&&Ys(b,E),V}function I(b,N,w,D){if(typeof w=="object"&&w!==null&&w.type===Dr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Rd:e:{for(var V=w.key;N!==null;){if(N.key===V){if(V=w.type,V===Dr){if(N.tag===7){n(b,N.sibling),D=a(N,w.props.children),D.return=b,b=D;break e}}else if(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Da&&zi(V)===N.type){n(b,N.sibling),D=a(N,w.props),Al(D,w),D.return=b,b=D;break e}n(b,N);break}else e(b,N);N=N.sibling}w.type===Dr?(D=Ji(w.props.children,b.mode,D,w.key),D.return=b,b=D):(D=mu(w.type,w.key,w.props,null,b.mode,D),Al(D,w),D.return=b,b=D)}return o(b);case kl:e:{for(V=w.key;N!==null;){if(N.key===V)if(N.tag===4&&N.stateNode.containerInfo===w.containerInfo&&N.stateNode.implementation===w.implementation){n(b,N.sibling),D=a(N,w.children||[]),D.return=b,b=D;break e}else{n(b,N);break}else e(b,N);N=N.sibling}D=Rf(w,b.mode,D),D.return=b,b=D}return o(b);case Da:return w=zi(w),I(b,N,w,D)}if(Ll(w))return y(b,N,w,D);if(Tl(w)){if(V=Tl(w),typeof V!="function")throw Error(q(150));return w=V.call(w),T(b,N,w,D)}if(typeof w.then=="function")return I(b,N,Vd(w),D);if(w.$$typeof===Qs)return I(b,N,Ld(b,w),D);Ud(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,N!==null&&N.tag===6?(n(b,N.sibling),D=a(N,w),D.return=b,b=D):(n(b,N),D=If(w,b.mode,D),D.return=b,b=D),o(b)):n(b,N)}return function(b,N,w,D){try{bc=0;var V=I(b,N,w,D);return Zr=null,V}catch(R){if(R===Uo||R===Wm)throw R;var k=Tn(29,R,null,b.mode);return k.lanes=D,k.return=b,k}finally{}}}var er=RT(!0),jT=RT(!1),ka=!1;function D0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Wa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Za(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,De&2){var a=s.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),s.pending=e,e=Bu(t),ET(t,null,n),e}return Xm(t,s,e,n),Bu(t)}function Wl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,KC(t,n)}}function Mf(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var qp=!1;function Zl(){if(qp){var t=Wr;if(t!==null)throw t}}function ec(t,e,n,s){qp=!1;var a=t.updateQueue;ka=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var p=a.baseState;o=0,m=d=c=null,l=i;do{var g=l.lane&-536870913,x=g!==l.lane;if(x?(Se&g)===g:(s&g)===g){g!==0&&g===fo&&(qp=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var y=t,T=l;g=e;var I=n;switch(T.tag){case 1:if(y=T.payload,typeof y=="function"){p=y.call(I,p,g);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=T.payload,g=typeof y=="function"?y.call(I,p,g):y,g==null)break e;p=nt({},p,g);break e;case 2:ka=!0}}g=l.callback,g!==null&&(t.flags|=64,x&&(t.flags|=8192),x=a.callbacks,x===null?a.callbacks=[g]:x.push(g))}else x={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=x,c=p):m=m.next=x,o|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;x=l,l=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);m===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,i===null&&(a.shared.lanes=0),fi|=o,t.lanes=o,t.memoizedState=p}}function MT(t,e){if(typeof t!="function")throw Error(q(191,t));t.call(e)}function PT(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)MT(n[t],e)}var po=Vs(null),Yu=Vs(0);function nb(t,e){t=ma,Je(Yu,t),Je(po,e),ma=t|e.baseLanes}function Hp(){Je(Yu,ma),Je(po,po.current)}function k0(){ma=Yu.current,Ot(po),Ot(Yu)}var Vn=Vs(null),Yn=null;function Ua(t){var e=t.alternate;Je(gt,gt.current&1),Je(Vn,t),Yn===null&&(e===null||po.current!==null||e.memoizedState!==null)&&(Yn=t)}function $p(t){Je(gt,gt.current),Je(Vn,t),Yn===null&&(Yn=t)}function DT(t){t.tag===22?(Je(gt,gt.current),Je(Vn,t),Yn===null&&(Yn=t)):Oa()}function Oa(){Je(gt,gt.current),Je(Vn,Vn.current)}function Cn(t){Ot(Vn),Yn===t&&(Yn=null),Ot(gt)}var gt=Vs(0);function Ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ug(n)||mg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ca=0,xe=null,Fe=null,_t=null,Ku=!1,eo=!1,tr=!1,Qu=0,_c=0,to=null,eM=0;function ht(){throw Error(q(321))}function L0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function V0(t,e,n,s,a,i){return ca=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ce.H=t===null||t.memoizedState===null?uS:J0,tr=!1,i=n(s,a),tr=!1,eo&&(i=LT(e,n,s,a)),kT(t),i}function kT(t){ce.H=Ec;var e=Fe!==null&&Fe.next!==null;if(ca=0,_t=Fe=xe=null,Ku=!1,_c=0,to=null,e)throw Error(q(300));t===null||Tt||(t=t.dependencies,t!==null&&Hu(t)&&(Tt=!0))}function LT(t,e,n,s){xe=t;var a=0;do{if(eo&&(to=null),_c=0,eo=!1,25<=a)throw Error(q(301));if(a+=1,_t=Fe=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ce.H=mS,i=e(n,s)}while(eo);return i}function tM(){var t=ce.H,e=t.useState()[0];return e=typeof e.then=="function"?Jc(e):e,t=t.useState()[0],(Fe!==null?Fe.memoizedState:null)!==t&&(xe.flags|=1024),e}function U0(){var t=Qu!==0;return Qu=0,t}function O0(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function z0(t){if(Ku){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ku=!1}ca=0,_t=Fe=xe=null,eo=!1,_c=Qu=0,to=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?xe.memoizedState=_t=t:_t=_t.next=t,_t}function xt(){if(Fe===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=_t===null?xe.memoizedState:_t.next;if(e!==null)_t=e,Fe=t;else{if(t===null)throw xe.alternate===null?Error(q(467)):Error(q(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},_t===null?xe.memoizedState=_t=t:_t=_t.next=t}return _t}function Zm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(t){var e=_c;return _c+=1,to===null&&(to=[]),t=IT(to,t,e),e=xe,(_t===null?e.memoizedState:_t.next)===null&&(e=e.alternate,ce.H=e===null||e.memoizedState===null?uS:J0),t}function eh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Jc(t);if(t.$$typeof===Qs)return Yt(t)}throw Error(q(438,String(t)))}function F0(t){var e=null,n=xe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=xe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Zm(),xe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=zR;return e.index++,n}function da(t,e){return typeof e=="function"?e(t):e}function fu(t){var e=xt();return G0(e,Fe,t)}function G0(t,e,n){var s=t.queue;if(s===null)throw Error(q(311));s.lastRenderedReducer=n;var a=t.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}e.baseQueue=a=i,s.pending=null}if(i=t.baseState,a===null)t.memoizedState=i;else{e=a.next;var l=o=null,c=null,d=e,m=!1;do{var p=d.lane&-536870913;if(p!==d.lane?(Se&p)===p:(ca&p)===p){var g=d.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),p===fo&&(m=!0);else if((ca&g)===g){d=d.next,g===fo&&(m=!0);continue}else p={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,o=i):c=c.next=p,xe.lanes|=g,fi|=g;p=d.action,tr&&n(i,p),i=d.hasEagerState?d.eagerState:n(i,p)}else g={lane:p,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=g,o=i):c=c.next=g,xe.lanes|=p,fi|=p;d=d.next}while(d!==null&&d!==e);if(c===null?o=i:c.next=l,!Ln(i,t.memoizedState)&&(Tt=!0,m&&(n=Wr,n!==null)))throw n;t.memoizedState=i,t.baseState=o,t.baseQueue=c,s.lastRenderedState=i}return a===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Pf(t){var e=xt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var s=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);Ln(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function VT(t,e,n){var s=xe,a=xt(),i=we;if(i){if(n===void 0)throw Error(q(407));n=n()}else n=e();var o=!Ln((Fe||a).memoizedState,n);if(o&&(a.memoizedState=n,Tt=!0),a=a.queue,B0(zT.bind(null,s,a,t),[t]),a.getSnapshot!==e||o||_t!==null&&_t.memoizedState.tag&1){if(s.flags|=2048,go(9,{destroy:void 0},OT.bind(null,s,a,n,e),null),qe===null)throw Error(q(349));i||ca&127||UT(s,e,n)}return n}function UT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e=Zm(),xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OT(t,e,n,s){e.value=n,e.getSnapshot=s,FT(e)&&GT(t)}function zT(t,e,n){return n(function(){FT(e)&&GT(t)})}function FT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function GT(t){var e=hr(t,2);e!==null&&yn(e,t,2)}function Yp(t){var e=on();if(typeof t=="function"){var n=t;if(t=n(),tr){qa(!0);try{n()}finally{qa(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e}function BT(t,e,n,s){return t.baseState=n,G0(t,Fe,typeof s=="function"?s:da)}function nM(t,e,n,s,a){if(nh(t))throw Error(q(485));if(t=e.action,t!==null){var i={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ce.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,qT(e,i)):(i.next=n.next,e.pending=n.next=i)}}function qT(t,e){var n=e.action,s=e.payload,a=t.state;if(e.isTransition){var i=ce.T,o={};ce.T=o;try{var l=n(a,s),c=ce.S;c!==null&&c(o,l),sb(t,e,l)}catch(d){Jp(t,e,d)}finally{i!==null&&o.types!==null&&(i.types=o.types),ce.T=i}}else try{i=n(a,s),sb(t,e,i)}catch(d){Jp(t,e,d)}}function sb(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){ab(t,e,s)},function(s){return Jp(t,e,s)}):ab(t,e,n)}function ab(t,e,n){e.status="fulfilled",e.value=n,HT(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,qT(t,n)))}function Jp(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,HT(e),e=e.next;while(e!==s)}t.action=null}function HT(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function $T(t,e){return e}function ib(t,e){if(we){var n=qe.formState;if(n!==null){e:{var s=xe;if(we){if(Ze){t:{for(var a=Ze,i=$n;a.nodeType!==8;){if(!i){a=null;break t}if(a=Jn(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){Ze=Jn(a.nextSibling),s=a.data==="F!";break e}}mi(s)}s=!1}s&&(e=n[0])}}return n=on(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$T,lastRenderedState:e},n.queue=s,n=lS.bind(null,xe,s),s.dispatch=n,s=Yp(!1),i=Y0.bind(null,xe,!1,s.queue),s=on(),a={state:e,dispatch:null,action:t,pending:null},s.queue=a,n=nM.bind(null,xe,a,i,n),a.dispatch=n,s.memoizedState=t,[e,n,!1]}function rb(t){var e=xt();return YT(e,Fe,t)}function YT(t,e,n){if(e=G0(t,e,$T)[0],t=fu(da)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Jc(e)}catch(o){throw o===Uo?Wm:o}else s=e;e=xt();var a=e.queue,i=a.dispatch;return n!==e.memoizedState&&(xe.flags|=2048,go(9,{destroy:void 0},sM.bind(null,a,n),null)),[s,i,t]}function sM(t,e){t.action=e}function ob(t){var e=xt(),n=Fe;if(n!==null)return YT(e,n,t);xt(),e=e.memoizedState,n=xt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function go(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=xe.updateQueue,e===null&&(e=Zm(),xe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function JT(){return xt().memoizedState}function pu(t,e,n,s){var a=on();xe.flags|=t,a.memoizedState=go(1|e,{destroy:void 0},n,s===void 0?null:s)}function th(t,e,n,s){var a=xt();s=s===void 0?null:s;var i=a.memoizedState.inst;Fe!==null&&s!==null&&L0(s,Fe.memoizedState.deps)?a.memoizedState=go(e,i,n,s):(xe.flags|=t,a.memoizedState=go(1|e,i,n,s))}function lb(t,e){pu(8390656,8,t,e)}function B0(t,e){th(2048,8,t,e)}function aM(t){xe.flags|=4;var e=xe.updateQueue;if(e===null)e=Zm(),xe.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function KT(t){var e=xt().memoizedState;return aM({ref:e,nextImpl:t}),function(){if(De&2)throw Error(q(440));return e.impl.apply(void 0,arguments)}}function QT(t,e){return th(4,2,t,e)}function XT(t,e){return th(4,4,t,e)}function WT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZT(t,e,n){n=n!=null?n.concat([t]):null,th(4,4,WT.bind(null,e,t),n)}function q0(){}function eS(t,e){var n=xt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&L0(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function tS(t,e){var n=xt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&L0(e,s[1]))return s[0];if(s=t(),tr){qa(!0);try{t()}finally{qa(!1)}}return n.memoizedState=[s,e],s}function H0(t,e,n){return n===void 0||ca&1073741824&&!(Se&261930)?t.memoizedState=e:(t.memoizedState=n,t=BS(),xe.lanes|=t,fi|=t,n)}function nS(t,e,n,s){return Ln(n,e)?n:po.current!==null?(t=H0(t,n,s),Ln(t,e)||(Tt=!0),t):!(ca&42)||ca&1073741824&&!(Se&261930)?(Tt=!0,t.memoizedState=n):(t=BS(),xe.lanes|=t,fi|=t,e)}function sS(t,e,n,s,a){var i=ke.p;ke.p=i!==0&&8>i?i:8;var o=ce.T,l={};ce.T=l,Y0(t,!1,e,n);try{var c=a(),d=ce.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=Zj(c,s);tc(t,e,m,Dn(t))}else tc(t,e,s,Dn(t))}catch(p){tc(t,e,{then:function(){},status:"rejected",reason:p},Dn())}finally{ke.p=i,o!==null&&l.types!==null&&(o.types=l.types),ce.T=o}}function iM(){}function Kp(t,e,n,s){if(t.tag!==5)throw Error(q(476));var a=aS(t).queue;sS(t,a,e,Yi,n===null?iM:function(){return iS(t),n(s)})}function aS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Yi,baseState:Yi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:Yi},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function iS(t){var e=aS(t);e.next===null&&(e=t.alternate.memoizedState),tc(t,e.next.queue,{},Dn())}function $0(){return Yt(Tc)}function rS(){return xt().memoizedState}function oS(){return xt().memoizedState}function rM(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Dn();t=Wa(n);var s=Za(e,t,n);s!==null&&(yn(s,e,n),Wl(s,e,n)),e={cache:j0()},t.payload=e;return}e=e.return}}function oM(t,e,n){var s=Dn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},nh(t)?cS(e,n):(n=w0(t,e,n,s),n!==null&&(yn(n,t,s),dS(n,e,s)))}function lS(t,e,n){var s=Dn();tc(t,e,n,s)}function tc(t,e,n,s){var a={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(nh(t))cS(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Ln(l,o))return Xm(t,e,a,0),qe===null&&Qm(),!1}catch{}finally{}if(n=w0(t,e,a,s),n!==null)return yn(n,t,s),dS(n,e,s),!0}return!1}function Y0(t,e,n,s){if(s={lane:2,revertLane:nx(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},nh(t)){if(e)throw Error(q(479))}else e=w0(t,n,s,2),e!==null&&yn(e,t,2)}function nh(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function cS(t,e){eo=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dS(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,KC(t,n)}}var Ec={readContext:Yt,use:eh,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Ec.useEffectEvent=ht;var uS={readContext:Yt,use:eh,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:lb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,pu(4194308,4,WT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pu(4194308,4,t,e)},useInsertionEffect:function(t,e){pu(4,2,t,e)},useMemo:function(t,e){var n=on();e=e===void 0?null:e;var s=t();if(tr){qa(!0);try{t()}finally{qa(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=on();if(n!==void 0){var a=n(e);if(tr){qa(!0);try{n(e)}finally{qa(!1)}}}else a=e;return s.memoizedState=s.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},s.queue=t,t=t.dispatch=oM.bind(null,xe,t),[s.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:function(t){t=Yp(t);var e=t.queue,n=lS.bind(null,xe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:q0,useDeferredValue:function(t,e){var n=on();return H0(n,t,e)},useTransition:function(){var t=Yp(!1);return t=sS.bind(null,xe,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=xe,a=on();if(we){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),qe===null)throw Error(q(349));Se&127||UT(s,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,lb(zT.bind(null,s,i,t),[t]),s.flags|=2048,go(9,{destroy:void 0},OT.bind(null,s,i,n,e),null),n},useId:function(){var t=on(),e=qe.identifierPrefix;if(we){var n=ws,s=Ss;n=(s&~(1<<32-Pn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Qu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=eM++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:$0,useFormState:ib,useActionState:ib,useOptimistic:function(t){var e=on();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Y0.bind(null,xe,!0,n),n.dispatch=e,[t,e]},useMemoCache:F0,useCacheRefresh:function(){return on().memoizedState=rM.bind(null,xe)},useEffectEvent:function(t){var e=on(),n={impl:t};return e.memoizedState=n,function(){if(De&2)throw Error(q(440));return n.impl.apply(void 0,arguments)}}},J0={readContext:Yt,use:eh,useCallback:eS,useContext:Yt,useEffect:B0,useImperativeHandle:ZT,useInsertionEffect:QT,useLayoutEffect:XT,useMemo:tS,useReducer:fu,useRef:JT,useState:function(){return fu(da)},useDebugValue:q0,useDeferredValue:function(t,e){var n=xt();return nS(n,Fe.memoizedState,t,e)},useTransition:function(){var t=fu(da)[0],e=xt().memoizedState;return[typeof t=="boolean"?t:Jc(t),e]},useSyncExternalStore:VT,useId:rS,useHostTransitionStatus:$0,useFormState:rb,useActionState:rb,useOptimistic:function(t,e){var n=xt();return BT(n,Fe,t,e)},useMemoCache:F0,useCacheRefresh:oS};J0.useEffectEvent=KT;var mS={readContext:Yt,use:eh,useCallback:eS,useContext:Yt,useEffect:B0,useImperativeHandle:ZT,useInsertionEffect:QT,useLayoutEffect:XT,useMemo:tS,useReducer:Pf,useRef:JT,useState:function(){return Pf(da)},useDebugValue:q0,useDeferredValue:function(t,e){var n=xt();return Fe===null?H0(n,t,e):nS(n,Fe.memoizedState,t,e)},useTransition:function(){var t=Pf(da)[0],e=xt().memoizedState;return[typeof t=="boolean"?t:Jc(t),e]},useSyncExternalStore:VT,useId:rS,useHostTransitionStatus:$0,useFormState:ob,useActionState:ob,useOptimistic:function(t,e){var n=xt();return Fe!==null?BT(n,Fe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:F0,useCacheRefresh:oS};mS.useEffectEvent=KT;function Df(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qp={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Dn(),a=Wa(s);a.payload=e,n!=null&&(a.callback=n),e=Za(t,a,s),e!==null&&(yn(e,t,s),Wl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Dn(),a=Wa(s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Za(t,a,s),e!==null&&(yn(e,t,s),Wl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),s=Wa(n);s.tag=2,e!=null&&(s.callback=e),e=Za(t,s,n),e!==null&&(yn(e,t,n),Wl(e,t,n))}};function cb(t,e,n,s,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!xc(n,s)||!xc(a,i):!0}function db(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Qp.enqueueReplaceState(e,e.state,null)}function nr(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=nt({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}function hS(t){Gu(t)}function fS(t){console.error(t)}function pS(t){Gu(t)}function Xu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function ub(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Xp(t,e,n){return n=Wa(n),n.tag=3,n.payload={element:null},n.callback=function(){Xu(t,e)},n}function gS(t){return t=Wa(t),t.tag=3,t}function xS(t,e,n,s){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=s.value;t.payload=function(){return a(i)},t.callback=function(){ub(e,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){ub(e,n,s),typeof a!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function lM(t,e,n,s,a){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Vo(e,n,a,!0),n=Vn.current,n!==null){switch(n.tag){case 31:case 13:return Yn===null?nm():n.alternate===null&&ft===0&&(ft=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===$u?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Hf(t,s,a)),!1;case 22:return n.flags|=65536,s===$u?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Hf(t,s,a)),!1}throw Error(q(435,n.tag))}return Hf(t,s,a),nm(),!1}if(we)return e=Vn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,s!==Up&&(t=Error(q(422),{cause:s}),yc(Hn(t,n)))):(s!==Up&&(e=Error(q(423),{cause:s}),yc(Hn(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,s=Hn(s,n),a=Xp(t.stateNode,s,a),Mf(t,a),ft!==4&&(ft=2)),!1;var i=Error(q(520),{cause:s});if(i=Hn(i,n),ac===null?ac=[i]:ac.push(i),ft!==4&&(ft=2),e===null)return!0;s=Hn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=Xp(n.stateNode,s,t),Mf(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(ei===null||!ei.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=gS(a),xS(a,t,n,s),Mf(n,a),!1}n=n.return}while(n!==null);return!1}var K0=Error(q(461)),Tt=!1;function Bt(t,e,n,s){e.child=t===null?jT(e,null,n,s):er(e,t.child,n,s)}function mb(t,e,n,s,a){n=n.render;var i=e.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return Zi(e),s=V0(t,e,n,o,i,a),l=U0(),t!==null&&!Tt?(O0(t,e,a),ua(t,e,a)):(we&&l&&I0(e),e.flags|=1,Bt(t,e,s,a),e.child)}function hb(t,e,n,s,a){if(t===null){var i=n.type;return typeof i=="function"&&!A0(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,vS(t,e,i,s,a)):(t=mu(n.type,null,s,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!Q0(t,a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xc,n(o,s)&&t.ref===e.ref)return ua(t,e,a)}return e.flags|=1,t=ta(i,s),t.ref=e.ref,t.return=e,e.child=t}function vS(t,e,n,s,a){if(t!==null){var i=t.memoizedProps;if(xc(i,s)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=s=i,Q0(t,a))t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,ua(t,e,a)}return Wp(t,e,n,s,a)}function yS(t,e,n,s){var a=s.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,a=0;s!==null;)a=a|s.lanes|s.childLanes,s=s.sibling;s=a&~i}else s=0,e.child=null;return fb(t,e,i,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&hu(e,i!==null?i.cachePool:null),i!==null?nb(e,i):Hp(),DT(e);else return s=e.lanes=536870912,fb(t,e,i!==null?i.baseLanes|n:n,n,s)}else i!==null?(hu(e,i.cachePool),nb(e,i),Oa(),e.memoizedState=null):(t!==null&&hu(e,null),Hp(),Oa());return Bt(t,e,a,n),e.child}function Ul(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function fb(t,e,n,s,a){var i=M0();return i=i===null?null:{parent:Nt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&hu(e,null),Hp(),DT(e),t!==null&&Vo(t,e,s,!0),e.childLanes=a,null}function gu(t,e){return e=Wu({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function pb(t,e,n){return er(e,t.child,null,n),t=gu(e,e.pendingProps),t.flags|=2,Cn(e),e.memoizedState=null,t}function cM(t,e,n){var s=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(we){if(s.mode==="hidden")return t=gu(e,s),e.lanes=536870912,Ul(null,t);if($p(e),(t=Ze)?(t=uw(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ui!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},n=CT(t),n.return=e,e.child=n,$t=e,Ze=null)):t=null,t===null)throw mi(e);return e.lanes=536870912,null}return gu(e,s)}var i=t.memoizedState;if(i!==null){var o=i.dehydrated;if($p(e),a)if(e.flags&256)e.flags&=-257,e=pb(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(q(558));else if(Tt||Vo(t,e,n,!1),a=(n&t.childLanes)!==0,Tt||a){if(s=qe,s!==null&&(o=QC(s,n),o!==0&&o!==i.retryLane))throw i.retryLane=o,hr(t,o),yn(s,t,o),K0;nm(),e=pb(t,e,n)}else t=i.treeContext,Ze=Jn(o.nextSibling),$t=e,we=!0,Xa=null,$n=!1,t!==null&&ST(e,t),e=gu(e,s),e.flags|=4096;return e}return t=ta(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function xu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(q(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Wp(t,e,n,s,a){return Zi(e),n=V0(t,e,n,s,void 0,a),s=U0(),t!==null&&!Tt?(O0(t,e,a),ua(t,e,a)):(we&&s&&I0(e),e.flags|=1,Bt(t,e,n,a),e.child)}function gb(t,e,n,s,a,i){return Zi(e),e.updateQueue=null,n=LT(e,s,n,a),kT(t),s=U0(),t!==null&&!Tt?(O0(t,e,i),ua(t,e,i)):(we&&s&&I0(e),e.flags|=1,Bt(t,e,n,i),e.child)}function xb(t,e,n,s,a){if(Zi(e),e.stateNode===null){var i=Gr,o=n.contextType;typeof o=="object"&&o!==null&&(i=Yt(o)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Qp,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},D0(e),o=n.contextType,i.context=typeof o=="object"&&o!==null?Yt(o):Gr,i.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Df(e,n,o,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&Qp.enqueueReplaceState(i,i.state,null),ec(e,s,i,a),Zl(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var l=e.memoizedProps,c=nr(n,l);i.props=c;var d=i.context,m=n.contextType;o=Gr,typeof m=="object"&&m!==null&&(o=Yt(m));var p=n.getDerivedStateFromProps;m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||d!==o)&&db(e,i,s,o),ka=!1;var g=e.memoizedState;i.state=g,ec(e,s,i,a),Zl(),d=e.memoizedState,l||g!==d||ka?(typeof p=="function"&&(Df(e,n,p,s),d=e.memoizedState),(c=ka||cb(e,n,c,s,g,d,o))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),i.props=s,i.state=d,i.context=o,s=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Bp(t,e),o=e.memoizedProps,m=nr(n,o),i.props=m,p=e.pendingProps,g=i.context,d=n.contextType,c=Gr,typeof d=="object"&&d!==null&&(c=Yt(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==p||g!==c)&&db(e,i,s,c),ka=!1,g=e.memoizedState,i.state=g,ec(e,s,i,a),Zl();var x=e.memoizedState;o!==p||g!==x||ka||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof l=="function"&&(Df(e,n,l,s),x=e.memoizedState),(m=ka||cb(e,n,m,s,g,x,c)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,x,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),i.props=s,i.state=x,i.context=c,s=m):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,xu(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=er(e,t.child,null,a),e.child=er(e,null,n,a)):Bt(t,e,n,a),e.memoizedState=i.state,t=e.child):t=ua(t,e,a),t}function vb(t,e,n,s){return Wi(),e.flags|=256,Bt(t,e,n,s),e.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lf(t){return{baseLanes:t,cachePool:AT()}}function Vf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=An),t}function bS(t,e,n){var s=e.pendingProps,a=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(gt.current&2)!==0),o&&(a=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(we){if(a?Ua(e):Oa(),(t=Ze)?(t=uw(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ui!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},n=CT(t),n.return=e,e.child=n,$t=e,Ze=null)):t=null,t===null)throw mi(e);return mg(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,a?(Oa(),a=e.mode,l=Wu({mode:"hidden",children:l},a),s=Ji(s,a,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=Lf(n),s.childLanes=Vf(t,o,n),e.memoizedState=kf,Ul(null,s)):(Ua(e),Zp(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(i)e.flags&256?(Ua(e),e.flags&=-257,e=Uf(t,e,n)):e.memoizedState!==null?(Oa(),e.child=t.child,e.flags|=128,e=null):(Oa(),l=s.fallback,a=e.mode,s=Wu({mode:"visible",children:s.children},a),l=Ji(l,a,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,er(e,t.child,null,n),s=e.child,s.memoizedState=Lf(n),s.childLanes=Vf(t,o,n),e.memoizedState=kf,e=Ul(null,s));else if(Ua(e),mg(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,s=Error(q(419)),s.stack="",s.digest=o,yc({value:s,source:null,stack:null}),e=Uf(t,e,n)}else if(Tt||Vo(t,e,n,!1),o=(n&t.childLanes)!==0,Tt||o){if(o=qe,o!==null&&(s=QC(o,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,hr(t,s),yn(o,t,s),K0;ug(l)||nm(),e=Uf(t,e,n)}else ug(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Ze=Jn(l.nextSibling),$t=e,we=!0,Xa=null,$n=!1,t!==null&&ST(e,t),e=Zp(e,s.children),e.flags|=4096);return e}return a?(Oa(),l=s.fallback,a=e.mode,c=t.child,d=c.sibling,s=ta(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=ta(d,l):(l=Ji(l,a,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,Ul(null,s),s=e.child,l=t.child.memoizedState,l===null?l=Lf(n):(a=l.cachePool,a!==null?(c=Nt._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=AT(),l={baseLanes:l.baseLanes|n,cachePool:a}),s.memoizedState=l,s.childLanes=Vf(t,o,n),e.memoizedState=kf,Ul(t.child,s)):(Ua(e),n=t.child,t=n.sibling,n=ta(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function Zp(t,e){return e=Wu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Wu(t,e){return t=Tn(22,t,null,e),t.lanes=0,t}function Uf(t,e,n){return er(e,t.child,null,n),t=Zp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),zp(t.return,e,n)}function Of(t,e,n,s,a,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function _S(t,e,n){var s=e.pendingProps,a=s.revealOrder,i=s.tail;s=s.children;var o=gt.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,Je(gt,o),Bt(t,e,s,n),s=we?vc:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yb(t,n,e);else if(t.tag===19)yb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Ju(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Of(e,!1,a,n,i,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Ju(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Of(e,!0,n,null,i,s);break;case"together":Of(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function ua(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Vo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ta(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ta(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q0(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function dM(t,e,n){switch(e.tag){case 3:Uu(e,e.stateNode.containerInfo),Va(e,Nt,t.memoizedState.cache),Wi();break;case 27:case 5:wp(e);break;case 4:Uu(e,e.stateNode.containerInfo);break;case 10:Va(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,$p(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ua(e),e.flags|=128,null):n&e.child.childLanes?bS(t,e,n):(Ua(e),t=ua(t,e,n),t!==null?t.sibling:null);Ua(e);break;case 19:var a=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Vo(t,e,n,!1),s=(n&e.childLanes)!==0),a){if(s)return _S(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Je(gt,gt.current),s)break;return null;case 22:return e.lanes=0,yS(t,e,n,e.pendingProps);case 24:Va(e,Nt,t.memoizedState.cache)}return ua(t,e,n)}function ES(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Tt=!0;else{if(!Q0(t,n)&&!(e.flags&128))return Tt=!1,dM(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,we&&e.flags&1048576&&TT(e,vc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=zi(e.elementType),e.type=t,typeof t=="function")A0(t)?(s=nr(t,s),e.tag=1,e=xb(null,e,t,s,n)):(e.tag=0,e=Wp(null,e,t,s,n));else{if(t!=null){var a=t.$$typeof;if(a===f0){e.tag=11,e=mb(null,e,t,s,n);break e}else if(a===p0){e.tag=14,e=hb(null,e,t,s,n);break e}}throw e=Tp(t)||t,Error(q(306,e,""))}}return e;case 0:return Wp(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,a=nr(s,e.pendingProps),xb(t,e,s,a,n);case 3:e:{if(Uu(e,e.stateNode.containerInfo),t===null)throw Error(q(387));s=e.pendingProps;var i=e.memoizedState;a=i.element,Bp(t,e),ec(e,s,null,n);var o=e.memoizedState;if(s=o.cache,Va(e,Nt,s),s!==i.cache&&Fp(e,[Nt],n,!0),Zl(),s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=vb(t,e,s,n);break e}else if(s!==a){a=Hn(Error(q(424)),e),yc(a),e=vb(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ze=Jn(t.firstChild),$t=e,we=!0,Xa=null,$n=!0,n=jT(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Wi(),s===a){e=ua(t,e,n);break e}Bt(t,e,s,n)}e=e.child}return e;case 26:return xu(t,e),t===null?(n=Ob(e.type,null,e.pendingProps,null))?e.memoizedState=n:we||(n=e.type,t=e.pendingProps,s=rm(Qa.current).createElement(n),s[Ht]=e,s[bn]=t,Jt(s,n,t),Vt(s),e.stateNode=s):e.memoizedState=Ob(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return wp(e),t===null&&we&&(s=e.stateNode=mw(e.type,e.pendingProps,Qa.current),$t=e,$n=!0,a=Ze,Ni(e.type)?(hg=a,Ze=Jn(s.firstChild)):Ze=a),Bt(t,e,e.pendingProps.children,n),xu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&we&&((a=s=Ze)&&(s=zM(s,e.type,e.pendingProps,$n),s!==null?(e.stateNode=s,$t=e,Ze=Jn(s.firstChild),$n=!1,a=!0):a=!1),a||mi(e)),wp(e),a=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,cg(a,i)?s=null:o!==null&&cg(a,o)&&(e.flags|=32),e.memoizedState!==null&&(a=V0(t,e,tM,null,null,n),Tc._currentValue=a),xu(t,e),Bt(t,e,s,n),e.child;case 6:return t===null&&we&&((t=n=Ze)&&(n=FM(n,e.pendingProps,$n),n!==null?(e.stateNode=n,$t=e,Ze=null,t=!0):t=!1),t||mi(e)),null;case 13:return bS(t,e,n);case 4:return Uu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=er(e,null,s,n):Bt(t,e,s,n),e.child;case 11:return mb(t,e,e.type,e.pendingProps,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Va(e,e.type,s.value),Bt(t,e,s.children,n),e.child;case 9:return a=e.type._context,s=e.pendingProps.children,Zi(e),a=Yt(a),s=s(a),e.flags|=1,Bt(t,e,s,n),e.child;case 14:return hb(t,e,e.type,e.pendingProps,n);case 15:return vS(t,e,e.type,e.pendingProps,n);case 19:return _S(t,e,n);case 31:return cM(t,e,n);case 22:return yS(t,e,n,e.pendingProps);case 24:return Zi(e),s=Yt(Nt),t===null?(a=M0(),a===null&&(a=qe,i=j0(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),e.memoizedState={parent:s,cache:a},D0(e),Va(e,Nt,a)):(t.lanes&n&&(Bp(t,e),ec(e,null,null,n),Zl()),a=t.memoizedState,i=e.memoizedState,a.parent!==s?(a={parent:s,cache:s},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Va(e,Nt,s)):(s=i.cache,Va(e,Nt,s),s!==a.cache&&Fp(e,[Nt],n,!0))),Bt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(q(156,e.tag))}function Bs(t){t.flags|=4}function zf(t,e,n,s,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if($S())t.flags|=8192;else throw Qi=$u,P0}else t.flags&=-16777217}function bb(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!pw(e))if($S())t.flags|=8192;else throw Qi=$u,P0}function Od(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?YC():536870912,t.lanes|=e,xo|=e)}function Il(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&65011712,s|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function uM(t,e,n){var s=e.pendingProps;switch(R0(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return We(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),na(Nt),uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Er(e)?Bs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jf())),We(e),null;case 26:var a=e.type,i=e.memoizedState;return t===null?(Bs(e),i!==null?(We(e),bb(e,i)):(We(e),zf(e,a,null,s,n))):i?i!==t.memoizedState?(Bs(e),We(e),bb(e,i)):(We(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Bs(e),We(e),zf(e,a,t,s,n)),null;case 27:if(Ou(e),n=Qa.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Bs(e);else{if(!s){if(e.stateNode===null)throw Error(q(166));return We(e),null}t=Rs.current,Er(e)?Ky(e):(t=mw(a,s,n),e.stateNode=t,Bs(e))}return We(e),null;case 5:if(Ou(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Bs(e);else{if(!s){if(e.stateNode===null)throw Error(q(166));return We(e),null}if(i=Rs.current,Er(e))Ky(e);else{var o=rm(Qa.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?o.createElement(a,{is:s.is}):o.createElement(a)}}i[Ht]=e,i[bn]=s;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)i.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=i;e:switch(Jt(i,a,s),a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Bs(e)}}return We(e),zf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Bs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(q(166));if(t=Qa.current,Er(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,a=$t,a!==null)switch(a.tag){case 27:case 5:s=a.memoizedProps}t[Ht]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||lw(t.nodeValue,n)),t||mi(e,!0)}else t=rm(t).createTextNode(s),t[Ht]=e,e.stateNode=t}return We(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Er(e),n!==null){if(t===null){if(!s)throw Error(q(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(557));t[Ht]=e}else Wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),t=!1}else n=jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Cn(e),e):(Cn(e),null);if(e.flags&128)throw Error(q(558))}return We(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Er(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(q(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(q(317));a[Ht]=e}else Wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),a=!1}else a=jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(Cn(e),e):(Cn(e),null)}return Cn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,a=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(a=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Od(e,e.updateQueue),We(e),null);case 4:return uo(),t===null&&sx(e.stateNode.containerInfo),We(e),null;case 10:return na(e.type),We(e),null;case 19:if(Ot(gt),s=e.memoizedState,s===null)return We(e),null;if(a=(e.flags&128)!==0,i=s.rendering,i===null)if(a)Il(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Ju(t),i!==null){for(e.flags|=128,Il(s,!1),t=i.updateQueue,e.updateQueue=t,Od(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)NT(n,t),n=n.sibling;return Je(gt,gt.current&1|2),we&&Ys(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&jn()>em&&(e.flags|=128,a=!0,Il(s,!1),e.lanes=4194304)}else{if(!a)if(t=Ju(i),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,Od(e,t),Il(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!we)return We(e),null}else 2*jn()-s.renderingStartTime>em&&n!==536870912&&(e.flags|=128,a=!0,Il(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=jn(),t.sibling=null,n=gt.current,Je(gt,a?n&1|2:n&1),we&&Ys(e,s.treeForkCount),t):(We(e),null);case 22:case 23:return Cn(e),k0(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),n=e.updateQueue,n!==null&&Od(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Ot(Ki),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),na(Nt),We(e),null;case 25:return null;case 30:return null}throw Error(q(156,e.tag))}function mM(t,e){switch(R0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return na(Nt),uo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Ou(e),null;case 31:if(e.memoizedState!==null){if(Cn(e),e.alternate===null)throw Error(q(340));Wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Cn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(gt),null;case 4:return uo(),null;case 10:return na(e.type),null;case 22:case 23:return Cn(e),k0(),t!==null&&Ot(Ki),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return na(Nt),null;case 25:return null;default:return null}}function NS(t,e){switch(R0(e),e.tag){case 3:na(Nt),uo();break;case 26:case 27:case 5:Ou(e);break;case 4:uo();break;case 31:e.memoizedState!==null&&Cn(e);break;case 13:Cn(e);break;case 19:Ot(gt);break;case 10:na(e.type);break;case 22:case 23:Cn(e),k0(),t!==null&&Ot(Ki);break;case 24:na(Nt)}}function Kc(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&t)===t){s=void 0;var i=n.create,o=n.inst;s=i(),o.destroy=s}n=n.next}while(n!==a)}}catch(l){Ue(e,e.return,l)}}function hi(t,e,n){try{var s=e.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var i=a.next;s=i;do{if((s.tag&t)===t){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,a=e;var c=n,d=l;try{d()}catch(m){Ue(a,c,m)}}}s=s.next}while(s!==i)}}catch(m){Ue(e,e.return,m)}}function CS(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{PT(e,n)}catch(s){Ue(t,t.return,s)}}}function TS(t,e,n){n.props=nr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ue(t,e,s)}}function nc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(a){Ue(t,e,a)}}function As(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(a){Ue(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Ue(t,e,a)}else n.current=null}function SS(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){Ue(t,t.return,a)}}function Ff(t,e,n){try{var s=t.stateNode;DM(s,t.type,n,e),s[bn]=e}catch(a){Ue(t,t.return,a)}}function wS(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ni(t.type)||t.tag===4}function Gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ni(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xs));else if(s!==4&&(s===27&&Ni(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}function Zu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Ni(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Zu(t,e,n),t=t.sibling;t!==null;)Zu(t,e,n),t=t.sibling}function AS(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Jt(e,s,n),e[Ht]=t,e[bn]=n}catch(i){Ue(t,t.return,i)}}var Js=!1,Et=!1,Bf=!1,_b=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function hM(t,e){if(t=t.containerInfo,og=dm,t=pT(t),T0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var x;p!==n||a!==0&&p.nodeType!==3||(l=o+a),p!==i||s!==0&&p.nodeType!==3||(c=o+s),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===a&&(l=o),g===i&&++m===s&&(c=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lg={focusedElem:t,selectionRange:n},dm=!1,Lt=e;Lt!==null;)if(e=Lt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Lt=t;else for(;Lt!==null;){switch(e=Lt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)a=t[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,a=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var y=nr(n.type,a);t=s.getSnapshotBeforeUpdate(y,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(T){Ue(n,n.return,T)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)dg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(q(163))}if(t=e.sibling,t!==null){t.return=e.return,Lt=t;break}Lt=e.return}}function IS(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Hs(t,n),s&4&&Kc(5,n);break;case 1:if(Hs(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){Ue(n,n.return,o)}else{var a=nr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){Ue(n,n.return,o)}}s&64&&CS(n),s&512&&nc(n,n.return);break;case 3:if(Hs(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{PT(t,e)}catch(o){Ue(n,n.return,o)}}break;case 27:e===null&&s&4&&AS(n);case 26:case 5:Hs(t,n),e===null&&s&4&&SS(n),s&512&&nc(n,n.return);break;case 12:Hs(t,n);break;case 31:Hs(t,n),s&4&&MS(t,n);break;case 13:Hs(t,n),s&4&&PS(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=EM.bind(null,n),GM(t,n))));break;case 22:if(s=n.memoizedState!==null||Js,!s){e=e!==null&&e.memoizedState!==null||Et,a=Js;var i=Et;Js=s,(Et=e)&&!i?$s(t,n,(n.subtreeFlags&8772)!==0):Hs(t,n),Js=a,Et=i}break;case 30:break;default:Hs(t,n)}}function RS(t){var e=t.alternate;e!==null&&(t.alternate=null,RS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&y0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,pn=!1;function qs(t,e,n){for(n=n.child;n!==null;)jS(t,e,n),n=n.sibling}function jS(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 26:Et||As(n,e),qs(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Et||As(n,e);var s=at,a=pn;Ni(n.type)&&(at=n.stateNode,pn=!1),qs(t,e,n),rc(n.stateNode),at=s,pn=a;break;case 5:Et||As(n,e);case 6:if(s=at,a=pn,at=null,qs(t,e,n),at=s,pn=a,at!==null)if(pn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(n.stateNode)}catch(i){Ue(n,e,i)}else try{at.removeChild(n.stateNode)}catch(i){Ue(n,e,i)}break;case 18:at!==null&&(pn?(t=at,Db(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),_o(t)):Db(at,n.stateNode));break;case 4:s=at,a=pn,at=n.stateNode.containerInfo,pn=!0,qs(t,e,n),at=s,pn=a;break;case 0:case 11:case 14:case 15:hi(2,n,e),Et||hi(4,n,e),qs(t,e,n);break;case 1:Et||(As(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&TS(n,e,s)),qs(t,e,n);break;case 21:qs(t,e,n);break;case 22:Et=(s=Et)||n.memoizedState!==null,qs(t,e,n),Et=s;break;default:qs(t,e,n)}}function MS(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{_o(t)}catch(n){Ue(e,e.return,n)}}}function PS(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_o(t)}catch(n){Ue(e,e.return,n)}}function fM(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new _b),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new _b),e;default:throw Error(q(435,t.tag))}}function zd(t,e){var n=fM(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var a=NM.bind(null,t,s);s.then(a,a)}})}function hn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s],i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Ni(l.type)){at=l.stateNode,pn=!1;break e}break;case 5:at=l.stateNode,pn=!1;break e;case 3:case 4:at=l.stateNode.containerInfo,pn=!0;break e}l=l.return}if(at===null)throw Error(q(160));jS(i,o,a),at=null,pn=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)DS(e,t),e=e.sibling}var os=null;function DS(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(e,t),fn(t),s&4&&(hi(3,t,t.return),Kc(3,t),hi(5,t,t.return));break;case 1:hn(e,t),fn(t),s&512&&(Et||n===null||As(n,n.return)),s&64&&Js&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var a=os;if(hn(e,t),fn(t),s&512&&(Et||n===null||As(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":i=a.getElementsByTagName("title")[0],(!i||i[Hc]||i[Ht]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),Jt(i,s,n),i[Ht]=t,Vt(i),s=i;break e;case"link":var o=Fb("link","href",a).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(i=o[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}i=a.createElement(s),Jt(i,s,n),a.head.appendChild(i);break;case"meta":if(o=Fb("meta","content",a).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(i=o[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}i=a.createElement(s),Jt(i,s,n),a.head.appendChild(i);break;default:throw Error(q(468,s))}i[Ht]=t,Vt(i),s=i}t.stateNode=s}else Gb(a,t.type,t.stateNode);else t.stateNode=zb(a,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?Gb(a,t.type,t.stateNode):zb(a,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Ff(t,t.memoizedProps,n.memoizedProps)}break;case 27:hn(e,t),fn(t),s&512&&(Et||n===null||As(n,n.return)),n!==null&&s&4&&Ff(t,t.memoizedProps,n.memoizedProps);break;case 5:if(hn(e,t),fn(t),s&512&&(Et||n===null||As(n,n.return)),t.flags&32){a=t.stateNode;try{ho(a,"")}catch(y){Ue(t,t.return,y)}}s&4&&t.stateNode!=null&&(a=t.memoizedProps,Ff(t,a,n!==null?n.memoizedProps:a)),s&1024&&(Bf=!0);break;case 6:if(hn(e,t),fn(t),s&4){if(t.stateNode===null)throw Error(q(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(y){Ue(t,t.return,y)}}break;case 3:if(bu=null,a=os,os=om(e.containerInfo),hn(e,t),os=a,fn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(e.containerInfo)}catch(y){Ue(t,t.return,y)}Bf&&(Bf=!1,kS(t));break;case 4:s=os,os=om(t.stateNode.containerInfo),hn(e,t),fn(t),os=s;break;case 12:hn(e,t),fn(t);break;case 31:hn(e,t),fn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,zd(t,s)));break;case 13:hn(e,t),fn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(sh=jn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,zd(t,s)));break;case 22:a=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Js,m=Et;if(Js=d||a,Et=m||c,hn(e,t),Et=m,Js=d,fn(t),s&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||c||Js||Et||Fi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,a)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var p=c.memoizedProps.style,g=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(y){Ue(c,c.return,y)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(y){Ue(c,c.return,y)}}}else if(e.tag===18){if(n===null){c=e;try{var x=c.stateNode;a?kb(x,!0):kb(c.stateNode,!1)}catch(y){Ue(c,c.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,zd(t,n))));break;case 19:hn(e,t),fn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,zd(t,s)));break;case 30:break;case 21:break;default:hn(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(wS(s)){n=s;break}s=s.return}if(n==null)throw Error(q(160));switch(n.tag){case 27:var a=n.stateNode,i=Gf(t);Zu(t,i,a);break;case 5:var o=n.stateNode;n.flags&32&&(ho(o,""),n.flags&=-33);var l=Gf(t);Zu(t,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=Gf(t);eg(t,d,c);break;default:throw Error(q(161))}}catch(m){Ue(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kS(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;kS(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Hs(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)IS(t,e.alternate,e),e=e.sibling}function Fi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:hi(4,e,e.return),Fi(e);break;case 1:As(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&TS(e,e.return,n),Fi(e);break;case 27:rc(e.stateNode);case 26:case 5:As(e,e.return),Fi(e);break;case 22:e.memoizedState===null&&Fi(e);break;case 30:Fi(e);break;default:Fi(e)}t=t.sibling}}function $s(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,a=t,i=e,o=i.flags;switch(i.tag){case 0:case 11:case 15:$s(a,i,n),Kc(4,i);break;case 1:if($s(a,i,n),s=i,a=s.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){Ue(s,s.return,d)}if(s=i,a=s.updateQueue,a!==null){var l=s.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)MT(c[a],l)}catch(d){Ue(s,s.return,d)}}n&&o&64&&CS(i),nc(i,i.return);break;case 27:AS(i);case 26:case 5:$s(a,i,n),n&&s===null&&o&4&&SS(i),nc(i,i.return);break;case 12:$s(a,i,n);break;case 31:$s(a,i,n),n&&o&4&&MS(a,i);break;case 13:$s(a,i,n),n&&o&4&&PS(a,i);break;case 22:i.memoizedState===null&&$s(a,i,n),nc(i,i.return);break;case 30:break;default:$s(a,i,n)}e=e.sibling}}function X0(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Yc(n))}function W0(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Yc(t))}function is(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)LS(t,e,n,s),e=e.sibling}function LS(t,e,n,s){var a=e.flags;switch(e.tag){case 0:case 11:case 15:is(t,e,n,s),a&2048&&Kc(9,e);break;case 1:is(t,e,n,s);break;case 3:is(t,e,n,s),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Yc(t)));break;case 12:if(a&2048){is(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,o=i.id,l=i.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Ue(e,e.return,c)}}else is(t,e,n,s);break;case 31:is(t,e,n,s);break;case 13:is(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,o=e.alternate,e.memoizedState!==null?i._visibility&2?is(t,e,n,s):sc(t,e):i._visibility&2?is(t,e,n,s):(i._visibility|=2,Sr(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),a&2048&&X0(o,e);break;case 24:is(t,e,n,s),a&2048&&W0(e.alternate,e);break;default:is(t,e,n,s)}}function Sr(t,e,n,s,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,o=e,l=n,c=s,d=o.flags;switch(o.tag){case 0:case 11:case 15:Sr(i,o,l,c,a),Kc(8,o);break;case 23:break;case 22:var m=o.stateNode;o.memoizedState!==null?m._visibility&2?Sr(i,o,l,c,a):sc(i,o):(m._visibility|=2,Sr(i,o,l,c,a)),a&&d&2048&&X0(o.alternate,o);break;case 24:Sr(i,o,l,c,a),a&&d&2048&&W0(o.alternate,o);break;default:Sr(i,o,l,c,a)}e=e.sibling}}function sc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,a=s.flags;switch(s.tag){case 22:sc(n,s),a&2048&&X0(s.alternate,s);break;case 24:sc(n,s),a&2048&&W0(s.alternate,s);break;default:sc(n,s)}e=e.sibling}}var Ol=8192;function Nr(t,e,n){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)VS(t,e,n),t=t.sibling}function VS(t,e,n){switch(t.tag){case 26:Nr(t,e,n),t.flags&Ol&&t.memoizedState!==null&&eP(n,os,t.memoizedState,t.memoizedProps);break;case 5:Nr(t,e,n);break;case 3:case 4:var s=os;os=om(t.stateNode.containerInfo),Nr(t,e,n),os=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Ol,Ol=16777216,Nr(t,e,n),Ol=s):Nr(t,e,n));break;default:Nr(t,e,n)}}function US(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Rl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Lt=s,zS(s,t)}US(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)OS(t),t=t.sibling}function OS(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&hi(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,vu(t)):Rl(t);break;default:Rl(t)}}function vu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Lt=s,zS(s,t)}US(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:hi(8,e,e.return),vu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,vu(e));break;default:vu(e)}t=t.sibling}}function zS(t,e){for(;Lt!==null;){var n=Lt;switch(n.tag){case 0:case 11:case 15:hi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Yc(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Lt=s;else e:for(n=t;Lt!==null;){s=Lt;var a=s.sibling,i=s.return;if(RS(s),s===n){Lt=null;break e}if(a!==null){a.return=i,Lt=a;break e}Lt=i}}}var pM={getCacheForType:function(t){var e=Yt(Nt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Yt(Nt).controller.signal}},gM=typeof WeakMap=="function"?WeakMap:Map,De=0,qe=null,Ee=null,Se=0,Ve=0,Nn=null,$a=!1,Oo=!1,Z0=!1,ma=0,ft=0,fi=0,Xi=0,ex=0,An=0,xo=0,ac=null,gn=null,tg=!1,sh=0,FS=0,em=1/0,tm=null,ei=null,Rt=0,ti=null,vo=null,sa=0,ng=0,sg=null,GS=null,ic=0,ag=null;function Dn(){return De&2&&Se!==0?Se&-Se:ce.T!==null?nx():XC()}function BS(){if(An===0)if(!(Se&536870912)||we){var t=Md;Md<<=1,!(Md&3932160)&&(Md=262144),An=t}else An=536870912;return t=Vn.current,t!==null&&(t.flags|=32),An}function yn(t,e,n){(t===qe&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)&&(yo(t,0),Ya(t,Se,An,!1)),qc(t,n),(!(De&2)||t!==qe)&&(t===qe&&(!(De&2)&&(Xi|=n),ft===4&&Ya(t,Se,An,!1)),Us(t))}function qS(t,e,n){if(De&6)throw Error(q(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Bc(t,e),a=s?yM(t,e):qf(t,e,!0),i=s;do{if(a===0){Oo&&!s&&Ya(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!xM(n)){a=qf(t,e,!1),i=!1;continue}if(a===2){if(i=e,t.errorRecoveryDisabledLanes&i)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;a=ac;var c=l.current.memoizedState.isDehydrated;if(c&&(yo(l,o).flags|=256),o=qf(l,o,!1),o!==2){if(Z0&&!c){l.errorRecoveryDisabledLanes|=i,Xi|=i,a=4;break e}i=gn,gn=a,i!==null&&(gn===null?gn=i:gn.push.apply(gn,i))}a=o}if(i=!1,a!==2)continue}}if(a===1){yo(t,0),Ya(t,e,0,!0);break}e:{switch(s=t,i=a,i){case 0:case 1:throw Error(q(345));case 4:if((e&4194048)!==e)break;case 6:Ya(s,e,An,!$a);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(q(329))}if((e&62914560)===e&&(a=sh+300-jn(),10<a)){if(Ya(s,e,An,!$a),$m(s,0,!0)!==0)break e;sa=e,s.timeoutHandle=dw(Eb.bind(null,s,n,gn,tm,tg,e,An,Xi,xo,$a,i,"Throttled",-0,0),a);break e}Eb(s,n,gn,tm,tg,e,An,Xi,xo,$a,i,null,-0,0)}}break}while(!0);Us(t)}function Eb(t,e,n,s,a,i,o,l,c,d,m,p,g,x){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xs},VS(e,i,p);var y=(i&62914560)===i?sh-jn():(i&4194048)===i?FS-jn():0;if(y=tP(p,y),y!==null){sa=i,t.cancelPendingCommit=y(Cb.bind(null,t,e,i,n,s,a,o,l,c,m,p,null,g,x)),Ya(t,i,o,!d);return}}Cb(t,e,i,n,s,a,o,l,c)}function xM(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!Ln(i(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ya(t,e,n,s){e&=~ex,e&=~Xi,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var a=e;0<a;){var i=31-Pn(a),o=1<<i;s[i]=-1,a&=~o}n!==0&&JC(t,n,e)}function ah(){return De&6?!0:(Qc(0),!1)}function tx(){if(Ee!==null){if(Ve===0)var t=Ee.return;else t=Ee,Ws=fr=null,z0(t),Zr=null,bc=0,t=Ee;for(;t!==null;)NS(t.alternate,t),t=t.return;Ee=null}}function yo(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,VM(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),sa=0,tx(),qe=t,Ee=n=ta(t.current,null),Se=e,Ve=0,Nn=null,$a=!1,Oo=Bc(t,e),Z0=!1,xo=An=ex=Xi=fi=ft=0,gn=ac=null,tg=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var a=31-Pn(s),i=1<<a;e|=t[a],s&=~i}return ma=e,Qm(),n}function HS(t,e){xe=null,ce.H=Ec,e===Uo||e===Wm?(e=eb(),Ve=3):e===P0?(e=eb(),Ve=4):Ve=e===K0?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Nn=e,Ee===null&&(ft=1,Xu(t,Hn(e,t.current)))}function $S(){var t=Vn.current;return t===null?!0:(Se&4194048)===Se?Yn===null:(Se&62914560)===Se||Se&536870912?t===Yn:!1}function YS(){var t=ce.H;return ce.H=Ec,t===null?Ec:t}function JS(){var t=ce.A;return ce.A=pM,t}function nm(){ft=4,$a||(Se&4194048)!==Se&&Vn.current!==null||(Oo=!0),!(fi&134217727)&&!(Xi&134217727)||qe===null||Ya(qe,Se,An,!1)}function qf(t,e,n){var s=De;De|=2;var a=YS(),i=JS();(qe!==t||Se!==e)&&(tm=null,yo(t,e)),e=!1;var o=ft;e:do try{if(Ve!==0&&Ee!==null){var l=Ee,c=Nn;switch(Ve){case 8:tx(),o=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(e=!0);var d=Ve;if(Ve=0,Nn=null,Hr(t,l,c,d),n&&Oo){o=0;break e}break;default:d=Ve,Ve=0,Nn=null,Hr(t,l,c,d)}}vM(),o=ft;break}catch(m){HS(t,m)}while(!0);return e&&t.shellSuspendCounter++,Ws=fr=null,De=s,ce.H=a,ce.A=i,Ee===null&&(qe=null,Se=0,Qm()),o}function vM(){for(;Ee!==null;)KS(Ee)}function yM(t,e){var n=De;De|=2;var s=YS(),a=JS();qe!==t||Se!==e?(tm=null,em=jn()+500,yo(t,e)):Oo=Bc(t,e);e:do try{if(Ve!==0&&Ee!==null){e=Ee;var i=Nn;t:switch(Ve){case 1:Ve=0,Nn=null,Hr(t,e,i,1);break;case 2:case 9:if(Zy(i)){Ve=0,Nn=null,Nb(e);break}e=function(){Ve!==2&&Ve!==9||qe!==t||(Ve=7),Us(t)},i.then(e,e);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Zy(i)?(Ve=0,Nn=null,Nb(e)):(Ve=0,Nn=null,Hr(t,e,i,7));break;case 5:var o=null;switch(Ee.tag){case 26:o=Ee.memoizedState;case 5:case 27:var l=Ee;if(o?pw(o):l.stateNode.complete){Ve=0,Nn=null;var c=l.sibling;if(c!==null)Ee=c;else{var d=l.return;d!==null?(Ee=d,ih(d)):Ee=null}break t}}Ve=0,Nn=null,Hr(t,e,i,5);break;case 6:Ve=0,Nn=null,Hr(t,e,i,6);break;case 8:tx(),ft=6;break e;default:throw Error(q(462))}}bM();break}catch(m){HS(t,m)}while(!0);return Ws=fr=null,ce.H=s,ce.A=a,De=n,Ee!==null?0:(qe=null,Se=0,Qm(),ft)}function bM(){for(;Ee!==null&&!BR();)KS(Ee)}function KS(t){var e=ES(t.alternate,t,ma);t.memoizedProps=t.pendingProps,e===null?ih(t):Ee=e}function Nb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=gb(n,e,e.pendingProps,e.type,void 0,Se);break;case 11:e=gb(n,e,e.pendingProps,e.type.render,e.ref,Se);break;case 5:z0(e);default:NS(n,e),e=Ee=NT(e,ma),e=ES(n,e,ma)}t.memoizedProps=t.pendingProps,e===null?ih(t):Ee=e}function Hr(t,e,n,s){Ws=fr=null,z0(e),Zr=null,bc=0;var a=e.return;try{if(lM(t,a,e,n,Se)){ft=1,Xu(t,Hn(n,t.current)),Ee=null;return}}catch(i){if(a!==null)throw Ee=a,i;ft=1,Xu(t,Hn(n,t.current)),Ee=null;return}e.flags&32768?(we||s===1?t=!0:Oo||Se&536870912?t=!1:($a=t=!0,(s===2||s===9||s===3||s===6)&&(s=Vn.current,s!==null&&s.tag===13&&(s.flags|=16384))),QS(e,t)):ih(e)}function ih(t){var e=t;do{if(e.flags&32768){QS(e,$a);return}t=e.return;var n=uM(e.alternate,e,ma);if(n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);ft===0&&(ft=5)}function QS(t,e){do{var n=mM(t.alternate,t);if(n!==null){n.flags&=32767,Ee=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ee=t;return}Ee=t=n}while(t!==null);ft=6,Ee=null}function Cb(t,e,n,s,a,i,o,l,c){t.cancelPendingCommit=null;do rh();while(Rt!==0);if(De&6)throw Error(q(327));if(e!==null){if(e===t.current)throw Error(q(177));if(i=e.lanes|e.childLanes,i|=S0,ZR(t,n,i,o,l,c),t===qe&&(Ee=qe=null,Se=0),vo=e,ti=t,sa=n,ng=i,sg=a,GS=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,CM(zu,function(){return tw(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ce.T,ce.T=null,a=ke.p,ke.p=2,o=De,De|=4;try{hM(t,e,n)}finally{De=o,ke.p=a,ce.T=s}}Rt=1,XS(),WS(),ZS()}}function XS(){if(Rt===1){Rt=0;var t=ti,e=vo,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ce.T,ce.T=null;var s=ke.p;ke.p=2;var a=De;De|=4;try{DS(e,t);var i=lg,o=pT(t.containerInfo),l=i.focusedElem,c=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&fT(l.ownerDocument.documentElement,l)){if(c!==null&&T0(l)){var d=c.start,m=c.end;if(m===void 0&&(m=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(m,l.value.length);else{var p=l.ownerDocument||document,g=p&&p.defaultView||window;if(g.getSelection){var x=g.getSelection(),y=l.textContent.length,T=Math.min(c.start,y),I=c.end===void 0?T:Math.min(c.end,y);!x.extend&&T>I&&(o=I,I=T,T=o);var b=$y(l,T),N=$y(l,I);if(b&&N&&(x.rangeCount!==1||x.anchorNode!==b.node||x.anchorOffset!==b.offset||x.focusNode!==N.node||x.focusOffset!==N.offset)){var w=p.createRange();w.setStart(b.node,b.offset),x.removeAllRanges(),T>I?(x.addRange(w),x.extend(N.node,N.offset)):(w.setEnd(N.node,N.offset),x.addRange(w))}}}}for(p=[],x=l;x=x.parentNode;)x.nodeType===1&&p.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var D=p[l];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}dm=!!og,lg=og=null}finally{De=a,ke.p=s,ce.T=n}}t.current=e,Rt=2}}function WS(){if(Rt===2){Rt=0;var t=ti,e=vo,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ce.T,ce.T=null;var s=ke.p;ke.p=2;var a=De;De|=4;try{IS(t,e.alternate,e)}finally{De=a,ke.p=s,ce.T=n}}Rt=3}}function ZS(){if(Rt===4||Rt===3){Rt=0,qR();var t=ti,e=vo,n=sa,s=GS;e.subtreeFlags&10256||e.flags&10256?Rt=5:(Rt=0,vo=ti=null,ew(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(ei=null),v0(n),e=e.stateNode,Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Gc,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ce.T,a=ke.p,ke.p=2,ce.T=null;try{for(var i=t.onRecoverableError,o=0;o<s.length;o++){var l=s[o];i(l.value,{componentStack:l.stack})}}finally{ce.T=e,ke.p=a}}sa&3&&rh(),Us(t),a=t.pendingLanes,n&261930&&a&42?t===ag?ic++:(ic=0,ag=t):ic=0,Qc(0)}}function ew(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Yc(e)))}function rh(){return XS(),WS(),ZS(),tw()}function tw(){if(Rt!==5)return!1;var t=ti,e=ng;ng=0;var n=v0(sa),s=ce.T,a=ke.p;try{ke.p=32>n?32:n,ce.T=null,n=sg,sg=null;var i=ti,o=sa;if(Rt=0,vo=ti=null,sa=0,De&6)throw Error(q(331));var l=De;if(De|=4,OS(i.current),LS(i,i.current,o,n),De=l,Qc(0,!1),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Gc,i)}catch{}return!0}finally{ke.p=a,ce.T=s,ew(t,e)}}function Tb(t,e,n){e=Hn(n,e),e=Xp(t.stateNode,e,2),t=Za(t,e,2),t!==null&&(qc(t,2),Us(t))}function Ue(t,e,n){if(t.tag===3)Tb(t,t,n);else for(;e!==null;){if(e.tag===3){Tb(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ei===null||!ei.has(s))){t=Hn(n,t),n=gS(2),s=Za(e,n,2),s!==null&&(xS(n,s,e,t),qc(s,2),Us(s));break}}e=e.return}}function Hf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new gM;var a=new Set;s.set(e,a)}else a=s.get(e),a===void 0&&(a=new Set,s.set(e,a));a.has(n)||(Z0=!0,a.add(n),t=_M.bind(null,t,e,n),e.then(t,t))}function _M(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,qe===t&&(Se&n)===n&&(ft===4||ft===3&&(Se&62914560)===Se&&300>jn()-sh?!(De&2)&&yo(t,0):ex|=n,xo===Se&&(xo=0)),Us(t)}function nw(t,e){e===0&&(e=YC()),t=hr(t,e),t!==null&&(qc(t,e),Us(t))}function EM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nw(t,n)}function NM(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(q(314))}s!==null&&s.delete(e),nw(t,n)}function CM(t,e){return g0(t,e)}var sm=null,wr=null,ig=!1,am=!1,$f=!1,Ja=0;function Us(t){t!==wr&&t.next===null&&(wr===null?sm=wr=t:wr=wr.next=t),am=!0,ig||(ig=!0,SM())}function Qc(t,e){if(!$f&&am){$f=!0;do for(var n=!1,s=sm;s!==null;){if(t!==0){var a=s.pendingLanes;if(a===0)var i=0;else{var o=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-Pn(42|t)+1)-1,i&=a&~(o&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,Sb(s,i))}else i=Se,i=$m(s,s===qe?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Bc(s,i)||(n=!0,Sb(s,i));s=s.next}while(n);$f=!1}}function TM(){sw()}function sw(){am=ig=!1;var t=0;Ja!==0&&LM()&&(t=Ja);for(var e=jn(),n=null,s=sm;s!==null;){var a=s.next,i=aw(s,e);i===0?(s.next=null,n===null?sm=a:n.next=a,a===null&&(wr=n)):(n=s,(t!==0||i&3)&&(am=!0)),s=a}Rt!==0&&Rt!==5||Qc(t),Ja!==0&&(Ja=0)}function aw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var o=31-Pn(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=WR(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}if(e=qe,n=Se,n=$m(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&bf(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Bc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&bf(s),v0(n)){case 2:case 8:n=HC;break;case 32:n=zu;break;case 268435456:n=$C;break;default:n=zu}return s=iw.bind(null,t),n=g0(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&bf(s),t.callbackPriority=2,t.callbackNode=null,2}function iw(t,e){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(rh()&&t.callbackNode!==n)return null;var s=Se;return s=$m(t,t===qe?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(qS(t,s,e),aw(t,jn()),t.callbackNode!=null&&t.callbackNode===n?iw.bind(null,t):null)}function Sb(t,e){if(rh())return null;qS(t,e,!0)}function SM(){UM(function(){De&6?g0(qC,TM):sw()})}function nx(){if(Ja===0){var t=fo;t===0&&(t=jd,jd<<=1,!(jd&261888)&&(jd=256)),Ja=t}return Ja}function wb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:cu(""+t)}function Ab(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function wM(t,e,n,s,a){if(e==="submit"&&n&&n.stateNode===a){var i=wb((a[bn]||null).action),o=s.submitter;o&&(e=(e=o[bn]||null)?wb(e.formAction):o.getAttribute("formAction"),e!==null&&(i=e,o=null));var l=new Ym("action","action",null,s,a);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ja!==0){var c=o?Ab(a,o):new FormData(a);Kp(n,{pending:!0,data:c,method:a.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=o?Ab(a,o):new FormData(a),Kp(n,{pending:!0,data:c,method:a.method,action:i},i,c))},currentTarget:a}]})}}for(var Yf=0;Yf<Vp.length;Yf++){var Jf=Vp[Yf],AM=Jf.toLowerCase(),IM=Jf[0].toUpperCase()+Jf.slice(1);vs(AM,"on"+IM)}vs(xT,"onAnimationEnd");vs(vT,"onAnimationIteration");vs(yT,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(Hj,"onTransitionRun");vs($j,"onTransitionStart");vs(Yj,"onTransitionCancel");vs(bT,"onTransitionEnd");mo("onMouseEnter",["mouseout","mouseover"]);mo("onMouseLeave",["mouseout","mouseover"]);mo("onPointerEnter",["pointerout","pointerover"]);mo("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nc));function rw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],a=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=d;try{i(a)}catch(m){Gu(m)}a.currentTarget=null,i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=d;try{i(a)}catch(m){Gu(m)}a.currentTarget=null,i=c}}}}function _e(t,e){var n=e[Ip];n===void 0&&(n=e[Ip]=new Set);var s=t+"__bubble";n.has(s)||(ow(e,t,2,!1),n.add(s))}function Kf(t,e,n){var s=0;e&&(s|=4),ow(n,t,s,e)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function sx(t){if(!t[Fd]){t[Fd]=!0,WC.forEach(function(n){n!=="selectionchange"&&(RM.has(n)||Kf(n,!1,t),Kf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fd]||(e[Fd]=!0,Kf("selectionchange",!1,e))}}function ow(t,e,n,s){switch(bw(e)){case 2:var a=aP;break;case 8:a=iP;break;default:a=ox}n=a.bind(null,e,n,t),a=void 0,!Dp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Qf(t,e,n,s,a){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;l!==null;){if(o=Lr(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=i=o;continue e}l=l.parentNode}}s=s.return}rT(function(){var d=i,m=_0(n),p=[];e:{var g=_T.get(t);if(g!==void 0){var x=Ym,y=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":x=Nj;break;case"focusin":y="focus",x=Tf;break;case"focusout":y="blur",x=Tf;break;case"beforeblur":case"afterblur":x=Tf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ly;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=uj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Sj;break;case xT:case vT:case yT:x=fj;break;case bT:x=Aj;break;case"scroll":case"scrollend":x=cj;break;case"wheel":x=Rj;break;case"copy":case"cut":case"paste":x=gj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Uy;break;case"toggle":case"beforetoggle":x=Mj}var T=(e&4)!==0,I=!T&&(t==="scroll"||t==="scrollend"),b=T?g!==null?g+"Capture":null:g;T=[];for(var N=d,w;N!==null;){var D=N;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||b===null||(D=pc(N,b),D!=null&&T.push(Cc(N,D,w))),I)break;N=N.return}0<T.length&&(g=new x(g,y,null,n,m),p.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==Pp&&(y=n.relatedTarget||n.fromElement)&&(Lr(y)||y[ko]))break e;if((x||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=d,y=y?Lr(y):null,y!==null&&(I=Fc(y),T=y.tag,y!==I||T!==5&&T!==27&&T!==6)&&(y=null)):(x=null,y=d),x!==y)){if(T=Ly,D="onMouseLeave",b="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(T=Uy,D="onPointerLeave",b="onPointerEnter",N="pointer"),I=x==null?g:Vl(x),w=y==null?g:Vl(y),g=new T(D,N+"leave",x,n,m),g.target=I,g.relatedTarget=w,D=null,Lr(m)===d&&(T=new T(b,N+"enter",y,n,m),T.target=w,T.relatedTarget=I,D=T),I=D,x&&y)t:{for(T=jM,b=x,N=y,w=0,D=b;D;D=T(D))w++;D=0;for(var V=N;V;V=T(V))D++;for(;0<w-D;)b=T(b),w--;for(;0<D-w;)N=T(N),D--;for(;w--;){if(b===N||N!==null&&b===N.alternate){T=b;break t}b=T(b),N=T(N)}T=null}else T=null;x!==null&&Ib(p,g,x,T,!1),y!==null&&I!==null&&Ib(p,I,y,T,!0)}}e:{if(g=d?Vl(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var k=Gy;else if(Fy(g))if(mT)k=Gj;else{k=zj;var R=Oj}else x=g.nodeName,!x||x.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&b0(d.elementType)&&(k=Gy):k=Fj;if(k&&(k=k(t,d))){uT(p,k,n,m);break e}R&&R(t,g,d),t==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&Mp(g,"number",g.value)}switch(R=d?Vl(d):window,t){case"focusin":(Fy(R)||R.contentEditable==="true")&&(Or=R,kp=d,Ql=null);break;case"focusout":Ql=kp=Or=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,Yy(p,n,m);break;case"selectionchange":if(qj)break;case"keydown":case"keyup":Yy(p,n,m)}var E;if(C0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ur?cT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(lT&&n.locale!=="ko"&&(Ur||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ur&&(E=oT()):(Ha=m,E0="value"in Ha?Ha.value:Ha.textContent,Ur=!0)),R=im(d,S),0<R.length&&(S=new Vy(S,t,null,n,m),p.push({event:S,listeners:R}),E?S.data=E:(E=dT(n),E!==null&&(S.data=E)))),(E=Dj?kj(t,n):Lj(t,n))&&(S=im(d,"onBeforeInput"),0<S.length&&(R=new Vy("onBeforeInput","beforeinput",null,n,m),p.push({event:R,listeners:S}),R.data=E)),wM(p,t,d,n,m)}rw(p,e)})}function Cc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function im(t,e){for(var n=e+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=pc(t,n),a!=null&&s.unshift(Cc(t,a,i)),a=pc(t,e),a!=null&&s.push(Cc(t,a,i))),t.tag===3)return s;t=t.return}return[]}function jM(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ib(t,e,n,s,a){for(var i=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,a?(d=pc(n,i),d!=null&&o.unshift(Cc(n,d,c))):a||(d=pc(n,i),d!=null&&o.push(Cc(n,d,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MM=/\r\n?/g,PM=/\u0000|\uFFFD/g;function Rb(t){return(typeof t=="string"?t:""+t).replace(MM,`
`).replace(PM,"")}function lw(t,e){return e=Rb(e),Rb(t)===e}function ze(t,e,n,s,a,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||ho(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&ho(t,""+s);break;case"className":Dd(t,"class",s);break;case"tabIndex":Dd(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Dd(t,n,s);break;case"style":iT(t,s,i);break;case"data":if(e!=="object"){Dd(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=cu(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&ze(t,e,"name",a.name,a,null),ze(t,e,"formEncType",a.formEncType,a,null),ze(t,e,"formMethod",a.formMethod,a,null),ze(t,e,"formTarget",a.formTarget,a,null)):(ze(t,e,"encType",a.encType,a,null),ze(t,e,"method",a.method,a,null),ze(t,e,"target",a.target,a,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=cu(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Xs);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(q(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=cu(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":_e("beforetoggle",t),_e("toggle",t),lu(t,"popover",s);break;case"xlinkActuate":Gs(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Gs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Gs(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Gs(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Gs(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Gs(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Gs(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Gs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Gs(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":lu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=oj.get(n)||n,lu(t,n,s))}}function rg(t,e,n,s,a,i){switch(n){case"style":iT(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(q(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"children":typeof s=="string"?ho(t,s):(typeof s=="number"||typeof s=="bigint")&&ho(t,""+s);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Xs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ZC.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),i=t[bn]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,a),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,a);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):lu(t,n,s)}}}function Jt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var s=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:ze(t,e,i,o,n,null)}}a&&ze(t,e,"srcSet",n.srcSet,n,null),s&&ze(t,e,"src",n.src,n,null);return;case"input":_e("invalid",t);var l=i=o=a=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var m=n[s];if(m!=null)switch(s){case"name":a=m;break;case"type":o=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(q(137,e));break;default:ze(t,e,s,m,n,null)}}nT(t,i,l,c,d,o,a,!1);return;case"select":_e("invalid",t),s=o=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:ze(t,e,a,l,n,null)}e=i,n=o,t.multiple=!!s,e!=null?Qr(t,!!s,e,!1):n!=null&&Qr(t,!!s,n,!0);return;case"textarea":_e("invalid",t),i=a=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(q(91));break;default:ze(t,e,o,l,n,null)}aT(t,s,a,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ze(t,e,c,s,n,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(s=0;s<Nc.length;s++)_e(Nc[s],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:ze(t,e,d,s,n,null)}return;default:if(b0(e)){for(m in n)n.hasOwnProperty(m)&&(s=n[m],s!==void 0&&rg(t,e,m,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&ze(t,e,l,s,n,null))}function DM(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,d=null,m=null;for(x in n){var p=n[x];if(n.hasOwnProperty(x)&&p!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":c=p;default:s.hasOwnProperty(x)||ze(t,e,x,null,s,p)}}for(var g in s){var x=s[g];if(p=n[g],s.hasOwnProperty(g)&&(x!=null||p!=null))switch(g){case"type":i=x;break;case"name":a=x;break;case"checked":d=x;break;case"defaultChecked":m=x;break;case"value":o=x;break;case"defaultValue":l=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(q(137,e));break;default:x!==p&&ze(t,e,g,x,s,p)}}jp(t,o,l,c,d,m,i,a);return;case"select":x=o=l=g=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":x=c;default:s.hasOwnProperty(i)||ze(t,e,i,null,s,c)}for(a in s)if(i=s[a],c=n[a],s.hasOwnProperty(a)&&(i!=null||c!=null))switch(a){case"value":g=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&ze(t,e,a,i,s,c)}e=l,n=o,s=x,g!=null?Qr(t,!!n,g,!1):!!s!=!!n&&(e!=null?Qr(t,!!n,e,!0):Qr(t,!!n,n?[]:"",!1));return;case"textarea":x=g=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ze(t,e,l,null,s,a)}for(o in s)if(a=s[o],i=n[o],s.hasOwnProperty(o)&&(a!=null||i!=null))switch(o){case"value":g=a;break;case"defaultValue":x=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(q(91));break;default:a!==i&&ze(t,e,o,a,s,i)}sT(t,g,x);return;case"option":for(var y in n)if(g=n[y],n.hasOwnProperty(y)&&g!=null&&!s.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:ze(t,e,y,null,s,g)}for(c in s)if(g=s[c],x=n[c],s.hasOwnProperty(c)&&g!==x&&(g!=null||x!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ze(t,e,c,g,s,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)g=n[T],n.hasOwnProperty(T)&&g!=null&&!s.hasOwnProperty(T)&&ze(t,e,T,null,s,g);for(d in s)if(g=s[d],x=n[d],s.hasOwnProperty(d)&&g!==x&&(g!=null||x!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(q(137,e));break;default:ze(t,e,d,g,s,x)}return;default:if(b0(e)){for(var I in n)g=n[I],n.hasOwnProperty(I)&&g!==void 0&&!s.hasOwnProperty(I)&&rg(t,e,I,void 0,s,g);for(m in s)g=s[m],x=n[m],!s.hasOwnProperty(m)||g===x||g===void 0&&x===void 0||rg(t,e,m,g,s,x);return}}for(var b in n)g=n[b],n.hasOwnProperty(b)&&g!=null&&!s.hasOwnProperty(b)&&ze(t,e,b,null,s,g);for(p in s)g=s[p],x=n[p],!s.hasOwnProperty(p)||g===x||g==null&&x==null||ze(t,e,p,g,s,x)}function jb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kM(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var a=n[s],i=a.transferSize,o=a.initiatorType,l=a.duration;if(i&&l&&jb(o)){for(o=0,l=a.responseEnd,s+=1;s<n.length;s++){var c=n[s],d=c.startTime;if(d>l)break;var m=c.transferSize,p=c.initiatorType;m&&jb(p)&&(c=c.responseEnd,o+=m*(c<l?1:(l-d)/(c-d)))}if(--s,e+=8*(i+o)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var og=null,lg=null;function rm(t){return t.nodeType===9?t:t.ownerDocument}function Mb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cw(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xf=null;function LM(){var t=window.event;return t&&t.type==="popstate"?t===Xf?!1:(Xf=t,!0):(Xf=null,!1)}var dw=typeof setTimeout=="function"?setTimeout:void 0,VM=typeof clearTimeout=="function"?clearTimeout:void 0,Pb=typeof Promise=="function"?Promise:void 0,UM=typeof queueMicrotask=="function"?queueMicrotask:typeof Pb<"u"?function(t){return Pb.resolve(null).then(t).catch(OM)}:dw;function OM(t){setTimeout(function(){throw t})}function Ni(t){return t==="head"}function Db(t,e){var n=e,s=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(a),_o(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")rc(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,rc(n);for(var i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Hc]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=o}}else n==="body"&&rc(t.ownerDocument.body);n=a}while(n);_o(e)}function kb(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function dg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":dg(n),y0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function zM(t,e,n,s){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Hc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function FM(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Jn(t.nextSibling),t===null))return null;return t}function uw(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Jn(t.nextSibling),t===null))return null;return t}function ug(t){return t.data==="$?"||t.data==="$~"}function mg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function GM(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var hg=null;function Lb(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Jn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Vb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function mw(t,e,n){switch(e=rm(n),t){case"html":if(t=e.documentElement,!t)throw Error(q(452));return t;case"head":if(t=e.head,!t)throw Error(q(453));return t;case"body":if(t=e.body,!t)throw Error(q(454));return t;default:throw Error(q(451))}}function rc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);y0(t)}var Xn=new Map,Ub=new Set;function om(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _a=ke.d;ke.d={f:BM,r:qM,D:HM,C:$M,L:YM,m:JM,X:QM,S:KM,M:XM};function BM(){var t=_a.f(),e=ah();return t||e}function qM(t){var e=Lo(t);e!==null&&e.tag===5&&e.type==="form"?iS(e):_a.r(t)}var zo=typeof document>"u"?null:document;function hw(t,e,n){var s=zo;if(s&&typeof e=="string"&&e){var a=qn(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Ub.has(a)||(Ub.add(a),t={rel:t,crossOrigin:n,href:e},s.querySelector(a)===null&&(e=s.createElement("link"),Jt(e,"link",t),Vt(e),s.head.appendChild(e)))}}function HM(t){_a.D(t),hw("dns-prefetch",t,null)}function $M(t,e){_a.C(t,e),hw("preconnect",t,e)}function YM(t,e,n){_a.L(t,e,n);var s=zo;if(s&&t&&e){var a='link[rel="preload"][as="'+qn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+qn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+qn(n.imageSizes)+'"]')):a+='[href="'+qn(t)+'"]';var i=a;switch(e){case"style":i=bo(t);break;case"script":i=Fo(t)}Xn.has(i)||(t=nt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Xn.set(i,t),s.querySelector(a)!==null||e==="style"&&s.querySelector(Xc(i))||e==="script"&&s.querySelector(Wc(i))||(e=s.createElement("link"),Jt(e,"link",t),Vt(e),s.head.appendChild(e)))}}function JM(t,e){_a.m(t,e);var n=zo;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+qn(s)+'"][href="'+qn(t)+'"]',i=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Fo(t)}if(!Xn.has(i)&&(t=nt({rel:"modulepreload",href:t},e),Xn.set(i,t),n.querySelector(a)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Wc(i)))return}s=n.createElement("link"),Jt(s,"link",t),Vt(s),n.head.appendChild(s)}}}function KM(t,e,n){_a.S(t,e,n);var s=zo;if(s&&t){var a=Kr(s).hoistableStyles,i=bo(t);e=e||"default";var o=a.get(i);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(Xc(i)))l.loading=5;else{t=nt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Xn.get(i))&&ax(t,n);var c=o=s.createElement("link");Vt(c),Jt(c,"link",t),c._p=new Promise(function(d,m){c.onload=d,c.onerror=m}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,yu(o,e,s)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(i,o)}}}function QM(t,e){_a.X(t,e);var n=zo;if(n&&t){var s=Kr(n).hoistableScripts,a=Fo(t),i=s.get(a);i||(i=n.querySelector(Wc(a)),i||(t=nt({src:t,async:!0},e),(e=Xn.get(a))&&ix(t,e),i=n.createElement("script"),Vt(i),Jt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function XM(t,e){_a.M(t,e);var n=zo;if(n&&t){var s=Kr(n).hoistableScripts,a=Fo(t),i=s.get(a);i||(i=n.querySelector(Wc(a)),i||(t=nt({src:t,async:!0,type:"module"},e),(e=Xn.get(a))&&ix(t,e),i=n.createElement("script"),Vt(i),Jt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(a,i))}}function Ob(t,e,n,s){var a=(a=Qa.current)?om(a):null;if(!a)throw Error(q(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=bo(n.href),n=Kr(a).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=bo(n.href);var i=Kr(a).hoistableStyles,o=i.get(t);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,o),(i=a.querySelector(Xc(t)))&&!i._p&&(o.instance=i,o.state.loading=5),Xn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Xn.set(t,n),i||WM(a,t,n,o.state))),e&&s===null)throw Error(q(528,""));return o}if(e&&s!==null)throw Error(q(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Fo(n),n=Kr(a).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(q(444,t))}}function bo(t){return'href="'+qn(t)+'"'}function Xc(t){return'link[rel="stylesheet"]['+t+"]"}function fw(t){return nt({},t,{"data-precedence":t.precedence,precedence:null})}function WM(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Jt(e,"link",n),Vt(e),t.head.appendChild(e))}function Fo(t){return'[src="'+qn(t)+'"]'}function Wc(t){return"script[async]"+t}function zb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+qn(n.href)+'"]');if(s)return e.instance=s,Vt(s),s;var a=nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Vt(s),Jt(s,"style",a),yu(s,n.precedence,t),e.instance=s;case"stylesheet":a=bo(n.href);var i=t.querySelector(Xc(a));if(i)return e.state.loading|=4,e.instance=i,Vt(i),i;s=fw(n),(a=Xn.get(a))&&ax(s,a),i=(t.ownerDocument||t).createElement("link"),Vt(i);var o=i;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Jt(i,"link",s),e.state.loading|=4,yu(i,n.precedence,t),e.instance=i;case"script":return i=Fo(n.src),(a=t.querySelector(Wc(i)))?(e.instance=a,Vt(a),a):(s=n,(a=Xn.get(i))&&(s=nt({},n),ix(s,a)),t=t.ownerDocument||t,a=t.createElement("script"),Vt(a),Jt(a,"link",s),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(q(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,yu(s,n.precedence,t));return e.instance}function yu(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,i=a,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===e)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function ax(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ix(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var bu=null;function Fb(t,e,n){if(bu===null){var s=new Map,a=bu=new Map;a.set(n,s)}else a=bu,s=a.get(n),s||(s=new Map,a.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var i=n[a];if(!(i[Hc]||i[Ht]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(e)||"";o=t+o;var l=s.get(o);l?l.push(i):s.set(o,[i])}}return s}function Gb(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function ZM(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function pw(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function eP(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=bo(s.href),i=e.querySelector(Xc(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=lm.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,Vt(i);return}i=e.ownerDocument||e,s=fw(s),(a=Xn.get(a))&&ax(s,a),i=i.createElement("link"),Vt(i);var o=i;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Jt(i,"link",s),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=lm.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Wf=0;function tP(t,e){return t.stylesheets&&t.count===0&&_u(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&Wf===0&&(Wf=62500*kM());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>Wf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(a)}}:null}function lm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var cm=null;function _u(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,cm=new Map,e.forEach(nP,t),cm=null,lm.call(t))}function nP(t,e){if(!(e.state.loading&4)){var n=cm.get(t);if(n)var s=n.get(null);else{n=new Map,cm.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}a=e.instance,o=a.getAttribute("data-precedence"),i=n.get(o)||s,i===s&&n.set(null,a),n.set(o,a),this.count++,s=lm.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),i?i.parentNode.insertBefore(a,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var Tc={$$typeof:Qs,Provider:null,Consumer:null,_currentValue:Yi,_currentValue2:Yi,_threadCount:0};function sP(t,e,n,s,a,i,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_f(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_f(0),this.hiddenUpdates=_f(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function gw(t,e,n,s,a,i,o,l,c,d,m,p){return t=new sP(t,e,n,o,c,d,m,p,l),e=1,i===!0&&(e|=24),i=Tn(3,null,null,e),t.current=i,i.stateNode=t,e=j0(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},D0(i),t}function xw(t){return t?(t=Gr,t):Gr}function vw(t,e,n,s,a,i){a=xw(a),s.context===null?s.context=a:s.pendingContext=a,s=Wa(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=Za(t,s,e),n!==null&&(yn(n,t,e),Wl(n,t,e))}function Bb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rx(t,e){Bb(t,e),(t=t.alternate)&&Bb(t,e)}function yw(t){if(t.tag===13||t.tag===31){var e=hr(t,67108864);e!==null&&yn(e,t,67108864),rx(t,67108864)}}function qb(t){if(t.tag===13||t.tag===31){var e=Dn();e=x0(e);var n=hr(t,e);n!==null&&yn(n,t,e),rx(t,e)}}var dm=!0;function aP(t,e,n,s){var a=ce.T;ce.T=null;var i=ke.p;try{ke.p=2,ox(t,e,n,s)}finally{ke.p=i,ce.T=a}}function iP(t,e,n,s){var a=ce.T;ce.T=null;var i=ke.p;try{ke.p=8,ox(t,e,n,s)}finally{ke.p=i,ce.T=a}}function ox(t,e,n,s){if(dm){var a=fg(s);if(a===null)Qf(t,e,s,um,n),Hb(t,s);else if(oP(a,t,e,n,s))s.stopPropagation();else if(Hb(t,s),e&4&&-1<rP.indexOf(t)){for(;a!==null;){var i=Lo(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=Oi(i.pendingLanes);if(o!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Pn(o);l.entanglements[1]|=c,o&=~c}Us(i),!(De&6)&&(em=jn()+500,Qc(0))}}break;case 31:case 13:l=hr(i,2),l!==null&&yn(l,i,2),ah(),rx(i,2)}if(i=fg(s),i===null&&Qf(t,e,s,um,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else Qf(t,e,s,null,n)}}function fg(t){return t=_0(t),lx(t)}var um=null;function lx(t){if(um=null,t=Lr(t),t!==null){var e=Fc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=OC(e),t!==null)return t;t=null}else if(n===31){if(t=zC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return um=t,null}function bw(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(HR()){case qC:return 2;case HC:return 8;case zu:case $R:return 32;case $C:return 268435456;default:return 32}default:return 32}}var pg=!1,ni=null,si=null,ai=null,Sc=new Map,wc=new Map,za=[],rP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hb(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(e.pointerId)}}function jl(t,e,n,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},e!==null&&(e=Lo(e),e!==null&&yw(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function oP(t,e,n,s,a){switch(e){case"focusin":return ni=jl(ni,t,e,n,s,a),!0;case"dragenter":return si=jl(si,t,e,n,s,a),!0;case"mouseover":return ai=jl(ai,t,e,n,s,a),!0;case"pointerover":var i=a.pointerId;return Sc.set(i,jl(Sc.get(i)||null,t,e,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,wc.set(i,jl(wc.get(i)||null,t,e,n,s,a)),!0}return!1}function _w(t){var e=Lr(t.target);if(e!==null){var n=Fc(e);if(n!==null){if(e=n.tag,e===13){if(e=OC(n),e!==null){t.blockedOn=e,Iy(t.priority,function(){qb(n)});return}}else if(e===31){if(e=zC(n),e!==null){t.blockedOn=e,Iy(t.priority,function(){qb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fg(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Pp=s,n.target.dispatchEvent(s),Pp=null}else return e=Lo(n),e!==null&&yw(e),t.blockedOn=n,!1;e.shift()}return!0}function $b(t,e,n){Eu(t)&&n.delete(e)}function lP(){pg=!1,ni!==null&&Eu(ni)&&(ni=null),si!==null&&Eu(si)&&(si=null),ai!==null&&Eu(ai)&&(ai=null),Sc.forEach($b),wc.forEach($b)}function Gd(t,e){t.blockedOn===e&&(t.blockedOn=null,pg||(pg=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,lP)))}var Bd=null;function Yb(t){Bd!==t&&(Bd=t,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,function(){Bd===t&&(Bd=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],a=t[e+2];if(typeof s!="function"){if(lx(s||n)===null)continue;break}var i=Lo(n);i!==null&&(t.splice(e,3),e-=3,Kp(i,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function _o(t){function e(c){return Gd(c,t)}ni!==null&&Gd(ni,t),si!==null&&Gd(si,t),ai!==null&&Gd(ai,t),Sc.forEach(e),wc.forEach(e);for(var n=0;n<za.length;n++){var s=za[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<za.length&&(n=za[0],n.blockedOn===null);)_w(n),n.blockedOn===null&&za.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var a=n[s],i=n[s+1],o=a[bn]||null;if(typeof i=="function")o||Yb(n);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[bn]||null)l=o.formAction;else if(lx(a)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),Yb(n)}}}function Ew(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(o){return a=o})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function cx(t){this._internalRoot=t}oh.prototype.render=cx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));var n=e.current,s=Dn();vw(n,s,t,e,null,null)};oh.prototype.unmount=cx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vw(t.current,2,null,t,null,null),ah(),e[ko]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=XC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<za.length&&e!==0&&e<za[n].priority;n++);za.splice(n,0,t),n===0&&_w(t)}};var Jb=VC.version;if(Jb!=="19.2.3")throw Error(q(527,Jb,"19.2.3"));ke.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=UR(e),t=t!==null?FC(t):null,t=t===null?null:t.stateNode,t};var cP={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{Gc=qd.inject(cP),Mn=qd}catch{}}qm.createRoot=function(t,e){if(!UC(t))throw Error(q(299));var n=!1,s="",a=hS,i=fS,o=pS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=gw(t,1,!1,null,null,n,s,null,a,i,o,Ew),t[ko]=e.current,sx(t),new cx(e)};qm.hydrateRoot=function(t,e,n){if(!UC(t))throw Error(q(299));var s=!1,a="",i=hS,o=fS,l=pS,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=gw(t,1,!0,e,n??null,s,a,c,i,o,l,Ew),e.context=xw(null),n=e.current,s=Dn(),s=x0(s),a=Wa(s),a.callback=null,Za(n,a,s),n=s,e.current.lanes=n,qc(e,n),Us(e),t[ko]=e.current,sx(t),new oh(e)};qm.version="19.2.3";function Nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nw)}catch(t){console.error(t)}}Nw(),jC.exports=qm;var dP=jC.exports;const uP=_C(dP);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Kb="popstate";function mP(t={}){function e(s,a){let{pathname:i,search:o,hash:l}=s.location;return gg("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Ac(a)}return fP(e,n,null,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hP(){return Math.random().toString(36).substring(2,10)}function Qb(t,e){return{usr:t.state,key:t.key,idx:e}}function gg(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:n,key:e&&e.key||s||hP()}}function Ac({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function fP(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l="POP",c=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function p(){l="POP";let I=m(),b=I==null?null:I-d;d=I,c&&c({action:l,location:T.location,delta:b})}function g(I,b){l="PUSH";let N=gg(T.location,I,b);d=m()+1;let w=Qb(N,d),D=T.createHref(N);try{o.pushState(w,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(D)}i&&c&&c({action:l,location:T.location,delta:1})}function x(I,b){l="REPLACE";let N=gg(T.location,I,b);d=m();let w=Qb(N,d),D=T.createHref(N);o.replaceState(w,"",D),i&&c&&c({action:l,location:T.location,delta:0})}function y(I){return pP(I)}let T={get action(){return l},get location(){return t(a,o)},listen(I){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Kb,p),c=I,()=>{a.removeEventListener(Kb,p),c=null}},createHref(I){return e(a,I)},createURL:y,encodeLocation(I){let b=y(I);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:x,go(I){return o.go(I)}};return T}function pP(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),rt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Ac(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Cw(t,e,n="/"){return gP(t,e,n,!1)}function gP(t,e,n,s){let a=typeof e=="string"?Go(e):e,i=ha(a.pathname||"/",n);if(i==null)return null;let o=Tw(t);xP(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=AP(i);l=SP(o[c],d,s)}return l}function Tw(t,e=[],n=[],s="",a=!1){let i=(o,l,c=a,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&c)return;rt(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let p=aa([s,m.relativePath]),g=n.concat(m);o.children&&o.children.length>0&&(rt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Tw(o.children,e,g,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:CP(p,o.index),routesMeta:g})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of Sw(o.path))i(o,l,!0,d)}),e}function Sw(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=Sw(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function xP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TP(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var vP=/^:[\w-]+$/,yP=3,bP=2,_P=1,EP=10,NP=-2,Xb=t=>t==="*";function CP(t,e){let n=t.split("/"),s=n.length;return n.some(Xb)&&(s+=NP),e&&(s+=bP),n.filter(a=>!Xb(a)).reduce((a,i)=>a+(vP.test(i)?yP:i===""?_P:EP),s)}function TP(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function SP(t,e,n=!1){let{routesMeta:s}=t,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=mm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),g=c.route;if(!p&&d&&n&&!s[s.length-1].route.index&&(p=mm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:aa([i,p.pathname]),pathnameBase:MP(aa([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=aa([i,p.pathnameBase]))}return o}function mm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=wP(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,{paramName:m,isOptional:p},g)=>{if(m==="*"){let y=l[g]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function wP(t,e=!1,n=!0){Wn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function AP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ha(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var ww=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IP=t=>ww.test(t);function RP(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Go(t):t,i;if(n)if(IP(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wn(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=Wb(n.substring(1),"/"):i=Wb(n,e)}else i=e;return{pathname:i,search:PP(s),hash:DP(a)}}function Wb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Zf(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dx(t){let e=jP(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function ux(t,e,n,s=!1){let a;typeof t=="string"?a=Go(t):(a={...t},rt(!a.pathname||!a.pathname.includes("?"),Zf("?","pathname","search",a)),rt(!a.pathname||!a.pathname.includes("#"),Zf("#","pathname","hash",a)),rt(!a.search||!a.search.includes("#"),Zf("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;a.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=RP(a,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}var aa=t=>t.join("/").replace(/\/\/+/g,"/"),MP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,kP=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function LP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function VP(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Aw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Iw(t,e){let n=t;if(typeof n!="string"||!ww.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(Aw)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=ha(o.pathname,e);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:a=!0}catch{Wn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Rw=["POST","PUT","PATCH","DELETE"];new Set(Rw);var UP=["GET",...Rw];new Set(UP);var Bo=M.createContext(null);Bo.displayName="DataRouter";var lh=M.createContext(null);lh.displayName="DataRouterState";var OP=M.createContext(!1),jw=M.createContext({isTransitioning:!1});jw.displayName="ViewTransition";var zP=M.createContext(new Map);zP.displayName="Fetchers";var FP=M.createContext(null);FP.displayName="Await";var Un=M.createContext(null);Un.displayName="Navigation";var Zc=M.createContext(null);Zc.displayName="Location";var ys=M.createContext({outlet:null,matches:[],isDataRoute:!1});ys.displayName="Route";var mx=M.createContext(null);mx.displayName="RouteError";var Mw="REACT_ROUTER_ERROR",GP="REDIRECT",BP="ROUTE_ERROR_RESPONSE";function qP(t){if(t.startsWith(`${Mw}:${GP}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function HP(t){if(t.startsWith(`${Mw}:${BP}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new kP(e.status,e.statusText,e.data)}catch{}}function $P(t,{relative:e}={}){rt(qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=M.useContext(Un),{hash:a,pathname:i,search:o}=ed(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:aa([n,i])),s.createHref({pathname:l,search:o,hash:a})}function qo(){return M.useContext(Zc)!=null}function Os(){return rt(qo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Zc).location}var Pw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dw(t){M.useContext(Un).static||M.useLayoutEffect(t)}function bs(){let{isDataRoute:t}=M.useContext(ys);return t?rD():YP()}function YP(){rt(qo(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Bo),{basename:e,navigator:n}=M.useContext(Un),{matches:s}=M.useContext(ys),{pathname:a}=Os(),i=JSON.stringify(dx(s)),o=M.useRef(!1);return Dw(()=>{o.current=!0}),M.useCallback((c,d={})=>{if(Wn(o.current,Pw),!o.current)return;if(typeof c=="number"){n.go(c);return}let m=ux(c,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:aa([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,i,a,t])}M.createContext(null);function JP(){let{matches:t}=M.useContext(ys),e=t[t.length-1];return e?e.params:{}}function ed(t,{relative:e}={}){let{matches:n}=M.useContext(ys),{pathname:s}=Os(),a=JSON.stringify(dx(n));return M.useMemo(()=>ux(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function KP(t,e){return kw(t,e)}function kw(t,e,n,s,a){var N;rt(qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(Un),{matches:o}=M.useContext(ys),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",m=l?l.pathnameBase:"/",p=l&&l.route;{let w=p&&p.path||"";Vw(d,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=Os(),x;if(e){let w=typeof e=="string"?Go(e):e;rt(m==="/"||((N=w.pathname)==null?void 0:N.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=g;let y=x.pathname||"/",T=y;if(m!=="/"){let w=m.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let I=Cw(t,{pathname:T});Wn(p||I!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Wn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=eD(I&&I.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:aa([m,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?m:aa([m,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,s,a);return e&&b?M.createElement(Zc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},b):b}function QP(){let t=iD(),e=LP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:i},"ErrorBoundary")," or"," ",M.createElement("code",{style:i},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:a},n):null,o)}var XP=M.createElement(QP,null),Lw=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=HP(t.digest);n&&(t=n)}let e=t!==void 0?M.createElement(ys.Provider,{value:this.props.routeContext},M.createElement(mx.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?M.createElement(WP,{error:t},e):e}};Lw.contextType=OP;var ep=new WeakMap;function WP({children:t,error:e}){let{basename:n}=M.useContext(Un);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=qP(e.digest);if(s){let a=ep.get(e);if(a)throw a;let i=Iw(s.location,n);if(Aw&&!ep.get(e))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw ep.set(e,o),o}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function ZP({routeContext:t,match:e,children:n}){let s=M.useContext(Bo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(ys.Provider,{value:t},n)}function eD(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let m=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);rt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let l=!1,c=-1;if(n)for(let m=0;m<i.length;m++){let p=i[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=m),p.route.id){let{loaderData:g,errors:x}=n,y=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=n&&s?(m,p)=>{var g,x;s(m,{location:n.location,params:((x=(g=n.matches)==null?void 0:g[0])==null?void 0:x.params)??{},unstable_pattern:VP(n.matches),errorInfo:p})}:void 0;return i.reduceRight((m,p,g)=>{let x,y=!1,T=null,I=null;n&&(x=o&&p.route.id?o[p.route.id]:void 0,T=p.route.errorElement||XP,l&&(c<0&&g===0?(Vw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,I=null):c===g&&(y=!0,I=p.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,g+1)),N=()=>{let w;return x?w=T:y?w=I:p.route.Component?w=M.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=m,M.createElement(ZP,{match:p,routeContext:{outlet:m,matches:b,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(Lw,{location:n.location,revalidation:n.revalidation,component:T,error:x,children:N(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):N()},null)}function hx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tD(t){let e=M.useContext(Bo);return rt(e,hx(t)),e}function nD(t){let e=M.useContext(lh);return rt(e,hx(t)),e}function sD(t){let e=M.useContext(ys);return rt(e,hx(t)),e}function fx(t){let e=sD(t),n=e.matches[e.matches.length-1];return rt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aD(){return fx("useRouteId")}function iD(){var s;let t=M.useContext(mx),e=nD("useRouteError"),n=fx("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function rD(){let{router:t}=tD("useNavigate"),e=fx("useNavigate"),n=M.useRef(!1);return Dw(()=>{n.current=!0}),M.useCallback(async(a,i={})=>{Wn(n.current,Pw),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var Zb={};function Vw(t,e,n){!e&&!Zb[t]&&(Zb[t]=!0,Wn(!1,n))}M.memo(oD);function oD({routes:t,future:e,state:n,onError:s}){return kw(t,void 0,n,s,e)}function rs({to:t,replace:e,state:n,relative:s}){rt(qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(Un);Wn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=M.useContext(ys),{pathname:o}=Os(),l=bs(),c=ux(t,dx(i),o,s==="path"),d=JSON.stringify(c);return M.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:s})},[l,d,s,e,n]),null}function rn(t){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lD({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){rt(!qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[l,a,i,o]);typeof n=="string"&&(n=Go(n));let{pathname:d="/",search:m="",hash:p="",state:g=null,key:x="default"}=n,y=M.useMemo(()=>{let T=ha(d,l);return T==null?null:{location:{pathname:T,search:m,hash:p,state:g,key:x},navigationType:s}},[l,d,m,p,g,x,s]);return Wn(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:M.createElement(Un.Provider,{value:c},M.createElement(Zc.Provider,{children:e,value:y}))}function cD({children:t,location:e}){return KP(xg(t),e)}function xg(t,e=[]){let n=[];return M.Children.forEach(t,(s,a)=>{if(!M.isValidElement(s))return;let i=[...e,a];if(s.type===M.Fragment){n.push.apply(n,xg(s.props.children,i));return}rt(s.type===rn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=xg(s.props.children,i)),n.push(o)}),n}var Nu="get",Cu="application/x-www-form-urlencoded";function ch(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function dD(t){return ch(t)&&t.tagName.toLowerCase()==="button"}function uD(t){return ch(t)&&t.tagName.toLowerCase()==="form"}function mD(t){return ch(t)&&t.tagName.toLowerCase()==="input"}function hD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fD(t,e){return t.button===0&&(!e||e==="_self")&&!hD(t)}var Hd=null;function pD(){if(Hd===null)try{new FormData(document.createElement("form"),0),Hd=!1}catch{Hd=!0}return Hd}var gD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tp(t){return t!=null&&!gD.has(t)?(Wn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cu}"`),null):t}function xD(t,e){let n,s,a,i,o;if(uD(t)){let l=t.getAttribute("action");s=l?ha(l,e):null,n=t.getAttribute("method")||Nu,a=tp(t.getAttribute("enctype"))||Cu,i=new FormData(t)}else if(dD(t)||mD(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?ha(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Nu,a=tp(t.getAttribute("formenctype"))||tp(l.getAttribute("enctype"))||Cu,i=new FormData(l,t),!pD()){let{name:d,type:m,value:p}=t;if(m==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,p)}}else{if(ch(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nu,s=null,a=Cu,o=t}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function px(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vD(t,e,n,s){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${s}`:a.pathname=`${a.pathname}.${s}`:a.pathname==="/"?a.pathname=`_root.${s}`:e&&ha(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function yD(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _D(t,e,n){let s=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await yD(i,n);return o.links?o.links():[]}return[]}));return TD(s.flat(1).filter(bD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function e_(t,e,n,s,a,i){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var m;return n[d].pathname!==c.pathname||((m=n[d].route.path)==null?void 0:m.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var p;let m=s.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function ED(t,e,{includeHydrateFallback:n}={}){return ND(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function ND(t){return[...new Set(t)]}function CD(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function TD(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let i=JSON.stringify(CD(a));return n.has(i)||(n.add(i),s.push({key:i,link:a})),s},[])}function Uw(){let t=M.useContext(Bo);return px(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function SD(){let t=M.useContext(lh);return px(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var gx=M.createContext(void 0);gx.displayName="FrameworkContext";function Ow(){let t=M.useContext(gx);return px(t,"You must render this element inside a <HydratedRouter> element"),t}function wD(t,e){let n=M.useContext(gx),[s,a]=M.useState(!1),[i,o]=M.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:m,onTouchStart:p}=e,g=M.useRef(null);M.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=b=>{b.forEach(N=>{o(N.isIntersecting)})},I=new IntersectionObserver(T,{threshold:.5});return g.current&&I.observe(g.current),()=>{I.disconnect()}}},[t]),M.useEffect(()=>{if(s){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[s]);let x=()=>{a(!0)},y=()=>{a(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Ml(l,x),onBlur:Ml(c,y),onMouseEnter:Ml(d,x),onMouseLeave:Ml(m,y),onTouchStart:Ml(p,x)}]:[!1,g,{}]}function Ml(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function AD({page:t,...e}){let{router:n}=Uw(),s=M.useMemo(()=>Cw(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?M.createElement(RD,{page:t,matches:s,...e}):null}function ID(t){let{manifest:e,routeModules:n}=Ow(),[s,a]=M.useState([]);return M.useEffect(()=>{let i=!1;return _D(t,e,n).then(o=>{i||a(o)}),()=>{i=!0}},[t,e,n]),s}function RD({page:t,matches:e,...n}){let s=Os(),{future:a,manifest:i,routeModules:o}=Ow(),{basename:l}=Uw(),{loaderData:c,matches:d}=SD(),m=M.useMemo(()=>e_(t,e,d,i,s,"data"),[t,e,d,i,s]),p=M.useMemo(()=>e_(t,e,d,i,s,"assets"),[t,e,d,i,s]),g=M.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let T=new Set,I=!1;if(e.forEach(N=>{var D;let w=i.routes[N.route.id];!w||!w.hasLoader||(!m.some(V=>V.route.id===N.route.id)&&N.route.id in c&&((D=o[N.route.id])!=null&&D.shouldRevalidate)||w.hasClientLoader?I=!0:T.add(N.route.id))}),T.size===0)return[];let b=vD(t,l,a.unstable_trailingSlashAwareDataRequests,"data");return I&&T.size>0&&b.searchParams.set("_routes",e.filter(N=>T.has(N.route.id)).map(N=>N.route.id).join(",")),[b.pathname+b.search]},[l,a.unstable_trailingSlashAwareDataRequests,c,s,i,m,e,t,o]),x=M.useMemo(()=>ED(p,i),[p,i]),y=ID(p);return M.createElement(M.Fragment,null,g.map(T=>M.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),x.map(T=>M.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),y.map(({key:T,link:I})=>M.createElement("link",{key:T,nonce:n.nonce,...I})))}function jD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var MD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MD&&(window.__reactRouterVersion="7.12.0")}catch{}function PD({basename:t,children:e,unstable_useTransitions:n,window:s}){let a=M.useRef();a.current==null&&(a.current=mP({window:s,v5Compat:!0}));let i=a.current,[o,l]=M.useState({action:i.action,location:i.location}),c=M.useCallback(d=>{n===!1?l(d):M.startTransition(()=>l(d))},[n]);return M.useLayoutEffect(()=>i.listen(c),[i,c]),M.createElement(lD,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fw=M.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...x},y){let{basename:T,unstable_useTransitions:I}=M.useContext(Un),b=typeof d=="string"&&zw.test(d),N=Iw(d,T);d=N.to;let w=$P(d,{relative:a}),[D,V,k]=wD(s,x),R=VD(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:I});function E(C){e&&e(C),C.defaultPrevented||R(C)}let S=M.createElement("a",{...x,...k,href:N.absoluteURL||w,onClick:N.isExternal||i?e:E,ref:jD(y,V),target:c,"data-discover":!b&&n==="render"?"true":void 0});return D&&!b?M.createElement(M.Fragment,null,S,M.createElement(AD,{page:w})):S});Fw.displayName="Link";var DD=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},m){let p=ed(o,{relative:d.relative}),g=Os(),x=M.useContext(lh),{navigator:y,basename:T}=M.useContext(Un),I=x!=null&&GD(p)&&l===!0,b=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=g.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(N=N.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&T&&(w=ha(w,T)||w);const D=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let V=N===b||!a&&N.startsWith(b)&&N.charAt(D)==="/",k=w!=null&&(w===b||!a&&w.startsWith(b)&&w.charAt(b.length)==="/"),R={isActive:V,isPending:k,isTransitioning:I},E=V?e:void 0,S;typeof s=="function"?S=s(R):S=[s,V?"active":null,k?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(R):i;return M.createElement(Fw,{...d,"aria-current":E,className:S,ref:m,style:C,to:o,viewTransition:l},typeof c=="function"?c(R):c)});DD.displayName="NavLink";var kD=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:i,method:o=Nu,action:l,onSubmit:c,relative:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...x},y)=>{let{unstable_useTransitions:T}=M.useContext(Un),I=zD(),b=FD(l,{relative:d}),N=o.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&zw.test(l),D=V=>{if(c&&c(V),V.defaultPrevented)return;V.preventDefault();let k=V.nativeEvent.submitter,R=(k==null?void 0:k.getAttribute("formmethod"))||o,E=()=>I(k||V.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:a,state:i,relative:d,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g});T&&n!==!1?M.startTransition(()=>E()):E()};return M.createElement("form",{ref:y,method:N,action:b,onSubmit:s?c:D,...x,"data-discover":!w&&t==="render"?"true":void 0})});kD.displayName="Form";function LD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gw(t){let e=M.useContext(Bo);return rt(e,LD(t)),e}function VD(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=bs(),m=Os(),p=ed(t,{relative:i});return M.useCallback(g=>{if(fD(g,e)){g.preventDefault();let x=n!==void 0?n:Ac(m)===Ac(p),y=()=>d(t,{replace:x,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?M.startTransition(()=>y()):y()}},[m,d,p,n,s,e,t,a,i,o,l,c])}var UD=0,OD=()=>`__${String(++UD)}__`;function zD(){let{router:t}=Gw("useSubmit"),{basename:e}=M.useContext(Un),n=aD(),s=t.fetch,a=t.navigate;return M.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=xD(i,e);if(o.navigate===!1){let g=o.fetcherKey||OD();await s(g,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:p,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:p,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,a,e,n])}function FD(t,{relative:e}={}){let{basename:n}=M.useContext(Un),s=M.useContext(ys);rt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...ed(t||".",{relative:e})},o=Os();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();i.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:aa([n,i.pathname])),Ac(i)}function GD(t,{relative:e}={}){let n=M.useContext(jw);rt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Gw("useViewTransitionState"),a=ed(t,{relative:e});if(!n.isTransitioning)return!1;let i=ha(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=ha(n.nextLocation.pathname,s)||n.nextLocation.pathname;return mm(a.pathname,o)!=null||mm(a.pathname,i)!=null}const BD="modulepreload",qD=function(t){return"/EDUPLANMX/"+t},t_={},Eo=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=qD(c),c in t_)return;t_[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":BD,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,x)=>{p.addEventListener("load",g),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},HD=()=>{};var n_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},$D=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[n++];e[s++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[n++],o=t[n++],l=t[n++],c=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,d=c?t[a+2]:0,m=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(g=64)),s.push(n[m],n[p],n[g],n[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$D(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const i=n[t.charAt(a++)],l=a<t.length?n[t.charAt(a)]:0;++a;const d=a<t.length?n[t.charAt(a)]:64;++a;const p=a<t.length?n[t.charAt(a)]:64;if(++a,i==null||l==null||d==null||p==null)throw new YD;const g=i<<2|l>>4;if(s.push(g),d!==64){const x=l<<4&240|d>>2;if(s.push(x),p!==64){const y=d<<6&192|p;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JD=function(t){const e=Bw(t);return qw.encodeByteArray(e,!0)},hm=function(t){return JD(t).replace(/\./g,"")},Hw=function(t){try{return qw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=()=>KD().__FIREBASE_DEFAULTS__,XD=()=>{if(typeof process>"u"||typeof n_>"u")return;const t=n_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hw(t[1]);return e&&JSON.parse(e)},dh=()=>{try{return HD()||QD()||XD()||WD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$w=t=>{var e,n;return(n=(e=dh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ZD=t=>{const e=$w(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Yw=()=>{var t;return(t=dh())==null?void 0:t.config},Jw=t=>{var e;return(e=dh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[hm(JSON.stringify(n)),hm(JSON.stringify(o)),""].join(".")}const oc={};function n4(){const t={prod:[],emulator:[]};for(const e of Object.keys(oc))oc[e]?t.emulator.push(e):t.prod.push(e);return t}function s4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let s_=!1;function Qw(t,e){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||oc[t]===e||oc[t]||s_)return;oc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=n4().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{s_=!0,o()},g}function m(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=s4(s),x=n("text"),y=document.getElementById(x)||document.createElement("span"),T=n("learnmore"),I=document.getElementById(T)||document.createElement("a"),b=n("preprendIcon"),N=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;l(w),m(I,T);const D=d();c(N,b),w.append(N,y,I,D),document.body.appendChild(w)}i?(y.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function i4(){var e;const t=(e=dh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function l4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c4(){const t=nn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d4(){return!i4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u4(){try{return typeof indexedDB=="object"}catch{return!1}}function m4(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="FirebaseError";class Ea extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=h4,Object.setPrototypeOf(this,Ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,td.prototype.create)}}class td{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?f4(i,s):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Ea(a,l,s)}}function f4(t,e){return t.replace(p4,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const p4=/\{\$([^}]+)}/g;function g4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fa(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const i=t[a],o=e[a];if(a_(i)&&a_(o)){if(!fa(i,o))return!1}else if(i!==o)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function a_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function zl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,i]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function Fl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function x4(t,e){const n=new v4(t,e);return n.subscribe.bind(n)}class v4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");y4(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=np),a.error===void 0&&(a.error=np),a.complete===void 0&&(a.complete=np);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new e4;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E4(e))try{this.getOrInitializeService({instanceIdentifier:Gi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:a});s.resolve(i)}catch{}}}}clearInstance(e=Gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gi){return this.instances.has(e)}getOptions(e=Gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const i=this.instances.get(s);return i&&e(i,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_4(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Gi){return this.component?this.component.multipleInstances?e:Gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _4(t){return t===Gi?void 0:t}function E4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new b4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const C4={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},T4=Ne.INFO,S4={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},w4=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=S4[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xx{constructor(e){this.name=e,this._logLevel=T4,this._logHandler=w4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const A4=(t,e)=>e.some(n=>t instanceof n);let i_,r_;function I4(){return i_||(i_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R4(){return r_||(r_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xw=new WeakMap,vg=new WeakMap,Ww=new WeakMap,sp=new WeakMap,vx=new WeakMap;function j4(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ii(t.result)),a()},o=()=>{s(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xw.set(n,t)}).catch(()=>{}),vx.set(e,t),e}function M4(t){if(vg.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),a()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vg.set(t,e)}let yg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ww.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P4(t){yg=t(yg)}function D4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ap(this),e,...n);return Ww.set(s,e.sort?e.sort():[e]),ii(s)}:R4().includes(t)?function(...e){return t.apply(ap(this),e),ii(Xw.get(this))}:function(...e){return ii(t.apply(ap(this),e))}}function k4(t){return typeof t=="function"?D4(t):(t instanceof IDBTransaction&&M4(t),A4(t,I4())?new Proxy(t,yg):t)}function ii(t){if(t instanceof IDBRequest)return j4(t);if(sp.has(t))return sp.get(t);const e=k4(t);return e!==t&&(sp.set(t,e),vx.set(e,t)),e}const ap=t=>vx.get(t);function L4(t,e,{blocked:n,upgrade:s,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),l=ii(o);return s&&o.addEventListener("upgradeneeded",c=>{s(ii(o.result),c.oldVersion,c.newVersion,ii(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),a&&c.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const V4=["get","getKey","getAll","getAllKeys","count"],U4=["put","add","delete","clear"],ip=new Map;function o_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=U4.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||V4.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),a&&c.done]))[0]};return ip.set(e,i),i}P4(t=>({...t,get:(e,n,s)=>o_(e,n)||t.get(e,n,s),has:(e,n)=>!!o_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z4(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function z4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bg="@firebase/app",l_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new xx("@firebase/app"),F4="@firebase/app-compat",G4="@firebase/analytics-compat",B4="@firebase/analytics",q4="@firebase/app-check-compat",H4="@firebase/app-check",$4="@firebase/auth",Y4="@firebase/auth-compat",J4="@firebase/database",K4="@firebase/data-connect",Q4="@firebase/database-compat",X4="@firebase/functions",W4="@firebase/functions-compat",Z4="@firebase/installations",e5="@firebase/installations-compat",t5="@firebase/messaging",n5="@firebase/messaging-compat",s5="@firebase/performance",a5="@firebase/performance-compat",i5="@firebase/remote-config",r5="@firebase/remote-config-compat",o5="@firebase/storage",l5="@firebase/storage-compat",c5="@firebase/firestore",d5="@firebase/ai",u5="@firebase/firestore-compat",m5="firebase",h5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="[DEFAULT]",f5={[bg]:"fire-core",[F4]:"fire-core-compat",[B4]:"fire-analytics",[G4]:"fire-analytics-compat",[H4]:"fire-app-check",[q4]:"fire-app-check-compat",[$4]:"fire-auth",[Y4]:"fire-auth-compat",[J4]:"fire-rtdb",[K4]:"fire-data-connect",[Q4]:"fire-rtdb-compat",[X4]:"fire-fn",[W4]:"fire-fn-compat",[Z4]:"fire-iid",[e5]:"fire-iid-compat",[t5]:"fire-fcm",[n5]:"fire-fcm-compat",[s5]:"fire-perf",[a5]:"fire-perf-compat",[i5]:"fire-rc",[r5]:"fire-rc-compat",[o5]:"fire-gcs",[l5]:"fire-gcs-compat",[c5]:"fire-fst",[u5]:"fire-fst-compat",[d5]:"fire-vertex","fire-js":"fire-js",[m5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new Map,p5=new Map,Eg=new Map;function c_(t,e){try{t.container.addComponent(e)}catch(n){pa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function No(t){const e=t.name;if(Eg.has(e))return pa.debug(`There were multiple attempts to register component ${e}.`),!1;Eg.set(e,t);for(const n of fm.values())c_(n,t);for(const n of p5.values())c_(n,t);return!0}function yx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new td("app","Firebase",g5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=h5;function Zw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:_g,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ri.create("bad-app-name",{appName:String(a)});if(n||(n=Yw()),!n)throw ri.create("no-options");const i=fm.get(a);if(i){if(fa(n,i.options)&&fa(s,i.config))return i;throw ri.create("duplicate-app",{appName:a})}const o=new N4(a);for(const c of Eg.values())o.addComponent(c);const l=new x5(n,s,o);return fm.set(a,l),l}function eA(t=_g){const e=fm.get(t);if(!e&&t===_g&&Yw())return Zw();if(!e)throw ri.create("no-app",{appName:t});return e}function oi(t,e,n){let s=f5[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const o=[`Unable to register library "${s}" with version "${e}":`];a&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pa.warn(o.join(" "));return}No(new sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="firebase-heartbeat-database",y5=1,Ic="firebase-heartbeat-store";let rp=null;function tA(){return rp||(rp=L4(v5,y5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),rp}async function b5(t){try{const n=(await tA()).transaction(Ic),s=await n.objectStore(Ic).get(nA(t));return await n.done,s}catch(e){if(e instanceof Ea)pa.warn(e.message);else{const n=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pa.warn(n.message)}}}async function d_(t,e){try{const s=(await tA()).transaction(Ic,"readwrite");await s.objectStore(Ic).put(e,nA(t)),await s.done}catch(n){if(n instanceof Ea)pa.warn(n.message);else{const s=ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pa.warn(s.message)}}}function nA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=1024,E5=30;class N5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T5(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=u_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>E5){const o=S5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){pa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u_(),{heartbeatsToSend:s,unsentEntries:a}=C5(this._heartbeatsCache.heartbeats),i=hm(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return pa.warn(n),""}}}function u_(){return new Date().toISOString().substring(0,10)}function C5(t,e=_5){const n=[];let s=t.slice();for(const a of t){const i=n.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),m_(n)>e){i.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),m_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class T5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u4()?m4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return d_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return d_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function m_(t){return hm(JSON.stringify({version:2,heartbeats:t})).length}function S5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){No(new sr("platform-logger",e=>new O4(e),"PRIVATE")),No(new sr("heartbeat",e=>new N5(e),"PRIVATE")),oi(bg,l_,t),oi(bg,l_,"esm2020"),oi("fire-js","")}w5("");function sA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A5=sA,aA=new td("auth","Firebase",sA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new xx("@firebase/auth");function I5(t,...e){pm.logLevel<=Ne.WARN&&pm.warn(`Auth (${$o}): ${t}`,...e)}function Tu(t,...e){pm.logLevel<=Ne.ERROR&&pm.error(`Auth (${$o}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw _x(t,...e)}function cs(t,...e){return _x(t,...e)}function bx(t,e,n){const s={...A5(),[e]:n};return new td("auth","Firebase",s).create(e,{appName:t.name})}function ia(t){return bx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R5(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Zn(t,"argument-error"),bx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _x(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return aA.create(t,...e)}function oe(t,e,...n){if(!t)throw _x(e,...n)}function Zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function ga(t,e){t||Zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function j5(){return h_()==="http:"||h_()==="https:"}function h_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j5()||o4()||"connection"in navigator)?navigator.onLine:!0}function P5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.shortDelay=e,this.longDelay=n,ga(n>e,"Short delay should be less than long delay!"),this.isMobile=a4()||l4()}get(){return M5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t,e){ga(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],L5=new sd(3e4,6e4);function Ci(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ti(t,e,n,s,a={}){return rA(t,a,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=nd({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return r4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ho(t.emulatorConfig.host)&&(d.credentials="include"),iA.fetch()(await oA(t,t.config.apiHost,n,l),d)})}async function rA(t,e,n){t._canInitEmulator=!1;const s={...D5,...e};try{const a=new U5(t),i=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $d(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $d(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $d(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $d(t,"user-disabled",o);const m=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bx(t,m,d);Zn(t,m)}}catch(a){if(a instanceof Ea)throw a;Zn(t,"network-request-failed",{message:String(a)})}}async function ad(t,e,n,s,a={}){const i=await Ti(t,e,n,s,a);return"mfaPendingCredential"in i&&Zn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function oA(t,e,n,s){const a=`${e}${n}?${s}`,i=t,o=i.config.emulator?Ex(t.config,a):`${t.config.apiScheme}://${a}`;return k5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function V5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cs(this.auth,"network-request-failed")),L5.get())})}}function $d(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=cs(t,e,s);return a.customData._tokenResponse=n,a}function f_(t){return t!==void 0&&t.enterprise!==void 0}class O5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return V5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z5(t,e){return Ti(t,"GET","/v2/recaptchaConfig",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(t,e){return Ti(t,"POST","/v1/accounts:delete",e)}async function gm(t,e){return Ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G5(t,e=!1){const n=yt(t),s=await n.getIdToken(e),a=Nx(s);oe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:s,authTime:lc(op(a.auth_time)),issuedAtTime:lc(op(a.iat)),expirationTime:lc(op(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function op(t){return Number(t)*1e3}function Nx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const a=Hw(n);return a?JSON.parse(a):(Tu("Failed to decode base64 JWT payload"),null)}catch(a){return Tu("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function p_(t){const e=Nx(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ea&&B5(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function B5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var p;const e=t.auth,n=await t.getIdToken(),s=await Rc(t,gm(e,{idToken:n}));oe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const i=(p=a.providerUserInfo)!=null&&p.length?lA(a.providerUserInfo):[],o=$5(t.providerData,i),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Cg(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function H5(t){const e=yt(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $5(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function lA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e){const n=await rA(t,{},async()=>{const s=nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=await oA(t,a,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Ho(t.emulatorConfig.host)&&(c.credentials="include"),iA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J5(t,e){return Ti(t,"POST","/v2/accounts:revokeToken",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=p_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:i}=await Y5(e,n);this.updateTokensAndExpiration(s,a,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:i}=n,o=new no;return s&&(oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),a&&(oe(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new q5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Cg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Rc(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G5(this,e)}reload(){return H5(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await Rc(this,F5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:x,providerData:y,stsTokenManager:T}=n;oe(p&&T,e,"internal-error");const I=no.fromJSON(this.name,T);oe(typeof p=="string",e,"internal-error"),Ma(s,e.name),Ma(a,e.name),oe(typeof g=="boolean",e,"internal-error"),oe(typeof x=="boolean",e,"internal-error"),Ma(i,e.name),Ma(o,e.name),Ma(l,e.name),Ma(c,e.name),Ma(d,e.name),Ma(m,e.name);const b=new ls({uid:p,auth:e,email:a,emailVerified:g,displayName:s,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:I,createdAt:d,lastLoginAt:m});return y&&Array.isArray(y)&&(b.providerData=y.map(N=>({...N}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,s=!1){const a=new no;a.updateFromServerResponse(n);const i=new ls({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await xm(i),i}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];oe(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?lA(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),l=new no;l.updateFromIdToken(s);const c=new ls({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new Cg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;function ea(t){ga(t instanceof Function,"Expected a class definition");let e=g_.get(t);return e?(ga(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cA.type="NONE";const x_=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t,e,n){return`firebase:${t}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:i}=this.auth;this.fullUserKey=Su(this.userKey,a.apiKey,i),this.fullPersistenceKey=Su("persistence",a.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gm(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(ea(x_),e,s);const a=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=a[0]||ea(x_);const o=Su(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const g=await gm(e,{idToken:m}).catch(()=>{});if(!g)break;p=await ls._fromGetAccountInfoResponse(e,g,m)}else p=ls._fromJSON(e,m);d!==i&&(l=p),i=d;break}}catch{}const c=a.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new so(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new so(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pA(e))return"Blackberry";if(gA(e))return"Webos";if(uA(e))return"Safari";if((e.includes("chrome/")||mA(e))&&!e.includes("edge/"))return"Chrome";if(fA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dA(t=nn()){return/firefox\//i.test(t)}function uA(t=nn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mA(t=nn()){return/crios\//i.test(t)}function hA(t=nn()){return/iemobile/i.test(t)}function fA(t=nn()){return/android/i.test(t)}function pA(t=nn()){return/blackberry/i.test(t)}function gA(t=nn()){return/webos/i.test(t)}function Cx(t=nn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function K5(t=nn()){var e;return Cx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Q5(){return c4()&&document.documentMode===10}function xA(t=nn()){return Cx(t)||fA(t)||gA(t)||pA(t)||/windows phone/i.test(t)||hA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e=[]){let n;switch(t){case"Browser":n=v_(nn());break;case"Worker":n=`${v_(nn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$o}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e={}){return Ti(t,"GET","/v2/passwordPolicy",Ci(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=6;class e3{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Z5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y_(this),this.idTokenSubscription=new y_(this),this.beforeStateQueue=new X5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ea(n)),this._initializationPromise=this.queue(async()=>{var s,a,i;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gm(this,{idToken:e}),s=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(ia(this));const n=e?yt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),n=new e3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new td("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await J5(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ea(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[ea(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,a);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&I5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Si(t){return yt(t)}class y_{constructor(e){this.auth=e,this.observer=null,this.addObserver=x4(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n3(t){uh=t}function yA(t){return uh.loadJS(t)}function s3(){return uh.recaptchaEnterpriseScript}function a3(){return uh.gapiScript}function i3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class r3{constructor(){this.enterprise=new o3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class o3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const l3="recaptcha-enterprise",bA="NO_RECAPTCHA";class c3{constructor(e){this.type=l3,this.auth=Si(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{z5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new O5(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function a(i,o,l){const c=window.grecaptcha;f_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(bA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r3().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&f_(window.grecaptcha))a(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=s3();c.length!==0&&(c+=l),yA(c).then(()=>{a(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function b_(t,e,n,s=!1,a=!1){const i=new c3(t);let o;if(a)o=bA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Tg(t,e,n,s,a){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await b_(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await b_(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t,e){const n=yx(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),i=n.getOptions();if(fa(i,e??{}))return a;Zn(a,"already-initialized")}return n.initialize({options:e})}function u3(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ea);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function m3(t,e,n){const s=Si(t);oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,i=_A(e),{host:o,port:l}=h3(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},m=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),oe(fa(d,s.config.emulator)&&fa(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,Ho(o)?(Kw(`${i}//${o}${c}`),Qw("Auth",!0)):f3()}function _A(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h3(t){const e=_A(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const i=a[1];return{host:i,port:__(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:__(o)}}}function __(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zs("not implemented")}_getIdTokenResponse(e){return Zs("not implemented")}_linkToIdToken(e,n){return Zs("not implemented")}_getReauthenticationResolver(e){return Zs("not implemented")}}async function p3(t,e){return Ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){return ad(t,"POST","/v1/accounts:signInWithPassword",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(t,e){return ad(t,"POST","/v1/accounts:signInWithEmailLink",Ci(t,e))}async function v3(t,e){return ad(t,"POST","/v1/accounts:signInWithEmailLink",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Tx{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new jc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new jc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tg(e,n,"signInWithPassword",g3);case"emailLink":return x3(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tg(e,s,"signUpPassword",p3);case"emailLink":return v3(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e){return ad(t,"POST","/v1/accounts:signInWithIdp",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="http://localhost";class ar extends Tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...i}=n;if(!s||!a)return null;const o=new ar(s,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ao(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ao(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ao(e,n)}buildRequest(){const e={requestUri:y3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _3(t){const e=zl(Fl(t)).link,n=e?zl(Fl(e)).deep_link_id:null,s=zl(Fl(t)).deep_link_id;return(s?zl(Fl(s)).link:null)||s||n||e||t}class Sx{constructor(e){const n=zl(Fl(e)),s=n.apiKey??null,a=n.oobCode??null,i=b3(n.mode??null);oe(s&&a&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_3(e);try{return new Sx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.providerId=Yo.PROVIDER_ID}static credential(e,n){return jc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Sx.parseLink(n);return oe(s,"argument-error"),jc._fromEmailAndCode(e,s.code,s.tenantId)}}Yo.PROVIDER_ID="password";Yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends wx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends id{constructor(){super("facebook.com")}static credential(e){return ar._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ar._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ks.credential(n,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends id{constructor(){super("github.com")}static credential(e){return ar._fromParams({providerId:Ga.PROVIDER_ID,signInMethod:Ga.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ga.credentialFromTaggedObject(e)}static credentialFromError(e){return Ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ga.credential(e.oauthAccessToken)}catch{return null}}}Ga.GITHUB_SIGN_IN_METHOD="github.com";Ga.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends id{constructor(){super("twitter.com")}static credential(e,n){return ar._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ba.credential(n,s)}catch{return null}}}Ba.TWITTER_SIGN_IN_METHOD="twitter.com";Ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(t,e){return ad(t,"POST","/v1/accounts:signUp",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const i=await ls._fromIdTokenResponse(e,s,a),o=E_(s);return new ir({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=E_(s);return new ir({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function E_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends Ea{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,vm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new vm(e,n,s,a)}}function EA(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vm._fromErrorAndOperation(t,i,e,s):i})}async function N3(t,e,n=!1){const s=await Rc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ir._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(t,e,n=!1){const{auth:s}=t;if(Sn(s.app))return Promise.reject(ia(s));const a="reauthenticate";try{const i=await Rc(t,EA(s,a,e,t),n);oe(i.idToken,s,"internal-error");const o=Nx(i.idToken);oe(o,s,"internal-error");const{sub:l}=o;return oe(t.uid===l,s,"user-mismatch"),ir._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e,n=!1){if(Sn(t.app))return Promise.reject(ia(t));const s="signIn",a=await EA(t,s,e),i=await ir._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(i.user),i}async function T3(t,e){return NA(Si(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t){const e=Si(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function S3(t,e,n){if(Sn(t.app))return Promise.reject(ia(t));const s=Si(t),o=await Tg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E3).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&CA(t),c}),l=await ir._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function w3(t,e,n){return Sn(t.app)?Promise.reject(ia(t)):T3(yt(t),Yo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&CA(t),s})}function A3(t,e,n,s){return yt(t).onIdTokenChanged(e,n,s)}function I3(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function R3(t,e,n,s){return yt(t).onAuthStateChanged(e,n,s)}function j3(t){return yt(t).signOut()}const ym="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ym,"1"),this.storage.removeItem(ym),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=1e3,P3=10;class SA extends TA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);Q5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,P3):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},M3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SA.type="LOCAL";const D3=SA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends TA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wA.type="SESSION";const AA=wA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new mh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:i}=n.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await k3(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Ax("",20);a.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:a,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function V3(t){js().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function U3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function z3(){return IA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firebaseLocalStorageDb",F3=1,bm="firebaseLocalStorage",jA="fbase_key";class rd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hh(t,e){return t.transaction([bm],e?"readwrite":"readonly").objectStore(bm)}function G3(){const t=indexedDB.deleteDatabase(RA);return new rd(t).toPromise()}function Sg(){const t=indexedDB.open(RA,F3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(bm,{keyPath:jA})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(bm)?e(s):(s.close(),await G3(),e(await Sg()))})})}async function N_(t,e,n){const s=hh(t,!0).put({[jA]:e,value:n});return new rd(s).toPromise()}async function B3(t,e){const n=hh(t,!1).get(e),s=await new rd(n).toPromise();return s===void 0?null:s.value}function C_(t,e){const n=hh(t,!0).delete(e);return new rd(n).toPromise()}const q3=800,H3=3;class MA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>H3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mh._getInstance(z3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await U3(),!this.activeServiceWorker)return;this.sender=new L3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sg();return await N_(e,ym,"1"),await C_(e,ym),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>N_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>B3(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=hh(a,!1).getAll();return new rd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MA.type="LOCAL";const $3=MA;new sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){return e?ea(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends Tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y3(t){return NA(t.auth,new Ix(t),t.bypassAuthState)}function J3(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),C3(n,new Ix(t),t.bypassAuthState)}async function K3(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),N3(n,new Ix(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,s,a,i=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y3;case"linkViaPopup":case"linkViaRedirect":return K3;case"reauthViaPopup":case"reauthViaRedirect":return J3;default:Zn(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new sd(2e3,1e4);async function X3(t,e,n){if(Sn(t.app))return Promise.reject(cs(t,"operation-not-supported-in-this-environment"));const s=Si(t);R5(t,e,wx);const a=PA(s,n);return new qi(s,"signInViaPopup",e,a).executeNotNull()}class qi extends DA{constructor(e,n,s,a,i){super(e,n,a,i),this.provider=s,this.authWindow=null,this.pollId=null,qi.currentPopupAction&&qi.currentPopupAction.cancel(),qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=Ax();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q3.get())};e()}}qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="pendingRedirect",wu=new Map;class Z3 extends DA{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const s=await e6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function e6(t,e){const n=s6(e),s=n6(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function t6(t,e){wu.set(t._key(),e)}function n6(t){return ea(t._redirectPersistence)}function s6(t){return Su(W3,t.config.apiKey,t.name)}async function a6(t,e,n=!1){if(Sn(t.app))return Promise.reject(ia(t));const s=Si(t),a=PA(s,e),o=await new Z3(s,a,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=10*60*1e3;class r6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!kA(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i6&&this.cachedEventUids.clear(),this.cachedEventUids.has(T_(e))}saveEventToCache(e){this.cachedEventUids.add(T_(e)),this.lastProcessedEventTime=Date.now()}}function T_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e={}){return Ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d6=/^https?/;async function u6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await l6(t);for(const n of e)try{if(m6(n))return}catch{}Zn(t,"unauthorized-domain")}function m6(t){const e=Ng(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!d6.test(n))return!1;if(c6.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new sd(3e4,6e4);function S_(){const t=js().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f6(t){return new Promise((e,n)=>{var a,i,o;function s(){S_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S_(),n(cs(t,"network-request-failed"))},timeout:h6.get()})}if((i=(a=js().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=js().gapi)!=null&&o.load)s();else{const l=i3("iframefcb");return js()[l]=()=>{gapi.load?s():n(cs(t,"network-request-failed"))},yA(`${a3()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Au=null,e})}let Au=null;function p6(t){return Au=Au||f6(t),Au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=new sd(5e3,15e3),x6="__/auth/iframe",v6="emulator/auth/iframe",y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _6(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ex(e,v6):`https://${t.config.authDomain}/${x6}`,s={apiKey:e.apiKey,appName:t.name,v:$o},a=b6.get(t.config.apiHost);a&&(s.eid=a);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${nd(s).slice(1)}`}async function E6(t){const e=await p6(t),n=js().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:_6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y6,dontclear:!0},s=>new Promise(async(a,i)=>{await s.restyle({setHideOnLeave:!1});const o=cs(t,"network-request-failed"),l=js().setTimeout(()=>{i(o)},g6.get());function c(){js().clearTimeout(l),a(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C6=500,T6=600,S6="_blank",w6="http://localhost";class w_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A6(t,e,n,s=C6,a=T6){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...N6,width:s.toString(),height:a.toString(),top:i,left:o},d=nn().toLowerCase();n&&(l=mA(d)?S6:n),dA(d)&&(e=e||w6,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[x,y])=>`${g}${x}=${y},`,"");if(K5(d)&&l!=="_self")return I6(e||"",l),new w_(null);const p=window.open(e||"",l,m);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new w_(p)}function I6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="__/auth/handler",j6="emulator/auth/handler",M6=encodeURIComponent("fac");async function A_(t,e,n,s,a,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:$o,eventId:a};if(e instanceof wx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",g4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof id){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),d=c?`#${M6}=${encodeURIComponent(c)}`:"";return`${P6(t)}?${nd(l).slice(1)}${d}`}function P6({config:t}){return t.emulator?Ex(t,j6):`https://${t.authDomain}/${R6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class D6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AA,this._completeRedirectFn=a6,this._overrideRedirectResult=t6}async _openPopup(e,n,s,a){var o;ga((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await A_(e,n,s,Ng(),a);return A6(e,i,Ax())}async _openRedirect(e,n,s,a){await this._originValidation(e);const i=await A_(e,n,s,Ng(),a);return V3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:i}=this.eventManagers[n];return a?Promise.resolve(a):(ga(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await E6(e),s=new r6(e);return n.register("authEvent",a=>(oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lp,{type:lp},a=>{var o;const i=(o=a==null?void 0:a[0])==null?void 0:o[lp];i!==void 0&&n(!!i),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xA()||uA()||Cx()}}const k6=D6;var I_="@firebase/auth",R_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U6(t){No(new sr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vA(t)},d=new t3(s,a,i,c);return u3(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),No(new sr("auth-internal",e=>{const n=Si(e.getProvider("auth").getImmediate());return(s=>new L6(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oi(I_,R_,V6(t)),oi(I_,R_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=5*60,z6=Jw("authIdTokenMaxAge")||O6;let j_=null;const F6=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>z6)return;const a=n==null?void 0:n.token;j_!==a&&(j_=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function G6(t=eA()){const e=yx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=d3(t,{popupRedirectResolver:k6,persistence:[$3,D3,AA]}),s=Jw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=F6(i.toString());I3(n,o,()=>o(n.currentUser)),A3(n,l=>o(l))}}const a=$w("auth");return a&&m3(n,`http://${a}`),n}function B6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}n3({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const i=cs("internal-error");i.customData=a,n(i)},s.type="text/javascript",s.charset="UTF-8",B6().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U6("Browser");var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,LA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,E){function S(){}S.prototype=E.prototype,R.F=E.prototype,R.prototype=new S,R.prototype.constructor=R,R.D=function(C,_,P){for(var j=Array(arguments.length-2),H=2;H<arguments.length;H++)j[H-2]=arguments[H];return E.prototype[_].apply(C,j)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,E,S){S||(S=0);const C=Array(16);if(typeof E=="string")for(var _=0;_<16;++_)C[_]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(_=0;_<16;++_)C[_]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=R.g[0],S=R.g[1],_=R.g[2];let P=R.g[3],j;j=E+(P^S&(_^P))+C[0]+3614090360&4294967295,E=S+(j<<7&4294967295|j>>>25),j=P+(_^E&(S^_))+C[1]+3905402710&4294967295,P=E+(j<<12&4294967295|j>>>20),j=_+(S^P&(E^S))+C[2]+606105819&4294967295,_=P+(j<<17&4294967295|j>>>15),j=S+(E^_&(P^E))+C[3]+3250441966&4294967295,S=_+(j<<22&4294967295|j>>>10),j=E+(P^S&(_^P))+C[4]+4118548399&4294967295,E=S+(j<<7&4294967295|j>>>25),j=P+(_^E&(S^_))+C[5]+1200080426&4294967295,P=E+(j<<12&4294967295|j>>>20),j=_+(S^P&(E^S))+C[6]+2821735955&4294967295,_=P+(j<<17&4294967295|j>>>15),j=S+(E^_&(P^E))+C[7]+4249261313&4294967295,S=_+(j<<22&4294967295|j>>>10),j=E+(P^S&(_^P))+C[8]+1770035416&4294967295,E=S+(j<<7&4294967295|j>>>25),j=P+(_^E&(S^_))+C[9]+2336552879&4294967295,P=E+(j<<12&4294967295|j>>>20),j=_+(S^P&(E^S))+C[10]+4294925233&4294967295,_=P+(j<<17&4294967295|j>>>15),j=S+(E^_&(P^E))+C[11]+2304563134&4294967295,S=_+(j<<22&4294967295|j>>>10),j=E+(P^S&(_^P))+C[12]+1804603682&4294967295,E=S+(j<<7&4294967295|j>>>25),j=P+(_^E&(S^_))+C[13]+4254626195&4294967295,P=E+(j<<12&4294967295|j>>>20),j=_+(S^P&(E^S))+C[14]+2792965006&4294967295,_=P+(j<<17&4294967295|j>>>15),j=S+(E^_&(P^E))+C[15]+1236535329&4294967295,S=_+(j<<22&4294967295|j>>>10),j=E+(_^P&(S^_))+C[1]+4129170786&4294967295,E=S+(j<<5&4294967295|j>>>27),j=P+(S^_&(E^S))+C[6]+3225465664&4294967295,P=E+(j<<9&4294967295|j>>>23),j=_+(E^S&(P^E))+C[11]+643717713&4294967295,_=P+(j<<14&4294967295|j>>>18),j=S+(P^E&(_^P))+C[0]+3921069994&4294967295,S=_+(j<<20&4294967295|j>>>12),j=E+(_^P&(S^_))+C[5]+3593408605&4294967295,E=S+(j<<5&4294967295|j>>>27),j=P+(S^_&(E^S))+C[10]+38016083&4294967295,P=E+(j<<9&4294967295|j>>>23),j=_+(E^S&(P^E))+C[15]+3634488961&4294967295,_=P+(j<<14&4294967295|j>>>18),j=S+(P^E&(_^P))+C[4]+3889429448&4294967295,S=_+(j<<20&4294967295|j>>>12),j=E+(_^P&(S^_))+C[9]+568446438&4294967295,E=S+(j<<5&4294967295|j>>>27),j=P+(S^_&(E^S))+C[14]+3275163606&4294967295,P=E+(j<<9&4294967295|j>>>23),j=_+(E^S&(P^E))+C[3]+4107603335&4294967295,_=P+(j<<14&4294967295|j>>>18),j=S+(P^E&(_^P))+C[8]+1163531501&4294967295,S=_+(j<<20&4294967295|j>>>12),j=E+(_^P&(S^_))+C[13]+2850285829&4294967295,E=S+(j<<5&4294967295|j>>>27),j=P+(S^_&(E^S))+C[2]+4243563512&4294967295,P=E+(j<<9&4294967295|j>>>23),j=_+(E^S&(P^E))+C[7]+1735328473&4294967295,_=P+(j<<14&4294967295|j>>>18),j=S+(P^E&(_^P))+C[12]+2368359562&4294967295,S=_+(j<<20&4294967295|j>>>12),j=E+(S^_^P)+C[5]+4294588738&4294967295,E=S+(j<<4&4294967295|j>>>28),j=P+(E^S^_)+C[8]+2272392833&4294967295,P=E+(j<<11&4294967295|j>>>21),j=_+(P^E^S)+C[11]+1839030562&4294967295,_=P+(j<<16&4294967295|j>>>16),j=S+(_^P^E)+C[14]+4259657740&4294967295,S=_+(j<<23&4294967295|j>>>9),j=E+(S^_^P)+C[1]+2763975236&4294967295,E=S+(j<<4&4294967295|j>>>28),j=P+(E^S^_)+C[4]+1272893353&4294967295,P=E+(j<<11&4294967295|j>>>21),j=_+(P^E^S)+C[7]+4139469664&4294967295,_=P+(j<<16&4294967295|j>>>16),j=S+(_^P^E)+C[10]+3200236656&4294967295,S=_+(j<<23&4294967295|j>>>9),j=E+(S^_^P)+C[13]+681279174&4294967295,E=S+(j<<4&4294967295|j>>>28),j=P+(E^S^_)+C[0]+3936430074&4294967295,P=E+(j<<11&4294967295|j>>>21),j=_+(P^E^S)+C[3]+3572445317&4294967295,_=P+(j<<16&4294967295|j>>>16),j=S+(_^P^E)+C[6]+76029189&4294967295,S=_+(j<<23&4294967295|j>>>9),j=E+(S^_^P)+C[9]+3654602809&4294967295,E=S+(j<<4&4294967295|j>>>28),j=P+(E^S^_)+C[12]+3873151461&4294967295,P=E+(j<<11&4294967295|j>>>21),j=_+(P^E^S)+C[15]+530742520&4294967295,_=P+(j<<16&4294967295|j>>>16),j=S+(_^P^E)+C[2]+3299628645&4294967295,S=_+(j<<23&4294967295|j>>>9),j=E+(_^(S|~P))+C[0]+4096336452&4294967295,E=S+(j<<6&4294967295|j>>>26),j=P+(S^(E|~_))+C[7]+1126891415&4294967295,P=E+(j<<10&4294967295|j>>>22),j=_+(E^(P|~S))+C[14]+2878612391&4294967295,_=P+(j<<15&4294967295|j>>>17),j=S+(P^(_|~E))+C[5]+4237533241&4294967295,S=_+(j<<21&4294967295|j>>>11),j=E+(_^(S|~P))+C[12]+1700485571&4294967295,E=S+(j<<6&4294967295|j>>>26),j=P+(S^(E|~_))+C[3]+2399980690&4294967295,P=E+(j<<10&4294967295|j>>>22),j=_+(E^(P|~S))+C[10]+4293915773&4294967295,_=P+(j<<15&4294967295|j>>>17),j=S+(P^(_|~E))+C[1]+2240044497&4294967295,S=_+(j<<21&4294967295|j>>>11),j=E+(_^(S|~P))+C[8]+1873313359&4294967295,E=S+(j<<6&4294967295|j>>>26),j=P+(S^(E|~_))+C[15]+4264355552&4294967295,P=E+(j<<10&4294967295|j>>>22),j=_+(E^(P|~S))+C[6]+2734768916&4294967295,_=P+(j<<15&4294967295|j>>>17),j=S+(P^(_|~E))+C[13]+1309151649&4294967295,S=_+(j<<21&4294967295|j>>>11),j=E+(_^(S|~P))+C[4]+4149444226&4294967295,E=S+(j<<6&4294967295|j>>>26),j=P+(S^(E|~_))+C[11]+3174756917&4294967295,P=E+(j<<10&4294967295|j>>>22),j=_+(E^(P|~S))+C[2]+718787259&4294967295,_=P+(j<<15&4294967295|j>>>17),j=S+(P^(_|~E))+C[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(_+(j<<21&4294967295|j>>>11))&4294967295,R.g[2]=R.g[2]+_&4294967295,R.g[3]=R.g[3]+P&4294967295}s.prototype.v=function(R,E){E===void 0&&(E=R.length);const S=E-this.blockSize,C=this.C;let _=this.h,P=0;for(;P<E;){if(_==0)for(;P<=S;)a(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<E;)if(C[_++]=R.charCodeAt(P++),_==this.blockSize){a(this,C),_=0;break}}else for(;P<E;)if(C[_++]=R[P++],_==this.blockSize){a(this,C),_=0;break}}this.h=_,this.o+=E},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;E=this.o*8;for(var S=R.length-8;S<R.length;++S)R[S]=E&255,E/=256;for(this.v(R),R=Array(16),E=0,S=0;S<4;++S)for(let C=0;C<32;C+=8)R[E++]=this.g[S]>>>C&255;return R};function i(R,E){var S=l;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=E(R)}function o(R,E){this.h=E;const S=[];let C=!0;for(let _=R.length-1;_>=0;_--){const P=R[_]|0;C&&P==E||(S[_]=P,C=!1)}this.g=S}var l={};function c(R){return-128<=R&&R<128?i(R,function(E){return new o([E|0],E<0?-1:0)}):new o([R|0],R<0?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return I(d(-R));const E=[];let S=1;for(let C=0;R>=S;C++)E[C]=R/S|0,S*=4294967296;return new o(E,0)}function m(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return I(m(R.substring(1),E));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(E,8));let C=p;for(let P=0;P<R.length;P+=8){var _=Math.min(8,R.length-P);const j=parseInt(R.substring(P,P+_),E);_<8?(_=d(Math.pow(E,_)),C=C.j(_).add(d(j))):(C=C.j(S),C=C.add(d(j)))}return C}var p=c(0),g=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-I(this).m();let R=0,E=1;for(let S=0;S<this.g.length;S++){const C=this.i(S);R+=(C>=0?C:4294967296+C)*E,E*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(y(this))return"0";if(T(this))return"-"+I(this).toString(R);const E=d(Math.pow(R,6));var S=this;let C="";for(;;){const _=D(S,E).g;S=b(S,_.j(E));let P=((S.g.length>0?S.g[0]:S.h)>>>0).toString(R);if(S=_,y(S))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function y(R){if(R.h!=0)return!1;for(let E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function T(R){return R.h==-1}t.l=function(R){return R=b(this,R),T(R)?-1:y(R)?0:1};function I(R){const E=R.g.length,S=[];for(let C=0;C<E;C++)S[C]=~R.g[C];return new o(S,~R.h).add(g)}t.abs=function(){return T(this)?I(this):this},t.add=function(R){const E=Math.max(this.g.length,R.g.length),S=[];let C=0;for(let _=0;_<=E;_++){let P=C+(this.i(_)&65535)+(R.i(_)&65535),j=(P>>>16)+(this.i(_)>>>16)+(R.i(_)>>>16);C=j>>>16,P&=65535,j&=65535,S[_]=j<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function b(R,E){return R.add(I(E))}t.j=function(R){if(y(this)||y(R))return p;if(T(this))return T(R)?I(this).j(I(R)):I(I(this).j(R));if(T(R))return I(this.j(I(R)));if(this.l(x)<0&&R.l(x)<0)return d(this.m()*R.m());const E=this.g.length+R.g.length,S=[];for(var C=0;C<2*E;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(let _=0;_<R.g.length;_++){const P=this.i(C)>>>16,j=this.i(C)&65535,H=R.i(_)>>>16,O=R.i(_)&65535;S[2*C+2*_]+=j*O,N(S,2*C+2*_),S[2*C+2*_+1]+=P*O,N(S,2*C+2*_+1),S[2*C+2*_+1]+=j*H,N(S,2*C+2*_+1),S[2*C+2*_+2]+=P*H,N(S,2*C+2*_+2)}for(R=0;R<E;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=E;R<2*E;R++)S[R]=0;return new o(S,0)};function N(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function w(R,E){this.g=R,this.h=E}function D(R,E){if(y(E))throw Error("division by zero");if(y(R))return new w(p,p);if(T(R))return E=D(I(R),E),new w(I(E.g),I(E.h));if(T(E))return E=D(R,I(E)),new w(I(E.g),E.h);if(R.g.length>30){if(T(R)||T(E))throw Error("slowDivide_ only works with positive integers.");for(var S=g,C=E;C.l(R)<=0;)S=V(S),C=V(C);var _=k(S,1),P=k(C,1);for(C=k(C,2),S=k(S,2);!y(C);){var j=P.add(C);j.l(R)<=0&&(_=_.add(S),P=j),C=k(C,1),S=k(S,1)}return E=b(R,_.j(E)),new w(_,E)}for(_=p;R.l(E)>=0;){for(S=Math.max(1,Math.floor(R.m()/E.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=d(S),j=P.j(E);T(j)||j.l(R)>0;)S-=C,P=d(S),j=P.j(E);y(P)&&(P=g),_=_.add(P),R=b(R,j)}return new w(_,R)}t.B=function(R){return D(this,R).h},t.and=function(R){const E=Math.max(this.g.length,R.g.length),S=[];for(let C=0;C<E;C++)S[C]=this.i(C)&R.i(C);return new o(S,this.h&R.h)},t.or=function(R){const E=Math.max(this.g.length,R.g.length),S=[];for(let C=0;C<E;C++)S[C]=this.i(C)|R.i(C);return new o(S,this.h|R.h)},t.xor=function(R){const E=Math.max(this.g.length,R.g.length),S=[];for(let C=0;C<E;C++)S[C]=this.i(C)^R.i(C);return new o(S,this.h^R.h)};function V(R){const E=R.g.length+1,S=[];for(let C=0;C<E;C++)S[C]=R.i(C)<<1|R.i(C-1)>>>31;return new o(S,R.h)}function k(R,E){const S=E>>5;E%=32;const C=R.g.length-S,_=[];for(let P=0;P<C;P++)_[P]=E>0?R.i(P+S)>>>E|R.i(P+S+1)<<32-E:R.i(P+S);return new o(_,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,LA=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,li=o}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VA,Gl,UA,Iu,wg,OA,zA,FA;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var v=0;v<f.length;++v){var A=f[v];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=n(this);function a(f,v){if(v)e:{var A=s;f=f.split(".");for(var L=0;L<f.length-1;L++){var U=f[L];if(!(U in A))break e;A=A[U]}f=f[f.length-1],L=A[f],v=v(L),v!=L&&v!=null&&e(A,f,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(v){var A=[],L;for(L in v)Object.prototype.hasOwnProperty.call(v,L)&&A.push([L,v[L]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function c(f,v,A){return f.call.apply(f.bind,arguments)}function d(f,v,A){return d=c,d.apply(null,arguments)}function m(f,v){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function p(f,v){function A(){}A.prototype=v.prototype,f.Z=v.prototype,f.prototype=new A,f.prototype.constructor=f,f.Ob=function(L,U,z){for(var K=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)K[ve-2]=arguments[ve];return v.prototype[U].apply(L,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function x(f){const v=f.length;if(v>0){const A=Array(v);for(let L=0;L<v;L++)A[L]=f[L];return A}return[]}function y(f,v){for(let L=1;L<arguments.length;L++){const U=arguments[L];var A=typeof U;if(A=A!="object"?A:U?Array.isArray(U)?"array":A:"null",A=="array"||A=="object"&&typeof U.length=="number"){A=f.length||0;const z=U.length||0;f.length=A+z;for(let K=0;K<z;K++)f[A+K]=U[K]}else f.push(U)}}class T{constructor(v,A){this.i=v,this.j=A,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function I(f){o.setTimeout(()=>{throw f},0)}function b(){var f=R;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class N{constructor(){this.h=this.g=null}add(v,A){const L=w.get();L.set(v,A),this.h?this.h.next=L:this.g=L,this.h=L}}var w=new T(()=>new D,f=>f.reset());class D{constructor(){this.next=this.g=this.h=null}set(v,A){this.h=v,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let V,k=!1,R=new N,E=()=>{const f=Promise.resolve(void 0);V=()=>{f.then(S)}};function S(){for(var f;f=b();){try{f.h.call(f.g)}catch(A){I(A)}var v=w;v.j(f),v.h<100&&(v.h++,f.next=v.g,v.g=f)}k=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};o.addEventListener("test",A,v),o.removeEventListener("test",A,v)}catch{}return f}();function j(f){return/^[\s\xa0]*$/.test(f)}function H(f,v){_.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,v)}p(H,_),H.prototype.init=function(f,v){const A=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget,v||(A=="mouseover"?v=f.fromElement:A=="mouseout"&&(v=f.toElement)),this.relatedTarget=v,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var O="closure_listenable_"+(Math.random()*1e6|0),G=0;function te(f,v,A,L,U){this.listener=f,this.proxy=null,this.src=v,this.type=A,this.capture=!!L,this.ha=U,this.key=++G,this.da=this.fa=!1}function Y(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ne(f,v,A){for(const L in f)v.call(A,f[L],L,f)}function de(f,v){for(const A in f)v.call(void 0,f[A],A,f)}function ye(f){const v={};for(const A in f)v[A]=f[A];return v}const Qe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(f,v){let A,L;for(let U=1;U<arguments.length;U++){L=arguments[U];for(A in L)f[A]=L[A];for(let z=0;z<Qe.length;z++)A=Qe[z],Object.prototype.hasOwnProperty.call(L,A)&&(f[A]=L[A])}}function ie(f){this.src=f,this.g={},this.h=0}ie.prototype.add=function(f,v,A,L,U){const z=f.toString();f=this.g[z],f||(f=this.g[z]=[],this.h++);const K=Pt(f,v,L,U);return K>-1?(v=f[K],A||(v.fa=!1)):(v=new te(v,this.src,z,!!L,U),v.fa=A,f.push(v)),v};function Ae(f,v){const A=v.type;if(A in f.g){var L=f.g[A],U=Array.prototype.indexOf.call(L,v,void 0),z;(z=U>=0)&&Array.prototype.splice.call(L,U,1),z&&(Y(v),f.g[A].length==0&&(delete f.g[A],f.h--))}}function Pt(f,v,A,L){for(let U=0;U<f.length;++U){const z=f[U];if(!z.da&&z.listener==v&&z.capture==!!A&&z.ha==L)return U}return-1}var ut="closure_lm_"+(Math.random()*1e6|0),Gt={};function Kt(f,v,A,L,U){if(Array.isArray(v)){for(let z=0;z<v.length;z++)Kt(f,v[z],A,L,U);return null}return A=Qt(A),f&&f[O]?f.J(v,A,l(L)?!!L.capture:!1,U):At(f,v,A,!1,L,U)}function At(f,v,A,L,U,z){if(!v)throw Error("Invalid event type");const K=l(U)?!!U.capture:!!U;let ve=He(f);if(ve||(f[ut]=ve=new ie(f)),A=ve.add(v,A,L,K,z),A.proxy)return A;if(L=sn(),A.proxy=L,L.src=f,L.listener=A,f.addEventListener)P||(U=K),U===void 0&&(U=!1),f.addEventListener(v.toString(),L,U);else if(f.attachEvent)f.attachEvent(Z(v.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function sn(){function f(A){return v.call(f.src,f.listener,A)}const v=pe;return f}function be(f,v,A,L,U){if(Array.isArray(v))for(var z=0;z<v.length;z++)be(f,v[z],A,L,U);else L=l(L)?!!L.capture:!!L,A=Qt(A),f&&f[O]?(f=f.i,z=String(v).toString(),z in f.g&&(v=f.g[z],A=Pt(v,A,L,U),A>-1&&(Y(v[A]),Array.prototype.splice.call(v,A,1),v.length==0&&(delete f.g[z],f.h--)))):f&&(f=He(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Pt(v,A,L,U)),(A=f>-1?v[f]:null)&&ae(A))}function ae(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[O])Ae(v.i,f);else{var A=f.type,L=f.proxy;v.removeEventListener?v.removeEventListener(A,L,f.capture):v.detachEvent?v.detachEvent(Z(A),L):v.addListener&&v.removeListener&&v.removeListener(L),(A=He(v))?(Ae(A,f),A.h==0&&(A.src=null,v[ut]=null)):Y(f)}}}function Z(f){return f in Gt?Gt[f]:Gt[f]="on"+f}function pe(f,v){if(f.da)f=!0;else{v=new H(v,this);const A=f.listener,L=f.ha||f.src;f.fa&&ae(f),f=A.call(L,v)}return f}function He(f){return f=f[ut],f instanceof ie?f:null}var ot="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qt(f){return typeof f=="function"?f:(f[ot]||(f[ot]=function(v){return f.handleEvent(v)}),f[ot])}function je(){C.call(this),this.i=new ie(this),this.M=this,this.G=null}p(je,C),je.prototype[O]=!0,je.prototype.removeEventListener=function(f,v,A,L){be(this,f,v,A,L)};function Oe(f,v){var A,L=f.G;if(L)for(A=[];L;L=L.G)A.push(L);if(f=f.M,L=v.type||v,typeof v=="string")v=new _(v,f);else if(v instanceof _)v.target=v.target||f;else{var U=v;v=new _(L,f),Ge(v,U)}U=!0;let z,K;if(A)for(K=A.length-1;K>=0;K--)z=v.g=A[K],U=st(z,L,!0,v)&&U;if(z=v.g=f,U=st(z,L,!0,v)&&U,U=st(z,L,!1,v)&&U,A)for(K=0;K<A.length;K++)z=v.g=A[K],U=st(z,L,!1,v)&&U}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var f=this.i;for(const v in f.g){const A=f.g[v];for(let L=0;L<A.length;L++)Y(A[L]);delete f.g[v],f.h--}}this.G=null},je.prototype.J=function(f,v,A,L){return this.i.add(String(f),v,!1,A,L)},je.prototype.K=function(f,v,A,L){return this.i.add(String(f),v,!0,A,L)};function st(f,v,A,L){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();let U=!0;for(let z=0;z<v.length;++z){const K=v[z];if(K&&!K.da&&K.capture==A){const ve=K.listener,It=K.ha||K.src;K.fa&&Ae(f.i,K),U=ve.call(It,L)!==!1&&U}}return U&&!L.defaultPrevented}function ll(f,v){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:o.setTimeout(f,v||0)}function wv(f){f.g=ll(()=>{f.g=null,f.i&&(f.i=!1,wv(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class z1 extends C{constructor(v,A){super(),this.m=v,this.l=A,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:wv(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cl(f){C.call(this),this.h=f,this.g={}}p(cl,C);var Av=[];function Iv(f){ne(f.g,function(v,A){this.g.hasOwnProperty(A)&&ae(v)},f),f.g={}}cl.prototype.N=function(){cl.Z.N.call(this),Iv(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wh=o.JSON.stringify,F1=o.JSON.parse,G1=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Rv(){}function jv(){}var dl={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zh(){_.call(this,"d")}p(Zh,_);function ef(){_.call(this,"c")}p(ef,_);var ji={},Mv=null;function xd(){return Mv=Mv||new je}ji.Ia="serverreachability";function Pv(f){_.call(this,ji.Ia,f)}p(Pv,_);function ul(f){const v=xd();Oe(v,new Pv(v))}ji.STAT_EVENT="statevent";function Dv(f,v){_.call(this,ji.STAT_EVENT,f),this.stat=v}p(Dv,_);function an(f){const v=xd();Oe(v,new Dv(v,f))}ji.Ja="timingevent";function kv(f,v){_.call(this,ji.Ja,f),this.size=v}p(kv,_);function ml(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},v)}function hl(){this.g=!0}hl.prototype.ua=function(){this.g=!1};function B1(f,v,A,L,U,z){f.info(function(){if(f.g)if(z){var K="",ve=z.split("&");for(let Be=0;Be<ve.length;Be++){var It=ve[Be].split("=");if(It.length>1){const Dt=It[0];It=It[1];const Ns=Dt.split("_");K=Ns.length>=2&&Ns[1]=="type"?K+(Dt+"="+It+"&"):K+(Dt+"=redacted&")}}}else K=null;else K=z;return"XMLHTTP REQ ("+L+") [attempt "+U+"]: "+v+`
`+A+`
`+K})}function q1(f,v,A,L,U,z,K){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+U+"]: "+v+`
`+A+`
`+z+" "+K})}function yr(f,v,A,L){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+$1(f,A)+(L?" "+L:"")})}function H1(f,v){f.info(function(){return"TIMEOUT: "+v})}hl.prototype.info=function(){};function $1(f,v){if(!f.g)return v;if(!v)return null;try{const z=JSON.parse(v);if(z){for(f=0;f<z.length;f++)if(Array.isArray(z[f])){var A=z[f];if(!(A.length<2)){var L=A[1];if(Array.isArray(L)&&!(L.length<1)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(let K=1;K<L.length;K++)L[K]=""}}}}return Wh(z)}catch{return v}}var vd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vv;function tf(){}p(tf,Rv),tf.prototype.g=function(){return new XMLHttpRequest},Vv=new tf;function fl(f){return encodeURIComponent(String(f))}function Y1(f){var v=1;f=f.split(":");const A=[];for(;v>0&&f.length;)A.push(f.shift()),v--;return f.length&&A.push(f.join(":")),A}function Ta(f,v,A,L){this.j=f,this.i=v,this.l=A,this.S=L||1,this.V=new cl(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Uv}function Uv(){this.i=null,this.g="",this.h=!1}var Ov={},nf={};function sf(f,v,A){f.M=1,f.A=bd(Es(v)),f.u=A,f.R=!0,zv(f,null)}function zv(f,v){f.F=Date.now(),yd(f),f.B=Es(f.A);var A=f.B,L=f.S;Array.isArray(L)||(L=[String(L)]),Zv(A.i,"t",L),f.C=0,A=f.j.L,f.h=new Uv,f.g=xy(f.j,A?v:null,!f.u),f.P>0&&(f.O=new z1(d(f.Y,f,f.g),f.P)),v=f.V,A=f.g,L=f.ba;var U="readystatechange";Array.isArray(U)||(U&&(Av[0]=U.toString()),U=Av);for(let z=0;z<U.length;z++){const K=Kt(A,U[z],L||v.handleEvent,!1,v.h||v);if(!K)break;v.g[K.key]=K}v=f.J?ye(f.J):{},f.u?(f.v||(f.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,v)):(f.v="GET",f.g.ea(f.B,f.v,null,v)),ul(),B1(f.i,f.v,f.B,f.l,f.S,f.u)}Ta.prototype.ba=function(f){f=f.target;const v=this.O;v&&Aa(f)==3?v.j():this.Y(f)},Ta.prototype.Y=function(f){try{if(f==this.g)e:{const ve=Aa(this.g),It=this.g.ya(),Be=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||ry(this.g)))){this.K||ve!=4||It==7||(It==8||Be<=0?ul(3):ul(2)),af(this);var v=this.g.ca();this.X=v;var A=J1(this);if(this.o=v==200,q1(this.i,this.v,this.B,this.l,this.S,ve,v),this.o){if(this.U&&!this.L){t:{if(this.g){var L,U=this.g;if((L=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(L)){var z=L;break t}}z=null}if(f=z)yr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rf(this,f);else{this.o=!1,this.m=3,an(12),Mi(this),pl(this);break e}}if(this.R){f=!0;let Dt;for(;!this.K&&this.C<A.length;)if(Dt=K1(this,A),Dt==nf){ve==4&&(this.m=4,an(14),f=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Ov){this.m=4,an(15),yr(this.i,this.l,A,"[Invalid Chunk]"),f=!1;break}else yr(this.i,this.l,Dt,null),rf(this,Dt);if(Fv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||A.length!=0||this.h.h||(this.m=1,an(16),f=!1),this.o=this.o&&f,!f)yr(this.i,this.l,A,"[Invalid Chunked Response]"),Mi(this),pl(this);else if(A.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),ff(K),K.P=!0,an(11))}}else yr(this.i,this.l,A,null),rf(this,A);ve==4&&Mi(this),this.o&&!this.K&&(ve==4?hy(this.j,this):(this.o=!1,yd(this)))}else cR(this.g),v==400&&A.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),Mi(this),pl(this)}}}catch{}finally{}};function J1(f){if(!Fv(f))return f.g.la();const v=ry(f.g);if(v==="")return"";let A="";const L=v.length,U=Aa(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Mi(f),pl(f),"";f.h.i=new o.TextDecoder}for(let z=0;z<L;z++)f.h.h=!0,A+=f.h.i.decode(v[z],{stream:!(U&&z==L-1)});return v.length=0,f.h.g+=A,f.C=0,f.h.g}function Fv(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function K1(f,v){var A=f.C,L=v.indexOf(`
`,A);return L==-1?nf:(A=Number(v.substring(A,L)),isNaN(A)?Ov:(L+=1,L+A>v.length?nf:(v=v.slice(L,L+A),f.C=L+A,v)))}Ta.prototype.cancel=function(){this.K=!0,Mi(this)};function yd(f){f.T=Date.now()+f.H,Gv(f,f.H)}function Gv(f,v){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ml(d(f.aa,f),v)}function af(f){f.D&&(o.clearTimeout(f.D),f.D=null)}Ta.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(H1(this.i,this.B),this.M!=2&&(ul(),an(17)),Mi(this),this.m=2,pl(this)):Gv(this,this.T-f)};function pl(f){f.j.I==0||f.K||hy(f.j,f)}function Mi(f){af(f);var v=f.O;v&&typeof v.dispose=="function"&&v.dispose(),f.O=null,Iv(f.V),f.g&&(v=f.g,f.g=null,v.abort(),v.dispose())}function rf(f,v){try{var A=f.j;if(A.I!=0&&(A.g==f||of(A.h,f))){if(!f.L&&of(A.h,f)&&A.I==3){try{var L=A.Ba.g.parse(v)}catch{L=null}if(Array.isArray(L)&&L.length==3){var U=L;if(U[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<f.F)Td(A),Nd(A);else break e;hf(A),an(18)}}else A.xa=U[1],0<A.xa-A.K&&U[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=ml(d(A.Va,A),6e3));Hv(A.h)<=1&&A.ta&&(A.ta=void 0)}else Di(A,11)}else if((f.L||A.g==f)&&Td(A),!j(v))for(U=A.Ba.g.parse(v),v=0;v<U.length;v++){let Be=U[v];const Dt=Be[0];if(!(Dt<=A.K))if(A.K=Dt,Be=Be[1],A.I==2)if(Be[0]=="c"){A.M=Be[1],A.ba=Be[2];const Ns=Be[3];Ns!=null&&(A.ka=Ns,A.j.info("VER="+A.ka));const ki=Be[4];ki!=null&&(A.za=ki,A.j.info("SVER="+A.za));const Ia=Be[5];Ia!=null&&typeof Ia=="number"&&Ia>0&&(L=1.5*Ia,A.O=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;const Ra=f.g;if(Ra){const wd=Ra.g?Ra.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wd){var z=L.h;z.g||wd.indexOf("spdy")==-1&&wd.indexOf("quic")==-1&&wd.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(lf(z,z.h),z.h=null))}if(L.G){const pf=Ra.g?Ra.g.getResponseHeader("X-HTTP-Session-Id"):null;pf&&(L.wa=pf,Xe(L.J,L.G,pf))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-f.F,A.j.info("Handshake RTT: "+A.T+"ms")),L=A;var K=f;if(L.na=gy(L,L.L?L.ba:null,L.W),K.L){$v(L.h,K);var ve=K,It=L.O;It&&(ve.H=It),ve.D&&(af(ve),yd(ve)),L.g=K}else uy(L);A.i.length>0&&Cd(A)}else Be[0]!="stop"&&Be[0]!="close"||Di(A,7);else A.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Di(A,7):mf(A):Be[0]!="noop"&&A.l&&A.l.qa(Be),A.A=0)}}ul(4)}catch{}}var Q1=class{constructor(f,v){this.g=f,this.map=v}};function Bv(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qv(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Hv(f){return f.h?1:f.g?f.g.size:0}function of(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function lf(f,v){f.g?f.g.add(v):f.h=v}function $v(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}Bv.prototype.cancel=function(){if(this.i=Yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Yv(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const A of f.g.values())v=v.concat(A.G);return v}return x(f.i)}var Jv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X1(f,v){if(f){f=f.split("&");for(let A=0;A<f.length;A++){const L=f[A].indexOf("=");let U,z=null;L>=0?(U=f[A].substring(0,L),z=f[A].substring(L+1)):U=f[A],v(U,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Sa(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;f instanceof Sa?(this.l=f.l,gl(this,f.j),this.o=f.o,this.g=f.g,xl(this,f.u),this.h=f.h,cf(this,ey(f.i)),this.m=f.m):f&&(v=String(f).match(Jv))?(this.l=!1,gl(this,v[1]||"",!0),this.o=vl(v[2]||""),this.g=vl(v[3]||"",!0),xl(this,v[4]),this.h=vl(v[5]||"",!0),cf(this,v[6]||"",!0),this.m=vl(v[7]||"")):(this.l=!1,this.i=new bl(null,this.l))}Sa.prototype.toString=function(){const f=[];var v=this.j;v&&f.push(yl(v,Kv,!0),":");var A=this.g;return(A||v=="file")&&(f.push("//"),(v=this.o)&&f.push(yl(v,Kv,!0),"@"),f.push(fl(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&f.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(yl(A,A.charAt(0)=="/"?eR:Z1,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",yl(A,nR)),f.join("")},Sa.prototype.resolve=function(f){const v=Es(this);let A=!!f.j;A?gl(v,f.j):A=!!f.o,A?v.o=f.o:A=!!f.g,A?v.g=f.g:A=f.u!=null;var L=f.h;if(A)xl(v,f.u);else if(A=!!f.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var U=v.h.lastIndexOf("/");U!=-1&&(L=v.h.slice(0,U+1)+L)}if(U=L,U==".."||U==".")L="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){L=U.lastIndexOf("/",0)==0,U=U.split("/");const z=[];for(let K=0;K<U.length;){const ve=U[K++];ve=="."?L&&K==U.length&&z.push(""):ve==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),L&&K==U.length&&z.push("")):(z.push(ve),L=!0)}L=z.join("/")}else L=U}return A?v.h=L:A=f.i.toString()!=="",A?cf(v,ey(f.i)):A=!!f.m,A&&(v.m=f.m),v};function Es(f){return new Sa(f)}function gl(f,v,A){f.j=A?vl(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function xl(f,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);f.u=v}else f.u=null}function cf(f,v,A){v instanceof bl?(f.i=v,sR(f.i,f.l)):(A||(v=yl(v,tR)),f.i=new bl(v,f.l))}function Xe(f,v,A){f.i.set(v,A)}function bd(f){return Xe(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function vl(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function yl(f,v,A){return typeof f=="string"?(f=encodeURI(f).replace(v,W1),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function W1(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Kv=/[#\/\?@]/g,Z1=/[#\?:]/g,eR=/[#\?]/g,tR=/[#\?@]/g,nR=/#/g;function bl(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Pi(f){f.g||(f.g=new Map,f.h=0,f.i&&X1(f.i,function(v,A){f.add(decodeURIComponent(v.replace(/\+/g," ")),A)}))}t=bl.prototype,t.add=function(f,v){Pi(this),this.i=null,f=br(this,f);let A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(v),this.h+=1,this};function Qv(f,v){Pi(f),v=br(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function Xv(f,v){return Pi(f),v=br(f,v),f.g.has(v)}t.forEach=function(f,v){Pi(this),this.g.forEach(function(A,L){A.forEach(function(U){f.call(v,U,L,this)},this)},this)};function Wv(f,v){Pi(f);let A=[];if(typeof v=="string")Xv(f,v)&&(A=A.concat(f.g.get(br(f,v))));else for(f=Array.from(f.g.values()),v=0;v<f.length;v++)A=A.concat(f[v]);return A}t.set=function(f,v){return Pi(this),this.i=null,f=br(this,f),Xv(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},t.get=function(f,v){return f?(f=Wv(this,f),f.length>0?String(f[0]):v):v};function Zv(f,v,A){Qv(f,v),A.length>0&&(f.i=null,f.g.set(br(f,v),x(A)),f.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(let L=0;L<v.length;L++){var A=v[L];const U=fl(A);A=Wv(this,A);for(let z=0;z<A.length;z++){let K=U;A[z]!==""&&(K+="="+fl(A[z])),f.push(K)}}return this.i=f.join("&")};function ey(f){const v=new bl;return v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),v}function br(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function sR(f,v){v&&!f.j&&(Pi(f),f.i=null,f.g.forEach(function(A,L){const U=L.toLowerCase();L!=U&&(Qv(this,L),Zv(this,U,A))},f)),f.j=v}function aR(f,v){const A=new hl;if(o.Image){const L=new Image;L.onload=m(wa,A,"TestLoadImage: loaded",!0,v,L),L.onerror=m(wa,A,"TestLoadImage: error",!1,v,L),L.onabort=m(wa,A,"TestLoadImage: abort",!1,v,L),L.ontimeout=m(wa,A,"TestLoadImage: timeout",!1,v,L),o.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else v(!1)}function iR(f,v){const A=new hl,L=new AbortController,U=setTimeout(()=>{L.abort(),wa(A,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:L.signal}).then(z=>{clearTimeout(U),z.ok?wa(A,"TestPingServer: ok",!0,v):wa(A,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(U),wa(A,"TestPingServer: error",!1,v)})}function wa(f,v,A,L,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),L(A)}catch{}}function rR(){this.g=new G1}function df(f){this.i=f.Sb||null,this.h=f.ab||!1}p(df,Rv),df.prototype.g=function(){return new _d(this.i,this.h)};function _d(f,v){je.call(this),this.H=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_d,je),t=_d.prototype,t.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=v,this.readyState=1,El(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(v.body=f),(this.H||o).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ty(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function ty(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?_l(this):El(this),this.readyState==3&&ty(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,_l(this))},t.Na=function(f){this.g&&(this.response=f,_l(this))},t.ga=function(){this.g&&_l(this)};function _l(f){f.readyState=4,f.l=null,f.j=null,f.B=null,El(f)}t.setRequestHeader=function(f,v){this.A.append(f,v)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var A=v.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=v.next();return f.join(`\r
`)};function El(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(_d.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ny(f){let v="";return ne(f,function(A,L){v+=L,v+=":",v+=A,v+=`\r
`}),v}function uf(f,v,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=ny(A),typeof f=="string"?A!=null&&fl(A):Xe(f,v,A))}function mt(f){je.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(mt,je);var oR=/^https?$/i,lR=["POST","PUT"];t=mt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,v,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vv.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(z){sy(this,z);return}if(f=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var U in L)A.set(U,L[U]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const z of L.keys())A.set(z,L.get(z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(z=>z.toLowerCase()=="content-type"),U=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(lR,v,void 0)>=0)||L||U||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,K]of A)this.g.setRequestHeader(z,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(z){sy(this,z)}};function sy(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.o=5,ay(f),Ed(f)}function ay(f){f.A||(f.A=!0,Oe(f,"complete"),Oe(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Oe(this,"complete"),Oe(this,"abort"),Ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ed(this,!0)),mt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?iy(this):this.Xa())},t.Xa=function(){iy(this)};function iy(f){if(f.h&&typeof i<"u"){if(f.v&&Aa(f)==4)setTimeout(f.Ca.bind(f),0);else if(Oe(f,"readystatechange"),Aa(f)==4){f.h=!1;try{const z=f.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var A;if(!(A=v)){var L;if(L=z===0){let K=String(f.D).match(Jv)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),L=!oR.test(K?K.toLowerCase():"")}A=L}if(A)Oe(f,"complete"),Oe(f,"success");else{f.o=6;try{var U=Aa(f)>2?f.g.statusText:""}catch{U=""}f.l=U+" ["+f.ca()+"]",ay(f)}}finally{Ed(f)}}}}function Ed(f,v){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const A=f.g;f.g=null,v||Oe(f,"ready");try{A.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Aa(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Aa(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),F1(v)}};function ry(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function cR(f){const v={};f=(f.g&&Aa(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(j(f[L]))continue;var A=Y1(f[L]);const U=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const z=v[U]||[];v[U]=z,z.push(A)}de(v,function(L){return L.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nl(f,v,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||v}function oy(f){this.za=0,this.i=[],this.j=new hl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nl("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nl("baseRetryDelayMs",5e3,f),this.Za=Nl("retryDelaySeedMs",1e4,f),this.Ta=Nl("forwardChannelMaxRetries",2,f),this.va=Nl("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Bv(f&&f.concurrentRequestLimit),this.Ba=new rR,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=oy.prototype,t.ka=8,t.I=1,t.connect=function(f,v,A,L){an(0),this.W=f,this.H=v||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.J=gy(this,null,this.W),Cd(this)};function mf(f){if(ly(f),f.I==3){var v=f.V++,A=Es(f.J);if(Xe(A,"SID",f.M),Xe(A,"RID",v),Xe(A,"TYPE","terminate"),Cl(f,A),v=new Ta(f,f.j,v),v.M=2,v.A=bd(Es(A)),A=!1,o.navigator&&o.navigator.sendBeacon)try{A=o.navigator.sendBeacon(v.A.toString(),"")}catch{}!A&&o.Image&&(new Image().src=v.A,A=!0),A||(v.g=xy(v.j,null),v.g.ea(v.A)),v.F=Date.now(),yd(v)}py(f)}function Nd(f){f.g&&(ff(f),f.g.cancel(),f.g=null)}function ly(f){Nd(f),f.v&&(o.clearTimeout(f.v),f.v=null),Td(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function Cd(f){if(!qv(f.h)&&!f.m){f.m=!0;var v=f.Ea;V||E(),k||(V(),k=!0),R.add(v,f),f.D=0}}function dR(f,v){return Hv(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=v.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ml(d(f.Ea,f,v),fy(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const U=new Ta(this,this.j,f);let z=this.o;if(this.U&&(z?(z=ye(z),Ge(z,this.U)):z=this.U),this.u!==null||this.R||(U.J=z,z=null),this.S)e:{for(var v=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(v+=L,v>4096){v=A;break e}if(v===4096||A===this.i.length-1){v=A+1;break e}}v=1e3}else v=1e3;v=dy(this,U,v),A=Es(this.J),Xe(A,"RID",f),Xe(A,"CVER",22),this.G&&Xe(A,"X-HTTP-Session-Id",this.G),Cl(this,A),z&&(this.R?v="headers="+fl(ny(z))+"&"+v:this.u&&uf(A,this.u,z)),lf(this.h,U),this.Ra&&Xe(A,"TYPE","init"),this.S?(Xe(A,"$req",v),Xe(A,"SID","null"),U.U=!0,sf(U,A,null)):sf(U,A,v),this.I=2}}else this.I==3&&(f?cy(this,f):this.i.length==0||qv(this.h)||cy(this))};function cy(f,v){var A;v?A=v.l:A=f.V++;const L=Es(f.J);Xe(L,"SID",f.M),Xe(L,"RID",A),Xe(L,"AID",f.K),Cl(f,L),f.u&&f.o&&uf(L,f.u,f.o),A=new Ta(f,f.j,A,f.D+1),f.u===null&&(A.J=f.o),v&&(f.i=v.G.concat(f.i)),v=dy(f,A,1e3),A.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),lf(f.h,A),sf(A,L,v)}function Cl(f,v){f.H&&ne(f.H,function(A,L){Xe(v,L,A)}),f.l&&ne({},function(A,L){Xe(v,L,A)})}function dy(f,v,A){A=Math.min(f.i.length,A);const L=f.l?d(f.l.Ka,f.l,f):null;e:{var U=f.i;let ve=-1;for(;;){const It=["count="+A];ve==-1?A>0?(ve=U[0].g,It.push("ofs="+ve)):ve=0:It.push("ofs="+ve);let Be=!0;for(let Dt=0;Dt<A;Dt++){var z=U[Dt].g;const Ns=U[Dt].map;if(z-=ve,z<0)ve=Math.max(0,U[Dt].g-100),Be=!1;else try{z="req"+z+"_"||"";try{var K=Ns instanceof Map?Ns:Object.entries(Ns);for(const[ki,Ia]of K){let Ra=Ia;l(Ia)&&(Ra=Wh(Ia)),It.push(z+ki+"="+encodeURIComponent(Ra))}}catch(ki){throw It.push(z+"type="+encodeURIComponent("_badmap")),ki}}catch{L&&L(Ns)}}if(Be){K=It.join("&");break e}}K=void 0}return f=f.i.splice(0,A),v.G=f,K}function uy(f){if(!f.g&&!f.v){f.Y=1;var v=f.Da;V||E(),k||(V(),k=!0),R.add(v,f),f.A=0}}function hf(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ml(d(f.Da,f),fy(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,my(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ml(d(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),Nd(this),my(this))};function ff(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function my(f){f.g=new Ta(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var v=Es(f.na);Xe(v,"RID","rpc"),Xe(v,"SID",f.M),Xe(v,"AID",f.K),Xe(v,"CI",f.F?"0":"1"),!f.F&&f.ia&&Xe(v,"TO",f.ia),Xe(v,"TYPE","xmlhttp"),Cl(f,v),f.u&&f.o&&uf(v,f.u,f.o),f.O&&(f.g.H=f.O);var A=f.g;f=f.ba,A.M=1,A.A=bd(Es(v)),A.u=null,A.R=!0,zv(A,f)}t.Va=function(){this.C!=null&&(this.C=null,Nd(this),hf(this),an(19))};function Td(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function hy(f,v){var A=null;if(f.g==v){Td(f),ff(f),f.g=null;var L=2}else if(of(f.h,v))A=v.G,$v(f.h,v),L=1;else return;if(f.I!=0){if(v.o)if(L==1){A=v.u?v.u.length:0,v=Date.now()-v.F;var U=f.D;L=xd(),Oe(L,new kv(L,A)),Cd(f)}else uy(f);else if(U=v.m,U==3||U==0&&v.X>0||!(L==1&&dR(f,v)||L==2&&hf(f)))switch(A&&A.length>0&&(v=f.h,v.i=v.i.concat(A)),U){case 1:Di(f,5);break;case 4:Di(f,10);break;case 3:Di(f,6);break;default:Di(f,2)}}}function fy(f,v){let A=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(A*=2),A*v}function Di(f,v){if(f.j.info("Error code "+v),v==2){var A=d(f.bb,f),L=f.Ua;const U=!L;L=new Sa(L||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gl(L,"https"),bd(L),U?aR(L.toString(),A):iR(L.toString(),A)}else an(2);f.I=0,f.l&&f.l.pa(v),py(f),ly(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function py(f){if(f.I=0,f.ja=[],f.l){const v=Yv(f.h);(v.length!=0||f.i.length!=0)&&(y(f.ja,v),y(f.ja,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.oa()}}function gy(f,v,A){var L=A instanceof Sa?Es(A):new Sa(A);if(L.g!="")v&&(L.g=v+"."+L.g),xl(L,L.u);else{var U=o.location;L=U.protocol,v=v?v+"."+U.hostname:U.hostname,U=+U.port;const z=new Sa(null);L&&gl(z,L),v&&(z.g=v),U&&xl(z,U),A&&(z.h=A),L=z}return A=f.G,v=f.wa,A&&v&&Xe(L,A,v),Xe(L,"VER",f.ka),Cl(f,L),L}function xy(f,v,A){if(v&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Aa&&!f.ma?new mt(new df({ab:A})):new mt(f.ma),v.Fa(f.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vy(){}t=vy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Sd(){}Sd.prototype.g=function(f,v){return new En(f,v)};function En(f,v){je.call(this),this.g=new oy(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(f?f["X-WebChannel-Client-Profile"]=v.sa:f={"X-WebChannel-Client-Profile":v.sa}),this.g.U=f,(f=v&&v.Qb)&&!j(f)&&(this.g.u=f),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!j(v)&&(this.g.G=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new _r(this)}p(En,je),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){mf(this.g)},En.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.v&&(A={},A.__data__=Wh(f),f=A);v.i.push(new Q1(v.Ya++,f)),v.I==3&&Cd(v)},En.prototype.N=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,En.Z.N.call(this)};function yy(f){Zh.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const A in v){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}p(yy,Zh);function by(){ef.call(this),this.status=1}p(by,ef);function _r(f){this.g=f}p(_r,vy),_r.prototype.ra=function(){Oe(this.g,"a")},_r.prototype.qa=function(f){Oe(this.g,new yy(f))},_r.prototype.pa=function(f){Oe(this.g,new by)},_r.prototype.oa=function(){Oe(this.g,"b")},Sd.prototype.createWebChannel=Sd.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,FA=function(){return new Sd},zA=function(){return xd()},OA=ji,wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vd.NO_ERROR=0,vd.TIMEOUT=8,vd.HTTP_ERROR=6,Iu=vd,Lv.COMPLETE="complete",UA=Lv,jv.EventType=dl,dl.OPEN="a",dl.CLOSE="b",dl.ERROR="c",dl.MESSAGE="d",je.prototype.listen=je.prototype.J,Gl=jv,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,VA=mt}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore",D_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new xx("@firebase/firestore");function Ar(){return rr.logLevel}function ee(t,...e){if(rr.logLevel<=Ne.DEBUG){const n=e.map(Rx);rr.debug(`Firestore (${Jo}): ${t}`,...n)}}function xa(t,...e){if(rr.logLevel<=Ne.ERROR){const n=e.map(Rx);rr.error(`Firestore (${Jo}): ${t}`,...n)}}function or(t,...e){if(rr.logLevel<=Ne.WARN){const n=e.map(Rx);rr.warn(`Firestore (${Jo}): ${t}`,...n)}}function Rx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,GA(t,s,n)}function GA(t,e,n){let s=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xa(s),new Error(s)}function Le(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||GA(e,a,s)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Ea{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class q6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H6{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let s=this.i;const a=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ra,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ra)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Le(typeof s.accessToken=="string",31837,{l:s}),new BA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class $6{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y6{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new $6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const s=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const a=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new k_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new k_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=K6(40);for(let i=0;i<a.length;++i)s.length<20&&a[i]<n&&(s+=e.charAt(a[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function Ag(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),i=e.charAt(s);if(a!==i)return cp(a)===cp(i)?Ce(a,i):cp(a)?1:-1}return Ce(t.length,e.length)}const Q6=55296,X6=57343;function cp(t){const e=t.charCodeAt(0);return e>=Q6&&e<=X6}function Co(t,e,n){return t.length===e.length&&t.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="__name__";class Ts{constructor(e,n,s){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&le(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const i=Ts.compareSegments(e.get(a),n.get(a));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=Ts.isNumericId(e),a=Ts.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):Ag(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return li.fromString(e.substring(4,e.length-2))}}class $e extends Ts{construct(e,n,s){return new $e(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const W6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Ts{construct(e,n,s){return new Ut(e,n,s)}static isValidIdentifier(e){return W6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L_}static keyField(){return new Ut([L_])}static fromServerFormat(e){const n=[];let s="",a=0;const i=()=>{if(s.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(s+=l,a++):(i(),a++)}if(i(),o)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se($e.fromString(e))}static fromName(e){return new se($e.fromString(e).popFirst(5))}static empty(){return new se($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $A(t,e,n,s){if(e===!0&&s===!0)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function V_(t){if(!se.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U_(t){if(se.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function YA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Z6(t,e){if(e<=0)throw new X(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,e){const n={typeString:t};return e&&(n.value=e),n}function od(t,e){if(!YA(t))throw new X(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(a&&typeof o!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new X(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=-62135596800,z_=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*z_);return new Me(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<O_)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z_}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(od(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-O_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:St("string",Me._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new Me(0,0))}static max(){return new he(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=-1;function ek(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=he.fromTimestamp(s===1e9?new Me(n+1,0):new Me(n,s));return new pi(a,se.empty(),e)}function tk(t){return new pi(t.readTime,t.key,Mc)}class pi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new pi(he.min(),se.empty(),Mc)}static max(){return new pi(he.max(),se.empty(),Mc)}}function nk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ak{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==sk)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((s,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,a)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,s)=>{n(e)})}static reject(e){return new $((n,s)=>{s(e)})}static waitFor(e){return new $((n,s)=>{let a=0,i=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++i,o&&i===a&&n()},c=>s(c))}),o=!0,i===a&&n()})}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next(a=>a?$.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,i)=>{s.push(n.call(this,a,i))}),this.waitFor(s)}static mapArray(e,n){return new $((s,a)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++l,l===i&&s(o)},m=>a(m))}})}static doWhile(e,n){return new $((s,a)=>{const i=()=>{e()===!0?n().next(()=>{i()},a):s()};i()})}}function ik(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=-1;function xh(t){return t==null}function _m(t){return t===0&&1/t==-1/0}function rk(t){return typeof t=="number"&&Number.isInteger(t)&&!_m(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="";function ok(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=F_(e)),e=lk(t.get(n),e);return F_(e)}function lk(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const i=t.charAt(a);switch(i){case"\0":n+="";break;case JA:n+="";break;default:n+=i}}return n}function F_(t){return t+JA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jd(this.root,e,this.comparator,!0)}}class Jd{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,s,a,i){this.key=e,this.value=n,this.color=s??qt.RED,this.left=a??qt.EMPTY,this.right=i??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,i){return new qt(e??this.key,n??this.value,s??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const i=s(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,n,s),null):i===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return qt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,s,a,i){return this}insert(e,n,s){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B_(this.data.getIterator())}getIteratorFrom(e){return new B_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=s.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class B_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new In([])}unionWith(e){let n=new jt(Ut.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new QA("Invalid base64 string: "+i):i}}(e);return new zt(n)}static fromUint8Array(e){const n=function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const ck=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=ck.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xi(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="server_timestamp",WA="__type__",ZA="__previous_value__",e2="__local_write_time__";function Mx(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WA])==null?void 0:s.stringValue)===XA}function vh(t){const e=t.mapValue.fields[ZA];return Mx(e)?vh(e):e}function Pc(t){const e=gi(t.mapValue.fields[e2].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,s,a,i,o,l,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=m}}const Em="(default)";class To{constructor(e,n){this.projectId=e,this.database=n||Em}static empty(){return new To("","")}get isDefaultDatabase(){return this.database===Em}isEqual(e){return e instanceof To&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="__type__",uk="__max__",Kd={mapValue:{}},n2="__vector__",Nm="value";function vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mx(t)?4:hk(t)?9007199254740991:mk(t)?10:11:le(28295,{value:t})}function ks(t,e){if(t===e)return!0;const n=vi(t);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pc(t).isEqual(Pc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=gi(a.timestampValue),l=gi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return xi(a.bytesValue).isEqual(xi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return pt(a.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return pt(a.integerValue)===pt(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=pt(a.doubleValue),l=pt(i.doubleValue);return o===l?_m(o)===_m(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Co(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return function(a,i){const o=a.mapValue.fields||{},l=i.mapValue.fields||{};if(G_(o)!==G_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ks(o[c],l[c])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function Dc(t,e){return(t.values||[]).find(n=>ks(n,e))!==void 0}function So(t,e){if(t===e)return 0;const n=vi(t),s=vi(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=pt(i.integerValue||i.doubleValue),c=pt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return q_(t.timestampValue,e.timestampValue);case 4:return q_(Pc(t),Pc(e));case 5:return Ag(t.stringValue,e.stringValue);case 6:return function(i,o){const l=xi(i),c=xi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const m=Ce(l[d],c[d]);if(m!==0)return m}return Ce(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ce(pt(i.latitude),pt(o.latitude));return l!==0?l:Ce(pt(i.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return H_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,y,T;const l=i.fields||{},c=o.fields||{},d=(g=l[Nm])==null?void 0:g.arrayValue,m=(x=c[Nm])==null?void 0:x.arrayValue,p=Ce(((y=d==null?void 0:d.values)==null?void 0:y.length)||0,((T=m==null?void 0:m.values)==null?void 0:T.length)||0);return p!==0?p:H_(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Kd.mapValue&&o===Kd.mapValue)return 0;if(i===Kd.mapValue)return 1;if(o===Kd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=Ag(c[p],m[p]);if(g!==0)return g;const x=So(l[c[p]],d[m[p]]);if(x!==0)return x}return Ce(c.length,m.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function q_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=gi(t),s=gi(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function H_(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const i=So(n[a],s[a]);if(i)return i}return Ce(n.length,s.length)}function wo(t){return Ig(t)}function Ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=gi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",a=!0;for(const i of n.values||[])a?a=!1:s+=",",s+=Ig(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",i=!0;for(const o of s)i?i=!1:a+=",",a+=`${o}:${Ig(n.fields[o])}`;return a+"}"}(t.mapValue):le(61005,{value:t})}function Ru(t){switch(vi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vh(t);return e?16+Ru(e):16;case 5:return 2*t.stringValue.length;case 6:return xi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,i)=>a+Ru(i),0)}(t.arrayValue);case 10:case 11:return function(s){let a=0;return wi(s.fields,(i,o)=>{a+=i.length+Ru(o)}),a}(t.mapValue);default:throw le(13486,{value:t})}}function $_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rg(t){return!!t&&"integerValue"in t}function Px(t){return!!t&&"arrayValue"in t}function Y_(t){return!!t&&"nullValue"in t}function J_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ju(t){return!!t&&"mapValue"in t}function mk(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[t2])==null?void 0:s.stringValue)===n2}function cc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wi(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=cc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(t.arrayValue.values[n]);return e}return{...t}}function hk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ju(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(n)}setAll(e){let n=Ut.emptyPath(),s={},a=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,a),s={},a=[],n=l.popLast()}o?s[l.lastSegment()]=cc(o):a.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,a)}delete(e){const n=this.field(e.popLast());ju(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];ju(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){wi(n,(a,i)=>e[a]=i);for(const a of s)delete e[a]}clone(){return new vn(cc(this.value))}}function s2(t){const e=[];return wi(t.fields,(n,s)=>{const a=new Ut([n]);if(ju(s)){const i=s2(s.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,s,a,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,he.min(),he.min(),he.min(),vn.empty(),0)}static newFoundDocument(e,n,s,a){return new Zt(e,1,n,he.min(),s,a,0)}static newNoDocument(e,n){return new Zt(e,2,n,he.min(),he.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,he.min(),he.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.position=e,this.inclusive=n}}function K_(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?s=se.comparator(se.fromName(o.referenceValue),n.key):s=So(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n="asc"){this.field=e,this.dir=n}}function fk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{}class Ct extends a2{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new gk(e,n,s):n==="array-contains"?new yk(e,s):n==="in"?new bk(e,s):n==="not-in"?new _k(e,s):n==="array-contains-any"?new Ek(e,s):new Ct(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new xk(e,s):new vk(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(So(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends a2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ps(e,n)}matches(e){return i2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function i2(t){return t.op==="and"}function r2(t){return pk(t)&&i2(t)}function pk(t){for(const e of t.filters)if(e instanceof ps)return!1;return!0}function jg(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(r2(t))return t.filters.map(e=>jg(e)).join(",");{const e=t.filters.map(n=>jg(n)).join(",");return`${t.op}(${e})`}}function o2(t,e){return t instanceof Ct?function(s,a){return a instanceof Ct&&s.op===a.op&&s.field.isEqual(a.field)&&ks(s.value,a.value)}(t,e):t instanceof ps?function(s,a){return a instanceof ps&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((i,o,l)=>i&&o2(o,a.filters[l]),!0):!1}(t,e):void le(19439)}function l2(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`}(t):t instanceof ps?function(n){return n.op.toString()+" {"+n.getFilters().map(l2).join(" ,")+"}"}(t):"Filter"}class gk extends Ct{constructor(e,n,s){super(e,n,s),this.key=se.fromName(s.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class xk extends Ct{constructor(e,n){super(e,"in",n),this.keys=c2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vk extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=c2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function c2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>se.fromName(s.referenceValue))}class yk extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Px(n)&&Dc(n.arrayValue,this.value)}}class bk extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class _k extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}}class Ek extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Px(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Dc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n=null,s=[],a=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function X_(t,e=null,n=[],s=[],a=null,i=null,o=null){return new Nk(t,e,n,s,a,i,o)}function Dx(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>jg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>wo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>wo(s)).join(",")),e.Te=n}return e.Te}function kx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q_(t.startAt,e.startAt)&&Q_(t.endAt,e.endAt)}function Mg(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n=null,s=[],a=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ck(t,e,n,s,a,i,o,l){return new Xo(t,e,n,s,a,i,o,l)}function yh(t){return new Xo(t)}function W_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d2(t){return t.collectionGroup!==null}function dc(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new jt(Ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new kc(i,s))}),n.has(Ut.keyField().canonicalString())||e.Ie.push(new kc(Ut.keyField(),s))}return e.Ie}function Ms(t){const e=fe(t);return e.Ee||(e.Ee=Tk(e,dc(t))),e.Ee}function Tk(t,e){if(t.limitType==="F")return X_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new kc(a.field,i)});const n=t.endAt?new Cm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Cm(t.startAt.position,t.startAt.inclusive):null;return X_(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Pg(t,e){const n=t.filters.concat([e]);return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tm(t,e,n){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bh(t,e){return kx(Ms(t),Ms(e))&&t.limitType===e.limitType}function u2(t){return`${Dx(Ms(t))}|lt:${t.limitType}`}function Ir(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>l2(a)).join(", ")}]`),xh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>wo(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>wo(a)).join(",")),`Target(${s})`}(Ms(t))}; limitType=${t.limitType})`}function _h(t,e){return e.isFoundDocument()&&function(s,a){const i=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):se.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,a){for(const i of dc(s))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,a){for(const i of s.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(s,a){return!(s.startAt&&!function(o,l,c){const d=K_(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,dc(s),a)||s.endAt&&!function(o,l,c){const d=K_(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,dc(s),a))}(t,e)}function Sk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m2(t){return(e,n)=>{let s=!1;for(const a of dc(t)){const i=wk(a,e,n);if(i!==0)return i;s=s||a.field.isKeyField()}return 0}}function wk(t,e,n){const s=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?So(c,d):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,i]of s)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(n,s)=>{for(const[a,i]of s)e(a,i)})}isEmpty(){return KA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new ct(se.comparator);function va(){return Ak}const h2=new ct(se.comparator);function Bl(...t){let e=h2;for(const n of t)e=e.insert(n.key,n);return e}function f2(t){let e=h2;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Hi(){return uc()}function p2(){return uc()}function uc(){return new pr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ik=new ct(se.comparator),Rk=new jt(se.comparator);function Te(...t){let e=Rk;for(const n of t)e=e.add(n);return e}const jk=new jt(Ce);function Mk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_m(e)?"-0":e}}function g2(t){return{integerValue:""+t}}function Pk(t,e){return rk(e)?g2(e):Lx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function Dk(t,e,n){return t instanceof Sm?function(a,i){const o={fields:{[WA]:{stringValue:XA},[e2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&Mx(i)&&(i=vh(i)),i&&(o.fields[ZA]=i),{mapValue:o}}(n,e):t instanceof Ao?v2(t,e):t instanceof Io?y2(t,e):function(a,i){const o=x2(a,i),l=Z_(o)+Z_(a.Ae);return Rg(o)&&Rg(a.Ae)?g2(l):Lx(a.serializer,l)}(t,e)}function kk(t,e,n){return t instanceof Ao?v2(t,e):t instanceof Io?y2(t,e):n}function x2(t,e){return t instanceof wm?function(s){return Rg(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Sm extends Eh{}class Ao extends Eh{constructor(e){super(),this.elements=e}}function v2(t,e){const n=b2(e);for(const s of t.elements)n.some(a=>ks(a,s))||n.push(s);return{arrayValue:{values:n}}}class Io extends Eh{constructor(e){super(),this.elements=e}}function y2(t,e){let n=b2(e);for(const s of t.elements)n=n.filter(a=>!ks(a,s));return{arrayValue:{values:n}}}class wm extends Eh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Z_(t){return pt(t.integerValue||t.doubleValue)}function b2(t){return Px(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.field=e,this.transform=n}}function Lk(t,e){return t.field.isEqual(e.field)&&function(s,a){return s instanceof Ao&&a instanceof Ao||s instanceof Io&&a instanceof Io?Co(s.elements,a.elements,ks):s instanceof wm&&a instanceof wm?ks(s.Ae,a.Ae):s instanceof Sm&&a instanceof Sm}(t.transform,e.transform)}class Vk{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function E2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ch(t.key,dn.none()):new ld(t.key,t.data,dn.none());{const n=t.data,s=vn.empty();let a=new jt(Ut.comparator);for(let i of e.fields)if(!a.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),a=a.add(i)}return new Ai(t.key,s,new In(a.toArray()),dn.none())}}function Uk(t,e,n){t instanceof ld?function(a,i,o){const l=a.value.clone(),c=tE(a.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ai?function(a,i,o){if(!Mu(a.precondition,i))return void i.convertToUnknownDocument(o.version);const l=tE(a.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(N2(a)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mc(t,e,n,s){return t instanceof ld?function(i,o,l,c){if(!Mu(i.precondition,o))return l;const d=i.value.clone(),m=nE(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ai?function(i,o,l,c){if(!Mu(i.precondition,o))return l;const d=nE(i.fieldTransforms,c,o),m=o.data;return m.setAll(N2(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return Mu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Ok(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),i=x2(s.transform,a||null);i!=null&&(n===null&&(n=vn.empty()),n.set(s.field,i))}return n||null}function eE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Co(s,a,(i,o)=>Lk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ld extends Nh{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ai extends Nh{constructor(e,n,s,a,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function N2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function tE(t,e,n){const s=new Map;Le(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const i=t[a],o=i.transform,l=e.data.field(i.field);s.set(i.field,kk(o,l,n[a]))}return s}function nE(t,e,n){const s=new Map;for(const a of t){const i=a.transform,o=n.data.field(a.field);s.set(a.field,Dk(i,o,e))}return s}class Ch extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zk extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Uk(i,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=mc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=mc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=p2();return this.mutations.forEach(a=>{const i=e.get(a.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(a.key)?null:l;const c=E2(o,l);c!==null&&s.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(n,s)=>eE(n,s))&&Co(this.baseMutations,e.baseMutations,(n,s)=>eE(n,s))}}class Vx{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Le(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return Ik}();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,s[o].version);return new Vx(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ie;function qk(t){switch(t){case B.OK:return le(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function C2(t){if(t===void 0)return xa("GRPC error has no .code"),B.UNKNOWN;switch(t){case bt.OK:return B.OK;case bt.CANCELLED:return B.CANCELLED;case bt.UNKNOWN:return B.UNKNOWN;case bt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case bt.INTERNAL:return B.INTERNAL;case bt.UNAVAILABLE:return B.UNAVAILABLE;case bt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case bt.NOT_FOUND:return B.NOT_FOUND;case bt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case bt.ABORTED:return B.ABORTED;case bt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case bt.DATA_LOSS:return B.DATA_LOSS;default:return le(39323,{code:t})}}(Ie=bt||(bt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new li([4294967295,4294967295],0);function sE(t){const e=Hk().encode(t),n=new LA;return n.update(e),new Uint8Array(n.digest())}function aE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new li([n,s],0),new li([a,i],0)]}class Ux{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(s<0)throw new ql(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=li.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(li.fromNumber(s)));return a.compare($k)===1&&(a=new li([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=sE(e),[s,a]=aE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,a,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ux(i,a,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=sE(e),[s,a]=aE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,a,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,s,a,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Th(he.min(),a,new ct(Ce),va(),Te())}}class cd{constructor(e,n,s,a,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new cd(s,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class T2{constructor(e,n){this.targetId=e,this.Ce=n}}class S2{constructor(e,n,s=zt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class iE{constructor(){this.ve=0,this.Fe=rE(),this.Me=zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),s=Te();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:le(38017,{changeType:i})}}),new cd(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=rE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Yk{constructor(e){this.Ge=e,this.ze=new Map,this.je=va(),this.Je=Qd(),this.He=Qd(),this.Ye=new ct(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,a)=>{this.rt(a)&&n(a)})}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const i=a.target;if(Mg(i))if(s===0){const o=new se(i.path);this.et(n,o,Zt.newNoDocument(o,he.min()))}else Le(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:i=0}=n;let o,l;try{o=xi(s).toUint8Array()}catch(c){if(c instanceof QA)return or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ux(o,a,i)}catch(c){return or(c instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),a++)}),a}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Mg(l.target)){const c=new se(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Zt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Te();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const a=new Th(e,n,this.Ye,this.je,s);return this.je=va(),this.Je=Qd(),this.He=Qd(),this.Ye=new ct(Ce),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qd(){return new ct(se.comparator)}function rE(){return new ct(se.comparator)}const Jk={asc:"ASCENDING",desc:"DESCENDING"},Kk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"};class Xk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dg(t,e){return t.useProto3Json||xh(e)?e:{value:e}}function Am(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wk(t,e){return Am(t,e.toTimestamp())}function Ps(t){return Le(!!t,49232),he.fromTimestamp(function(n){const s=gi(n);return new Me(s.seconds,s.nanos)}(t))}function Ox(t,e){return kg(t,e).canonicalString()}function kg(t,e){const n=function(a){return new $e(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A2(t){const e=$e.fromString(t);return Le(P2(e),10190,{key:e.toString()}),e}function Lg(t,e){return Ox(t.databaseId,e.path)}function dp(t,e){const n=A2(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(R2(n))}function I2(t,e){return Ox(t.databaseId,e)}function Zk(t){const e=A2(t);return e.length===4?$e.emptyPath():R2(e)}function Vg(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R2(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oE(t,e,n){return{name:Lg(t,e),fields:n.value.mapValue.fields}}function eL(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:le(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(Le(m===void 0||typeof m=="string",58123),zt.fromBase64String(m||"")):(Le(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),zt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?B.UNKNOWN:C2(d.code);return new X(m,d.message||"")}(o);n=new S2(s,a,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=dp(t,s.document.name),i=Ps(s.document.updateTime),o=s.document.createTime?Ps(s.document.createTime):he.min(),l=new vn({mapValue:{fields:s.document.fields}}),c=Zt.newFoundDocument(a,i,o,l),d=s.targetIds||[],m=s.removedTargetIds||[];n=new Pu(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=dp(t,s.document),i=s.readTime?Ps(s.readTime):he.min(),o=Zt.newNoDocument(a,i),l=s.removedTargetIds||[];n=new Pu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=dp(t,s.document),i=s.removedTargetIds||[];n=new Pu([],i,a,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:i}=s,o=new Bk(a,i),l=s.targetId;n=new T2(l,o)}}return n}function tL(t,e){let n;if(e instanceof ld)n={update:oE(t,e.key,e.value)};else if(e instanceof Ch)n={delete:Lg(t,e.key)};else if(e instanceof Ai)n={update:oE(t,e.key,e.data),updateMask:dL(e.fieldMask)};else{if(!(e instanceof zk))return le(16599,{Vt:e.type});n={verify:Lg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Sm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ao)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Io)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wm)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw le(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:Wk(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le(27497)}(t,e.precondition)),n}function nL(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(a,i){let o=a.updateTime?Ps(a.updateTime):Ps(i);return o.isEqual(he.min())&&(o=Ps(i)),new Vk(o,a.transformResults||[])}(n,e))):[]}function sL(t,e){return{documents:[I2(t,e.path)]}}function aL(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=I2(t,a);const i=function(d){if(d.length!==0)return M2(ps.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:Rr(g.field),direction:oL(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Dg(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:a}}function iL(t){let e=Zk(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Le(s===1,65062);const m=n.from[0];m.allDescendants?a=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=j2(p);return g instanceof ps&&r2(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(y){return new kc(jr(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,xh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,x=p.values||[];return new Cm(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new Cm(x,g)}(n.endAt)),Ck(e,a,o,i,l,"F",c,d)}function rL(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=jr(n.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=jr(n.unaryFilter.field);return Ct.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=jr(n.unaryFilter.field);return Ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jr(n.unaryFilter.field);return Ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(jr(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ps.create(n.compositeFilter.filters.map(s=>j2(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function oL(t){return Jk[t]}function lL(t){return Kk[t]}function cL(t){return Qk[t]}function Rr(t){return{fieldPath:t.canonicalString()}}function jr(t){return Ut.fromServerFormat(t.fieldPath)}function M2(t){return t instanceof Ct?function(n){if(n.op==="=="){if(J_(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(Y_(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J_(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(Y_(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:lL(n.op),value:n.value}}}(t):t instanceof ps?function(n){const s=n.getFilters().map(a=>M2(a));return s.length===1?s[0]:{compositeFilter:{op:cL(n.op),filters:s}}}(t):le(54877,{filter:t})}function dL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,s,a,i=he.min(),o=he.min(),l=zt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.yt=e}}function mL(t){const e=iL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.Cn=new fL}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(pi.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class fL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new jt($e.comparator),i=!a.has(s);return this.index[n]=a.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new jt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D2=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(D2,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ro(0)}static cr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="LruGarbageCollector",pL=1048576;function dE([t,e],[n,s]){const a=Ce(t,n);return a===0?Ce(e,s):a}class gL{constructor(e){this.Ir=e,this.buffer=new jt(dE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();dE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(cE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qo(n)?ee(cE,"Ignoring IndexedDB error during garbage collection: ",n):await Ko(n)}await this.Vr(3e5)})}}class vL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return $.resolve(gh.ce);const s=new gL(n);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(lE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,i,o,l,c,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),a=this.params.maximumSequenceNumbersToCollect):a=p,o=Date.now(),this.nthSequenceNumber(e,a))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(d=Date.now(),Ar()<=Ne.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:p})))}}function yL(t,e){return new vL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.changes=new pr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&mc(s.mutation,a,In.empty(),Me.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Te()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Te()){const a=Hi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(i=>{let o=Bl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Hi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Te()))}populateOverlays(e,n,s){const a=[];return s.forEach(i=>{n.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,a){let i=va();const o=uc(),l=function(){return uc()}();return n.forEach((c,d)=>{const m=s.get(d.key);a.has(d.key)&&(m===void 0||m.mutation instanceof Ai)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),mc(m.mutation,d,m.mutation.getFieldMask(),Me.now())):o.set(d.key,In.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new _L(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=uc();let a=new ct((o,l)=>o-l),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=s.get(c)||In.empty();m=l.applyToLocalView(d,m),s.set(c,m);const p=(a.get(l.batchId)||Te()).add(c);a=a.insert(l.batchId,p)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,m=c.value,p=p2();m.forEach(g=>{if(!i.has(g)){const x=E2(n.get(g),s.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return $.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-i.size):$.resolve(Hi());let l=Mc,c=i;return o.next(d=>$.forEach(d,(m,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Te())).next(m=>({batchId:l,changes:f2(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(s=>{let a=Bl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const i=n.collectionGroup;let o=Bl();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const d=function(p,g){return new Xo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,a).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,a))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Zt.newInvalidDocument(m)))});let l=Bl();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&mc(m.mutation,d,In.empty(),Me.now()),_h(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Ps(a.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(a){return{name:a.name,query:mL(a.bundledQuery),readTime:Ps(a.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.overlays=new ct(se.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Hi();return $.forEach(n,a=>this.getOverlay(e,a).next(i=>{i!==null&&s.set(a,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const a=Hi(),i=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&a.set(c.getKey(),c)}return $.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let i=new ct((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let m=i.get(d.largestBatchId);m===null&&(m=Hi(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=Hi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=a)););return $.resolve(l)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Gk(n,s));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.Qr=new jt(kt.$r),this.Ur=new jt(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new kt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new kt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new se(new $e([])),s=new kt(n,e),a=new kt(n,e+1),i=[];return this.Ur.forEachInRange([s,a],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new se(new $e([])),s=new kt(n,e),a=new kt(n,e+1);let i=Te();return this.Ur.forEachInRange([s,a],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new kt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return se.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jt(kt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Fk(i,n,s,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new kt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),i=a<0?0:a;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?jx:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new kt(n,0),a=new kt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,a],o=>{const l=this.Xr(o.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new jt(Ce);return n.forEach(a=>{const i=new kt(a,0),o=new kt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let i=s;se.isDocumentKey(i)||(i=i.child(""));const o=new kt(new se(i),0);let l=new jt(Ce);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===a&&(l=l.add(c.Yr)),!0)},o),$.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Le(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,a=>{const i=new kt(a.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new kt(n,0),a=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.ri=e,this.docs=function(){return new ct(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),i=a?a.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let s=va();return n.forEach(a=>{const i=this.docs.get(a);s=s.insert(a,i?i.document.mutableCopy():Zt.newInvalidDocument(a))}),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let i=va();const o=n.path,l=new se(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||nk(tk(m),s)<=0||(a.has(m.key)||_h(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,s,a){le(9500)}ii(e,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new AL(this)}getSize(e){return $.resolve(this.size)}}class AL extends bL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.persistence=e,this.si=new pr(n=>Dx(n),kx),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.oi=0,this._i=new zx,this.targetCount=0,this.ai=Ro.ur()}forEachTarget(e,n){return this.si.forEach((s,a)=>n(a)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let a=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),$.waitFor(i).next(()=>a)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,i=[];return a&&n.forEach(o=>{i.push(a.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.ui={},this.overlays={},this.ci=new gh(0),this.li=!1,this.li=!0,this.hi=new TL,this.referenceDelegate=e(this),this.Pi=new IL(this),this.indexManager=new hL,this.remoteDocumentCache=function(a){return new wL(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new uL(n),this.Ii=new NL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SL(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ee("MemoryPersistence","Starting transaction:",e);const a=new RL(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class RL extends ak{constructor(e){super(),this.currentSequenceNumber=e}}class Fx{constructor(e){this.persistence=e,this.Ri=new zx,this.Vi=null}static mi(e){return new Fx(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,s=>{const a=se.fromPath(s);return this.gi(e,a).next(i=>{i||n.removeEntry(a,he.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Im{constructor(e,n){this.persistence=e,this.pi=new pr(s=>ok(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=yL(this,n)}static mi(e,n){return new Im(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(s,a)=>this.br(e,s,a).next(i=>i?$.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ru(e.data.value)),n}br(e,n,s){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return $.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Te(),a=Te();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new Gx(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return d4()?8:ik(nn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,a,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new jL;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,a){return s.documentReadCount<this.fs?(Ar()<=Ne.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ir(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ar()<=Ne.DEBUG&&ee("QueryEngine","Query:",Ir(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Ar()<=Ne.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ir(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(n))):$.resolve())}ys(e,n){if(W_(n))return $.resolve(null);let s=Ms(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Tm(n,null,"F"),s=Ms(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,Tm(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,s,a){return W_(n)||a.isEqual(he.min())?$.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,a)?$.resolve(null):(Ar()<=Ne.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ir(n)),this.vs(e,o,n,ek(a,Mc)).next(l=>l))})}Ds(e,n){let s=new jt(m2(e));return n.forEach((a,i)=>{_h(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,n,s){return Ar()<=Ne.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ir(n)),this.ps.getDocumentsMatchingQuery(e,n,pi.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="LocalStore",PL=3e8;class DL{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new ct(Ce),this.xs=new pr(i=>Dx(i),kx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function kL(t,e,n,s){return new DL(t,e,n,s)}async function L2(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(i=>(a=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Te();for(const d of a){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function LL(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,m){const p=d.batch,g=p.keys();let x=$.resolve();return g.forEach(y=>{x=x.next(()=>m.getEntry(c,y)).next(T=>{const I=d.docVersions.get(y);Le(I!==null,48541),T.version.compareTo(I)<0&&(p.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),m.addEntry(T)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function V2(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function VL(t,e){const n=fe(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const l=[];e.targetChanges.forEach((m,p)=>{const g=a.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(zt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,s)),a=a.insert(p,x),function(T,I,b){return T.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=PL?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,x,m)&&l.push(n.Pi.updateTargetData(i,x))});let c=va(),d=Te();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(UL(i,o,e.documentUpdates).next(m=>{c=m.ks,d=m.qs})),!s.isEqual(he.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(m)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=a,i))}function UL(t,e,n){let s=Te(),a=Te();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=va();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ee(Bx,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:a}})}function OL(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=jx),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zL(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Pi.getTargetData(s,e).next(i=>i?(a=i,$.resolve(a)):n.Pi.allocateTargetId(s).next(o=>(a=new Ka(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Ug(t,e,n){const s=fe(t),a=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Qo(o))throw o;ee(Bx,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function uE(t,e,n){const s=fe(t);let a=he.min(),i=Te();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const p=fe(c),g=p.xs.get(m);return g!==void 0?$.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,m)}(s,o,Ms(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?a:he.min(),n?i:Te())).next(l=>(FL(s,Sk(e),l),{documents:l,Qs:i})))}function FL(t,e,n){let s=t.Os.get(e)||he.min();n.forEach((a,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class mE{constructor(){this.activeTargetIds=Mk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GL{constructor(){this.Mo=new mE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="ConnectivityMonitor";class fE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(hE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(hE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd=null;function Og(){return Xd===null?Xd=function(){return 268435456+Math.round(2147483648*Math.random())}():Xd++,"0x"+Xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RestConnection",qL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Em?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,i){const o=Og(),l=this.zo(e,n.toUriEncodedString());ee(up,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,i);const{host:d}=new URL(l),m=Ho(d);return this.Jo(e,l,c,s,m).then(p=>(ee(up,`Received RPC '${e}' ${o}: `,p),p),p=>{throw or(up,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,a,i,o){return this.Go(e,n,s,a,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,i)=>e[i]=a),s&&s.headers.forEach((a,i)=>e[i]=a)}zo(e,n){const s=qL[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class YL extends HL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,i){const o=Og();return new Promise((l,c)=>{const d=new VA;d.setWithCredentials(!0),d.listenOnce(UA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Iu.NO_ERROR:const p=d.getResponseJson();ee(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Iu.TIMEOUT:ee(Xt,`RPC '${e}' ${o} timed out`),c(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case Iu.HTTP_ERROR:const g=d.getStatus();if(ee(Xt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const T=function(b){const N=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(N)>=0?N:B.UNKNOWN}(y.status);c(new X(T,y.message))}else c(new X(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(B.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ee(Xt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(a);ee(Xt,`RPC '${e}' ${o} sending request:`,a),d.send(n,"POST",m,s,15)})}T_(e,n,s){const a=Og(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FA(),l=zA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const m=i.join("");ee(Xt,`Creating RPC '${e}' stream ${a}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,x=!1;const y=new $L({Yo:I=>{x?ee(Xt,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(g||(ee(Xt,`Opening RPC '${e}' stream ${a} transport.`),p.open(),g=!0),ee(Xt,`RPC '${e}' stream ${a} sending:`,I),p.send(I))},Zo:()=>p.close()}),T=(I,b,N)=>{I.listen(b,w=>{try{N(w)}catch(D){setTimeout(()=>{throw D},0)}})};return T(p,Gl.EventType.OPEN,()=>{x||(ee(Xt,`RPC '${e}' stream ${a} transport opened.`),y.o_())}),T(p,Gl.EventType.CLOSE,()=>{x||(x=!0,ee(Xt,`RPC '${e}' stream ${a} transport closed`),y.a_(),this.E_(p))}),T(p,Gl.EventType.ERROR,I=>{x||(x=!0,or(Xt,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),y.a_(new X(B.UNAVAILABLE,"The operation could not be completed")))}),T(p,Gl.EventType.MESSAGE,I=>{var b;if(!x){const N=I.data[0];Le(!!N,16349);const w=N,D=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(D){ee(Xt,`RPC '${e}' stream ${a} received error:`,D);const V=D.status;let k=function(S){const C=bt[S];if(C!==void 0)return C2(C)}(V),R=D.message;k===void 0&&(k=B.INTERNAL,R="Unknown error status: "+V+" with message "+D.message),x=!0,y.a_(new X(k,R)),p.close()}else ee(Xt,`RPC '${e}' stream ${a} received:`,N),y.u_(N)}}),T(l,OA.STAT_EVENT,I=>{I.stat===wg.PROXY?ee(Xt,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===wg.NOPROXY&&ee(Xt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function mp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new Xk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,s=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="PersistentStream";class O2{constructor(e,n,s,a,i,o,l,c){this.Mi=e,this.S_=s,this.b_=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(xa(n.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===n&&this.G_(s,a)},s=>{e(()=>{const a=new X(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(pE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ee(pE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JL extends O2{constructor(e,n,s,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eL(this.serializer,e),s=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Ps(o.readTime):he.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Vg(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Mg(c)?{documents:sL(i,c)}:{query:aL(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=w2(i,o.resumeToken);const d=Dg(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=Am(i,o.snapshotVersion.toTimestamp());const d=Dg(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=rL(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Vg(this.serializer),n.removeTarget=e,this.q_(n)}}class KL extends O2{constructor(e,n,s,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nL(e.writeResults,e.commitTime),s=Ps(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Vg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>tL(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{}class XL extends QL{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,kg(n,s),a,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(B.UNKNOWN,i.toString())})}Ho(e,n,s,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,kg(n,s),a,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class WL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xa(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="RemoteStore";class ZL{constructor(e,n,s,a,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{gr(this)&&(ee(lr,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.Ea.add(4),await dd(d),d.Ra.set("Unknown"),d.Ea.delete(4),await wh(d)}(this))})}),this.Ra=new WL(s,a)}}async function wh(t){if(gr(t))for(const e of t.da)await e(!0)}async function dd(t){for(const e of t.da)await e(!1)}function z2(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yx(n)?$x(n):Wo(n).O_()&&Hx(n,e))}function qx(t,e){const n=fe(t),s=Wo(n);n.Ia.delete(e),s.O_()&&F2(n,e),n.Ia.size===0&&(s.O_()?s.L_():gr(n)&&n.Ra.set("Unknown"))}function Hx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wo(t).Y_(e)}function F2(t,e){t.Va.Ue(e),Wo(t).Z_(e)}function $x(t){t.Va=new Yk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Wo(t).start(),t.Ra.ua()}function Yx(t){return gr(t)&&!Wo(t).x_()&&t.Ia.size>0}function gr(t){return fe(t).Ea.size===0}function G2(t){t.Va=void 0}async function eV(t){t.Ra.set("Online")}async function tV(t){t.Ia.forEach((e,n)=>{Hx(t,e)})}async function nV(t,e){G2(t),Yx(t)?(t.Ra.ha(e),$x(t)):t.Ra.set("Unknown")}async function sV(t,e,n){if(t.Ra.set("Online"),e instanceof S2&&e.state===2&&e.cause)try{await async function(a,i){const o=i.cause;for(const l of i.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(t,e)}catch(s){ee(lr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rm(t,s)}else if(e instanceof Pu?t.Va.Ze(e):e instanceof T2?t.Va.st(e):t.Va.tt(e),!n.isEqual(he.min()))try{const s=await V2(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(zt.EMPTY_BYTE_STRING,m.snapshotVersion)),F2(i,c);const p=new Ka(m.target,c,d,m.sequenceNumber);Hx(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ee(lr,"Failed to raise snapshot:",s),await Rm(t,s)}}async function Rm(t,e,n){if(!Qo(e))throw e;t.Ea.add(1),await dd(t),t.Ra.set("Offline"),n||(n=()=>V2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(lr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wh(t)})}function B2(t,e){return e().catch(n=>Rm(t,n,e))}async function Ah(t){const e=fe(t),n=yi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jx;for(;aV(e);)try{const a=await OL(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,iV(e,a)}catch(a){await Rm(e,a)}q2(e)&&H2(e)}function aV(t){return gr(t)&&t.Ta.length<10}function iV(t,e){t.Ta.push(e);const n=yi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function q2(t){return gr(t)&&!yi(t).x_()&&t.Ta.length>0}function H2(t){yi(t).start()}async function rV(t){yi(t).ra()}async function oV(t){const e=yi(t);for(const n of t.Ta)e.ea(n.mutations)}async function lV(t,e,n){const s=t.Ta.shift(),a=Vx.from(s,e,n);await B2(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Ah(t)}async function cV(t,e){e&&yi(t).X_&&await async function(s,a){if(function(o){return qk(o)&&o!==B.ABORTED}(a.code)){const i=s.Ta.shift();yi(s).B_(),await B2(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Ah(s)}}(t,e),q2(t)&&H2(t)}async function gE(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ee(lr,"RemoteStore received new credentials");const s=gr(n);n.Ea.add(3),await dd(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wh(n)}async function dV(t,e){const n=fe(t);e?(n.Ea.delete(2),await wh(n)):e||(n.Ea.add(2),await dd(n),n.Ra.set("Unknown"))}function Wo(t){return t.ma||(t.ma=function(n,s,a){const i=fe(n);return i.sa(),new JL(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:eV.bind(null,t),t_:tV.bind(null,t),r_:nV.bind(null,t),H_:sV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Yx(t)?$x(t):t.Ra.set("Unknown")):(await t.ma.stop(),G2(t))})),t.ma}function yi(t){return t.fa||(t.fa=function(n,s,a){const i=fe(n);return i.sa(),new KL(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:rV.bind(null,t),r_:cV.bind(null,t),ta:oV.bind(null,t),na:lV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ah(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(lr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,s,a,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=i,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,i){const o=Date.now()+s,l=new Jx(e,n,o,a,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kx(t,e){if(xa("AsyncQueue",`${e}: ${t}`),Qo(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||se.comparator(n.key,s.key):(n,s)=>se.comparator(n.key,s.key),this.keyedMap=Bl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=s.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.ga=new ct(se.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class jo{constructor(e,n,s,a,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,a,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new jo(e,n,io.emptySet(n),o,s,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class mV{constructor(){this.queries=vE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=fe(n),i=a.queries;a.queries=vE(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new X(B.ABORTED,"Firestore shutting down"))}}function vE(){return new pr(t=>u2(t),bh)}async function Qx(t,e){const n=fe(t);let s=3;const a=e.query;let i=n.queries.get(a);i?!i.ba()&&e.Da()&&(s=2):(i=new uV,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(o){const l=Kx(o,`Initialization of query '${Ir(e.query)}' failed`);return void e.onError(l)}n.queries.set(a,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wx(n)}async function Xx(t,e){const n=fe(t),s=e.query;let a=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function hV(t,e){const n=fe(t);let s=!1;for(const a of e){const i=a.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(a)&&(s=!0);o.wa=a}}s&&Wx(n)}function fV(t,e,n){const s=fe(t),a=s.queries.get(e);if(a)for(const i of a.Sa)i.onError(n);s.queries.delete(e)}function Wx(t){t.Ca.forEach(e=>{e.next()})}var zg,yE;(yE=zg||(zg={})).Ma="default",yE.Cache="cache";class Zx{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.key=e}}class Y2{constructor(e){this.key=e}}class pV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=m2(e),this.tu=new io(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new xE,a=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,d=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((m,p)=>{const g=a.get(m),x=_h(this.query,p)?p:null,y=!!g&&this.mutatedKeys.has(g.key),T=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let I=!1;g&&x?g.data.isEqual(x.data)?y!==T&&(s.track({type:3,doc:x}),I=!0):this.su(g,x)||(s.track({type:2,doc:x}),I=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!g&&x?(s.track({type:0,doc:x}),I=!0):g&&!x&&(s.track({type:1,doc:g}),I=!0,(c||d)&&(l=!0)),I&&(x?(o=o.add(x),i=T?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(x,y){const T=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:I})}};return T(x)-T(y)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(s),a=a??!1;const l=n&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new jo(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new Y2(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new $2(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ev="SyncEngine";class gV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class xV{constructor(e){this.key=e,this.hu=!1}}class vV{constructor(e,n,s,a,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pr(l=>u2(l),bh),this.Iu=new Map,this.Eu=new Set,this.du=new ct(se.comparator),this.Au=new Map,this.Ru=new zx,this.Vu={},this.mu=new Map,this.fu=Ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yV(t,e,n=!0){const s=Z2(t);let a;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await J2(s,e,n,!0),a}async function bV(t,e){const n=Z2(t);await J2(n,e,!0,!1)}async function J2(t,e,n,s){const a=await zL(t.localStore,Ms(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await _V(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&n&&z2(t.remoteStore,a),l}async function _V(t,e,n,s,a){t.pu=(p,g,x)=>async function(T,I,b,N){let w=I.view.ru(b);w.Cs&&(w=await uE(T.localStore,I.query,!1).then(({documents:R})=>I.view.ru(R,w)));const D=N&&N.targetChanges.get(I.targetId),V=N&&N.targetMismatches.get(I.targetId)!=null,k=I.view.applyChanges(w,T.isPrimaryClient,D,V);return _E(T,I.targetId,k.au),k.snapshot}(t,p,g,x);const i=await uE(t.localStore,e,!0),o=new pV(e,i.Qs),l=o.ru(i.documents),c=cd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),d=o.applyChanges(l,t.isPrimaryClient,c);_E(t,n,d.au);const m=new gV(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function EV(t,e,n){const s=fe(t),a=s.Tu.get(e),i=s.Iu.get(a.targetId);if(i.length>1)return s.Iu.set(a.targetId,i.filter(o=>!bh(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ug(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&qx(s.remoteStore,a.targetId),Fg(s,a.targetId)}).catch(Ko)):(Fg(s,a.targetId),await Ug(s.localStore,a.targetId,!0))}async function NV(t,e){const n=fe(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qx(n.remoteStore,s.targetId))}async function CV(t,e,n){const s=jV(t);try{const a=await function(o,l){const c=fe(o),d=Me.now(),m=l.reduce((x,y)=>x.add(y.key),Te());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let y=va(),T=Te();return c.Ns.getEntries(x,m).next(I=>{y=I,y.forEach((b,N)=>{N.isValidDocument()||(T=T.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,y)).next(I=>{p=I;const b=[];for(const N of l){const w=Ok(N,p.get(N.key).overlayedDocument);w!=null&&b.push(new Ai(N.key,w,s2(w.value.mapValue),dn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,b,l)}).next(I=>{g=I;const b=I.applyToLocalDocumentSet(p,T);return c.documentOverlayCache.saveOverlays(x,I.batchId,b)})}).then(()=>({batchId:g.batchId,changes:f2(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new ct(Ce)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(s,a.batchId,n),await ud(s,a.changes),await Ah(s.remoteStore)}catch(a){const i=Kx(a,"Failed to persist write");n.reject(i)}}async function K2(t,e){const n=fe(t);try{const s=await VL(n.localStore,e);e.targetChanges.forEach((a,i)=>{const o=n.Au.get(i);o&&(Le(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?Le(o.hu,14607):a.removedDocuments.size>0&&(Le(o.hu,42227),o.hu=!1))}),await ud(n,s,e)}catch(s){await Ko(s)}}function bE(t,e,n){const s=fe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let d=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(l)&&(d=!0)}),d&&Wx(c)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function TV(t,e,n){const s=fe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),i=a&&a.key;if(i){let o=new ct(se.comparator);o=o.insert(i,Zt.newNoDocument(i,he.min()));const l=Te().add(i),c=new Th(he.min(),new Map,new ct(Ce),o,l);await K2(s,c),s.du=s.du.remove(i),s.Au.delete(e),tv(s)}else await Ug(s.localStore,e,!1).then(()=>Fg(s,e,n)).catch(Ko)}async function SV(t,e){const n=fe(t),s=e.batch.batchId;try{const a=await LL(n.localStore,e);X2(n,s,null),Q2(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ud(n,a)}catch(a){await Ko(a)}}async function wV(t,e,n){const s=fe(t);try{const a=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Le(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(s.localStore,e);X2(s,e,n),Q2(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ud(s,a)}catch(a){await Ko(a)}}function Q2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function X2(t,e,n){const s=fe(t);let a=s.Vu[s.currentUser.toKey()];if(a){const i=a.get(e);i&&(n?i.reject(n):i.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Fg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||W2(t,s)})}function W2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tv(t))}function _E(t,e,n){for(const s of n)s instanceof $2?(t.Ru.addReference(s.key,e),AV(t,s)):s instanceof Y2?(ee(ev,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||W2(t,s.key)):le(19791,{wu:s})}function AV(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ee(ev,"New document in limbo: "+n),t.Eu.add(s),tv(t))}function tv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se($e.fromString(e)),s=t.fu.next();t.Au.set(s,new xV(n)),t.du=t.du.insert(n,s),z2(t.remoteStore,new Ka(Ms(yh(n.path)),s,"TargetPurposeLimboResolution",gh.ce))}}async function ud(t,e,n){const s=fe(t),a=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(d=>{var m;if((d||n)&&s.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){a.push(d);const p=Gx.As(c.targetId,d);i.push(p)}}))}),await Promise.all(o),s.Pu.H_(a),await async function(c,d){const m=fe(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(d,g=>$.forEach(g.Es,x=>m.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>$.forEach(g.ds,x=>m.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!Qo(p))throw p;ee(Bx,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=m.Ms.get(g),y=x.snapshotVersion,T=x.withLastLimboFreeSnapshotVersion(y);m.Ms=m.Ms.insert(g,T)}}}(s.localStore,i))}async function IV(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ee(ev,"User change. New user:",e.toKey());const s=await L2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new X(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ud(n,s.Ls)}}function RV(t,e){const n=fe(t),s=n.Au.get(e);if(s&&s.hu)return Te().add(s.key);{let a=Te();const i=n.Iu.get(e);if(!i)return a;for(const o of i){const l=n.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function Z2(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TV.bind(null,e),e.Pu.H_=hV.bind(null,e.eventManager),e.Pu.yu=fV.bind(null,e.eventManager),e}function jV(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wV.bind(null,e),e}class jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kL(this.persistence,new ML,e.initialUser,this.serializer)}Cu(e){return new k2(Fx.mi,this.serializer)}Du(e){return new GL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jm.provider={build:()=>new jm};class MV extends jm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Le(this.persistence.referenceDelegate instanceof Im,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xL(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new k2(s=>Im.mi(s,n),this.serializer)}}class Gg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=IV.bind(null,this.syncEngine),await dV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mV}()}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),s=function(i){return new YL(i)}(e.databaseInfo);return function(i,o,l,c){return new XL(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,i,o,l){return new ZL(s,a,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>bE(this.syncEngine,n,0),function(){return fE.v()?new fE:new BL}())}createSyncEngine(e,n){return function(a,i,o,l,c,d,m){const p=new vV(a,i,o,l,c,d);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const i=fe(a);ee(lr,"RemoteStore shutting down."),i.Ea.add(5),await dd(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Gg.provider={build:()=>new Gg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class PV{constructor(e,n,s,a,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Wt.UNAUTHENTICATED,this.clientId=fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ee(bi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ee(bi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kx(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function hp(t,e){t.asyncQueue.verifyOperationInProgress(),ee(bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async a=>{s.isEqual(a)||(await L2(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function EE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DV(t);ee(bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>gE(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,a)=>gE(e.remoteStore,a)),t._onlineComponents=e}async function DV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(bi,"Using user provided OfflineComponentProvider");try{await hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===B.FAILED_PRECONDITION||a.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;or("Error using user provided cache. Falling back to memory cache: "+n),await hp(t,new jm)}}else ee(bi,"Using default OfflineComponentProvider"),await hp(t,new MV(void 0));return t._offlineComponents}async function eI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(bi,"Using user provided OnlineComponentProvider"),await EE(t,t._uninitializedComponentsProvider._online)):(ee(bi,"Using default OnlineComponentProvider"),await EE(t,new Gg))),t._onlineComponents}function kV(t){return eI(t).then(e=>e.syncEngine)}async function Mm(t){const e=await eI(t),n=e.eventManager;return n.onListen=yV.bind(null,e.syncEngine),n.onUnlisten=EV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NV.bind(null,e.syncEngine),n}function LV(t,e,n={}){const s=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new nv({next:g=>{m.Nu(),o.enqueueAndForget(()=>Xx(i,p));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&c&&c.source==="server"?d.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Zx(yh(l.path),m,{includeMetadataChanges:!0,qa:!0});return Qx(i,p)}(await Mm(t),t.asyncQueue,e,n,s)),s.promise}function VV(t,e,n={}){const s=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new nv({next:g=>{m.Nu(),o.enqueueAndForget(()=>Xx(i,p)),g.fromCache&&c.source==="server"?d.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Zx(l,m,{includeMetadataChanges:!0,qa:!0});return Qx(i,p)}(await Mm(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firestore.googleapis.com",CE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nI,this.ssl=CE}else this.host=e.host,this.ssl=e.ssl??CE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pL)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tI(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ih{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new qA;switch(s.type){case"firstParty":return new Y6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=NE.get(n);s&&(ee("ComponentProvider","Removing Datastore"),NE.delete(n),s.terminate())}(this),Promise.resolve()}}function sI(t,e,n,s={}){var d;t=tn(t,Ih);const a=Ho(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;a&&(Kw(`https://${l}`),Qw("Firestore",!0)),i.host!==nI&&i.host!==l&&or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:a,emulatorOptions:s};if(!fa(c,o)&&(t._setSettings(c),s.mockUserToken)){let m,p;if(typeof s.mockUserToken=="string")m=s.mockUserToken,p=Wt.MOCK_USER;else{m=t4(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Wt(g)}t._authCredentials=new q6(new BA(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zs(this.firestore,e,this._query)}}class lt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(od(n,lt._jsonSchema))return new lt(e,s||null,new se($e.fromString(n.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:St("string",lt._jsonSchemaVersion),referencePath:St("string")};class oa extends zs{constructor(e,n,s){super(e,n,yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new se(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=yt(t),HA("collection","path",e),t instanceof Ih){const s=$e.fromString(e,...n);return U_(s),new oa(t,null,s)}{if(!(t instanceof lt||t instanceof oa))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child($e.fromString(e,...n));return U_(s),new oa(t.firestore,null,s)}}function re(t,e,...n){if(t=yt(t),arguments.length===1&&(e=fh.newId()),HA("doc","path",e),t instanceof Ih){const s=$e.fromString(e,...n);return V_(s),new lt(t,null,new se(s))}{if(!(t instanceof lt||t instanceof oa))throw new X(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child($e.fromString(e,...n));return V_(s),new lt(t.firestore,t instanceof oa?t.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class wE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U2(this,"async_queue_retry"),this._c=()=>{const s=mp();s&&ee(SE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=mp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ra;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;ee(SE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,xa("INTERNAL UNHANDLED ERROR: ",AE(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Jx.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&le(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const i of s)if(i in a&&typeof a[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gs extends Ih{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new wE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wE(e),this._firestoreClient=void 0,await e}}}function aI(t,e){const n=typeof t=="object"?t:eA(),s=typeof t=="string"?t:Em,a=yx(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const i=ZD("firestore");i&&sI(a,...i)}return a}function Zo(t){if(t._terminated)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UV(t),t._firestoreClient}function UV(t){var s,a,i;const e=t._freezeSettings(),n=function(l,c,d,m){return new dk(l,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,tI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(zt.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wn(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(od(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:St("string",wn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(od(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:St("string",ds._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(od(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new us(e.vectorValues);throw new X(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:St("string",us._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=/^__.*__$/;class zV{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new ld(e,this.data,n,this.fieldTransforms)}}class iI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ai(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class Rh{constructor(e,n,s,a,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rI(this.Ac)&&OV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FV{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Sh(e)}Cc(e,n,s,a=!1){return new Rh({Ac:e,methodName:n,Dc:s,path:Ut.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function md(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new FV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sv(t,e,n,s,a,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,a);rv("Data must be an object, but it was:",o,s);const l=dI(s,o);let c,d;if(i.merge)c=new In(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Bg(e,p,n);if(!o.contains(g))throw new X(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mI(m,g)||m.push(g)}c=new In(m),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new zV(new vn(l),c,d)}class jh extends tl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function oI(t,e,n){return new Rh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class av extends tl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=oI(this,e,!0),s=this.vc.map(i=>xr(i,n)),a=new Ao(s);return new _2(e.path,a)}isEqual(e){return e instanceof av&&fa(this.vc,e.vc)}}class iv extends tl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=oI(this,e,!0),s=this.vc.map(i=>xr(i,n)),a=new Io(s);return new _2(e.path,a)}isEqual(e){return e instanceof iv&&fa(this.vc,e.vc)}}function lI(t,e,n,s){const a=t.Cc(1,e,n);rv("Data must be an object, but it was:",a,s);const i=[],o=vn.empty();wi(s,(c,d)=>{const m=ov(e,c,n);d=yt(d);const p=a.yc(m);if(d instanceof jh)i.push(m);else{const g=xr(d,p);g!=null&&(i.push(m),o.set(m,g))}});const l=new In(i);return new iI(o,l,a.fieldTransforms)}function cI(t,e,n,s,a,i){const o=t.Cc(1,e,n),l=[Bg(e,s,n)],c=[a];if(i.length%2!=0)throw new X(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Bg(e,i[g])),c.push(i[g+1]);const d=[],m=vn.empty();for(let g=l.length-1;g>=0;--g)if(!mI(d,l[g])){const x=l[g];let y=c[g];y=yt(y);const T=o.yc(x);if(y instanceof jh)d.push(x);else{const I=xr(y,T);I!=null&&(d.push(x),m.set(x,I))}}const p=new In(d);return new iI(m,p,o.fieldTransforms)}function GV(t,e,n,s=!1){return xr(n,t.Cc(s?4:3,e))}function xr(t,e){if(uI(t=yt(t)))return rv("Unsupported field value:",e,t),dI(t,e);if(t instanceof tl)return function(s,a){if(!rI(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const i=[];let o=0;for(const l of s){let c=xr(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,a){if((s=yt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Pk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Me.fromDate(s);return{timestampValue:Am(a.serializer,i)}}if(s instanceof Me){const i=new Me(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Am(a.serializer,i)}}if(s instanceof ds)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wn)return{bytesValue:w2(a.serializer,s._byteString)};if(s instanceof lt){const i=a.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ox(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof us)return function(o,l){return{mapValue:{fields:{[t2]:{stringValue:n2},[Nm]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Lx(l.serializer,d)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${ph(s)}`)}(t,e)}function dI(t,e){const n={};return KA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(t,(s,a)=>{const i=xr(a,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function uI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof ds||t instanceof wn||t instanceof lt||t instanceof tl||t instanceof us)}function rv(t,e,n){if(!uI(n)||!YA(n)){const s=ph(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Bg(t,e,n){if((e=yt(e))instanceof el)return e._internalPath;if(typeof e=="string")return ov(t,e);throw Pm("Field path arguments must be of type string or ",t,!1,void 0,n)}const BV=new RegExp("[~\\*/\\[\\]]");function ov(t,e,n){if(e.search(BV)>=0)throw Pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new el(...e.split("."))._internalPath}catch{throw Pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pm(t,e,n,s,a){const i=s&&!s.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${a}`),c+=")"),new X(B.INVALID_ARGUMENT,l+t+c)}function mI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,s,a,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qV extends hI{data(){return super.data()}}function Mh(t,e){return typeof e=="string"?ov(t,e):e instanceof el?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lv{}class Ph extends lv{}function Ye(t,e,...n){let s=[];e instanceof lv&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Dh).length,l=i.filter(c=>c instanceof hd).length;if(o>1||o>0&&l>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)t=a._apply(t);return t}class hd extends Ph{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new hd(e,n,s)}_apply(e){const n=this._parse(e);return pI(e._query,n),new zs(e.firestore,e.converter,Pg(e._query,n))}_parse(e){const n=md(e.firestore);return function(i,o,l,c,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){jE(p,m);const y=[];for(const T of p)y.push(RE(c,i,T));g={arrayValue:{values:y}}}else g=RE(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||jE(p,m),g=GV(l,o,p,m==="in"||m==="not-in");return Ct.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tt(t,e,n){const s=e,a=Mh("where",t);return hd._create(a,s,n)}class Dh extends lv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,i){let o=a;const l=i.getFlattenedFilters();for(const c of l)pI(o,c),o=Pg(o,c)}(e._query,n),new zs(e.firestore,e.converter,Pg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kh extends Ph{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kh(e,n)}_apply(e){const n=function(a,i,o){if(a.startAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kc(i,o)}(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,function(a,i){const o=a.explicitOrderBy.concat([i]);return new Xo(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function Ds(t,e="asc"){const n=e,s=Mh("orderBy",t);return kh._create(s,n)}class Lh extends Ph{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Lh(e,n,s)}_apply(e){return new zs(e.firestore,e.converter,Tm(e._query,this._limit,this._limitType))}}function ro(t){return Z6("limit",t),Lh._create("limit",t,"F")}function RE(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d2(e)&&n.indexOf("/")!==-1)throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child($e.fromString(n));if(!se.isDocumentKey(s))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $_(t,new se(s))}if(n instanceof lt)return $_(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function jE(t,e){if(!Array.isArray(t)||t.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pI(t,e){const n=function(a,i){for(const o of a)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gI{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return wi(e,(a,i)=>{s[a]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,a,i;const n=(i=(a=(s=e.fields)==null?void 0:s[Nm].arrayValue)==null?void 0:a.values)==null?void 0:i.map(o=>pt(o.doubleValue));return new us(n)}convertGeoPoint(e){return new ds(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=vh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const n=gi(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=$e.fromString(e);Le(P2(s),9688,{name:e});const a=new To(s.get(1),s.get(3)),i=new se(s.popFirst(5));return a.isEqual(n)||xa(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class $r{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ci extends hI{constructor(e,n,s,a,i,o){super(e,n,s,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Mh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:St("string",ci._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class hc extends ci{data(e={}){return super.data(e)}}class di{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new $r(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new hc(this._firestore,this._userDataWriter,s.key,s,new $r(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new hc(a._firestore,a._userDataWriter,l.doc.key,l.doc,new $r(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new hc(a._firestore,a._userDataWriter,l.doc.key,l.doc,new $r(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:HV(l.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=di._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t){t=tn(t,lt);const e=tn(t.firestore,gs);return LV(Zo(e),t._key).then(n=>vI(e,t,n))}di._jsonSchemaVersion="firestore/querySnapshot/1.0",di._jsonSchema={type:St("string",di._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class dv extends gI{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function Re(t){t=tn(t,zs);const e=tn(t.firestore,gs),n=Zo(e),s=new dv(e);return fI(t._query),VV(n,t._query).then(a=>new di(e,s,t,a))}function cr(t,e,n){t=tn(t,lt);const s=tn(t.firestore,gs),a=cv(t.converter,e,n);return nl(s,[sv(md(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,dn.none())])}function vt(t,e,n,...s){t=tn(t,lt);const a=tn(t.firestore,gs),i=md(a);let o;return o=typeof(e=yt(e))=="string"||e instanceof el?cI(i,"updateDoc",t._key,e,n,s):lI(i,"updateDoc",t._key,e),nl(a,[o.toMutation(t._key,dn.exists(!0))])}function xs(t){return nl(tn(t.firestore,gs),[new Ch(t._key,dn.none())])}function es(t,e){const n=tn(t.firestore,gs),s=re(t),a=cv(t.converter,e);return nl(n,[sv(md(t.firestore),"addDoc",s._key,a,t.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then(()=>s)}function xI(t,...e){var c,d,m;t=yt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||IE(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(IE(e[s])){const p=e[s];e[s]=(c=p.next)==null?void 0:c.bind(p),e[s+1]=(d=p.error)==null?void 0:d.bind(p),e[s+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof lt)o=tn(t.firestore,gs),l=yh(t._key.path),i={next:p=>{e[s]&&e[s](vI(o,t,p))},error:e[s+1],complete:e[s+2]};else{const p=tn(t,zs);o=tn(p.firestore,gs),l=p._query;const g=new dv(o);i={next:x=>{e[s]&&e[s](new di(o,g,p,x))},error:e[s+1],complete:e[s+2]},fI(t._query)}return function(g,x,y,T){const I=new nv(T),b=new Zx(x,I,y);return g.asyncQueue.enqueueAndForget(async()=>Qx(await Mm(g),b)),()=>{I.Nu(),g.asyncQueue.enqueueAndForget(async()=>Xx(await Mm(g),b))}}(Zo(o),l,a,i)}function nl(t,e){return function(s,a){const i=new ra;return s.asyncQueue.enqueueAndForget(async()=>CV(await kV(s),a,i)),i.promise}(Zo(t),e)}function vI(t,e,n){const s=n.docs.get(e._key),a=new dv(t);return new ci(t,a,e._key,s,new $r(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,n,s){this._verifyNotCommitted();const a=fp(e,this._firestore),i=cv(a.converter,n,s),o=sv(this._dataReader,"WriteBatch.set",a._key,i,a.converter!==null,s);return this._mutations.push(o.toMutation(a._key,dn.none())),this}update(e,n,s,...a){this._verifyNotCommitted();const i=fp(e,this._firestore);let o;return o=typeof(n=yt(n))=="string"||n instanceof el?cI(this._dataReader,"WriteBatch.update",i._key,n,s,a):lI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=fp(e,this._firestore);return this._mutations=this._mutations.concat(new Ch(n._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fp(t,e){if((t=yt(t)).firestore!==e)throw new X(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function uv(...t){return new av("arrayUnion",t)}function bI(...t){return new iv("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){return Zo(t=tn(t,gs)),new yI(t,e=>nl(t,e))}(function(e,n=!0){(function(a){Jo=a})($o),No(new sr("firestore",(s,{instanceIdentifier:a,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new gs(new H6(s.getProvider("auth-internal")),new J6(o,s.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new To(d.options.projectId,m)}(o,a),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),oi(P_,D_,e),oi(P_,D_,"esm2020")})();const $V=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:gI,Bytes:wn,CollectionReference:oa,DocumentReference:lt,DocumentSnapshot:ci,FieldPath:el,FieldValue:tl,Firestore:gs,FirestoreError:X,GeoPoint:ds,Query:zs,QueryCompositeFilterConstraint:Dh,QueryConstraint:Ph,QueryDocumentSnapshot:hc,QueryFieldFilterConstraint:hd,QueryLimitConstraint:Lh,QueryOrderByConstraint:kh,QuerySnapshot:di,SnapshotMetadata:$r,Timestamp:Me,VectorValue:us,WriteBatch:yI,_AutoId:fh,_ByteString:zt,_DatabaseId:To,_DocumentKey:se,_EmptyAuthCredentialsProvider:qA,_FieldPath:Ut,_cast:tn,_logWarn:or,_validateIsNotUsedTogether:$A,addDoc:es,arrayRemove:bI,arrayUnion:uv,collection:ue,connectFirestoreEmulator:sI,deleteDoc:xs,doc:re,ensureFirestoreConfigured:Zo,executeWrite:nl,getDoc:kn,getDocs:Re,getFirestore:aI,limit:ro,onSnapshot:xI,orderBy:Ds,query:Ye,setDoc:cr,updateDoc:vt,where:tt,writeBatch:_I},Symbol.toStringTag,{value:"Module"}));var YV="firebase",JV="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi(YV,JV,"app");const KV={apiKey:"AIzaSyC-Ry46hCfXxez-lfA5ZX792AOIbmOc6Vw",authDomain:"eduplanmx.firebaseapp.com",projectId:"eduplanmx",storageBucket:"eduplanmx.firebasestorage.app",messagingSenderId:"144677335686",appId:"1:144677335686:web:cd82543b32b323e3ea5707"},EI=Zw(KV),J=aI(EI),La=G6(EI),NI=Object.freeze(Object.defineProperty({__proto__:null,auth:La,db:J},Symbol.toStringTag,{value:"Module"})),Wd="users";class QV{async login(e){try{const n=await w3(La,e.email,e.password),s=await this.getUserData(n.user.uid);if(!s)throw new Error("Usuario no encontrado en la base de datos");if(!s.activo)throw new Error("Usuario inactivo. Contacta al administrador.");return await this.updateLastAccess(n.user.uid),s}catch(n){throw console.error("Error en login:",n),n.code==="auth/user-not-found"?new Error("Usuario no encontrado"):n.code==="auth/wrong-password"?new Error("Contrasea incorrecta"):n.code==="auth/invalid-email"?new Error("Email invlido"):n.code==="auth/user-disabled"?new Error("Usuario deshabilitado"):n}}async logout(){try{await j3(La)}catch(e){throw console.error("Error en logout:",e),new Error("Error al cerrar sesin")}}async loginWithGoogle(){var e;try{const n=new Ks;n.setCustomParameters({prompt:"select_account"});const a=(await X3(La,n)).user;let i=await this.getUserData(a.uid);if(!i){const o=((e=a.displayName)==null?void 0:e.split(" "))||["Usuario","Google"],l=o[0]||"Usuario",c=o[1]||"Google",d=o[2]||"";i={id:a.uid,email:a.email||"",nombre:l,apellidoPaterno:c,apellidoMaterno:d,rol:"maestro",activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),creadoPor:"google-auth"},await cr(re(J,Wd,a.uid),i),console.log(" Nuevo usuario creado desde Google:",i.email)}if(i.activo===!1)throw console.error(" Acceso denegado: Usuario inactivo en Firestore",i),new Error("Usuario inactivo. Contacta al administrador.");return await this.updateLastAccess(a.uid),i}catch(n){throw console.error("Error en login con Google:",n),n.code==="auth/popup-closed-by-user"?new Error("Inicio de sesin cancelado"):n.code==="auth/popup-blocked"?new Error("Popup bloqueado. Permite popups para este sitio."):n.code==="auth/cancelled-popup-request"?new Error("Inicio de sesin cancelado"):n}}async register(e,n){try{const s=await S3(La,e.email,e.password),a={id:s.user.uid,email:e.email,nombre:e.nombre,apellidoPaterno:e.apellidoPaterno,apellidoMaterno:e.apellidoMaterno,rol:e.rol,institucionId:e.institucionId,gruposAsignados:[],activo:!0,fechaCreacion:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),creadoPor:n};return await cr(re(J,Wd,s.user.uid),a),a}catch(s){throw console.error("Error en registro:",s),s.code==="auth/email-already-in-use"?new Error("El email ya est registrado"):s.code==="auth/weak-password"?new Error("La contrasea debe tener al menos 6 caracteres"):s}}async getUserData(e){try{const n=await kn(re(J,Wd,e));return n.exists()?n.data():null}catch(n){throw console.error("Error al obtener datos del usuario:",n),new Error("Error al obtener datos del usuario")}}async updateLastAccess(e){try{await vt(re(J,Wd,e),{ultimoAcceso:new Date().toISOString()})}catch(n){console.error("Error al actualizar ltimo acceso:",n)}}onAuthStateChanged(e){return R3(La,e)}getCurrentUser(){return La.currentUser}}const Mr=new QV,CI=M.createContext(void 0),XV=({children:t})=>{const[e,n]=M.useState(null),[s,a]=M.useState(!0);M.useEffect(()=>{const d=Mr.onAuthStateChanged(async m=>{if(m)try{const p=await Mr.getUserData(m.uid);if((p==null?void 0:p.rol)==="superadmin"){console.log(" SuperAdmin detectado - Saltando onboarding"),n({...p,onboardingCompleto:!0,schoolId:"system",schoolName:"Sistema Central"}),a(!1);return}const{schoolService:g}=await Eo(async()=>{const{schoolService:y}=await Promise.resolve().then(()=>MI);return{schoolService:y}},[]);if(await g.needsOnboarding(m.uid))console.log(" Usuario necesita completar onboarding"),n({...p,onboardingCompleto:!1});else{const y=await g.getUserProfile(m.uid);y?(console.log(" Usuario con onboarding completo:",y.schoolName),n({...p,schoolId:y.schoolId,schoolName:y.schoolName,puesto:y.puesto,onboardingCompleto:!0})):n({...p,onboardingCompleto:!1})}}catch(p){console.error("Error al cargar datos del usuario:",p),n(null)}else n(null);a(!1)});return()=>d()},[]);const c={user:e,loading:s,login:async(d,m)=>{a(!0);try{const p=await Mr.login({email:d,password:m});n(p)}catch(p){throw a(!1),p}},loginWithGoogle:async()=>{a(!0);try{const d=await Mr.loginWithGoogle();n(d)}catch(d){throw a(!1),d}},logout:async()=>{try{await Mr.logout(),n(null)}catch(d){throw d}},isAuthenticated:!!e};return r.jsx(CI.Provider,{value:c,children:t})},dt=()=>{const t=M.useContext(CI);if(t===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return t},Cs=({children:t,allowedRoles:e})=>{const{user:n,loading:s}=dt(),a=Os();return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando..."})]})}):n?!(n.rol==="superadmin")&&(n.onboardingCompleto===!1||!n.schoolId||!n.schoolName||!n.nombre||!n.apellidoPaterno)&&a.pathname!=="/onboarding"?(console.info(" Redirigiendo a onboarding - Completar perfil. Path actual:",a.pathname),r.jsx(rs,{to:"/onboarding",replace:!0})):e&&!e.includes(n.rol)?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center max-w-md border border-red-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-6",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Acceso Denegado"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"No tienes permisos para acceder a esta seccin."}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Tu rol: ",r.jsx("span",{className:"font-semibold text-indigo-600",children:n.rol})]}),r.jsx("button",{onClick:()=>window.history.back(),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Volver"})]})}):r.jsx(r.Fragment,{children:t}):r.jsx(rs,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZV=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),ME=t=>{const e=ZV(t);return e.charAt(0).toUpperCase()+e.slice(1)},TI=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),eU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>M.createElement("svg",{ref:c,...tU,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:TI("lucide",a),...!i&&!eU(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,m])=>M.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,e)=>{const n=M.forwardRef(({className:s,...a},i)=>M.createElement(nU,{ref:i,iconNode:e,className:TI(`lucide-${WV(ME(t))}`,`lucide-${t}`,s),...a}));return n.displayName=ME(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fd=Q("arrow-left",sU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sl=Q("arrow-right",aU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],pp=Q("award",iU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],oU=Q("book-marked",rU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],it=Q("book-open",lU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],PE=Q("book",cU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],DE=Q("bug",dU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Dm=Q("building-2",uU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vh=Q("calendar",mU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hl=Q("check",hU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kE=Q("chevron-down",fU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gU=Q("chevron-right",pU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LE=Q("chevron-up",xU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ya=Q("circle-alert",vU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Is=Q("circle-check-big",yU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Lc=Q("circle-check",bU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],SI=Q("circle-plus",_U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],km=Q("circle-x",EU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mo=Q("clock",NU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],TU=Q("copy",CU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],wU=Q("crown",SU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],VE=Q("database",AU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],RU=Q("dollar-sign",IU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uh=Q("download",jU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],PU=Q("dumbbell",MU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],qg=Q("external-link",DU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LU=Q("eye",kU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],UU=Q("file-pen-line",VU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ls=Q("file-text",OU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],FU=Q("folder-open",zU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Vc=Q("funnel",GU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],gp=Q("globe",BU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ts=Q("graduation-cap",qU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Hg=Q("heart",HU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],YU=Q("history",$U);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],wI=Q("house",JU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],QU=Q("info",KU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],AI=Q("list",XU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],al=Q("loader-circle",WU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],eO=Q("loader",ZU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$g=Q("lock",tO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],sO=Q("log-in",nO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Oh=Q("log-out",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],zh=Q("mail",iO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Fh=Q("map-pin",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],lO=Q("monitor",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],dO=Q("network",cO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],mO=Q("panels-top-left",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pd=Q("pen",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pO=Q("phone",fO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],On=Q("plus",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vO=Q("power-off",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],bO=Q("power",yO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],EO=Q("refresh-cw",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ii=Q("save",NO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],wt=Q("school",CO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fs=Q("search",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wO=Q("send",SO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mv=Q("settings",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],II=Q("shield-check",IO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gh=Q("shield",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gd=Q("sparkles",jO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],PO=Q("square-check-big",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],RI=Q("square-pen",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kn=Q("target",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ns=Q("trash-2",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],UO=Q("trending-down",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ms=Q("trending-up",OO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_i=Q("triangle-alert",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Du=Q("upload",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UE=Q("user-plus",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Po=Q("user",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ke=Q("users",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],$O=Q("video",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JO=Q("wifi-off",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Yg=Q("wifi",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],XO=Q("wrench",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ss=Q("x",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ez=Q("zap",ZO),tz=()=>{const[t,e]=M.useState(""),[n,s]=M.useState(""),[a,i]=M.useState(""),[o,l]=M.useState(!1),{login:c,loginWithGoogle:d}=dt(),m=bs(),p=async x=>{x.preventDefault(),i(""),l(!0);try{await c(t,n),m("/")}catch(y){i(y.message||"Error al iniciar sesin")}finally{l(!1)}},g=async()=>{i(""),l(!0);try{await d(),m("/")}catch(x){i(x.message||"Error al iniciar sesin con Google")}finally{l(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl mb-4",children:r.jsx(wt,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"EduPlan MX"}),r.jsx("p",{className:"text-slate-600",children:"Plataforma de Diagnstico Socioeducativo"})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-slate-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Iniciar Sesin"}),a&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(ya,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-800",children:a})]}),r.jsxs("form",{onSubmit:p,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(zh,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"email",type:"email",value:t,onChange:x=>e(x.target.value),required:!0,className:"block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"tu@email.com",disabled:o})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx($g,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"password",type:"password",value:n,onChange:x=>s(x.target.value),required:!0,className:"block w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"",disabled:o})]})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Iniciando sesin..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sO,{className:"w-5 h-5"}),"Iniciar Sesin"]})})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-slate-500",children:"O contina con"})})]}),r.jsxs("button",{onClick:g,disabled:o,className:"w-full bg-white border-2 border-slate-300 text-slate-700 py-3 px-4 rounded-xl font-semibold hover:bg-slate-50 hover:border-slate-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-3",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar con Google"]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{type:"button",className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",disabled:!0,children:"Olvidaste tu contrasea?"})})]}),r.jsx("div",{className:"mt-8 text-center text-sm text-slate-500",children:r.jsx("p",{children:" 2026 EduPlan MX - Bachillerato General Oficial"})})]})})},jI=[{materia:"Pensamiento Matemtico I",semestre:1,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO I",semestre:1,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Procedural","Procesos de intuicin y razonamiento"],metas_aprendizaje:["M1","M2"],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Discute la importancia de la toma de decisiones basada en datos y cuestiona la validez de la informacin estadstica.",tematicas:["Estadstica bsica","Toma de decisiones"]},{id:2,descripcion:"Identifica la incertidumbre como consecuencia de la variabilidad y a travs de simulaciones considera la frecuencia de eventos.",tematicas:["Incertidumbre","Variabilidad","Frecuencia"]},{id:3,descripcion:"Identifica la equiprobabilidad como hiptesis y observa la ley de los grandes nmeros.",tematicas:["Equiprobabilidad","Ley de los grandes nmeros"]},{id:4,descripcion:"Elige una tcnica de conteo (combinaciones, ordenaciones) para calcular el total de casos posibles y favorables.",tematicas:["Tcnicas de conteo","Combinatoria"]},{id:5,descripcion:"Observa cmo la probabilidad de un evento se actualiza con informacin adicional (Probabilidad condicional).",tematicas:["Probabilidad condicional"]},{id:6,descripcion:"Selecciona una problemtica para recolectar datos. Distingue variables cualitativas y cuantitativas.",tematicas:["Variables estadsticas","Recoleccin de datos"]},{id:7,descripcion:"Analiza datos categricos y cuantitativos mediante representaciones grficas (barras, pastel, puntos).",tematicas:["Grficos estadsticos"]},{id:8,descripcion:"Analiza la relacin entre dos variables categricas mediante tablas de doble entrada.",tematicas:["Tablas de contingencia"]},{id:9,descripcion:"Analiza datos cuantitativos a travs de medidas de tendencia central y dispersin.",tematicas:["Media, mediana, moda","Dispersin"]},{id:10,descripcion:"Analiza la distribucin de datos cuantitativos (forma, centro, dispersin).",tematicas:["Distribuciones de datos"]},{id:11,descripcion:"Construye e interpreta grficas de caja y bigotes (Boxplots).",tematicas:["Boxplots","Cuartiles"]},{id:12,descripcion:"Introduce el concepto de correlacin y la distingue de causalidad.",tematicas:["Correlacin vs Causalidad"]},{id:13,descripcion:"Analiza la asociacin entre variables cuantitativas (regresin lineal simple).",tematicas:["Regresin lineal"]},{id:14,descripcion:"Analiza la asociacin entre dos variables cuantitativas a travs del coeficiente de correlacin de Pearson.",tematicas:["Coeficiente de Pearson"]},{id:15,descripcion:"Valora la importancia de la Probabilidad y Estadstica en la construccin de conocimiento.",tematicas:["Aplicaciones estadsticas"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.720Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lengua y Comunicacin I",semestre:1,metadata:{nombre_uac:"LENGUA Y COMUNICACIN I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende por qu es importante saber resumir y relatar, e identifica la diferencia entre ambos.",tematicas:["Resumen y Relato"]},{id:2,descripcion:"Identifica los tipos de fuentes de informacin y la validez de los contenidos.",tematicas:["Fuentes de informacin"]},{id:3,descripcion:"Distingue la lengua oral de la lengua escrita y los usos en diferentes contextos.",tematicas:["Oralidad vs Escritura"]},{id:4,descripcion:"Comprende y aplica las reglas de acentuacin, puntuacin y uso de grafas.",tematicas:["Ortografa","Puntuacin"]},{id:5,descripcion:"Realiza la composicin de resmenes y relatos simples a partir de diversas fuentes.",tematicas:["Composicin de textos"]},{id:6,descripcion:"Identifica y aplica las etapas del proceso de lectura: prelectura, lectura y poslectura.",tematicas:["Proceso de lectura"]},{id:7,descripcion:"Analiza un relato para identificar los elementos narrativos bsicos.",tematicas:["Narrativa","Personajes","Trama"]},{id:8,descripcion:"Distingue las ideas principales de las secundarias en un texto.",tematicas:["Comprensin lectora"]},{id:9,descripcion:"Identifica las caractersticas del resumen y su utilidad acadmica.",tematicas:["El Resumen"]},{id:10,descripcion:"Identifica las caractersticas del relato y su funcin social.",tematicas:["El Relato"]},{id:11,descripcion:"Reconoce la estructura de los textos informativos bsicos.",tematicas:["Textos informativos"]},{id:12,descripcion:"Utiliza organizadores grficos para procesar informacin.",tematicas:["Mapas mentales","Cuadros sinpticos"]},{id:13,descripcion:"Expone de manera oral un resumen o relato ante una audiencia.",tematicas:["Expresin oral"]},{id:14,descripcion:"Revisa y corrige sus textos (propiedades de la redaccin: adecuacin, coherencia y cohesin).",tematicas:["Correccin de textos"]},{id:15,descripcion:"Utiliza herramientas digitales para la elaboracin de textos sencillos.",tematicas:["Herramientas digitales"]},{id:16,descripcion:"Reflexiona sobre la importancia de la lengua para la interaccin social.",tematicas:["Reflexin lingstica"]}],organizador_curricular:{propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."],categorias:["Comunicacin","Pensamiento Crtico"],metas_aprendizaje:["Hablar","Escuchar","Leer","Escribir"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Cultura Digital I",semestre:1,metadata:{nombre_uac:"CULTURA DIGITAL I",semestre:1,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Identifica y aplica la normatividad que regula el ciberespacio y servicios digitales; cuida su salud digital y el medio ambiente.",tematicas:["Ciudadana Digital","Ciberseguridad","Salud digital"]},{id:2,descripcion:"Reconoce su identidad como ciudadano en el ciberespacio con derechos y obligaciones.",tematicas:["Identidad digital","Derechos digitales"]},{id:3,descripcion:"Conoce y utiliza herramientas de productividad: procesadores de texto.",tematicas:["Procesadores de texto"]},{id:4,descripcion:"Conoce y utiliza herramientas de productividad: hojas de clculo.",tematicas:["Hojas de clculo","Excel bsico"]},{id:5,descripcion:"Conoce y utiliza herramientas de productividad: presentaciones electrnicas.",tematicas:["Presentaciones","PowerPoint/Canva"]},{id:6,descripcion:"Identifica y aplica estrategias de bsqueda de informacin confiable en internet.",tematicas:["Bsqueda de informacin","Fuentes confiables"]},{id:7,descripcion:"Utiliza herramientas digitales para la comunicacin y colaboracin en lnea.",tematicas:["Correo electrnico","Nube","Colaboracin"]},{id:8,descripcion:"Comprende los conceptos bsicos de algoritmos y pensamiento computacional.",tematicas:["Algoritmos","Lgica computacional"]},{id:9,descripcion:"Utiliza el pensamiento computacional para la resolucin de problemas cotidianos.",tematicas:["Resolucin de problemas","Diagramas de flujo"]}],organizador_curricular:{propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."],categorias:["Ciudadana Digital","Pensamiento Computacional"],metas_aprendizaje:["Uso tico de TIC","Programacin bsica"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"La Materia y sus Interacciones",semestre:1,metadata:{nombre_uac:"LA MATERIA Y SUS INTERACCIONES",semestre:1,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"La materia es todo lo que ocupa un lugar en el espacio y tiene masa. Todas las sustancias estn formadas por tomos.",tematicas:["Concepto de materia","tomos","Modelos atmicos"]},{id:2,descripcion:"Las molculas estn formadas por tomos unidos por enlaces qumicos.",tematicas:["Molculas","Enlaces qumicos (Inico, Covalente)"]},{id:3,descripcion:"Identifica que la temperatura es una medida de la energa cintica promedio de las partculas.",tematicas:["Temperatura","Energa cintica"]},{id:4,descripcion:"Utiliza la teora cintico-molecular para explicar los estados de agregacin.",tematicas:["Estados de la materia","Cambios de estado"]},{id:5,descripcion:"Comprende que en una reaccin qumica la masa se conserva (Ley de Lavoisier).",tematicas:["Reacciones qumicas","Conservacin de la materia"]},{id:6,descripcion:"Distingue entre sistemas abiertos, cerrados y aislados.",tematicas:["Sistemas termodinmicos"]},{id:7,descripcion:"Identifica las propiedades extensivas e intensivas de la materia.",tematicas:["Propiedades de la materia"]},{id:8,descripcion:"Clasifica las sustancias en elementos, compuestos y mezclas.",tematicas:["Clasificacin de la materia","Tabla peridica"]},{id:9,descripcion:"Examina cmo la estructura de los materiales determina sus propiedades y usos.",tematicas:["Materiales","Estructura-Propiedad"]},{id:10,descripcion:"Analiza la energa involucrada en las reacciones qumicas (endotrmicas y exotrmicas).",tematicas:["Energa en reacciones","Entalpa"]},{id:11,descripcion:"Comprende el concepto de rapidez de reaccin y los factores que la afectan.",tematicas:["Cintica qumica"]},{id:12,descripcion:"Utiliza el concepto de mol para cuantificar la materia.",tematicas:["El Mol","Estequiometra bsica"]},{id:13,descripcion:"Analiza la importancia de los recursos naturales y su transformacin sinttica.",tematicas:["Recursos naturales","Materiales sintticos"]},{id:14,descripcion:"Reflexiona sobre el impacto ambiental de los procesos qumicos y el desarrollo sostenible.",tematicas:["Qumica verde","Impacto ambiental"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La Materia y sus Interacciones bajo el marco del MCCEMS 2025."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Humanidades I",semestre:1,metadata:{nombre_uac:"HUMANIDADES I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Explora a partir de la pregunta 'Por qu estoy aqu?' para acercarse a los saberes, recursos y prcticas filosficas.",tematicas:["Asombro filosfico","El cuestionamiento"]},{id:2,descripcion:"Reconoce la experiencia de s misma/o analizando discursos clsicos y contemporneos.",tematicas:["Conocimiento de s mismo"]},{id:3,descripcion:"Pone en cuestin la manera en que los otros dan sentido a su realidad.",tematicas:["Alteridad","El Otro"]},{id:4,descripcion:"Cuestiona cmo sus pasiones y virtudes configuran su propia experiencia.",tematicas:["Pasiones","Virtudes","tica"]},{id:5,descripcion:"Reflexiona sobre la vida buena y la felicidad desde diversas perspectivas.",tematicas:["Eudaimona","Felicidad","Vida buena"]},{id:6,descripcion:"Analiza la relacin entre el placer y la vida buena.",tematicas:["Hedonismo","Placer vs Felicidad"]},{id:7,descripcion:"Examina la validez de los argumentos y las falacias en discursos cotidianos.",tematicas:["Lgica","Argumentacin","Falacias"]},{id:8,descripcion:"Identifica los fines de la argumentacin en diferentes contextos.",tematicas:["Debate","Persuasin"]},{id:9,descripcion:"Reflexiona sobre la libertad y la responsabilidad.",tematicas:["Libertad","Determinismo","Responsabilidad"]},{id:10,descripcion:"Comprende el sentido de la vida desde una perspectiva humanista.",tematicas:["Sentido de la vida","Existencialismo"]}],organizador_curricular:{propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ciencias Sociales I",semestre:1,metadata:{nombre_uac:"CIENCIAS SOCIALES I",semestre:1,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Reconoce sus necesidades materiales (vitales y no vitales) personales, familiares y de su comunidad para comprender y explicar la forma en que se satisfacen.",tematicas:["Necesidades humanas","Satisfactores"]},{id:2,descripcion:"Identifica los procesos de produccin y distribucin vigentes en su comunidad.",tematicas:["Produccin","Distribucin","Economa local"]},{id:3,descripcion:"Distingue las caractersticas de las formas de produccin: esclavismo, feudalismo, capitalismo y socialismo.",tematicas:["Modos de produccin","Historia econmica"]},{id:4,descripcion:"Define qu es el Estado y comprende su funcin en la sociedad.",tematicas:["El Estado","Gobierno","Instituciones"]},{id:5,descripcion:"Analiza la relacin entre el ciudadano y el Estado: derechos y obligaciones.",tematicas:["Ciudadana","Contrato social"]},{id:6,descripcion:"Identifica las estructuras sociales: familia, escuela, comunidad.",tematicas:["Estructura social","Instituciones sociales"]},{id:7,descripcion:"Comprende el concepto de desigualdad social y sus manifestaciones.",tematicas:["Desigualdad","Pobreza","Clases sociales"]},{id:8,descripcion:"Analiza el papel de las normas sociales y jurdicas en la convivencia.",tematicas:["Normas","Leyes","Derecho"]},{id:9,descripcion:"Reflexiona sobre la diversidad cultural y la identidad.",tematicas:["Cultura","Diversidad","Identidad"]},{id:10,descripcion:"Identifica problemas sociales contemporneos en su entorno.",tematicas:["Problemas sociales","Comunidad"]},{id:11,descripcion:"Comprende la importancia de la participacin ciudadana.",tematicas:["Participacin","Democracia"]},{id:12,descripcion:"Analiza la relacin entre bienestar y organizacin social.",tematicas:["Bienestar social","Organizacin"]}],organizador_curricular:{propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."],categorias:["Conciencia Social","Historia"],metas_aprendizaje:["Interpretacin histrica","Participacin ciudadana"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingls I",semestre:1,metadata:{nombre_uac:"LENGUA EXTRANJERA INGLS I",semestre:1,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende y utiliza el verbo 'to be' en presente simple para dar y pedir informacin personal.",tematicas:["Verb to be","Personal information"]},{id:2,descripcion:"Utiliza los pronombres personales y adjetivos posesivos.",tematicas:["Subject pronouns","Possessive adjectives"]},{id:3,descripcion:"Describe su entorno inmediato utilizando vocabulario bsico y preposiciones de lugar.",tematicas:["Prepositions of place","Classroom objects"]},{id:4,descripcion:"Expresa la existencia de objetos y personas singulares y plurales (There is/There are).",tematicas:["There is / There are","Plurals"]},{id:5,descripcion:"Utiliza los artculos definidos e indefinidos (a/an/the) correctamente.",tematicas:["Articles"]},{id:6,descripcion:"Describe caractersticas fsicas y de personalidad usando adjetivos calificativos.",tematicas:["Adjectives","Physical description"]},{id:7,descripcion:"Utiliza los adjetivos demostrativos (this/that/these/those).",tematicas:["Demonstratives"]},{id:8,descripcion:"Expresa posesin utilizando el genitivo sajn ('s) y adjetivos posesivos.",tematicas:["Possessive 's"]},{id:9,descripcion:"Formula preguntas simples con Wh- questions.",tematicas:["Wh- questions"]},{id:10,descripcion:"Comprende y utiliza el Presente Simple para hablar de hechos generales.",tematicas:["Simple Present (affirmative)"]},{id:11,descripcion:"Utiliza el Presente Simple en formas negativa e interrogativa.",tematicas:["Simple Present (negative/interrogative)"]},{id:12,descripcion:"Expresa gustos y preferencias (like/love/hate).",tematicas:["Likes and dislikes"]},{id:13,descripcion:"Habla sobre la familia y relaciones de parentesco.",tematicas:["Family members"]},{id:14,descripcion:"Describe ocupaciones y profesiones.",tematicas:["Occupations"]},{id:15,descripcion:"Identifica y utiliza nmeros cardinales y ordinales.",tematicas:["Numbers","Dates"]},{id:16,descripcion:"Comprende textos breves y sencillos sobre temas familiares.",tematicas:["Reading comprehension"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls I bajo el marco del MCCEMS 2025."],categorias:["Comunicacin Extranjera","Interculturalidad"],metas_aprendizaje:["Listening","Reading","Speaking","Writing"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico II",semestre:2,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO II",semestre:2,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"Compara cualitativamente dos o ms eventos para determinar cul es ms probable o si son equiprobables.",tematicas:["Probabilidad intuitiva"]},{id:2,descripcion:"Calcula la probabilidad terica de eventos simples en experimentos aleatorios.",tematicas:["Probabilidad clsica"]},{id:3,descripcion:"Distingue entre eventos mutuamente excluyentes y no excluyentes, y calcula sus probabilidades.",tematicas:["Eventos excluyentes","Regla de la suma"]},{id:4,descripcion:"Distingue entre eventos independientes y dependientes, y utiliza la regla del producto.",tematicas:["Independencia","Regla del producto"]},{id:5,descripcion:"Utiliza el lenguaje algebraico para representar patrones y relaciones.",tematicas:["Lenguaje algebraico"]},{id:6,descripcion:"Opera con expresiones algebraicas (suma, resta, multiplicacin).",tematicas:["Operaciones algebraicas"]},{id:7,descripcion:"Resuelve ecuaciones lineales de una variable y las interpreta grficamente.",tematicas:["Ecuaciones lineales"]},{id:8,descripcion:"Resuelve sistemas de dos ecuaciones lineales con dos variables.",tematicas:["Sistemas de ecuaciones 2x2"]},{id:9,descripcion:"Resuelve ecuaciones cuadrticas completas e incompletas por diversos mtodos.",tematicas:["Ecuaciones cuadrticas"]},{id:10,descripcion:"Identifica y analiza las caractersticas de figuras geomtricas (polgonos).",tematicas:["Polgonos"]},{id:11,descripcion:"Calcula permetros y reas de figuras compuestas.",tematicas:["reas y permetros"]},{id:12,descripcion:"Aplica el Teorema de Tales y la semejanza de tringulos.",tematicas:["Semejanza","Teorema de Tales"]},{id:13,descripcion:"Aplica el Teorema de Pitgoras en la resolucin de problemas.",tematicas:["Teorema de Pitgoras"]},{id:14,descripcion:"Utiliza las razones trigonomtricas (seno, coseno, tangente) en tringulos rectngulos.",tematicas:["Trigonometra bsica"]}],organizador_curricular:{propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."],categorias:["Pensamiento Lgico","Modelacin"],metas_aprendizaje:["Resolucin de problemas","Pensamiento algortmico"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lengua y Comunicacin II",semestre:2,metadata:{nombre_uac:"LENGUA Y COMUNICACIN II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Comprende qu es el ensayo, sus caractersticas, estructura y tipos.",tematicas:["El Ensayo"]},{id:2,descripcion:"Distingue entre opinin, postura y argumento.",tematicas:["Argumentacin"]},{id:3,descripcion:"Identifica las premisas y conclusiones en un argumento.",tematicas:["Estructura del argumento"]},{id:4,descripcion:"Analiza textos argumentativos e identifica su tesis.",tematicas:["Lectura argumentativa"]},{id:5,descripcion:"Utiliza los diferentes tipos de argumentos (autoridad, datos, ejemplos).",tematicas:["Tipos de argumentos"]},{id:6,descripcion:"Comprende y evita el uso de falacias en su argumentacin.",tematicas:["Falacias argumentativas"]},{id:7,descripcion:"Redacta un ensayo breve sobre un tema de inters.",tematicas:["Escritura de ensayo"]},{id:8,descripcion:"Utiliza citas textuales y referencias bibliogrficas (APA) para fundamentar sus ideas.",tematicas:["Citas y Referencias","APA"]},{id:9,descripcion:"Realiza exposiciones orales argumentativas.",tematicas:["Exposicin oral"]},{id:10,descripcion:"Participa en debates respetando las reglas de intervencin y escucha activa.",tematicas:["Debate"]},{id:11,descripcion:"Analiza discursos pblicos para evaluar su efectividad persuasiva.",tematicas:["Anlisis del discurso"]},{id:12,descripcion:"Utiliza medios digitales para difundir sus textos argumentativos.",tematicas:["Medios digitales"]},{id:13,descripcion:"Reflexiona sobre la tica en la comunicacin y la argumentacin.",tematicas:["tica comunicativa"]}],organizador_curricular:{propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."],categorias:["Comunicacin","Pensamiento Crtico"],metas_aprendizaje:["Hablar","Escuchar","Leer","Escribir"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conservacin de la Energa",semestre:2,metadata:{nombre_uac:"CONSERVACIN DE LA ENERGA Y SUS INTERACCIONES CON LA MATERIA",semestre:2,creditos:8,horas_semanales:4},progresiones:[{id:1,descripcion:"La energa se conserva, no se crea ni se destruye, solo se transforma.",tematicas:["Ley de conservacin de la energa"]},{id:2,descripcion:"Identifica diversas formas de energa (cintica, potencial, trmica, elctrica).",tematicas:["Formas de energa"]},{id:3,descripcion:"Calcula la energa cintica y potencial en sistemas mecnicos.",tematicas:["Energa Mecnica"]},{id:4,descripcion:"Comprende el concepto de trabajo mecnico y su relacin con la energa.",tematicas:["Trabajo y Potencia"]},{id:5,descripcion:"Analiza la transferencia de calor y el equilibrio trmico.",tematicas:["Calor y Temperatura"]},{id:6,descripcion:"Explica el funcionamiento de mquinas trmicas simples.",tematicas:["Mquinas trmicas"]},{id:7,descripcion:"Analiza fenmenos elctricos y magnticos.",tematicas:["Electricidad y Magnetismo"]},{id:8,descripcion:"Comprende los circuitos elctricos bsicos (serie y paralelo).",tematicas:["Circuitos elctricos"]},{id:9,descripcion:"Analiza la generacin y consumo de energa elctrica.",tematicas:["Generacin de energa"]},{id:10,descripcion:"Evala fuentes de energa renovables y no renovables.",tematicas:["Fuentes de energa","Sustentabilidad"]},{id:11,descripcion:"Reflexiona sobre la eficiencia energtica y el ahorro de energa.",tematicas:["Eficiencia energtica"]},{id:12,descripcion:"Analiza el impacto social y ambiental del uso de la energa.",tematicas:["Impacto ambiental"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conservacin de la Energa bajo el marco del MCCEMS 2025."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Cultura Digital II",semestre:2,metadata:{nombre_uac:"CULTURA DIGITAL II - Aprendizaje individual y colaborativo",semestre:2,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Herramientas digitales innovadoras","TICCAD para investigacin","Investigacin digital","Software estadstico","Pginas web"],metas_aprendizaje:["Interacte con las TICCAD para potenciar su aprendizaje autnomo y colaborativo, de una forma creativa e innovadora, de acuerdo con las caractersticas y necesidades de su contexto."],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Utiliza herramientas digitales de una manera innovadora y eficiente para acceder al conocimiento y la experiencia de aprendizaje de las diferentes asignaturas.",metas:["Trabajo colaborativo digital","Herramientas de trabajo colaborativo digital libre (Cryptpad, Riseup pad, entre otras)"],tematicas:["Trabajo colaborativo digital","Cryptpad","Riseup pad","Herramientas colaborativas de libre acceso"]},{id:2,descripcion:"Utiliza las TICCAD para interactuar y comunicarse con equipos colaborativos de trabajo, e investigar, buscar, discriminar y gestionar informacin de una situacin, fenmeno o problemtica personal, social o ambiental.",metas:["Tecnologas de Informacin, Comunicacin, Conocimiento y Aprendizajes Digitales de libre acceso (Cryptpad, Riseup pad, entre otras)"],tematicas:["TICCAD","Investigacin digital","Gestin de informacin","Trabajo colaborativo","Problemticas sociales y ambientales"]},{id:3,descripcion:"Aplica tcnicas y mtodos de investigacin digital para buscar, recopilar, extraer, organizar y difundir informacin de una situacin, fenmeno o problemtica personal, social o ambiental.",metas:["Tcnicas y mtodos de investigacin digital (Ciberetnografa, anlisis en lnea de contenido, grupo focal, entrevista, observacin, entre otros)"],tematicas:["Ciberetnografa","Anlisis de contenido en lnea","Grupo focal virtual","Entrevista digital","Observacin en lnea","Mtodos de investigacin digital"]},{id:4,descripcion:"Procesa datos relacionados con una situacin, fenmeno o problemtica de ndole personal, social o ambiental, utilizando herramientas de software que permitan calcular medidas de tendencia central y dispersin, as como generar representaciones grficas que contribuyan a su anlisis.",metas:["Licencias permisivas (Cryptpad, Riseup pad, Libre office, entre otras)","Software estadstico libre (Jamovi, XLSTAT Free, JASP, entre otros)"],tematicas:["Software estadstico libre","Jamovi","XLSTAT Free","JASP","Anlisis de datos","Medidas de tendencia central","Dispersin","Grficas estadsticas","Licencias permisivas","LibreOffice"]},{id:5,descripcion:"Utiliza las pginas web para ayudar a difundir informacin sobre una situacin, fenmeno o problemtica personal, social o ambiental relacionada con otras asignaturas.",metas:["Pginas web (que impliquen un diseo simple, por ejemplo: Wordpress, Blogspot, entre otras)"],tematicas:["Creacin de pginas web","WordPress","Blogspot","Difusin de informacin","Diseo web simple","Proyectos interdisciplinarios"]}],url_fuente:"https://www.dgb.sep.gob.mx/informacion-academica/programas-de-estudio/cultura-digital-ii.pdf",fecha_extraccion:"2026-01-29",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ciencias Sociales II",semestre:2,metadata:{nombre_uac:"CIENCIAS SOCIALES II",semestre:2,creditos:4,horas_semanales:2},progresiones:[{id:1,descripcion:"Analiza las caractersticas del sistema econmico actual y su impacto local.",tematicas:["Economa actual","Globalizacin"]},{id:2,descripcion:"Identifica los agentes econmicos: familia, empresas y Estado.",tematicas:["Agentes econmicos"]},{id:3,descripcion:"Comprende el funcionamiento del mercado: oferta y demanda.",tematicas:["Mercado","Oferta y Demanda"]},{id:4,descripcion:"Analiza el papel del dinero y el sistema financiero.",tematicas:["Dinero","Bancos"]},{id:5,descripcion:"Reflexiona sobre el trabajo, el empleo y el salario.",tematicas:["Mercado laboral"]},{id:6,descripcion:"Identifica las funciones de la administracin pblica.",tematicas:["Administracin pblica"]},{id:7,descripcion:"Analiza polticas pblicas que atienden problemas sociales.",tematicas:["Polticas pblicas"]},{id:8,descripcion:"Comprende la estructura poltica del sistema mexicano.",tematicas:["Sistema poltico mexicano"]},{id:9,descripcion:"Reflexiona sobre la participacin democrtica y electoral.",tematicas:["Democracia","Elecciones"]},{id:10,descripcion:"Analiza los movimientos sociales y su impacto en el cambio social.",tematicas:["Movimientos sociales"]}],organizador_curricular:{propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."],categorias:["Conciencia Social","Historia"],metas_aprendizaje:["Interpretacin histrica","Participacin ciudadana"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Humanidades II",semestre:2,metadata:{nombre_uac:"HUMANIDADES II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Examina la experiencia de lo colectivo y la comunidad.",tematicas:["Comunidad","Colectividad"]},{id:2,descripcion:"Analiza las formas de organizacin poltica y social.",tematicas:["Poltica","Sociedad"]},{id:3,descripcion:"Reflexiona sobre la justicia y las leyes.",tematicas:["Justicia","Legalidad"]},{id:4,descripcion:"Cuestiona las relaciones de poder en la sociedad.",tematicas:["Poder","Autoridad"]},{id:5,descripcion:"Analiza la relacin entre el individuo y el Estado.",tematicas:["Ciudadano y Estado"]},{id:6,descripcion:"Explora conceptos de utopa y distopa social.",tematicas:["Utopa","Futuro social"]},{id:7,descripcion:"Reflexiona sobre la guerra, la paz y la violencia.",tematicas:["Paz y Violencia"]},{id:8,descripcion:"Analiza el impacto de la tecnologa en la humanidad.",tematicas:["Tecnologa y Humanismo"]},{id:9,descripcion:"Reflexiona sobre el arte y la esttica como formas de expresin humana.",tematicas:["Arte","Esttica"]}],organizador_curricular:{propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."],categorias:["Formacin Fundamental"],metas_aprendizaje:["Logro de aprendizajes clave"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingls II",semestre:2,metadata:{nombre_uac:"LENGUA EXTRANJERA INGLS II",semestre:2,creditos:6,horas_semanales:3},progresiones:[{id:1,descripcion:"Describe acciones que estn sucediendo en el momento (Present Continuous).",tematicas:["Present Continuous"]},{id:2,descripcion:"Compara el uso del Presente Simple con el Presente Continuo.",tematicas:["Simple Present vs Continuous"]},{id:3,descripcion:"Expresa habilidades y posibilidades (Can/Can't).",tematicas:["Modal verb Can"]},{id:4,descripcion:"Habla sobre eventos pasados usando el verbo To Be en pasado (Was/Were).",tematicas:["Past of To Be"]},{id:5,descripcion:"Describe eventos terminados en el pasado usando verbos regulares e irregulares (Simple Past).",tematicas:["Simple Past (Regular/Irregular)"]},{id:6,descripcion:"Utiliza expresiones de tiempo pasado (yesterday, last week, ago).",tematicas:["Time expressions"]},{id:7,descripcion:"Formula preguntas en pasado simple (Did).",tematicas:["Questions in Past"]},{id:8,descripcion:"Utiliza sustantivos contables e incontables y cuantificadores (some, any, much, many).",tematicas:["Countable/Uncountable","Quantifiers"]},{id:9,descripcion:"Expresa planes futuros e intenciones (Going to).",tematicas:["Future with Going to"]},{id:10,descripcion:"Comprende y da instrucciones sencillas (Imperatives).",tematicas:["Imperatives","Directions"]}],organizador_curricular:{propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls II bajo el marco del MCCEMS 2025."],categorias:["Comunicacin Extranjera","Interculturalidad"],metas_aprendizaje:["Listening","Reading","Speaking","Writing"]},orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Laboratorio de Investigacin",semestre:1,metadata:{nombre_uac:"LABORATORIO DE INVESTIGACIN",semestre:1,creditos:3,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Metodologa"],metas_aprendizaje:["Desarrolla habilidades de investigacin"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Laboratorio de Investigacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la investigacin cientfica y social para el desarrollo del conocimiento.",tematicas:["Importancia de la investigacin"]},{id:2,descripcion:"Identifica los tipos de investigacin (documental, de campo, experimental) y sus caractersticas.",tematicas:["Tipos de investigacin"]},{id:3,descripcion:"Plantea un problema de investigacin delimitando su alcance y objetivos.",tematicas:["Planteamiento del problema"]},{id:4,descripcion:"Elabora hiptesis y variables para su comprobacin.",tematicas:["Hiptesis","Variables"]},{id:5,descripcion:"Selecciona tcnicas e instrumentos para la recoleccin de datos.",tematicas:["Recoleccin de datos"]},{id:6,descripcion:"Analiza e interpreta los resultados obtenidos en una investigacin.",tematicas:["Anlisis de resultados"]},{id:7,descripcion:"Elabora un reporte de investigacin siguiendo una estructura formal.",tematicas:["Reporte de investigacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T16:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Taller de Ciencias I",semestre:2,metadata:{nombre_uac:"TALLER DE CIENCIAS I",semestre:2,creditos:3,horas_semanales:3},organizador_curricular:{categorias:["Ciencias Experimentales"],metas_aprendizaje:["Aplica el mtodo cientfico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Aplica el mtodo cientfico experimental para validar hiptesis.",tematicas:["Mtodo cientfico"]},{id:2,descripcion:"Reconoce las normas de seguridad y el manejo de material de laboratorio.",tematicas:["Seguridad en laboratorio"]},{id:3,descripcion:"Realiza mediciones precisas utilizando instrumentos de laboratorio.",tematicas:["Medicin","Instrumentos"]},{id:4,descripcion:"Disea experimentos sencillos para probar relaciones causa-efecto.",tematicas:["Diseo experimental"]},{id:5,descripcion:"Registra y analiza datos experimentales utilizando tablas y grficas.",tematicas:["Anlisis de datos"]},{id:6,descripcion:"Elabora informes de laboratorio comunicando resultados y conclusiones.",tematicas:["Informe de laboratorio"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T16:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Pensamiento Matemtico III",semestre:3,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO III",semestre:3,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Nmero, lgebra y variacin","Forma, espacio y medida","Anlisis de datos"],metas_aprendizaje:["Resolver problemas","Modelar matemticamente","Argumentar soluciones"],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Aplica el razonamiento lgico-matemtico en la solucin de problemas cotidianos",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Nmeros reales y operaciones","Jerarqua de operaciones","Razones y proporciones","Porcentajes en la vida diaria"]},{id:2,descripcion:"Utiliza el lenguaje algebraico para representar y generalizar situaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Expresiones algebraicas","Leyes de exponentes","Polinomios basicos","Factorizacin"]},{id:3,descripcion:"Analiza las propiedades de las figuras geomtricas y sus relaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["ngulos y tringulos","Teorema de Pitgoras","Polgonos regulares","Clculo de reas y permetros"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761601",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Lengua y Comunicacin III",semestre:3,metadata:{nombre_uac:"LENGUA Y COMUNICACIN III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Atender y entender","La exploracin del mundo a travs de la lectura","La expresin verbal, visual y grfica"],metas_aprendizaje:["Comunicarse asertivamente","Leer crticamente","Escribir con coherencia"],propositos_formativos:["El estudiante sea capaz de utilizar la lengua como herramienta de pensamiento para ampliar sus conocimientos y habilidades de expresin.","Desarrollar habilidades comunicativas (hablar, escuchar, leer y escribir) en contextos diversos para una participacin ciudadana activa."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la comunicacin asertiva en diversos contextos",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Proceso comunicativo","Intencin comunicativa","Funciones del lenguaje","Barreras de comunicacin"]},{id:2,descripcion:"Analiza textos de diversa ndole identificando ideas principales y secundarias",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Tipos de texto","Estrategias de lectura","Resumen y sntesis","Organizadores grficos"]},{id:3,descripcion:"Produce textos escritos con estructura lgica y correccin gramatical",metas:["Meta: Comunicarse asertivamente","Meta: Leer crticamente","Meta: Escribir con coherencia"],tematicas:["Proceso de escritura","Ortografa y puntuacin","Coherencia y cohesin","Tipologa textual"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761604",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ingls III",semestre:3,metadata:{nombre_uac:"INGLS III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Listening","Speaking","Reading","Writing"],metas_aprendizaje:["Comprensin auditiva","Expresin oral","Comprensin lectora"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende y utiliza expresiones cotidianas de uso muy frecuente",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Saludos y despedidas","Informacin personal","Verbo to be","Presente simple"]},{id:2,descripcion:"Describe situaciones personales, rutinas y hbitos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Rutinas diarias","Adverbios de frecuencia","Gustos y disgustos","Descripciones fsicas"]},{id:3,descripcion:"Interacta en situaciones sencillas sobre temas conocidos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Presente continuo","Futuro simple (will/going to)","Pasado simple","Vocabulario temtico"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761607",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ecosistemas: interacciones, energa y dinmica",semestre:3,metadata:{nombre_uac:"ECOSISTEMAS: INTERACCIONES, ENERGA Y DINMICA",semestre:3,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ecosistemas: interacciones, energa y dinmica bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761610",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ciencias Sociales III",semestre:3,metadata:{nombre_uac:"CIENCIAS SOCIALES III",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["El bienestar y la satisfaccin de las necesidades","La organizacin de la sociedad","Las normas sociales y jurdicas"],metas_aprendizaje:["Anlisis social","Pensamiento crtico","Conciencia histrica"],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Analiza procesos sociales y su impacto en la comunidad",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Individuo y sociedad","Procesos de socializacin","Estratificacin social","Problemas sociales contemporneos"]},{id:2,descripcion:"Comprende las estructuras econmicas y polticas",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Modos de produccin","Sectores econmicos","Formas de gobierno","Democracia y participacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761613",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Humanidades III",semestre:3,metadata:{nombre_uac:"HUMANIDADES III",semestre:3,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761615",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica I",semestre:3,metadata:{nombre_uac:"CONCIENCIA HISTRICA I",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761617",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Ingls IV",semestre:4,metadata:{nombre_uac:"INGLS IV",semestre:4,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Listening","Speaking","Reading","Writing"],metas_aprendizaje:["Comprensin auditiva","Expresin oral","Comprensin lectora"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingls IV bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende y utiliza expresiones cotidianas de uso muy frecuente",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Saludos y despedidas","Informacin personal","Verbo to be","Presente simple"]},{id:2,descripcion:"Describe situaciones personales, rutinas y hbitos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Rutinas diarias","Adverbios de frecuencia","Gustos y disgustos","Descripciones fsicas"]},{id:3,descripcion:"Interacta en situaciones sencillas sobre temas conocidos",metas:["Meta: Comprensin auditiva","Meta: Expresin oral","Meta: Comprensin lectora"],tematicas:["Presente continuo","Futuro simple (will/going to)","Pasado simple","Vocabulario temtico"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761620",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Reacciones Qumicas",semestre:4,metadata:{nombre_uac:"REACCIONES QUMICAS",semestre:4,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Reacciones Qumicas bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761622",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Matemticas IV (Propedutico)",semestre:4,metadata:{nombre_uac:"MATEMTICAS IV (PROPEDUTICO)",semestre:4,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Nmero, lgebra y variacin","Forma, espacio y medida","Anlisis de datos"],metas_aprendizaje:["Resolver problemas","Modelar matemticamente","Argumentar soluciones"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Matemticas IV (Propedutico) bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Aplica el razonamiento lgico-matemtico en la solucin de problemas cotidianos",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Nmeros reales y operaciones","Jerarqua de operaciones","Razones y proporciones","Porcentajes en la vida diaria"]},{id:2,descripcion:"Utiliza el lenguaje algebraico para representar y generalizar situaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["Expresiones algebraicas","Leyes de exponentes","Polinomios basicos","Factorizacin"]},{id:3,descripcion:"Analiza las propiedades de las figuras geomtricas y sus relaciones",metas:["Meta: Resolver problemas","Meta: Modelar matemticamente","Meta: Argumentar soluciones"],tematicas:["ngulos y tringulos","Teorema de Pitgoras","Polgonos regulares","Clculo de reas y permetros"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761625",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Temas de Ciencias Sociales",semestre:4,metadata:{nombre_uac:"TEMAS DE CIENCIAS SOCIALES",semestre:4,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["El bienestar y la satisfaccin de las necesidades","La organizacin de la sociedad","Las normas sociales y jurdicas"],metas_aprendizaje:["Anlisis social","Pensamiento crtico","Conciencia histrica"],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Analiza procesos sociales y su impacto en la comunidad",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Individuo y sociedad","Procesos de socializacin","Estratificacin social","Problemas sociales contemporneos"]},{id:2,descripcion:"Comprende las estructuras econmicas y polticas",metas:["Meta: Anlisis social","Meta: Pensamiento crtico","Meta: Conciencia histrica"],tematicas:["Modos de produccin","Sectores econmicos","Formas de gobierno","Democracia y participacin"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761630",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica II",semestre:5,metadata:{nombre_uac:"CONCIENCIA HISTRICA II",semestre:5,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761634",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"La Energa",semestre:5,metadata:{nombre_uac:"LA ENERGA",semestre:5,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La Energa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761638",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Temas Selectos de Humanidades",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE HUMANIDADES",semestre:5,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Reflexionar sobre la condicin humana, la cultura y la sociedad para construir una visin crtica y tica del entorno.","Desarrollar el pensamiento filosfico para el anlisis de problemas existenciales y sociales contemporneos."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761640",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Conciencia Histrica III",semestre:6,metadata:{nombre_uac:"CONCIENCIA HISTRICA III",semestre:6,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["La memoria histrica","El cambio histrico","La identidad nacional"],metas_aprendizaje:["Conciencia histrica","Anlisis de fuentes","Identidad"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Analiza los procesos de conformacin de la identidad nacional",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Concepto de historia","Mxico antiguo","La Conquista","El Virreinato"]},{id:2,descripcion:"Comprende los procesos de transformacin del Mxico independiente",metas:["Meta: Conciencia histrica","Meta: Anlisis de fuentes","Meta: Identidad"],tematicas:["Independencia de Mxico","Gnesis de la nacin","Reforma y Repblica restaurada","El Porfiriato"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761643",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Cultura Digital III",semestre:6,metadata:{nombre_uac:"CULTURA DIGITAL III",semestre:6,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Ciudadana Digital","Pensamiento Computacional","Creatividad Digital"],metas_aprendizaje:["Usar tecnologa responsablemente","Resolver problemas con algoritmos","Crear contenido digital"],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Identifica y aplica normas de ciberseguridad y ciudadana digital",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Identidad digital","Huella digital","Ciberseguridad bsica","Normas de etiqueta en red"]},{id:2,descripcion:"Aplica el pensamiento computacional para la resolucin de problemas",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Algoritmos","Diagramas de flujo","Estructuras de control","Resolucin de problemas"]},{id:3,descripcion:"Utiliza herramientas de software para la productividad y colaboracin",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Procesadores de texto avanzados","Hojas de clculo","Herramientas colaborativas","Almacenamiento en la nube"]},{id:4,descripcion:"Desarrolla contenidos digitales multimedia",metas:["Meta: Usar tecnologa responsablemente","Meta: Resolver problemas con algoritmos","Meta: Crear contenido digital"],tematicas:["Edicin de imgenes","Edicin de audio/video","Presentaciones interactivas","Derechos de autor"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761646",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Herencia y Evolucin",semestre:6,metadata:{nombre_uac:"HERENCIA Y EVOLUCIN",semestre:6,creditos:8,horas_semanales:4},organizador_curricular:{categorias:["Materia y energa","Sistemas","Diversidad, continuidad y cambio"],metas_aprendizaje:["Indagacin cientfica","Modelado de fenmenos","Pensamiento crtico"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Herencia y Evolucin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Comprende la naturaleza de la materia y sus propiedades",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Estados de agregacin","Propiedades fsicas y qumicas","Tabla peridica","Enlaces qumicos"]},{id:2,descripcion:"Analiza las interacciones entre materia y energa",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["Tipos de energa","Transformacin de energa","Leyes de la termodinmica","Reacciones qumicas"]},{id:3,descripcion:"Examina sistemas biolgicos y ambientales",metas:["Meta: Indagacin cientfica","Meta: Modelado de fenmenos","Meta: Pensamiento crtico"],tematicas:["La clula","Metabolismo","Ecosistemas","Flujo de energa en sistemas vivos"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761648",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Filosofa",semestre:6,metadata:{nombre_uac:"FILOSOFA",semestre:6,creditos:6,horas_semanales:3},organizador_curricular:{categorias:["Experiencia de s","Estar juntos","Vivir aqu y ahora"],metas_aprendizaje:["Reflexin filosfica","Argumentacin tica","Apreciacin esttica"],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Filosofa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Reflexiona sobre la condicin humana y el sentido de la vida",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["Introduccin a la filosofa","El ser humano","Libertad y responsabilidad","Sentido de la vida"]},{id:2,descripcion:"Analiza problemas ticos y morales de la actualidad",metas:["Meta: Reflexin filosfica","Meta: Argumentacin tica","Meta: Apreciacin esttica"],tematicas:["tica y moral","Valores universales","Dilemas ticos modernos","Justicia y equidad"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-11T15:42:02.761650",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Cultura Digital III",semestre:3,metadata:{nombre_uac:"CULTURA DIGITAL III",semestre:3,creditos:4,horas_semanales:2},organizador_curricular:{categorias:["Pensamiento Computacional","Ciudadana Digital","Creatividad Digital"],metas_aprendizaje:["M1. Utiliza herramientas avanzadas de procesamiento de datos","M2. Desarrolla soluciones mediante algoritmos y programacin","M3. Aplica principios de ciudadana en entornos virtuales complejos"],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Integra el pensamiento computacional para el anlisis de problemas complejos y la toma de decisiones basada en datos.",tematicas:["Pensamiento Computacional Avanzado","Anlisis de Datos","Toma de Decisiones"]},{id:2,descripcion:"Utiliza estructuras de control condicionales (if-else) y repetitivas (bucles) en un lenguaje de programacin estructurado.",tematicas:["Programacin Estructurada","Condicionales","Ciclos/Bucles"]},{id:3,descripcion:"Disea y desarrolla algoritmos que resuelven problemas matemticos o lgicos de su entorno acadmico.",tematicas:["Diseo de Algoritmos","Lgica de Programacin","Resolucin de Problemas"]},{id:4,descripcion:"Comprende los fundamentos de las Bases de Datos y su importancia en la organizacin de la informacin.",tematicas:["Bases de Datos","Organizacin de Informacin","Tablas y Registros"]},{id:5,descripcion:"Utiliza herramientas de diseo web bsico (HTML/CSS) para la difusin de informacin.",tematicas:["Desarrollo Web","HTML","CSS"]},{id:6,descripcion:"Analiza crticamente el impacto de la Inteligencia Artificial y el Big Data en la sociedad actual.",tematicas:["Inteligencia Artificial","Big Data","tica Digital"]},{id:7,descripcion:"Aplica normas de seguridad digital avanzada y proteccin de datos personales en transacciones y trmites en lnea.",tematicas:["Ciberseguridad","Proteccin de Datos","Trmites Digitales"]},{id:8,descripcion:"Colabora en proyectos digitales multidisciplinarios utilizando plataformas de gestin de proyectos.",tematicas:["Trabajo Colaborativo","Gestin de Proyectos","Herramientas Digitales"]}],url_fuente:"https://dgb.sep.gob.mx/marco-curricular",fecha_extraccion:"2026-01-12T12:00:00.000Z",orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[]},{materia:"Formacin Socioemocional I",semestre:1,metadata:{nombre_uac:"FORMACIN SOCIOEMOCIONAL I",semestre:1,creditos:0,horas_semanales:2,enfoque:"Educacin Fsica y Bienestar"},organizador_curricular:{categorias:["Responsabilidad Social","Cuidado Fsico Corporal","Bienestar Emocional Afectivo","Actividades Fsicas y Deportivas"],metas_aprendizaje:["M1 Prctica y Colaboracin Ciudadana: Valore la importancia de la construccin de ciudadana para involucrarse como agente de transformacin social.","M2 Educacin para la Salud: Cuide su salud a partir de la reflexin y transformacin de prcticas cotidianas para el bienestar personal y colectivo.","M3 Actividades Fsicas y Deportivas: Desarrolle hbitos conscientes y reflexivos en torno a la actividad fsica como medio para el desarrollo integral.","M4 Educacin Integral en Sexualidad y Gnero: Cuide su salud y proteja su integridad al desarrollar relaciones sociales y sexuales constructivas e igualitarias.","M5 Actividades Artsticas y Culturales: Desarrolle sensibilidad esttica y tica mediante el disfrute y el goce del arte como forma de comunicacin."],propositos_formativos:["Reconoce los principales instrumentos que tutelan los derechos humanos en general, y especficamente de las infancias, adolescencias y juventudes.","Analiza las causas de las situaciones de inseguridad y violencia existentes en su entorno familiar, escolar o comunitario y que afectan su bienestar fsico, mental, emocional o social, para promover acciones colectivas de autocuidado y una cultura de paz.","Reflexiona desde la perspectiva de gnero sobre las dimensiones de la violencia de gnero contra las mujeres y contra las diversidades sexogenricas, para promover relaciones de respeto a partir del reconocimiento de los derechos humanos.","Investiga la forma en que los hbitos de consumo, formas de produccin en la comunidad, y prcticas y comportamientos en la vida cotidiana influyen en el medio ambiente, el cambio climtico y el bienestar personal y colectivo a nivel local, nacional e internacional.","Desarrollar las habilidades de dilogo y escucha activa para la construccin de grupos de trabajo colaborativo durante la identificacin y solucin de problemas de su entorno.","Desarrolla, junto con la comunidad estudiantil a la que pertenece, una conciencia crtica y reflexiva sobre los hbitos que configuran su existencia, y promueve el cuidado de s como una prctica tica que articula el bienestar fsico, emocional, mental y social.","Desarrolla la capacidad de discernir y elegir prcticas alimenticias que expresen un cuidado consciente de s, del cuerpo y del entorno, para fomentar una relacin tica con la alimentacin que reconozca su dimensin cultural, ecolgica y poltica, y que contribuya a una vida ms justa y sostenible.","Identifica, analiza y transforma los factores que afectan el bienestar, a partir del ejercicio del cuidado de s con autoconocimiento, autodominio y libertad tica, para convertirse en agente activo de la salud que reconoce su poder de decisin ante prcticas riesgosas.","Impulsa la construccin de las relaciones interpersonales, basadas en el respeto, el dilogo y el reconocimiento de las diferencias entre personas, entediendo que el cuidado de s, incluye la manera de vincularse con las dems personas, para promover una tica de la convivencia que contribuya al bienestar comn y a la transformacin de dinmicas violentas.","Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad, valorando tambin el juego como una experiencia formativa y una fuente de disfrute personal que promueve el bienestar y la creatividad.","Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional, y promueve la convivencia respetuosa en la diversidad y otras formas de vinculacin y disfrute de su propio cuerpo.","Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva, y la identifica como oportunidad para la toma de decisiones saludables, la capacidad de sentir y reconocer emociones y razonar sobre ellas, al tiempo que desarrolla sus potencialidades psicomotrices.","Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte por razones de gnero o corporalidad, para establecer relaciones empticas, justas y libres de violencia, y desarrolla la capacidad de afiliacin y respeto por la dignidad de cada persona.","Promueve la igualdad de oportunidades y la inclusin de todas las personas en el mbito deportivo, especialmente de mujeres, diversidades sexogenricas y personas en situacin de discapacidad, cultivando una conciencia crtica que impulse el bienestar colectivo y el ejercicio pleno de sus capacidades humanas.","Comprende la identidad y orientacin sexual, as como la construccin de vnculos afectivos saludables, mediante habilidades de comunicacin, dilogo y responsabilidad afectiva en relaciones sociales.","Reconoce las dimensiones de la sexualidad desde un enfoque de derechos humanos y sexuales, desmitificando creencias, hbitos y estereotipos, y valorando la diversidad sexual como parte de la identidad y expresin colectiva.","Analiza la influencia de los roles de gnero en la toma de decisiones sobre la vida sexual y reproductiva, y promueve tanto la prevencin de embarazos no planificados como el ejercicio informado y corresponsable de la sexualidad.","Desarrolla una conciencia crtica sobre le cuerpo, la autonoma y el placer, al cuestionar las normas sociales, culturales y de gnero que propician la discriminacin y la violencia.","Ejerce una ciudadana sexual crtica e informada, que integra el cuidado de s, el acceso a la salud sexual y reproductiva, y la construccin de un proyecto de vida con perspectiva de gnero, libre de estereotipos, violencias y jerarquas.","Participa de diversas expresiones artsticas para comunicar emociones, ideas y experiencias personales y del colectivo al que pertenece.","Genera manifestaciones artsticas variadas como formas de expresin poltica frente a los problemas que afectan a su comunidad y entorno.","Recrea la obra de artistas cuyas creaciones buscaron problematizar la realidad y dar cuenta de un posicionamiento poltico, y formaron parte de procesos colectivos de transformacin social.","Experimenta el arte como un espacio para el autodescubrimiento y el autoconocimiento en el marco de la complejidad de su contexto y momento histrico."]},progresiones:[{id:1,descripcion:"Comprende la importancia de la cultura fsica como un derecho humano que contribuye al bienestar integral y la salud.",tematicas:["Cultura fsica","Derecho humano","Bienestar integral"]},{id:2,descripcion:"Identifica y practica hbitos de higiene, alimentacin y descanso para favorecer su desarrollo fsico y prevenir enfermedades.",tematicas:["Higiene","Alimentacin saludable","Hbitos de descanso"]},{id:3,descripcion:"Determina su condicin fsica actual a travs de pruebas de valoracin diagnstica para establecer metas de mejora personal.",tematicas:["Condicin fsica","Valoracin funcional","Metas personales"]},{id:4,descripcion:"Ejecuta actividades de activacin fsica sistemtica para fortalecer sus capacidades fsicas (fuerza, resistencia, velocidad, flexibilidad).",tematicas:["Capacidades fsicas","Activacin fsica","Entrenamiento bsico"]},{id:5,descripcion:"Reconoce la importancia de practicar deporte y actividad fsica para la regulacin de emociones y reduccin del estrs.",tematicas:["Regulacin emocional","Manejo de estrs","Salud mental"]},{id:6,descripcion:"Participa en juegos y actividades deportivas de conjunto promoviendo la integracin, el respeto y la colaboracin grupal.",tematicas:["Deportes de conjunto","Valores sociales","Trabajo en equipo"]},{id:7,descripcion:"Analiza los riesgos del sedentarismo en la sociedad actual y propone alternativas para una vida activa en su comunidad.",tematicas:["Sedentarismo","Vida saludable","Propuesta comunitaria"]},{id:8,descripcion:"Aplica tcnicas de respiracin y relajacin post-ejercicio para favorecer la recuperacin fsica y el equilibrio mental.",tematicas:["Tcnicas de relajacin","Recuperacin fsica","Equilibrio mental"]}],url_fuente:"https://dgb.sep.gob.mx/storage/recursos/2024/07/V2N8WnBUGb-programa_formacion_socioemocional-19%20080724.pdf",orientaciones_didacticas:["Aprendizaje Basado en Proyectos (ABP)","Crculos deliberativos y dilogos socrticos","Juegos de roles y sociodramas","Cartografas sociales y mapeos comunitarios","Asambleas escolares y deportivas","Cine-debates y anlisis de medios","Campaas de sensibilizacin pblica","Teatro y expresiones artsticas colaborativas"],criterios_evaluacion:[{aspecto:"Autoconocimiento",descripcion:"Capacidad de reconocer emociones y necesidades personales.",porcentaje:20},{aspecto:"Participacin Colaborativa",descripcion:"Integracin y respeto en actividades de grupo.",porcentaje:30},{aspecto:"Reflexin Crtica",descripcion:"Anlisis sobre el impacto de hbitos y conductas en el bienestar.",porcentaje:25},{aspecto:"Accin Transformadora",descripcion:"Propuesta y ejecucin de acciones para la mejora del entorno.",porcentaje:25}],bibliografia:[{tipo:"libro",titulo:"Y el cerebro cre al hombre",autor:"Damasio, A.",ao:2010,disponibilidad:"digital"},{tipo:"libro",titulo:"Crear capacidades: Propuesta para el desarrollo humano",autor:"Nussbaum, M.",ao:2012,disponibilidad:"biblioteca"},{tipo:"libro",titulo:"Homo Ludens",autor:"Huizinga, J.",ao:2012,disponibilidad:"biblioteca"},{tipo:"manual",titulo:"Programas de Estudio MCCEMS 2025",autor:"DGB-SEP",ao:2025,disponibilidad:"digital"}],fecha_extraccion:"2026-02-08T01:33:44.724Z"},{materia:"La materia y sus interacciones CNEYT I",semestre:1,metadata:{nombre_uac:"LA MATERIA Y SUS INTERACCIONES CNEYT I",semestre:1,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La materia y sus interacciones CNEYT I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de La materia y sus interacciones CNEYT I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de La materia y sus interacciones CNEYT I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conservacin de la energa y su interaccin con la materia CNEYT II",semestre:2,metadata:{nombre_uac:"CONSERVACIN DE LA ENERGA Y SU INTERACCIN CON LA MATERIA CNEYT II",semestre:2,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conservacin de la energa y su interaccin con la materia CNEYT II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Conservacin de la energa y su interaccin con la materia CNEYT II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Conservacin de la energa y su interaccin con la materia CNEYT II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ecosistemas, interacciones, energia y dinamica CNEYT III",semestre:3,metadata:{nombre_uac:"ECOSISTEMAS, INTERACCIONES, ENERGIA Y DINAMICA CNEYT III",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ecosistemas, interacciones, energia y dinamica CNEYT III bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Ecosistemas, interacciones, energia y dinamica CNEYT III.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Ecosistemas, interacciones, energia y dinamica CNEYT III en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ciencias Sociales III",semestre:4,metadata:{nombre_uac:"CIENCIAS SOCIALES III",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Ciencias Sociales III.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Ciencias Sociales III en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Conciencia Histrica I",semestre:4,metadata:{nombre_uac:"CONCIENCIA HISTRICA I",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Conciencia Histrica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Conciencia Histrica I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Conciencia Histrica I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Reacciones qumicas conservacin de la materia CNEYT IV",semestre:4,metadata:{nombre_uac:"REACCIONES QUMICAS CONSERVACIN DE LA MATERIA CNEYT IV",semestre:4,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Reacciones qumicas conservacin de la materia CNEYT IV bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Reacciones qumicas conservacin de la materia CNEYT IV.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Reacciones qumicas conservacin de la materia CNEYT IV en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"La energa en los procesos de la vida diaria CNEYT V",semestre:5,metadata:{nombre_uac:"LA ENERGA EN LOS PROCESOS DE LA VIDA DIARIA CNEYT V",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de La energa en los procesos de la vida diaria CNEYT V bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de La energa en los procesos de la vida diaria CNEYT V.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de La energa en los procesos de la vida diaria CNEYT V en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos Fsicos I",semestre:5,metadata:{nombre_uac:"ANLISIS DE FENMENOS FSICOS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos Fsicos I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Anlisis de Fenmenos Fsicos I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Anlisis de Fenmenos Fsicos I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Derecho y Sociedad I",semestre:5,metadata:{nombre_uac:"DERECHO Y SOCIEDAD I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Derecho y Sociedad I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Derecho y Sociedad I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Derecho y Sociedad I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Fundamentos de Administracin I",semestre:5,metadata:{nombre_uac:"FUNDAMENTOS DE ADMINISTRACIN I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Fundamentos de Administracin I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Fundamentos de Administracin I.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Fundamentos de Administracin I en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Organismos, estructuras y procesos CNEYT VI",semestre:6,metadata:{nombre_uac:"ORGANISMOS, ESTRUCTURAS Y PROCESOS CNEYT VI",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Organismos, estructuras y procesos CNEYT VI bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Organismos, estructuras y procesos CNEYT VI.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Organismos, estructuras y procesos CNEYT VI en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos Fsicos II",semestre:6,metadata:{nombre_uac:"ANLISIS DE FENMENOS FSICOS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos Fsicos II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Anlisis de Fenmenos Fsicos II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Anlisis de Fenmenos Fsicos II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Derecho y Sociedad II",semestre:6,metadata:{nombre_uac:"DERECHO Y SOCIEDAD II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Prcticas sugeridas"],metas_aprendizaje:["Desarrollar comprensin profunda de los temas curriculares."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Derecho y Sociedad II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Inicio de la exploracin de los conceptos base de Derecho y Sociedad II.",tematicas:["Introduccin","Conceptos bsicos"]},{id:2,descripcion:"Anlisis y aplicacin de los principios fundamentales de Derecho y Sociedad II en contextos reales.",tematicas:["Aplicaciones","Anlisis"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Races etimolgicas del espaol I",semestre:5,metadata:{nombre_uac:"RACES ETIMOLGICAS DEL ESPAOL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Races etimolgicas del espaol I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Races etimolgicas del espaol I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Races etimolgicas del espaol I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Races etimolgicas del espaol I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Probabilidad y Estadstica I",semestre:5,metadata:{nombre_uac:"TALLER DE PROBABILIDAD Y ESTADSTICA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Probabilidad y Estadstica I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Probabilidad y Estadstica I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Probabilidad y Estadstica I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Probabilidad y Estadstica I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Comunicacin y Sociedad I",semestre:5,metadata:{nombre_uac:"COMUNICACIN Y SOCIEDAD I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Comunicacin y Sociedad I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Comunicacin y Sociedad I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Comunicacin y Sociedad I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Comunicacin y Sociedad I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Pensamiento Variacional I",semestre:5,metadata:{nombre_uac:"TALLER DE PENSAMIENTO VARIACIONAL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Pensamiento Variacional I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Pensamiento Variacional I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Pensamiento Variacional I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Pensamiento Variacional I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Psicologa I",semestre:5,metadata:{nombre_uac:"PSICOLOGA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Psicologa I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Psicologa I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Psicologa I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Psicologa I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Filosfico I",semestre:5,metadata:{nombre_uac:"PENSAMIENTO FILOSFICO I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Filosfico I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Filosfico I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Filosfico I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Filosfico I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Anlisis de Fenmenos y Procesos Biolgicos",semestre:5,metadata:{nombre_uac:"ANLISIS DE FENMENOS Y PROCESOS BIOLGICOS",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Anlisis de Fenmenos y Procesos Biolgicos."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Anlisis de Fenmenos y Procesos Biolgicos bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Anlisis de Fenmenos y Procesos Biolgicos.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Anlisis de Fenmenos y Procesos Biolgicos.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico Aplicado a las Finanzas I",semestre:5,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO APLICADO A LAS FINANZAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Matemtico Aplicado a las Finanzas I."],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Matemtico Aplicado a las Finanzas I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Matemtico Aplicado a las Finanzas I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingles V",semestre:5,metadata:{nombre_uac:"INGLES V",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Ingles V."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingles V bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Ingles V.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Ingles V.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Dibujo Tcnico I",semestre:5,metadata:{nombre_uac:"DIBUJO TCNICO I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Dibujo Tcnico I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Dibujo Tcnico I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Dibujo Tcnico I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Dibujo Tcnico I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Salud Integral I",semestre:5,metadata:{nombre_uac:"SALUD INTEGRAL I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Salud Integral I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Salud Integral I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Salud Integral I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Salud Integral I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Economa I. La funcin de los agentes econmicos en la sociedad",semestre:5,metadata:{nombre_uac:"ECONOMA I. LA FUNCIN DE LOS AGENTES ECONMICOS EN LA SOCIEDAD",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Economa I. La funcin de los agentes econmicos en la sociedad."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Economa I. La funcin de los agentes econmicos en la sociedad bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Economa I. La funcin de los agentes econmicos en la sociedad.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Economa I. La funcin de los agentes econmicos en la sociedad.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Procesos ContabIes I",semestre:5,metadata:{nombre_uac:"PROCESOS CONTABIES I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Procesos ContabIes I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Procesos ContabIes I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Procesos ContabIes I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Procesos ContabIes I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Ciencias Sociales I",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE CIENCIAS SOCIALES I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Ciencias Sociales I."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Ciencias Sociales I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Ciencias Sociales I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Arte y Cultura I",semestre:5,metadata:{nombre_uac:"ARTE Y CULTURA I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Arte y Cultura I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Arte y Cultura I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Arte y Cultura I.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Arte y Cultura I.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.724Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Lgica y Pensamiento Crtico",semestre:5,metadata:{nombre_uac:"LGICA Y PENSAMIENTO CRTICO",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Lgica y Pensamiento Crtico."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Lgica y Pensamiento Crtico bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Lgica y Pensamiento Crtico.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Lgica y Pensamiento Crtico.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Fundamentos de Administracin II",semestre:6,metadata:{nombre_uac:"FUNDAMENTOS DE ADMINISTRACIN II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Fundamentos de Administracin II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Fundamentos de Administracin II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Fundamentos de Administracin II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Fundamentos de Administracin II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Organizacin del flujo de materia y energa en los organismos II",semestre:6,metadata:{nombre_uac:"ORGANIZACIN DEL FLUJO DE MATERIA Y ENERGA EN LOS ORGANISMOS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Organizacin del flujo de materia y energa en los organismos II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Organizacin del flujo de materia y energa en los organismos II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Organizacin del flujo de materia y energa en los organismos II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Organizacin del flujo de materia y energa en los organismos II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Races etimolgicas del espaol II",semestre:6,metadata:{nombre_uac:"RACES ETIMOLGICAS DEL ESPAOL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Races etimolgicas del espaol II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Races etimolgicas del espaol II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Races etimolgicas del espaol II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Races etimolgicas del espaol II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Probabilidad y Estadstica II",semestre:6,metadata:{nombre_uac:"TALLER DE PROBABILIDAD Y ESTADSTICA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Probabilidad y Estadstica II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Probabilidad y Estadstica II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Probabilidad y Estadstica II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Probabilidad y Estadstica II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Pensamiento Variacional II",semestre:6,metadata:{nombre_uac:"TALLER DE PENSAMIENTO VARIACIONAL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Taller de Pensamiento Variacional II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Pensamiento Variacional II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Taller de Pensamiento Variacional II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Taller de Pensamiento Variacional II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Comunicacin y Sociedad II",semestre:6,metadata:{nombre_uac:"COMUNICACIN Y SOCIEDAD II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Comunicacin y Sociedad II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Comunicacin y Sociedad II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Comunicacin y Sociedad II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Comunicacin y Sociedad II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Psicologa II",semestre:6,metadata:{nombre_uac:"PSICOLOGA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Psicologa II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Psicologa II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Psicologa II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Psicologa II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Filosfico II",semestre:6,metadata:{nombre_uac:"PENSAMIENTO FILOSFICO II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Filosfico II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Filosfico II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Filosfico II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Filosfico II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Biologa",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE BIOLOGA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Biologa."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Biologa bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Biologa.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Biologa.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Ingles VI",semestre:6,metadata:{nombre_uac:"INGLES VI",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Ingles VI."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Ingles VI bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Ingles VI.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Ingles VI.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Dibujo TcnicoII",semestre:6,metadata:{nombre_uac:"DIBUJO TCNICOII",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Dibujo TcnicoII."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Dibujo TcnicoII bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Dibujo TcnicoII.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Dibujo TcnicoII.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Matemtico Aplicado a las Finanzas-II",semestre:6,metadata:{nombre_uac:"PENSAMIENTO MATEMTICO APLICADO A LAS FINANZAS-II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Pensamiento Matemtico Aplicado a las Finanzas-II."],propositos_formativos:["Desarrollar la capacidad de modelar situaciones, resolver problemas y justificar resultados mediante lenguajes y mtodos matemticos.","Fomentar el pensamiento crtico y la toma de decisiones informadas a travs del anlisis de datos y patrones."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Pensamiento Matemtico Aplicado a las Finanzas-II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Pensamiento Matemtico Aplicado a las Finanzas-II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Salud Integral II",semestre:6,metadata:{nombre_uac:"SALUD INTEGRAL II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Salud Integral II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Salud Integral II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Salud Integral II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Salud Integral II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Economa II. Poltica econmica y poltica pblica mexicana",semestre:6,metadata:{nombre_uac:"ECONOMA II. POLTICA ECONMICA Y POLTICA PBLICA MEXICANA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Economa II. Poltica econmica y poltica pblica mexicana."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Economa II. Poltica econmica y poltica pblica mexicana bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Economa II. Poltica econmica y poltica pblica mexicana.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Economa II. Poltica econmica y poltica pblica mexicana.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Procesos ContabIes II",semestre:6,metadata:{nombre_uac:"PROCESOS CONTABIES II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Procesos ContabIes II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Procesos ContabIes II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Procesos ContabIes II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Procesos ContabIes II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Ciencias Sociales II",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE CIENCIAS SOCIALES II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Temas Selectos de Ciencias Sociales II."],propositos_formativos:["Comprender la dinmica de la sociedad y sus instituciones para participar de manera responsable en la vida pblica.","Analizar procesos histricos y sociales para entender el presente y proponer alternativas de futuro."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Temas Selectos de Ciencias Sociales II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Temas Selectos de Ciencias Sociales II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Arte y Cultura II",semestre:6,metadata:{nombre_uac:"ARTE Y CULTURA II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Arte y Cultura II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Arte y Cultura II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Arte y Cultura II.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Arte y Cultura II.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Experiencia Esttica",semestre:6,metadata:{nombre_uac:"EXPERIENCIA ESTTICA",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Experiencia Esttica."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Experiencia Esttica bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Experiencia Esttica.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Experiencia Esttica.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Tecnologas de la Comunicacin y la Informacin",semestre:3,metadata:{nombre_uac:"TECNOLOGAS DE LA COMUNICACIN Y LA INFORMACIN",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Tecnologas de la Comunicacin y la Informacin."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Tecnologas de la Comunicacin y la Informacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Tecnologas de la Comunicacin y la Informacin.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Tecnologas de la Comunicacin y la Informacin.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Higiene y Salud Comunitaria",semestre:3,metadata:{nombre_uac:"HIGIENE Y SALUD COMUNITARIA",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Higiene y Salud Comunitaria."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Higiene y Salud Comunitaria bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Higiene y Salud Comunitaria.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Higiene y Salud Comunitaria.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Diseo grfico",semestre:3,metadata:{nombre_uac:"DISEO GRFICO",semestre:3,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Contenido Central","Transversalidad"],metas_aprendizaje:["Dominar los aprendizajes fundamentales de Diseo grfico."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Diseo grfico bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Bases y fundamentos de Diseo grfico.",tematicas:["Fundamentos"]},{id:2,descripcion:"Profundizacin en los temas clave de Diseo grfico.",tematicas:["Desarrollo"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Pensamiento Literario",semestre:5,metadata:{nombre_uac:"PENSAMIENTO LITERARIO",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Pensamiento Literario."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Pensamiento Literario bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Pensamiento Literario.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Cultura Digital",semestre:5,metadata:{nombre_uac:"TALLER DE CULTURA DIGITAL",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Cultura Digital."],propositos_formativos:["Utilizar herramientas digitales de manera innovadora y eficiente para acceder al conocimiento y experiencias de aprendizaje.","Construir una ciudadana digital responsable, tica y crtica en el uso de las tecnologas de la informacin."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Cultura Digital.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Matemticas I",semestre:5,metadata:{nombre_uac:"TEMAS SELECTOS DE MATEMTICAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Temas Selectos de Matemticas I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Matemticas I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Temas Selectos de Matemticas I.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Temas Selectos de Matemticas II",semestre:6,metadata:{nombre_uac:"TEMAS SELECTOS DE MATEMTICAS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Temas Selectos de Matemticas II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Temas Selectos de Matemticas II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Temas Selectos de Matemticas II.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Espacio y Sociedad",semestre:5,metadata:{nombre_uac:"ESPACIO Y SOCIEDAD",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Espacio y Sociedad."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Espacio y Sociedad bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Espacio y Sociedad.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Ciencias I",semestre:5,metadata:{nombre_uac:"TALLER DE CIENCIAS I",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Ciencias I."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias I bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Ciencias I.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Laboratorio de Investigacin",semestre:5,metadata:{nombre_uac:"LABORATORIO DE INVESTIGACIN",semestre:5,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Laboratorio de Investigacin."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Laboratorio de Investigacin bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Laboratorio de Investigacin.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Taller de Ciencias II",semestre:6,metadata:{nombre_uac:"TALLER DE CIENCIAS II",semestre:6,creditos:4,horas_semanales:3},organizador_curricular:{categorias:["Investigacin","Aplicacin"],metas_aprendizaje:["Profundizar en Taller de Ciencias II."],propositos_formativos:["Contribuir a la formacin integral del estudiante en el rea de Taller de Ciencias II bajo el marco del MCCEMS 2025."]},progresiones:[{id:1,descripcion:"Fundamentos avanzados de Taller de Ciencias II.",tematicas:["Teora avanzada"]}],orientaciones_didacticas:[],criterios_evaluacion:[],bibliografia:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Fsicas y Deportivas I 2025",semestre:1,metadata:{nombre_uac:"ACTIVIDADES FSICAS Y DEPORTIVAS I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle hbitos conscientes y reflexivos en torno a la actividad fsica y deportiva, como medio para el desarrollo integral, una conciencia crtica y el compromiso con el bienestar colectivo."],propositos_formativos:["Participa en situaciones de juego y actividad fsica ldica como una manifestacin cultural y expresin de libertad...","Participa en actividades deportivas como un derecho humano fundamental que favorece su desarrollo fsico y emocional...","Explora las emociones y las posibilidades motrices que experimenta en la prctica deportiva...","Identifica y cuestiona las prcticas discriminatorias y de violencia en el deporte...","Promueve la igualdad de oportunidades y la inclusin en el mbito deportivo..."]},progresiones:[],orientaciones_didacticas:["Asambleas deportivas","Diarios de reflexin corporal"],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Fsicas y Deportivas II 2025",semestre:2,metadata:{nombre_uac:"ACTIVIDADES FSICAS Y DEPORTIVAS II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle hbitos conscientes y reflexivos..."],propositos_formativos:["Fomentar la cultura fsica y la integracin grupal."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Prctica y Colaboracin Ciudadana I 2025",semestre:1,metadata:{nombre_uac:"PRCTICA Y COLABORACIN CIUDADANA I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Valore la importancia de la construccin de ciudadana..."],propositos_formativos:["Reconoce los principales instrumentos que tutelan los derechos humanos...","Analiza las causas de las situaciones de inseguridad y violencia...","Reflexiona desde la perspectiva de gnero...","Investiga la forma en que los hbitos de consumo...","Desarrolla las habilidades de dilogo..."]},progresiones:[],orientaciones_didacticas:["Proyectos sociales"],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Prctica y Colaboracin Ciudadana II 2025",semestre:2,metadata:{nombre_uac:"PRCTICA Y COLABORACIN CIUDADANA II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Valore la importancia de la construccin de ciudadana..."],propositos_formativos:["Accin ciudadana y democracia participativa."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin para la Salud I 2025",semestre:1,metadata:{nombre_uac:"EDUCACIN PARA LA SALUD I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud a partir de la reflexin y transformacin de prcticas cotidianas..."],propositos_formativos:["Desarrolla una conciencia crtica sobre los hbitos...","Discernir y elegir prcticas alimenticias...","Identifica, analiza y transforma factores de riesgo...","Impulsa la construccin de relaciones interpersonales..."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin para la Salud II 2025",semestre:2,metadata:{nombre_uac:"EDUCACIN PARA LA SALUD II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud..."],propositos_formativos:["Bienestar integral y prevencin."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin Integral en Sexualidad y Gnero I 2025",semestre:1,metadata:{nombre_uac:"EDUCACIN INTEGRAL EN SEXUALIDAD Y GNERO I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud y proteja su integridad..."],propositos_formativos:["Comprende la identidad y orientacin sexual...","Reconoce las dimensiones de la sexualidad...","Analiza la influencia de los roles de gnero...","Desarrolla una conciencia crtica sobre el cuerpo...","Ejerce una ciudadana sexual crtica e informada."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Educacin Integral en Sexualidad y Gnero II 2025",semestre:2,metadata:{nombre_uac:"EDUCACIN INTEGRAL EN SEXUALIDAD Y GNERO II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Cuide su salud..."],propositos_formativos:["Derechos y autonoma corporal."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Artsticas y Culturales I 2025",semestre:1,metadata:{nombre_uac:"ACTIVIDADES ARTSTICAS Y CULTURALES I 2025",semestre:1,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle sensibilidad esttica y tica..."],propositos_formativos:["Participa de diversas expresiones artsticas...","Genera manifestaciones artsticas variadas...","Recrea la obra de artistas...","Experimenta el arte como un espacio para el autodescubrimiento."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"},{materia:"Actividades Artsticas y Culturales II 2025",semestre:2,metadata:{nombre_uac:"ACTIVIDADES ARTSTICAS Y CULTURALES II 2025",semestre:2,creditos:0,horas_semanales:2},organizador_curricular:{categorias:["Formacin Socioemocional"],metas_aprendizaje:["Desarrolle sensibilidad esttica y tica..."],propositos_formativos:["Expresin y goce esttico."]},progresiones:[],orientaciones_didacticas:[],fecha_extraccion:"2026-02-08T01:33:44.725Z",url_fuente:"https://dgb.sep.gob.mx/marco-curricular"}];class nz{constructor(){Ad(this,"programas",[]);Ad(this,"indexPorMateria",new Map);Ad(this,"indexPorSemestre",new Map);this.cargarProgramas(),this.construirIndices()}cargarProgramas(){try{this.programas=jI,console.log(` Cargados ${this.programas.length} programas MCCEMS`)}catch(e){console.error(" Error cargando programas SEP:",e),this.programas=[]}}construirIndices(){this.programas.forEach(e=>{const n=this.normalizarNombre(e.materia);this.indexPorMateria.has(n)||this.indexPorMateria.set(n,[]),this.indexPorMateria.get(n).push(e)}),this.programas.forEach(e=>{this.indexPorSemestre.has(e.semestre)||this.indexPorSemestre.set(e.semestre,[]),this.indexPorSemestre.get(e.semestre).push(e)})}normalizarNombre(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").trim()}buscarPorMateria(e){const n=this.normalizarNombre(e);if(this.indexPorMateria.has(n))return this.indexPorMateria.get(n);const s=[];return this.indexPorMateria.forEach((a,i)=>{(i.includes(n)||n.includes(i))&&s.push(...a)}),s}buscarPorSemestre(e){return this.indexPorSemestre.get(e)||[]}buscarPorMateriaYSemestre(e,n){return this.buscarPorMateria(e).find(i=>i.semestre===n)||null}obtenerProgresiones(e,n){let s;if(n!==void 0){const a=this.buscarPorMateriaYSemestre(e,n);s=a?[a]:[]}else s=this.buscarPorMateria(e);return s.flatMap(a=>a.progresiones)}obtenerMetasAprendizaje(e,n){const s=this.buscarPorMateriaYSemestre(e,n);return(s==null?void 0:s.organizador_curricular.metas_aprendizaje)||[]}validarPlaneacion(e,n,s){const a=this.buscarPorMateriaYSemestre(e,n);if(!a)return{esValida:!1,progresionesOficiales:[],coincidencias:0,sugerencias:[`No se encontr el programa oficial para ${e} semestre ${n}`]};const i=a.progresiones;let o=0;const l=[];return s.forEach(c=>{const d=this.normalizarNombre(c);if(i.some(p=>this.normalizarNombre(p.descripcion).includes(d)||d.includes(this.normalizarNombre(p.descripcion))))o++;else{const p=i[0];l.push(`"${c}" no coincide con progresiones oficiales. Considera: "${p.descripcion.substring(0,100)}..."`)}}),{esValida:o>0,progresionesOficiales:i,coincidencias:o,sugerencias:l.slice(0,3)}}generarContextoIA(e,n){var i,o,l,c,d,m;const s=this.buscarPorMateriaYSemestre(e,n);return s?`
PROGRAMA OFICIAL MCCEMS - DGB/SEP
Materia: ${s.materia}
Semestre: ${s.semestre}
${s.metadata.creditos?`Crditos: ${s.metadata.creditos}`:""}
${s.metadata.horas_semanales?`Horas semanales: ${s.metadata.horas_semanales}`:""}

ORGANIZADOR CURRICULAR:
Categoras: ${((o=(i=s.organizador_curricular)==null?void 0:i.categorias)==null?void 0:o.join(", "))||"No definidas"}

PROGRESIONES DE APRENDIZAJE (${((l=s.progresiones)==null?void 0:l.length)||0} total):
${((c=s.progresiones)==null?void 0:c.slice(0,5).map(p=>`${p.id}. ${p.descripcion.substring(0,150)}...`).join(`
`))||"Sin progresiones registradas"}

METAS DE APRENDIZAJE:
${((m=(d=s.organizador_curricular)==null?void 0:d.metas_aprendizaje)==null?void 0:m.slice(0,3).join(`
`))||"Generales del MCCEMS"}

Fuente oficial: ${s.url_fuente||"DGB-SEP"}
Fecha de extraccin: ${s.fecha_extraccion?new Date(s.fecha_extraccion).toLocaleDateString("es-MX"):"Reciente"}
        `.trim():`No se encontr informacin oficial para ${e} semestre ${n}.`}obtenerEstadisticas(){return{totalProgramas:this.programas.length,programasPorSemestre:Array.from(this.indexPorSemestre.entries()).map(([e,n])=>({semestre:e,cantidad:n.length})).sort((e,n)=>e.semestre-n.semestre),materiasDisponibles:Array.from(this.indexPorMateria.keys()),ultimaActualizacion:this.programas.reduce((e,n)=>{const s=new Date(n.fecha_extraccion);return s>e?s:e},new Date(0))}}}const Rn=new nz,sz=({subject:t,setSubject:e})=>{const[n,s]=M.useState([]),[a,i]=M.useState(!0);M.useEffect(()=>{const g=Rn.obtenerEstadisticas().materiasDisponibles,x=[];g.forEach(I=>{const b=Rn.buscarPorMateria(I);x.push(...b)});const y=new Map;x.forEach(I=>y.set(I.materia+I.semestre,I));const T=Array.from(y.values());T.sort((I,b)=>I.semestre!==b.semestre?I.semestre-b.semestre:I.materia.localeCompare(b.materia)),s(T),i(!1)},[]);const o=p=>{var y,T;const g=p.target.value,x=n.find(I=>I.materia===g);x&&e({subjectId:x.materia,subjectName:x.materia,mccemsCategory:((T=(y=x.organizador_curricular)==null?void 0:y.categorias)==null?void 0:T[0])||"Asignatura MCCEMS",formativePurpose:`Alinear al programa oficial de ${x.materia} (Semestre ${x.semestre})`,curriculumContent:`Basado en el documento oficial: ${x.url_fuente}`})},{user:l}=dt(),c=[],d={};n.forEach(p=>{var x;const g=(x=l==null?void 0:l.materias)==null?void 0:x.some(y=>y.toLowerCase()===p.materia.toLowerCase());g&&(c.find(y=>y.materia===p.materia)||c.push(p)),g||(d[p.semestre]||(d[p.semestre]=[]),d[p.semestre].push(p))});const m=n.find(p=>p.materia===t.subjectId)||n.find(p=>p.materia===t.subjectName);return r.jsxs("div",{className:"space-y-4 bg-indigo-50/50 p-6 rounded-2xl border border-indigo-100",children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-800 font-bold text-sm mb-2",children:[r.jsx(oU,{className:"w-4 h-4"}),"Configuracin Curricular Oficial (SEP - DGB)"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-tight",children:"Selecciona tu Asignatura Oficial"}),a?r.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm p-3",children:[r.jsx(al,{className:"w-4 h-4 animate-spin"})," Cargando catlogo oficial..."]}):r.jsxs("select",{value:t.subjectName,onChange:o,className:"w-full px-4 py-3 rounded-xl border border-white bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-slate-700 font-medium cursor-pointer",children:[r.jsx("option",{value:"",children:"-- Elige una Materia del Catlogo --"}),c.length>0&&r.jsx("optgroup",{label:" Mis Materias Asignadas",children:c.map(p=>r.jsx("option",{value:p.materia,children:p.materia},`my-${p.materia}`))}),Object.keys(d).map(p=>r.jsx("optgroup",{label:`Semestre ${p}`,children:d[Number(p)].map(g=>r.jsx("option",{value:g.materia,children:g.materia},g.materia+g.semestre))},p))]})]}),m&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl border border-indigo-100 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 text-emerald-700 p-2 rounded-lg",children:r.jsx(II,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-slate-800 uppercase",children:"Programa Oficial Detectado"}),r.jsxs("div",{className:"text-[11px] text-slate-500 truncate max-w-[200px] md:max-w-md",children:[m.materia," (Semestre ",m.semestre,")"]})]})]}),r.jsx("a",{href:m.url_fuente,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver Programa Oficial",children:r.jsx(qg,{className:"w-5 h-5"})})]})]})},Cr="schools",OE="users";class az{generateAccessCode(e){return e.replace(/[^A-Z0-9]/gi,"").toUpperCase().substring(0,8)}async createSchool(e,n){try{const s=this.generateAccessCode(e.cct);if(await this.getSchoolByCCT(e.cct))throw new Error("Ya existe una escuela registrada con este CCT");const i={nombre:e.nombre,cct:e.cct.toUpperCase(),municipio:e.municipio,estado:e.estado,turno:e.turno,codigoAcceso:s,createdAt:new Date().toISOString(),createdBy:n,activa:!0,estadisticas:{totalDocentes:1,totalPlaneaciones:0,ultimaActualizacion:new Date().toISOString()},directivos:[n]};return{id:(await es(ue(J,Cr),i)).id,...i}}catch(s){throw console.error("Error al crear escuela:",s),s}}async getSchoolByCCT(e){try{const n=Ye(ue(J,Cr),tt("cct","==",e.toUpperCase()),ro(1)),s=await Re(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){throw console.error("Error al buscar escuela por CCT:",n),n}}async getSchoolByCode(e){try{const n=Ye(ue(J,Cr),tt("codigoAcceso","==",e.toUpperCase()),ro(1)),s=await Re(n);if(s.empty)return null;const a=s.docs[0];return{id:a.id,...a.data()}}catch(n){throw console.error("Error al buscar escuela por cdigo:",n),n}}async searchSchools(e){try{const n=Ye(ue(J,Cr),tt("activa","==",!0),Ds("nombre"),ro(50)),a=(await Re(n)).docs.map(l=>({id:l.id,...l.data()})),i=e.toLowerCase();return a.filter(l=>l.nombre.toLowerCase().includes(i)||l.cct.toLowerCase().includes(i)||l.municipio.toLowerCase().includes(i)).map(l=>({id:l.id,nombre:l.nombre,cct:l.cct,municipio:l.municipio,turno:l.turno,codigoAcceso:l.codigoAcceso,totalDocentes:l.estadisticas.totalDocentes}))}catch(n){throw console.error("Error al buscar escuelas:",n),n}}async getSchoolById(e){try{const n=re(J,Cr,e),s=await kn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error al obtener escuela:",n),n}}async createUserProfile(e,n,s,a,i,o,l){try{const c=["Director","Subdirector"].includes(l.puesto)?"directivo":"maestro",d={email:n,nombre:s,apellidoPaterno:a,schoolId:i,schoolName:o,puesto:l.puesto,rol:c,materias:l.materias,grados:l.grados,telefono:l.telefono,createdAt:new Date().toISOString(),ultimoAcceso:new Date().toISOString(),onboardingCompleto:!0},m=re(J,OE,e);return await cr(m,d,{merge:!0}),await this.incrementSchoolDocentes(i),{id:e,...d}}catch(c){throw console.error("Error al crear perfil de usuario:",c),c}}async getUserProfile(e){try{const n=re(J,OE,e),s=await kn(n);return s.exists()?{id:s.id,...s.data()}:null}catch(n){throw console.error("Error al obtener perfil de usuario:",n),n}}async incrementSchoolDocentes(e){var n;try{const s=re(J,Cr,e),a=await kn(s);if(a.exists()){const i=((n=a.data().estadisticas)==null?void 0:n.totalDocentes)||0;await vt(s,{"estadisticas.totalDocentes":i+1,"estadisticas.ultimaActualizacion":new Date().toISOString()})}}catch(s){console.error("Error al incrementar docentes:",s)}}async needsOnboarding(e){try{const n=await this.getUserProfile(e);return!n||!n.onboardingCompleto}catch(n){return console.error("Error al verificar onboarding:",n),!0}}}const Uc=new az,MI=Object.freeze(Object.defineProperty({__proto__:null,schoolService:Uc},Symbol.toStringTag,{value:"Module"})),iz=({school:t,setSchool:e,subject:n,setSubject:s})=>{const a=d=>{e(m=>({...m,[d.target.name]:d.target.value}))},i=d=>{s(m=>({...m,[d.target.name]:d.target.value}))},{user:o}=dt(),[l,c]=M.useState(!1);return M.useEffect(()=>{(async()=>{if(o&&o.schoolId&&(e(m=>({...m,schoolName:o.schoolName||m.schoolName})),!t.cct||t.cct!==o.schoolName)){c(!0);try{const m=await Uc.getSchoolById(o.schoolId);if(m){e(p=>({...p,cct:m.cct||p.cct,municipality:m.municipio||p.municipality,shift:m.turno!=="Matutino"?m.turno:p.shift,vision:m.vision||p.vision,infrastructure:m.infraestructura||p.infrastructure}));try{const{doc:p,getDoc:g}=await Eo(async()=>{const{doc:I,getDoc:b}=await Promise.resolve().then(()=>$V);return{doc:I,getDoc:b}},void 0),{db:x}=await Eo(async()=>{const{db:I}=await Promise.resolve().then(()=>NI);return{db:I}},void 0),y=p(x,"pmc",o.schoolId),T=await g(y);if(T.exists()){const I=T.data();if(I.metas&&Array.isArray(I.metas)){const b=I.metas.map(N=>` ${N.description||"Meta sin descripcin"} (${N.area})`).join(`
`);e(N=>({...N,communityGoals:b}))}}}catch(p){console.error("Error loading PMC goals:",p)}}}catch(m){console.error("Error loading school details:",m)}finally{c(!1)}}})()},[o,o==null?void 0:o.schoolId]),r.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[r.jsxs("section",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold uppercase tracking-wider text-xs",children:[r.jsx(wt,{className:"w-4 h-4"}),"Contexto Institucional"]}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-1",children:"Identidad de la Escuela"})]}),o&&r.jsxs("div",{className:"text-right hidden md:block",children:[r.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Autocompletado para"}),r.jsxs("p",{className:"text-sm font-medium text-indigo-600",children:[o.nombre," ",o.apellidoPaterno]})]})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[l&&r.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 bg-indigo-50 p-3 rounded-lg mb-4 text-sm",children:[r.jsx(al,{className:"w-4 h-4 animate-spin"}),"Sincronizando datos de tu escuela..."]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Dm,{className:"w-4 h-4 text-slate-400"})," Nombre del Plantel"]}),r.jsx("input",{name:"schoolName",value:t.schoolName,onChange:a,className:`w-full px-4 py-2 rounded-xl border outline-none transition-all ${o!=null&&o.schoolName?"bg-indigo-50 border-indigo-200":"border-slate-200 focus:ring-2 focus:ring-indigo-500"}`,placeholder:"Ej. Bachillerato Gral. Oficial Emiliano Zapata"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-slate-400"})," Clave de Centro de Trabajo (CCT) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{name:"cct",value:t.cct,onChange:a,className:`w-full px-4 py-2 rounded-xl border outline-none transition-all uppercase ${t.cct?"border-slate-200 focus:ring-2 focus:ring-indigo-500":"border-red-200 bg-red-50"}`,placeholder:"Ej. 21EBH0000X"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Turno"}),r.jsxs("select",{name:"shift",value:t.shift,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",children:[r.jsx("option",{value:"Matutino",children:"Matutino"}),r.jsx("option",{value:"Vespertino",children:"Vespertino"}),r.jsx("option",{value:"Nocturno",children:"Nocturno"}),r.jsx("option",{value:"Discontinuo",children:"Discontinuo"}),r.jsx("option",{value:"Mixto",children:"Mixto"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Ciclo Escolar"}),r.jsx("input",{name:"cycle",value:t.cycle,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Ej. 2024-2025"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:"Municipio"}),r.jsx("input",{name:"municipality",value:t.municipality,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Ej. Puebla, Tehuacn..."})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-slate-400"})," Infraestructura"]}),r.jsx("input",{name:"infrastructure",value:t.infrastructure,onChange:a,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Aulas, Proyector, Internet..."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Visin de Direccin"}),r.jsx("textarea",{name:"vision",value:t.vision,onChange:a,rows:2,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all",placeholder:"Qu busca lograr la direccin?"})]})]})]}),r.jsxs("section",{className:"bg-white rounded-3xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-indigo-700 font-bold uppercase tracking-wider text-xs",children:[r.jsx(it,{className:"w-4 h-4"}),"Marco Curricular Comn (MCCEMS)"]}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-1",children:"Vinculacin con Normativa SEP"})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsx(sz,{subject:n,setSubject:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Materia / UAC"}),r.jsx("input",{name:"subjectName",value:n.subjectName,onChange:i,className:"w-full px-4 py-2 rounded-xl border border-slate-200 bg-slate-50 text-slate-500",placeholder:"Seleccionado automticamente...",readOnly:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Categora MCCEMS"}),r.jsx("input",{name:"mccemsCategory",value:n.mccemsCategory,className:"w-full px-4 py-2 rounded-xl border border-slate-200 bg-slate-50 text-slate-500 capitalize",readOnly:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-semibold text-slate-700 flex items-center gap-2",children:["Contenidos Adicionales de la Escuela",r.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-400 px-2 py-0.5 rounded-full uppercase",children:"Opcional"})]}),r.jsx("textarea",{name:"curriculumContent",value:n.curriculumContent,onChange:i,rows:4,className:"w-full px-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-mono text-[11px]",placeholder:"Pega aqu progresiones especficas si no usas las del selector..."})]})]})]}),r.jsxs("div",{className:"bg-amber-50 p-6 rounded-3xl border border-amber-100 flex items-start gap-4",children:[r.jsx("div",{className:"bg-amber-500 text-white rounded-xl p-2 mt-0.5 shadow-sm",children:r.jsx(QU,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-amber-900 text-sm",children:"Informacin Importante"}),r.jsx("p",{className:"text-xs text-amber-800 leading-relaxed mt-1",children:"Al seleccionar una UAC arriba, la IA consultar automticamente los documentos base del MCCEMS (2022-2024), las Progresiones de Aprendizaje y las Lneas de Poltica Pblica de la SEP. Esto garantiza que tus planeaciones sean tcnica y legalmente vlidas para auditoras de supervisin."})]})]})]})};var PI={exports:{}};(function(t,e){(function(n,s){t.exports=s(M)})(typeof self<"u"?self:hR,function(n){return function(){var s={155:function(N){N.exports=n}},a={};function i(N){var w=a[N];if(w!==void 0)return w.exports;var D=a[N]={exports:{}};return s[N](D,D.exports,i),D.exports}i.d=function(N,w){for(var D in w)i.o(w,D)&&!i.o(N,D)&&Object.defineProperty(N,D,{enumerable:!0,get:w[D]})},i.o=function(N,w){return Object.prototype.hasOwnProperty.call(N,w)},i.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{useReactToPrint:function(){return b}});var l=i(155);const c="printWindow";function d({level:N="error",messages:w,suppressErrors:D=!1}){D||(N==="error"?console.error(w):N==="warning"?console.warn(w):console.debug(w))}function m(N,w){if(w||!N){const D=document.getElementById(c);D&&document.body.removeChild(D)}}function p(N){return N instanceof Error?N:new Error("Unknown Error")}function g(N,w){const{documentTitle:D,onAfterPrint:V,onPrintError:k,preserveAfterPrint:R,print:E,suppressErrors:S}=w;setTimeout(()=>{var C,_;if(N.contentWindow){let j=function(){V==null||V(),m(R)};var P=j;if(N.contentWindow.focus(),E)E(N).then(j).catch(H=>{k?k("print",p(H)):d({messages:["An error was thrown by the specified `print` function"],suppressErrors:S})});else{if(N.contentWindow.print){const H=(_=(C=N.contentDocument)===null||C===void 0?void 0:C.title)!==null&&_!==void 0?_:"",O=N.ownerDocument.title;D&&(N.ownerDocument.title=D,N.contentDocument&&(N.contentDocument.title=D)),N.contentWindow.print(),D&&(N.ownerDocument.title=O,N.contentDocument&&(N.contentDocument.title=H))}else d({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:S});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(H=>{var O,G;return((G=(O=navigator.userAgent)!==null&&O!==void 0?O:navigator.vendor)!==null&&G!==void 0?G:"opera"in window&&window.opera).match(H)})?setTimeout(j,500):j()}}else d({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:S})},500)}function x(N){const w=[],D=document.createTreeWalker(N,NodeFilter.SHOW_ELEMENT,null);let V=D.nextNode();for(;V;)w.push(V),V=D.nextNode();return w}function y(N,w,D){const V=x(N),k=x(w);if(V.length===k.length)for(let R=0;R<V.length;R++){const E=V[R],S=k[R],C=E.shadowRoot;if(C!==null){const _=S.attachShadow({mode:C.mode});_.innerHTML=C.innerHTML,y(C,_,D)}}else d({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",N,w],suppressErrors:D})}const T=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function I(N,w,D,V){var k,R,E,S,C;const{contentNode:_,clonedContentNode:P,clonedImgNodes:j,clonedVideoNodes:H,numResourcesToLoad:O,originalCanvasNodes:G}=D,{bodyClass:te,fonts:Y,ignoreGlobalStyles:ne,pageStyle:de,nonce:ye,suppressErrors:Qe,copyShadowRoots:Ge}=V;N.onload=null;const ie=(k=N.contentDocument)!==null&&k!==void 0?k:(R=N.contentWindow)===null||R===void 0?void 0:R.document;if(ie){const Ae=ie.body.appendChild(P);Ge&&y(_,Ae,!!Qe),Y&&(!((E=N.contentDocument)===null||E===void 0)&&E.fonts&&(!((S=N.contentWindow)===null||S===void 0)&&S.FontFace)?Y.forEach(be=>{const ae=new FontFace(be.family,be.source,{weight:be.weight,style:be.style});N.contentDocument.fonts.add(ae),ae.loaded.then(()=>{w(ae)}).catch(Z=>{w(ae,["Failed loading the font:",ae,"Load error:",p(Z)])})}):(Y.forEach(be=>{w(be)}),d({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:Qe})));const Pt=de??T,ut=ie.createElement("style");ye&&(ut.setAttribute("nonce",ye),ie.head.setAttribute("nonce",ye)),ut.appendChild(ie.createTextNode(Pt)),ie.head.appendChild(ut),te&&ie.body.classList.add(...te.split(" "));const Gt=ie.querySelectorAll("canvas");for(let be=0;be<G.length;++be){const ae=G[be],Z=Gt[be];if(Z===void 0){d({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ae],suppressErrors:Qe});continue}const pe=Z.getContext("2d");pe&&pe.drawImage(ae,0,0)}for(let be=0;be<j.length;be++){const ae=j[be],Z=ae.getAttribute("src");if(Z){const pe=new Image;pe.onload=()=>{w(ae)},pe.onerror=(He,ot,Qt,je,Oe)=>{w(ae,["Error loading <img>",ae,"Error",Oe])},pe.src=Z}else w(ae,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ae])}for(let be=0;be<H.length;be++){const ae=H[be];ae.preload="auto";const Z=ae.getAttribute("poster");if(Z){const pe=new Image;pe.onload=()=>{w(ae)},pe.onerror=(He,ot,Qt,je,Oe)=>{w(ae,["Error loading video poster",Z,"for video",ae,"Error:",Oe])},pe.src=Z}else ae.readyState>=2?w(ae):ae.src?(ae.onloadeddata=()=>{w(ae)},ae.onerror=(pe,He,ot,Qt,je)=>{w(ae,["Error loading video",ae,"Error",je])},ae.onstalled=()=>{w(ae,["Loading video stalled, skipping",ae])}):w(ae,["Error loading video, `src` is empty",ae])}const Kt="select",At=_.querySelectorAll(Kt),sn=ie.querySelectorAll(Kt);for(let be=0;be<At.length;be++)sn[be].value=At[be].value;if(!ne){const be=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ae=0,Z=be.length;ae<Z;++ae){const pe=be[ae];if(pe.tagName.toLowerCase()==="style"){const He=ie.createElement(pe.tagName),ot=pe.sheet;if(ot){let Qt="";try{const je=ot.cssRules.length;for(let Oe=0;Oe<je;++Oe)typeof ot.cssRules[Oe].cssText=="string"&&(Qt+=`${ot.cssRules[Oe].cssText}\r
`)}catch(je){d({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",pe,`Original error: ${p(je).message}`],level:"warning"})}He.setAttribute("id",`react-to-print-${ae}`),ye&&He.setAttribute("nonce",ye),He.appendChild(ie.createTextNode(Qt)),ie.head.appendChild(He)}}else if(pe.getAttribute("href"))if(pe.hasAttribute("disabled"))d({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",pe],level:"warning"}),w(pe);else{const He=ie.createElement(pe.tagName);for(let ot=0,Qt=pe.attributes.length;ot<Qt;++ot){const je=pe.attributes[ot];je&&He.setAttribute(je.nodeName,(C=je.nodeValue)!==null&&C!==void 0?C:"")}He.onload=()=>{w(He)},He.onerror=(ot,Qt,je,Oe,st)=>{w(He,["Failed to load",He,"Error:",st])},ye&&He.setAttribute("nonce",ye),ie.head.appendChild(He)}else d({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",pe],level:"warning"}),w(pe)}}}O===0&&g(N,V)}function b({bodyClass:N,contentRef:w,copyShadowRoots:D,documentTitle:V,fonts:k,ignoreGlobalStyles:R,nonce:E,onAfterPrint:S,onBeforePrint:C,onPrintError:_,pageStyle:P,preserveAfterPrint:j,print:H,printIframeProps:O,suppressErrors:G}){return(0,l.useCallback)(Y=>{function ne(){const de={bodyClass:N,contentRef:w,copyShadowRoots:D,documentTitle:V,fonts:k,ignoreGlobalStyles:R,nonce:E,onAfterPrint:S,onPrintError:_,pageStyle:P,preserveAfterPrint:j,print:H,suppressErrors:G},ye=function(ie){const Ae=document.createElement("iframe");return Ae.width=`${document.documentElement.clientWidth}px`,Ae.height=`${document.documentElement.clientHeight}px`,Ae.style.position="absolute",Ae.style.top=`-${document.documentElement.clientHeight+100}px`,Ae.style.left=`-${document.documentElement.clientWidth+100}px`,Ae.id=c,Ae.srcdoc="<!DOCTYPE html>",ie&&(ie.allow&&(Ae.allow=ie.allow),ie.referrerPolicy!==void 0&&(Ae.referrerPolicy=ie.referrerPolicy),ie.sandbox!==void 0&&(Ae.sandbox=ie.sandbox)),Ae}(O),Qe=function(ie,Ae){const{contentRef:Pt,fonts:ut,ignoreGlobalStyles:Gt,suppressErrors:Kt}=Ae,At=function({contentRef:He,optionalContent:ot,suppressErrors:Qt}){return ot&&typeof ot=="function"?(He&&d({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),ot()):He?He.current:void d({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Qt})}({contentRef:Pt,optionalContent:ie,suppressErrors:Kt});if(!At)return;const sn=At.cloneNode(!0),be=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ae=sn.querySelectorAll("img"),Z=sn.querySelectorAll("video"),pe=ut?ut.length:0;return{contentNode:At,clonedContentNode:sn,clonedImgNodes:ae,clonedVideoNodes:Z,numResourcesToLoad:(Gt?0:be.length)+ae.length+Z.length+pe,originalCanvasNodes:At.querySelectorAll("canvas")}}(Y,de);if(!Qe)return void d({messages:["There is nothing to print"],suppressErrors:G});const Ge=function(ie,Ae,Pt){const{suppressErrors:ut}=ie,Gt=[],Kt=[];return function(At,sn){Gt.includes(At)?d({level:"debug",messages:["Tried to mark a resource that has already been handled",At],suppressErrors:ut}):(sn?(d({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...sn],suppressErrors:ut}),Kt.push(At)):Gt.push(At),Gt.length+Kt.length===Ae&&g(Pt,ie))}}(de,Qe.numResourcesToLoad,ye);(function(ie,Ae,Pt,ut){ie.onload=()=>{I(ie,Ae,Pt,ut)},document.body.appendChild(ie)})(ye,Ge,Qe,de)}m(j,!0),C?C().then(()=>{ne()}).catch(de=>{_==null||_("onBeforePrint",p(de))}):ne()},[N,w,D,V,k,R,E,S,C,_,P,j,H,G])}return o}()})})(PI);var DI=PI.exports,rz={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oz,lz;function cz(){return{geminiUrl:oz,vertexUrl:lz}}function dz(t,e,n,s){var a,i;if(!(t!=null&&t.baseUrl)){const o=cz();return e?(a=o.vertexUrl)!==null&&a!==void 0?a:n:(i=o.geminiUrl)!==null&&i!==void 0?i:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Na{}function W(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const i=e[a];return i!=null?String(i):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function h(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const m=c[d];h(m,e.slice(i+1),n[d])}else for(const d of c)h(d,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];h(c[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const a=e[s];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(l=>u(l,e.slice(s+1),n)):n}else return n}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function uz(t,e){for(const[n,s]of Object.entries(e)){const a=n.split("."),i=s.split("."),o=new Set;let l=-1;for(let c=0;c<a.length;c++)if(a[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}Jg(t,a,i,0,o)}}function Jg(t,e,n,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2),l=t;if(o in l&&Array.isArray(l[o]))for(const c of l[o])Jg(c,e,n,s+1,a)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,l=Object.keys(o).filter(d=>!d.startsWith("_")&&!a.has(d)),c={};for(const d of l)c[d]=o[d];for(const[d,m]of Object.entries(c)){const p=[];for(const g of n.slice(s))g==="*"?p.push(d):p.push(g);h(o,p,m)}for(const d of l)delete o[d]}}else{const o=t;i in o&&Jg(o[i],e,n,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mz(t){const e={},n=u(t,["operationName"]);n!=null&&h(e,["operationName"],n);const s=u(t,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function hz(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],pz(o)),e}function fz(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],gz(o)),e}function pz(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xz(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function gz(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vz(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function xz(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],Cz(n)),e}function vz(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],Tz(n)),e}function yz(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function bz(t){const e={},n=u(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function _z(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Ez(o)),e}function Ez(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function kI(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Nz(o)),e}function Nz(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function Cz(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],hv(s));const a=u(t,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function Tz(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],hv(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(zE||(zE={}));var FE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(FE||(FE={}));var GE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(GE||(GE={}));var F;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(F||(F={}));var BE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(BE||(BE={}));var qE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(qE||(qE={}));var HE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(HE||(HE={}));var $E;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($E||($E={}));var YE;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(YE||(YE={}));var JE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(JE||(JE={}));var KE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(KE||(KE={}));var QE;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(QE||(QE={}));var XE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(XE||(XE={}));var WE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(WE||(WE={}));var ZE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ZE||(ZE={}));var eN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(eN||(eN={}));var tN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(tN||(tN={}));var nN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nN||(nN={}));var sN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sN||(sN={}));var aN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(aN||(aN={}));var iN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(iN||(iN={}));var Lm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Lm||(Lm={}));var rN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rN||(rN={}));var oN;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(oN||(oN={}));var lN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lN||(lN={}));var Kg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kg||(Kg={}));var cN;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cN||(cN={}));var dN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(dN||(dN={}));var uN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(uN||(uN={}));var mN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mN||(mN={}));var hN;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hN||(hN={}));var fN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(fN||(fN={}));var pN;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(pN||(pN={}));var gN;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gN||(gN={}));var xN;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(xN||(xN={}));var vN;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vN||(vN={}));var yN;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yN||(yN={}));var bN;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(bN||(bN={}));var _N;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(_N||(_N={}));var EN;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(EN||(EN={}));var NN;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(NN||(NN={}));var CN;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(CN||(CN={}));var TN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(TN||(TN={}));var SN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(SN||(SN={}));var wN;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(wN||(wN={}));var AN;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(AN||(AN={}));var IN;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(IN||(IN={}));var RN;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(RN||(RN={}));var jN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jN||(jN={}));var MN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(MN||(MN={}));var PN;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(PN||(PN={}));var DN;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(DN||(DN={}));var kN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kN||(kN={}));var LN;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(LN||(LN={}));var Yr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Yr||(Yr={}));class Qg{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pl{get text(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const p=[];for(const g of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,y]of Object.entries(g))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;m=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const p of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&m.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,s,a,i,o,l,c;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,s,a,i,o,l,c,d;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,s,a,i,o,l,c,d;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class VN{}class UN{}class Sz{}class wz{}class Az{}class Iz{}class ON{}class zN{}class FN{}class Rz{}class Vm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Vm;let a;const i=e;return n?a=fz(i):a=hz(i),Object.assign(s,a),s}}class GN{}class BN{}class qN{}class HN{}class jz{}class Mz{}class Pz{}class fv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new fv,i=_z(e);return Object.assign(s,i),s}}class Dz{}class kz{}class Lz{}class $N{}class Vz{get text(){var e,n,s;let a="",i=!1;const o=[];for(const l of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,a+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?a:void 0}get data(){var e,n,s;let a="";const i=[];for(const o of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&i.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(a+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Uz{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new pv,i=kI(e);return Object.assign(s,i),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function LI(t,e){const n=Pe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function VI(t){return Array.isArray(t)?t.map(e=>Um(e)):[Um(t)]}function Um(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function UI(t){const e=Um(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OI(t){const e=Um(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function zI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>YN(e)):[YN(t)]}function Xg(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function JN(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function KN(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function en(t){if(t==null)throw new Error("ContentUnion is required");return Xg(t)?t:{role:"user",parts:zI(t)}}function gv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=en(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=en(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>en(n)):[en(e)]}function Qn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(JN(t)||KN(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[en(t)]}const e=[],n=[],s=Xg(t[0]);for(const a of t){const i=Xg(a);if(i!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(a);else{if(JN(a)||KN(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return s||e.push({role:"user",parts:zI(n)}),e}function Oz(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(F).includes(n[0].toUpperCase())?n[0].toUpperCase():F.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(F).includes(s.toUpperCase())?s.toUpperCase():F.TYPE_UNSPECIFIED})}}function oo(t){const e={},n=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Oz(t.type,e);for(const[o,l]of Object.entries(t))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(F).includes(l.toUpperCase())?l.toUpperCase():F.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=oo(l);else if(s.includes(o)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(oo(d))}e[o]=c}else if(a.includes(o)){const c={};for(const[d,m]of Object.entries(l))c[d]=oo(m);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=l}return e}function xv(t){return oo(t)}function vv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function il(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oo(e.response));return t}function rl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zz(t,e,n,s=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Ca(t,e){if(typeof e!="string")throw new Error("name must be a string");return zz(t,e,"cachedContents")}function FI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ri(t){return hv(t)}function Fz(t){return t!=null&&typeof t=="object"&&"name"in t}function Gz(t){return t!=null&&typeof t=="object"&&"video"in t}function Bz(t){return t!=null&&typeof t=="object"&&"uri"in t}function GI(t){var e;let n;if(Fz(t)&&(n=t.name),!(Bz(t)&&(n=t.uri,n===void 0))&&!(Gz(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function BI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function qI(t){for(const e of["models","tunedModels","publisherModels"])if(qz(t,e))return t[e];return[]}function qz(t,e){return t!==null&&typeof t=="object"&&e in t}function Hz(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $z(t,e={}){const n=[],s=new Set;for(const a of t){const i=a.name;if(s.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);s.add(i);const o=Hz(a,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function HI(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Yz(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $I(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let i=!1;for(const o of a){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ol(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function YI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jz(t){const e={},n=u(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const s=u(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>AF(o))),h(e,["inlinedResponses"],i)}const a=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["inlinedEmbedContentResponses"],i)}return e}function Kz(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const s=u(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const a=u(t,["bigqueryDestination","outputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Qz(t){const e={},n=u(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const s=u(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const a=u(t,["bigqueryUri"]);if(a!=null&&h(e,["bigqueryDestination","outputUri"],a),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ku(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["metadata","state"]);a!=null&&h(e,["state"],YI(a));const i=u(t,["metadata","createTime"]);i!=null&&h(e,["createTime"],i);const o=u(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const l=u(t,["metadata","updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(t,["metadata","model"]);c!=null&&h(e,["model"],c);const d=u(t,["metadata","output"]);return d!=null&&h(e,["dest"],Jz($I(d))),e}function Wg(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["state"]);a!=null&&h(e,["state"],YI(a));const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["createTime"]);o!=null&&h(e,["createTime"],o);const l=u(t,["startTime"]);l!=null&&h(e,["startTime"],l);const c=u(t,["endTime"]);c!=null&&h(e,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(e,["updateTime"],d);const m=u(t,["model"]);m!=null&&h(e,["model"],m);const p=u(t,["inputConfig"]);p!=null&&h(e,["src"],Xz(p));const g=u(t,["outputConfig"]);g!=null&&h(e,["dest"],Kz($I(g)));const x=u(t,["completionStats"]);return x!=null&&h(e,["completionStats"],x),e}function Xz(t){const e={},n=u(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const s=u(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const a=u(t,["bigquerySource","inputUri"]);return a!=null&&h(e,["bigqueryUri"],a),e}function Wz(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&h(n,["fileName"],s);const a=u(e,["inlinedRequests"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>wF(t,o))),h(n,["requests","requests"],i)}return n}function Zz(t){const e={},n=u(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const s=u(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const a=u(t,["bigqueryUri"]);if(a!=null&&h(e,["bigquerySource","inputUri"],a),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eF(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ol(t,s)),n}function nF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ol(t,s)),n}function sF(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const s=u(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],aF(s));const a=u(t,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const i=u(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const l=u(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&h(e,["index"],c);const d=u(t,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const m=u(t,["safetyRatings"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),h(e,["safetyRatings"],g)}const p=u(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function aF(t){const e={},n=u(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["citations"],s)}return e}function JI(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>kF(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function iF(t,e){const n={},s=u(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function rF(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["dest"]);return e!==void 0&&a!=null&&h(e,["outputConfig"],Qz(Yz(a))),n}function QN(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["src"]);a!=null&&h(n,["batch","inputConfig"],Wz(t,HI(t,a)));const i=u(e,["config"]);return i!=null&&iF(i,n),n}function oF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],Pe(t,s));const a=u(e,["src"]);a!=null&&h(n,["inputConfig"],Zz(HI(t,a)));const i=u(e,["config"]);return i!=null&&rF(i,n),n}function lF(t,e){const n={},s=u(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),n}function cF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["src"]);a!=null&&h(n,["batch","inputConfig"],gF(t,a));const i=u(e,["config"]);return i!=null&&lF(i,n),n}function dF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ol(t,s)),n}function uF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ol(t,s)),n}function mF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);return i!=null&&h(e,["error"],i),e}function hF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);return i!=null&&h(e,["error"],i),e}function fF(t,e){const n={},s=u(e,["contents"]);if(s!=null){let i=gv(t,s);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["requests[]","request","content"],i)}const a=u(e,["config"]);return a!=null&&(h(n,["_self"],pF(a,n)),uz(n,{"requests[].*":"requests[].request.*"})),n}function pF(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gF(t,e){const n={},s=u(e,["fileName"]);s!=null&&h(n,["file_name"],s);const a=u(e,["inlinedRequests"]);return a!=null&&h(n,["requests"],fF(t,a)),n}function xF(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vF(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yF(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bF(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],JI(en(a)));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const I=u(e,["responseMimeType"]);I!=null&&h(s,["responseMimeType"],I);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],xv(b));const N=u(e,["responseJsonSchema"]);if(N!=null&&h(s,["responseJsonSchema"],N),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=u(e,["safetySettings"]);if(n!==void 0&&w!=null){let j=w;Array.isArray(j)&&(j=j.map(H=>LF(H))),h(n,["safetySettings"],j)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let j=rl(D);Array.isArray(j)&&(j=j.map(H=>UF(il(H)))),h(n,["tools"],j)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&h(n,["toolConfig"],VF(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=u(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],Ca(t,k));const R=u(e,["responseModalities"]);R!=null&&h(s,["responseModalities"],R);const E=u(e,["mediaResolution"]);E!=null&&h(s,["mediaResolution"],E);const S=u(e,["speechConfig"]);if(S!=null&&h(s,["speechConfig"],vv(S)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=u(e,["thinkingConfig"]);C!=null&&h(s,["thinkingConfig"],C);const _=u(e,["imageConfig"]);_!=null&&h(s,["imageConfig"],SF(_));const P=u(e,["enableEnhancedCivicAnswers"]);return P!=null&&h(s,["enableEnhancedCivicAnswers"],P),s}function _F(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>sF(d))),h(e,["candidates"],c)}const a=u(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const i=u(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&h(e,["responseId"],o);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function EF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ol(t,s)),n}function NF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],ol(t,s)),n}function CF(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function TF(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function SF(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["request","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let l=Qn(a);Array.isArray(l)&&(l=l.map(c=>JI(c))),h(n,["request","contents"],l)}const i=u(e,["metadata"]);i!=null&&h(n,["metadata"],i);const o=u(e,["config"]);return o!=null&&h(n,["request","generationConfig"],bF(t,o,u(n,["request"],{}))),n}function AF(t){const e={},n=u(t,["response"]);n!=null&&h(e,["response"],_F(n));const s=u(t,["error"]);return s!=null&&h(e,["error"],s),e}function IF(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);if(e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function RF(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);e!==void 0&&a!=null&&h(e,["_query","pageToken"],a);const i=u(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function jF(t){const e={},n=u(t,["config"]);return n!=null&&IF(n,e),e}function MF(t){const e={},n=u(t,["config"]);return n!=null&&RF(n,e),e}function PF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["operations"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>ku(o))),h(e,["batchJobs"],i)}return e}function DF(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["batchPredictionJobs"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>Wg(o))),h(e,["batchJobs"],i)}return e}function kF(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],xF(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],vF(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],eF(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function LF(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function VF(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],yF(s)),e}function UF(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],CF(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],TF(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ba;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ba||(ba={}));class vr{constructor(e,n,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,a)}init(e,n,s){var a,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!s||Object.keys(s).length===0?o={config:{}}:typeof s=="object"?o=Object.assign({},s):o=s,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(a=o.config)===null||a===void 0?void 0:a.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OF extends Na{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(ba.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=QN(this.apiClient,e),s=n._url,a=W("{model}:batchGenerateContent",s),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const m of c){const p=Object.assign({},m);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const x=p.request;x.systemInstruction=g,p.request=x}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?s.dest=`${i.slice(0,-6)}/dest`:s.dest=`${i}_dest_${a}`;else if(o)s.dest=`${o}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=oF(this.apiClient,e);return l=W("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Wg(m))}else{const d=QN(this.apiClient,e);return l=W("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>ku(m))}}async createEmbeddingsInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cF(this.apiClient,e);return i=W("{model}:asyncBatchEmbedContent",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>ku(c))}}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=NF(this.apiClient,e);return l=W("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>Wg(m))}else{const d=EF(this.apiClient,e);return l=W("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>ku(m))}}async cancel(e){var n,s,a,i;let o="",l={};if(this.apiClient.isVertexAI()){const c=nF(this.apiClient,e);o=W("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const c=tF(this.apiClient,e);o=W("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=MF(e);return l=W("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=DF(m),g=new $N;return Object.assign(g,p),g})}else{const d=jF(e);return l=W("batches",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=PF(m),g=new $N;return Object.assign(g,p),g})}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=uF(this.apiClient,e);return l=W("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>hF(m))}else{const d=dF(this.apiClient,e);return l=W("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>mF(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zF(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function XN(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>c9(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function FF(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let m=Qn(o);Array.isArray(m)&&(m=m.map(p=>XN(p))),h(e,["contents"],m)}const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&h(e,["systemInstruction"],XN(en(l)));const c=u(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>u9(p))),h(e,["tools"],m)}const d=u(t,["toolConfig"]);if(e!==void 0&&d!=null&&h(e,["toolConfig"],d9(d)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function GF(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);e!==void 0&&a!=null&&h(e,["expireTime"],a);const i=u(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let p=Qn(o);Array.isArray(p)&&(p=p.map(g=>g)),h(e,["contents"],p)}const l=u(t,["systemInstruction"]);e!==void 0&&l!=null&&h(e,["systemInstruction"],en(l));const c=u(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>m9(g))),h(e,["tools"],p)}const d=u(t,["toolConfig"]);e!==void 0&&d!=null&&h(e,["toolConfig"],d);const m=u(t,["kmsKeyName"]);return e!==void 0&&m!=null&&h(e,["encryption_spec","kmsKeyName"],m),n}function BF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],LI(t,s));const a=u(e,["config"]);return a!=null&&FF(a,n),n}function qF(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["model"],LI(t,s));const a=u(e,["config"]);return a!=null&&GF(a,n),n}function HF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ca(t,s)),n}function $F(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ca(t,s)),n}function YF(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function JF(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function KF(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QF(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XF(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WF(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ZF(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ca(t,s)),n}function e9(t,e){const n={},s=u(e,["name"]);return s!=null&&h(n,["_url","name"],Ca(t,s)),n}function t9(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n9(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function a9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function i9(t){const e={},n=u(t,["config"]);return n!=null&&s9(n,e),e}function r9(t){const e={},n=u(t,["config"]);return n!=null&&a9(n,e),e}function o9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function l9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["cachedContents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["cachedContents"],i)}return e}function c9(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],KF(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],QF(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],zF(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function d9(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],XF(s)),e}function u9(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],t9(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],n9(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function m9(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>WF(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function h9(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function f9(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const a=u(t,["expireTime"]);return e!==void 0&&a!=null&&h(e,["expireTime"],a),n}function p9(t,e){const n={},s=u(e,["name"]);s!=null&&h(n,["_url","name"],Ca(t,s));const a=u(e,["config"]);return a!=null&&h9(a,n),n}function g9(t,e){const n={},s=u(e,["name"]);s!=null&&h(n,["_url","name"],Ca(t,s));const a=u(e,["config"]);return a!=null&&f9(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x9 extends Na{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(ba.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=qF(this.apiClient,e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=BF(this.apiClient,e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=e9(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=ZF(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=$F(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=JF(m),g=new qN;return Object.assign(g,p),g})}else{const d=HF(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=YF(m),g=new qN;return Object.assign(g,p),g})}}async update(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=g9(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=p9(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=r9(e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=l9(m),g=new HN;return Object.assign(g,p),g})}else{const d=i9(e);return l=W("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=o9(m),g=new HN;return Object.assign(g,p),g})}}}function Om(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function WN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(t){return this instanceof me?(this.v=t,this):new me(t)}function hs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(x){return function(y){return Promise.resolve(y).then(x,p)}}function l(x,y){s[x]&&(a[x]=function(T){return new Promise(function(I,b){i.push([x,T,I,b])>1||c(x,T)})},y&&(a[x]=y(a[x])))}function c(x,y){try{d(s[x](y))}catch(T){g(i[0][3],T)}}function d(x){x.value instanceof me?Promise.resolve(x.value.v).then(m,p):g(i[0][2],x)}function m(x){c("next",x)}function p(x){c("throw",x)}function g(x,y){x(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function fs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof WN=="function"?WN(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(i){n[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v9(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:KI(n)}function KI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function y9(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZN(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let i=!0;for(;s<n&&t[s].role==="model";)a.push(t[s]),i&&!KI(t[s])&&(i=!1),s++;i?e.push(...a):e.pop()}return e}class b9{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new _9(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _9{constructor(e,n,s,a={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=a,this.history=i,this.sendPromise=Promise.resolve(),y9(i)}async sendMessage(e){var n;await this.sendPromise;const s=en(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,l;const c=await a,d=(o=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,m=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];m!=null&&(g=(l=m.slice(p))!==null&&l!==void 0?l:[]);const x=d?[d]:[];this.recordHistory(s,x,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const s=en(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const i=await a;return this.processStreamResponse(i,s)}getHistory(e=!1){const n=e?ZN(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return hs(this,arguments,function*(){var a,i,o,l,c,d;const m=[];try{for(var p=!0,g=fs(e),x;x=yield me(g.next()),a=x.done,!a;p=!0){l=x.value,p=!1;const y=l;if(v9(y)){const T=(d=(c=y.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;T!==void 0&&m.push(T)}yield yield me(y)}}catch(y){i={error:y}}finally{try{!p&&!a&&(o=g.return)&&(yield me(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,m)})}recordHistory(e,n,s){let a=[];n.length>0&&n.every(i=>i.role!==void 0)?a=n:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...ZN(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Bh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E9(t){const e={},n=u(t,["file"]);return n!=null&&h(e,["file"],n),e}function N9(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function C9(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],GI(n)),e}function T9(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function S9(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","file"],GI(n)),e}function w9(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function A9(t){const e={},n=u(t,["config"]);return n!=null&&w9(n,e),e}function I9(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["files"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R9 extends Na{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(ba.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=A9(e);return i=W("files",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=I9(c),m=new Dz;return Object.assign(m,d),m})}}async createInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=E9(e);return i=W("upload/v1beta/files",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=N9(c),m=new kz;return Object.assign(m,d),m})}}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=S9(e);return i=W("files/{file}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=C9(e);return i=W("files/{file}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=T9(c),m=new Lz;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lu(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function j9(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Y9(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function M9(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function P9(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D9(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function k9(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=u(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const a=u(t,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const i=u(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const l=u(t,["frequencyPenalty"]);l!=null&&h(e,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&h(e,["logprobs"],c);const d=u(t,["maxOutputTokens"]);d!=null&&h(e,["maxOutputTokens"],d);const m=u(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const p=u(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const g=u(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const x=u(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const y=u(t,["responseModalities"]);y!=null&&h(e,["responseModalities"],y);const T=u(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const I=u(t,["routingConfig"]);I!=null&&h(e,["routingConfig"],I);const b=u(t,["seed"]);b!=null&&h(e,["seed"],b);const N=u(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],N);const w=u(t,["stopSequences"]);w!=null&&h(e,["stopSequences"],w);const D=u(t,["temperature"]);D!=null&&h(e,["temperature"],D);const V=u(t,["thinkingConfig"]);V!=null&&h(e,["thinkingConfig"],V);const k=u(t,["topK"]);k!=null&&h(e,["topK"],k);const R=u(t,["topP"]);if(R!=null&&h(e,["topP"],R),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L9(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function V9(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function U9(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],yv(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],j9(en(y)));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let k=rl(T);Array.isArray(k)&&(k=k.map(R=>K9(il(R)))),h(e,["setup","tools"],k)}const I=u(t,["sessionResumption"]);e!==void 0&&I!=null&&h(e,["setup","sessionResumption"],J9(I));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const w=u(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&h(e,["setup","realtimeInputConfig"],w);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);if(e!==void 0&&V!=null&&h(e,["setup","proactivity"],V),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function O9(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],k9(s));const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],yv(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],en(y));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let R=rl(T);Array.isArray(R)&&(R=R.map(E=>Q9(il(E)))),h(e,["setup","tools"],R)}const I=u(t,["sessionResumption"]);e!==void 0&&I!=null&&h(e,["setup","sessionResumption"],I);const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const w=u(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&h(e,["setup","realtimeInputConfig"],w);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);e!==void 0&&V!=null&&h(e,["setup","proactivity"],V);const k=u(t,["explicitVadSignal"]);return e!==void 0&&k!=null&&h(e,["setup","explicitVadSignal"],k),n}function z9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],Pe(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],U9(a,n)),n}function F9(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],Pe(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],O9(a,n)),n}function G9(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function B9(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["weightedPrompts"],s)}return e}function q9(t){const e={},n=u(t,["media"]);if(n!=null){let d=VI(n);Array.isArray(d)&&(d=d.map(m=>Lu(m))),h(e,["mediaChunks"],d)}const s=u(t,["audio"]);s!=null&&h(e,["audio"],Lu(OI(s)));const a=u(t,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const i=u(t,["video"]);i!=null&&h(e,["video"],Lu(UI(i)));const o=u(t,["text"]);o!=null&&h(e,["text"],o);const l=u(t,["activityStart"]);l!=null&&h(e,["activityStart"],l);const c=u(t,["activityEnd"]);return c!=null&&h(e,["activityEnd"],c),e}function H9(t){const e={},n=u(t,["media"]);if(n!=null){let d=VI(n);Array.isArray(d)&&(d=d.map(m=>m)),h(e,["mediaChunks"],d)}const s=u(t,["audio"]);s!=null&&h(e,["audio"],OI(s));const a=u(t,["audioStreamEnd"]);a!=null&&h(e,["audioStreamEnd"],a);const i=u(t,["video"]);i!=null&&h(e,["video"],UI(i));const o=u(t,["text"]);o!=null&&h(e,["text"],o);const l=u(t,["activityStart"]);l!=null&&h(e,["activityStart"],l);const c=u(t,["activityEnd"]);return c!=null&&h(e,["activityEnd"],c),e}function $9(t){const e={},n=u(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const s=u(t,["serverContent"]);s!=null&&h(e,["serverContent"],s);const a=u(t,["toolCall"]);a!=null&&h(e,["toolCall"],a);const i=u(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],i);const o=u(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],X9(o));const l=u(t,["goAway"]);l!=null&&h(e,["goAway"],l);const c=u(t,["sessionResumptionUpdate"]);c!=null&&h(e,["sessionResumptionUpdate"],c);const d=u(t,["voiceActivityDetectionSignal"]);return d!=null&&h(e,["voiceActivityDetectionSignal"],d),e}function Y9(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],M9(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],P9(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],Lu(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function J9(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function K9(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],L9(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],V9(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function Q9(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>D9(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function X9(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const a=u(t,["candidatesTokenCount"]);a!=null&&h(e,["responseTokenCount"],a);const i=u(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const o=u(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const l=u(t,["totalTokenCount"]);l!=null&&h(e,["totalTokenCount"],l);const c=u(t,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["promptTokensDetails"],x)}const d=u(t,["cacheTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["cacheTokensDetails"],x)}const m=u(t,["candidatesTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["responseTokensDetails"],x)}const p=u(t,["toolUsePromptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(y=>y)),h(e,["toolUsePromptTokensDetails"],x)}const g=u(t,["trafficType"]);return g!=null&&h(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W9(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Z9(t){const e={},n=u(t,["content"]);n!=null&&h(e,["content"],n);const s=u(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],e8(s));const a=u(t,["tokenCount"]);a!=null&&h(e,["tokenCount"],a);const i=u(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const l=u(t,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(t,["index"]);c!=null&&h(e,["index"],c);const d=u(t,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const m=u(t,["safetyRatings"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),h(e,["safetyRatings"],g)}const p=u(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function e8(t){const e={},n=u(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),h(e,["citations"],s)}return e}function t8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let i=Qn(a);Array.isArray(i)&&(i=i.map(o=>o)),h(n,["contents"],i)}return n}function n8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(e,["tokensInfo"],a)}return e}function s8(t){const e={},n=u(t,["values"]);n!=null&&h(e,["values"],n);const s=u(t,["statistics"]);return s!=null&&h(e,["statistics"],a8(s)),e}function a8(t){const e={},n=u(t,["truncated"]);n!=null&&h(e,["truncated"],n);const s=u(t,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function qh(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>h7(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function i8(t){const e={},n=u(t,["controlType"]);n!=null&&h(e,["controlType"],n);const s=u(t,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function r8(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function o8(t,e){const n={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],en(s));const a=u(t,["tools"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>ZI(l))),h(e,["tools"],o)}const i=u(t,["generationConfig"]);return e!==void 0&&i!=null&&h(e,["generationConfig"],W8(i)),n}function l8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>qh(l))),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&r8(i),n}function c8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&o8(i,n),n}function d8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const a=u(t,["cachedContentTokenCount"]);return a!=null&&h(e,["cachedContentTokenCount"],a),e}function u8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function m8(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],Pe(t,s)),n}function h8(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],Pe(t,s)),n}function f8(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function p8(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function g8(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const x=u(t,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=u(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const I=u(t,["addWatermark"]);e!==void 0&&I!=null&&h(e,["parameters","addWatermark"],I);const b=u(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=u(t,["editMode"]);e!==void 0&&N!=null&&h(e,["parameters","editMode"],N);const w=u(t,["baseSteps"]);return e!==void 0&&w!=null&&h(e,["parameters","editConfig","baseSteps"],w),n}function x8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>y7(c))),h(n,["instances[0]","referenceImages"],l)}const o=u(e,["config"]);return o!=null&&g8(o,n),n}function v8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Hh(i))),h(e,["generatedImages"],a)}return e}function y8(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["requests[]","title"],a);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function b8(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const a=u(t,["title"]);e!==void 0&&a!=null&&h(e,["instances[]","title"],a);const i=u(t,["outputDimensionality"]);e!==void 0&&i!=null&&h(e,["parameters","outputDimensionality"],i);const o=u(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const l=u(t,["autoTruncate"]);return e!==void 0&&l!=null&&h(e,["parameters","autoTruncate"],l),n}function _8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let l=gv(t,a);Array.isArray(l)&&(l=l.map(c=>c)),h(n,["requests[]","content"],l)}const i=u(e,["config"]);i!=null&&y8(i,n);const o=u(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],Pe(t,o)),n}function E8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let o=gv(t,a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["instances[]","content"],o)}const i=u(e,["config"]);return i!=null&&b8(i,n),n}function N8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["embeddings"],i)}const a=u(t,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function C8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions[]","embeddings"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>s8(o))),h(e,["embeddings"],i)}const a=u(t,["metadata"]);return a!=null&&h(e,["metadata"],a),e}function T8(t){const e={},n=u(t,["endpoint"]);n!=null&&h(e,["name"],n);const s=u(t,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function S8(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function w8(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function A8(t){const e={},n=u(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const s=u(t,["mode"]);if(s!=null&&h(e,["mode"],s),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function I8(t){const e={},n=u(t,["description"]);n!=null&&h(e,["description"],n);const s=u(t,["name"]);s!=null&&h(e,["name"],s);const a=u(t,["parameters"]);a!=null&&h(e,["parameters"],a);const i=u(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&h(e,["response"],o);const l=u(t,["responseJsonSchema"]);if(l!=null&&h(e,["responseJsonSchema"],l),u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function R8(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],qh(en(a)));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const I=u(e,["responseMimeType"]);I!=null&&h(s,["responseMimeType"],I);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],xv(b));const N=u(e,["responseJsonSchema"]);if(N!=null&&h(s,["responseJsonSchema"],N),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=u(e,["safetySettings"]);if(n!==void 0&&w!=null){let j=w;Array.isArray(j)&&(j=j.map(H=>b7(H))),h(n,["safetySettings"],j)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let j=rl(D);Array.isArray(j)&&(j=j.map(H=>w7(il(H)))),h(n,["tools"],j)}const V=u(e,["toolConfig"]);if(n!==void 0&&V!=null&&h(n,["toolConfig"],S7(V)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=u(e,["cachedContent"]);n!==void 0&&k!=null&&h(n,["cachedContent"],Ca(t,k));const R=u(e,["responseModalities"]);R!=null&&h(s,["responseModalities"],R);const E=u(e,["mediaResolution"]);E!=null&&h(s,["mediaResolution"],E);const S=u(e,["speechConfig"]);if(S!=null&&h(s,["speechConfig"],vv(S)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=u(e,["thinkingConfig"]);C!=null&&h(s,["thinkingConfig"],C);const _=u(e,["imageConfig"]);_!=null&&h(s,["imageConfig"],s7(_));const P=u(e,["enableEnhancedCivicAnswers"]);return P!=null&&h(s,["enableEnhancedCivicAnswers"],P),s}function j8(t,e,n){const s={},a=u(e,["systemInstruction"]);n!==void 0&&a!=null&&h(n,["systemInstruction"],en(a));const i=u(e,["temperature"]);i!=null&&h(s,["temperature"],i);const o=u(e,["topP"]);o!=null&&h(s,["topP"],o);const l=u(e,["topK"]);l!=null&&h(s,["topK"],l);const c=u(e,["candidateCount"]);c!=null&&h(s,["candidateCount"],c);const d=u(e,["maxOutputTokens"]);d!=null&&h(s,["maxOutputTokens"],d);const m=u(e,["stopSequences"]);m!=null&&h(s,["stopSequences"],m);const p=u(e,["responseLogprobs"]);p!=null&&h(s,["responseLogprobs"],p);const g=u(e,["logprobs"]);g!=null&&h(s,["logprobs"],g);const x=u(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const y=u(e,["frequencyPenalty"]);y!=null&&h(s,["frequencyPenalty"],y);const T=u(e,["seed"]);T!=null&&h(s,["seed"],T);const I=u(e,["responseMimeType"]);I!=null&&h(s,["responseMimeType"],I);const b=u(e,["responseSchema"]);b!=null&&h(s,["responseSchema"],xv(b));const N=u(e,["responseJsonSchema"]);N!=null&&h(s,["responseJsonSchema"],N);const w=u(e,["routingConfig"]);w!=null&&h(s,["routingConfig"],w);const D=u(e,["modelSelectionConfig"]);D!=null&&h(s,["modelConfig"],D);const V=u(e,["safetySettings"]);if(n!==void 0&&V!=null){let G=V;Array.isArray(G)&&(G=G.map(te=>te)),h(n,["safetySettings"],G)}const k=u(e,["tools"]);if(n!==void 0&&k!=null){let G=rl(k);Array.isArray(G)&&(G=G.map(te=>ZI(il(te)))),h(n,["tools"],G)}const R=u(e,["toolConfig"]);n!==void 0&&R!=null&&h(n,["toolConfig"],R);const E=u(e,["labels"]);n!==void 0&&E!=null&&h(n,["labels"],E);const S=u(e,["cachedContent"]);n!==void 0&&S!=null&&h(n,["cachedContent"],Ca(t,S));const C=u(e,["responseModalities"]);C!=null&&h(s,["responseModalities"],C);const _=u(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const P=u(e,["speechConfig"]);P!=null&&h(s,["speechConfig"],vv(P));const j=u(e,["audioTimestamp"]);j!=null&&h(s,["audioTimestamp"],j);const H=u(e,["thinkingConfig"]);H!=null&&h(s,["thinkingConfig"],H);const O=u(e,["imageConfig"]);if(O!=null&&h(s,["imageConfig"],a7(O)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function eC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>qh(l))),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&h(n,["generationConfig"],R8(t,i,n)),n}function tC(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["contents"]);if(a!=null){let o=Qn(a);Array.isArray(o)&&(o=o.map(l=>l)),h(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&h(n,["generationConfig"],j8(t,i,n)),n}function nC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>Z9(d))),h(e,["candidates"],c)}const a=u(t,["modelVersion"]);a!=null&&h(e,["modelVersion"],a);const i=u(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&h(e,["responseId"],o);const l=u(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function sC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(m=>m)),h(e,["candidates"],d)}const a=u(t,["createTime"]);a!=null&&h(e,["createTime"],a);const i=u(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const l=u(t,["responseId"]);l!=null&&h(e,["responseId"],l);const c=u(t,["usageMetadata"]);return c!=null&&h(e,["usageMetadata"],c),e}function M8(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const i=u(t,["guidanceScale"]);if(e!==void 0&&i!=null&&h(e,["parameters","guidanceScale"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=u(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&h(e,["parameters","includeSafetyAttributes"],c);const d=u(t,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const m=u(t,["language"]);e!==void 0&&m!=null&&h(e,["parameters","language"],m);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const g=u(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=u(t,["imageSize"]);if(e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function P8(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=u(t,["guidanceScale"]);e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l);const c=u(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const x=u(t,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const y=u(t,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const T=u(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const I=u(t,["addWatermark"]);e!==void 0&&I!=null&&h(e,["parameters","addWatermark"],I);const b=u(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=u(t,["imageSize"]);e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N);const w=u(t,["enhancePrompt"]);return e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w),n}function D8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["config"]);return i!=null&&M8(i,n),n}function k8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["config"]);return i!=null&&P8(i,n),n}function L8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>J8(o))),h(e,["generatedImages"],i)}const a=u(t,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],XI(a)),e}function V8(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Hh(o))),h(e,["generatedImages"],i)}const a=u(t,["positivePromptSafetyAttributes"]);return a!=null&&h(e,["positivePromptSafetyAttributes"],WI(a)),e}function U8(t,e){const n={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=u(t,["durationSeconds"]);if(e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const o=u(t,["resolution"]);e!==void 0&&o!=null&&h(e,["parameters","resolution"],o);const l=u(t,["personGeneration"]);if(e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=u(t,["negativePrompt"]);e!==void 0&&c!=null&&h(e,["parameters","negativePrompt"],c);const d=u(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&h(e,["parameters","enhancePrompt"],d),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=u(t,["lastFrame"]);e!==void 0&&m!=null&&h(e,["instances[0]","lastFrame"],$h(m));const p=u(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>z7(x))),h(e,["instances[0]","referenceImages"],g)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function O8(t,e){const n={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&h(e,["parameters","storageUri"],a);const i=u(t,["fps"]);e!==void 0&&i!=null&&h(e,["parameters","fps"],i);const o=u(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const l=u(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=u(t,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const m=u(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=u(t,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const g=u(t,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const x=u(t,["enhancePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x);const y=u(t,["generateAudio"]);e!==void 0&&y!=null&&h(e,["parameters","generateAudio"],y);const T=u(t,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],_s(T));const I=u(t,["referenceImages"]);if(e!==void 0&&I!=null){let w=I;Array.isArray(w)&&(w=w.map(D=>F7(D))),h(e,["instances[0]","referenceImages"],w)}const b=u(t,["mask"]);e!==void 0&&b!=null&&h(e,["instances[0]","mask"],O7(b));const N=u(t,["compressionQuality"]);return e!==void 0&&N!=null&&h(e,["parameters","compressionQuality"],N),n}function z8(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],q8(o)),e}function F8(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],H8(o)),e}function G8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],$h(i));const o=u(e,["video"]);o!=null&&h(n,["instances[0]","video"],e1(o));const l=u(e,["source"]);l!=null&&$8(l,n);const c=u(e,["config"]);return c!=null&&U8(c,n),n}function B8(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["prompt"]);a!=null&&h(n,["instances[0]","prompt"],a);const i=u(e,["image"]);i!=null&&h(n,["instances[0]","image"],_s(i));const o=u(e,["video"]);o!=null&&h(n,["instances[0]","video"],t1(o));const l=u(e,["source"]);l!=null&&Y8(l,n);const c=u(e,["config"]);return c!=null&&O8(c,n),n}function q8(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Q8(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function H8(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>X8(o))),h(e,["generatedVideos"],i)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const a=u(t,["raiMediaFilteredReasons"]);return a!=null&&h(e,["raiMediaFilteredReasons"],a),e}function $8(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],$h(a));const i=u(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],e1(i)),n}function Y8(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],_s(a));const i=u(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],t1(i)),n}function J8(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],i7(n));const s=u(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const a=u(t,["_self"]);return a!=null&&h(e,["safetyAttributes"],XI(a)),e}function Hh(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["image"],QI(n));const s=u(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const a=u(t,["_self"]);a!=null&&h(e,["safetyAttributes"],WI(a));const i=u(t,["prompt"]);return i!=null&&h(e,["enhancedPrompt"],i),e}function K8(t){const e={},n=u(t,["_self"]);n!=null&&h(e,["mask"],QI(n));const s=u(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(e,["labels"],a)}return e}function Q8(t){const e={},n=u(t,["video"]);return n!=null&&h(e,["video"],V7(n)),e}function X8(t){const e={},n=u(t,["_self"]);return n!=null&&h(e,["video"],U7(n)),e}function W8(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const s=u(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const a=u(t,["audioTimestamp"]);a!=null&&h(e,["audioTimestamp"],a);const i=u(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const l=u(t,["frequencyPenalty"]);l!=null&&h(e,["frequencyPenalty"],l);const c=u(t,["logprobs"]);c!=null&&h(e,["logprobs"],c);const d=u(t,["maxOutputTokens"]);d!=null&&h(e,["maxOutputTokens"],d);const m=u(t,["mediaResolution"]);m!=null&&h(e,["mediaResolution"],m);const p=u(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const g=u(t,["responseLogprobs"]);g!=null&&h(e,["responseLogprobs"],g);const x=u(t,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const y=u(t,["responseModalities"]);y!=null&&h(e,["responseModalities"],y);const T=u(t,["responseSchema"]);T!=null&&h(e,["responseSchema"],T);const I=u(t,["routingConfig"]);I!=null&&h(e,["routingConfig"],I);const b=u(t,["seed"]);b!=null&&h(e,["seed"],b);const N=u(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],N);const w=u(t,["stopSequences"]);w!=null&&h(e,["stopSequences"],w);const D=u(t,["temperature"]);D!=null&&h(e,["temperature"],D);const V=u(t,["thinkingConfig"]);V!=null&&h(e,["thinkingConfig"],V);const k=u(t,["topK"]);k!=null&&h(e,["topK"],k);const R=u(t,["topP"]);if(R!=null&&h(e,["topP"],R),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Z8(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],Pe(t,s)),n}function e7(t,e){const n={},s=u(e,["model"]);return s!=null&&h(n,["_url","name"],Pe(t,s)),n}function t7(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n7(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function s7(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),u(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function a7(t){const e={},n=u(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const s=u(t,["imageSize"]);s!=null&&h(e,["imageSize"],s);const a=u(t,["personGeneration"]);a!=null&&h(e,["personGeneration"],a);const i=u(t,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const o=u(t,["outputCompressionQuality"]);return o!=null&&h(e,["imageOutputOptions","compressionQuality"],o),e}function i7(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],Ri(n));const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QI(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],Ri(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function $h(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],Ri(n));const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _s(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Ri(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function r7(t,e,n){const s={},a=u(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&h(n,["_url","models_url"],BI(t,l)),s}function o7(t,e,n){const s={},a=u(e,["pageSize"]);n!==void 0&&a!=null&&h(n,["_query","pageSize"],a);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const l=u(e,["queryBase"]);return n!==void 0&&l!=null&&h(n,["_url","models_url"],BI(t,l)),s}function l7(t,e){const n={},s=u(e,["config"]);return s!=null&&r7(t,s,n),n}function c7(t,e){const n={},s=u(e,["config"]);return s!=null&&o7(t,s,n),n}function d7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["_self"]);if(a!=null){let i=qI(a);Array.isArray(i)&&(i=i.map(o=>Zg(o))),h(e,["models"],i)}return e}function u7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["_self"]);if(a!=null){let i=qI(a);Array.isArray(i)&&(i=i.map(o=>e0(o))),h(e,["models"],i)}return e}function m7(t){const e={},n=u(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const s=u(t,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const a=u(t,["maskDilation"]);return a!=null&&h(e,["dilation"],a),e}function Zg(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);a!=null&&h(e,["description"],a);const i=u(t,["version"]);i!=null&&h(e,["version"],i);const o=u(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],A7(o));const l=u(t,["inputTokenLimit"]);l!=null&&h(e,["inputTokenLimit"],l);const c=u(t,["outputTokenLimit"]);c!=null&&h(e,["outputTokenLimit"],c);const d=u(t,["supportedGenerationMethods"]);d!=null&&h(e,["supportedActions"],d);const m=u(t,["temperature"]);m!=null&&h(e,["temperature"],m);const p=u(t,["maxTemperature"]);p!=null&&h(e,["maxTemperature"],p);const g=u(t,["topP"]);g!=null&&h(e,["topP"],g);const x=u(t,["topK"]);x!=null&&h(e,["topK"],x);const y=u(t,["thinking"]);return y!=null&&h(e,["thinking"],y),e}function e0(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["displayName"]);s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);a!=null&&h(e,["description"],a);const i=u(t,["versionId"]);i!=null&&h(e,["version"],i);const o=u(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>T8(g))),h(e,["endpoints"],p)}const l=u(t,["labels"]);l!=null&&h(e,["labels"],l);const c=u(t,["_self"]);c!=null&&h(e,["tunedModelInfo"],I7(c));const d=u(t,["defaultCheckpointId"]);d!=null&&h(e,["defaultCheckpointId"],d);const m=u(t,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>g)),h(e,["checkpoints"],p)}return e}function h7(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],S8(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],w8(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],W9(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function f7(t){const e={},n=u(t,["productImage"]);return n!=null&&h(e,["image"],_s(n)),e}function p7(t,e){const n={},s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const a=u(t,["baseSteps"]);e!==void 0&&a!=null&&h(e,["parameters","baseSteps"],a);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const o=u(t,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const l=u(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const c=u(t,["personGeneration"]);e!==void 0&&c!=null&&h(e,["parameters","personGeneration"],c);const d=u(t,["addWatermark"]);e!==void 0&&d!=null&&h(e,["parameters","addWatermark"],d);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","mimeType"],m);const p=u(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const g=u(t,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const x=u(t,["labels"]);return e!==void 0&&x!=null&&h(e,["labels"],x),n}function g7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["source"]);a!=null&&v7(a,n);const i=u(e,["config"]);return i!=null&&p7(i,n),n}function x7(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Hh(a))),h(e,["generatedImages"],s)}return e}function v7(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["personImage"]);e!==void 0&&a!=null&&h(e,["instances[0]","personImage","image"],_s(a));const i=u(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>f7(l))),h(e,["instances[0]","productImages"],o)}return n}function y7(t){const e={},n=u(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],_s(n));const s=u(t,["referenceId"]);s!=null&&h(e,["referenceId"],s);const a=u(t,["referenceType"]);a!=null&&h(e,["referenceType"],a);const i=u(t,["maskImageConfig"]);i!=null&&h(e,["maskImageConfig"],m7(i));const o=u(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],i8(o));const l=u(t,["styleImageConfig"]);l!=null&&h(e,["styleImageConfig"],l);const c=u(t,["subjectImageConfig"]);return c!=null&&h(e,["subjectImageConfig"],c),e}function XI(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function WI(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const a=u(t,["contentType"]);return a!=null&&h(e,["contentType"],a),e}function b7(t){const e={},n=u(t,["category"]);if(n!=null&&h(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function _7(t){const e={},n=u(t,["image"]);return n!=null&&h(e,["image"],_s(n)),e}function E7(t,e){const n={},s=u(t,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const a=u(t,["maxPredictions"]);e!==void 0&&a!=null&&h(e,["parameters","maxPredictions"],a);const i=u(t,["confidenceThreshold"]);e!==void 0&&i!=null&&h(e,["parameters","confidenceThreshold"],i);const o=u(t,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const l=u(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","binaryColorThreshold"],l);const c=u(t,["labels"]);return e!==void 0&&c!=null&&h(e,["labels"],c),n}function N7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["source"]);a!=null&&T7(a,n);const i=u(e,["config"]);return i!=null&&E7(i,n),n}function C7(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>K8(a))),h(e,["generatedMasks"],s)}return e}function T7(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const a=u(t,["image"]);e!==void 0&&a!=null&&h(e,["instances[0]","image"],_s(a));const i=u(t,["scribbleImage"]);return e!==void 0&&i!=null&&h(e,["instances[0]","scribble"],_7(i)),n}function S7(t){const e={},n=u(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const s=u(t,["functionCallingConfig"]);return s!=null&&h(e,["functionCallingConfig"],A8(s)),e}function w7(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],t7(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],n7(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}function ZI(t){const e={},n=u(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const s=u(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=u(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const i=u(t,["enterpriseWebSearch"]);i!=null&&h(e,["enterpriseWebSearch"],i);const o=u(t,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(g=>I8(g))),h(e,["functionDeclarations"],p)}const l=u(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&h(e,["googleSearch"],c);const d=u(t,["googleSearchRetrieval"]);d!=null&&h(e,["googleSearchRetrieval"],d);const m=u(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function A7(t){const e={},n=u(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function I7(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&h(e,["createTime"],s);const a=u(t,["updateTime"]);return a!=null&&h(e,["updateTime"],a),e}function R7(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function j7(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const a=u(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function M7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","name"],Pe(t,s));const a=u(e,["config"]);return a!=null&&R7(a,n),n}function P7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["config"]);return a!=null&&j7(a,n),n}function D7(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const i=u(t,["personGeneration"]);e!==void 0&&i!=null&&h(e,["parameters","personGeneration"],i);const o=u(t,["includeRaiReason"]);e!==void 0&&o!=null&&h(e,["parameters","includeRaiReason"],o);const l=u(t,["outputMimeType"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","mimeType"],l);const c=u(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&h(e,["parameters","outputOptions","compressionQuality"],c);const d=u(t,["enhanceInputImage"]);e!==void 0&&d!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],d);const m=u(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const p=u(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&h(e,["parameters","sampleCount"],g);const x=u(t,["mode"]);return e!==void 0&&x!=null&&h(e,["parameters","mode"],x),n}function k7(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["_url","model"],Pe(t,s));const a=u(e,["image"]);a!=null&&h(n,["instances[0]","image"],_s(a));const i=u(e,["upscaleFactor"]);i!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=u(e,["config"]);return o!=null&&D7(o,n),n}function L7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Hh(i))),h(e,["generatedImages"],a)}return e}function V7(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Ri(s));const a=u(t,["encoding"]);return a!=null&&h(e,["mimeType"],a),e}function U7(t){const e={},n=u(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Ri(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}function O7(t){const e={},n=u(t,["image"]);n!=null&&h(e,["_self"],_s(n));const s=u(t,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function z7(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],$h(n));const s=u(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function F7(t){const e={},n=u(t,["image"]);n!=null&&h(e,["image"],_s(n));const s=u(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function e1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["uri"],n);const s=u(t,["videoBytes"]);s!=null&&h(e,["encodedVideo"],Ri(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["encoding"],a),e}function t1(t){const e={},n=u(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const s=u(t,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Ri(s));const a=u(t,["mimeType"]);return a!=null&&h(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G7(t,e){const n={},s=u(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),n}function B7(t){const e={},n=u(t,["config"]);return n!=null&&G7(n,e),e}function q7(t,e){const n={},s=u(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function H7(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&q7(s,e),e}function $7(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function Y7(t,e){const n={},s=u(t,["customMetadata"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["customMetadata"],i)}const a=u(t,["chunkingConfig"]);return e!==void 0&&a!=null&&h(e,["chunkingConfig"],a),n}function J7(t){const e={},n=u(t,["name"]);n!=null&&h(e,["name"],n);const s=u(t,["metadata"]);s!=null&&h(e,["metadata"],s);const a=u(t,["done"]);a!=null&&h(e,["done"],a);const i=u(t,["error"]);i!=null&&h(e,["error"],i);const o=u(t,["response"]);return o!=null&&h(e,["response"],Q7(o)),e}function K7(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=u(t,["fileName"]);s!=null&&h(e,["fileName"],s);const a=u(t,["config"]);return a!=null&&Y7(a,e),e}function Q7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["parent"]);s!=null&&h(e,["parent"],s);const a=u(t,["documentName"]);return a!=null&&h(e,["documentName"],a),e}function X7(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function W7(t){const e={},n=u(t,["config"]);return n!=null&&X7(n,e),e}function Z7(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["fileSearchStores"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["fileSearchStores"],i)}return e}function n1(t,e){const n={},s=u(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const a=u(t,["displayName"]);e!==void 0&&a!=null&&h(e,["displayName"],a);const i=u(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const o=u(t,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),n}function eG(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const s=u(t,["config"]);return s!=null&&n1(s,e),e}function tG(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nG="Content-Type",sG="X-Server-Timeout",aG="User-Agent",t0="x-goog-api-client",iG="1.35.0",rG=`google-genai-sdk/${iG}`,oG="v1beta1",lG="v1beta";class cG{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:oG,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:lG,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const a=[this.getRequestUrlInternal(n)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))a.searchParams.append(o,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.unaryApiCall(a,i,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[a,i]of Object.entries(n))typeof i=="object"?s[a]=Object.assign(Object.assign({},s[a]),i):i!==void 0&&(s[a]=i);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,a.toString(),e.abortSignal),this.streamApiCall(a,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,a){if(n&&n.timeout||a){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&dG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await aC(a),new Qg(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await aC(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return hs(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),i=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let o="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:m}=yield me(a.read());if(d){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(m,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const T=JSON.parse(JSON.stringify(y.error)),I=T.status,b=T.code,N=`got status: ${I}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new Bh({message:N,status:b})}}catch(y){if(y.name==="ApiError")throw y}o+=p;let g=-1,x=0;for(;;){g=-1,x=0;for(const I of c){const b=o.indexOf(I);b!==-1&&(g===-1||b<g)&&(g=b,x=I.length)}if(g===-1)break;const y=o.substring(0,g);o=o.substring(g+x);const T=y.trim();if(T.startsWith(l)){const I=T.substring(l.length).trim();try{const b=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield me(new Qg(b))}catch(b){throw new Error(`exception parsing stream chunk ${I}. ${b}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=rG+" "+this.clientOptions.userAgentExtra;return e[aG]=n,e[t0]=n,e[nG]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))s.append(a,i);e.timeout&&e.timeout>0&&s.append(sG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);a.sizeBytes=String(o.size);const l=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=l;const c={file:a},d=this.getFileName(e),m=W("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(m,a.sizeBytes,a.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,s){var a;const i=this.clientOptions.uploader,o=await i.stat(n),l=String(o.size),c=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),p={};s!=null&&n1(s,p);const g=await this.fetchUploadUrl(d,l,c,m,p,s==null?void 0:s.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,a,i,o){var l;let c={};o?c=o:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function aC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw n>=400&&n<600?new Bh({message:a,status:n}):new Error(a)}}function dG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(i,o){const l=Object.assign({},i);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c],m=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?l[c]=s(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const a=s(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uG="mcp_used/unknown";let mG=!1;function s1(t){for(const e of t)if(hG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return mG}function a1(t){var e;const n=(e=t[t0])!==null&&e!==void 0?e:"";t[t0]=(n+` ${uG}`).trimStart()}function hG(t){return t!==null&&typeof t=="object"&&t instanceof bv}function fG(t){return hs(this,arguments,function*(n,s=100){let a,i=0;for(;i<s;){const o=yield me(n.listTools({cursor:a}));for(const l of o.tools)yield yield me(l),i++;if(!o.nextCursor)break;a=o.nextCursor}})}class bv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bv(e,n)}async initialize(){var e,n,s,a;if(this.mcpTools.length>0)return;const i={},o=[];for(const m of this.mcpClients)try{for(var l=!0,c=(n=void 0,fs(fG(m))),d;d=await c.next(),e=d.done,!e;l=!0){a=d.value,l=!1;const p=a;o.push(p);const g=p.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=m}}catch(p){n={error:p}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),$z(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await a.callTool({name:s.name,arguments:s.args},void 0,i);n.push({functionResponse:{name:s.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pG(t,e,n){const s=new Uz;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(s,a),e(s)}class gG{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=yG(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${a}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const m=new Promise(w=>{d=w}),p=e.callbacks,g=function(){d({})},x=this.apiClient,y={onopen:g,onmessage:w=>{pG(x,p.onmessage,w)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(w){},onclose:(s=p==null?void 0:p.onclose)!==null&&s!==void 0?s:function(w){}},T=this.webSocketFactory.create(c,vG(o),y);T.connect(),await m;const N={setup:{model:Pe(this.apiClient,e.model)}};return T.send(JSON.stringify(N)),new xG(T,this.apiClient)}}class xG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=B9(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=G9(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Yr.PLAY)}pause(){this.sendPlaybackControl(Yr.PAUSE)}stop(){this.sendPlaybackControl(Yr.STOP)}resetContext(){this.sendPlaybackControl(Yr.RESET_CONTEXT)}close(){this.conn.close()}}function vG(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function yG(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _G(t,e,n){const s=new Vz;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const i=JSON.parse(a);if(t.isVertexAI()){const o=$9(i);Object.assign(s,o)}else Object.assign(s,i);e(s)}class EG{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new gG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,a,i,o,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&s1(e.config.tools)&&a1(p);const g=SG(p);if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,m);else{const S=this.apiClient.getApiKey();let C="BidiGenerateContent",_="key";S!=null&&S.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),C="BidiGenerateContentConstrained",_="access_token"),m=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${C}?${_}=${S}`}let x=()=>{};const y=new Promise(S=>{x=S}),T=e.callbacks,I=function(){var S;(S=T==null?void 0:T.onopen)===null||S===void 0||S.call(T),x({})},b=this.apiClient,N={onopen:I,onmessage:S=>{_G(b,T.onmessage,S)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(S){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(S){}},w=this.webSocketFactory.create(m,TG(g),N);w.connect(),await y;let D=Pe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const S=this.apiClient.getProject(),C=this.apiClient.getLocation();D=`projects/${S}/locations/${C}/`+D}let V={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lm.AUDIO]}:e.config.responseModalities=[Lm.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],R=[];for(const S of k)if(this.isCallableTool(S)){const C=S;R.push(await C.tool())}else R.push(S);R.length>0&&(e.config.tools=R);const E={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=F9(this.apiClient,E):V=z9(this.apiClient,E),delete V.config,w.send(JSON.stringify(V)),new CG(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const NG={turnComplete:!0};class CG{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Qn(n.turns),e.isVertexAI()||(s=s.map(a=>qh(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(bG)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},NG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:H9(e)}:n={realtimeInput:q9(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function TG(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function SG(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iC=10;function rC(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(lo(o)){a=!0;break}if(!a)return!0;const i=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function lo(t){return"callTool"in t&&typeof t.callTool=="function"}function wG(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>lo(a)))!==null&&s!==void 0?s:!1}function oC(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(lo(s))return;const i=s;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(a)}),n}function lC(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AG extends Na{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,a,i,o,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!wG(n)||rC(n.config))return await this.generateContentInternal(c);const d=oC(n);if(d.length>0){const T=d.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let m,p;const g=Qn(c.contents),x=(i=(a=(s=c.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&i!==void 0?i:iC;let y=0;for(;y<x&&(m=await this.generateContentInternal(c),!(!m.functionCalls||m.functionCalls.length===0));){const T=m.candidates[0].content,I=[];for(const b of(l=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(lo(b)){const w=await b.callTool(m.functionCalls);I.push(...w)}y++,p={role:"user",parts:I},c.contents=Qn(c.contents),c.contents.push(T),c.contents.push(p),lC(c.config)&&(g.push(T),g.push(p))}return lC(c.config)&&(m.automaticFunctionCallingHistory=g),m},this.generateContentStream=async n=>{var s,a,i,o,l;if(this.maybeMoveToResponseJsonSchem(n),rC(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=oC(n);if(c.length>0){const p=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,m=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var a;let i;const o=[];if(s!=null&&s.generatedImages)for(const c of s.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:o.push(c);let l;return i?l={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:s.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:s.sdkHttpResponse},l}),this.list=async n=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new vr(ba.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var s,a,i,o,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,a;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async c=>lo(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(l.config.tools=o,e.config&&e.config.tools&&s1(e.config.tools)){const c=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),a1(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,s,a;const i=new Map;for(const o of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(lo(o)){const l=o,c=await l.tool();for(const d of(a=c.functionDeclarations)!==null&&a!==void 0?a:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,s,a;const i=(a=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:iC;let o=!1,l=0;const c=await this.initAfcToolsMap(e);return function(d,m,p){return hs(this,arguments,function*(){for(var g,x,y,T,I,b;l<i;){o&&(l++,o=!1);const V=yield me(d.processParamsMaybeAddMcpUsage(p)),k=yield me(d.generateContentStreamInternal(V)),R=[],E=[];try{for(var N=!0,w=(x=void 0,fs(k)),D;D=yield me(w.next()),g=D.done,!g;N=!0){T=D.value,N=!1;const S=T;if(yield yield me(S),S.candidates&&(!((I=S.candidates[0])===null||I===void 0)&&I.content)){E.push(S.candidates[0].content);for(const C of(b=S.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(l<i&&C.functionCall){if(!C.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(C.functionCall.name)){const _=yield me(m.get(C.functionCall.name).callTool([C.functionCall]));R.push(..._)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${C.functionCall.name}`)}}}}catch(S){x={error:S}}finally{try{!N&&!g&&(y=w.return)&&(yield me(y.call(w)))}finally{if(x)throw x.error}}if(R.length>0){o=!0;const S=new Pl;S.candidates=[{content:{role:"user",parts:R}}],yield yield me(S);const C=[];C.push(...E),C.push({role:"user",parts:R});const _=Qn(p.contents).concat(C);p.contents=_}else break}})}(this,c,e)}async generateContentInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=tC(this.apiClient,e);return l=W("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=sC(m),g=new Pl;return Object.assign(g,p),g})}else{const d=eC(this.apiClient,e);return l=W("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=nC(m),g=new Pl;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=tC(this.apiClient,e);return l=W("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return hs(this,arguments,function*(){var g,x,y,T;try{for(var I=!0,b=fs(p),N;N=yield me(b.next()),g=N.done,!g;I=!0){T=N.value,I=!1;const w=T,D=sC(yield me(w.json()));D.sdkHttpResponse={headers:w.headers};const V=new Pl;Object.assign(V,D),yield yield me(V)}}catch(w){x={error:w}}finally{try{!I&&!g&&(y=b.return)&&(yield me(y.call(b)))}finally{if(x)throw x.error}}})})}else{const d=eC(this.apiClient,e);return l=W("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return hs(this,arguments,function*(){var g,x,y,T;try{for(var I=!0,b=fs(p),N;N=yield me(b.next()),g=N.done,!g;I=!0){T=N.value,I=!1;const w=T,D=nC(yield me(w.json()));D.sdkHttpResponse={headers:w.headers};const V=new Pl;Object.assign(V,D),yield yield me(V)}}catch(w){x={error:w}}finally{try{!I&&!g&&(y=b.return)&&(yield me(y.call(b)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=E8(this.apiClient,e);return l=W("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=C8(m),g=new VN;return Object.assign(g,p),g})}else{const d=_8(this.apiClient,e);return l=W("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=N8(m),g=new VN;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=k8(this.apiClient,e);return l=W("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=V8(m),g=new UN;return Object.assign(g,p),g})}else{const d=D8(this.apiClient,e);return l=W("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=L8(m),g=new UN;return Object.assign(g,p),g})}}async editImageInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=x8(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=v8(c),m=new Sz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=k7(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=L7(c),m=new wz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=g7(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=x7(c),m=new Az;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=N7(this.apiClient,e);return i=W("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=C7(c),m=new Iz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=e7(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>e0(m))}else{const d=Z8(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Zg(m))}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=c7(this.apiClient,e);return l=W("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=u7(m),g=new ON;return Object.assign(g,p),g})}else{const d=l7(this.apiClient,e);return l=W("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=d7(m),g=new ON;return Object.assign(g,p),g})}}async update(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=P7(this.apiClient,e);return l=W("{model}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>e0(m))}else{const d=M7(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Zg(m))}}async delete(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=h8(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=p8(m),g=new zN;return Object.assign(g,p),g})}else{const d=m8(this.apiClient,e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=f8(m),g=new zN;return Object.assign(g,p),g})}}async countTokens(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=c8(this.apiClient,e);return l=W("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=u8(m),g=new FN;return Object.assign(g,p),g})}else{const d=l8(this.apiClient,e);return l=W("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=d8(m),g=new FN;return Object.assign(g,p),g})}}async computeTokens(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=t8(this.apiClient,e);return i=W("{model}:computeTokens",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const d=n8(c),m=new Rz;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=B8(this.apiClient,e);return l=W("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const p=F8(m),g=new Vm;return Object.assign(g,p),g})}else{const d=G8(this.apiClient,e);return l=W("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const p=z8(m),g=new Vm;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IG extends Na{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let i;s&&"httpOptions"in s&&(i=s.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bz(e);return l=W("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}else{const d=yz(e);return l=W("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}}async fetchPredictVideosOperationInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=mz(e);return i=W("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RG(t){const e={},n=u(t,["data"]);if(n!=null&&h(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function jG(t){const e={},n=u(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>zG(i))),h(e,["parts"],a)}const s=u(t,["role"]);return s!=null&&h(e,["role"],s),e}function MG(t,e,n){const s={},a=u(e,["expireTime"]);n!==void 0&&a!=null&&h(n,["expireTime"],a);const i=u(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&h(n,["newSessionExpireTime"],i);const o=u(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const l=u(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&h(n,["bidiGenerateContentSetup"],OG(t,l));const c=u(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&h(n,["fieldMask"],c),s}function PG(t,e){const n={},s=u(e,["config"]);return s!=null&&h(n,["config"],MG(t,s,n)),n}function DG(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function kG(t){const e={},n=u(t,["id"]);n!=null&&h(e,["id"],n);const s=u(t,["args"]);s!=null&&h(e,["args"],s);const a=u(t,["name"]);if(a!=null&&h(e,["name"],a),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LG(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function VG(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function UG(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const a=u(t,["responseModalities"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","responseModalities"],a);const i=u(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const l=u(t,["topK"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topK"],l);const c=u(t,["maxOutputTokens"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","maxOutputTokens"],c);const d=u(t,["mediaResolution"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","mediaResolution"],d);const m=u(t,["seed"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","seed"],m);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],yv(p));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","thinkingConfig"],g);const x=u(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const y=u(t,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],jG(en(y)));const T=u(t,["tools"]);if(e!==void 0&&T!=null){let k=rl(T);Array.isArray(k)&&(k=k.map(R=>GG(il(R)))),h(e,["setup","tools"],k)}const I=u(t,["sessionResumption"]);e!==void 0&&I!=null&&h(e,["setup","sessionResumption"],FG(I));const b=u(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=u(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const w=u(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&h(e,["setup","realtimeInputConfig"],w);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&h(e,["setup","contextWindowCompression"],D);const V=u(t,["proactivity"]);if(e!==void 0&&V!=null&&h(e,["setup","proactivity"],V),u(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function OG(t,e){const n={},s=u(e,["model"]);s!=null&&h(n,["setup","model"],Pe(t,s));const a=u(e,["config"]);return a!=null&&h(n,["config"],UG(a,n)),n}function zG(t){const e={},n=u(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const s=u(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const a=u(t,["executableCode"]);a!=null&&h(e,["executableCode"],a);const i=u(t,["fileData"]);i!=null&&h(e,["fileData"],DG(i));const o=u(t,["functionCall"]);o!=null&&h(e,["functionCall"],kG(o));const l=u(t,["functionResponse"]);l!=null&&h(e,["functionResponse"],l);const c=u(t,["inlineData"]);c!=null&&h(e,["inlineData"],RG(c));const d=u(t,["text"]);d!=null&&h(e,["text"],d);const m=u(t,["thought"]);m!=null&&h(e,["thought"],m);const p=u(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const g=u(t,["videoMetadata"]);return g!=null&&h(e,["videoMetadata"],g),e}function FG(t){const e={},n=u(t,["handle"]);if(n!=null&&h(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GG(t){const e={};if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=u(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const s=u(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const a=u(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=u(t,["functionDeclarations"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>p)),h(e,["functionDeclarations"],m)}const o=u(t,["googleMaps"]);o!=null&&h(e,["googleMaps"],LG(o));const l=u(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],VG(l));const c=u(t,["googleSearchRetrieval"]);c!=null&&h(e,["googleSearchRetrieval"],c);const d=u(t,["urlContext"]);return d!=null&&h(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BG(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(i=>`${n}.${i}`);e.push(...a)}else e.push(n)}return e.join(",")}function qG(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const i=s.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const i=BG(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];a.length>0&&(l=a.map(d=>o.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class HG extends Na{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=PG(this.apiClient,e);i=W("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const c=qG(l,e.config);return a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),a.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $G(t,e){const n={},s=u(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),n}function YG(t){const e={},n=u(t,["name"]);n!=null&&h(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&$G(s,e),e}function JG(t){const e={},n=u(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function KG(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const a=u(t,["pageToken"]);return e!==void 0&&a!=null&&h(e,["_query","pageToken"],a),n}function QG(t){const e={},n=u(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const s=u(t,["config"]);return s!=null&&KG(s,e),e}function XG(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const a=u(t,["documents"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>o)),h(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WG extends Na{constructor(e){super(),this.apiClient=e,this.list=async n=>new vr(ba.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=JG(e);return i=W("{name}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=YG(e);a=W("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=QG(e);return i=W("{parent}/documents",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=XG(c),m=new jz;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZG extends Na{constructor(e,n=new WG(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new vr(ba.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=B7(e);return i=W("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$7(e);return i=W("{name}",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,s;let a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=H7(e);a=W("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=W7(e);return i=W("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=Z7(c),m=new Mz;return Object.assign(m,d),m})}}async uploadToFileSearchStoreInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eG(e);return i=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=tG(c),m=new Pz;return Object.assign(m,d),m})}}async importFile(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=K7(e);return i=W("{file_search_store_name}:importFile",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),a.then(c=>{const d=J7(c),m=new fv;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let i1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return i1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const eB=()=>i1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const s0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class as extends Error{}class un extends as{constructor(e,n,s,a){super(`${un.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new Yh({message:s,cause:s0(n)});const i=n;return e===400?new o1(e,i,s,a):e===401?new l1(e,i,s,a):e===403?new c1(e,i,s,a):e===404?new d1(e,i,s,a):e===409?new u1(e,i,s,a):e===422?new m1(e,i,s,a):e===429?new h1(e,i,s,a):e>=500?new f1(e,i,s,a):new un(e,i,s,a)}}class a0 extends un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yh extends un{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class r1 extends Yh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class o1 extends un{}class l1 extends un{}class c1 extends un{}class d1 extends un{}class u1 extends un{}class m1 extends un{}class h1 extends un{}class f1 extends un{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tB=/^[a-z][a-z0-9+.-]*:/i,nB=t=>tB.test(t);let i0=t=>(i0=Array.isArray,i0(t));const sB=i0;let aB=sB;const cC=aB;function iB(t){if(!t)return!0;for(const e in t)return!1;return!0}function rB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const oB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new as(`${t} must be an integer`);if(e<0)throw new as(`${t} must be a positive integer`);return e},lB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uB=()=>{var t,e,n,s,a;const i=dB();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":uC(Deno.build.os),"X-Stainless-Arch":dC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":uC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":dC((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const o=mB();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,i=s[2]||0,o=s[3]||0;return{browser:e,version:`${a}.${i}.${o}`}}}return null}const dC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",uC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Zd;const hB=()=>Zd??(Zd=uB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function p1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function pB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return p1({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function g1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function gB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x1=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function xp(t,e,n){return x1(),new File(t,e??"unknown_file",n)}function vB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const yB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&v1(t),_B=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function EB(t,e,n){if(x1(),t=await t,bB(t))return t instanceof File?t:xp([await t.arrayBuffer()],t.name);if(_B(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),xp(await r0(a),e,n)}const s=await r0(t);if(e||(e=vB(t)),!(n!=null&&n.type)){const a=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return xp(s,e,n)}async function r0(t){var e,n,s,a,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(v1(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(yB(t))try{for(var l=!0,c=fs(t),d;d=await c.next(),e=d.done,!e;l=!0){a=d.value,l=!1;const m=a;o.push(...await r0(m))}}catch(m){n={error:m}}finally{try{!l&&!e&&(s=c.return)&&await s.call(c)}finally{if(n)throw n.error}}else{const m=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${m?`; constructor: ${m}`:""}${NB(t)}`)}return o}function NB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y1{constructor(e){this._client=e}}y1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b1(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const mC=Object.freeze(Object.create(null)),CB=(t=b1)=>function(n,...s){if(n.length===1)return n[0];let a=!1;const i=[],o=n.reduce((m,p,g)=>{var x,y,T;/[?#]/.test(p)&&(a=!0);const I=s[g];let b=(a?encodeURIComponent:t)(""+I);return g!==s.length&&(I==null||typeof I=="object"&&I.toString===((T=Object.getPrototypeOf((y=Object.getPrototypeOf((x=I.hasOwnProperty)!==null&&x!==void 0?x:mC))!==null&&y!==void 0?y:mC))===null||T===void 0?void 0:T.toString))&&(b=I+"",i.push({start:m.length+p.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),m+p+(g===s.length?"":b)},""),l=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((m,p)=>m.start-p.start),i.length>0){let m=0;const p=i.reduce((g,x)=>{const y=" ".repeat(x.start-m),T="^".repeat(x.length);return m=x.start+x.length,g+y+T},"");throw new as(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${p}`)}return o},eu=CB(b1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _1 extends y1{create(e,n){var s;const{api_version:a=this._client.apiVersion}=e,i=Om(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new as("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new as("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(eu`/${a}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(eu`/${a}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(eu`/${a}/interactions/${e}/cancel`,s)}get(e,n={},s){var a;const i=n??{},{api_version:o=this._client.apiVersion}=i,l=Om(i,["api_version"]);return this._client.get(eu`/${o}/interactions/${e}`,Object.assign(Object.assign({query:l},s),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}_1._key=Object.freeze(["interactions"]);class E1 extends _1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TB(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let tu;function _v(t){let e;return(tu??(e=new globalThis.TextEncoder,tu=e.encode.bind(e)))(t)}let nu;function hC(t){let e;return(nu??(e=new globalThis.TextDecoder,nu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_v(e):e;this.buffer=TB([this.buffer,n]);const s=[];let a;for(;(a=SB(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(hC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,o=hC(this.buffer.subarray(0,i));s.push(o),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Jh.NEWLINE_CHARS=new Set([`
`,"\r"]);Jh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function SB(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function wB(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zm={off:0,error:200,warn:300,info:400,debug:500},fC=(t,e,n)=>{if(t){if(rB(zm,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(zm))}`)}};function $l(){}function su(t,e,n){return!e||zm[t]>zm[n]?$l:e[t].bind(e)}const AB={error:$l,warn:$l,info:$l,debug:$l};let pC=new WeakMap;function ln(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return AB;const a=pC.get(n);if(a&&a[0]===s)return a[1];const i={error:su("error",n,s),warn:su("warn",n,s),info:su("info",n,s),debug:su("debug",n,s)};return pC.set(n,[s,i]),i}const Bi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jr{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let a=!1;const i=s?ln(s):console;function o(){return hs(this,arguments,function*(){var c,d,m,p;if(a)throw new as("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let g=!1;try{try{for(var x=!0,y=fs(IB(e,n)),T;T=yield me(y.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const I=p;if(!g)if(I.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield me(JSON.parse(I.data))}catch(b){throw i.error("Could not parse message into JSON:",I.data),i.error("From chunk:",I.raw),b}}}catch(I){d={error:I}}finally{try{!x&&!c&&(m=y.return)&&(yield me(m.call(y)))}finally{if(d)throw d.error}}g=!0}catch(I){if(n0(I))return yield me(void 0);throw I}finally{g||n.abort()}})}return new Jr(o,n,s)}static fromReadableStream(e,n,s){let a=!1;function i(){return hs(this,arguments,function*(){var c,d,m,p;const g=new Jh,x=g1(e);try{for(var y=!0,T=fs(x),I;I=yield me(T.next()),c=I.done,!c;y=!0){p=I.value,y=!1;const b=p;for(const N of g.decode(b))yield yield me(N)}}catch(b){d={error:b}}finally{try{!y&&!c&&(m=T.return)&&(yield me(m.call(T)))}finally{if(d)throw d.error}}for(const b of g.flush())yield yield me(b)})}function o(){return hs(this,arguments,function*(){var c,d,m,p;if(a)throw new as("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let g=!1;try{try{for(var x=!0,y=fs(i()),T;T=yield me(y.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const I=p;g||I&&(yield yield me(JSON.parse(I)))}}catch(I){d={error:I}}finally{try{!x&&!c&&(m=y.return)&&(yield me(m.call(y)))}finally{if(d)throw d.error}}g=!0}catch(I){if(n0(I))return yield me(void 0);throw I}finally{g||n.abort()}})}return new Jr(o,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=i=>({next:()=>{if(i.length===0){const o=s.next();e.push(o),n.push(o)}return i.shift()}});return[new Jr(()=>a(e),this.controller,this.client),new Jr(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return p1({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:i}=await n.next();if(i)return s.close();const o=_v(JSON.stringify(a)+`
`);s.enqueue(o)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function IB(t,e){return hs(this,arguments,function*(){var s,a,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new as("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new as("Attempted to iterate over a response with no body");const l=new jB,c=new Jh,d=g1(t.body);try{for(var m=!0,p=fs(RB(d)),g;g=yield me(p.next()),s=g.done,!s;m=!0){o=g.value,m=!1;const x=o;for(const y of c.decode(x)){const T=l.decode(y);T&&(yield yield me(T))}}}catch(x){a={error:x}}finally{try{!m&&!s&&(i=p.return)&&(yield me(i.call(p)))}finally{if(a)throw a.error}}for(const x of c.flush()){const y=l.decode(x);y&&(yield yield me(y))}})}function RB(t){return hs(this,arguments,function*(){var n,s,a,i;let o=new Uint8Array;try{for(var l=!0,c=fs(t),d;d=yield me(c.next()),n=d.done,!n;l=!0){i=d.value,l=!1;const m=i;if(m==null)continue;const p=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?_v(m):m;let g=new Uint8Array(o.length+p.length);g.set(o),g.set(p,o.length),o=g;let x;for(;(x=wB(o))!==-1;)yield yield me(o.slice(0,x)),o=o.slice(x)}}catch(m){s={error:m}}finally{try{!l&&!n&&(a=c.return)&&(yield me(a.call(c)))}finally{if(s)throw s.error}}o.length>0&&(yield yield me(o))})}class jB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=MB(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function MB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function PB(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:i}=e,o=await(async()=>{var l;if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Jr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return ln(t).debug(`[${s}] response parsed`,Bi({retryOfRequestLogID:a,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ev extends Promise{constructor(e,n,s=PB){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Ev(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1=Symbol("brand.privateNullableHeaders");function*DB(t){if(!t)return;if(N1 in t){const{values:s,nulls:a}=t;yield*s.entries();for(const i of a)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():cC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const i=cC(s[1])?s[1]:[s[1]];let o=!1;for(const l of i)l!==void 0&&(e&&!o&&(o=!0,yield[a,null]),yield[a,l])}}const Dl=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[i,o]of DB(s)){const l=i.toLowerCase();a.has(l)||(e.delete(i),a.add(l)),o===null?(e.delete(i),n.add(l)):(e.append(i,o),n.delete(l))}}return{[N1]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vp=t=>{var e,n,s,a,i,o;if(typeof globalThis.process<"u")return(s=(n=(e=rz)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||i===void 0?void 0:i.call(a,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var C1;class Kh{constructor(e){var n,s,a,i,o,l,c,{baseURL:d=vp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(n=vp("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,g=Om(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:m,apiVersion:p},g),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(s=x.timeout)!==null&&s!==void 0?s:Kh.DEFAULT_TIMEOUT,this.logger=(a=x.logger)!==null&&a!==void 0?a:console;const y="warn";this.logLevel=y,this.logLevel=(o=(i=fC(x.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:fC(vp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:y,this.fetchOptions=x.fetchOptions,this.maxRetries=(l=x.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=x.fetch)!==null&&c!==void 0?c:fB(),this.encoder=xB,this._options=x,this.apiKey=m,this.apiVersion=p,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Dl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Dl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Dl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new as(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Pr}`}defaultIdempotencyKey(){return`stainless-node-retry-${eB()}`}makeStatusError(e,n,s,a){return un.generate(e,n,s,a)}buildURL(e,n,s){const a=!this.baseURLOverridden()&&s||this.baseURL,i=nB(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return iB(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new Ev(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var a,i,o;const l=await e,c=(a=l.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:m,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:m,options:l});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=s===void 0?"":`, retryOf: ${s}`,y=Date.now();if(ln(this).debug(`[${g}] sending request`,Bi({retryOfRequestLogID:s,method:l.method,url:m,options:l,headers:d.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new a0;const T=new AbortController,I=await this.fetchWithTimeout(m,d,p,T).catch(s0),b=Date.now();if(I instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((o=l.signal)===null||o===void 0)&&o.aborted)throw new a0;const D=n0(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(n)return ln(this).info(`[${g}] connection ${D?"timed out":"failed"} - ${w}`),ln(this).debug(`[${g}] connection ${D?"timed out":"failed"} (${w})`,Bi({retryOfRequestLogID:s,url:m,durationMs:b-y,message:I.message})),this.retryRequest(l,n,s??g);throw ln(this).info(`[${g}] connection ${D?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${g}] connection ${D?"timed out":"failed"} (error; no more retries left)`,Bi({retryOfRequestLogID:s,url:m,durationMs:b-y,message:I.message})),D?new r1:new Yh({cause:I})}const N=`[${g}${x}] ${d.method} ${m} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${b-y}ms`;if(!I.ok){const w=await this.shouldRetry(I);if(n&&w){const S=`retrying, ${n} attempts remaining`;return await gB(I.body),ln(this).info(`${N} - ${S}`),ln(this).debug(`[${g}] response error (${S})`,Bi({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:b-y})),this.retryRequest(l,n,s??g,I.headers)}const D=w?"error; no more retries left":"error; not retryable";ln(this).info(`${N} - ${D}`);const V=await I.text().catch(S=>s0(S).message),k=lB(V),R=k?void 0:V;throw ln(this).debug(`[${g}] response error (${D})`,Bi({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,message:R,durationMs:Date.now()-y})),this.makeStatusError(I.status,k,R,I.headers)}return ln(this).info(N),ln(this).debug(`[${g}] response start`,Bi({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:b-y})),{response:I,options:l,controller:T,requestLogID:g,retryOfRequestLogID:s,startTime:y}}async fetchWithTimeout(e,n,s,a){const i=n||{},{signal:o,method:l}=i,c=Om(i,["signal","method"]);o&&o.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),s),m=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:a.signal},m?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){var i;let o;const l=a==null?void 0:a.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(o=d)}const c=a==null?void 0:a.get("retry-after");if(c&&!o){const d=parseFloat(c);Number.isNaN(d)?o=Date.parse(c)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,d)}return await cB(o),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return o*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,a,i;const o=Object.assign({},e),{method:l,path:c,query:d,defaultBaseURL:m}=o,p=this.buildURL(c,d,m);"timeout"in o&&oB("timeout",o.timeout),o.timeout=(s=o.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:g,body:x}=this.buildBody({options:o}),y=await this.buildHeaders({options:e,method:l,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let l=Dl([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),hB()),this._options.defaultHeaders,s,e.headers,o]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Dl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:pB(e)}:this.encoder({body:e,headers:s})}}Kh.DEFAULT_TIMEOUT=6e4;class Ft extends Kh{constructor(){super(...arguments),this.interactions=new E1(this)}}C1=Ft;Ft.GeminiNextGenAPIClient=C1;Ft.GeminiNextGenAPIClientError=as;Ft.APIError=un;Ft.APIConnectionError=Yh;Ft.APIConnectionTimeoutError=r1;Ft.APIUserAbortError=a0;Ft.NotFoundError=d1;Ft.ConflictError=u1;Ft.RateLimitError=h1;Ft.BadRequestError=o1;Ft.AuthenticationError=l1;Ft.InternalServerError=f1;Ft.PermissionDeniedError=c1;Ft.UnprocessableEntityError=m1;Ft.toFile=EB;Ft.Interactions=E1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function LB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function VB(t,e){const n={},s=u(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function UB(t,e){const n={},s=u(t,["sdkHttpResponse"]);return s!=null&&h(n,["sdkHttpResponse"],s),n}function OB(t,e,n){const s={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=u(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&h(e,["displayName"],a),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=u(t,["epochCount"]);e!==void 0&&i!=null&&h(e,["tuningTask","hyperparameters","epochCount"],i);const o=u(t,["learningRateMultiplier"]);if(o!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],o),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=u(t,["batchSize"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","batchSize"],l);const c=u(t,["learningRate"]);if(e!==void 0&&c!=null&&h(e,["tuningTask","hyperparameters","learningRate"],c),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function zB(t,e,n){const s={};let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const x=u(t,["validationDataset"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec"],gC(x))}else if(a==="PREFERENCE_TUNING"){const x=u(t,["validationDataset"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec"],gC(x))}const i=u(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&h(e,["tunedModelDisplayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const x=u(t,["epochCount"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(l==="PREFERENCE_TUNING"){const x=u(t,["epochCount"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const x=u(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(c==="PREFERENCE_TUNING"){const x=u(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const x=u(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(d==="PREFERENCE_TUNING"){const x=u(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let m=u(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const x=u(t,["adapterSize"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(m==="PREFERENCE_TUNING"){const x=u(t,["adapterSize"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=u(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const g=u(t,["beta"]);return e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),s}function FB(t,e){const n={},s=u(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const a=u(t,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const i=u(t,["trainingDataset"]);i!=null&&WB(i);const o=u(t,["config"]);return o!=null&&OB(o,n),n}function GB(t,e){const n={},s=u(t,["baseModel"]);s!=null&&h(n,["baseModel"],s);const a=u(t,["preTunedModel"]);a!=null&&h(n,["preTunedModel"],a);const i=u(t,["trainingDataset"]);i!=null&&ZB(i,n,e);const o=u(t,["config"]);return o!=null&&zB(o,n,e),n}function BB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function qB(t,e){const n={},s=u(t,["name"]);return s!=null&&h(n,["_url","name"],s),n}function HB(t,e,n){const s={},a=u(t,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),s}function $B(t,e,n){const s={},a=u(t,["pageSize"]);e!==void 0&&a!=null&&h(e,["_query","pageSize"],a);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),s}function YB(t,e){const n={},s=u(t,["config"]);return s!=null&&HB(s,n),n}function JB(t,e){const n={},s=u(t,["config"]);return s!=null&&$B(s,n),n}function KB(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const i=u(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>T1(l))),h(n,["tuningJobs"],o)}return n}function QB(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["nextPageToken"]);a!=null&&h(n,["nextPageToken"],a);const i=u(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>o0(l))),h(n,["tuningJobs"],o)}return n}function XB(t,e){const n={},s=u(t,["name"]);s!=null&&h(n,["model"],s);const a=u(t,["name"]);return a!=null&&h(n,["endpoint"],a),n}function WB(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>i)),h(n,["examples","examples"],a)}return n}function ZB(t,e,n){const s={};let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function T1(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["state"]);i!=null&&h(n,["state"],FI(i));const o=u(t,["createTime"]);o!=null&&h(n,["createTime"],o);const l=u(t,["tuningTask","startTime"]);l!=null&&h(n,["startTime"],l);const c=u(t,["tuningTask","completeTime"]);c!=null&&h(n,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(n,["updateTime"],d);const m=u(t,["description"]);m!=null&&h(n,["description"],m);const p=u(t,["baseModel"]);p!=null&&h(n,["baseModel"],p);const g=u(t,["_self"]);return g!=null&&h(n,["tunedModel"],XB(g)),n}function o0(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["state"]);i!=null&&h(n,["state"],FI(i));const o=u(t,["createTime"]);o!=null&&h(n,["createTime"],o);const l=u(t,["startTime"]);l!=null&&h(n,["startTime"],l);const c=u(t,["endTime"]);c!=null&&h(n,["endTime"],c);const d=u(t,["updateTime"]);d!=null&&h(n,["updateTime"],d);const m=u(t,["error"]);m!=null&&h(n,["error"],m);const p=u(t,["description"]);p!=null&&h(n,["description"],p);const g=u(t,["baseModel"]);g!=null&&h(n,["baseModel"],g);const x=u(t,["tunedModel"]);x!=null&&h(n,["tunedModel"],x);const y=u(t,["preTunedModel"]);y!=null&&h(n,["preTunedModel"],y);const T=u(t,["supervisedTuningSpec"]);T!=null&&h(n,["supervisedTuningSpec"],T);const I=u(t,["preferenceOptimizationSpec"]);I!=null&&h(n,["preferenceOptimizationSpec"],I);const b=u(t,["tuningDataStats"]);b!=null&&h(n,["tuningDataStats"],b);const N=u(t,["encryptionSpec"]);N!=null&&h(n,["encryptionSpec"],N);const w=u(t,["partnerModelTuningSpec"]);w!=null&&h(n,["partnerModelTuningSpec"],w);const D=u(t,["customBaseModel"]);D!=null&&h(n,["customBaseModel"],D);const V=u(t,["experiment"]);V!=null&&h(n,["experiment"],V);const k=u(t,["labels"]);k!=null&&h(n,["labels"],k);const R=u(t,["outputUri"]);R!=null&&h(n,["outputUri"],R);const E=u(t,["pipelineJob"]);E!=null&&h(n,["pipelineJob"],E);const S=u(t,["serviceAccount"]);S!=null&&h(n,["serviceAccount"],S);const C=u(t,["tunedModelDisplayName"]);C!=null&&h(n,["tunedModelDisplayName"],C);const _=u(t,["veoTuningSpec"]);return _!=null&&h(n,["veoTuningSpec"],_),n}function eq(t,e){const n={},s=u(t,["sdkHttpResponse"]);s!=null&&h(n,["sdkHttpResponse"],s);const a=u(t,["name"]);a!=null&&h(n,["name"],a);const i=u(t,["metadata"]);i!=null&&h(n,["metadata"],i);const o=u(t,["done"]);o!=null&&h(n,["done"],o);const l=u(t,["error"]);return l!=null&&h(n,["error"],l),n}function gC(t,e){const n={},s=u(t,["gcsUri"]);s!=null&&h(n,["validationDatasetUri"],s);const a=u(t,["vertexDatasetResource"]);return a!=null&&h(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tq extends Na{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vr(ba.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:a});return i.baseModel=void 0,await this.tuneInternal(i)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),i=await this.tuneMldevInternal(a);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Kg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=qB(e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>o0(m))}else{const d=BB(e);return l=W("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>T1(m))}}async listInternal(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=JB(e);return l=W("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=QB(m),g=new GN;return Object.assign(g,p),g})}else{const d=YB(e);return l=W("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=KB(m),g=new GN;return Object.assign(g,p),g})}}async cancel(e){var n,s,a,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=LB(e);return l=W("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=UB(m),g=new BN;return Object.assign(g,p),g})}else{const d=kB(e);return l=W("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),o.then(m=>{const p=VB(m),g=new BN;return Object.assign(g,p),g})}}async tuneInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI()){const l=GB(e,e);return i=W("tuningJobs",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>o0(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let a,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=FB(e);return i=W("tunedModels",l._url),o=l._query,delete l._url,delete l._query,a=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>eq(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sq=1024*1024*8,aq=3,iq=1e3,rq=2,Fm="x-goog-upload-status";async function oq(t,e,n){var s;const a=await S1(t,e,n),i=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Fm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function lq(t,e,n){var s;const a=await S1(t,e,n),i=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Fm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=kI(i),l=new pv;return Object.assign(l,o),l}async function S1(t,e,n){var s,a;let i=0,o=0,l=new Qg(new Response),c="upload";for(i=t.size;o<i;){const d=Math.min(sq,i-o),m=t.slice(o,o+d);o+d>=i&&(c+=", finalize");let p=0,g=iq;for(;p<aq&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((s=l==null?void 0:l.headers)===null||s===void 0)&&s[Fm]));)p++,await dq(g),g=g*rq;if(o+=d,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[Fm])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function cq(t){return{size:t.size,type:t.type}}function dq(t){return new Promise(e=>setTimeout(e,t))}class uq{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oq(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lq(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mq{create(e,n,s){return new hq(e,n,s)}}class hq{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xC="x-goog-api-key";class fq{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(xC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pq="gl-node/";class w1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ft({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=dz(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new fq(this.apiKey);this.apiClient=new cG({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:pq+"web",uploader:new uq,downloader:new nq}),this.models=new AG(this.apiClient),this.live=new EG(this.apiClient,a,new mq),this.batches=new OF(this.apiClient),this.chats=new b9(this.models,this.apiClient),this.caches=new x9(this.apiClient),this.files=new R9(this.apiClient),this.operations=new IG(this.apiClient),this.authTokens=new HG(this.apiClient),this.tunings=new tq(this.apiClient),this.fileSearchStores=new ZG(this.apiClient)}}const gq="AIzaSyDE6z8pU6Y63Vly8gCH4oYu3_FnCqBieZw",xq=new w1({apiKey:gq}),vq=async(t,e,n)=>{var c,d,m,p,g,x,y,T,I,b,N,w,D,V,k,R;const s="gemini-2.5-flash",a=Rn.buscarPorMateria(n.subjectName),i=a.length>0?a[0]:null;let o="";i?o=Rn.generarContextoIA(i.materia,i.semestre):o="No se encontr programa oficial especfico. Usar lineamientos generales del MCCEMS 2024.";const l=`
    Eres un experto pedagogo de la DGB/SEP con nivel de Supervisor Escolar.
    Tu tarea es generar una Planeacin Didctica detallada y rigurosa para Educacin Media Superior.

    REQUISITOS OBLIGATORIOS (CRITERIOS DE REVISIN):

    1. DATOS GENERALES:
       - Define un "periodo aproximado" realista para cubrir el contenido.
       - Calcula las horas totales con base en la carga semanal (ej. semanal * num_semanas).

    2. PROGRESIONES (NO PONGAS RESMENES):
       - Usa el TEXTO EXACTO y COMPLETO de la progresin oficial.
       - Indica el ID de la progresin (ej. "Progresin 1.3").
       
    3. CATEGORAS Y SUBCATEGORAS (MCCEMS):
       - Identifica las CATEGORAS centrales (Conceptos clave).
       - Identifica las SUBCATEGORAS (Conceptos transversales o integradores).

    4. VINCULACIN PAEC (Programa Aula-Escuela-Comunidad):
       - Define una problemtica comunitaria REAL o SIMULADA relacionada con el tema (ej. "Uso excesivo de redes en la comunidad", "Falta de agua", etc.).
       - Propn un proyecto breve que aborde esto.
       - Si no aplica, explcalo, pero intenta vincularlo.

    5. FUNDAMENTACIN PEDAGGICA (NUEVO REQUISITO):
       - Justifica: Por qu estas actividades? (Estilo DGB).
       - Vinculacin: Relaciona con reas transversales (Pensamiento Crtico, Ciencias, etc.).
       - Socioemocional: Qu recursos socioemocionales se activan?

    6. ESTUDIO INDEPENDIENTE:
       - Actividades fuera del aula (tareas).
       - Tiempo estimado.
       - Cmo se revisar (retroalimentacin).

    7. TABLA DE EVALUACIN (RIGUROSA):
       - Desglosa Instrumento, Porcentaje y Agente.
       - IMPORTANTSIMO: Define "criteria" (Qu se evala exactamente? ej. "Ortografa y redaccin", "Trabajo en equipo").

    SECUENCIA DIDCTICA:
    - Separa claramente: Docente (Enseanza) vs Alumno (Aprendizaje).
    
    INFORMACIN OFICIAL:
    ${o}

    CONTEXTO ESCOLAR:
    - Escuela: ${e.schoolName} (CCT: ${e.cct||"NO CAPTURADA"})
    - Diagnstico: ${e.vision}
    - Solicitud Usuario: "${t}"
  `;try{const E=await xq.models.generateContent({model:s,contents:`Genera la planeacin completa para ${n.subjectName} cumpliendo estrictamente los 7 puntos de revisin.`,config:{systemInstruction:l,responseMimeType:"application/json",maxOutputTokens:8192,responseSchema:{type:F.OBJECT,properties:{title:{type:F.STRING},date:{type:F.STRING},subject:{type:F.STRING},meta:{type:F.OBJECT,properties:{teacher:{type:F.STRING},cycle:{type:F.STRING},period:{type:F.STRING},gradeGroup:{type:F.STRING},totalSessions:{type:F.NUMBER},hoursPerWeek:{type:F.NUMBER},startDate:{type:F.STRING},endDate:{type:F.STRING}}},context:{type:F.OBJECT,properties:{diagnosis:{type:F.STRING},studentProfile:{type:F.STRING}},required:["diagnosis","studentProfile"]},curricularElements:{type:F.OBJECT,properties:{progression:{type:F.STRING},progressionId:{type:F.STRING},learningGoals:{type:F.ARRAY,items:{type:F.STRING}},categories:{type:F.ARRAY,items:{type:F.STRING}},subcategories:{type:F.ARRAY,items:{type:F.STRING}}},required:["progression","learningGoals","categories"]},paec:{type:F.OBJECT,properties:{isLinked:{type:F.BOOLEAN},communityProblem:{type:F.STRING},projectTrigger:{type:F.STRING}}},fundamento:{type:F.OBJECT,properties:{progressionJustification:{type:F.STRING},sociocognitiveLink:{type:F.STRING},socioemotionalLink:{type:F.STRING},transversalityLink:{type:F.STRING}},required:["progressionJustification","sociocognitiveLink"]},independentStudy:{type:F.OBJECT,properties:{activities:{type:F.STRING},feedbackLink:{type:F.STRING},resources:{type:F.STRING},estimatedTime:{type:F.STRING}}},sessions:{type:F.ARRAY,items:{type:F.OBJECT,properties:{sessionNumber:{type:F.NUMBER},date:{type:F.STRING},topic:{type:F.STRING},sequence:{type:F.OBJECT,properties:{opening:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]},development:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]},closing:{type:F.OBJECT,properties:{activity:{type:F.STRING},studentActivity:{type:F.STRING},time:{type:F.STRING},evidence:{type:F.STRING}},required:["activity","studentActivity","time","evidence"]}},required:["opening","development","closing"]},resources:{type:F.ARRAY,items:{type:F.STRING}}},required:["sessionNumber","sequence"]}},evaluationTable:{type:F.ARRAY,items:{type:F.OBJECT,properties:{instrument:{type:F.STRING},percentage:{type:F.NUMBER},agent:{type:F.STRING},criteria:{type:F.STRING}},required:["instrument","percentage","agent","criteria"]}},evaluationDetails:{type:F.OBJECT,properties:{diagnostic:{type:F.STRING},formative:{type:F.STRING},summative:{type:F.STRING},instruments:{type:F.ARRAY,items:{type:F.STRING}},criteria:{type:F.ARRAY,items:{type:F.STRING}}}},teacherReflection:{type:F.OBJECT,properties:{strengths:{type:F.STRING},opportunities:{type:F.STRING},adjustments:{type:F.STRING}}},duaStrategies:{type:F.STRING},evaluation:{type:F.STRING},resources:{type:F.ARRAY,items:{type:F.STRING}},duration:{type:F.STRING},mccemsAlignment:{type:F.OBJECT,properties:{documentUrl:{type:F.STRING},validated:{type:F.BOOLEAN}}},transversality:{type:F.OBJECT,properties:{paecTopics:{type:F.ARRAY,items:{type:F.STRING}},relationToOtherSubjects:{type:F.STRING}}},sequence:{type:F.OBJECT,properties:{opening:{type:F.STRING},development:{type:F.STRING},closing:{type:F.STRING}}}},required:["title","subject","sessions","meta","evaluationTable","fundamento","paec","independentStudy","curricularElements"]}}});let S;try{S=JSON.parse(E.text||"{}")}catch(_){throw console.error("Error al procesar JSON (Posible respuesta trunca):",_),new Error("La planeacin es muy extensa y se cort. Intenta generar menos sesiones (ej. reducir a 3) o ser ms especfico.")}S.sessions&&Array.isArray(S.sessions)&&(S.sessions=S.sessions.map(_=>{var P,j,H,O,G,te,Y,ne,de,ye,Qe,Ge,ie,Ae,Pt,ut,Gt,Kt,At,sn,be,ae,Z,pe;return{..._,date:_.date||"Por asignar",topic:_.topic||"Tema General",sequence:{opening:{activity:((j=(P=_.sequence)==null?void 0:P.opening)==null?void 0:j.activity)||"El docente inicia la sesin...",studentActivity:((O=(H=_.sequence)==null?void 0:H.opening)==null?void 0:O.studentActivity)||"Los alumnos atienden y participan...",time:((te=(G=_.sequence)==null?void 0:G.opening)==null?void 0:te.time)||"15 min",evidence:((ne=(Y=_.sequence)==null?void 0:Y.opening)==null?void 0:ne.evidence)||"Participacin"},development:{activity:((ye=(de=_.sequence)==null?void 0:de.development)==null?void 0:ye.activity)||"El docente explica...",studentActivity:((Ge=(Qe=_.sequence)==null?void 0:Qe.development)==null?void 0:Ge.studentActivity)||"Los alumnos realizan...",time:((Ae=(ie=_.sequence)==null?void 0:ie.development)==null?void 0:Ae.time)||"30 min",evidence:((ut=(Pt=_.sequence)==null?void 0:Pt.development)==null?void 0:ut.evidence)||"Apuntes/Ejercicios"},closing:{activity:((Kt=(Gt=_.sequence)==null?void 0:Gt.closing)==null?void 0:Kt.activity)||"El docente concluye...",studentActivity:((sn=(At=_.sequence)==null?void 0:At.closing)==null?void 0:sn.studentActivity)||"Los alumnos reflexionan...",time:((ae=(be=_.sequence)==null?void 0:be.closing)==null?void 0:ae.time)||"15 min",evidence:((pe=(Z=_.sequence)==null?void 0:Z.closing)==null?void 0:pe.evidence)||"Reflexin"}},resources:Array.isArray(_.resources)?_.resources:_.resources?[_.resources]:[]}}));const C={...S,learningGoal:((d=(c=S.curricularElements)==null?void 0:c.learningGoals)==null?void 0:d[0])||"",progression:((m=S.curricularElements)==null?void 0:m.progression)||"",sequence:(p=S.sequence)!=null&&p.opening?S.sequence:{opening:((T=(y=(x=(g=S.sessions)==null?void 0:g[0])==null?void 0:x.sequence)==null?void 0:y.opening)==null?void 0:T.activity)||"Consultar desglose por sesiones",development:((w=(N=(b=(I=S.sessions)==null?void 0:I[0])==null?void 0:b.sequence)==null?void 0:N.development)==null?void 0:w.activity)||"Consultar desglose por sesiones",closing:((R=(k=(V=(D=S.sessions)==null?void 0:D[0])==null?void 0:V.sequence)==null?void 0:k.closing)==null?void 0:R.activity)||"Consultar desglose por sesiones"},teacherReflection:S.teacherReflection||{strengths:"",opportunities:"",adjustments:""}};return i&&(C.mccemsAlignment||(C.mccemsAlignment={documentUrl:"",validated:!1}),C.mccemsAlignment.documentUrl=i.url_fuente,C.mccemsAlignment.validated=!0),C}catch(E){throw console.error("Error Gemini:",E),new Error(E.message||"Error al generar la planeacin. Intenta de nuevo.")}},yq=async()=>{try{const t=await Re(ue(J,"alumnos")),e=t.size;if(e===0)return"No hay alumnos registrados en la base de datos.";const n=t.docs.map(g=>g.data());let s=0,a=0,i=0,o=0,l=0,c=0;const d=new Set;n.forEach(g=>{var x;g.estiloAprendizaje==="Visual"&&s++,g.estiloAprendizaje==="Auditivo"&&a++,g.estiloAprendizaje==="Kinestsico"&&i++,g.estiloAprendizaje==="Lecto-escritor"&&o++,(x=g.situacionLaboral)!=null&&x.includes("Trabaja")&&l++,c+=parseFloat(g.promedioAnterior||"0"),g.intereses&&Array.isArray(g.intereses)&&g.intereses.forEach(y=>d.add(y))});const m=(c/e).toFixed(1),p=Array.from(d).slice(0,5).join(", ");return`GRUPO CONFORMADO POR ${e} ESTUDIANTES REALES.
        Perfil de Aprendizaje: ${s} Visuales, ${a} Auditivos, ${i} Kinestsicos, ${o} Lecto-escritores.
        Contexto Socioeconmico: ${l} alumnos trabajan y estudian (${Math.round(l/e*100)}%).
        Nivel Acadmico: Promedio general de ${m}.
        Intereses Principales del Grupo: ${p}.
        
        IMPORTANTE: Adapta las estrategias didcticas a este perfil especfico (ej. si hay muchos kinestsicos, incluye actividades prcticas).`}catch(t){return console.error("Error fetching student stats",t),"Error al analizar base de datos de alumnos."}},A1=zc.forwardRef(({plan:t,teacherName:e,schoolName:n,cct:s},a)=>{var i,o,l,c,d,m,p,g,x,y,T,I,b,N,w,D,V,k,R,E,S,C,_,P,j,H;return r.jsxs("article",{ref:a,className:"bg-white border border-slate-200 shadow-2xl rounded-none md:rounded-3xl p-10 print:p-0 print:border-none print:shadow-none font-serif text-sm print:w-full print:m-0 max-w-[216mm] mx-auto",children:[r.jsxs("div",{className:"flex justify-start items-center gap-6 mb-6 border-b-2 border-slate-900 pb-4",children:[r.jsx("img",{src:"/assets/logo_puebla_gob.png",alt:"Puebla Gobierno del Estado - Educacin",className:"h-16 w-auto object-contain"}),r.jsx("img",{src:"/assets/logo_puebla_amor.png",alt:"Por Amor a Puebla - Pensar en Grande",className:"h-12 w-auto object-contain"})]}),r.jsxs("div",{className:"mb-6 border border-slate-900 rounded-sm",children:[r.jsx("div",{className:"bg-slate-800 text-white px-3 py-1 border-b border-slate-900 font-bold text-xs uppercase text-center print:bg-slate-900 print:text-white",children:"I. Datos Generales de Identificacin"}),r.jsxs("div",{className:"grid grid-cols-4 text-xs divide-x divide-slate-300 border-b border-slate-300",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Plantel"}),r.jsx("span",{className:"font-bold text-slate-900",children:n||"Escuela"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"C.C.T."}),r.jsx("span",{className:"font-bold text-slate-900",children:s||"NO CAPTURADA"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Docente"}),r.jsx("span",{className:"font-bold text-slate-900",children:e||((i=t.meta)==null?void 0:i.teacher)})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Ciclo Escolar"}),r.jsx("span",{className:"font-bold text-slate-900",children:((o=t.meta)==null?void 0:o.cycle)||"2024-2025"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 text-xs divide-x divide-slate-300",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"UAC (Unidad de Aprendizaje)"}),r.jsx("span",{className:"font-bold text-slate-900 bg-yellow-50 px-1",children:t.subject})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Grupo / Semestre"}),r.jsx("span",{className:"font-bold text-slate-900",children:(l=t.meta)==null?void 0:l.gradeGroup})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("span",{className:"block font-bold text-slate-500 uppercase text-[9px]",children:"Periodo de Trabajo"}),r.jsxs("span",{className:"font-bold text-slate-900",children:[((c=t.meta)==null?void 0:c.startDate)||"Inicio"," - ",((d=t.meta)==null?void 0:d.endDate)||"Fin",r.jsxs("span",{className:"text-slate-500 font-normal ml-1",children:["(",((m=t.meta)==null?void 0:m.hoursPerWeek)||4," hrs/sem)"]})]})]})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-900 rounded-sm",children:[r.jsx("div",{className:"bg-slate-100 px-3 py-1 border-b border-slate-300 font-bold text-xs uppercase print:bg-slate-200",children:"II. Elementos del Marco Curricular Comn"}),r.jsxs("div",{className:"p-3 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[r.jsx("span",{className:"text-[10px] font-bold text-white bg-slate-800 px-2 py-0.5 rounded",children:((p=t.curricularElements)==null?void 0:p.progressionId)||"Progresin"}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Descripcin de la Progresin:"})]}),r.jsxs("p",{className:"text-xs text-slate-900 italic bg-slate-50 p-2 border border-slate-200 rounded text-justify",children:['"',((g=t.curricularElements)==null?void 0:g.progression)||t.progression,'"']})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 border-b border-slate-200",children:"Categoras (Conceptos Centrales)"}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-800",children:((y=(x=t.curricularElements)==null?void 0:x.categories)==null?void 0:y.map((O,G)=>r.jsx("li",{children:O},G)))||r.jsx("li",{className:"text-red-500",children:"Sin categoras definidas"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 border-b border-slate-200",children:"Subcategoras (Conceptos Transversales)"}),r.jsx("ul",{className:"list-disc list-inside text-xs text-slate-800",children:((I=(T=t.curricularElements)==null?void 0:T.subcategories)==null?void 0:I.map((O,G)=>r.jsx("li",{children:O},G)))||r.jsx("li",{children:"Se aborda de forma integradora."})})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Metas de Aprendizaje:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:(b=t.curricularElements)==null?void 0:b.learningGoals.map((O,G)=>r.jsx("span",{className:"bg-indigo-50 text-indigo-800 text-[10px] px-2 py-1 rounded border border-indigo-100",children:O},G))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"border border-slate-300 rounded-sm p-3 bg-white",children:[r.jsxs("div",{className:"font-bold text-xs uppercase text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:["III. Vinculacin PAEC",(N=t.paec)!=null&&N.isLinked?r.jsx("span",{className:"text-green-600",children:" Aplica"}):r.jsx("span",{className:"text-slate-400",children:" No aplica"})]}),(w=t.paec)!=null&&w.isLinked?r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-slate-600 block text-[10px] uppercase",children:"Problemtica Comunitaria:"}),t.paec.communityProblem]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-slate-600 block text-[10px] uppercase",children:"Proyecto / Accin:"}),t.paec.projectTrigger]})]}):r.jsx("p",{className:"text-xs text-slate-400 italic",children:"No se vincula directamente con un proyecto comunitario en esta sesin."})]}),r.jsxs("div",{className:"border border-slate-300 rounded-sm p-3 bg-white",children:[r.jsx("div",{className:"font-bold text-xs uppercase text-slate-700 mb-2 border-b border-slate-200 pb-1",children:"IV. Diagnstico del Grupo"}),r.jsx("p",{className:"text-xs text-slate-800 text-justify line-clamp-6",children:((D=t.context)==null?void 0:D.studentProfile)||((V=t.context)==null?void 0:V.diagnosis)||"Sin diagnstico registrado."})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-300 rounded-sm",children:[r.jsx("div",{className:"bg-slate-100 px-3 py-1 border-b border-slate-300 font-bold text-xs uppercase print:bg-slate-200",children:"V. Fundamentacin y Transversalidad"}),r.jsxs("div",{className:"p-3 text-xs space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Justificacin de Actividades (Dua/Estilos)"}),r.jsx("p",{className:"text-justify",children:((k=t.fundamento)==null?void 0:k.progressionJustification)||t.duaStrategies})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Vinculacin Socioemocional"}),r.jsx("p",{className:"text-justify",children:((R=t.fundamento)==null?void 0:R.socioemotionalLink)||"Fomento del bienestar y la colaboracin."})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Transversalidad con otras reas"}),r.jsx("p",{className:"italic text-slate-700",children:((E=t.fundamento)==null?void 0:E.transversalityLink)||((S=t.transversality)==null?void 0:S.relationToOtherSubjects)})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"bg-slate-900 text-white px-3 py-2 font-bold text-sm uppercase text-center print:bg-slate-900 rounded-t-sm",children:"VI. Secuencia Didctica"}),r.jsx("div",{className:"border border-slate-900 border-t-0 p-0",children:(C=t.sessions)==null?void 0:C.map((O,G)=>r.jsxs("div",{className:"avoid-break border-b border-slate-400 last:border-b-0",children:[r.jsxs("div",{className:"bg-slate-100 p-2 text-xs font-bold border-b border-slate-300 flex justify-between print:bg-slate-200",children:[r.jsxs("span",{children:["SESIN ",O.sessionNumber,": ",O.topic]}),r.jsx("span",{children:O.date})]}),r.jsxs("table",{className:"w-full text-left text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-300 bg-slate-50 text-[10px] uppercase text-slate-500",children:[r.jsx("th",{className:"p-2 w-[10%]",children:"Fase / Tiempo"}),r.jsx("th",{className:"p-2 w-[35%]",children:"Actividad Docente (Enseanza)"}),r.jsx("th",{className:"p-2 w-[35%]",children:"Actividad Estudiante (Aprendizaje)"}),r.jsx("th",{className:"p-2 w-[20%]",children:"Evaluacin / Evidencia"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-200",children:[r.jsxs("tr",{className:"align-top",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Inicio ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:O.sequence.opening.time})]}),r.jsx("td",{className:"p-2",children:O.sequence.opening.activity}),r.jsx("td",{className:"p-2",children:O.sequence.opening.studentActivity}),r.jsx("td",{className:"p-2 italic",children:O.sequence.opening.evidence})]}),r.jsxs("tr",{className:"align-top bg-white",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Desarrollo ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:O.sequence.development.time})]}),r.jsx("td",{className:"p-2",children:O.sequence.development.activity}),r.jsx("td",{className:"p-2",children:O.sequence.development.studentActivity}),r.jsx("td",{className:"p-2 italic",children:O.sequence.development.evidence})]}),r.jsxs("tr",{className:"align-top",children:[r.jsxs("td",{className:"p-2 font-bold bg-slate-50/50",children:["Cierre ",r.jsx("br",{}),r.jsx("span",{className:"font-normal text-slate-500",children:O.sequence.closing.time})]}),r.jsx("td",{className:"p-2",children:O.sequence.closing.activity}),r.jsx("td",{className:"p-2",children:O.sequence.closing.studentActivity}),r.jsx("td",{className:"p-2 italic",children:O.sequence.closing.evidence})]})]})]}),r.jsxs("div",{className:"p-2 bg-slate-50 border-t border-slate-200 text-[10px] text-slate-500",children:[r.jsx("span",{className:"font-bold uppercase mr-2",children:"Recursos:"}),O.resources.join(", ")]})]},G))})]}),r.jsxs("div",{className:"mb-6 border border-slate-500 rounded-sm bg-white avoid-break",children:[r.jsx("div",{className:"bg-slate-700 text-white px-3 py-1 border-b border-slate-500 font-bold text-xs uppercase print:bg-slate-800",children:"VII. Estudio Independiente"}),r.jsxs("div",{className:"p-3 text-xs grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Actividades Autnomas"}),r.jsx("p",{children:((_=t.independentStudy)==null?void 0:_.activities)||"Repaso y organizacin de apuntes."})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Tiempo Estimado"}),r.jsx("p",{children:((P=t.independentStudy)==null?void 0:P.estimatedTime)||"60 min semana"})]}),r.jsxs("div",{className:"md:col-span-3 border-t border-slate-200 pt-2 mt-1",children:[r.jsx("span",{className:"block font-bold text-slate-600 text-[10px] uppercase",children:"Estrategia de Retroalimentacin"}),r.jsx("p",{className:"italic text-slate-700",children:((j=t.independentStudy)==null?void 0:j.feedbackLink)||"Revisin en la siguiente clase mediante preguntas aleatorias."})]})]})]}),t.evaluationTable&&t.evaluationTable.length>0&&r.jsxs("div",{className:"mb-6 border border-slate-500 rounded-sm avoid-break",children:[r.jsx("div",{className:"bg-slate-700 text-white px-3 py-2 border-b border-slate-500 font-bold text-sm uppercase text-center print:bg-slate-800 print:text-white",children:"VIII. Plan de Evaluacin y Acreditacin"}),r.jsxs("table",{className:"w-full text-left text-xs border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-100 border-b border-slate-400 text-slate-800 print:bg-slate-200",children:[r.jsx("th",{className:"p-3 border-r border-slate-300 w-[25%] font-bold uppercase text-[10px]",children:"Instrumento / Evidencia"}),r.jsx("th",{className:"p-3 border-r border-slate-300 w-[10%] text-center font-bold uppercase text-[10px]",children:"Valor"}),r.jsx("th",{className:"p-3 border-r border-slate-300 w-[15%] font-bold uppercase text-[10px]",children:"Agente"}),r.jsx("th",{className:"p-3 w-[50%] font-bold uppercase text-[10px]",children:"Criterio Especfico"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-300",children:[t.evaluationTable.map((O,G)=>r.jsxs("tr",{className:"border-b border-slate-300",children:[r.jsx("td",{className:"p-3 border-r border-slate-300 font-bold text-slate-900",children:O.instrument}),r.jsxs("td",{className:"p-3 border-r border-slate-300 text-center font-bold",children:[O.percentage,"%"]}),r.jsx("td",{className:"p-3 border-r border-slate-300 text-slate-700",children:O.agent}),r.jsx("td",{className:"p-3 text-slate-700 align-top",children:O.criteria})]},G)),r.jsxs("tr",{className:"bg-slate-100 font-bold text-slate-900 border-t-2 border-slate-400",children:[r.jsx("td",{className:"p-3 border-r border-slate-300 text-right uppercase text-[10px]",children:"Total Acumulado"}),r.jsxs("td",{className:"p-3 border-r border-slate-300 text-center",children:[t.evaluationTable.reduce((O,G)=>O+G.percentage,0),"%"]}),r.jsx("td",{colSpan:2,className:"p-3 bg-slate-50 text-[10px] font-normal italic text-slate-500",children:"* La evaluacin formativa es continua y sistemtica."})]})]})]})]}),r.jsxs("div",{className:"mb-6 border border-slate-400 border-dashed rounded-sm p-4 bg-slate-50/50 avoid-break print:block hidden",children:[r.jsx("div",{className:"font-bold text-xs uppercase text-slate-500 mb-4 text-center",children:"IX. Retroalimentacin de la Prctica Docente (A llenar al finalizar la unidad)"}),r.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{children:r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"Fortalezas / Lo que funcion"})}),r.jsx("div",{children:r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"reas de Oportunidad / Lo que no funcion"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300",children:"Ajustes para futuras planeaciones"}),r.jsx("p",{className:"text-[10px] text-slate-400 uppercase mb-6 border-b border-slate-300 pt-8",children:"Firma del Docente"})]})]})]}),r.jsxs("div",{className:"mt-12 flex justify-between items-end pt-8 border-t border-slate-200",children:[r.jsx("div",{className:"text-center w-1/3",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:e||((H=t.meta)==null?void 0:H.teacher)}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Docente"})]})}),r.jsx("div",{className:"text-center w-1/3",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Revisin Tcnica"}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Coordinacin Acadmica"})]})}),r.jsx("div",{className:"text-center w-1/3",children:r.jsxs("div",{className:"border-t border-slate-400 w-3/4 mx-auto pt-2",children:[r.jsx("p",{className:"font-bold text-slate-900 uppercase text-xs",children:"Vo. Bo."}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Direccin del Plantel"})]})})]})]})}),bq=({plan:t,subjectName:e,semestre:n})=>{var c,d;const s=M.useMemo(()=>{var V,k;const m=[];let p=0,g=0;const x=(R,E,S,C,_=!1)=>{g+=_?20:10,E?(p+=_?20:10,m.push({id:R,label:R,status:"pass",message:S})):m.push({id:R,label:R,status:_?"fail":"warning",message:C})},y=Rn.buscarPorMateria(e),T=y.find(R=>!n||R.semestre===n)||y[0],I=!!t.progression;let b=!1,N="No identificado";if(T&&I){const R=T.progresiones.find(E=>t.progression.includes(E.descripcion.substring(0,50))||E.descripcion.includes(t.progression.substring(0,50)));R&&(b=!0,N=R.id.toString())}x("Alineacin de Progresin",b,`Progresin oficial detectada (ID: ${N})`,T?"La progresin no coincide exactamente con el catlogo oficial":"No se encontr programa oficial para validar",!0),x("Vinculacin PAEC",!!((V=t.paec)!=null&&V.isLinked)&&!!t.paec.communityProblem,"Problemtica comunitaria definida","Falta definir la problemtica PAEC",!0),x("Evaluacin Formativa",!!t.evaluationTable&&t.evaluationTable.length>0,"Tabla de evaluacin presente","No se detectaron criterios de evaluacin"),x("Recursos Didcticos",!!t.resources&&t.resources.length>0,"Recursos listados","Falta lista de recursos"),x("Actividades de Aprendizaje",!!t.sessions&&t.sessions.length>0||!!t.sequence,"Secuencia didctica completa","Secuencia didctica incompleta",!0);const w=!!((k=t.meta)!=null&&k.hoursPerWeek);x("Marco Temporal",w,"Tiempos definidos en metadatos","Faltan metadatos de tiempo");const D=g>0?Math.round(p/g*100):0;return{results:m,finalScore:D,programaOficial:T}},[t,e,n]),{results:a,finalScore:i,programaOficial:o}=s,l=m=>m>=90?"text-emerald-600 bg-emerald-50 border-emerald-200":m>=70?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200";return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-700",children:r.jsx(II,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Auditora Pedaggica MCCEMS"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Validacin de alineacin con la Nueva Escuela Mexicana"})]})]}),r.jsxs("div",{className:`px-4 py-2 rounded-xl border font-bold text-xl flex items-center gap-2 ${l(i)}`,children:[r.jsxs("span",{children:[i,"%"]}),r.jsx("span",{className:"text-xs font-normal uppercase tracking-wider opacity-80",children:"Cumplimiento"})]})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Resultados del Anlisis"}),a.map((m,p)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 transition-colors",children:[m.status==="pass"&&r.jsx(Lc,{className:"w-5 h-5 text-emerald-500 shrink-0 mt-0.5"}),m.status==="warning"&&r.jsx(_i,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),m.status==="fail"&&r.jsx(km,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-700 text-sm",children:m.label}),r.jsx("p",{className:"text-xs text-slate-500",children:m.message})]})]},p))]}),r.jsxs("div",{className:"bg-indigo-50 rounded-xl p-5 border border-indigo-100",children:[r.jsxs("h4",{className:"text-indigo-800 font-bold mb-3 flex items-center gap-2",children:[r.jsx(it,{className:"w-4 h-4"}),"Referencia Oficial Utilizada"]}),o?r.jsxs("div",{className:"space-y-3 text-sm text-indigo-900/80",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Programa:"})," ",o.materia]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Semestre:"})," ",o.semestre]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Categoras MCC:"})," ",((d=(c=o.organizador_curricular)==null?void 0:c.categorias)==null?void 0:d.join(", "))||"No definidas"]}),r.jsx("div",{className:"pt-2 border-t border-indigo-200 mt-2",children:r.jsx("p",{className:"text-xs text-indigo-700",children:"Este auditor verifica que los contenidos generados correspondan con el programa oficial vigente de la SEP (2023-2024)."})})]}):r.jsxs("div",{className:"text-amber-700 text-sm flex items-center gap-2",children:[r.jsx(_i,{className:"w-4 h-4"}),"No se encontr el programa oficial en la base de datos local para comparar."]})]})]})]})},Nv={getActiveProjects:async t=>{if(!t)return[];try{const e=re(J,"pmc",t),n=await kn(e);if(n.exists()){const s=n.data();return s.pecProjects&&Array.isArray(s.pecProjects)&&s.pecProjects.length>0?s.pecProjects:(s.paec||[]).map(i=>{const o=i;return{id:o.id,name:`Atencin a: ${o.name||o.titulo}`,problemId:o.id,justification:o.descripcion||"Sin justificacin",generalObjective:`Contribuir a la solucin de: ${o.name||o.titulo}`,specificObjectives:[],duration:"Ciclo Escolar",stages:[],products:[]}})}return[]}catch(e){return console.error("Error al cargar proyectos PEC:",e),[]}},getProjectById:async(t,e)=>(await Nv.getActiveProjects(t)).find(s=>s.id===e)},_q=({school:t,subject:e,teacherName:n,onSave:s})=>{const{user:a}=dt(),[i,o]=M.useState([]),[l,c]=M.useState(""),[d,m]=M.useState(""),[p,g]=M.useState(1),[x,y]=M.useState("Rbrica"),[T,I]=M.useState(null),[b,N]=M.useState(4),[w,D]=M.useState(""),[V,k]=M.useState(""),[R,E]=M.useState("Aprendizaje Basado en Proyectos (ABP)"),[S,C]=M.useState("manual"),[_,P]=M.useState(""),[j,H]=M.useState([]),[O,G]=M.useState(""),[te,Y]=M.useState(""),[ne,de]=M.useState(""),[ye,Qe]=M.useState(!1),[Ge,ie]=M.useState(null),[Ae,Pt]=M.useState(null),[ut,Gt]=M.useState(!1),Kt=M.useRef(null),At=DI.useReactToPrint({contentRef:Kt,documentTitle:`Planeacion-${e.subjectName}-${new Date().toLocaleDateString()}`});M.useEffect(()=>{if(e.subjectName){const Z=Rn.buscarPorMateria(e.subjectName);if(Z.length>0){const pe=Z[0];o(pe.progresiones||[]),I(pe.semestre)}else o([])}},[e.subjectName]),M.useEffect(()=>{(async()=>{const pe=await yq();de(pe)})()},[]),M.useEffect(()=>{(async()=>{if(a!=null&&a.schoolId){const pe=await Nv.getActiveProjects(a.schoolId);H(pe)}})()},[a==null?void 0:a.schoolId]);const sn=async()=>{var ot,Qt,je,Oe;if(!l&&!d){Pt("Por favor selecciona una progresin o escribe un tema.");return}Qe(!0),Pt(null),ie(null);let Z="",pe=null;if(S==="manual")Z=`PROBLEMTICA PAEC: "${_||"A sugerencia de la IA basndose en el contexto"}"`,pe=_?{isLinked:!0,communityProblem:_,projectTrigger:"Proyecto integrador"}:null;else{const st=j.find(ll=>ll.id===O);st&&(Z=`
           VINCULACIN AL PROYECTO ESCOLAR COMUNITARIO (PEC):
           - Nombre Proyecto: "${st.name}"
           - Problemtica: "${st.problemId}"
           - Justificacin: "${st.justification}"
           - Objetivo General: "${st.generalObjective}"
           - ACTIVIDAD ESPECFICA A DESARROLLAR EN ESTA CLASE: "${te}"
           
           INSTRUCCIN SOBRE PEC:
           La planeacin DEBE girar en torno a contribuir a este proyecto desde la asignatura de ${e.subjectName}.
         `,pe={isLinked:!0,communityProblem:st.name,projectTrigger:st.generalObjective})}const He=`
      Genera una planeacin didctica para la materia "${e.subjectName}" (Semestre ${T||"General"}).
      
      CONTEXTO ESCOLAR:
      - Escuela: ${t.schoolName}
      - Turno: ${t.shift||"Matutino"}
      - Municipio: ${t.municipality||"Puebla"}
      - Visin: ${t.vision}
      
      DATOS DEL DOCENTE:
      - Nombre: ${n||"Por definir"}
      
      CONFIGURACIN DE TIEMPO (REQUERIDO):
      - Sesiones: ${p}
      - Horas por semana: ${b}
      - Periodo: Del ${w||"Inicio"} al ${V||"Fin"}
      - DURACIN POR SESIN: 50 MINUTOS (ESTRICTO).
      
      DIAGNSTICO DEL GRUPO (DATOS REALES):
      ${ne||"No hay datos de alumnos registrados."}

      CONFIGURACIN PEDAGGICA:
      1. PROGRESIN OFICIAL: "${l||"No especificada"}"
      2. TEMA / SITUACIN: "${d}"
      3. ESTRATEGIA DIDCTICA: "${R}"
      4. ESTRATEGIA DE EVALUACIN: "${x}"
      
      ${Z}
      
      INSTRUCCIONES CLAVE:
      - Usa la Estrategia Didctica seleccionada como eje de la secuencia.
      - Si hay Problemtica PAEC/PEC, vincula todas las actividades a ella.
      - Detalla actividad docente vs estudiante.
      - Incluye tabla de evaluacin con criterios especficos.
      - IMPORTANTE: Ajusta los tiempos de Inicio, Desarrollo y Cierre para que sumen EXACTAMENTE 50 minutos por sesin (Ej. 10min, 30min, 10min).
    `;try{const st=await vq(He,t,e),ll={...st,meta:{...st.meta,teacher:n||((ot=st.meta)==null?void 0:ot.teacher)||"",cycle:((Qt=st.meta)==null?void 0:Qt.cycle)||"2024-2025",period:((je=st.meta)==null?void 0:je.period)||"Semestral",gradeGroup:((Oe=st.meta)==null?void 0:Oe.gradeGroup)||"General",totalSessions:p,hoursPerWeek:b,startDate:w||"Por definir",endDate:V||"Por definir"},paec:pe||st.paec,pecLinkage:S==="linked"?{isLinked:!0,pecId:O,pecActivity:te}:void 0};ie(ll)}catch(st){Pt(st.message||"Error al generar la planeacin.")}finally{Qe(!1)}},be=()=>{Ge&&(s(Ge),alert("Planeacin guardada con xito."))},ae=()=>{if(!Ge)return;let Z=`PLANEACIN: ${Ge.title||Ge.subject}
`;navigator.clipboard.writeText(Z),Gt(!0),setTimeout(()=>Gt(!1),2e3)};return r.jsxs("div",{className:"space-y-8 pb-20",children:[r.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-200 shadow-sm no-print",children:[r.jsxs("h3",{className:"text-xl font-bold mb-6 text-slate-800 flex items-center gap-2",children:[r.jsx(gd,{className:"w-5 h-5 text-amber-500"}),"Configurador de Clase (Oficial SEP)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(it,{className:"w-4 h-4 text-indigo-500"}),"Progresin de Aprendizaje (",i.length," disponibles)"]}),r.jsxs("select",{value:l,onChange:Z=>c(Z.target.value),className:"w-full p-3 rounded-xl border border-slate-200 bg-slate-50 focus:border-indigo-500 focus:bg-white transition-all text-sm",children:[r.jsx("option",{value:"",children:"-- Selecciona una progresin oficial --"}),i.map(Z=>r.jsxs("option",{value:Z.descripcion,children:[Z.id,". ",Z.descripcion.substring(0,120),"..."]},Z.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),"Tema o Situacin Especfica"]}),r.jsx("input",{type:"text",value:d,onChange:Z=>m(Z.target.value),placeholder:"Ej. Ciberseguridad y redes sociales...",className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-emerald-500 transition-all text-sm"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-orange-500"}),"Estrategia Didctica"]}),r.jsxs("select",{value:R,onChange:Z=>E(Z.target.value),className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-orange-500 text-sm",children:[r.jsx("option",{value:"Aprendizaje Basado en Proyectos (ABP)",children:"Aprendizaje Basado en Proyectos (ABP)"}),r.jsx("option",{value:"Aprendizaje Basado en Problemas (ABPr)",children:"Aprendizaje Basado en Problemas (ABPr)"}),r.jsx("option",{value:"Estudio de Casos",children:"Estudio de Casos"}),r.jsx("option",{value:"Aprendizaje Colaborativo",children:"Aprendizaje Colaborativo"}),r.jsx("option",{value:"Aula Invertida",children:"Aula Invertida"}),r.jsx("option",{value:"Indagacin (STEAM)",children:"Indagacin (STEAM)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-4 h-4 text-pink-500"}),"Vinculacin PEC"]}),r.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-0.5",children:[r.jsx("button",{onClick:()=>C("manual"),className:`px-2 py-0.5 text-[10px] rounded-md font-bold transition-all ${S==="manual"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:"Manual"}),r.jsx("button",{onClick:()=>C("linked"),className:`px-2 py-0.5 text-[10px] rounded-md font-bold transition-all ${S==="linked"?"bg-pink-500 shadow text-white":"text-slate-400"}`,children:"Proyecto Vinculado"})]})]}),S==="manual"?r.jsx("input",{type:"text",value:_,onChange:Z=>P(Z.target.value),placeholder:"Ej. Falta de agua, Contaminacin...",className:"w-full p-3 rounded-xl border border-slate-200 bg-white focus:border-pink-500 text-sm"}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:O,onChange:Z=>G(Z.target.value),className:"w-full p-3 rounded-xl border border-pink-200 bg-pink-50 focus:border-pink-500 text-sm text-pink-900 font-medium",children:[r.jsx("option",{value:"",children:"-- Selecciona Proyecto Activo --"}),j.map(Z=>r.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),O&&r.jsx("input",{type:"text",value:te,onChange:Z=>Y(Z.target.value),placeholder:"Qu actividad especfica del proyecto hars?",className:"w-full p-2 rounded-lg border border-pink-200 bg-white text-xs"})]})]})]}),r.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-slate-100",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2 mb-2",children:[r.jsx(Mo,{className:"w-3 h-3"})," Duracin"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("select",{value:p,onChange:Z=>g(Number(Z.target.value)),className:"w-full p-2 rounded-lg border border-slate-200 text-sm",children:[1,2,3,4,5,6].map(Z=>r.jsxs("option",{value:Z,children:[Z," Sesiones"]},Z))}),r.jsx("select",{value:b,onChange:Z=>N(Number(Z.target.value)),className:"w-full p-2 rounded-lg border border-slate-200 text-sm",children:[1,2,3,4,5,6,7,8].map(Z=>r.jsxs("option",{value:Z,children:[Z," Hrs/Sem"]},Z))})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2 mb-2",children:[r.jsx(Vh,{className:"w-3 h-3"})," Periodo de Aplicacin"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"date",className:"p-2 border border-slate-200 rounded-lg text-xs",value:w,onChange:Z=>D(Z.target.value)}),r.jsx("input",{type:"date",className:"p-2 border border-slate-200 rounded-lg text-xs",value:V,onChange:Z=>k(Z.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2 mb-2",children:[r.jsx(AI,{className:"w-3 h-3"})," Tipo de Evaluacin"]}),r.jsxs("select",{value:x,onChange:Z=>y(Z.target.value),className:"w-full p-2 rounded-lg border border-slate-200 bg-white focus:border-purple-500 text-sm",children:[r.jsx("option",{value:"Rbrica Detallada",children:"Rbrica Detallada"}),r.jsx("option",{value:"Lista de Cotejo",children:"Lista de Cotejo"}),r.jsx("option",{value:"Gua de Observacin",children:"Gua de Observacin"}),r.jsx("option",{value:"Proyecto Transversal",children:"Proyecto Transversal"})]})]})]})]}),r.jsxs("button",{disabled:ye||!l&&!d,onClick:sn,className:`w-full py-4 rounded-xl font-bold flex justify-center items-center gap-2 shadow-lg transition-all ${ye||!l&&!d?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":"bg-indigo-600 text-white hover:bg-indigo-700 active:scale-95"} `,children:[ye?r.jsx(al,{className:"w-5 h-5 animate-spin"}):r.jsx(wO,{className:"w-5 h-5"}),ye?"Generando Planeacin Oficial...":"Generar Planeacin Completa"]})]}),Ae&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-2xl animate-in zoom-in duration-300",children:Ae}),Ge&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-700",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4 no-print",children:[r.jsxs("h4",{className:"font-bold text-slate-700 uppercase tracking-widest text-xs flex items-center gap-2",children:[r.jsx(Lc,{className:"w-4 h-4 text-emerald-500"})," Planeacin Lista"]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold hover:bg-indigo-100 transition-colors",title:"Guardar en historial",children:[r.jsx(Ii,{className:"w-4 h-4"})," Guardar"]}),r.jsxs("button",{onClick:ae,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${ut?"bg-emerald-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:"Copiar texto plano",children:[ut?r.jsx(Lc,{className:"w-4 h-4"}):r.jsx(TU,{className:"w-4 h-4"}),ut?"Copiado":"Copiar Texto"]}),r.jsxs("button",{onClick:()=>At(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 transition-shadow shadow-lg shadow-slate-200",title:"Imprimir o guardar como PDF",children:[r.jsx(Uh,{className:"w-4 h-4"})," Exportar a PDF"]})]})]}),r.jsx("div",{className:"mb-8 no-print animate-in fade-in slide-in-from-bottom-4 duration-700 delay-300",children:r.jsx(bq,{plan:Ge,subjectName:e.subjectName,semestre:T||void 0})}),r.jsx("div",{className:"overflow-auto border border-slate-100 rounded-3xl shadow-xl print:shadow-none print:border-none print:rounded-none",children:r.jsx(A1,{ref:Kt,plan:Ge,teacherName:n})})]})]})},vC=["Sofa","Santiago","Valentina","Sebastin","Mara","Alejandro","Ximena","Mateo","Camila","Nicols","Valeria","Diego","Ana","Samuel","Jos","Daniela","Luis","Fernanda","Gabriel","Mariana"],au=["Garca","Rodrguez","Martnez","Hernndez","Lpez","Gonzlez","Prez","Snchez","Ramrez","Torres","Flores","Rivera","Gmez","Daz","Cruz","Reyes","Morales","Ortiz","Gutirrez","Castillo"],yC=["Visual","Auditivo","Kinestsico","Lecto-escritor"],bC=["Alto","Medio","Bajo","En riesgo"],iu=["Tecnologa","Artes","Deportes","Ciencias","Redes Sociales","Msica","Videojuegos","Lectura"],I1=async(t=60)=>{const e=_I(J),n=ue(J,"alumnos"),s=Array.from({length:t}).map(()=>{const a=vC[Math.floor(Math.random()*vC.length)],i=au[Math.floor(Math.random()*au.length)],o=au[Math.floor(Math.random()*au.length)];return{nombre:a,apellidoPaterno:i,apellidoMaterno:o,matricula:`2024${Math.floor(1e3+Math.random()*9e3)}`,email:`${a.toLowerCase()}.${i.toLowerCase()}@escuela.edu.mx`,estiloAprendizaje:yC[Math.floor(Math.random()*yC.length)],situacionLaboral:Math.random()>.7?"Trabaja y estudia":"Estudiante",promedioAnterior:(6+Math.random()*4).toFixed(1),nivelSocioemocional:bC[Math.floor(Math.random()*bC.length)],intereses:[iu[Math.floor(Math.random()*iu.length)],iu[Math.floor(Math.random()*iu.length)]],asistencias:Math.floor(80+Math.random()*20),grupo:"A",grado:"1"}});return s.forEach(a=>{const i=re(n);e.set(i,a)}),await e.commit(),s.length},Eq={id:"paec-2025-001",encabezado:{institucion_superior:"Secretara de Educacin Pblica",subsecretaria:"Subsecretara de Educacin Media Superior",direccion_general:"Direccin de Bachilleratos Estatales y Preparatoria Abierta",supervision_escolar:"Zona Escolar 013",nombre_escuela:'Bachillerato General Oficial "Carlos Camacho Espritu"',turno:"Vespertino",cct:"21EBH0026G"},identidad:{nombre_programa:"PAEC - Programa Aula Escuela Comunidad",titulo_proyecto:"Cuidado y prevencin de la salud: Un enfoque integral",tipo_documento:"Plan Factible",ciclo_escolar:"2025  2026",fecha_elaboracion:new Date().toLocaleDateString("es-MX")},contenido:{justificacion:"El proyecto busca identificar problemticas crticas como el sedentarismo y la mala alimentacin. A travs de actividades interdisciplinarias, los estudiantes diagnostican hbitos, calculan su IMC y participan en activaciones fsicas.",proposito_general:"Identificar y atender problemas de salud mediante investigacin y accin colectiva (Rally deportivo, ferias de salud) para fomentar el bienestar integral.",metodologia_diseno:"Aprendizaje Basado en Proyectos Comunitarios, integrando transversalidad con Cultura Digital, Ciencias y Educacin Fsica."},matriz_actividades:[{id:"act-01",fase_proyecto:"Identificacin",asignatura:"Cultura Digital II",proposito_formativo:"Analizar datos estadsticos de salud escolar.",contenidos_formativos:"Hoja de Clculo, Grficos Estadsticos",actividades_clave:"Diseo de encuestas digitales sobre hbitos alimenticios.",semana_ejecucion:"2 Semana Septiembre",participantes:["Docentes","Estudiantes"],instrumento_evaluacion:"Lista de Cotejo",evidencia_esperada:"Base de datos en Excel"},{id:"act-02",fase_proyecto:"Accin",asignatura:"Ciencias Naturales",proposito_formativo:"Comprender el metabolismo y nutricin.",contenidos_formativos:"IMC, Nutricin Celular",actividades_clave:"Jornada de medicin de peso y talla (Clculo IMC).",semana_ejecucion:"1 Semana Noviembre",participantes:["Docentes","Estudiantes","Padres"],instrumento_evaluacion:"Rbrica",evidencia_esperada:"Ficha clnica individual"}],ficha_administrativa:{entidad_federativa:"Puebla",municipio:"Puebla",localidad:"U.H. Dr. Mateo de Regil Rodrguez",duracion_proyecto:"Semestral",estatus:"Proceso",poblacion:{estudiantes_hombres:0,estudiantes_mujeres:0,estudiantes_nobinarios:0,padres_tutores:120,docentes:12,administrativos:3,directivos:1,total_participantes:0}},firmas:[{nombre:"C. Luisa Luna Barrios",cargo:"Docente Responsable"},{nombre:"C. Alejandra Adriana Marciano Mendoza",cargo:"Docente Responsable"},{nombre:"C. Hortensia Vallejo Vzquez",cargo:"Docente Responsable"},{nombre:"C. Griselda Caselin Cruz",cargo:"Docente Responsable"},{nombre:"C. Beatriz Snchez Torres",cargo:"Docente Responsable"},{nombre:"Jose Roberto Mendoza Mendoza",cargo:"Docente Responsable"}]},R1=({onClose:t,diagnostico:e})=>{const[n,s]=M.useState(Eq);M.useEffect(()=>{e&&s(m=>{var p;return{...m,identidad:{...m.identidad,titulo_proyecto:(p=e.problemaPAEC)!=null&&p.problema?`Intervencin: ${e.problemaPAEC.problema}`:m.identidad.titulo_proyecto},ficha_administrativa:{...m.ficha_administrativa,poblacion:{...m.ficha_administrativa.poblacion,total_participantes:e.totalAlumnos||0,estudiantes_hombres:Math.floor((e.totalAlumnos||0)/2),estudiantes_mujeres:Math.ceil((e.totalAlumnos||0)/2)}}}})},[e]);const{encabezado:a,identidad:i,contenido:o,matriz_actividades:l,ficha_administrativa:c,firmas:d}=n;return r.jsxs("div",{className:"fixed inset-0 bg-slate-100 z-50 overflow-y-auto animate-in slide-in-from-bottom duration-300",children:[r.jsxs("nav",{className:"sticky top-0 bg-white border-b border-slate-200 z-40 px-6 py-4 flex justify-between items-center shadow-sm print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-bold text-slate-800 text-lg",children:"Visor de Plan Factible"}),r.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 text-xs rounded-full border border-slate-200",children:"Borrador"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors shadow-sm",children:[r.jsx(Uh,{className:"w-4 h-4"})," Exportar PDF"]}),r.jsx("button",{onClick:t,className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})]}),r.jsxs("main",{className:"max-w-[21cm] mx-auto bg-white min-h-[29.7cm] shadow-2xl my-8 p-[2cm] print:shadow-none print:my-0 print:p-0 print:w-full",children:[r.jsxs("header",{className:"border-b-2 border-slate-800 pb-6 mb-8 text-center text-slate-900",children:[r.jsx("h1",{className:"text-sm font-bold uppercase tracking-widest text-slate-500",children:a.institucion_superior}),r.jsx("h2",{className:"text-xs font-semibold uppercase text-slate-500 mb-4",children:a.subsecretaria}),r.jsxs("div",{className:"flex justify-between items-end border-b border-slate-200 pb-2 mb-2 text-xs font-mono text-slate-600",children:[r.jsx("span",{children:a.supervision_escolar}),r.jsxs("span",{children:["CCT: ",r.jsx("strong",{children:a.cct})]})]}),r.jsx("div",{className:"text-3xl font-serif font-bold mt-4 mb-1",children:a.nombre_escuela}),r.jsxs("div",{className:"text-sm italic text-slate-600",children:["Turno: ",a.turno]})]}),r.jsx("section",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 mb-8 print:bg-white print:border-slate-800",children:r.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Programa"}),r.jsx("div",{className:"font-bold text-lg text-slate-800",children:i.nombre_programa})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Ciclo Escolar"}),r.jsx("div",{className:"font-bold text-lg text-slate-800",children:i.ciclo_escolar})]}),r.jsxs("div",{className:"col-span-2 mt-2 pt-4 border-t border-slate-200 border-dashed",children:[r.jsx("span",{className:"block text-xs font-bold text-indigo-600 uppercase tracking-wider mb-1",children:"Ttulo del Proyecto"}),r.jsxs("div",{className:"text-2xl font-extrabold text-indigo-900 leading-tight",children:['"',i.titulo_proyecto,'"']})]})]})}),r.jsxs("section",{className:"mb-8",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase border-b border-slate-300 pb-2 mb-4",children:[r.jsx(Fh,{className:"w-4 h-4"})," Contexto y Poblacin"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Ubicacin"}),r.jsxs("div",{className:"font-semibold",children:[c.localidad,", ",c.municipio]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Poblacin Estudiantil"}),r.jsxs("div",{className:"font-semibold",children:[c.poblacion.total_participantes," Alumnos"]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-100",children:[r.jsx("div",{className:"text-slate-500 text-xs",children:"Padres de Familia"}),r.jsxs("div",{className:"font-semibold",children:[c.poblacion.padres_tutores," Tutores"]})]})]})]}),r.jsxs("section",{className:"mb-8 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase mb-2",children:"Justificacin"}),r.jsx("p",{className:"text-justify text-slate-700 text-sm leading-relaxed",children:o.justificacion})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase mb-2",children:"Propsito General"}),r.jsx("p",{className:"text-justify text-slate-700 text-sm leading-relaxed",children:o.proposito_general})]})]}),r.jsxs("section",{className:"mb-12",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase border-b border-slate-300 pb-2 mb-4",children:[r.jsx(AI,{className:"w-4 h-4"})," Matriz de Actividades y Transversalidad"]}),r.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-slate-100 text-slate-700 font-bold border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 w-1/6",children:"Fase"}),r.jsx("th",{className:"p-3 w-1/6",children:"Asignatura"}),r.jsx("th",{className:"p-3 w-1/3",children:"Actividad Clave"}),r.jsx("th",{className:"p-3 w-1/6",children:"Evidencia"}),r.jsx("th",{className:"p-3 w-1/6",children:"Fecha"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(m=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 font-semibold text-slate-900",children:m.fase_proyecto}),r.jsx("td",{className:"p-3 text-indigo-700",children:m.asignatura}),r.jsx("td",{className:"p-3 text-slate-600",children:m.actividades_clave}),r.jsx("td",{className:"p-3 text-slate-500 italic",children:m.evidencia_esperada}),r.jsx("td",{className:"p-3 text-slate-500 text-xs",children:m.semana_ejecucion})]},m.id))})]})})]}),r.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-slate-800 break-inside-avoid",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-slate-900 uppercase mb-8",children:[r.jsx(UU,{className:"w-4 h-4"})," Comit Responsable"]}),r.jsx("div",{className:"grid grid-cols-2 gap-x-12 gap-y-16",children:d.map((m,p)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-b border-black w-2/3 mx-auto mb-2"}),r.jsx("div",{className:"font-bold text-sm",children:m.nombre}),r.jsx("div",{className:"text-xs text-slate-500 uppercase",children:m.cargo})]},p))}),r.jsxs("div",{className:"mt-12 text-[10px] text-center text-slate-400 font-mono",children:["Documento generado digitalmente por Plataforma EDUPLANMX | ",new Date().getFullYear()]})]})]})]})},Nq=({setView:t,recentPlansCount:e})=>{const[n,s]=zc.useState(!1);return n?r.jsx(R1,{onClose:()=>s(!1),diagnostico:null}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 rounded-3xl p-8 text-white shadow-xl shadow-indigo-100 relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Ahorra horas administrativas"}),r.jsx("p",{className:"text-indigo-100 max-w-md",children:"Genera planeaciones didcticas alineadas al MCCEMS en segundos. Solo indica qu quieres hacer en clase y nosotros nos encargamos del formato SEP."}),r.jsxs("button",{onClick:()=>t("generator"),className:"mt-6 bg-white text-indigo-600 px-6 py-3 rounded-xl font-bold hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"}),"Empezar Planeacin"]})]}),r.jsx("div",{className:"absolute right-[-20px] bottom-[-20px] opacity-10",children:r.jsx(it,{className:"w-64 h-64"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-xl flex items-center justify-center text-blue-600 mb-4",children:r.jsx(Mo,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:e}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Planes Generados"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-emerald-50 w-12 h-12 rounded-xl flex items-center justify-center text-emerald-600 mb-4",children:r.jsx(ms,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"100%"}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Alineado a la SEP"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsx("div",{className:"bg-amber-50 w-12 h-12 rounded-xl flex items-center justify-center text-amber-600 mb-4",children:r.jsx(it,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"4.0"}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Versin MCCEMS 2024"})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-8 shadow-sm",children:[r.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800",children:"Acciones Rpidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>t("context"),className:"p-4 border border-slate-100 rounded-2xl hover:border-indigo-200 hover:bg-indigo-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Actualizar Contexto Escolar"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Define tu escuela, comunidad y metas directivas."})]}),r.jsxs("button",{onClick:()=>t("plans"),className:"p-4 border border-slate-100 rounded-2xl hover:border-indigo-200 hover:bg-indigo-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Revisar Historial"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Accede a tus planeaciones anteriores para reutilizarlas."})]}),r.jsxs("button",{onClick:async()=>{confirm("Generar 60 alumnos ficticios para pruebas de contexto?")&&(await I1(60),alert("Alumnos generados! Ahora al planear, la IA detectar este contexto."))},className:"p-4 border border-slate-100 rounded-2xl hover:border-emerald-200 hover:bg-emerald-50 transition-all text-left group",children:[r.jsx("div",{className:"font-semibold text-slate-800 group-hover:text-emerald-700",children:"Generar Alumnos Demo"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Puebla la base de datos con 60 estudiantes para pruebas."})]}),r.jsxs("button",{onClick:()=>s(!0),className:"p-4 border border-slate-100 rounded-2xl hover:border-blue-200 hover:bg-blue-50 transition-all text-left",children:[r.jsx("div",{className:"font-semibold text-slate-800",children:"Ver Plan Factible (Web)"}),r.jsx("div",{className:"text-sm text-slate-500",children:"Visualiza el sitio web generado para el proyecto de Salud."})]})]})]})]})},j1=async(t,e,n)=>{var s,a;try{if(!e||!n)throw new Error("userId y schoolId son requeridos");const i={userId:e,schoolId:n,title:t.title||t.subject||"Sin ttulo",subject:t.subject||"",grade:(s=t.meta)==null?void 0:s.gradeGroup,semester:(a=t.meta)==null?void 0:a.semester,content:t,createdAt:Me.now(),updatedAt:Me.now(),tags:[],isPublic:!1},o=await es(ue(J,"planeaciones"),i);return console.log(" Planeacin creada:",o.id),o.id}catch(i){throw console.error(" Error al crear planeacin:",i),i}},Qh=async(t,e)=>{var n;try{if(!t||!e)return console.warn(" getMisPlaneaciones: userId o schoolId vacos",{userId:t,schoolId:e}),[];const s=Ye(ue(J,"planeaciones"),tt("schoolId","==",e),tt("userId","==",t),Ds("createdAt","desc")),i=(await Re(s)).docs.map(o=>({id:o.id,...o.data()}));return console.log(` Cargadas ${i.length} planeaciones del docente`),i}catch(s){if((s==null?void 0:s.code)==="failed-precondition"||(n=s==null?void 0:s.message)!=null&&n.includes("index")){console.warn(" ndice faltante en Firestore. Usando consulta sin ordenar..."),console.warn(" Para solucionarlo, ve a Firebase Console > Firestore > Indexes y crea el ndice sugerido");try{const a=Ye(ue(J,"planeaciones"),tt("schoolId","==",e),tt("userId","==",t)),o=(await Re(a)).docs.map(l=>({id:l.id,...l.data()}));return o.sort((l,c)=>{const d=l.createdAt instanceof Me?l.createdAt.toDate():new Date(l.createdAt);return(c.createdAt instanceof Me?c.createdAt.toDate():new Date(c.createdAt)).getTime()-d.getTime()}),console.log(` Cargadas ${o.length} planeaciones (sin ndice)`),o}catch(a){return console.error(" Error en consulta fallback:",a),[]}}return console.error(" Error al cargar planeaciones del docente:",s),[]}},Cv=async(t,e)=>{try{if(!t)throw new Error("schoolId es requerido");let n=Ye(ue(J,"planeaciones"),tt("schoolId","==",t),Ds("createdAt","desc"));e&&(n=Ye(n,ro(e)));const a=(await Re(n)).docs.map(i=>({id:i.id,...i.data()}));return console.log(` Cargadas ${a.length} planeaciones de la escuela`),a}catch(n){throw console.error(" Error al cargar planeaciones de la escuela:",n),n}},Xh=async(t,e)=>{try{const n=re(J,"planeaciones",t),s=await kn(n);if(!s.exists())return console.warn(" Planeacin no encontrada:",t),null;const a={id:s.id,...s.data()};if(a.schoolId!==e)throw console.error(" Acceso denegado: planeacin de otra escuela"),new Error("No tienes permiso para ver esta planeacin");return a}catch(n){throw console.error(" Error al obtener planeacin:",n),n}},M1=async(t,e,n,s)=>{try{const a=await Xh(t,s);if(!a)throw new Error("Planeacin no encontrada");if(a.userId!==n)throw new Error("No tienes permiso para editar esta planeacin");const i=re(J,"planeaciones",t);await vt(i,{...e,updatedAt:Me.now()}),console.log(" Planeacin actualizada:",t)}catch(a){throw console.error(" Error al actualizar planeacin:",a),a}},P1=async(t,e,n)=>{try{const s=await Xh(t,n);if(!s)throw new Error("Planeacin no encontrada");if(s.userId!==e)throw new Error("No tienes permiso para eliminar esta planeacin");const a=re(J,"planeaciones",t);await xs(a),console.log(" Planeacin eliminada:",t)}catch(s){throw console.error(" Error al eliminar planeacin:",s),s}},D1=async(t,e)=>{var n,s;try{const a=await Qh(t,e),i={total:a.length,porMateria:{},porSemestre:{},ultimaCreada:(s=(n=a[0])==null?void 0:n.createdAt)==null?void 0:s.toString()};return a.forEach(o=>{if(o.subject&&(i.porMateria[o.subject]=(i.porMateria[o.subject]||0)+1),o.semester){const l=o.semester.toString();i.porSemestre[l]=(i.porSemestre[l]||0)+1}}),i}catch(a){throw console.error(" Error al obtener estadsticas:",a),a}},k1=async(t,e,n)=>{try{const s=n?await Qh(n,e):await Cv(e),a=t.toLowerCase(),i=s.filter(o=>{var l,c,d;return((l=o.title)==null?void 0:l.toLowerCase().includes(a))||((c=o.subject)==null?void 0:c.toLowerCase().includes(a))||((d=o.tags)==null?void 0:d.some(m=>m.toLowerCase().includes(a)))});return console.log(` Encontradas ${i.length} planeaciones para "${t}"`),i}catch(s){throw console.error(" Error al buscar planeaciones:",s),s}},Gm={crear:j1,getMias:Qh,getEscuela:Cv,getById:Xh,actualizar:M1,eliminar:P1,getEstadisticas:D1,buscar:k1},Cq=Object.freeze(Object.defineProperty({__proto__:null,actualizarPlaneacion:M1,buscarPlaneaciones:k1,crearPlaneacion:j1,eliminarPlaneacion:P1,getEstadisticasPlaneaciones:D1,getMisPlaneaciones:Qh,getPlaneacion:Xh,getPlaneacionesEscuela:Cv,planeacionesService:Gm},Symbol.toStringTag,{value:"Module"})),Tq=()=>{var k,R;const{user:t}=dt(),[e,n]=M.useState([]),[s,a]=M.useState([]),[i,o]=M.useState(null),[l,c]=M.useState(!0),[d,m]=M.useState(""),[p,g]=M.useState("all"),[x,y]=M.useState("all"),T=M.useRef(null),I=DI.useReactToPrint({contentRef:T,documentTitle:i?`Planeacion-${i.subject}`:"Planeacion"});M.useEffect(()=>{t!=null&&t.id&&(t!=null&&t.schoolId)&&b()},[t]),M.useEffect(()=>{N()},[e,d,p,x]);const b=async()=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.schoolId)))try{c(!0);const E=await Gm.getMias(t.id,t.schoolId);n(E)}catch(E){console.error("Error al cargar planeaciones:",E);const S=localStorage.getItem("savedPlans");if(S){const C=JSON.parse(S);n(C.map(_=>{var P,j;return{id:_.id||Date.now().toString(),userId:t.id,schoolId:t.schoolId,title:_.title||_.subject,subject:_.subject,semester:(P=_.meta)==null?void 0:P.semester,content:_,createdAt:((j=_.meta)==null?void 0:j.startDate)||new Date().toISOString()}}))}}finally{c(!1)}},N=()=>{let E=[...e];if(d){const S=d.toLowerCase();E=E.filter(C=>{var _,P;return((_=C.title)==null?void 0:_.toLowerCase().includes(S))||((P=C.subject)==null?void 0:P.toLowerCase().includes(S))})}p!=="all"&&(E=E.filter(S=>S.subject===p)),x!=="all"&&(E=E.filter(S=>{var C;return((C=S.semester)==null?void 0:C.toString())===x})),a(E)},w=async(E,S)=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.schoolId)||!window.confirm(`Ests seguro de eliminar la planeacin "${S}"?

Esta accin no se puede deshacer.`)))try{await Gm.eliminar(E,t.id,t.schoolId),n(P=>P.filter(j=>j.id!==E));const _=localStorage.getItem("savedPlans");if(_){const j=JSON.parse(_).filter(H=>H.id!==E);localStorage.setItem("savedPlans",JSON.stringify(j))}console.log(" Planeacin eliminada:",E)}catch(_){console.error("Error al eliminar planeacin:",_),alert("Error al eliminar la planeacin. Intenta de nuevo.")}},D=Array.from(new Set(e.map(E=>E.subject).filter(Boolean))),V=Array.from(new Set(e.map(E=>E.semester).filter(Boolean))).sort();return l?r.jsxs("div",{className:"text-center py-20",children:[r.jsx(eO,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando planeaciones..."})]}):e.length===0?r.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-slate-300",children:[r.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400",children:r.jsx(Ls,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"No hay planes guardados"}),r.jsx("p",{className:"text-slate-500 mt-2",children:"Tus planeaciones generadas aparecern aqu."})]}):i?r.jsxs("div",{className:"animate-in fade-in duration-300 pb-20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 no-print",children:[r.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-xl transition-colors font-bold text-sm",children:[r.jsx(fd,{className:"w-4 h-4"})," Volver al Historial"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>w(i.id,i.title),className:"flex items-center gap-2 px-4 py-2 bg-rose-50 text-rose-600 rounded-xl text-sm font-bold hover:bg-rose-100 transition-all",children:[r.jsx(ns,{className:"w-4 h-4"})," Eliminar"]}),r.jsxs("button",{onClick:()=>I(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 shadow-lg shadow-slate-200 transition-all",children:[r.jsx(Uh,{className:"w-4 h-4"})," Imprimir / PDF"]})]})]}),r.jsx("div",{className:"overflow-auto border border-slate-100 rounded-3xl shadow-xl print:shadow-none print:border-none print:rounded-none",children:r.jsx(A1,{ref:T,plan:i.content,teacherName:(R=(k=i.content)==null?void 0:k.meta)==null?void 0:R.teacher})})]}):r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ls,{className:"w-6 h-6 text-indigo-600"}),"Tu Historial de Planeaciones",r.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",s.length,")"]})]})}),r.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por ttulo o materia...",value:d,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vc,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filtros:"})]}),r.jsxs("select",{value:p,onChange:E=>g(E.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"Todas las materias"}),D.map(E=>r.jsx("option",{value:E,children:E},E))]}),r.jsxs("select",{value:x,onChange:E=>y(E.target.value),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"all",children:"Todos los semestres"}),V.map(E=>r.jsxs("option",{value:E,children:["Semestre ",E]},E))]}),(d||p!=="all"||x!=="all")&&r.jsx("button",{onClick:()=>{m(""),g("all"),y("all")},className:"px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Limpiar filtros"})]})]}),s.length===0?r.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:r.jsx("p",{className:"text-slate-600",children:"No se encontraron planeaciones con los filtros seleccionados."})}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map((E,S)=>r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 transition-all flex justify-between items-center group shadow-sm hover:shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-bold group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:s.length-S}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800",children:E.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:[r.jsx(it,{className:"w-3 h-3"})," ",E.subject]}),E.semester&&r.jsxs("span",{className:"text-xs font-medium text-slate-500 flex items-center gap-1",children:[r.jsx(Vh,{className:"w-3 h-3"})," Semestre ",E.semester]}),r.jsx("span",{className:"text-xs text-slate-400",children:new Date(E.createdAt).toLocaleDateString("es-MX")})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>w(E.id,E.title),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar planeacin",children:r.jsx(ns,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>o(E),className:"px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-100 transition-colors",children:["Ver Detalle ",r.jsx(sl,{className:"w-4 h-4"})]})]})]},E.id||S))})]})},Sq="AIzaSyDE6z8pU6Y63Vly8gCH4oYu3_FnCqBieZw",wq=new w1({apiKey:Sq}),Aq={async procesarDiagnosticoGrupal(t){const e="gemini-2.0-flash-lite-preview-02-05",n=t.map(a=>{var i,o,l,c,d,m;return{situacion:((i=a.datosNEM)==null?void 0:i.situacionFamiliar)||"Estudiante",estilo:((o=a.datosNEM)==null?void 0:o.estiloAprendizaje)||"No definido",promedio:((l=a.datosAdministrativos)==null?void 0:l.promedioSecundaria)||0,barreras:((c=a.datosNEM)==null?void 0:c.barrerasAprendizaje)||[],internet:(d=a.datosNEM)!=null&&d.accesoInternet?"S":"No",intereses:((m=a.datosNEM)==null?void 0:m.intereses)||[]}}),s=`
      Analiza los siguientes ${t.length} perfiles de alumnos y genera un Diagnstico Socioeducativo Grupal para el Programa de Mejora Continua (PMC) y el Programa Aula-Escuela-Comunidad (PAEC).

      DATOS DE LOS ALUMNOS (Muestra aleatoria):
      ${JSON.stringify(n.slice(0,50))} 
      (Nota: Si hay ms de 50, generaliza basado en esta muestra).

      Genera un JSON con la siguiente estructura exacta:
      {
        "promedioGrupal": number (promedio general calculado con 1 decimal),
        "perfilAprendizaje": {
           "estilosDominantes": string[] (ej. ["Visual", "Kinestsico"]),
           "ganchosInteres": string[] (ej. ["Tecnologa", "Ftbol"]),
           "recomendacionesDidacticas": string[] (3 estrategias concretas para este grupo)
        },
        "alertasAbandono": [
           { "alumnoId": "ID_X", "nombreAlumno": "Nombre (Inventado para proteger privacidad en este demo o usar ID)", "nivelRiesgo": "Alto" | "Medio", "factoresRiesgo": string[], "recomendaciones": string[] }
        ] (Identifica 3-5 casos hipotticos en riesgo basado en bajos promedios o situacin laboral),
        "problemaPAEC": {
           "problema": string (Problema central detectado ej. "Desercin por falta de recursos"),
           "frecuencia": number (estimado de alumnos afectados),
           "porcentaje": number (porcentaje estimado)
        },
        "problemasSecundarios": [
           { "problema": string, "porcentaje": number }
        ],
        "metasPMC": string[] (3 objetivos prioritarios para el plan de mejora),
        "contextoDigital": {
           "porcentajeConectividad": number (0-100),
           "conInternet": number (conteo),
           "sinInternet": number (conteo)
        }
      }
    `;try{let i=(await wq.models.generateContent({model:e,contents:s,config:{responseMimeType:"application/json",responseSchema:{type:F.OBJECT,properties:{promedioGrupal:{type:F.NUMBER},perfilAprendizaje:{type:F.OBJECT,properties:{estilosDominantes:{type:F.ARRAY,items:{type:F.STRING}},ganchosInteres:{type:F.ARRAY,items:{type:F.STRING}},recomendacionesDidacticas:{type:F.ARRAY,items:{type:F.STRING}}}},alertasAbandono:{type:F.ARRAY,items:{type:F.OBJECT,properties:{alumnoId:{type:F.STRING},nombreAlumno:{type:F.STRING},nivelRiesgo:{type:F.STRING},factoresRiesgo:{type:F.ARRAY,items:{type:F.STRING}},recomendaciones:{type:F.ARRAY,items:{type:F.STRING}}}}},problemaPAEC:{type:F.OBJECT,properties:{problema:{type:F.STRING},frecuencia:{type:F.NUMBER},porcentaje:{type:F.NUMBER}}},problemasSecundarios:{type:F.ARRAY,items:{type:F.OBJECT,properties:{problema:{type:F.STRING},porcentaje:{type:F.NUMBER}}}},metasPMC:{type:F.ARRAY,items:{type:F.STRING}},contextoDigital:{type:F.OBJECT,properties:{porcentajeConectividad:{type:F.NUMBER},conInternet:{type:F.NUMBER},sinInternet:{type:F.NUMBER}}}}}}})).text;if(!i)throw new Error("La respuesta de la IA lleg vaca.");i=i.replace(/```json/g,"").replace(/```/g,"").trim();try{return JSON.parse(i)}catch(o){throw console.error(" Error de sintaxis en JSON recibido de IA:",o),console.log(" Texto crudo recibido:",i),new Error("El diagnstico generado tiene un formato invlido. Intenta de nuevo.")}}catch(a){throw console.error("Error generando diagnstico IA:",a),new Error("No se pudo generar el diagnstico inteligente.")}}},yp="formulario_alumno_progreso",Iq=()=>{const e=(()=>{const d=localStorage.getItem(yp);if(d)try{return JSON.parse(d)}catch{return null}return null})(),[n,s]=M.useState((e==null?void 0:e.datosAdmin)||{curp:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",genero:"Prefiero no decir",promedioSecundaria:8,tipoSecundaria:"General",sostenimiento:"Pblico"}),[a,i]=M.useState((e==null?void 0:e.redApoyo)||{nombreTutor:"",parentesco:"Padre",telefonoPadre:"",telefonoMadre:"",telefonoTutor:"",telefonoEmergencia:""}),[o,l]=M.useState((e==null?void 0:e.datosNEM)||{tipoFamilia:"Nuclear",gradoEstudioPadre:"Secundaria",gradoEstudioMadre:"Secundaria",ocupacionPadre:"Obrero",ocupacionMadre:"Hogar",situacionLaboral:"Solo estudia",tipoVivienda:"Propia",serviciosVivienda:{agua:!0,luz:!0,drenaje:!0,internet:!1,tvCable:!1,aireAcondicionado:!1},ingresosMensuales:"5001-10000",personasAportanIngreso:2,cuentaConBeca:!1,institucionSalud:"IMSS",enfermedadesCronicas:[],problemasComunitarios:[],deficienciasServicios:[],consumoSustanciasCuadra:[],consumoSustanciasCasa:[],frecuenciaDiscusionesComunidad:"Rara vez",intensidadPeleasComunidad:"Ninguna",frecuenciaDiscusionesFamilia:"Rara vez",intensidadPeleasFamilia:"Ninguna",tradicionesLocales:[],practicasDiscriminatorias:[],materiasPreferidas:[],actividadesInteres:[]});return M.useEffect(()=>{const d={datosAdmin:n,redApoyo:a,datosNEM:o,lastSaved:new Date().toISOString()};localStorage.setItem(yp,JSON.stringify(d))},[n,a,o]),{datosAdmin:n,setDatosAdmin:s,redApoyo:a,setRedApoyo:i,datosNEM:o,setDatosNEM:l,limpiarProgreso:()=>{localStorage.removeItem(yp)}}},Rq=({datosAdmin:t,setDatosAdmin:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-indigo-100 p-3 rounded-xl",children:r.jsx(Po,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Identidad y Trayectoria Acadmica"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin bsica del alumno"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CURP *"}),r.jsx("input",{type:"text",value:t.curp,onChange:n=>e({...t,curp:n.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"XXXX000000XXXXXX00",maxLength:18})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre(s) *"}),r.jsx("input",{type:"text",value:t.nombre,onChange:n=>e({...t,nombre:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Juan"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",value:t.apellidoPaterno,onChange:n=>e({...t,apellidoPaterno:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apellido Materno *"}),r.jsx("input",{type:"text",value:t.apellidoMaterno,onChange:n=>e({...t,apellidoMaterno:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Garca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gnero"}),r.jsxs("select",{value:t.genero,onChange:n=>e({...t,genero:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"Masculino",children:"Masculino (H)"}),r.jsx("option",{value:"Femenino",children:"Femenino (M)"}),r.jsx("option",{value:"Otro",children:"Otro"}),r.jsx("option",{value:"Prefiero no decir",children:"Prefiero no decir"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Promedio de Secundaria"}),r.jsx("input",{type:"number",step:"0.1",min:"5",max:"10",value:t.promedioSecundaria,onChange:n=>e({...t,promedioSecundaria:parseFloat(n.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Secundaria"}),r.jsxs("select",{value:t.tipoSecundaria,onChange:n=>e({...t,tipoSecundaria:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Tcnica",children:"Tcnica"}),r.jsx("option",{value:"Telesecundaria",children:"Telesecundaria"}),r.jsx("option",{value:"Particular",children:"Particular"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Sostenimiento"}),r.jsxs("select",{value:t.sostenimiento,onChange:n=>e({...t,sostenimiento:n.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[r.jsx("option",{value:"Pblico",children:"Pblica"}),r.jsx("option",{value:"Privado",children:"Privada"})]})]})]})]}),jq=({datosNEM:t,setDatosNEM:e,redApoyo:n,setRedApoyo:s})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:r.jsx(Ke,{className:"w-6 h-6 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Estructura Familiar y Red de Apoyo"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin del entorno familiar"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Familia"}),r.jsxs("select",{value:t.tipoFamilia,onChange:a=>e({...t,tipoFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[r.jsx("option",{value:"Nuclear",children:"Nuclear (Padres e hijos)"}),r.jsx("option",{value:"Extensa",children:"Extensa (Con abuelos, tos, etc.)"}),r.jsx("option",{value:"Monoparental",children:"Monoparental (Un solo padre)"}),r.jsx("option",{value:"Compuesta",children:"Compuesta (Familias mixtas)"}),r.jsx("option",{value:"Homoparental",children:"Homoparental"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(pO,{className:"w-5 h-5 text-emerald-600"}),r.jsx("h4",{className:"font-semibold text-slate-800",children:"Red de Apoyo y Contactos"})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre del Tutor Responsable"}),r.jsx("input",{type:"text",value:n.nombreTutor,onChange:a=>s({...n,nombreTutor:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Nombre completo del tutor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Parentesco del Tutor"}),r.jsxs("select",{value:n.parentesco,onChange:a=>s({...n,parentesco:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[r.jsx("option",{value:"Padre",children:"Padre"}),r.jsx("option",{value:"Madre",children:"Madre"}),r.jsx("option",{value:"Hermano",children:"Hermano/a"}),r.jsx("option",{value:"To",children:"To/a"}),r.jsx("option",{value:"Abuelo",children:"Abuelo/a"}),r.jsx("option",{value:"Otro",children:"Otro"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono del Padre"}),r.jsx("input",{type:"tel",value:n.telefonoPadre,onChange:a=>s({...n,telefonoPadre:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono de la Madre"}),r.jsx("input",{type:"tel",value:n.telefonoMadre,onChange:a=>s({...n,telefonoMadre:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono del Tutor"}),r.jsx("input",{type:"tel",value:n.telefonoTutor,onChange:a=>s({...n,telefonoTutor:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono de Emergencia"}),r.jsx("input",{type:"tel",value:n.telefonoEmergencia,onChange:a=>s({...n,telefonoEmergencia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"10 dgitos",maxLength:10})]})]})]}),Mq=({datosNEM:t,setDatosNEM:e})=>{var n;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:r.jsx(RU,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Capital Socioeconmico y Bienestar"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Informacin econmica y de salud"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Nivel Educativo de los Padres"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escolaridad del Padre"}),r.jsxs("select",{value:t.gradoEstudioPadre,onChange:s=>e({...t,gradoEstudioPadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Sin estudios",children:"Sin estudios"}),r.jsx("option",{value:"Primaria",children:"Primaria"}),r.jsx("option",{value:"Secundaria",children:"Secundaria"}),r.jsx("option",{value:"Preparatoria",children:"Preparatoria"}),r.jsx("option",{value:"Licenciatura",children:"Licenciatura"}),r.jsx("option",{value:"Posgrado",children:"Posgrado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Escolaridad de la Madre"}),r.jsxs("select",{value:t.gradoEstudioMadre,onChange:s=>e({...t,gradoEstudioMadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Sin estudios",children:"Sin estudios"}),r.jsx("option",{value:"Primaria",children:"Primaria"}),r.jsx("option",{value:"Secundaria",children:"Secundaria"}),r.jsx("option",{value:"Preparatoria",children:"Preparatoria"}),r.jsx("option",{value:"Licenciatura",children:"Licenciatura"}),r.jsx("option",{value:"Posgrado",children:"Posgrado"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Situacin Laboral de los Padres"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ocupacin del Padre"}),r.jsxs("select",{value:t.ocupacionPadre,onChange:s=>e({...t,ocupacionPadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hogar",children:"Hogar"}),r.jsx("option",{value:"Profesionista",children:"Profesionista"}),r.jsx("option",{value:"Tcnico",children:"Tcnico"}),r.jsx("option",{value:"Obrero",children:"Obrero"}),r.jsx("option",{value:"Negocio propio",children:"Negocio propio"}),r.jsx("option",{value:"Comercio",children:"Comercio"}),r.jsx("option",{value:"Desempleado",children:"Desempleado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ocupacin de la Madre"}),r.jsxs("select",{value:t.ocupacionMadre,onChange:s=>e({...t,ocupacionMadre:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hogar",children:"Hogar"}),r.jsx("option",{value:"Profesionista",children:"Profesionista"}),r.jsx("option",{value:"Tcnico",children:"Tcnico"}),r.jsx("option",{value:"Obrero",children:"Obrero"}),r.jsx("option",{value:"Negocio propio",children:"Negocio propio"}),r.jsx("option",{value:"Comercio",children:"Comercio"}),r.jsx("option",{value:"Desempleado",children:"Desempleado"})]})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Estabilidad del Alumno"]})}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Situacin Laboral"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["Solo estudia","Estudia y trabaja","Trabaja y estudia"].map(s=>r.jsxs("label",{className:"flex items-center gap-2 p-3 border border-slate-200 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[r.jsx("input",{type:"radio",name:"situacionLaboral",value:s,checked:t.situacionLaboral===s,onChange:a=>e({...t,situacionLaboral:a.target.value}),className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s))})]}),t.situacionLaboral!=="Solo estudia"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Horas de trabajo por semana"}),r.jsx("input",{type:"number",min:"1",max:"60",value:t.horasTrabajoSemanal||"",onChange:s=>e({...t,horasTrabajoSemanal:parseInt(s.target.value)||void 0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 20"})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(wI,{className:"w-5 h-5 text-blue-600"}),"Vivienda y Servicios"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Vivienda"}),r.jsxs("select",{value:t.tipoVivienda,onChange:s=>e({...t,tipoVivienda:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Propia",children:"Propia"}),r.jsx("option",{value:"Rentada",children:"Rentada"}),r.jsx("option",{value:"Prestada",children:"Prestada"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Servicios Disponibles"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(t.serviciosVivienda||{}).map(s=>{var a;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((a=t.serviciosVivienda)==null?void 0:a[s])||!1,onChange:i=>e({...t,serviciosVivienda:{...t.serviciosVivienda,[s]:i.target.checked}}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-700 capitalize",children:s==="tvCable"?"TV Cable":s==="aireAcondicionado"?"Aire Acondicionado":s})]},s)})})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""})," Economa Familiar"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ingresos Mensuales Familiares"}),r.jsxs("select",{value:t.ingresosMensuales,onChange:s=>e({...t,ingresosMensuales:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"0-5000",children:"$0 - $5,000"}),r.jsx("option",{value:"5001-10000",children:"$5,001 - $10,000"}),r.jsx("option",{value:"10001-20000",children:"$10,001 - $20,000"}),r.jsx("option",{value:"20001-40000",children:"$20,001 - $40,000"}),r.jsx("option",{value:"40001+",children:"Ms de $40,000"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Personas que aportan al ingreso"}),r.jsx("input",{type:"number",min:"0",max:"10",value:t.personasAportanIngreso||2,onChange:s=>e({...t,personasAportanIngreso:parseInt(s.target.value)}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border border-slate-200 rounded-lg hover:bg-blue-50 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:t.cuentaConBeca||!1,onChange:s=>e({...t,cuentaConBeca:s.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"El alumno cuenta con beca"})]})}),t.cuentaConBeca&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Beca"}),r.jsx("input",{type:"text",value:t.tipoBeca||"",onChange:s=>e({...t,tipoBeca:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Benito Jurez, Jvenes Escribiendo el Futuro"})]}),r.jsx("div",{className:"md:col-span-2 mt-4",children:r.jsxs("h4",{className:"font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(Hg,{className:"w-5 h-5 text-blue-600"}),"Salud"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Institucin de Seguridad Social"}),r.jsxs("select",{value:t.institucionSalud,onChange:s=>e({...t,institucionSalud:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"IMSS",children:"IMSS"}),r.jsx("option",{value:"ISSSTE",children:"ISSSTE"}),r.jsx("option",{value:"Bienestar",children:"Bienestar"}),r.jsx("option",{value:"Seguro privado",children:"Seguro privado"}),r.jsx("option",{value:"Ninguna",children:"Ninguna"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Enfermedades o condiciones crnicas (opcional)"}),r.jsx("textarea",{value:((n=t.enfermedadesCronicas)==null?void 0:n.join(", "))||"",onChange:s=>e({...t,enfermedadesCronicas:s.target.value?s.target.value.split(",").map(a=>a.trim()):[]}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Ej: Diabetes, Asma, Hipertensin (separadas por comas)"})]}),t.enfermedadesCronicas&&t.enfermedadesCronicas.length>0&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tratamiento"}),r.jsx("textarea",{value:t.tratamientoEnfermedades||"",onChange:s=>e({...t,tratamientoEnfermedades:s.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Describe el tratamiento que sigue"})]})]})]})},Pq=({datosNEM:t,setDatosNEM:e})=>{var s;const n=(a,i)=>a.includes(i)?a.filter(o=>o!==i):[...a,i];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-amber-100 p-3 rounded-xl",children:r.jsx(Fh,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Contexto Comunitario y Social (PAEC)"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Problemticas del entorno y convivencia"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(_i,{className:"w-5 h-5 text-amber-600"}),"Problemtica Local (Selecciona los 3 principales)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Mala alimentacin","Contaminacin","Pandillerismo","Violencia","Adicciones","Robos","Falta de servicios pblicos","Desempleo","Inseguridad","Falta de espacios recreativos","Problemas de salud pblica"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.problemasComunitarios)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.problemasComunitarios)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,problemasComunitarios:n(t.problemasComunitarios||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Servicios Deficientes en la Comunidad"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Alumbrado pblico","Transporte pblico","reas verdes","Centros de salud","Rampas para discapacidad"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.deficienciasServicios)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.deficienciasServicios)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,deficienciasServicios:n(t.deficienciasServicios||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(_i,{className:"w-5 h-5 text-red-600"}),"Factores de Riesgo Prximos"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Consumo de sustancias en la cuadra"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Alcohol","Tabaco","Drogas","Ninguno"].map(a=>{var i;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((i=t.consumoSustanciasCuadra)==null?void 0:i.includes(a))||!1,onChange:()=>e({...t,consumoSustanciasCuadra:n(t.consumoSustanciasCuadra||[],a)}),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Consumo de sustancias dentro de casa"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Alcohol","Tabaco","Drogas","Ninguno"].map(a=>{var i;return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((i=t.consumoSustanciasCasa)==null?void 0:i.includes(a))||!1,onChange:()=>e({...t,consumoSustanciasCasa:n(t.consumoSustanciasCasa||[],a)}),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-amber-600"}),"Convivencia Social"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia de discusiones en la comunidad"}),r.jsxs("select",{value:t.frecuenciaDiscusionesComunidad,onChange:a=>e({...t,frecuenciaDiscusionesComunidad:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Nunca",children:"Nunca"}),r.jsx("option",{value:"Rara vez",children:"Rara vez"}),r.jsx("option",{value:"A veces",children:"A veces"}),r.jsx("option",{value:"Frecuente",children:"Frecuente"}),r.jsx("option",{value:"Muy frecuente",children:"Muy frecuente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Intensidad de peleas en la comunidad"}),r.jsxs("select",{value:t.intensidadPeleasComunidad,onChange:a=>e({...t,intensidadPeleasComunidad:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Ninguna",children:"Ninguna"}),r.jsx("option",{value:"Leve",children:"Leve"}),r.jsx("option",{value:"Moderada",children:"Moderada"}),r.jsx("option",{value:"Grave",children:"Grave"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia de discusiones en la familia"}),r.jsxs("select",{value:t.frecuenciaDiscusionesFamilia,onChange:a=>e({...t,frecuenciaDiscusionesFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Nunca",children:"Nunca"}),r.jsx("option",{value:"Rara vez",children:"Rara vez"}),r.jsx("option",{value:"A veces",children:"A veces"}),r.jsx("option",{value:"Frecuente",children:"Frecuente"}),r.jsx("option",{value:"Muy frecuente",children:"Muy frecuente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Intensidad de peleas en la familia"}),r.jsxs("select",{value:t.intensidadPeleasFamilia,onChange:a=>e({...t,intensidadPeleasFamilia:a.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[r.jsx("option",{value:"Ninguna",children:"Ninguna"}),r.jsx("option",{value:"Leve",children:"Leve"}),r.jsx("option",{value:"Moderada",children:"Moderada"}),r.jsx("option",{value:"Grave",children:"Grave"})]})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-4",children:"Cultura y Valores"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tradiciones locales identificadas (opcional)"}),r.jsx("textarea",{value:((s=t.tradicionesLocales)==null?void 0:s.join(", "))||"",onChange:a=>e({...t,tradicionesLocales:a.target.value?a.target.value.split(",").map(i=>i.trim()):[]}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",rows:2,placeholder:"Ej: Da de Muertos, Fiestas patronales, Carnaval (separadas por comas)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Prcticas discriminatorias detectadas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Machismo","Homofobia","Racismo","Clasismo","Ninguna"].map(a=>{var i,o;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(i=t.practicasDiscriminatorias)!=null&&i.includes(a)?"bg-amber-50 border-amber-300":"border-slate-200 hover:bg-amber-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((o=t.practicasDiscriminatorias)==null?void 0:o.includes(a))||!1,onChange:()=>e({...t,practicasDiscriminatorias:n(t.practicasDiscriminatorias||[],a)}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:a})]},a)})})]})]})]})]})},Dq=({datosNEM:t,setDatosNEM:e})=>{const n=(s,a)=>s.includes(a)?s.filter(i=>i!==a):[...s,a];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:r.jsx(Hg,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Perfil de Intereses y Motivacin"}),r.jsx("p",{className:"text-sm text-slate-500",children:'El "Hook" Pedaggico - Lo que te apasiona'})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[r.jsx(it,{className:"w-5 h-5 text-purple-600"}),"Afinidad Acadmica - Materias que ms te agradan"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Matemticas","Espaol","Ingls","Ciencias Naturales","Ciencias Sociales","Artes","Educacin Fsica","Tecnologa","Historia"].map(s=>{var a,i;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(a=t.materiasPreferidas)!=null&&a.includes(s)?"bg-purple-50 border-purple-300":"border-slate-200 hover:bg-purple-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((i=t.materiasPreferidas)==null?void 0:i.includes(s))||!1,onChange:()=>e({...t,materiasPreferidas:n(t.materiasPreferidas||[],s)}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s)})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Preferencias de Ocio - Actividades recreativas que disfrutas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Deportes","Msica","Arte y Dibujo","Tecnologa","Lectura","Videojuegos","Redes Sociales (TikTok/YouTube)","Voluntariado","Ciencia","Investigacin"].map(s=>{var a,i;return r.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-3 border rounded-lg transition-colors ${(a=t.actividadesInteres)!=null&&a.includes(s)?"bg-purple-50 border-purple-300":"border-slate-200 hover:bg-purple-50"}`,children:[r.jsx("input",{type:"checkbox",checked:((i=t.actividadesInteres)==null?void 0:i.includes(s))||!1,onChange:()=>e({...t,actividadesInteres:n(t.actividadesInteres||[],s)}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:s})]},s)})})]}),r.jsx("div",{className:"mt-8 p-6 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:r.jsx(Hg,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Casi listo!"}),r.jsx("p",{className:"text-sm text-slate-600",children:'Gracias por compartir esta informacin. Nos ayudar a personalizar las clases segn tus intereses y necesidades. Al hacer clic en "Guardar Alumno", tu informacin se guardar de forma segura.'})]})]})})]})},L1=({onGuardar:t,onCancelar:e})=>{const[n,s]=M.useState(1),a=5,{datosAdmin:i,setDatosAdmin:o,redApoyo:l,setRedApoyo:c,datosNEM:d,setDatosNEM:m,limpiarProgreso:p}=Iq(),g=()=>{const y={id:`ALU-${Date.now()}`,datosAdministrativos:i,datosNEM:{...d,redApoyo:l},fechaRegistro:new Date().toISOString()};t(y),p()},x=()=>{switch(n){case 1:return r.jsx(Rq,{datosAdmin:i,setDatosAdmin:o});case 2:return r.jsx(jq,{datosNEM:d,setDatosNEM:m,redApoyo:l,setRedApoyo:c});case 3:return r.jsx(Mq,{datosNEM:d,setDatosNEM:m});case 4:return r.jsx(Pq,{datosNEM:d,setDatosNEM:m});case 5:return r.jsx(Dq,{datosNEM:d,setDatosNEM:m});default:return null}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full my-8 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white rounded-t-2xl flex-shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Registro de Alumno"}),r.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["Paso ",n," de ",a]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"mt-4 bg-white/20 rounded-full h-2",children:r.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${n/a*100}%`}})}),r.jsx("div",{className:"mt-4 flex justify-between text-xs",children:["Identidad","Familia","Economa","Comunidad","Intereses"].map((y,T)=>r.jsxs("div",{className:`flex flex-col items-center ${n===T+1?"text-white":"text-indigo-200"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-1 ${n>T+1?"bg-white text-indigo-600":n===T+1?"bg-white text-indigo-600 ring-2 ring-white/50":"bg-white/20"}`,children:n>T+1?"":T+1}),r.jsx("span",{className:"hidden md:block",children:y})]},y))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x()}),r.jsxs("div",{className:"border-t border-slate-200 p-6 flex justify-between items-center flex-shrink-0 bg-slate-50",children:[r.jsx("button",{onClick:()=>s(Math.max(1,n-1)),disabled:n===1,className:"px-6 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:" Anterior"}),r.jsxs("div",{className:"text-sm text-slate-500",children:[n<a&&"Tu progreso se guarda automticamente",n===a&&"ltimo paso! Revisa y guarda"]}),n<a?r.jsx("button",{onClick:()=>s(n+1),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Siguiente "}):r.jsxs("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg hover:from-emerald-700 hover:to-green-700 transition-all flex items-center gap-2 font-semibold shadow-lg",children:[r.jsx(Ii,{className:"w-5 h-5"}),"Guardar Alumno"]})]})]})})},ru="alumnos";class kq{async guardarAlumno(e){try{const n={...e,fechaRegistro:Me.now().toDate().toISOString()};return(await es(ue(J,ru),n)).id}catch(n){throw console.error("Error al guardar alumno:",n),new Error("No se pudo guardar el alumno en Firebase")}}async obtenerAlumnos(){try{const e=Ye(ue(J,ru),Ds("fechaRegistro","desc")),n=await Re(e),s=[];return n.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(e){throw console.error("Error al obtener alumnos:",e),new Error("No se pudieron obtener los alumnos de Firebase")}}async actualizarAlumno(e,n){try{const s=re(J,ru,e);await vt(s,n)}catch(s){throw console.error("Error al actualizar alumno:",s),new Error("No se pudo actualizar el alumno en Firebase")}}async eliminarAlumno(e){try{await xs(re(J,ru,e))}catch(n){throw console.error("Error al eliminar alumno:",n),new Error("No se pudo eliminar el alumno de Firebase")}}async sincronizarDesdeLocalStorage(){try{const e=localStorage.getItem("alumnos");if(!e)return;const n=JSON.parse(e);for(const s of n)await this.guardarAlumno({datosAdministrativos:s.datosAdministrativos,datosNEM:s.datosNEM,fechaRegistro:s.fechaRegistro});console.log(` ${n.length} alumnos sincronizados a Firebase`)}catch(e){throw console.error("Error al sincronizar alumnos:",e),new Error("No se pudieron sincronizar los alumnos")}}}const l0=new kq,Lq=()=>{var I,b,N,w,D,V,k,R,E,S,C,_,P,j,H,O,G,te;const[t,e]=M.useState([]),[n,s]=M.useState(null),[a,i]=M.useState(!1),[o,l]=M.useState(!0),[c,d]=M.useState(!1),[m,p]=M.useState(!1);M.useEffect(()=>{g()},[]);const g=async()=>{l(!0);try{console.log(" Iniciando carga de alumnos desde Firebase (forzado)...");const Y=await l0.obtenerAlumnos();Y.length>0?(e(Y),console.log(` XITO: Se cargaron ${Y.length} alumnos reales de la base de datos.`)):(console.warn(" La coleccin de alumnos en Firebase est vaca."),e([]))}catch(Y){console.error(" CRTICO: Error al conectar con Firebase:",Y),alert("Error de conexin con la base de datos de alumnos.")}finally{l(!1)}},x=async Y=>{try{await l0.guardarAlumno(Y),console.log(" Alumno guardado en Firebase"),await g(),d(!1)}catch(ne){console.error(" Error al guardar alumno:",ne),alert("Hubo un error al guardar el alumno. Por favor intenta de nuevo.")}},y=async()=>{if(t.length===0){alert("Necesitas al menos un alumno registrado para generar el diagnstico");return}i(!0);try{const Y=await Aq.procesarDiagnosticoGrupal(t);s(Y),console.log("Diagnstico generado:",Y)}catch(Y){console.error("Error al generar diagnstico:",Y),alert("Hubo un error al generar el diagnstico. Verifica tu API Key.")}finally{i(!1)}},T=Y=>{switch(Y){case"Crtico":return"bg-red-100 text-red-800 border-red-200";case"Alto":return"bg-orange-100 text-orange-800 border-orange-200";case"Medio":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}};return m?r.jsx(R1,{onClose:()=>p(!1),diagnostico:n}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Diagnstico Socioeducativo"}),r.jsx("p",{className:"text-indigo-100",children:"Mdulo Raz - Anlisis inteligente del contexto del alumno para PAEC y PMC"}),r.jsxs("div",{className:"mt-6 flex gap-4",children:[r.jsxs("button",{onClick:()=>d(!0),className:"bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"}),"Registrar Alumno"]}),r.jsxs("button",{onClick:y,disabled:a||t.length===0,className:"bg-indigo-800 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-900 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Ls,{className:"w-5 h-5"}),a?"Procesando...":"Generar Diagnstico"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:r.jsx(Ke,{className:"w-6 h-6 text-blue-600"})}),r.jsx("div",{children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-400",children:"..."}),r.jsx("div",{className:"text-sm text-slate-500",children:"Cargando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:t.length}),r.jsx("div",{className:"text-sm text-slate-500",children:"Alumnos Registrados"})]})})]})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 p-3 rounded-xl",children:r.jsx(ms,{className:"w-6 h-6 text-emerald-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:n.promedioGrupal}),r.jsx("div",{className:"text-sm text-slate-500",children:"Promedio Grupal"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-amber-100 p-3 rounded-xl",children:r.jsx(_i,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:((I=n.alertasAbandono)==null?void 0:I.length)||0}),r.jsx("div",{className:"text-sm text-slate-500",children:"Alertas de Riesgo"})]})]})}),n.contextoDigital&&r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:r.jsx(Yg,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[n.contextoDigital.porcentajeConectividad||0,"%"]}),r.jsx("div",{className:"text-sm text-slate-500",children:"Con Internet"})]})]})})]})]}),n&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-6 h-6 text-indigo-600"}),"Perfil de Aprendizaje Grupal"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Estilos Dominantes"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(N=(b=n.perfilAprendizaje)==null?void 0:b.estilosDominantes)==null?void 0:N.map((Y,ne)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm",children:Y},ne))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Ganchos de Inters"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(D=(w=n.perfilAprendizaje)==null?void 0:w.ganchosInteres)==null?void 0:D.map((Y,ne)=>r.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:Y},ne))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"Recomendaciones Didcticas"}),r.jsx("ul",{className:"space-y-2",children:(k=(V=n.perfilAprendizaje)==null?void 0:V.recomendacionesDidacticas)==null?void 0:k.map((Y,ne)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[r.jsx("span",{className:"text-indigo-600 font-bold",children:""}),Y]},ne))})]})]})]}),n.alertasAbandono&&n.alertasAbandono.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(_i,{className:"w-6 h-6 text-amber-600"}),"Semforo de Abandono Escolar"]}),r.jsx("div",{className:"space-y-3",children:n.alertasAbandono.map((Y,ne)=>{var de,ye;return r.jsxs("div",{className:`p-4 rounded-xl border ${T(Y.nivelRiesgo)}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:Y.nombreAlumno}),r.jsxs("p",{className:"text-xs opacity-75",children:["ID: ",Y.alumnoId]})]}),r.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold",children:["Riesgo ",Y.nivelRiesgo]})]}),r.jsxs("div",{className:"text-sm mb-2",children:[r.jsx("strong",{children:"Factores:"})," ",(de=Y.factoresRiesgo)==null?void 0:de.join(", ")]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("strong",{children:"Recomendaciones:"}),r.jsx("ul",{className:"mt-1 space-y-1",children:(ye=Y.recomendaciones)==null?void 0:ye.map((Qe,Ge)=>r.jsxs("li",{children:[" ",Qe]},Ge))})]})]},ne)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Problema PAEC Prioritario"}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[r.jsx("div",{className:"text-3xl font-bold text-amber-900 mb-2",children:((R=n.problemaPAEC)==null?void 0:R.problema)||"No detectado"}),r.jsxs("div",{className:"text-sm text-amber-700",children:["Reportado por ",((E=n.problemaPAEC)==null?void 0:E.frecuencia)||0," alumnos (",((S=n.problemaPAEC)==null?void 0:S.porcentaje)||0,"%)"]})]}),((C=n.problemasSecundarios)==null?void 0:C.length)>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-semibold text-slate-700 mb-2 text-sm",children:"Problemas Secundarios"}),r.jsx("div",{className:"space-y-2",children:(_=n.problemasSecundarios)==null?void 0:_.map((Y,ne)=>r.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[r.jsx("span",{children:Y.problema}),r.jsxs("span",{className:"font-semibold",children:[Y.porcentaje,"%"]})]},ne))})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Metas PMC Sugeridas"}),r.jsx("ul",{className:"space-y-3",children:(P=n.metasPMC)==null?void 0:P.map((Y,ne)=>r.jsxs("li",{className:"flex items-start gap-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[r.jsx("span",{className:"bg-emerald-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:ne+1}),r.jsx("span",{className:"text-sm text-slate-700",children:Y})]},ne))})]})]}),n.contextoDigital&&r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Contexto Digital del Grupo"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Yg,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"font-semibold text-green-900",children:"Con Internet"})]}),r.jsx("div",{className:"text-3xl font-bold text-green-900",children:((j=n.contextoDigital)==null?void 0:j.conInternet)||0}),r.jsxs("div",{className:"text-sm text-green-700",children:["alumnos (",((H=n.contextoDigital)==null?void 0:H.porcentajeConectividad)||0,"%)"]})]}),r.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(JO,{className:"w-5 h-5 text-red-600"}),r.jsx("span",{className:"font-semibold text-red-900",children:"Sin Internet"})]}),r.jsx("div",{className:"text-3xl font-bold text-red-900",children:((O=n.contextoDigital)==null?void 0:O.sinInternet)||0}),r.jsxs("div",{className:"text-sm text-red-700",children:["alumnos (",100-(((G=n.contextoDigital)==null?void 0:G.porcentajeConectividad)||0),"%)"]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[r.jsx("div",{className:"font-semibold text-blue-900 mb-2",children:"Recomendacin"}),r.jsx("div",{className:"text-sm text-blue-700",children:(((te=n.contextoDigital)==null?void 0:te.porcentajeConectividad)||0)>=70?"Puedes usar actividades digitales con alternativas offline":"Prioriza actividades presenciales y sin conexin"})]})]})]})]}),c&&r.jsx(L1,{onGuardar:x,onCancelar:()=>d(!1)})]})},co=({activeView:t,onNavigate:e})=>{const{logout:n,user:s}=dt(),a=[{id:"dashboard",label:"Dashboard",icon:mO},{id:"guia-curricular",label:"Gua Curricular",icon:it},{id:"herramientas",label:"Herramientas",icon:gd},{id:"context",label:"Contexto Escolar",icon:mv},{id:"diagnostico",label:"Diagnstico",icon:Ke},{id:"generator",label:"Nueva Planeacin",icon:SI},{id:"plans",label:"Historial",icon:YU},{id:"pmc",label:"PMC Directivo",icon:ms},{id:"paec",label:"Comit PAEC",icon:dO}];return(s==null?void 0:s.rol)==="superadmin"&&(a.push({id:"admin-asignacion",label:"Asignar Materias",icon:it}),a.push({id:"admin-alumnos",label:"Gestin de Alumnos",icon:Ke})),r.jsxs("aside",{className:"w-64 bg-indigo-900 text-white flex-shrink-0 flex flex-col hidden md:flex h-screen sticky top-0",children:[r.jsxs("div",{className:"p-6 border-b border-indigo-800",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ts,{className:"w-8 h-8 text-indigo-300"}),r.jsx("h1",{className:"font-bold text-xl tracking-tight",children:"EduPlan MX"})]}),r.jsx("p",{className:"text-xs text-indigo-300 mt-2 uppercase font-semibold",children:"Bachillerato Oficial"})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto",children:a.map(i=>{const o=i.icon,l=t===i.id;return r.jsxs("button",{onClick:()=>e(i.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${l?"bg-indigo-800 text-white shadow-lg shadow-indigo-900/50":"hover:bg-indigo-800/50 text-indigo-100"}`,children:[r.jsx(o,{className:`w-5 h-5 ${l?"text-indigo-300":""}`}),r.jsx("span",{className:"font-medium",children:i.label})]},i.id)})}),r.jsxs("div",{className:"p-4 border-t border-indigo-800",children:[r.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-red-500/10 text-indigo-200 hover:text-red-200 transition-colors",children:[r.jsx(Oh,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Cerrar Sesin"})]}),r.jsx("div",{className:"mt-4 text-xs text-indigo-400 text-center",children:"v1.0.0 - Hecho para Mxico"})]})]})},Vi="materias";class Vq{async obtenerTodas(){try{const e=ue(J,Vi),n=Ye(e,Ds("nombre","asc"));return(await Re(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error al obtener materias:",e),new Error("Error al obtener materias")}}async obtenerPorGrado(e){try{const n=ue(J,Vi),s=Ye(n,tt("grado","==",e),tt("activa","==",!0),Ds("nombre","asc"));return(await Re(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener materias por grado:",n),new Error("Error al obtener materias por grado")}}async obtenerPorId(e){try{const n=await kn(re(J,Vi,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error al obtener materia:",n),new Error("Error al obtener materia")}}async crear(e,n){try{const s={...e,activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:n};return{id:(await es(ue(J,Vi),s)).id,...s}}catch(s){throw console.error("Error al crear materia:",s),new Error("Error al crear materia")}}async actualizar(e,n){try{await vt(re(J,Vi,e),n)}catch(s){throw console.error("Error al actualizar materia:",s),new Error("Error al actualizar materia")}}async cambiarEstado(e,n){try{await vt(re(J,Vi,e),{activa:n})}catch(s){throw console.error("Error al cambiar estado:",s),new Error("Error al cambiar estado")}}async eliminar(e){try{await xs(re(J,Vi,e))}catch(n){throw console.error("Error al eliminar materia:",n),new Error("Error al eliminar materia")}}async obtenerEstadisticas(){try{const e=await this.obtenerTodas();return{total:e.length,activas:e.filter(n=>n.activa).length,inactivas:e.filter(n=>!n.activa).length,porGrado:{primero:e.filter(n=>n.grado===1).length,segundo:e.filter(n=>n.grado===2).length,tercero:e.filter(n=>n.grado===3).length},totalHoras:e.reduce((n,s)=>n+s.horasSemanales,0),totalUnidades:e.reduce((n,s)=>n+s.unidades.length,0)}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("Error al obtener estadsticas")}}async buscar(e){try{const n=await this.obtenerTodas(),s=e.toLowerCase();return n.filter(a=>a.nombre.toLowerCase().includes(s)||a.clave.toLowerCase().includes(s))}catch(n){throw console.error("Error al buscar materias:",n),new Error("Error al buscar materias")}}async obtenerResumen(e){try{const n=await this.obtenerPorId(e);return n?{id:n.id,nombre:n.nombre,clave:n.clave,grado:n.grado,horasSemanales:n.horasSemanales,totalHoras:n.totalHoras,totalUnidades:n.unidades.length,totalTemas:n.unidades.reduce((s,a)=>s+a.temas.length,0),activa:n.activa}:null}catch(n){throw console.error("Error al obtener resumen:",n),new Error("Error al obtener resumen")}}}const Tv=new Vq,Uq=()=>{const{user:t}=dt(),[e,n]=M.useState([]),[s,a]=M.useState([]),[i,o]=M.useState([]),[l,c]=M.useState(""),[d,m]=M.useState(""),[p,g]=M.useState("A"),[x,y]=M.useState("2025-2026"),[T,I]=M.useState(!0),[b,N]=M.useState(!1),[w,D]=M.useState(null),[V,k]=M.useState(null);M.useEffect(()=>{(async()=>{try{const S=ue(J,"usuarios"),C=Ye(S,tt("rol","==","maestro")),P=(await Re(C)).docs.map(G=>G.data());n(P);const j=await Tv.obtenerTodas();a(j);const H=ue(J,"asignaciones"),O=xI(H,G=>{const te=G.docs.map(Y=>({id:Y.id,...Y.data()}));o(te),I(!1)});return()=>O()}catch(S){console.error("Error cargando datos:",S),D("Error al cargar los catlogos"),I(!1)}})()},[]);const R=async()=>{if(!l||!d||!p){D("Por favor completa todos los campos");return}N(!0),D(null),k(null);try{const E=e.find(P=>P.id===l),S=s.find(P=>P.id===d);if(!E||!S)throw new Error("Datos invlidos");if(i.find(P=>P.maestroId===l&&P.materiaId===d&&P.grupo===p&&P.cicloEscolar===x)){D("Esta asignacin ya existe"),N(!1);return}const _={maestroId:l,maestroNombre:`${E.nombre} ${E.apellidoPaterno}`,materiaId:d,materiaNombre:S.nombre,grupo:p,cicloEscolar:x,fechaAsignacion:new Date().toISOString(),activa:!0,creadoPor:(t==null?void 0:t.id)||"admin"};await es(ue(J,"asignaciones"),_),k("Materia asignada correctamente"),m("")}catch(E){console.error("Error al asignar:",E),D(E.message||"Error al guardar la asignacin")}finally{N(!1)}};return T?r.jsx("div",{className:"p-8 text-center",children:"Cargando mdulo de asignaciones..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"mb-8",children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-8 h-8 text-indigo-600"}),"Asignacin de Carga Acadmica"]}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Asigna las materias del MCCEMS a los docentes para el ciclo escolar."})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(Mo,{className:"w-5 h-5 text-indigo-500"}),"Nueva Asignacin"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Docente"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:l,onChange:E=>c(E.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar docente..."}),e.map(E=>r.jsxs("option",{value:E.id,children:[E.nombre," ",E.apellidoPaterno," ",E.apellidoMaterno]},E.id))]})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Unidad de Aprendizaje Curricular (UAC)"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:E=>m(E.target.value),children:[r.jsx("option",{value:"",children:"Seleccionar materia..."}),s.map(E=>r.jsxs("option",{value:E.id,children:["[",E.clave,"] ",E.nombre," (",E.horasSemanales," hrs)"]},E.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Grupo"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:E=>g(E.target.value),children:[r.jsx("option",{value:"A",children:"Grupo A"}),r.jsx("option",{value:"B",children:"Grupo B"}),r.jsx("option",{value:"C",children:"Grupo C"}),r.jsx("option",{value:"D",children:"Grupo D"}),r.jsx("option",{value:"E",children:"Grupo E"}),r.jsx("option",{value:"F",children:"Grupo F"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 mr-4",children:[w&&r.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg text-sm",children:[r.jsx(ya,{className:"w-4 h-4"}),w]}),V&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-3 rounded-lg text-sm",children:[r.jsx(Is,{className:"w-4 h-4"}),V]})]}),r.jsxs("button",{onClick:R,disabled:b,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition-all font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-200",children:[b?r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):r.jsx(Ii,{className:"w-5 h-5"}),"Asignar Materia"]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[r.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["Asignaciones Actuales (",x,")"]}),r.jsxs("span",{className:"text-xs font-medium text-slate-500 bg-slate-100 px-3 py-1 rounded-full",children:[i.length," registros"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-900 font-semibold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Docente"}),r.jsx("th",{className:"px-6 py-4",children:"Materia / UAC"}),r.jsx("th",{className:"px-6 py-4",children:"Grupo"}),r.jsx("th",{className:"px-6 py-4",children:"Ciclo"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map(E=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:E.maestroNombre}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(it,{className:"w-4 h-4 text-indigo-400"}),E.materiaNombre]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded-md font-bold",children:E.grupo})}),r.jsx("td",{className:"px-6 py-4",children:E.cicloEscolar}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("button",{className:"text-red-500 hover:text-red-700 text-xs font-medium",children:"Eliminar"})})]},E.id)),i.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:"No hay asignaciones registradas para este ciclo. Uses el formulario de arriba para comenzar."})})]})]})})]})]})},Oq=()=>{const[t,e]=M.useState([]),[n,s]=M.useState(!0),[a,i]=M.useState("");M.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const c=ue(J,"alumnos"),m=(await Re(c)).docs.map(p=>({id:p.id,...p.data()}));e(m),console.log("Alumnos cargados:",m)}catch(c){console.error("Error cargando alumnos:",c)}finally{s(!1)}},l=t.filter(c=>{const d=a.toLowerCase(),m=`${c.nombre||""} ${c.apellidoPaterno||""} ${c.apellidoMaterno||""} ${c.apellido||""}`,p=c.matricula||c.id||"",g=c.email||"";return m.toLowerCase().includes(d)||p.toLowerCase().includes(d)||g.toLowerCase().includes(d)});return n?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando base de datos de alumnos..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-8 h-8 text-indigo-600"}),"Gestin de Alumnos"]}),r.jsx("p",{className:"text-slate-600 mt-2",children:"Administra la base de datos de estudiantes matriculados."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{className:"bg-white text-indigo-600 border border-indigo-200 px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-indigo-50 transition-colors shadow-sm font-bold text-xs",onClick:async()=>{confirm("Generar 60 alumnos de prueba? Esto agregar datos a la base de datos real.")&&(s(!0),await I1(60),await o(),alert("60 Alumnos generados con xito!"))},children:[r.jsx(gd,{className:"w-4 h-4"}),"Generar 60 (Demo)"]}),r.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-colors shadow-sm",onClick:()=>alert("Funcin de agregar alumno pendiente de implementacin"),children:[r.jsx(SI,{className:"w-5 h-5"}),"Nuevo Alumno"]})]})]}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, matrcula o email...",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none",value:a,onChange:c=>i(c.target.value)})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-900 font-semibold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Estudiante"}),r.jsx("th",{className:"px-6 py-4",children:"Matrcula / ID"}),r.jsx("th",{className:"px-6 py-4",children:"Situacin"}),r.jsx("th",{className:"px-6 py-4",children:"Tipo Beca"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[l.map(c=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsxs("div",{className:"font-medium text-slate-900",children:[c.nombre," ",c.apellidoPaterno||c.apellido," ",c.apellidoMaterno]}),c.email&&r.jsx("div",{className:"text-xs text-slate-400",children:c.email})]}),r.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:c.matricula||c.id}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c.situacionLaboral==="Trabaja y estudia"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:c.situacionLaboral||"Estudiante"})}),r.jsx("td",{className:"px-6 py-4",children:c.tipoBeca?r.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs",children:c.tipoBeca}):r.jsx("span",{className:"text-slate-400 italic",children:"Sin beca"})}),r.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[r.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-indigo-600 transition-colors",title:"Editar",children:r.jsx(RI,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 hover:bg-red-50 rounded-lg text-slate-500 hover:text-red-600 transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})]},c.id)),l.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:a?"No se encontraron alumnos con esa bsqueda.":"No hay alumnos registrados."})})]})]})}),r.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/50 text-xs text-slate-500 flex justify-between items-center",children:[r.jsxs("span",{children:["Mostrando ",l.length," registros"]}),r.jsx("span",{children:"Coleccin: /alumnos"})]})]})]})},zq=({onClose:t})=>{const{user:e}=dt(),[n,s]=M.useState(!1),[a,i]=M.useState(!1),[o,l]=M.useState({nombre:(e==null?void 0:e.nombre)||"",apellidoPaterno:(e==null?void 0:e.apellidoPaterno)||"",apellidoMaterno:(e==null?void 0:e.apellidoMaterno)||"",puesto:(e==null?void 0:e.puesto)||"",materias:(e==null?void 0:e.materias)||[],grados:(e==null?void 0:e.grados)||[]}),c=async()=>{if(e!=null&&e.id)try{i(!0),await vt(re(J,"users",e.id),{...o,updatedAt:new Date().toISOString()}),alert(" Perfil actualizado correctamente"),s(!1),window.location.reload()}catch(m){console.error("Error al actualizar perfil:",m),alert(" Error al actualizar el perfil")}finally{i(!1)}},d=()=>{confirm(`Quieres volver a configurar tu perfil?

Esto te llevar al proceso de onboarding.`)&&e!=null&&e.id&&vt(re(J,"users",e.id),{onboardingCompleto:!1}).then(()=>{window.location.href="/onboarding"})};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-2xl",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Po,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Mi Perfil"}),r.jsx("p",{className:"text-indigo-100 text-sm",children:e.email})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Po,{className:"w-5 h-5 text-indigo-600"}),"Informacin Personal"]}),!n&&r.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors",children:[r.jsx(pd,{className:"w-4 h-4"}),"Editar"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre"}),n?r.jsx("input",{type:"text",value:o.nombre,onChange:m=>l({...o,nombre:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.nombre})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Paterno"}),n?r.jsx("input",{type:"text",value:o.apellidoPaterno,onChange:m=>l({...o,apellidoPaterno:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.apellidoPaterno})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Materno"}),n?r.jsx("input",{type:"text",value:o.apellidoMaterno,onChange:m=>l({...o,apellidoMaterno:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.apellidoMaterno||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Puesto"}),n?r.jsx("input",{type:"text",value:o.puesto,onChange:m=>l({...o,puesto:m.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Docente, Director, etc."}):r.jsx("p",{className:"text-slate-900 font-medium",children:e.puesto||"No especificado"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-4",children:[r.jsx(wt,{className:"w-5 h-5 text-indigo-600"}),"Escuela"]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Nombre"}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.schoolName||"No asignada"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Cdigo"}),r.jsx("p",{className:"text-slate-900 font-medium font-mono",children:e.schoolId||"No asignado"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Rol"}),r.jsx("p",{className:"text-slate-900 font-medium capitalize",children:e.rol})]})]}),!e.schoolId&&r.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx("p",{className:"text-amber-800 text-sm mb-2",children:" No tienes una escuela asignada. Completa el onboarding para configurar tu perfil."}),r.jsx("button",{onClick:d,className:"px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors",children:"Completar Configuracin"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(it,{className:"w-5 h-5 text-indigo-600"}),"Materias"]}),e.materias&&e.materias.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:e.materias.map((m,p)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-sm font-medium",children:m},p))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No hay materias asignadas"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(ts,{className:"w-5 h-5 text-indigo-600"}),"Semestres"]}),e.grados&&e.grados.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:e.grados.map((m,p)=>r.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:[m,""]},p))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No hay semestres asignados"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-3",children:[r.jsx(zh,{className:"w-5 h-5 text-indigo-600"}),"Correo Electrnico"]}),r.jsx("p",{className:"text-slate-900 font-medium",children:e.email}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"El correo no se puede modificar"})]}),n&&r.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[r.jsxs("button",{onClick:c,disabled:a,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[r.jsx(Ii,{className:"w-5 h-5"}),a?"Guardando...":"Guardar Cambios"]}),r.jsx("button",{onClick:()=>s(!1),disabled:a,className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors disabled:opacity-50",children:"Cancelar"})]}),!n&&r.jsx("div",{className:"pt-4 border-t",children:r.jsx("button",{onClick:d,className:"w-full px-4 py-3 bg-slate-100 text-slate-700 rounded-lg font-medium hover:bg-slate-200 transition-colors",children:"Reconfigurar Perfil Completo"})})]})]})}):null},Fq=({user:t})=>{const[e,n]=M.useState(!1);return r.jsxs(r.Fragment,{children:[e&&r.jsx(zq,{onClose:()=>n(!1)}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(wt,{className:"w-6 h-6 mr-3 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100",children:"Escuela"}),r.jsx("h2",{className:"text-2xl font-bold",children:t.schoolName||"Sin escuela asignada"})]})]}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(Po,{className:"w-5 h-5 mr-3 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100",children:"Docente"}),r.jsxs("h3",{className:"text-xl font-semibold",children:[t.nombre," ",t.apellidoPaterno," ",t.apellidoMaterno]}),r.jsx("p",{className:"text-sm text-indigo-200",children:t.puesto||"Docente"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.materias&&t.materias.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(it,{className:"w-5 h-5 mr-2 mt-1 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100 mb-1",children:"Materias"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.materias.map((s,a)=>r.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:s},a))})]})]}),t.grados&&t.grados.length>0&&r.jsxs("div",{className:"flex items-start",children:[r.jsx(ts,{className:"w-5 h-5 mr-2 mt-1 opacity-90"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-100 mb-1",children:"Semestres"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.grados.map((s,a)=>r.jsxs("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:[s,""]},a))})]})]})]})]}),r.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-center",children:[r.jsx("p",{className:"text-xs text-indigo-100 mb-1",children:"Rol"}),r.jsx("p",{className:"text-lg font-bold capitalize",children:t.rol})]}),r.jsxs("button",{onClick:()=>n(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg transition-colors text-sm font-medium",title:"Ver perfil",children:[r.jsx(mv,{className:"w-4 h-4"}),"Perfil"]})]})]})})]})},Gq=({totalPlaneaciones:t,totalMaterias:e,totalSemestres:n,promedioSemanal:s=0})=>{const a=[{title:"Planeaciones",value:t,icon:Ls,color:"bg-blue-500",textColor:"text-blue-600"},{title:"Materias",value:e,icon:it,color:"bg-green-500",textColor:"text-green-600"},{title:"Semestres",value:n,icon:ts,color:"bg-purple-500",textColor:"text-purple-600"},{title:"Promedio Semanal",value:s.toFixed(1),icon:ms,color:"bg-orange-500",textColor:"text-orange-600"}];return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:a.map((i,o)=>{const l=i.icon;return r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:i.title}),r.jsx("p",{className:`text-3xl font-bold ${i.textColor}`,children:i.value})]}),r.jsx("div",{className:`${i.color} p-3 rounded-lg`,children:r.jsx(l,{className:"w-8 h-8 text-white"})})]})},o)})})},Bq=({onNewPlaneacion:t,onViewPlaneaciones:e,onHerramientas:n,onContexto:s})=>{const a=[{title:"Nueva Planeacin",description:"Crear una nueva planeacin didctica",icon:On,color:"bg-indigo-600 hover:bg-indigo-700",onClick:t},{title:"Ver Planeaciones",description:"Consultar planeaciones guardadas",icon:Ls,color:"bg-green-600 hover:bg-green-700",onClick:e},{title:"Herramientas",description:"Acceder a herramientas didcticas",icon:XO,color:"bg-purple-600 hover:bg-purple-700",onClick:n},{title:"Contexto Escolar",description:"Configurar contexto de la escuela",icon:mv,color:"bg-orange-600 hover:bg-orange-700",onClick:s}];return r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" Acciones Rpidas"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((i,o)=>{const l=i.icon;return r.jsxs("button",{onClick:i.onClick,className:`${i.color} text-white rounded-lg p-6 text-left transition-all transform hover:scale-105 shadow-md hover:shadow-lg`,children:[r.jsx(l,{className:"w-8 h-8 mb-3"}),r.jsx("h4",{className:"text-lg font-bold mb-1",children:i.title}),r.jsx("p",{className:"text-sm opacity-90",children:i.description})]},o)})})]})},qq=({planeaciones:t,onView:e,onViewAll:n,onCreate:s})=>t.length===0?r.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-8",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:""}),"Planeaciones Recientes"]}),r.jsxs("div",{className:"text-center py-10 bg-slate-50 rounded-2xl border border-dashed border-slate-300",children:[r.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 text-slate-300",children:r.jsx(Ls,{className:"w-8 h-8"})}),r.jsx("p",{className:"text-slate-600 font-semibold text-lg",children:"An no has creado planeaciones"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1 max-w-xs mx-auto",children:"Comienza creando tu primera planeacin didctica alineada al MCCEMS."}),s&&r.jsxs("button",{onClick:s,className:"mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-indigo-100 flex items-center gap-2 mx-auto",children:[r.jsx(On,{className:"w-5 h-5"}),"Crear Nueva Planeacin"]})]})]}):r.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx("span",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:""}),"Planeaciones Recientes"]}),r.jsxs("button",{onClick:n,className:"text-indigo-600 hover:text-indigo-700 font-bold text-sm flex items-center gap-1 group",children:["Ver todas",r.jsx(sl,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),r.jsx("div",{className:"space-y-4",children:t.slice(0,5).map(a=>r.jsxs("div",{className:"group border border-slate-100 bg-slate-50/30 rounded-2xl p-4 hover:border-indigo-200 hover:bg-white hover:shadow-xl hover:shadow-indigo-50/50 transition-all cursor-pointer relative overflow-hidden",onClick:()=>e(a.id),children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg mr-3 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:r.jsx(it,{className:"w-4 h-4"})}),r.jsx("h4",{className:"font-bold text-slate-800 group-hover:text-indigo-900 transition-colors",children:a.titulo||a.materia})]}),r.jsxs("div",{className:"flex flex-wrap items-center text-xs text-slate-500 gap-4 ml-11",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ls,{className:"w-3.5 h-3.5 text-slate-400"}),a.materia]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ts,{className:"w-3.5 h-3.5 text-slate-400"}),a.semestre," Semestre"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Vh,{className:"w-3.5 h-3.5 text-slate-400"}),new Date(a.fecha).toLocaleDateString("es-MX",{day:"numeric",month:"short",year:"numeric"})]})]})]}),r.jsx("button",{onClick:i=>{i.stopPropagation(),e(a.id)},className:"ml-4 p-3 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Ver detalles",children:r.jsx(LU,{className:"w-5 h-5"})})]})]},a.id))}),t.length>5&&r.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:r.jsxs("button",{onClick:n,className:"bg-slate-900 text-white px-8 py-3 rounded-2xl font-bold text-sm hover:bg-indigo-600 transition-all shadow-lg shadow-slate-200 flex items-center gap-2 mx-auto",children:["Gestionar todas las planeaciones",r.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-lg text-xs",children:t.length})]})})]}),Hq=({onNavigate:t})=>{var p,g;const{user:e}=dt(),[n,s]=M.useState([]),[a,i]=M.useState(!1),[o,l]=M.useState({total:0,promedioSemanal:0});M.useEffect(()=>{e!=null&&e.id&&c()},[e==null?void 0:e.id,e==null?void 0:e.schoolId]);const c=async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.schoolId)){console.warn(" No se pueden cargar planeaciones: faltan IDs",{userId:e==null?void 0:e.id,schoolId:e==null?void 0:e.schoolId}),s([]),i(!1);return}try{i(!0),console.log(" Cargando planeaciones para:",{userId:e.id,schoolId:e.schoolId});const x=await Gm.getMias(e.id,e.schoolId);console.log(" Planeaciones recuperadas:",x.length);const y=x.map(b=>{let N=new Date().toISOString();return b.createdAt&&(typeof b.createdAt=="string"?N=b.createdAt:typeof b.createdAt=="object"&&"toDate"in b.createdAt&&(N=b.createdAt.toDate().toISOString())),{id:b.id,materia:b.subject,semestre:b.semester||1,fecha:N,titulo:b.title}});s(y);const T=x.length,I=d(x);l({total:T,promedioSemanal:I})}catch(x){console.error("Error al cargar planeaciones:",x);const y=localStorage.getItem("savedPlans");if(y){const T=JSON.parse(y);s(T),l({total:T.length,promedioSemanal:0})}}finally{i(!1)}},d=x=>{if(x.length===0)return 0;const y=x.map(N=>new Date(N.createdAt||N.fecha)),T=new Date(Math.min(...y.map(N=>N.getTime()))),b=Math.max(1,Math.ceil((new Date().getTime()-T.getTime())/(7*24*60*60*1e3)));return x.length/b},m=x=>{t("plans")};return e?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx(Fq,{user:e}),r.jsx(Gq,{totalPlaneaciones:o.total,totalMaterias:((p=e.materias)==null?void 0:p.length)||0,totalSemestres:((g=e.grados)==null?void 0:g.length)||0,promedioSemanal:o.promedioSemanal}),r.jsx(Bq,{onNewPlaneacion:()=>t("generator"),onViewPlaneaciones:()=>t("plans"),onHerramientas:()=>t("herramientas"),onContexto:()=>t("context")}),a?r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(x=>r.jsx("div",{className:"h-20 bg-gray-100 rounded"},x))})]})}):r.jsx(qq,{planeaciones:n,onView:m,onViewAll:()=>t("plans"),onCreate:()=>t("generator")}),o.total===0&&!a&&r.jsxs("div",{className:"mt-6 bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-indigo-900 mb-2",children:"Bienvenido a EDUPLANMX! "}),r.jsx("p",{className:"text-indigo-700 mb-4",children:"Ests listo para comenzar a crear planeaciones didcticas personalizadas. Tu informacin ya est configurada y lista para usar."}),r.jsx("button",{onClick:()=>t("generator"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors",children:"Crear Mi Primera Planeacin"})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-lg text-gray-600",children:"Cargando..."})})})},V1=({readOnly:t=!1})=>{const{user:e}=dt(),[n,s]=M.useState(!1),[a,i]=M.useState(!1),[o,l]=M.useState(null),[c,d]=M.useState({abandonoEscolar:0,reprobacion:0,eficienciaTerminal:0,matriculaTotal:0}),[m,p]=M.useState({aulasConElectricidad:!1,aulasConInternet:!1,laboratorioComputacion:!1,instalacionesDeportivas:!1,fortalezas:[],areasOportunidad:[],descripcionGeneral:""}),[g,x]=M.useState(""),[y,T]=M.useState("");M.useEffect(()=>{e!=null&&e.schoolId&&I()},[e==null?void 0:e.schoolId]);const I=async()=>{if(e!=null&&e.schoolId){s(!0);try{const D=re(J,"pmc",e.schoolId),V=await kn(D);if(V.exists()){const k=V.data();k.indicadores&&d(k.indicadores),k.infraestructura&&p(k.infraestructura)}}catch(D){console.error("Error al cargar datos:",D),l({type:"error",text:"Error al cargar la informacin."})}finally{s(!1)}}},b=async()=>{if(e!=null&&e.schoolId){i(!0),l(null);try{const D=re(J,"pmc",e.schoolId);await cr(D,{schoolId:e.schoolId,indicadores:c,infraestructura:m,updatedAt:new Date().toISOString()},{merge:!0}),l({type:"success",text:"Informacin actualizada correctamente."}),setTimeout(()=>l(null),3e3)}catch(D){console.error("Error al guardar:",D),l({type:"error",text:"Error al guardar los cambios."})}finally{i(!1)}}},N=(D,V,k)=>{V.trim()&&(p(R=>({...R,[D]:[...R[D],V.trim()]})),k(""))},w=(D,V)=>{p(k=>({...k,[D]:k[D].filter((R,E)=>E!==V)}))};return n?r.jsx("div",{className:"p-8 text-center",children:"Cargando indicadores..."}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Diagnstico Escolar (PMC)"}),r.jsx("p",{className:"text-slate-600",children:"Indicadores acadmicos e infraestructura del plantel"})]}),!t&&r.jsx("button",{onClick:b,disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors shadow-sm",children:a?"Guardando...":r.jsxs(r.Fragment,{children:[r.jsx(Ii,{className:"w-4 h-4"}),"Guardar Cambios"]})})]}),o&&r.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-2 ${o.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[o.type==="success"?r.jsx(Is,{className:"w-5 h-5"}):r.jsx(ya,{className:"w-5 h-5"}),o.text]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(ms,{className:"w-5 h-5 text-indigo-600"}),"Indicadores Acadmicos"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"p-4 bg-red-50 rounded-xl border border-red-100",children:[r.jsx("label",{className:"block text-sm font-medium text-red-700 mb-1",children:"Abandon Escolar (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(UO,{className:"w-5 h-5 text-red-500"}),r.jsx("input",{type:"number",disabled:t,value:c.abandonoEscolar,onChange:D=>d({...c,abandonoEscolar:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-red-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-100",children:[r.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-1",children:"Reprobacin (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ya,{className:"w-5 h-5 text-orange-500"}),r.jsx("input",{type:"number",disabled:t,value:c.reprobacion,onChange:D=>d({...c,reprobacion:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-orange-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-100",children:[r.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Eficiencia Terminal (%)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ms,{className:"w-5 h-5 text-green-500"}),r.jsx("input",{type:"number",disabled:t,value:c.eficienciaTerminal,onChange:D=>d({...c,eficienciaTerminal:parseFloat(D.target.value)||0}),className:"w-full bg-white border border-green-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100",children:[r.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Matrcula Total"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ke,{className:"w-5 h-5 text-blue-500"}),r.jsx("input",{type:"number",disabled:t,value:c.matriculaTotal,onChange:D=>d({...c,matriculaTotal:parseInt(D.target.value)||0}),className:"w-full bg-white border border-blue-200 rounded-lg px-3 py-2 text-lg font-bold text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-slate-50 disabled:text-slate-500"})]})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(wt,{className:"w-5 h-5 text-indigo-600"}),"Infraestructura y Equipamiento"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.aulasConElectricidad?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,aulasConElectricidad:!m.aulasConElectricidad}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ez,{className:`w-5 h-5 ${m.aulasConElectricidad?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.aulasConElectricidad?"text-indigo-900":"text-slate-600"}`,children:"Electricidad"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.aulasConElectricidad?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.aulasConElectricidad?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.aulasConInternet?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,aulasConInternet:!m.aulasConInternet}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Yg,{className:`w-5 h-5 ${m.aulasConInternet?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.aulasConInternet?"text-indigo-900":"text-slate-600"}`,children:"Internet"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.aulasConInternet?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.aulasConInternet?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.laboratorioComputacion?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,laboratorioComputacion:!m.laboratorioComputacion}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(lO,{className:`w-5 h-5 ${m.laboratorioComputacion?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.laboratorioComputacion?"text-indigo-900":"text-slate-600"}`,children:"Laboratorio de Cmputo"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.laboratorioComputacion?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.laboratorioComputacion?"translate-x-4":""}`})})]}),r.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between transition-colors ${m.instalacionesDeportivas?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200"} ${t?"":"cursor-pointer"}`,onClick:()=>!t&&p({...m,instalacionesDeportivas:!m.instalacionesDeportivas}),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(PU,{className:`w-5 h-5 ${m.instalacionesDeportivas?"text-indigo-600":"text-slate-400"}`}),r.jsx("span",{className:`font-medium ${m.instalacionesDeportivas?"text-indigo-900":"text-slate-600"}`,children:"Instalaciones Deportivas"})]}),r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${m.instalacionesDeportivas?"bg-indigo-600":"bg-slate-300"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${m.instalacionesDeportivas?"translate-x-4":""}`})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex justify-between items-center",children:["Descripcin General y Diagnstico de Salud",r.jsx("span",{className:"text-xs font-normal text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full",children:"Requerido para PAEC"})]}),!t&&r.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-800",children:[r.jsxs("h4",{className:"font-bold flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"bg-blue-200 text-blue-800 w-5 h-5 flex items-center justify-center rounded-full text-xs",children:"i"}),"Gua para Alineacin con Rbrica PAEC 2025"]}),r.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-blue-700 opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Conectar datos con salud:"})," Relaciona los indicadores (abandono, reprobacin) con determinantes de salud (cansancio, alimentacin, estrs, trabajo)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Inters Genuino:"})," Menciona explcitamente inquietudes del alumnado (ej. ",r.jsx("em",{children:'"el estudiantado manifest preocupacin por..."'}),")."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Metodologa de Indagacin:"})," Cita los instrumentos usados (encuestas, observacin) y la gua metodolgica."]})]})]}),r.jsx("textarea",{disabled:t,className:"w-full border border-slate-300 rounded-xl p-4 h-48 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-y text-slate-700 disabled:bg-slate-50 leading-relaxed",placeholder:`Ejemplo de redaccin ideal:

"El plantel atiende a 108 estudiantes en turno vespertino... condiciones que impactan en sus hbitos de sueo y alimentacin. Se observa cansancio y estrs relacionados con el abandono escolar.

El estudiantado expres preocupacin por la falta de opciones de comida saludable...

Este diagnstico se elabor a partir de encuestas breves y observacin directa, siguiendo la metodologa sugerida en el PAEC 2025..."`,value:m.descripcionGeneral,onChange:D=>p({...m,descripcionGeneral:D.target.value})}),r.jsx("p",{className:"text-xs text-slate-400 mt-2 text-right",children:"Esta descripcin fundamentar la problemtica seleccionada en el PAEC."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Principales Fortalezas"]}),r.jsx("div",{className:"space-y-2 mb-3",children:m.fortalezas.map((D,V)=>r.jsxs("div",{className:"flex justify-between items-center bg-green-50 text-green-800 px-3 py-2 rounded-lg text-sm border border-green-100",children:[r.jsx("span",{children:D}),!t&&r.jsx("button",{onClick:()=>w("fortalezas",V),className:"text-green-600 hover:text-green-800 font-bold ml-2",children:""})]},V))}),!t&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ej: Docentes comprometidos con la salud, Espacios verdes...",value:g,onChange:D=>x(D.target.value),onKeyDown:D=>D.key==="Enter"&&N("fortalezas",g,x)}),r.jsx("button",{onClick:()=>N("fortalezas",g,x),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-green-700",children:"Agregar"})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"reas de Oportunidad"]}),r.jsx("div",{className:"space-y-2 mb-3",children:m.areasOportunidad.map((D,V)=>r.jsxs("div",{className:"flex justify-between items-center bg-orange-50 text-orange-800 px-3 py-2 rounded-lg text-sm border border-orange-100",children:[r.jsx("span",{children:D}),!t&&r.jsx("button",{onClick:()=>w("areasOportunidad",V),className:"text-orange-600 hover:text-orange-800 font-bold ml-2",children:""})]},V))}),!t&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Alumnos solicitan mejores opciones alimenticias...",value:y,onChange:D=>T(D.target.value),onKeyDown:D=>D.key==="Enter"&&N("areasOportunidad",y,T)}),r.jsx("button",{onClick:()=>N("areasOportunidad",y,T),className:"bg-orange-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-orange-700",children:"Agregar"})]})]})]})]})]})},$q=()=>{const{user:t}=dt(),[e,n]=M.useState("diagnostico"),[s,a]=M.useState(null),[i,o]=M.useState(!1),[l,c]=M.useState([]);M.useEffect(()=>{t!=null&&t.schoolId&&d()},[t==null?void 0:t.schoolId]);const d=async()=>{if(t!=null&&t.schoolId){o(!0);try{const y=re(J,"pmc",t.schoolId),T=await kn(y);if(T.exists()){const I=T.data();I.metas&&c(I.metas)}}catch(y){console.error("Error al cargar metas:",y)}finally{o(!1)}}},m=async()=>{if(t!=null&&t.schoolId)try{const y=re(J,"pmc",t.schoolId);await cr(y,{metas:l},{merge:!0});const T=new Date().toLocaleTimeString();a(T),alert("Metas guardadas correctamente en la nube ")}catch(y){console.error("Error al guardar metas:",y),alert("Error al guardar. Intenta de nuevo.")}},p=()=>{const y={id:Date.now().toString(),area:"Aprendizaje",description:"",actions:[],progress:0};c([...l,y])},g=(y,T,I)=>{c(l.map(b=>b.id===y?{...b,[T]:I}:b))},x=y=>{confirm("Ests seguro de eliminar esta meta?")&&c(l.filter(T=>T.id!==y))};return r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(ms,{className:"w-8 h-8 text-indigo-600"}),"Plan de Mejora Continua (PMC)"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Gestin del diagnstico y metas institucionales"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[s&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Guardado: ",s]}),r.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(Ii,{className:"w-4 h-4"})," Guardar Metas"]})]})]}),r.jsxs("div",{className:"flex border-b border-slate-200",children:[r.jsx("button",{onClick:()=>n("diagnostico"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="diagnostico"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"1. Diagnstico Institucional"}),r.jsx("button",{onClick:()=>n("metas"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="metas"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"2. Metas y Acciones"}),r.jsx("button",{onClick:()=>n("seguimiento"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 ${e==="seguimiento"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"3. Seguimiento"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-slate-200 shadow-sm",children:[e==="diagnostico"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx(V1,{readOnly:!0})}),e==="metas"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-sm font-bold text-indigo-600 hover:bg-indigo-50 px-3 py-2 rounded-lg transition-colors",children:[r.jsx(On,{className:"w-4 h-4"})," Agregar Nueva Meta"]})}),l.length===0?r.jsx("div",{className:"text-center py-12 text-slate-400",children:"No hay metas definidas. Comienza agregando una meta prioritaria."}):r.jsx("div",{className:"space-y-6",children:l.map((y,T)=>r.jsxs("div",{className:"border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-4",children:[r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"rea de Atencin"}),r.jsxs("select",{value:y.area,onChange:I=>g(y.id,"area",I.target.value),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium",children:[r.jsx("option",{value:"Aprendizaje",children:"Aprendizaje"}),r.jsx("option",{value:"Formacin Docente",children:"Formacin Docente"}),r.jsx("option",{value:"Infraestructura",children:"Infraestructura"}),r.jsx("option",{value:"Convivencia",children:"Convivencia Escolar"}),r.jsx("option",{value:"Vinculacin",children:"Vinculacin (PAEC)"})]})]}),r.jsxs("div",{className:"md:col-span-8",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Descripcin de la Meta"}),r.jsx("input",{type:"text",className:"w-full p-2 border border-slate-200 rounded-lg text-sm",placeholder:"Ej. Reducir la desercin en un 5%...",value:y.description,onChange:I=>g(y.id,"description",I.target.value)})]}),r.jsx("div",{className:"md:col-span-1 flex items-end justify-center",children:r.jsx("button",{onClick:()=>x(y.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:r.jsx(ns,{className:"w-5 h-5"})})})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-end",children:r.jsx("button",{className:"text-xs font-bold text-indigo-600",children:"+ Gestionar Acciones y Responsables"})})]},y.id))})]}),e==="seguimiento"&&r.jsx("div",{className:"animate-in fade-in",children:l.length===0?r.jsx("div",{className:"text-center py-12 text-slate-500 italic",children:"Define metas primero para darles seguimiento."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-blue-800 text-sm mb-6",children:[r.jsx("strong",{children:"Panel de Control:"})," Actualiza el porcentaje de avance de cada meta trimestralmente."]}),l.map(y=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-slate-100 text-slate-600 uppercase mb-2 inline-block",children:y.area}),r.jsx("h3",{className:"font-bold text-slate-800",children:y.description||"Sin descripcin"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[y.progress||0,"%"]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Avance Global"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-500",style:{width:`${y.progress||0}%`}})}),r.jsx("div",{className:"flex items-center gap-4 mt-2",children:r.jsx("input",{type:"range",min:"0",max:"100",value:y.progress||0,onChange:T=>g(y.id,"progress",Number(T.target.value)),className:"w-full"})})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2",children:[r.jsx(PO,{className:"w-3 h-3"})," Evidencias Recientes"]}),r.jsx("div",{className:"text-sm text-slate-400 italic",children:"No hay evidencias cargadas para este periodo."}),r.jsx("button",{className:"mt-2 text-xs font-medium text-indigo-600 hover:underline",children:"+ Cargar Evidencia"})]})]},y.id))]})})]})]})},U1=({readOnly:t=!1})=>{var D,V,k,R,E,S;const{user:e}=dt(),[n,s]=M.useState([]),[a,i]=M.useState(!1),[o,l]=M.useState(!1),[c,d]=M.useState({titulo:"",descripcion:"",prioridad:"Media",causas:[],afectados:[],criterios:{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1}}),[m,p]=M.useState(""),[g,x]=M.useState("");M.useEffect(()=>{e!=null&&e.schoolId&&y()},[e==null?void 0:e.schoolId]);const y=async()=>{if(e!=null&&e.schoolId){i(!0);try{const C=re(J,"pmc",e.schoolId),_=await kn(C);if(_.exists()){const P=_.data();P.paec&&s(P.paec)}}catch(C){console.error("Error al cargar PAEC:",C)}finally{i(!1)}}},T=async()=>{if(!(e!=null&&e.schoolId)||!c.titulo)return;const C={id:Math.random().toString(36).substr(2,9),titulo:c.titulo||"Sin ttulo",descripcion:c.descripcion||"",prioridad:c.prioridad,causas:c.causas||[],afectados:c.afectados||[],criterios:c.criterios||{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1},seleccionada:!1,fechaRegistro:new Date().toISOString()};try{const _=re(J,"pmc",e.schoolId);await cr(_,{paec:uv(C)},{merge:!0}),s([...n,C]),l(!1),d({titulo:"",descripcion:"",prioridad:"Media",causas:[],afectados:[],criterios:{impactoSocial:!1,viabilidad:!1,interesEstudiantil:!1,transversalidad:!1}})}catch(_){console.error("Error al agregar problemtica:",_)}},I=async C=>{if(!(e!=null&&e.schoolId))return;const _=n.find(P=>P.id===C);if(_&&confirm("Ests seguro de eliminar esta problemtica?"))try{const P=re(J,"pmc",e.schoolId);await vt(P,{paec:bI(_)}),s(n.filter(j=>j.id!==C))}catch(P){console.error("Error al eliminar:",P)}},b=async C=>{if(!(e!=null&&e.schoolId))return;const _=n.map(P=>({...P,seleccionada:P.id===C}));s(_);try{const P=re(J,"pmc",e.schoolId);await vt(P,{paec:_})}catch(P){console.error("Error al actualizar prioridad:",P),y()}},N=(C,_,P)=>{_.trim()&&(d(j=>({...j,[C]:[...j[C]||[],_.trim()]})),P(""))},w=(C,_)=>{d(P=>({...P,[C]:(P[C]||[]).filter((j,H)=>H!==_)}))};return a?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Cargando PAEC..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Programa Aula Escuela Comunidad (PAEC)"}),r.jsx("p",{className:"text-slate-600",children:"Diagnstico comunitario y seleccin de problemticas"})]}),!t&&r.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(On,{className:"w-4 h-4"}),"Nueva Problemtica"]})]}),o&&!t&&r.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 shadow-sm animate-in fade-in slide-in-from-top-4",children:[r.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Registrar Nueva Problemtica"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Problemtica Identificada"}),r.jsx("input",{type:"text",className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Contaminacin del ro local",value:c.titulo,onChange:C=>d({...c,titulo:C.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nivel de Impacto"}),r.jsxs("select",{className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500",value:c.prioridad,onChange:C=>d({...c,prioridad:C.target.value}),children:[r.jsx("option",{value:"Alta",children:"Alta"}),r.jsx("option",{value:"Media",children:"Media"}),r.jsx("option",{value:"Baja",children:"Baja"})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Descripcin y Justificacin"}),r.jsx("span",{className:"text-xs text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full",children:"Formato Sugerido"})]}),r.jsxs("div",{className:"mb-3 bg-blue-50 border border-blue-100 rounded-lg p-3 text-xs text-blue-800",children:[r.jsx("h4",{className:"font-bold mb-1",children:"Estructura Recomendada para Rbrica PAEC:"}),r.jsxs("ul",{className:"list-disc pl-4 space-y-1 opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"1. El Problema (Precisin):"})," Qu pasa exactamente? (Conductas observables, riesgos de salud)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"2. El Contexto:"})," Cmo se ve esto en TU escuela? (Menciona el nombre del plantel y situaciones locales)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"3. La Indagacin:"})," Cmo te diste cuenta? (Observacin, encuestas, comentarios)."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"4. La Propuesta:"})," Qu vamos a hacer para transformar esto? (Talleres, actividades formativas)."]})]})]}),r.jsx("textarea",{className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm h-48 resize-y focus:ring-2 focus:ring-indigo-500 leading-relaxed",placeholder:`Ejemplo de redaccin:

"Los alumnos buscan estar en buen estado fsico... sin embargo, no cuentan con orientacin profesional... (El Problema).

En el contexto del Bachillerato Gral. [Nombre]... se han identificado comentarios sobre presin esttica... (El Contexto).

Esta problemtica fue identificada a partir de observaciones en el aula y encuestas breves... (La Indagacin).

La propuesta consiste en desarrollar talleres y actividades que fortalezcan conocimientos y actitudes para el cuidado de la salud..." (La Propuesta).`,value:c.descripcion,onChange:C=>d({...c,descripcion:C.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Causas Principales"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-2 py-1 text-sm",placeholder:"Ej: Basura",value:m,onChange:C=>p(C.target.value),onKeyDown:C=>C.key==="Enter"&&N("causas",m,p)}),r.jsx("button",{onClick:()=>N("causas",m,p),className:"bg-slate-200 px-3 py-1 rounded text-sm hover:bg-slate-300",children:"+"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(D=c.causas)==null?void 0:D.map((C,_)=>r.jsxs("span",{className:"bg-white border border-slate-200 px-2 py-1 rounded text-xs flex items-center gap-1",children:[C," ",r.jsx("button",{onClick:()=>w("causas",_),className:"text-red-500 ml-1",children:""})]},_))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Poblacin Afectada"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 border border-slate-300 rounded-lg px-2 py-1 text-sm",placeholder:"Ej: Estudiantes",value:g,onChange:C=>x(C.target.value),onKeyDown:C=>C.key==="Enter"&&N("afectados",g,x)}),r.jsx("button",{onClick:()=>N("afectados",g,x),className:"bg-slate-200 px-3 py-1 rounded text-sm hover:bg-slate-300",children:"+"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(V=c.afectados)==null?void 0:V.map((C,_)=>r.jsxs("span",{className:"bg-white border border-slate-200 px-2 py-1 rounded text-xs flex items-center gap-1",children:[C," ",r.jsx("button",{onClick:()=>w("afectados",_),className:"text-red-500 ml-1",children:""})]},_))})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:[r.jsx("h4",{className:"text-sm font-semibold text-slate-800 mb-3",children:"Criterios de Viabilidad"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(k=c.criterios)==null?void 0:k.impactoSocial,onChange:C=>d({...c,criterios:{...c.criterios,impactoSocial:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Impacto Social Alto"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(R=c.criterios)==null?void 0:R.viabilidad,onChange:C=>d({...c,criterios:{...c.criterios,viabilidad:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Viabilidad Tcnica/Financiera"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(E=c.criterios)==null?void 0:E.interesEstudiantil,onChange:C=>d({...c,criterios:{...c.criterios,interesEstudiantil:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Inters del Estudiantado"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(S=c.criterios)==null?void 0:S.transversalidad,onChange:C=>d({...c,criterios:{...c.criterios,transversalidad:C.target.checked}}),className:"rounded text-indigo-600 focus:ring-indigo-500"}),"Oportunidad de Transversalidad"]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancelar"}),r.jsx("button",{onClick:T,disabled:!c.titulo,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors font-medium",children:"Registrar Problemtica"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.length===0&&!o&&r.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[r.jsx(Kn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-medium text-slate-600",children:"No hay problemticas registradas"}),r.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Comienza registrando las necesidades de tu comunidad escolar"}),!t&&r.jsx("button",{onClick:()=>l(!0),className:"text-indigo-600 font-medium hover:underline",children:"Registrar ahora"})]}),n.map(C=>r.jsxs("div",{className:`bg-white rounded-xl border p-6 transition-all ${C.seleccionada?"border-green-500 shadow-md ring-1 ring-green-500":"border-slate-200 hover:shadow-md"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:C.titulo}),C.seleccionada&&r.jsxs("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1",children:[r.jsx(Lc,{className:"w-3 h-3"})," Prioridad del Ciclo"]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-bold ${C.prioridad==="Alta"?"bg-red-100 text-red-700":C.prioridad==="Media"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:C.prioridad})]}),r.jsx("p",{className:"text-slate-600 text-sm",children:C.descripcion})]}),!t&&r.jsxs("div",{className:"flex items-center gap-2",children:[!C.seleccionada&&r.jsx("button",{onClick:()=>b(C.id),className:"text-sm text-slate-500 hover:text-green-600 px-3 py-1 rounded hover:bg-green-50 transition-colors",title:"Seleccionar como prioridad",children:"Seleccionar"}),r.jsx("button",{onClick:()=>I(C.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(ns,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[r.jsx(_i,{className:"w-3 h-3"})," Causas:"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.causas.map((_,P)=>r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs",children:_},P))})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[r.jsx(Ke,{className:"w-3 h-3"})," Afectados:"]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.afectados.map((_,P)=>r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs",children:_},P))})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[r.jsx("span",{className:"font-semibold text-slate-700 block mb-2 text-xs uppercase tracking-wider",children:"Criterios Cumplidos:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.impactoSocial?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Hl,{className:"w-3 h-3"})," Impacto Social"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.viabilidad?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Hl,{className:"w-3 h-3"})," Viabilidad"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.interesEstudiantil?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Hl,{className:"w-3 h-3"})," Inters Alumnos"]}),r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${C.criterios.transversalidad?"text-green-700 font-medium":"text-slate-400"}`,children:[r.jsx(Hl,{className:"w-3 h-3"})," Transversalidad"]})]})]})]})]},C.id))]})]})},Yq=()=>{var E,S,C;const{user:t}=dt(),[e,n]=M.useState(!1),[s,a]=M.useState(!1),[i,o]=M.useState([]),[l,c]=M.useState({name:"",problemId:"",justification:"",generalObjective:"",specificObjectives:[],duration:"",stages:[{name:"Diagnstica",period:"",activities:[]},{name:"Planeacin",period:"",activities:[]},{name:"Ejecucin",period:"",activities:[]},{name:"Cierre y Valoracin",period:"",activities:[]}],products:[]}),[d,m]=M.useState(""),[p,g]=M.useState(""),[x,y]=M.useState({});M.useEffect(()=>{t!=null&&t.schoolId&&T()},[t==null?void 0:t.schoolId]);const T=async()=>{if(t!=null&&t.schoolId){n(!0);try{const _=re(J,"pmc",t.schoolId),P=await kn(_);if(P.exists()){const j=P.data();o(j.paec||[])}}catch(_){console.error("Error loading problems:",_)}finally{n(!1)}}},I=async()=>{if(!(t!=null&&t.schoolId)||!l.name||!l.problemId){alert("Por favor completa el nombre del proyecto y selecciona una problemtica.");return}a(!0);try{const _={...l,id:Math.random().toString(36).substr(2,9)},P=re(J,"pmc",t.schoolId);await vt(P,{pecProjects:uv(_)}),alert("Proyecto PEC diseado exitosamente "),c({name:"",problemId:"",justification:"",generalObjective:"",specificObjectives:[],duration:"",stages:[{name:"Diagnstica",period:"",activities:[]},{name:"Planeacin",period:"",activities:[]},{name:"Ejecucin",period:"",activities:[]},{name:"Cierre y Valoracin",period:"",activities:[]}],products:[]})}catch(_){console.error("Error saving PEC:",_),alert("Error al guardar el proyecto.")}finally{a(!1)}},b=()=>{d.trim()&&(c(_=>({..._,specificObjectives:[..._.specificObjectives||[],d.trim()]})),m(""))},N=_=>{c(P=>{var j;return{...P,specificObjectives:(j=P.specificObjectives)==null?void 0:j.filter((H,O)=>O!==_)}})},w=()=>{p.trim()&&(c(_=>({..._,products:[..._.products||[],p.trim()]})),g(""))},D=_=>{c(P=>{var j;return{...P,products:(j=P.products)==null?void 0:j.filter((H,O)=>O!==_)}})},V=_=>{const P=x[_];if(!(P!=null&&P.trim()))return;const j=[...l.stages||[]];j[_].activities.push(P.trim()),c(H=>({...H,stages:j})),y(H=>({...H,[_]:""}))},k=(_,P)=>{const j=[...l.stages||[]];j[_].activities=j[_].activities.filter((H,O)=>O!==P),c(H=>({...H,stages:j}))},R=(_,P)=>{const j=[...l.stages||[]];j[_].period=P,c(H=>({...H,stages:j}))};return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"bg-indigo-50 p-6 border-b border-indigo-100",children:[r.jsxs("h2",{className:"text-xl font-bold text-indigo-900 flex items-center gap-2",children:[r.jsx(Kn,{className:"w-6 h-6"})," Diseador de Proyectos Escolares (PEC)"]}),r.jsx("p",{className:"text-indigo-700 text-sm mt-1",children:"Estructura tu proyecto transversal vinculando las problemticas del diagnstico."})]}),r.jsxs("div",{className:"p-8 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"1. Problemtica a Atender (Diagnstico)"}),r.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:l.problemId,onChange:_=>{const P=_.target.value,j=i.find(H=>H.id===P);c(H=>({...H,problemId:P,justification:j?`Atendiendo a la problemtica de ${j.titulo}...`:H.justification}))},children:[r.jsx("option",{value:"",children:"-- Selecciona una problemtica del PAEC --"}),i.map(_=>r.jsxs("option",{value:_.id,children:[_.titulo," (Prioridad: ",_.prioridad,")"]},_.id))]}),l.problemId&&r.jsxs("div",{className:"p-3 bg-green-50 text-green-800 text-xs rounded-lg border border-green-100 flex items-center gap-2",children:[r.jsx(Lc,{className:"w-4 h-4"})," Problemtica vinculada correctamente"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"2. Ttulo del Proyecto"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 font-bold text-lg",placeholder:"Ej: Feria de la Salud Integral 2024...",value:l.name,onChange:_=>c({...l,name:_.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"3. Justificacin"}),r.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl h-24 focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Por qu es importante realizar este proyecto?",value:l.justification,onChange:_=>c({...l,justification:_.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"4. Objetivo General"}),r.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl h-32 focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Qu queremos lograr a largo plazo?",value:l.generalObjective,onChange:_=>c({...l,generalObjective:_.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"5. Objetivos Especficos"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",className:"flex-1 p-2 border border-slate-300 rounded-lg text-sm",placeholder:"Agregar objetivo...",value:d,onChange:_=>m(_.target.value),onKeyDown:_=>_.key==="Enter"&&b()}),r.jsx("button",{onClick:b,className:"bg-indigo-100 text-indigo-700 px-3 rounded-lg hover:bg-indigo-200",children:r.jsx(On,{className:"w-4 h-4"})})]}),r.jsx("ul",{className:"space-y-2 max-h-24 overflow-y-auto",children:(E=l.specificObjectives)==null?void 0:E.map((_,P)=>r.jsxs("li",{className:"flex justify-between items-center text-sm bg-slate-50 p-2 rounded border border-slate-100",children:[r.jsxs("span",{children:[" ",_]}),r.jsx("button",{onClick:()=>N(P),className:"text-red-400 hover:text-red-600",children:""})]},P))})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("label",{className:"block text-lg font-bold text-slate-800",children:"6. Cronograma de Actividades (Por Fases)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Duracin Total:"}),r.jsx("input",{type:"text",className:"border border-slate-300 rounded-lg px-3 py-1 text-sm w-48",placeholder:"Ej: Agosto - Diciembre 2024",value:l.duration,onChange:_=>c({...l,duration:_.target.value})})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(S=l.stages)==null?void 0:S.map((_,P)=>r.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:[r.jsxs("h4",{className:"font-bold text-indigo-800 mb-2 flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"bg-indigo-200 text-indigo-800 w-5 h-5 flex items-center justify-center rounded-full text-xs",children:P+1}),_.name]}),r.jsx("input",{type:"text",className:"w-full text-xs p-1 mb-3 border border-slate-200 rounded text-slate-500",placeholder:"Periodo (Ej: Agosto)",value:_.period,onChange:j=>R(P,j.target.value)}),r.jsx("div",{className:"space-y-2 mb-3 min-h-[80px]",children:_.activities.map((j,H)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-slate-100 text-xs flex justify-between group",children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>k(P,H),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100",children:""})]},H))}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{type:"text",className:"flex-1 text-xs p-1 border border-slate-300 rounded",placeholder:"Nueva actividad...",value:x[P]||"",onChange:j=>y({...x,[P]:j.target.value}),onKeyDown:j=>j.key==="Enter"&&V(P)}),r.jsx("button",{onClick:()=>V(P),className:"bg-indigo-600 text-white rounded px-2 text-xs",children:"+"})]})]},P))})]}),r.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200",children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"7. Productos Entregables (Evidencias)"}),r.jsxs("div",{className:"flex gap-4 mb-4",children:[r.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-300 rounded-xl",placeholder:"Ej: Video documental, Mural comunitario, Huerto escolar...",value:p,onChange:_=>g(_.target.value),onKeyDown:_=>_.key==="Enter"&&w()}),r.jsx("button",{onClick:w,className:"bg-indigo-600 text-white px-6 rounded-xl font-bold hover:bg-indigo-700",children:"Agregar"})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:(C=l.products)==null?void 0:C.map((_,P)=>r.jsxs("div",{className:"bg-white px-4 py-2 rounded-full border border-indigo-100 text-indigo-700 font-medium flex items-center gap-2 shadow-sm",children:[_,r.jsx("button",{onClick:()=>D(P),className:"text-indigo-300 hover:text-red-500",children:""})]},P))})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:r.jsx("button",{onClick:I,disabled:s,className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-pink-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transform hover:-translate-y-1 transition-all disabled:opacity-50",children:s?"Guardando Proyecto...":r.jsxs(r.Fragment,{children:[r.jsx(Ii,{className:"w-5 h-5"})," Guardar Proyecto PEC"]})})})]})]})},Jq=()=>{const{user:t}=dt(),[e,n]=M.useState("diagnostico"),[s,a]=M.useState([]);return M.useEffect(()=>{(async()=>{if(t!=null&&t.schoolId){const o=await Nv.getActiveProjects(t.schoolId);a(o)}})()},[t==null?void 0:t.schoolId]),r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8 relative",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(Ke,{className:"w-8 h-8 text-pink-600"}),"Comit PAEC"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Programa Aula Escuela Comunidad - Diagnstico y Proyectos"})]})}),r.jsxs("div",{className:"flex gap-4 border-b border-slate-200 pb-1",children:[r.jsxs("button",{onClick:()=>n("diagnostico"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="diagnostico"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(_i,{className:"w-4 h-4"})," Diagnstico Comunitario"]}),r.jsxs("button",{onClick:()=>n("banco"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="banco"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(FU,{className:"w-4 h-4"})," Banco de Proyectos (PEC)"]}),r.jsxs("button",{onClick:()=>n("nuevo"),className:`flex items-center gap-2 px-4 py-2 font-medium text-sm rounded-t-lg transition-colors ${e==="nuevo"?"bg-pink-50 text-pink-700 border-b-2 border-pink-500":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(On,{className:"w-4 h-4"})," Disear Nuevo PEC"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 min-h-[500px]",children:[e==="diagnostico"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-900 text-sm mb-6",children:[r.jsx("strong",{children:"Instrucciones:"})," Este diagnstico es gestionado por el Director. Aqu puedes consultar las problemticas prioritarias identificadas para vincularlas a tus proyectos."]}),r.jsx(U1,{readOnly:!0})]}),e==="banco"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:s.map(i=>r.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:shadow-lg transition-shadow bg-white",children:[r.jsx("div",{className:"h-24 bg-gradient-to-r from-pink-500 to-purple-600 p-4 relative",children:r.jsx("div",{className:"absolute top-4 right-4 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-white font-bold",children:i.duration})}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:i.name}),r.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-4",children:i.generalObjective}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Kn,{className:"w-4 h-4 text-pink-500"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Productos:"})," ",i.products.length," definidos"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Ke,{className:"w-4 h-4 text-purple-500"}),r.jsx("span",{children:"Vinculado a Planeaciones"})]})]}),r.jsx("button",{className:"w-full py-2 bg-slate-100 text-slate-700 rounded-lg font-bold text-sm hover:bg-slate-200 transition-colors",children:"Ver Detalles y Avances"})]})]},i.id))}),e==="nuevo"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx(Yq,{})})]})]})},Kq=()=>{const t=bs(),e=Os(),{user:n,logout:s}=dt(),[a,i]=M.useState(()=>{var T;return((T=e.state)==null?void 0:T.view)||"dashboard"}),[o,l]=M.useState(()=>{const T=localStorage.getItem("schoolContext");return T?JSON.parse(T):{schoolName:"Bachillerato General Oficial",cct:"",cycle:"2024-2025",shift:"Matutino",municipality:"",vision:"",communityGoals:"",infrastructure:""}}),[c,d]=M.useState(()=>{const T=localStorage.getItem("subjectContext");return T?JSON.parse(T):{subjectId:"",subjectName:"",formativePurpose:"",curriculumContent:"",mccemsCategory:""}}),[m,p]=M.useState(()=>{const T=localStorage.getItem("savedPlans");return T?JSON.parse(T):[]});M.useEffect(()=>{localStorage.setItem("schoolContext",JSON.stringify(o)),localStorage.setItem("subjectContext",JSON.stringify(c)),localStorage.setItem("savedPlans",JSON.stringify(m)),localStorage.setItem("savedPlans",JSON.stringify(m))},[o,c,m]),M.useEffect(()=>{n&&(n.schoolName&&(!o.schoolName||o.schoolName==="Bachillerato General Oficial")&&l(T=>({...T,schoolName:n.schoolName})),!c.subjectName&&n.materias&&n.materias.length>0&&d(T=>({...T,subjectName:n.materias[0],subjectId:n.materias[0]})))},[n]);const g=async T=>{if(p(I=>[T,...I]),n!=null&&n.id&&(n!=null&&n.schoolId))try{const{planeacionesService:I}=await Eo(async()=>{const{planeacionesService:b}=await Promise.resolve().then(()=>Cq);return{planeacionesService:b}},void 0);await I.crear(T,n.id,n.schoolId),console.log(" Planeacin guardada en Firestore")}catch(I){console.error(" Error al guardar en Firestore:",I)}},x=T=>{T==="guia-curricular"?t("/maestro/guia-curricular"):T==="herramientas"?t("/maestro/herramientas"):i(T)},y=()=>{switch(a){case"dashboard":return r.jsx(Hq,{onNavigate:x});case"admin-asignacion":return r.jsx(Uq,{});case"admin-alumnos":return r.jsx(Oq,{});case"pmc":return r.jsx($q,{});case"paec":return r.jsx(Jq,{});case"context":return r.jsx(iz,{school:o,setSchool:l,subject:c,setSubject:d});case"generator":return r.jsx(_q,{school:o,subject:c,teacherName:n?`${n.nombre} ${n.apellidoPaterno}`:void 0,onSave:g});case"plans":return r.jsx(Tq,{});case"diagnostico":return r.jsx(Lq,{});default:return r.jsx(Nq,{setView:i,recentPlansCount:m.length})}};return r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(co,{activeView:a,onNavigate:x}),r.jsxs("main",{className:"flex-1 overflow-y-auto h-screen",children:[r.jsxs("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10 px-8 py-4 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold capitalize text-slate-700",children:a==="dashboard"?"Bienvenido, Docente":a.replace("_"," ")}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-medium border border-indigo-100",children:o.schoolName}),n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-semibold text-slate-700",children:[n.nombre," ",n.apellidoPaterno]}),r.jsx("div",{className:"text-xs text-slate-500 capitalize",children:n.rol})]}),r.jsx("button",{onClick:s,className:"flex md:hidden items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-xl hover:bg-red-100 transition-colors border border-red-200",title:"Cerrar sesin",children:r.jsx(Oh,{className:"w-4 h-4"})})]}):null]})]}),r.jsx("div",{className:"p-8 max-w-5xl mx-auto pb-24",children:y()})]})]})},Qq=()=>{const[t,e]=M.useState(!1),[n,s]=M.useState(!1),[a,i]=M.useState(!1),[o,l]=M.useState(""),c=async d=>{i(!0),l(d.datosAdministrativos.nombre);try{await l0.guardarAlumno({datosAdministrativos:d.datosAdministrativos,datosNEM:d.datosNEM,fechaRegistro:d.fechaRegistro}),e(!1),s(!0),setTimeout(()=>{s(!1)},5e3)}catch(m){console.error("Error al guardar alumno:",m),alert("Hubo un error al guardar tu informacin. Por favor, intenta de nuevo.")}finally{i(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-3 rounded-xl",children:r.jsx(wt,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"EduPlan MX"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Registro de Alumnos - Bachillerato General Oficial"})]})]})})}),r.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[!t&&!n&&r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 mb-8 border border-slate-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full mb-6",children:r.jsx(UE,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Bienvenido!"}),r.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-2xl mx-auto",children:"Completa tu registro para que podamos conocerte mejor y ofrecerte la mejor experiencia educativa personalizada."}),r.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center gap-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 shadow-lg",children:[r.jsx(UE,{className:"w-6 h-6"}),"Comenzar Registro"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Fcil y Rpido"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Solo 4 pasos sencillos para completar tu registro"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Seguro"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Tu informacin est protegida y es confidencial"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-slate-200",children:[r.jsx("div",{className:"bg-purple-100 w-12 h-12 rounded-xl flex items-center justify-center mb-4 mx-auto",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Personalizado"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Nos ayuda a adaptar las clases a tus necesidades"})]})]})]}),n&&r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center border border-green-200",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:r.jsx(Is,{className:"w-12 h-12 text-green-600"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Registro Exitoso!"}),r.jsxs("p",{className:"text-xl text-slate-600 mb-6",children:["Gracias ",r.jsx("span",{className:"font-semibold text-indigo-600",children:o}),", tu informacin ha sido guardada correctamente."]}),r.jsx("p",{className:"text-slate-500 mb-8",children:"Tu docente podr utilizar esta informacin para personalizar las clases y ofrecerte una mejor experiencia educativa."}),r.jsx("button",{onClick:()=>{s(!1),e(!0)},className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors",children:"Registrar Otro Alumno"})]}),t&&r.jsx(L1,{onGuardar:c,onCancelar:()=>e(!1)}),a&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Guardando tu informacin..."})]})})]}),r.jsx("footer",{className:"bg-white border-t border-slate-200 mt-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsx("p",{className:"text-center text-sm text-slate-500",children:" 2026 EduPlan MX - Bachillerato General Oficial"})})})]})},Xq=()=>{const[t,e]=M.useState([]),[n,s]=M.useState(!0),[a,i]=M.useState(""),[o,l]=M.useState(!1),[c,d]=M.useState(null),[m,p]=M.useState({nombre:"",codigo:"",direccion:"",telefono:"",email:""});M.useEffect(()=>{g()},[]);const g=async()=>{try{s(!0);const b=await Re(ue(J,"schools")),N=await Promise.all(b.docs.map(async w=>{const D=w.data(),V=Ye(ue(J,"users"),tt("schoolId","==",w.id)),k=await Re(V),R=Ye(ue(J,"planeaciones"),tt("schoolId","==",w.id)),E=await Re(R);return{id:w.id,nombre:D.nombre,codigo:D.codigo,direccion:D.direccion,telefono:D.telefono,email:D.email,createdAt:D.createdAt,userCount:k.size,planCount:E.size}}));e(N)}catch(b){console.error("Error al cargar escuelas:",b),alert("Error al cargar las escuelas")}finally{s(!1)}},x=async b=>{if(b.preventDefault(),!m.nombre||!m.codigo){alert("Nombre y cdigo son obligatorios");return}try{c?(await vt(re(J,"schools",c.id),{...m,updatedAt:new Date().toISOString()}),alert(" Escuela actualizada correctamente")):(await es(ue(J,"schools"),{...m,createdAt:new Date().toISOString()}),alert(" Escuela creada correctamente")),l(!1),d(null),p({nombre:"",codigo:"",direccion:"",telefono:"",email:""}),g()}catch(N){console.error("Error al guardar escuela:",N),alert(" Error al guardar la escuela")}},y=b=>{d(b),p({nombre:b.nombre,codigo:b.codigo,direccion:b.direccion||"",telefono:b.telefono||"",email:b.email||""}),l(!0)},T=async b=>{if(b.userCount>0){alert(` No puedes eliminar esta escuela porque tiene ${b.userCount} usuarios registrados.

Primero debes reasignar o eliminar los usuarios.`);return}if(window.confirm(`Ests seguro de eliminar la escuela "${b.nombre}"?

Esta accin no se puede deshacer.`))try{await xs(re(J,"schools",b.id)),alert(" Escuela eliminada correctamente"),g()}catch(w){console.error("Error al eliminar escuela:",w),alert(" Error al eliminar la escuela")}},I=t.filter(b=>b.nombre.toLowerCase().includes(a.toLowerCase())||b.codigo.toLowerCase().includes(a.toLowerCase()));return n?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(wt,{className:"w-7 h-7 text-indigo-600"}),"Gestin de Escuelas"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Administra todas las escuelas del sistema"})]}),r.jsxs("button",{onClick:()=>{d(null),p({nombre:"",codigo:"",direccion:"",telefono:"",email:""}),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(On,{className:"w-5 h-5"}),"Nueva Escuela"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",value:a,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-2xl border border-indigo-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:"Total Escuelas"}),r.jsx("p",{className:"text-3xl font-bold text-indigo-900 mt-1",children:t.length})]}),r.jsx(wt,{className:"w-12 h-12 text-indigo-600 opacity-50"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl border border-purple-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total Usuarios"}),r.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:t.reduce((b,N)=>b+(N.userCount||0),0)})]}),r.jsx(Ke,{className:"w-12 h-12 text-purple-600 opacity-50"})]})}),r.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-2xl border border-emerald-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"Total Planeaciones"}),r.jsx("p",{className:"text-3xl font-bold text-emerald-900 mt-1",children:t.reduce((b,N)=>b+(N.planCount||0),0)})]}),r.jsx(it,{className:"w-12 h-12 text-emerald-600 opacity-50"})]})})]}),I.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[r.jsx(wt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:a?"No se encontraron escuelas":"No hay escuelas registradas"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:I.map(b=>r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 transition-all shadow-sm hover:shadow-md",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:r.jsx(wt,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:b.nombre}),r.jsxs("p",{className:"text-sm text-slate-500",children:["Cdigo: ",b.codigo]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[b.direccion&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Direccin"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.direccion})]}),b.telefono&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Telfono"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.telefono})]}),b.email&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),r.jsx("p",{className:"text-sm text-slate-700",children:b.email})]})]}),r.jsxs("div",{className:"flex gap-4 mt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Ke,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:[b.userCount," usuarios"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(it,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:[b.planCount," planeaciones"]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>y(b),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(pd,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>T(b),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-5 h-5"})})]})]})},b.id))}),o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:c?"Editar Escuela":"Nueva Escuela"}),r.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})}),r.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre de la Escuela *"}),r.jsx("input",{type:"text",required:!0,value:m.nombre,onChange:b=>p({...m,nombre:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Preparatoria Regional de Arandas"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cdigo de Escuela *"}),r.jsx("input",{type:"text",required:!0,value:m.codigo,onChange:b=>p({...m,codigo:b.target.value.toUpperCase()}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: PREP-ARANDAS-001"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Este cdigo debe ser nico"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Direccin"}),r.jsx("input",{type:"text",value:m.direccion,onChange:b=>p({...m,direccion:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Av. Principal #123, Arandas, Jalisco"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telfono"}),r.jsx("input",{type:"tel",value:m.telefono,onChange:b=>p({...m,telefono:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: 348-123-4567"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:m.email,onChange:b=>p({...m,email:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: contacto@escuela.edu.mx"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:c?"Guardar Cambios":"Crear Escuela"}),r.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors",children:"Cancelar"})]})]})]})})]})},Wq=()=>{const[t,e]=M.useState([]),[n,s]=M.useState([]),[a,i]=M.useState(!0),[o,l]=M.useState(""),[c,d]=M.useState("all"),[m,p]=M.useState("all"),[g,x]=M.useState(!1),[y,T]=M.useState(null),[I,b]=M.useState({email:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",rol:"maestro",schoolId:"",puesto:"",activo:!0});M.useEffect(()=>{N()},[]);const N=async()=>{try{i(!0);const[_,P]=await Promise.all([Re(ue(J,"users")),Re(ue(J,"schools"))]),j=_.docs.map(O=>({id:O.id,...O.data()})),H=P.docs.map(O=>({id:O.id,nombre:O.data().nombre,codigo:O.data().codigo}));e(j),s(H)}catch(_){console.error("Error al cargar datos:",_),alert("Error al cargar los datos")}finally{i(!1)}},w=async _=>{if(_.preventDefault(),!I.email||!I.nombre||!I.apellidoPaterno){alert("Email, nombre y apellido paterno son obligatorios");return}if(I.rol!=="superadmin"&&!I.schoolId){alert("Debes seleccionar una escuela para este usuario");return}try{const P=I.schoolId?n.find(H=>H.id===I.schoolId):null,j={email:I.email.toLowerCase(),nombre:I.nombre,apellidoPaterno:I.apellidoPaterno,apellidoMaterno:I.apellidoMaterno||"",rol:I.rol,schoolId:I.schoolId||null,schoolName:(P==null?void 0:P.nombre)||null,puesto:I.puesto||"",activo:I.activo,onboardingCompleto:I.rol==="superadmin"?!0:!!I.schoolId,materias:[],grados:[],updatedAt:new Date().toISOString()};y?(await vt(re(J,"users",y.id),j),alert(" Usuario actualizado correctamente")):(await es(ue(J,"users"),{...j,createdAt:new Date().toISOString()}),alert(` Usuario creado correctamente

 IMPORTANTE: El usuario debe iniciar sesin con Google usando este email para activar su cuenta.`)),x(!1),T(null),R(),N()}catch(P){console.error("Error al guardar usuario:",P),alert(" Error al guardar el usuario")}},D=_=>{T(_),b({email:_.email,nombre:_.nombre,apellidoPaterno:_.apellidoPaterno,apellidoMaterno:_.apellidoMaterno||"",rol:_.rol,schoolId:_.schoolId||"",puesto:_.puesto||"",activo:_.activo}),x(!0)},V=async _=>{const P=!_.activo,j=P?`Activar al usuario ${_.nombre} ${_.apellidoPaterno}?`:`Desactivar al usuario ${_.nombre} ${_.apellidoPaterno}?

No podr acceder al sistema.`;if(confirm(j))try{await vt(re(J,"users",_.id),{activo:P,updatedAt:new Date().toISOString()}),alert(` Usuario ${P?"activado":"desactivado"} correctamente`),N()}catch(H){console.error("Error al cambiar estado:",H),alert(" Error al cambiar el estado del usuario")}},k=async _=>{if(window.confirm(`Ests seguro de eliminar al usuario ${_.nombre} ${_.apellidoPaterno}?

Email: ${_.email}
Rol: ${_.rol}

Esta accin no se puede deshacer.`))try{await xs(re(J,"users",_.id)),alert(" Usuario eliminado correctamente"),N()}catch(j){console.error("Error al eliminar usuario:",j),alert(" Error al eliminar el usuario")}},R=()=>{b({email:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",rol:"maestro",schoolId:"",puesto:"",activo:!0})},E=t.filter(_=>{const P=_.nombre.toLowerCase().includes(o.toLowerCase())||_.apellidoPaterno.toLowerCase().includes(o.toLowerCase())||_.email.toLowerCase().includes(o.toLowerCase())||_.schoolName&&_.schoolName.toLowerCase().includes(o.toLowerCase()),j=c==="all"||_.rol===c,H=m==="all"||_.schoolId===m;return P&&j&&H}),S={total:t.length,activos:t.filter(_=>_.activo).length,inactivos:t.filter(_=>!_.activo).length,superadmin:t.filter(_=>_.rol==="superadmin").length,directivo:t.filter(_=>_.rol==="directivo").length,maestro:t.filter(_=>_.rol==="maestro").length,alumno:t.filter(_=>_.rol==="alumno").length},C=_=>{switch(_){case"superadmin":return"bg-red-100 text-red-700 border-red-200";case"directivo":return"bg-blue-100 text-blue-700 border-blue-200";case"maestro":return"bg-green-100 text-green-700 border-green-200";case"alumno":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-7 h-7 text-indigo-600"}),"Gestin de Usuarios"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Administra todos los usuarios del sistema"})]}),r.jsxs("button",{onClick:()=>{T(null),R(),x(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[r.jsx(On,{className:"w-5 h-5"}),"Nuevo Usuario"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:S.total})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Activos"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:S.activos})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[r.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Inactivos"}),r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:S.inactivos})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Superadmin"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:S.superadmin})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[r.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Directivos"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:S.directivo})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Maestros"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:S.maestro})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:[r.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Alumnos"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:S.alumno})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o escuela...",value:o,onChange:_=>l(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Vc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:c,onChange:_=>d(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"all",children:"Todos los roles"}),r.jsx("option",{value:"superadmin",children:"Superadmin"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:m,onChange:_=>p(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"all",children:"Todas las escuelas"}),n.map(_=>r.jsx("option",{value:_.id,children:_.nombre},_.id))]})]})]}),E.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[r.jsx(Ke,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600",children:o||c!=="all"||m!=="all"?"No se encontraron usuarios con los filtros aplicados":"No hay usuarios registrados"})]}):r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Escuela"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:E.map(_=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-slate-900",children:[_.nombre," ",_.apellidoPaterno," ",_.apellidoMaterno]}),_.puesto&&r.jsx("p",{className:"text-sm text-slate-500",children:_.puesto})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zh,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:_.email})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${C(_.rol)}`,children:[r.jsx(Gh,{className:"w-3 h-3"}),_.rol]})}),r.jsx("td",{className:"px-6 py-4",children:_.schoolName?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wt,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:_.schoolName})]}):r.jsx("span",{className:"text-sm text-slate-400",children:"Sin escuela"})}),r.jsx("td",{className:"px-6 py-4",children:_.activo?r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[r.jsx(Is,{className:"w-3 h-3"}),"Activo"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-medium",children:[r.jsx(km,{className:"w-3 h-3"}),"Inactivo"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>D(_),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:r.jsx(pd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>V(_),className:`p-2 rounded-lg transition-colors ${_.activo?"text-slate-600 hover:bg-slate-100":"text-green-600 hover:bg-green-50"}`,title:_.activo?"Desactivar":"Activar",children:r.jsx(EO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>k(_),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:y?"Editar Usuario":"Nuevo Usuario"}),r.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})}),r.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",required:!0,value:I.email,onChange:_=>b({...I,email:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"usuario@ejemplo.com",disabled:!!y}),!y&&r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"El usuario debe iniciar sesin con este email en Google"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre *"}),r.jsx("input",{type:"text",required:!0,value:I.nombre,onChange:_=>b({...I,nombre:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Jos"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",required:!0,value:I.apellidoPaterno,onChange:_=>b({...I,apellidoPaterno:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Mendoza"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apellido Materno"}),r.jsx("input",{type:"text",value:I.apellidoMaterno,onChange:_=>b({...I,apellidoMaterno:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Garca"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Puesto"}),r.jsx("input",{type:"text",value:I.puesto,onChange:_=>b({...I,puesto:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Docente, Director, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Rol *"}),r.jsxs("select",{required:!0,value:I.rol,onChange:_=>b({...I,rol:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"alumno",children:"Alumno"}),r.jsx("option",{value:"superadmin",children:"Superadmin"})]})]}),I.rol!=="superadmin"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Escuela *"}),r.jsxs("select",{required:I.rol!=="superadmin",value:I.schoolId,onChange:_=>b({...I,schoolId:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"",children:"Selecciona una escuela"}),n.map(_=>r.jsxs("option",{value:_.id,children:[_.nombre," (",_.codigo,")"]},_.id))]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:I.activo,onChange:_=>b({...I,activo:_.target.checked}),className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Usuario activo"})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:y?"Guardar Cambios":"Crear Usuario"}),r.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-3 bg-slate-200 text-slate-700 rounded-xl font-medium hover:bg-slate-300 transition-colors",children:"Cancelar"})]})]})]})})]})},Sv=({directorSchoolId:t})=>{const[e,n]=M.useState("alumnos"),[s,a]=M.useState(t||""),[i,o]=M.useState([]),[l,c]=M.useState(null),[d,m]=M.useState(!1),[p,g]=M.useState(null),[x,y]=M.useState(!1);zc.useEffect(()=>{t||T()},[t]);const T=async()=>{try{const S=(await Re(ue(J,"schools"))).docs.map(C=>({id:C.id,nombre:C.data().nombre,codigo:C.data().codigo}));o(S)}catch(E){console.error("Error al cargar escuelas:",E)}},I=()=>{const E=["nombre","apellidoPaterno","apellidoMaterno","matricula","email","grado","grupo","telefono","fechaNacimiento"],S=["Juan,Prez,Garca,2024001,juan.perez@ejemplo.com,1,A,3481234567,2008-05-15","Mara,Lpez,Martnez,2024002,maria.lopez@ejemplo.com,2,B,3481234568,2007-08-20","Carlos,Snchez,Rodrguez,2024003,carlos.sanchez@ejemplo.com,3,A,3481234569,2006-03-10"],C=[E.join(","),...S].join(`
`);N(C,"plantilla_alumnos.csv")},b=()=>{const E=["nombre","apellidoPaterno","apellidoMaterno","email","puesto","telefono","materias","grados"],S=['Ana,Martnez,Lpez,ana.martinez@ejemplo.com,Docente,3481234570,"Matemticas;Fsica","1;2;3"','Pedro,Gonzlez,Hernndez,pedro.gonzalez@ejemplo.com,Director,3481234571,"Administracin",""','Laura,Ramrez,Torres,laura.ramirez@ejemplo.com,Docente,3481234572,"Espaol;Literatura","2;3"'],C=[E.join(","),...S].join(`
`);N(C,"plantilla_maestros.csv")},N=(E,S)=>{const C=new Blob([E],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a"),P=URL.createObjectURL(C);_.setAttribute("href",P),_.setAttribute("download",S),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_)},w=E=>{E.target.files&&E.target.files[0]&&(c(E.target.files[0]),g(null))},D=E=>E.split(`
`).filter(C=>C.trim()).map(C=>{const _=[];let P="",j=!1;for(let H=0;H<C.length;H++){const O=C[H];O==='"'?j=!j:O===","&&!j?(_.push(P.trim()),P=""):P+=O}return _.push(P.trim()),_}),V=async E=>{const S={success:0,errors:0,warnings:0,details:[]},C=E[0].map(P=>P.toLowerCase().trim()),_=E.slice(1);for(let P=0;P<_.length;P++){const j=_[P],H=P+2;try{const O={};if(C.forEach((Y,ne)=>{var de;O[Y]=((de=j[ne])==null?void 0:de.trim())||""}),!O.nombre||!O.apellidopaterno||!O.matricula){S.errors++,S.details.push({row:H,status:"error",message:"Faltan campos obligatorios (nombre, apellidoPaterno, matricula)",data:O});continue}const G=Ye(ue(J,"alumnos"),tt("matricula","==",O.matricula),tt("schoolId","==",s));if(!(await Re(G)).empty){S.warnings++,S.details.push({row:H,status:"warning",message:`Matrcula ${O.matricula} ya existe, se omiti`,data:O});continue}await es(ue(J,"alumnos"),{nombre:O.nombre,apellidoPaterno:O.apellidopaterno,apellidoMaterno:O.apellidomaterno||"",matricula:O.matricula,email:O.email||"",grado:parseInt(O.grado)||1,grupo:O.grupo||"A",telefono:O.telefono||"",fechaNacimiento:O.fechanacimiento||"",schoolId:s,activo:!0,createdAt:new Date().toISOString()}),S.success++,S.details.push({row:H,status:"success",message:`Alumno ${O.nombre} ${O.apellidopaterno} importado correctamente`,data:O})}catch(O){S.errors++,S.details.push({row:H,status:"error",message:`Error: ${O.message}`,data:j})}}return S},k=async E=>{const S={success:0,errors:0,warnings:0,details:[]},C=E[0].map(P=>P.toLowerCase().trim()),_=E.slice(1);for(let P=0;P<_.length;P++){const j=_[P],H=P+2;try{const O={};if(C.forEach((ye,Qe)=>{var Ge;O[ye]=((Ge=j[Qe])==null?void 0:Ge.trim())||""}),!O.nombre||!O.apellidopaterno||!O.email){S.errors++,S.details.push({row:H,status:"error",message:"Faltan campos obligatorios (nombre, apellidoPaterno, email)",data:O});continue}const G=Ye(ue(J,"users"),tt("email","==",O.email.toLowerCase()));if(!(await Re(G)).empty){S.warnings++,S.details.push({row:H,status:"warning",message:`Email ${O.email} ya existe, se omiti`,data:O});continue}const Y=O.materias?O.materias.split(";").map(ye=>ye.trim()).filter(Boolean):[],ne=O.grados?O.grados.split(";").map(ye=>parseInt(ye.trim())).filter(Boolean):[],de=i.find(ye=>ye.id===s);await es(ue(J,"users"),{email:O.email.toLowerCase(),nombre:O.nombre,apellidoPaterno:O.apellidopaterno,apellidoMaterno:O.apellidomaterno||"",rol:"maestro",schoolId:s,schoolName:(de==null?void 0:de.nombre)||"",puesto:O.puesto||"Docente",telefono:O.telefono||"",materias:Y,grados:ne,activo:!0,onboardingCompleto:!0,createdAt:new Date().toISOString()}),S.success++,S.details.push({row:H,status:"success",message:`Maestro ${O.nombre} ${O.apellidopaterno} importado correctamente`,data:O})}catch(O){S.errors++,S.details.push({row:H,status:"error",message:`Error: ${O.message}`,data:j})}}return S},R=async()=>{if(!l){alert("Por favor selecciona un archivo CSV");return}if(!s){alert("Por favor selecciona una escuela");return}m(!0),g(null);try{const E=await l.text(),S=D(E);if(S.length<2){alert("El archivo CSV est vaco o no tiene datos"),m(!1);return}let C;e==="alumnos"?C=await V(S):C=await k(S),g(C),y(!0)}catch(E){console.error("Error al importar:",E),alert(`Error al procesar el archivo: ${E.message}`)}finally{m(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Du,{className:"w-7 h-7 text-indigo-600"}),"Importacin Masiva CSV"]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Importa alumnos o maestros desde archivos CSV"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"1. Selecciona el Tipo de Importacin"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>n("alumnos"),className:`p-6 rounded-xl border-2 transition-all ${e==="alumnos"?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Ke,{className:`w-6 h-6 ${e==="alumnos"?"text-indigo-600":"text-slate-400"}`}),r.jsx("h4",{className:"font-bold text-slate-800",children:"Alumnos"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Importa lista de alumnos con matrcula, grado y grupo"})]}),r.jsxs("button",{onClick:()=>n("maestros"),className:`p-6 rounded-xl border-2 transition-all ${e==="maestros"?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ts,{className:`w-6 h-6 ${e==="maestros"?"text-indigo-600":"text-slate-400"}`}),r.jsx("h4",{className:"font-bold text-slate-800",children:"Maestros"})]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Importa lista de maestros con materias y grados"})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"2. Descarga la Plantilla CSV"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Descarga la plantilla de ejemplo y llnala con tus datos. Incluye ejemplos para guiarte."}),r.jsxs("button",{onClick:e==="alumnos"?I:b,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-xl font-medium hover:bg-green-700 transition-colors",children:[r.jsx(Uh,{className:"w-5 h-5"}),"Descargar Plantilla de ",e==="alumnos"?"Alumnos":"Maestros"]}),r.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-xl",children:[r.jsxs("h4",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[r.jsx(Ls,{className:"w-4 h-4"}),"Campos del CSV"]}),e==="alumnos"?r.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"nombre"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoPaterno"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoMaterno"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"matricula"})," (obligatorio, nico)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"email"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grado"})," (1-6)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grupo"})," (A, B, C, etc.)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"telefono"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"fechaNacimiento"})," (YYYY-MM-DD)"]})]}):r.jsxs("ul",{className:"text-sm text-slate-600 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"nombre"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoPaterno"})," (obligatorio)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"apellidoMaterno"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"email"})," (obligatorio, nico)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"puesto"})," (Docente, Coordinador, etc.)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"telefono"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"materias"})," (separadas por ;)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"grados"})," (separados por ;)"]})]})]})]}),!t&&r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"3. Selecciona la Escuela"}),r.jsxs("div",{className:"relative",children:[r.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:s,onChange:E=>a(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"",children:"Selecciona una escuela"}),i.map(E=>r.jsxs("option",{value:E.id,children:[E.nombre," (",E.codigo,")"]},E.id))]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"4. Sube tu Archivo CSV"}),r.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-indigo-400 transition-colors",children:[r.jsx("input",{type:"file",accept:".csv",onChange:w,className:"hidden",id:"csv-upload"}),r.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[r.jsx(Du,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l?r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-slate-800 mb-1",children:l.name}),r.jsx("p",{className:"text-sm text-slate-500",children:"Click para cambiar archivo"})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-slate-800 mb-1",children:"Click para seleccionar archivo CSV"}),r.jsx("p",{className:"text-sm text-slate-500",children:"o arrastra y suelta aqu"})]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:R,disabled:!l||!s||d,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Importando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Du,{className:"w-5 h-5"}),"Importar ",e==="alumnos"?"Alumnos":"Maestros"]})})}),x&&p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Resultado de Importacin"}),r.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Is,{className:"w-5 h-5 text-green-600"}),r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Exitosos"})]}),r.jsx("p",{className:"text-3xl font-bold text-green-900",children:p.success})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ya,{className:"w-5 h-5 text-amber-600"}),r.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Advertencias"})]}),r.jsx("p",{className:"text-3xl font-bold text-amber-900",children:p.warnings})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(km,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm font-medium text-red-600",children:"Errores"})]}),r.jsx("p",{className:"text-3xl font-bold text-red-900",children:p.errors})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"Detalles de Importacin"}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.details.map((E,S)=>r.jsx("div",{className:`p-3 rounded-lg border ${E.status==="success"?"bg-green-50 border-green-200":E.status==="warning"?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[E.status==="success"&&r.jsx(Is,{className:"w-4 h-4 text-green-600 mt-0.5"}),E.status==="warning"&&r.jsx(ya,{className:"w-4 h-4 text-amber-600 mt-0.5"}),E.status==="error"&&r.jsx(km,{className:"w-4 h-4 text-red-600 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"text-sm font-medium text-slate-800",children:["Fila ",E.row,": ",E.message]})})]})},S))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors",children:"Cerrar"})})]})]})})]})},Zq=()=>{const{user:t}=dt(),[e,n]=M.useState([]),[s,a]=M.useState(!1),[i,o]=M.useState(""),[l,c]=M.useState(!1),[d,m]=M.useState(!1),[p,g]=M.useState(null),[x,y]=M.useState([]),[T,I]=M.useState(""),[b,N]=M.useState({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"});M.useEffect(()=>{w()},[]),M.useEffect(()=>{T?D():n([])},[T]);const w=async()=>{try{const _=(await Re(ue(J,"schools"))).docs.map(P=>({id:P.id,...P.data()}));y(_.sort((P,j)=>P.nombre.localeCompare(j.nombre)))}catch(C){console.error("Error loading schools:",C)}},D=async()=>{if(T){a(!0);try{const C=Ye(ue(J,"alumnos"),tt("schoolId","==",T)),P=(await Re(C)).docs.map(j=>({id:j.id,...j.data()}));P.sort((j,H)=>{const O=j.grado||"0",G=H.grado||"0";if(O!==G)return O.localeCompare(G);const te=j.grupo||"A",Y=H.grupo||"A";if(te!==Y)return te.localeCompare(Y);const ne=j.apellidoPaterno||j.lastName||"",de=H.apellidoPaterno||H.lastName||"";return ne.localeCompare(de)}),n(P)}catch(C){console.error("Error loading students:",C)}finally{a(!1)}}},V=C=>{C?(g(C),N({nombre:C.nombre||C.firstName||"",apellidoPaterno:C.apellidoPaterno||C.lastName||"",apellidoMaterno:C.apellidoMaterno||"",curp:C.curp||"",matricula:C.matricula||"",email:C.email||"",grado:C.grado||"",grupo:C.grupo||"",turno:C.turno||"Matutino"})):(g(null),N({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"})),c(!0)},k=async()=>{if(T){if(!b.nombre||!b.grado||!b.grupo){alert("Por favor completa Nombre, Grado y Grupo.");return}try{const C=x.find(P=>P.id===T),_={...b,firstName:b.nombre,lastName:`${b.apellidoPaterno} ${b.apellidoMaterno||""}`.trim(),schoolId:T,schoolName:(C==null?void 0:C.nombre)||"",updatedAt:new Date().toISOString()};if(p!=null&&p.id)await vt(re(J,"alumnos",p.id),_),n(P=>P.map(j=>j.id===p.id?{...j,..._}:j));else{const P=await es(ue(J,"alumnos"),{..._,createdAt:new Date().toISOString()});n(j=>[...j,{id:P.id,..._}])}c(!1)}catch(C){console.error("Error saving student:",C),alert("Error al guardar alumno.")}}},R=async(C,_)=>{if(confirm(`Ests seguro de eliminar al alumno ${_}?`))try{await xs(re(J,"alumnos",C)),n(P=>P.filter(j=>j.id!==C))}catch(P){console.error("Error deleting:",P)}},E=async()=>{if(e.length!==0&&confirm(` ZONA DE PELIGRO 

Ests a punto de ELIMINAR PERMANENTEMENTE a todos los ${e.length} alumnos registrados en esta escuela.

Ests absolutamente seguro?`)){a(!0);try{const C=e.map(_=>xs(re(J,"alumnos",_.id)));await Promise.all(C),n([]),alert(" Se han eliminado todos los alumnos de la escuela.")}catch(C){console.error("Error al borrar todo:",C),alert("Ocurri un error al intentar borrar los registros.")}finally{a(!1)}}},S=e.filter(C=>{const _=i.toLowerCase(),P=`${C.nombre||C.firstName||""} ${C.apellidoPaterno||C.lastName||""} ${C.apellidoMaterno||""}`.toLowerCase(),j=C.curp?C.curp.toLowerCase().includes(_):!1,H=C.matricula?C.matricula.toLowerCase().includes(_):!1,O=C.grupo?C.grupo.toLowerCase().includes(_):!1;return P.includes(_)||j||H||O});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-7 h-7 text-indigo-600"}),"Gestin Global de Alumnos"]}),r.jsx("p",{className:"text-slate-600",children:"Administra los alumnos de cualquier escuela registrada"})]}),r.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex items-center gap-2 min-w-[300px]",children:[r.jsx(wt,{className:"w-5 h-5 text-slate-400 ml-2"}),r.jsxs("select",{value:T,onChange:C=>I(C.target.value),className:"w-full p-2 bg-transparent border-none focus:ring-0 text-slate-700 font-medium",children:[r.jsx("option",{value:"",children:"-- Selecciona una Escuela --"}),x.map(C=>r.jsx("option",{value:C.id,children:C.nombre},C.id))]})]})]}),T?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[r.jsxs("div",{className:"flex-1 relative max-w-md",children:[r.jsx(Fs,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar alumno...",value:i,onChange:C=>o(C.target.value)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>m(!0),className:"text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-50 border border-slate-200 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-4 h-4"}),"Importar"]}),e.length>0&&r.jsxs("button",{onClick:E,className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold border border-red-100 hover:bg-red-100 flex items-center gap-2",children:[r.jsx(ns,{className:"w-4 h-4"}),"Borrar Todos"]}),r.jsxs("button",{onClick:()=>V(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-2",children:[r.jsx(On,{className:"w-4 h-4"}),"Nuevo"]})]})]}),s?r.jsx("div",{className:"py-12 flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600 text-xs uppercase font-bold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Alumno"}),r.jsx("th",{className:"p-4",children:"Matrcula"}),r.jsx("th",{className:"p-4",children:"Grado/Grupo"}),r.jsx("th",{className:"p-4 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:S.length>0?S.map(C=>r.jsxs("tr",{className:"hover:bg-slate-50",children:[r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-bold text-slate-900",children:[C.nombre||C.firstName," ",C.apellidoPaterno||C.lastName," ",C.apellidoMaterno]}),r.jsx("div",{className:"text-xs text-slate-500",children:C.email})]}),r.jsx("td",{className:"p-4 text-sm font-mono",children:C.matricula||"---"}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-bold",children:[C.grado,' "',C.grupo,'"']})}),r.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>V(C),className:"p-1 text-slate-400 hover:text-indigo-600",children:r.jsx(pd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>R(C.id,C.nombre||""),className:"p-1 text-slate-400 hover:text-red-600",children:r.jsx(ns,{className:"w-4 h-4"})})]})]},C.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No hay alumnos en esta escuela."})})})]})})]}):r.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-12 text-center",children:[r.jsx("div",{className:"bg-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:r.jsx(wt,{className:"w-8 h-8 text-indigo-500"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Selecciona una escuela para comenzar"}),r.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"Para gestionar los alumnos (ver, editar, agregar o importar), primero debes seleccionar la escuela a la que pertenecen."})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b flex justify-between items-center sticky top-0 bg-white",children:[r.jsxs("h3",{className:"text-xl font-bold",children:[p?"Editar":"Nuevo"," Alumno"]}),r.jsx("button",{onClick:()=>c(!1),children:r.jsx(ss,{className:"w-6 h-6 text-slate-400"})})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Nombre",value:b.nombre,onChange:C=>N({...b,nombre:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Apellido Paterno",value:b.apellidoPaterno,onChange:C=>N({...b,apellidoPaterno:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Apellido Materno",value:b.apellidoMaterno,onChange:C=>N({...b,apellidoMaterno:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Matrcula",value:b.matricula,onChange:C=>N({...b,matricula:C.target.value})}),r.jsx("input",{className:"p-3 border rounded-lg",placeholder:"Email",value:b.email,onChange:C=>N({...b,email:C.target.value})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:"p-3 border rounded-lg w-1/2",value:b.grado,onChange:C=>N({...b,grado:C.target.value}),children:[r.jsx("option",{value:"",children:"Grado"}),[1,2,3,4,5,6].map(C=>r.jsxs("option",{value:C,children:[C,""]},C))]}),r.jsx("input",{className:"p-3 border rounded-lg w-1/2",placeholder:"Grupo",value:b.grupo,onChange:C=>N({...b,grupo:C.target.value.toUpperCase()}),maxLength:2})]})]}),r.jsxs("div",{className:"p-6 border-t flex justify-end gap-3 rounded-b-2xl bg-slate-50",children:[r.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg",children:"Cancelar"}),r.jsx("button",{onClick:k,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold",children:"Guardar"})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Importacin Masiva"}),r.jsx("button",{onClick:()=>{m(!1),D()},children:r.jsx(ss,{className:"w-6 h-6 text-slate-400"})})]}),r.jsx("div",{className:"p-8",children:r.jsx(Sv,{directorSchoolId:T})})]})})]})},eH=()=>{const t=bs(),{logout:e,user:n}=dt(),[s,a]=M.useState("overview"),i=async()=>{try{await e(),t("/login")}catch(l){console.error("Error al cerrar sesin:",l)}},o=[{id:"overview",label:"Vista General",icon:wI},{id:"schools",label:"Escuelas",icon:wt},{id:"users",label:"Usuarios",icon:Ke},{id:"students",label:"Alumnos",icon:ts},{id:"data",label:"Base de Datos",icon:VE},{id:"import",label:"Importar CSV",icon:Du}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(ts,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"EduPlan MX"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[n&&r.jsxs("div",{className:"text-right mr-4",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[n.nombre," ",n.apellidoPaterno]}),r.jsx("p",{className:"text-xs text-slate-500",children:n.email})]}),r.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors font-medium",title:"Cerrar sesin",children:[r.jsx(Oh,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Cerrar Sesin"})]})]})]})})}),r.jsx("div",{className:"bg-white border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-8",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto",children:o.map(l=>{const c=l.icon,d=s===l.id;return r.jsxs("button",{onClick:()=>a(l.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${d?"border-indigo-600 text-indigo-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:[r.jsx(c,{className:"w-5 h-5"}),l.label]},l.id)})})})}),r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[s==="overview"&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Dashboard Super Admin"}),r.jsx("p",{className:"text-slate-600 mb-8",children:"Vista general del sistema EduPlan MX"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.slice(1).map(l=>{const c=l.icon;return r.jsxs("button",{onClick:()=>a(l.id),className:"bg-white p-6 rounded-2xl border border-slate-200 hover:border-indigo-300 hover:shadow-lg transition-all text-left group",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:r.jsx(c,{className:"w-6 h-6 text-indigo-600"})})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-1",children:l.label}),r.jsxs("p",{className:"text-sm text-slate-500",children:[l.id==="schools"&&"Administra todas las escuelas del sistema",l.id==="users"&&"Gestiona usuarios y sus roles",l.id==="data"&&"Consulta y exporta datos",l.id==="import"&&"Importa datos masivos desde CSV"]})]},l.id)})}),r.jsxs("div",{className:"mt-8 bg-indigo-50 border border-indigo-200 rounded-2xl p-6",children:[r.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:" Panel de Administracin Completo"}),r.jsx("p",{className:"text-indigo-800 text-sm",children:"Desde aqu puedes administrar todo el sistema EduPlan MX. Selecciona una seccin del men superior para comenzar."})]})]}),s==="schools"&&r.jsx(Xq,{}),s==="users"&&r.jsx(Wq,{}),s==="students"&&r.jsx(Zq,{}),s==="data"&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx(VE,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Base de Datos"}),r.jsx("p",{className:"text-slate-600",children:"En desarrollo... (Fase 4)"})]}),s==="import"&&r.jsx(Sv,{})]})})]})},tH={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600"},ou=({title:t,value:e,icon:n,color:s,subtitle:a})=>r.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-3 rounded-xl ${tH[s]}`,children:r.jsx(n,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-3xl font-bold text-slate-800",children:e}),r.jsx("div",{className:"text-sm text-slate-600 font-medium",children:t}),a&&r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:a})]})]})}),nH=()=>{var w,D,V,k,R;const t=bs(),{user:e,logout:n}=dt(),[s,a]=M.useState({maestros:0,alumnos:0,planeaciones:0,grupos:0}),[i,o]=M.useState("general"),[l,c]=M.useState(!0),[d,m]=M.useState(!1),[p,g]=M.useState(null);M.useEffect(()=>{e!=null&&e.schoolId&&x()},[e==null?void 0:e.schoolId]);const x=async()=>{if(e!=null&&e.schoolId)try{c(!0);const E=Ye(ue(J,"users"),tt("schoolId","==",e.schoolId),tt("rol","==","maestro")),S=await Re(E),C=Ye(ue(J,"alumnos"),tt("schoolId","==",e.schoolId)),_=await Re(C),P=Ye(ue(J,"planeaciones"),tt("schoolId","==",e.schoolId)),j=await Re(P),H=new Set;_.docs.forEach(O=>{const G=O.data();G.grado&&G.grupo&&H.add(`${G.grado}-${G.grupo}`)}),a({maestros:S.size,alumnos:_.size,planeaciones:j.size,grupos:H.size})}catch(E){console.error("Error al cargar estadsticas:",E)}finally{c(!1)}},y=async()=>{try{await n(),t("/login")}catch(E){console.error("Error al cerrar sesin:",E)}},T=async()=>{try{const E=Ye(ue(J,"alumnos"),ro(1)),S=await Re(E);S.empty?g({message:"No students found at all in DB"}):g({id:S.docs[0].id,data:S.docs[0].data(),mySchoolId:e==null?void 0:e.schoolId,match:S.docs[0].data().schoolId===(e==null?void 0:e.schoolId)?"YES":"NO"})}catch(E){console.error(E),g({error:JSON.stringify(E)})}},[I,b]=M.useState(""),N=async()=>{if(!(!(e!=null&&e.schoolId)||!(e!=null&&e.schoolName))&&confirm(` ACCIN CRTICA 

Ests seguro de asignar TODOS los alumnos existentes en la base de datos a TU escuela actual?

Escuela: ${e.schoolName}
ID: ${e.schoolId}

Esto mover a todos los alumnos hurfanos a tu panel. Solo haz esto si ests seguro de que, en este sistema, T eres la nica escuela activa.`)){b(" Migrando alumnos, por favor espera...");try{const E=Ye(ue(J,"alumnos")),S=await Re(E);let C=0;const _=S.docs.map(async P=>{if(P.data().schoolId!==e.schoolId)return C++,vt(re(J,"alumnos",P.id),{schoolId:e.schoolId,schoolName:e.schoolName})});await Promise.all(_),b(` xito! Se han asociado ${C} alumnos a tu escuela.`),x(),T()}catch(E){console.error(E),b(` Error migrando: ${E}`)}}};return l?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando informacin de tu escuela..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(Dm,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:(e==null?void 0:e.schoolName)||"Mi Escuela"}),r.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Panel Directivo"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"hidden md:block text-right mr-2",children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[e==null?void 0:e.nombre," ",e==null?void 0:e.apellidoPaterno]}),r.jsx("p",{className:"text-xs text-slate-500",children:e==null?void 0:e.email})]}),r.jsx("button",{onClick:()=>{m(!d),T()},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Diagnstico de Datos",children:r.jsx(DE,{className:"w-5 h-5"})}),r.jsx("button",{onClick:y,className:"p-2 text-slate-400 hover:text-red-500 transition-colors rounded-lg hover:bg-red-50",title:"Cerrar sesin",children:r.jsx(Oh,{className:"w-5 h-5"})})]})]})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"flex border-b border-slate-200 mb-8 overflow-x-auto",children:[r.jsx("button",{onClick:()=>o("general"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="general"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Vista General"}),r.jsx("button",{onClick:()=>o("pmc"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="pmc"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Diagnstico (PMC)"}),r.jsx("button",{onClick:()=>o("paec"),className:`px-6 py-3 font-medium text-sm transition-colors border-b-2 whitespace-nowrap ${i==="paec"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Programa Aula Escuela Comunidad (PAEC)"})]}),i==="general"&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(ou,{title:"Maestros",value:s.maestros,icon:ts,color:"blue",subtitle:"Docentes registrados"}),r.jsx(ou,{title:"Alumnos",value:s.alumnos,icon:Ke,color:"green",subtitle:"Estudiantes activos"}),r.jsx(ou,{title:"Planeaciones",value:s.planeaciones,icon:Ls,color:"purple",subtitle:"Documentos creados"}),r.jsx(ou,{title:"Grupos",value:s.grupos,icon:Ke,color:"orange",subtitle:"Grupos activos"})]}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Gestin Escolar"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("button",{onClick:()=>t("/directivo/maestros"),className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(ts,{className:"w-6 h-6 text-blue-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Maestros"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Administrar plantilla docente y asignaciones"})]}),r.jsxs("button",{onClick:()=>t("/directivo/alumnos"),className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-green-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(Ke,{className:"w-6 h-6 text-green-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Alumnos"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Lista de estudiantes y grupos"})]}),r.jsxs("button",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-left group",children:[r.jsx("div",{className:"bg-purple-50 w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(ms,{className:"w-6 h-6 text-purple-600"})}),r.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-1",children:"Reportes"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Estadsticas de aprovechamiento y entregas"})]})]})]}),i==="pmc"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsx(V1,{})}),i==="paec"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsx(U1,{})}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-2xl p-6 flex items-start gap-4",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-full flex-shrink-0",children:r.jsx(Vh,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-blue-900 font-bold mb-1",children:"Panel de Director Activo"}),r.jsxs("p",{className:"text-blue-700 text-sm",children:["Bienvenido al panel de direccin. Desde aqu podrs gestionar toda la informacin de",r.jsxs("span",{className:"font-semibold",children:[" ",e==null?void 0:e.schoolName]}),". Prximamente se habilitarn ms funciones de reportes avanzados."]})]})]})]}),r.jsx("button",{onClick:()=>{m(!d),T()},className:"fixed bottom-4 right-4 bg-slate-800 text-white p-3 rounded-full shadow-lg hover:bg-slate-700 transition-colors z-50 origin-center hover:scale-110",title:"Herramienta de Diagnstico",children:r.jsx(DE,{className:"w-5 h-5"})}),d&&r.jsxs("div",{className:"fixed bottom-20 right-4 bg-white p-6 shadow-2xl border border-slate-200 rounded-2xl max-w-md z-50 text-xs font-mono overflow-auto max-h-[80vh] w-full animate-in slide-in-from-bottom-5",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[r.jsx("h4",{className:"font-bold text-sm text-slate-800",children:"Diagnstico de Datos"}),r.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-red-500",children:"cerrar"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[r.jsx("h5",{className:"font-bold text-slate-600 mb-1",children:"Mi Usuario (Director)"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nombre:"})," ",e==null?void 0:e.nombre]}),r.jsxs("p",{children:[r.jsx("strong",{children:"School Name:"})," ",e==null?void 0:e.schoolName]}),r.jsxs("p",{className:"text-blue-600 break-all",children:[r.jsx("strong",{children:"School ID (Firestore):"})," ",e==null?void 0:e.schoolId]})]}),r.jsxs("div",{className:"bg-slate-50 p-3 rounded border",children:[r.jsx("h5",{className:"font-bold text-slate-600 mb-1",children:"Estadsticas Actuales"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Alumnos (filtrados por ID):"})," ",s.alumnos]})]}),p&&r.jsxs("div",{className:"bg-indigo-50 p-3 rounded border border-indigo-100",children:[r.jsx("h5",{className:"font-bold text-indigo-800 mb-1",children:"Muestra de Alumno (Cualquiera en DB)"}),p.message?r.jsx("p",{children:p.message}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"ID Alumno:"})," ",p.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nombre:"})," ",((w=p.data)==null?void 0:w.nombre)||((D=p.data)==null?void 0:D.firstName)," ",((V=p.data)==null?void 0:V.apellidoPaterno)||((k=p.data)==null?void 0:k.lastName)]}),r.jsxs("p",{className:"text-red-600 break-all text-xs",children:[r.jsx("strong",{children:"School ID Actual:"})," ",(R=p.data)==null?void 0:R.schoolId]}),r.jsxs("div",{className:`mt-2 p-2 rounded text-center font-bold text-white text-xs ${p.match==="YES"?"bg-green-500":"bg-red-500"}`,children:["Coincide ID? ",p.match]})]})]}),r.jsx("div",{className:"text-slate-500 italic text-[10px] mt-2",children:"*Si el ID no coincide, contacta a soporte para migracin de datos."}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[r.jsx("h5",{className:"font-bold text-red-600 mb-2",children:" Zona de Peligro / Reparacin"}),r.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Si ves 0 alumnos pero sabes que existen, usa este botn para adoptarlos a tu escuela."}),I&&r.jsx("div",{className:`mb-3 p-2 rounded text-xs font-bold ${I.includes("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:I}),r.jsxs("button",{onClick:N,className:"w-full bg-red-50 text-red-600 border border-red-200 py-2 rounded font-bold hover:bg-red-100 transition-colors",children:[" Asociar TODOS los alumnos a M (",e==null?void 0:e.schoolName,")"]})]})]})]})]})},sH=()=>{const t=bs(),{user:e}=dt(),[n,s]=M.useState([]),[a,i]=M.useState(!0),[o,l]=M.useState(""),[c,d]=M.useState(!1),[m,p]=M.useState(!1),[g,x]=M.useState(null),[y,T]=M.useState({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"});M.useEffect(()=>{e!=null&&e.schoolId&&I()},[e==null?void 0:e.schoolId]);const I=async()=>{if(e!=null&&e.schoolId){i(!0);try{const k=Ye(ue(J,"alumnos"),tt("schoolId","==",e.schoolId)),E=(await Re(k)).docs.map(S=>({id:S.id,...S.data()}));E.sort((S,C)=>{const _=S.grado||"0",P=C.grado||"0";if(_!==P)return _.localeCompare(P);const j=S.grupo||"A",H=C.grupo||"A";if(j!==H)return j.localeCompare(H);const O=S.apellidoPaterno||S.lastName||"",G=C.apellidoPaterno||C.lastName||"";return O.localeCompare(G)}),s(E)}catch(k){console.error("Error loading students:",k)}finally{i(!1)}}},b=k=>{k?(x(k),T({nombre:k.nombre||k.firstName||"",apellidoPaterno:k.apellidoPaterno||k.lastName||"",apellidoMaterno:k.apellidoMaterno||"",curp:k.curp||"",matricula:k.matricula||"",email:k.email||"",grado:k.grado||"",grupo:k.grupo||"",turno:k.turno||"Matutino"})):(x(null),T({nombre:"",apellidoPaterno:"",apellidoMaterno:"",curp:"",matricula:"",email:"",grado:"",grupo:"",turno:"Matutino"})),d(!0)},N=async()=>{if(e!=null&&e.schoolId){if(!y.nombre||!y.grado||!y.grupo){alert("Por favor completa Nombre, Grado y Grupo.");return}try{const k={...y,firstName:y.nombre,lastName:`${y.apellidoPaterno} ${y.apellidoMaterno||""}`.trim(),schoolId:e.schoolId,schoolName:e.schoolName,updatedAt:new Date().toISOString()};if(g!=null&&g.id)await vt(re(J,"alumnos",g.id),k),s(R=>R.map(E=>E.id===g.id?{...E,...k}:E));else{const R=await es(ue(J,"alumnos"),{...k,createdAt:new Date().toISOString()});s(E=>[...E,{id:R.id,...k}])}d(!1)}catch(k){console.error("Error saving student:",k),alert("Error al guardar alumno.")}}},w=async(k,R)=>{if(confirm(`Ests seguro de eliminar al alumno ${R}?`))try{await xs(re(J,"alumnos",k)),s(E=>E.filter(S=>S.id!==k))}catch(E){console.error("Error deleting:",E)}},D=async()=>{if(n.length!==0&&confirm(` ZONA DE PELIGRO 

Ests a punto de ELIMINAR PERMANENTEMENTE a todos los ${n.length} alumnos registrados en esta escuela.

Ests absolutamente seguro?`)&&confirm(`LTIMA ADVERTENCIA:

Esta accin NO se puede deshacer. Se borrarn todos los datos, calificaciones y asistencias asociadas a estos alumnos.

Proceder con la eliminacin total?`)){i(!0);try{const k=n.map(R=>xs(re(J,"alumnos",R.id)));await Promise.all(k),s([]),alert(" Se han eliminado todos los alumnos de la escuela.")}catch(k){console.error("Error al borrar todo:",k),alert("Ocurri un error al intentar borrar los registros.")}finally{i(!1)}}},V=n.filter(k=>{const R=o.toLowerCase(),E=`${k.nombre||k.firstName||""} ${k.apellidoPaterno||k.lastName||""} ${k.apellidoMaterno||""}`.toLowerCase(),S=k.curp?k.curp.toLowerCase().includes(R):!1,C=k.matricula?k.matricula.toLowerCase().includes(R):!1,_=k.email?k.email.toLowerCase().includes(R):!1,P=k.grupo?k.grupo.toLowerCase().includes(R):!1;return E.includes(R)||S||C||_||P});return r.jsxs("div",{className:"min-h-screen bg-slate-50",children:[r.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/directivo/dashboard"),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(fd,{className:"w-5 h-5 text-slate-500"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(Ke,{className:"w-6 h-6 text-indigo-600"}),"Gestin de Alumnos"]}),r.jsxs("p",{className:"text-sm text-slate-500",children:[n.length," estudiantes registrados en ",e==null?void 0:e.schoolName]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>p(!0),className:"text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-100 flex items-center gap-2 border border-slate-200",children:[r.jsx(Ke,{className:"w-4 h-4"}),"Importar Excel/CSV"]}),n.length>0&&r.jsxs("button",{onClick:D,className:"text-red-500 hover:text-red-700 px-4 py-2 rounded-lg font-bold hover:bg-red-50 flex items-center gap-2 border border-transparent hover:border-red-100 transition-all",title:"Eliminar a todos los alumnos mostrados",children:[r.jsx(ns,{className:"w-4 h-4"}),"Borrar Todos"]}),r.jsxs("button",{onClick:()=>b(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-indigo-700 flex items-center gap-2 shadow-sm shadow-indigo-200",children:[r.jsx(On,{className:"w-4 h-4"}),"Nuevo Alumno"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-6 flex gap-4",children:r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Fs,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Buscar por nombre, matrcula, CURP...",value:o,onChange:k=>l(k.target.value)})]})}),a?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 text-slate-600 text-xs font-bold uppercase tracking-wider",children:[r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Alumno"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Matrcula / CURP"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Grado/Grupo"}),r.jsx("th",{className:"p-4 border-b border-slate-200",children:"Turno"}),r.jsx("th",{className:"p-4 border-b border-slate-200 text-right",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:V.length>0?V.map(k=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-bold text-slate-900",children:[k.nombre||k.firstName," ",k.apellidoPaterno||k.lastName," ",k.apellidoMaterno||""]}),r.jsx("div",{className:"text-xs text-slate-500",children:k.email})]}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"text-sm font-mono text-slate-800",children:k.matricula||"S/M"}),r.jsx("div",{className:"text-xs text-slate-400",children:k.curp||""})]}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[k.grado||"?",' "',k.grupo||"?",'"']})}),r.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.turno||"N/A"}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>b(k),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"Editar",children:r.jsx(pd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>w(k.id,`${k.nombre||k.firstName} ${k.apellidoPaterno||k.lastName}`),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})})]},k.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No se encontraron alumnos."})})})]})}),r.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 text-xs text-slate-500 flex justify-between",children:r.jsxs("span",{children:["Mostrando ",V.length," de ",n.length," registros"]})})]})]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:g?"Editar Alumno":"Registrar Nuevo Alumno"}),r.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600",children:r.jsx(ss,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Nombre(s) *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.nombre,onChange:k=>T({...y,nombre:k.target.value}),placeholder:"Ej. Juan Pablo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Apellido Paterno *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.apellidoPaterno,onChange:k=>T({...y,apellidoPaterno:k.target.value}),placeholder:"Ej. Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Apellido Materno"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.apellidoMaterno,onChange:k=>T({...y,apellidoMaterno:k.target.value}),placeholder:"Ej. Lpez"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Matrcula"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.matricula,onChange:k=>T({...y,matricula:k.target.value}),placeholder:"Opcional"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"CURP"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 uppercase",value:y.curp,onChange:k=>T({...y,curp:k.target.value.toUpperCase()}),placeholder:"Opcional",maxLength:18})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Correo Electrnico"}),r.jsx("input",{type:"email",className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500",value:y.email,onChange:k=>T({...y,email:k.target.value}),placeholder:"ejemplo@escuela.mx"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Grado *"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl bg-white",value:y.grado,onChange:k=>T({...y,grado:k.target.value}),children:[r.jsx("option",{value:"",children:"Selecciona"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"6",children:"6"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Grupo *"}),r.jsx("input",{type:"text",className:"w-full p-3 border border-slate-200 rounded-xl uppercase text-center",value:y.grupo,onChange:k=>T({...y,grupo:k.target.value.toUpperCase()}),placeholder:"A",maxLength:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Turno"}),r.jsxs("select",{className:"w-full p-3 border border-slate-200 rounded-xl bg-white",value:y.turno,onChange:k=>T({...y,turno:k.target.value}),children:[r.jsx("option",{value:"Matutino",children:"Matutino"}),r.jsx("option",{value:"Vespertino",children:"Vespertino"}),r.jsx("option",{value:"Completo",children:"Completo"}),r.jsx("option",{value:"",children:"N/A"})]})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3 bg-slate-50 rounded-b-2xl",children:[r.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"Cancelar"}),r.jsxs("button",{onClick:N,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-colors flex items-center gap-2",children:[r.jsx(Ii,{className:"w-4 h-4"}),"Guardar Alumno"]})]})]})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Importacin Masiva de Alumnos"}),r.jsx("button",{onClick:()=>{p(!1),I()},className:"text-slate-400 hover:text-slate-600",children:r.jsx(ss,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"p-8",children:r.jsx(Sv,{directorSchoolId:e==null?void 0:e.schoolId})})]})})]})},Pa="usuarios";class aH{async obtenerTodos(){try{const e=ue(J,Pa),n=Ye(e,Ds("fechaCreacion","desc"));return(await Re(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error al obtener usuarios:",e),new Error("Error al obtener usuarios")}}async obtenerPorRol(e){try{const n=ue(J,Pa),s=Ye(n,tt("rol","==",e),Ds("fechaCreacion","desc"));return(await Re(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener usuarios por rol:",n),new Error("Error al obtener usuarios por rol")}}async obtenerPorInstitucion(e){try{const n=ue(J,Pa),s=Ye(n,tt("institucionId","==",e),Ds("fechaCreacion","desc"));return(await Re(s)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener usuarios por institucin:",n),new Error("Error al obtener usuarios por institucin")}}async obtenerPorId(e){try{const n=await kn(re(J,Pa,e));return n.exists()?{id:n.id,...n.data()}:null}catch(n){throw console.error("Error al obtener usuario:",n),new Error("Error al obtener usuario")}}async cambiarRol(e,n){try{await vt(re(J,Pa,e),{rol:n})}catch(s){throw console.error("Error al cambiar rol:",s),new Error("Error al cambiar rol")}}async actualizar(e,n){try{await vt(re(J,Pa,e),n)}catch(s){throw console.error("Error al actualizar usuario:",s),new Error("Error al actualizar usuario")}}async cambiarEstado(e,n){try{await vt(re(J,Pa,e),{activo:n})}catch(s){throw console.error("Error al cambiar estado:",s),new Error("Error al cambiar estado")}}async eliminar(e){try{await xs(re(J,Pa,e))}catch(n){throw console.error("Error al eliminar usuario:",n),new Error("Error al eliminar usuario")}}async obtenerEstadisticas(){try{const e=await this.obtenerTodos();return{total:e.length,activos:e.filter(n=>n.activo).length,inactivos:e.filter(n=>!n.activo).length,porRol:{superadmin:e.filter(n=>n.rol==="superadmin").length,directivo:e.filter(n=>n.rol==="directivo").length,maestro:e.filter(n=>n.rol==="maestro").length,alumno:e.filter(n=>n.rol==="alumno").length}}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("Error al obtener estadsticas")}}}const Oc=new aH,iH=({usuario:t,onCerrar:e,onCambiado:n})=>{var d;const[s,a]=M.useState(t.rol),[i,o]=M.useState(!1),l=[{value:"superadmin",label:"Super Administrador",description:"Control total del sistema",color:"border-red-300 bg-red-50"},{value:"directivo",label:"Directivo",description:"Gestin de institucin",color:"border-blue-300 bg-blue-50"},{value:"maestro",label:"Maestro",description:"Gestin de grupos y alumnos",color:"border-green-300 bg-green-50"},{value:"alumno",label:"Alumno",description:"Acceso a su perfil",color:"border-purple-300 bg-purple-50"}],c=async()=>{var p;if(s===t.rol){e();return}if(window.confirm(`Ests seguro de cambiar el rol de ${t.nombre} ${t.apellidoPaterno} a ${(p=l.find(g=>g.value===s))==null?void 0:p.label}?`))try{o(!0),await Oc.cambiarRol(t.id,s),n()}catch(g){console.error("Error al cambiar rol:",g),alert("Error al cambiar rol")}finally{o(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Gh,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Cambiar Rol"}),r.jsxs("p",{className:"text-sm text-slate-600",children:[t.nombre," ",t.apellidoPaterno]})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6 text-slate-600"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3",children:[r.jsx(ya,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Importante:"}),r.jsx("p",{children:"Cambiar el rol afectar los permisos y el acceso del usuario al sistema."})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol Actual"}),r.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:r.jsx("span",{className:"text-lg font-semibold text-slate-900",children:(d=l.find(m=>m.value===t.rol))==null?void 0:d.label})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Nuevo Rol"}),r.jsx("div",{className:"space-y-3",children:l.map(m=>r.jsx("button",{onClick:()=>a(m.value),className:`w-full p-4 border-2 rounded-xl text-left transition-all ${s===m.value?`${m.color} border-opacity-100`:"border-slate-200 bg-white hover:bg-slate-50"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:m.label}),r.jsx("div",{className:"text-sm text-slate-600",children:m.description})]}),s===m.value&&r.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},m.value))})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[r.jsx("button",{onClick:e,disabled:i,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancelar"}),r.jsx("button",{onClick:c,disabled:i||s===t.rol,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando..."]}):"Cambiar Rol"})]})]})})},rH=({usuarios:t,onEditar:e,onActualizar:n,currentUserId:s})=>{const[a,i]=M.useState(null),[o,l]=M.useState(null),c=y=>({superadmin:"bg-red-100 text-red-800 border-red-200",directivo:"bg-blue-100 text-blue-800 border-blue-200",maestro:"bg-green-100 text-green-800 border-green-200",alumno:"bg-purple-100 text-purple-800 border-purple-200"})[y]||"bg-gray-100 text-gray-800 border-gray-200",d=y=>({superadmin:"Super Admin",directivo:"Directivo",maestro:"Maestro",alumno:"Alumno"})[y]||y,m=async y=>{if(y.id===s){alert("No puedes desactivar tu propia cuenta");return}if(window.confirm(`Ests seguro de ${y.activo?"desactivar":"activar"} a ${y.nombre} ${y.apellidoPaterno}?`))try{l(y.id),await Oc.cambiarEstado(y.id,!y.activo),n()}catch(I){console.error("Error al cambiar estado:",I),alert("Error al cambiar estado del usuario")}finally{l(null)}},p=async y=>{if(y.id===s){alert("No puedes eliminar tu propia cuenta");return}if(window.confirm(`Ests seguro de eliminar a ${y.nombre} ${y.apellidoPaterno}?

Esta accin no se puede deshacer.`))try{l(y.id),await Oc.eliminar(y.id),n()}catch(I){console.error("Error al eliminar usuario:",I),alert("Error al eliminar usuario")}finally{l(null)}},g=y=>{if(y.id===s){alert("No puedes cambiar tu propio rol");return}i(y)},x=()=>{i(null),n()};return t.length===0?r.jsx("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:r.jsx("p",{className:"text-slate-600",children:"No se encontraron usuarios"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"ltimo Acceso"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:[y.nombre.charAt(0),y.apellidoPaterno.charAt(0)]}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-slate-900",children:[y.nombre," ",y.apellidoPaterno]}),y.id===s&&r.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"(T)"})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:y.email}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("button",{onClick:()=>g(y),disabled:y.id===s||o===y.id,className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${c(y.rol)} hover:opacity-80 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed`,children:[r.jsx(Gh,{className:"w-3 h-3"}),d(y.rol)]})}),r.jsx("td",{className:"px-6 py-4",children:y.activo?r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:[r.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Activo"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold",children:[r.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full"}),"Inactivo"]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(y.ultimoAcceso).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>e(y),disabled:o===y.id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Editar",children:r.jsx(RI,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>m(y),disabled:y.id===s||o===y.id,className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors disabled:opacity-50",title:y.activo?"Desactivar":"Activar",children:y.activo?r.jsx(vO,{className:"w-4 h-4"}):r.jsx(bO,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(y),disabled:y.id===s||o===y.id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Eliminar",children:r.jsx(ns,{className:"w-4 h-4"})})]})})]},y.id))})]})})}),a&&r.jsx(iH,{usuario:a,onCerrar:()=>i(null),onCambiado:x})]})},oH=({usuario:t,onCerrar:e,onGuardado:n})=>{const{user:s}=dt(),a=!!t,[i,o]=M.useState({email:(t==null?void 0:t.email)||"",nombre:(t==null?void 0:t.nombre)||"",apellidoPaterno:(t==null?void 0:t.apellidoPaterno)||"",apellidoMaterno:(t==null?void 0:t.apellidoMaterno)||"",rol:(t==null?void 0:t.rol)||"maestro",password:"",confirmarPassword:""}),[l,c]=M.useState(!1),[d,m]=M.useState(""),p=y=>{o({...i,[y.target.name]:y.target.value}),m("")},g=()=>{if(!i.email||!i.nombre||!i.apellidoPaterno)return m("Por favor completa todos los campos obligatorios"),!1;if(!a){if(!i.password)return m("La contrasea es obligatoria"),!1;if(i.password.length<6)return m("La contrasea debe tener al menos 6 caracteres"),!1;if(i.password!==i.confirmarPassword)return m("Las contraseas no coinciden"),!1}return!0},x=async()=>{if(g())try{if(c(!0),a)await Oc.actualizar(t.id,{nombre:i.nombre,apellidoPaterno:i.apellidoPaterno,apellidoMaterno:i.apellidoMaterno,email:i.email});else{const y={email:i.email,password:i.password,nombre:i.nombre,apellidoPaterno:i.apellidoPaterno,apellidoMaterno:i.apellidoMaterno,rol:i.rol};await Mr.register(y,(s==null?void 0:s.id)||"system")}n()}catch(y){console.error("Error al guardar usuario:",y),m(y.message||"Error al guardar usuario")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Po,{className:"w-6 h-6 text-indigo-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:a?"Editar Usuario":"Crear Nuevo Usuario"})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(ss,{className:"w-6 h-6 text-slate-600"})})]}),r.jsxs("div",{className:"p-6",children:[d&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(ya,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-800",children:d})]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Correo Electrnico *"}),r.jsxs("div",{className:"relative",children:[r.jsx(zh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"email",name:"email",type:"email",value:i.email,onChange:p,disabled:a,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-slate-100 disabled:cursor-not-allowed",placeholder:"usuario@ejemplo.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Nombre *"}),r.jsx("input",{id:"nombre",name:"nombre",type:"text",value:i.nombre,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Juan"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apellidoPaterno",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Apellido Paterno *"}),r.jsx("input",{id:"apellidoPaterno",name:"apellidoPaterno",type:"text",value:i.apellidoPaterno,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Prez"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apellidoMaterno",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Apellido Materno"}),r.jsx("input",{id:"apellidoMaterno",name:"apellidoMaterno",type:"text",value:i.apellidoMaterno,onChange:p,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Garca"})]})]}),!a&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rol",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rol *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{id:"rol",name:"rol",value:i.rol,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"superadmin",children:"Super Administrador"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]})]}),!a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Contrasea *"}),r.jsxs("div",{className:"relative",children:[r.jsx($g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"password",name:"password",type:"password",value:i.password,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Mnimo 6 caracteres"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmarPassword",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Confirmar Contrasea *"}),r.jsxs("div",{className:"relative",children:[r.jsx($g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{id:"confirmarPassword",name:"confirmarPassword",type:"password",value:i.confirmarPassword,onChange:p,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Repite la contrasea"})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[r.jsx("button",{onClick:e,disabled:l,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancelar"}),r.jsx("button",{onClick:x,disabled:l,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando..."]}):a?"Guardar Cambios":"Crear Usuario"})]})]})})},lH=()=>{const{user:t}=dt(),[e,n]=M.useState([]),[s,a]=M.useState([]),[i,o]=M.useState(!0),[l,c]=M.useState(!1),[d,m]=M.useState(null),[p,g]=M.useState(""),[x,y]=M.useState("todos"),[T,I]=M.useState("todos");M.useEffect(()=>{b()},[]),M.useEffect(()=>{N()},[e,p,x,T]);const b=async()=>{try{o(!0);const R=await Oc.obtenerTodos();n(R)}catch(R){console.error("Error al cargar usuarios:",R),alert("Error al cargar usuarios")}finally{o(!1)}},N=()=>{let R=[...e];if(p){const E=p.toLowerCase();R=R.filter(S=>S.nombre.toLowerCase().includes(E)||S.apellidoPaterno.toLowerCase().includes(E)||S.email.toLowerCase().includes(E))}x!=="todos"&&(R=R.filter(E=>E.rol===x)),T==="activos"?R=R.filter(E=>E.activo):T==="inactivos"&&(R=R.filter(E=>!E.activo)),a(R)},w=()=>{m(null),c(!0)},D=R=>{m(R),c(!0)},V=()=>{c(!1),m(null)},k=()=>{c(!1),m(null),b()};return i?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando usuarios..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:"Gestin de Usuarios"}),r.jsx("p",{className:"text-slate-600",children:"Administra usuarios, roles y permisos del sistema"})]}),r.jsxs("button",{onClick:w,className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors shadow-lg",children:[r.jsx(On,{className:"w-5 h-5"}),"Crear Usuario"]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:p,onChange:R=>g(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:x,onChange:R=>y(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"todos",children:"Todos los roles"}),r.jsx("option",{value:"superadmin",children:"Super Admin"}),r.jsx("option",{value:"directivo",children:"Directivo"}),r.jsx("option",{value:"maestro",children:"Maestro"}),r.jsx("option",{value:"alumno",children:"Alumno"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsxs("select",{value:T,onChange:R=>I(R.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none bg-white",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"activos",children:"Activos"}),r.jsx("option",{value:"inactivos",children:"Inactivos"})]})]})]}),r.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Mostrando ",r.jsx("span",{className:"font-semibold text-slate-900",children:s.length})," de ",r.jsx("span",{className:"font-semibold text-slate-900",children:e.length})," usuarios"]})]}),r.jsx(rH,{usuarios:s,onEditar:D,onActualizar:b,currentUserId:(t==null?void 0:t.id)||""}),l&&r.jsx(oH,{usuario:d,onCerrar:V,onGuardado:k})]})})},cH=()=>{const t=bs(),[e,n]=M.useState([]),[s,a]=M.useState(!0);M.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);let d=[];try{d=(await Tv.obtenerTodas()).filter(T=>T.activa)}catch(y){console.error("Error cargando materias DB:",y)}let m=[];const p=Rn.obtenerEstadisticas();p.totalProgramas>0?p.materiasDisponibles.forEach(y=>{m.push(...Rn.buscarPorMateria(y))}):(console.warn("Servicio vaco, usando Fallback JSON directo"),m=jI);const g=[];m.forEach(y=>{var I,b,N,w,D,V,k,R;if(!d.some(E=>E.nombre.toLowerCase().trim()===y.materia.toLowerCase().trim()&&E.grado===y.semestre))try{const E={id:`sep-${String(y.materia).replace(/\s+/g,"-")}-${y.semestre}`,nombre:y.materia,clave:`SEP-${y.semestre}${String(y.materia).substring(0,3).toUpperCase()}`,grado:y.semestre,categoria:((b=(I=y.organizador_curricular)==null?void 0:I.categorias)==null?void 0:b[0])||"Unidad de Aprendizaje",horasSemanales:((N=y.metadata)==null?void 0:N.horas_semanales)||4,totalHoras:(((w=y.metadata)==null?void 0:w.horas_semanales)||4)*16,proposito:((V=(D=y.organizador_curricular)==null?void 0:D.propositos_formativos)==null?void 0:V[0])||`Programa oficial del MCCEMS para ${y.materia}.`,competencias:((k=y.organizador_curricular)==null?void 0:k.metas_aprendizaje)||[],ejesFormativos:((R=y.organizador_curricular)==null?void 0:R.categorias)||[],unidades:y.unidades||[],bibliografiaBasica:y.bibliografia||[],bibliografiaComplementaria:[],recursosDigitales:[],criteriosEvaluacion:(y.criterios_evaluacion||[]).map(S=>({aspecto:S.aspecto,descripcion:S.descripcion,porcentaje:S.porcentaje})),instrumentosEvaluacion:[],activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:"SEP-OFFICIAL"};g.push(E)}catch(E){console.error("Error adaptando programa:",y.materia,E)}});const x=[...d,...g].sort((y,T)=>{const I=Number(y.grado)||0,b=Number(T.grado)||0;return I!==b?I-b:y.nombre.localeCompare(T.nombre)});x.length===0&&console.error("No se encontraron materias ni en DB ni en Oficiales"),n(x)}catch(d){console.error("Error crtico al cargar materias:",d)}finally{a(!1)}},o=d=>d.toLowerCase().includes("matemticas")?"":d.toLowerCase().includes("espaol")?"":d.toLowerCase().includes("qumica")?"":d.toLowerCase().includes("historia")?"":d.toLowerCase().includes("ingls")?"":"",l=d=>d.toLowerCase().includes("matemticas")?"from-blue-500 to-indigo-600":d.toLowerCase().includes("espaol")?"from-green-500 to-emerald-600":d.toLowerCase().includes("qumica")?"from-purple-500 to-violet-600":d.toLowerCase().includes("historia")?"from-orange-500 to-red-600":d.toLowerCase().includes("ingls")?"from-cyan-500 to-blue-600":"from-slate-500 to-slate-600",c=d=>{d!=="guia-curricular"&&t("/maestro/dashboard",{state:{view:d}})};return s?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(co,{activeView:"guia-curricular",onNavigate:c}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando materias..."})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(co,{activeView:"guia-curricular",onNavigate:c}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2",children:" Gua Curricular Interactiva"}),r.jsx("p",{className:"text-lg text-slate-600",children:"Explora el programa completo de cada materia con contenidos, recursos y evaluacin"})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-6 mb-8 text-white",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:r.jsx(Kn,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Qu encontrars aqu?"}),r.jsxs("ul",{className:"space-y-2 text-white/90",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Programa completo del semestre por unidades y temas"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Propsitos formativos y competencias a desarrollar"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Contenidos detallados y aprendizajes esperados"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Recursos digitales, bibliografa y actividades sugeridas"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"Criterios e instrumentos de evaluacin"]})]})]})]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Selecciona una materia:"}),e.length===0?r.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:[r.jsx(it,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 text-lg",children:"No hay materias disponibles"}),r.jsx("p",{className:"text-slate-500 text-sm mt-2 mb-6",children:"Contacta al administrador para agregar materias"}),r.jsxs("div",{className:"max-w-md mx-auto bg-slate-100 p-4 rounded-lg text-left text-xs font-mono text-slate-600",children:[r.jsx("p",{className:"font-bold mb-2",children:"Diagnstico de Sistema:"}),r.jsxs("p",{children:[" Programas Oficiales (JSON + Index): ",Rn.obtenerEstadisticas().totalProgramas]}),r.jsxs("p",{children:[" Materias en Base de Datos: ",s?"Cargando...":"Verificando..."]}),r.jsx("p",{className:"mt-2 text-[10px] text-slate-400",children:'Si "Programas Oficiales" es 0, hay un error en el archivo de datos local (programas_sep.json).'})]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition-colors font-medium text-sm",children:"Recargar Pgina"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(d=>r.jsxs("button",{onClick:()=>t(`/maestro/guia-curricular/${d.id}`),className:"group bg-white rounded-2xl p-6 border-2 border-slate-200 hover:border-indigo-400 hover:shadow-xl transition-all duration-300 text-left",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${l(d.nombre)} rounded-2xl flex items-center justify-center text-3xl shadow-lg group-hover:scale-110 transition-transform`,children:o(d.nombre)}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-semibold",children:[d.grado," Semestre"]}),d.id.startsWith("sep-")&&r.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-lg text-[10px] font-bold",children:"DGB/SEP 2025"})]})]}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-indigo-600 transition-colors",children:d.nombre}),r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:d.proposito}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx(Mo,{className:"w-4 h-4 text-indigo-500"}),r.jsxs("span",{children:[d.horasSemanales," hrs/semana  ",d.totalHoras," hrs totales"]})]}),r.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:d.unidades&&d.unidades.length>0?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"w-4 h-4 text-indigo-500"}),r.jsxs("span",{children:[d.unidades.length," unidades  ",d.unidades.reduce((m,p)=>m+p.temas.length,0)," temas"]})]}):(()=>{const m=Rn.buscarPorMateriaYSemestre(d.nombre,d.grado);return m&&m.progresiones?r.jsxs(r.Fragment,{children:[r.jsx(Kn,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-semibold text-green-700",children:[m.progresiones.length," Progresiones Oficiales"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-400",children:"Programa en actualizacin"})]})})()})]}),r.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-semibold group-hover:gap-3 transition-all",children:[r.jsx("span",{children:"Ver programa completo"}),r.jsx(gU,{className:"w-5 h-5"})]})]},d.id))})]}),r.jsxs("div",{className:"mt-12 bg-white rounded-2xl p-6 border border-slate-200",children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-3",children:" Tip para Maestros"}),r.jsx("p",{className:"text-slate-600 text-sm",children:"Cada materia incluye el programa completo del semestre con todos los contenidos, recursos digitales recomendados, bibliografa y criterios de evaluacin. salo como gua para planear tus clases y asegurarte de cubrir todos los temas."})]})]})})]})},dH=()=>{var I,b,N,w,D,V;const{materiaId:t}=JP(),e=bs(),[n,s]=M.useState(null),[a,i]=M.useState(!0),[o,l]=M.useState(1),[c,d]=M.useState(null),[m,p]=M.useState(!1);M.useEffect(()=>{t&&g()},[t]);const g=async()=>{var k,R,E,S,C,_;try{i(!0);let P=await Tv.obtenerPorId(t);if(!P&&(t!=null&&t.startsWith("sep-"))){console.log(" Materia no en DB, buscando en Fallback local...");const H=Rn.obtenerEstadisticas().materiasDisponibles;let O=null;for(const G of H)if(O=Rn.buscarPorMateria(G).find(Y=>`sep-${String(Y.materia).replace(/\s+/g,"-")}-${Y.semestre}`===t),O)break;O&&(P={id:t,nombre:O.materia,clave:`SEP-${O.semestre}${String(O.materia).substring(0,3).toUpperCase()}`,grado:O.semestre,categoria:((R=(k=O.organizador_curricular)==null?void 0:k.categorias)==null?void 0:R[0])||"Unidad de Aprendizaje",horasSemanales:((E=O.metadata)==null?void 0:E.horas_semanales)||4,totalHoras:(((S=O.metadata)==null?void 0:S.horas_semanales)||4)*16,proposito:`Programa oficial del MCCEMS para ${O.materia}.`,competencias:((C=O.organizador_curricular)==null?void 0:C.metas_aprendizaje)||[],ejesFormativos:((_=O.organizador_curricular)==null?void 0:_.categorias)||[],unidades:[],bibliografiaBasica:[],bibliografiaComplementaria:[],recursosDigitales:[],criteriosEvaluacion:[],instrumentosEvaluacion:[],activa:!0,fechaCreacion:new Date().toISOString(),creadoPor:"SEP-OFFICIAL"})}if(s(P),P)try{const j=Rn.buscarPorMateriaYSemestre(P.nombre,P.grado);d(j),console.log(" Programa oficial SEP encontrado:",j)}catch{console.log(" No se encontr programa oficial SEP para esta materia"),d(null)}}catch(P){console.error("Error al cargar materia:",P)}finally{i(!1)}},x=k=>{l(o===k?null:k)},y=k=>{switch(k){case"video":return r.jsx($O,{className:"w-4 h-4"});case"plataforma":return r.jsx(gp,{className:"w-4 h-4"});case"libro":return r.jsx(PE,{className:"w-4 h-4"});default:return r.jsx(Ls,{className:"w-4 h-4"})}},T=k=>{if(k==="guia-curricular"){e("/maestro/guia-curricular");return}e("/maestro/dashboard",{state:{view:k}})};return a?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(co,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando programa..."})]})})]}):n?r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(co,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("button",{onClick:()=>e("/maestro/guia-curricular"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[r.jsx(fd,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Volver a la gua"})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 mb-8 text-white",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[n.nombre,n.id.startsWith("sep-")&&r.jsxs("span",{className:"bg-white/20 text-white text-xs px-2 py-1 rounded-lg border border-white/30 flex items-center gap-1 font-semibold",children:[r.jsx(pp,{className:"w-3 h-3"}),"Versin 2025"]})]}),r.jsx("p",{className:"text-white/90 text-lg mb-4",children:"Programa del Semestre"}),r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx("span",{className:"font-semibold",children:"Clave:"})," ",n.clave]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx(Mo,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.horasSemanales," hrs/semana"]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:[r.jsx(it,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.totalHoras," hrs totales"]})]})]})]})})}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:r.jsx(Kn,{className:"w-5 h-5 text-indigo-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Propsitos Formativos (Versin 2025)"})]}),(I=c==null?void 0:c.organizador_curricular)!=null&&I.propositos_formativos&&c.organizador_curricular.propositos_formativos.length>0?r.jsx("div",{className:"space-y-3",children:c.organizador_curricular.propositos_formativos.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg border-l-4 border-indigo-500",children:[r.jsx("div",{className:"bg-indigo-600 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:R+1}),r.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:k})]},R))}):r.jsx("p",{className:"text-slate-700 leading-relaxed",children:n.proposito})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:r.jsx(pp,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Competencias a Desarrollar"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.competencias.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Is,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-slate-700",children:k})]},R))})]}),c&&r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-2 border-indigo-200 shadow-md",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg",children:r.jsx(pp,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[" Programa Oficial DGB/SEP",r.jsx("span",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded-full",children:"MCCEMS"})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Marco Curricular Comn de la Educacin Media Superior"})]})]}),c.url_fuente&&r.jsxs("a",{href:c.url_fuente,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 flex items-center gap-1 text-sm font-medium transition-colors",children:[r.jsx(qg,{className:"w-4 h-4"}),"Ver PDF oficial"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[((b=c.metadata)==null?void 0:b.creditos)&&r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Crditos"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:c.metadata.creditos})]}),((N=c.metadata)==null?void 0:N.horas_semanales)&&r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Horas/Semana"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:c.metadata.horas_semanales})]}),r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Progresiones"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:((w=c.progresiones)==null?void 0:w.length)||0})]}),r.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Categoras"}),r.jsx("div",{className:"text-lg font-bold text-indigo-700",children:((V=(D=c.organizador_curricular)==null?void 0:D.categorias)==null?void 0:V.length)||0})]})]}),c.progresiones&&c.progresiones.length>0&&r.jsxs("div",{className:"bg-white/80 rounded-xl p-4",children:[r.jsxs("button",{onClick:()=>p(!m),className:"w-full flex items-center justify-between text-left font-semibold text-slate-900 hover:text-indigo-700 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ms,{className:"w-5 h-5 text-indigo-600"}),"Progresiones de Aprendizaje Oficiales (",c.progresiones.length,")"]}),m?r.jsx(LE,{className:"w-5 h-5"}):r.jsx(kE,{className:"w-5 h-5"})]}),m&&r.jsx("div",{className:"mt-4 space-y-4 max-h-[600px] overflow-y-auto",children:c.progresiones.map((k,R)=>r.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200 hover:border-indigo-300 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-indigo-600 text-white font-bold min-w-[32px] h-8 flex items-center justify-center rounded-lg text-sm shadow-sm",children:k.id}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-slate-900 font-medium text-sm leading-relaxed mb-2",children:k.descripcion}),k.metas&&k.metas.length>0&&r.jsxs("div",{className:"mt-3 pl-3 border-l-2 border-green-400 bg-green-50/50 rounded-r py-2 pr-2",children:[r.jsx("p",{className:"text-xs font-semibold text-green-700 mb-1",children:" Metas de Aprendizaje:"}),k.metas.map((E,S)=>r.jsxs("div",{className:"text-xs text-slate-700 flex items-start gap-1 mt-1",children:[r.jsx(Is,{className:"w-3 h-3 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:E})]},S))]}),k.tematicas&&k.tematicas.length>0&&r.jsxs("div",{className:"mt-3 pl-3 border-l-2 border-blue-400 bg-blue-50/50 rounded-r py-2 pr-2",children:[r.jsx("p",{className:"text-xs font-semibold text-blue-700 mb-2",children:" Temticas a desarrollar:"}),r.jsx("ul",{className:"space-y-1",children:k.tematicas.map((E,S)=>r.jsxs("li",{className:"text-xs text-slate-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-500 font-bold",children:""}),r.jsx("span",{className:"flex-1",children:E})]},S))})]})]})]})},R))})]}),r.jsxs("div",{className:"mt-4 text-xs text-slate-600 flex items-center justify-between",children:[r.jsx("span",{children:"Fuente: DGB/SEP - Marco Curricular Comn"}),c.fecha_extraccion&&r.jsxs("span",{children:["Extrado: ",new Date(c.fecha_extraccion).toLocaleDateString("es-MX")]})]})]}),n.ejesFormativos&&n.ejesFormativos.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:r.jsx(it,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Ejes Formativos / Categoras"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.ejesFormativos.map((k,R)=>r.jsx("span",{className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-xl text-sm font-medium border border-blue-100",children:k},R))})]}),(c==null?void 0:c.orientaciones_didacticas)&&c.orientaciones_didacticas.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-cyan-100 p-2 rounded-lg",children:r.jsx(ms,{className:"w-5 h-5 text-cyan-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Orientaciones Didcticas Sugeridas"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.orientaciones_didacticas.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-2 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[r.jsx("div",{className:"bg-cyan-500 w-2 h-2 rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-slate-700 text-sm",children:k})]},R))})]}),n.unidades&&n.unidades.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:" Unidades del Programa"}),r.jsx("div",{className:"space-y-4",children:n.unidades.map(k=>r.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("button",{onClick:()=>x(k.numero),className:"w-full p-6 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[r.jsx("div",{className:"bg-indigo-100 text-indigo-700 w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg",children:k.numero}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900",children:k.nombre}),r.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-600",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Mo,{className:"w-4 h-4"}),k.duracionHoras," horas"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(it,{className:"w-4 h-4"}),k.temas.length," temas"]})]})]})]}),o===k.numero?r.jsx(LE,{className:"w-6 h-6 text-slate-400"}):r.jsx(kE,{className:"w-6 h-6 text-slate-400"})]}),o===k.numero&&r.jsxs("div",{className:"border-t border-slate-200 p-6 bg-slate-50",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:" Propsito:"}),r.jsx("p",{className:"text-slate-700",children:k.proposito})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:" Temas:"}),r.jsx("div",{className:"space-y-4",children:k.temas.map(R=>r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded-lg text-sm font-bold",children:R.numero}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h5",{className:"font-bold text-slate-900",children:R.nombre}),r.jsxs("span",{className:"text-xs text-slate-500",children:[R.duracionHoras," horas"]})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Contenidos:"}),r.jsx("ul",{className:"space-y-1",children:R.contenidos.map((E,S)=>r.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[r.jsx("span",{className:"text-indigo-500 mt-1",children:""}),r.jsx("span",{children:E})]},S))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Aprendizajes Esperados:"}),r.jsx("ul",{className:"space-y-1",children:R.aprendizajesEsperados.map((E,S)=>r.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:E})]},S))})]})]},R.numero))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:" Actividades Sugeridas:"}),r.jsx("ul",{className:"space-y-2",children:k.actividadesSugeridas.map((R,E)=>r.jsxs("li",{className:"flex items-start gap-2 text-slate-700",children:[r.jsx(ms,{className:"w-4 h-4 text-purple-500 flex-shrink-0 mt-1"}),r.jsx("span",{className:"text-sm",children:R})]},E))})]})]})]},k.numero))})]}),n.recursosDigitales&&n.recursosDigitales.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:r.jsx(gp,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Recursos Digitales Recomendados"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.recursosDigitales.map((k,R)=>r.jsxs("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-3 p-4 border border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 transition-all group",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors",children:y(k.tipo)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h4",{className:"font-semibold text-slate-900 group-hover:text-purple-700 transition-colors",children:k.nombre}),r.jsx(qg,{className:"w-4 h-4 text-slate-400 flex-shrink-0"})]}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:k.descripcion})]})]},R))})]}),n.criteriosEvaluacion&&n.criteriosEvaluacion.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:r.jsx(Is,{className:"w-5 h-5 text-orange-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Criterios de Evaluacin"})]}),r.jsx("div",{className:"space-y-3",children:n.criteriosEvaluacion.map((k,R)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900",children:k.aspecto}),r.jsx("p",{className:"text-sm text-slate-600",children:k.descripcion})]}),r.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[k.porcentaje,"%"]})]},R))})]}),n.bibliografiaBasica&&n.bibliografiaBasica.length>0&&r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"bg-slate-100 p-2 rounded-lg",children:r.jsx(PE,{className:"w-5 h-5 text-slate-600"})}),r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Bibliografa Recomendada"})]}),r.jsx("div",{className:"space-y-2",children:n.bibliografiaBasica.map((k,R)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"bg-white p-1 rounded border border-slate-200",children:k.disponibilidad==="digital"?r.jsx(gp,{className:"w-3 h-3 text-blue-500"}):r.jsx(it,{className:"w-3 h-3 text-slate-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-slate-700 text-sm font-medium",children:k.titulo}),r.jsxs("p",{className:"text-slate-500 text-xs italic",children:[k.autor," ",k.ao?`(${k.ao})`:""]})]})]},R))})]})]})})]}):r.jsxs("div",{className:"flex min-h-screen bg-slate-50 text-slate-900",children:[r.jsx(co,{activeView:"guia-curricular",onNavigate:T}),r.jsx("main",{className:"flex-1 overflow-y-auto h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg text-slate-600",children:"Materia no encontrada"}),r.jsx("button",{onClick:()=>e("/maestro/guia-curricular"),className:"mt-4 text-indigo-600 hover:text-indigo-700",children:"Volver a la gua"})]})})]})},$i=[],uH=t=>t==="all"?$i:$i.filter(e=>e.category===t),mH=t=>{const e=t.toLowerCase();return $i.filter(n=>n.name.toLowerCase().includes(e)||n.description.toLowerCase().includes(e)||n.tags.some(s=>s.toLowerCase().includes(e)))},hH=({tool:t})=>{const e=bs(),n=()=>{e(`/maestro/herramientas/${t.id}`)};return r.jsxs("div",{onClick:n,className:"group relative bg-white rounded-2xl border-2 border-slate-200 p-6 hover:border-indigo-500 hover:shadow-xl transition-all duration-300 cursor-pointer",children:[t.isPro&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx(wU,{className:"w-5 h-5 text-amber-500"})}),t.isNew&&r.jsx("div",{className:"absolute top-4 right-4 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Nuevo"}),r.jsx("div",{className:"mb-4 p-3 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl w-fit group-hover:scale-110 transition-transform",children:r.jsx(t.icon,{className:"w-8 h-8 text-indigo-600"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors",children:t.name}),r.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:t.description}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.tags.slice(0,3).map((s,a)=>r.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-lg",children:s},a)),t.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-lg",children:["+",t.tags.length-3]})]}),r.jsx("div",{className:"absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(gd,{className:"w-5 h-5 text-indigo-500"})})]})},fH=[{id:"all",name:"Todas",color:"slate"},{id:"planeacion",name:"Planeacin",color:"indigo"},{id:"actividades",name:"Actividades",color:"emerald"},{id:"evaluacion",name:"Evaluacin",color:"purple"},{id:"materiales",name:"Materiales",color:"amber"},{id:"comunicacion",name:"Comunicacin",color:"pink"}],pH=()=>{const[t,e]=M.useState("all"),[n,s]=M.useState(""),a=M.useMemo(()=>{let i=uH(t);return n.trim()&&(i=mH(n)),i},[t,n]);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto p-6 pb-20",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl",children:r.jsx(gd,{className:"w-10 h-10 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Herramientas Educativas"}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[$i.length," herramientas disponibles para potenciar tu enseanza"]})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(Fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:n,onChange:i=>s(i.target.value),placeholder:"Buscar herramientas...",className:"w-full pl-12 pr-4 py-4 rounded-2xl border-2 border-slate-200 bg-white focus:border-indigo-500 focus:outline-none transition-colors text-lg"})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Vc,{className:"w-5 h-5 text-slate-600"}),r.jsx("span",{className:"font-bold text-slate-700",children:"Categoras"})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:fH.map(i=>{const o=t===i.id,l=i.id==="all"?$i.length:$i.filter(c=>c.category===i.id).length;return r.jsxs("button",{onClick:()=>e(i.id),className:`px-6 py-3 rounded-xl font-bold transition-all ${o?`bg-${i.color}-500 text-white shadow-lg scale-105`:"bg-white text-slate-700 border-2 border-slate-200 hover:border-slate-300"}`,children:[i.name,r.jsxs("span",{className:`ml-2 text-sm ${o?"text-white/80":"text-slate-500"}`,children:["(",l,")"]})]},i.id)})})]}),a.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(i=>r.jsx(hH,{tool:i},i.id))}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"No se encontraron herramientas"}),r.jsx("p",{className:"text-slate-600",children:"Intenta con otra bsqueda o categora"})]}),$i.length===0&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:"Prximamente"}),r.jsx("p",{className:"text-slate-600",children:"Las herramientas se estn configurando..."})]})]})})},gH=({userName:t,onChoice:e,onSchoolSelected:n})=>{const[s,a]=M.useState(null),[i,o]=M.useState([]),[l,c]=M.useState([]),[d,m]=M.useState(""),[p,g]=M.useState(!1),[x,y]=M.useState(null);M.useEffect(()=>{T()},[]),M.useEffect(()=>{if(d){const b=i.filter(N=>N.nombre.toLowerCase().includes(d.toLowerCase())||N.codigo.toLowerCase().includes(d.toLowerCase()));c(b)}else c(i)},[d,i]);const T=async()=>{try{g(!0);const N=(await Re(ue(J,"schools"))).docs.map(w=>({id:w.id,nombre:w.data().nombre,codigo:w.data().codigo,direccion:w.data().direccion}));o(N),c(N)}catch(b){console.error("Error al cargar escuelas:",b)}finally{g(!1)}},I=()=>{s==="join"&&x&&n?n(x.id,x.nombre):s==="create"?e("create"):s==="join"&&!x&&e("join")};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4",children:r.jsx(ts,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Bienvenido a EDUPLANMX!"}),r.jsxs("p",{className:"text-xl text-gray-600",children:["Hola, ",r.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]}),r.jsx("div",{className:"mb-8",children:r.jsx("p",{className:"text-center text-gray-700 text-lg",children:"Para comenzar, necesitamos conocer tu escuela:"})}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{children:[r.jsx("button",{onClick:()=>a("join"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ${s==="join"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${s==="join"?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(Ke,{className:`w-6 h-6 ${s==="join"?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Mi escuela ya est registrada"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Selecciona tu escuela de la lista o bscala por nombre/cdigo"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s==="join"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:s==="join"&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})}),s==="join"&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsxs("div",{className:"relative mb-4",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",value:d,onChange:b=>m(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),p?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Cargando escuelas..."})]}):l.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(wt,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:d?"No se encontraron escuelas":"No hay escuelas registradas"}),r.jsx("button",{onClick:()=>a("create"),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Registra la primera escuela"})]}):r.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:l.map(b=>r.jsx("button",{onClick:()=>y(b),className:`w-full p-3 rounded-lg border transition-all text-left ${(x==null?void 0:x.id)===b.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-white"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(wt,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${(x==null?void 0:x.id)===b.id?"text-blue-600":"text-gray-400"}`}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:b.nombre}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Cdigo: ",b.codigo]}),b.direccion&&r.jsxs("p",{className:"text-xs text-gray-400 flex items-center mt-1",children:[r.jsx(Fh,{className:"w-3 h-3 mr-1"}),b.direccion]})]}),r.jsx("div",{className:"ml-2",children:r.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${(x==null?void 0:x.id)===b.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:(x==null?void 0:x.id)===b.id&&r.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"})})})]})},b.id))}),l.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsx("button",{onClick:()=>{y(null),e("join")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"No encuentras tu escuela? Bscala por cdigo CCT"})})]})]}),r.jsx("button",{onClick:()=>a("create"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ${s==="create"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${s==="create"?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(wt,{className:`w-6 h-6 ${s==="create"?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Registrar una nueva escuela"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Crea el perfil de tu escuela y s el primero en registrarla"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${s==="create"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:s==="create"&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})})]}),r.jsxs("button",{onClick:I,disabled:!s||s==="join"&&!x,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${s&&(s==="create"||x)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Continuar",r.jsx(sl,{className:"ml-2 w-5 h-5"})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Sistema de Planeacin Didctica  MCCEMS 2024"})})]})})},xH=({onBack:t,onSchoolSelected:e})=>{const[n,s]=M.useState("code"),[a,i]=M.useState(""),[o,l]=M.useState(!1),[c,d]=M.useState([]),[m,p]=M.useState(""),[g,x]=M.useState(null),y=async()=>{if(!a.trim()){p("Por favor ingresa un cdigo de acceso");return}l(!0),p("");try{const w=await Uc.getSchoolByCode(a.trim());w?d([{id:w.id,nombre:w.nombre,cct:w.cct,municipio:w.municipio,turno:w.turno,codigoAcceso:w.codigoAcceso,totalDocentes:w.estadisticas.totalDocentes}]):(p("No se encontr ninguna escuela con ese cdigo"),d([]))}catch{p("Error al buscar la escuela. Intenta de nuevo."),d([])}finally{l(!1)}},T=async()=>{if(!a.trim()||a.length<3){p("Por favor ingresa al menos 3 caracteres");return}l(!0),p("");try{const w=await Uc.searchSchools(a.trim());w.length>0?d(w):(p("No se encontraron escuelas con ese nombre"),d([]))}catch{p("Error al buscar escuelas. Intenta de nuevo."),d([])}finally{l(!1)}},I=()=>{n==="code"?y():T()},b=w=>{x(w)},N=()=>{g&&e(g.id,g.nombre)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(fd,{className:"w-5 h-5 mr-2"}),"Volver"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Buscar tu Escuela"}),r.jsx("p",{className:"text-gray-600",children:"Encuentra tu escuela para unirte a ella"})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsx("button",{onClick:()=>{s("code"),i(""),d([]),p("")},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${n==="code"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Buscar por Cdigo"}),r.jsx("button",{onClick:()=>{s("name"),i(""),d([]),p("")},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${n==="name"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Buscar por Nombre"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="code"?"Cdigo de Acceso":"Nombre de la Escuela"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:a,onChange:w=>i(w.target.value),onKeyPress:w=>w.key==="Enter"&&I(),placeholder:n==="code"?"Ej: CBT001":"Ej: CBT No. 1 Dr. Gustavo Baz",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:I,disabled:o,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center",children:o?r.jsx(al,{className:"w-5 h-5 animate-spin"}):"Buscar"})]}),m&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m})]}),c.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Resultados (",c.length,")"]}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.map(w=>r.jsx("button",{onClick:()=>b(w),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${(g==null?void 0:g.id)===w.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${(g==null?void 0:g.id)===w.id?"bg-blue-500":"bg-gray-200"}`,children:r.jsx(Dm,{className:`w-6 h-6 ${(g==null?void 0:g.id)===w.id?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:w.nombre}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Dm,{className:"w-4 h-4 mr-1"}),"CCT: ",w.cct]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Fh,{className:"w-4 h-4 mr-1"}),w.municipio]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ke,{className:"w-4 h-4 mr-1"}),w.totalDocentes," docentes"]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:["Turno ",w.turno]}),r.jsx("span",{className:"inline-block ml-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-mono",children:w.codigoAcceso})]})]}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${(g==null?void 0:g.id)===w.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:(g==null?void 0:g.id)===w.id&&r.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})})]})},w.id))})]}),r.jsxs("button",{onClick:N,disabled:!g,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${g?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Unirme a esta Escuela",r.jsx(sl,{className:"ml-2 w-5 h-5"})]})]})})},vH=["Matutino","Vespertino","Nocturno","Discontinuo"],yH=["Director","Subdirector","Coordinador Acadmico","Docente"],bH=({onBack:t,onSchoolCreated:e})=>{const[n,s]=M.useState({nombre:"",cct:"",municipio:"",estado:"Mxico",turno:"Matutino",puestoCreador:"Director"}),[a,i]=M.useState({}),[o,l]=M.useState(!1),[c,d]=M.useState(""),m=y=>/^\d{2}[A-Z]{3}\d{4}[A-Z]$/.test(y.toUpperCase()),p=()=>{const y={};return n.nombre.trim()||(y.nombre="El nombre es requerido"),n.cct.trim()?m(n.cct)||(y.cct="Formato de CCT invlido (Ej: 15ECT0001A)"):y.cct="El CCT es requerido",n.municipio.trim()||(y.municipio="El municipio es requerido"),i(y),Object.keys(y).length===0},g=async()=>{var y;if(p()){l(!0),d("");try{const{schoolService:T}=await Eo(async()=>{const{schoolService:w}=await Promise.resolve().then(()=>MI);return{schoolService:w}},void 0),{auth:I}=await Eo(async()=>{const{auth:w}=await Promise.resolve().then(()=>NI);return{auth:w}},void 0),b=(y=I.currentUser)==null?void 0:y.uid;if(!b)throw new Error("No se pudo obtener el ID del usuario");const N=await T.createSchool(n,b);e(N.id,N.nombre,n.puestoCreador)}catch(T){console.error("Error al crear escuela:",T),d(T.message||"Error al crear la escuela. Intenta de nuevo.")}finally{l(!1)}}},x=(y,T)=>{s(I=>({...I,[y]:T})),a[y]&&i(I=>({...I,[y]:void 0}))};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 md:p-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[r.jsx(fd,{className:"w-5 h-5 mr-2"}),"Volver"]}),r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(wt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registrar Nueva Escuela"}),r.jsx("p",{className:"text-gray-600",children:"Crea el perfil de tu escuela"})]})]})]}),c&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[r.jsx(ya,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-800",children:c})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo de la Escuela *"}),r.jsx("input",{type:"text",value:n.nombre,onChange:y=>x("nombre",y.target.value),placeholder:"Ej: CBT No. 1 Dr. Gustavo Baz",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.nombre?"border-red-300":"border-gray-300"}`}),a.nombre&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.nombre})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clave de Centro de Trabajo (CCT) *"}),r.jsx("input",{type:"text",value:n.cct,onChange:y=>x("cct",y.target.value.toUpperCase()),placeholder:"Ej: 15ECT0001A",maxLength:11,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono ${a.cct?"border-red-300":"border-gray-300"}`}),a.cct&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.cct}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formato: 2 dgitos + 3 letras + 4 dgitos + 1 letra"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Municipio *"}),r.jsx("input",{type:"text",value:n.municipio,onChange:y=>x("municipio",y.target.value),placeholder:"Ej: Tlalnepantla",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.municipio?"border-red-300":"border-gray-300"}`}),a.municipio&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.municipio})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsx("input",{type:"text",value:n.estado,onChange:y=>x("estado",y.target.value),placeholder:"Ej: Mxico",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Turno *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:vH.map(y=>r.jsx("button",{type:"button",onClick:()=>x("turno",y),className:`py-3 px-4 rounded-lg border-2 font-medium transition-all ${n.turno===y?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:y},y))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tu Puesto en la Escuela *"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:yH.map(y=>r.jsx("button",{type:"button",onClick:()=>x("puestoCreador",y),className:`py-3 px-4 rounded-lg border-2 font-medium transition-all text-left ${n.puestoCreador===y?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:y},y))})]})]}),r.jsx("button",{onClick:g,disabled:o,className:`w-full mt-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(al,{className:"w-5 h-5 mr-2 animate-spin"}),"Creando Escuela..."]}):r.jsxs(r.Fragment,{children:["Crear Escuela",r.jsx(sl,{className:"ml-2 w-5 h-5"})]})}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Al crear la escuela, se generar automticamente un cdigo de acceso nico que podrs compartir con otros docentes para que se unan."]})})]})})},_H=["Matemticas","Fsica","Qumica","Biologa","Historia","Geografa","Ingls","Espaol","Filosofa","tica","Informtica","Cultura Digital","Educacin Fsica","Arte","Msica","Orientacin Educativa"],EH=[1,2,3,4,5,6],NH=({schoolName:t,puesto:e,onComplete:n})=>{const[s,a]=M.useState({puesto:e,materias:[],grados:[],telefono:""}),[i,o]=M.useState(""),[l,c]=M.useState(!1),d=e==="Docente"||e==="Coordinador Acadmico",m=T=>{a(I=>{var b;return{...I,materias:(b=I.materias)!=null&&b.includes(T)?I.materias.filter(N=>N!==T):[...I.materias||[],T]}})},p=()=>{var T;i.trim()&&!((T=s.materias)!=null&&T.includes(i.trim()))&&(a(I=>({...I,materias:[...I.materias||[],i.trim()]})),o(""))},g=T=>{a(I=>{var b;return{...I,grados:(b=I.grados)!=null&&b.includes(T)?I.grados.filter(N=>N!==T):[...I.grados||[],T]}})},x=async()=>{c(!0),await new Promise(T=>setTimeout(T,500)),n(s)},y=!d||s.materias&&s.materias.length>0;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 md:p-12",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-4",children:r.jsx(Po,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Completa tu Perfil"}),r.jsxs("p",{className:"text-gray-600",children:["Escuela: ",r.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tu Puesto"}),r.jsx("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ts,{className:"w-5 h-5 text-blue-600 mr-3"}),r.jsx("span",{className:"font-semibold text-blue-900",children:e}),r.jsx(Hl,{className:"w-5 h-5 text-blue-600 ml-auto"})]})})]}),d&&r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Materias que Impartes *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:_H.map(T=>{var I;return r.jsx("button",{type:"button",onClick:()=>m(T),className:`py-2 px-3 rounded-lg border-2 text-sm font-medium transition-all ${(I=s.materias)!=null&&I.includes(T)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:T},T)})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:i,onChange:T=>o(T.target.value),onKeyPress:T=>T.key==="Enter"&&p(),placeholder:"Otra materia...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"Agregar"})]}),s.materias&&s.materias.length>0&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Materias seleccionadas (",s.materias.length,"):"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.materias.map(T=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[r.jsx(it,{className:"w-3 h-3 mr-1"}),T]},T))})]})]}),d&&r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Semestres que Atiendes (opcional)"}),r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:EH.map(T=>{var I;return r.jsxs("button",{type:"button",onClick:()=>g(T),className:`py-3 px-4 rounded-lg border-2 font-semibold transition-all ${(I=s.grados)!=null&&I.includes(T)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-700 hover:border-blue-300"}`,children:[T,""]},T)})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono (opcional)"}),r.jsx("input",{type:"tel",value:s.telefono,onChange:T=>a(I=>({...I,telefono:T.target.value})),placeholder:"Ej: 5512345678",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:x,disabled:!y||l,className:`w-full py-4 rounded-xl font-semibold text-lg transition-all duration-200 flex items-center justify-center ${y&&!l?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:l?r.jsxs(r.Fragment,{children:[r.jsx(al,{className:"w-5 h-5 mr-2 animate-spin"}),"Guardando Perfil..."]}):r.jsxs(r.Fragment,{children:["Finalizar Registro",r.jsx(sl,{className:"ml-2 w-5 h-5"})]})}),d&&r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Nota:"})," Podrs editar esta informacin ms tarde desde tu perfil."]})})]})})},CH=()=>{var y;const t=bs(),[e,n]=M.useState("welcome"),[s,a]=M.useState({}),[i,o]=M.useState(""),l=La.currentUser,c=((y=l==null?void 0:l.displayName)==null?void 0:y.split(" ")[0])||"Usuario";zc.useEffect(()=>{console.log(" OnboardingContainer montado. Paso actual:",e)},[e]);const d=T=>{n(T==="join"?"join-school":"create-school")},m=(T,I)=>{a({schoolId:T,schoolName:I,puesto:"Docente"}),n("complete-profile")},p=(T,I,b)=>{a({schoolId:T,schoolName:I,puesto:b}),n("complete-profile")},g=async T=>{try{if(!l||!s.schoolId||!s.schoolName)throw new Error("Informacin incompleta");const b=(l.displayName||"").split(" "),N=b[0]||"Usuario",w=b[1]||"";await Uc.createUserProfile(l.uid,l.email||"",N,w,s.schoolId,s.schoolName,T),t("/dashboard")}catch(I){console.error("Error al completar onboarding:",I),o(I.message||"Error al guardar el perfil")}},x=()=>{e==="join-school"||e==="create-school"?n("welcome"):e==="complete-profile"&&(n("welcome"),a({}))};return r.jsxs(r.Fragment,{children:[i&&r.jsxs("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 text-red-800 px-6 py-4 rounded-lg shadow-lg z-50",children:[r.jsx("p",{className:"font-medium",children:"Error"}),r.jsx("p",{className:"text-sm",children:i})]}),e==="welcome"&&r.jsx(gH,{userName:c,onChoice:d,onSchoolSelected:m}),e==="join-school"&&r.jsx(xH,{onBack:x,onSchoolSelected:m}),e==="create-school"&&r.jsx(bH,{onBack:x,onSchoolCreated:p}),e==="complete-profile"&&s.schoolName&&s.puesto&&r.jsx(NH,{schoolName:s.schoolName,puesto:s.puesto,onComplete:g})]})},TH=()=>r.jsx(CH,{}),SH=()=>{const{user:t,loading:e}=dt();if(e)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Cargando..."})]})});if(!t)return r.jsx(rs,{to:"/login",replace:!0});if(t.rol==="superadmin")return r.jsx(rs,{to:"/admin/dashboard",replace:!0});if(t.onboardingCompleto===!1||!t.schoolId||!t.schoolName||!t.nombre||!t.apellidoPaterno)return console.info(" Redirigiendo a onboarding - Completar perfil"),r.jsx(rs,{to:"/onboarding",replace:!0});switch(t.rol){case"superadmin":return r.jsx(rs,{to:"/admin/dashboard",replace:!0});case"directivo":return r.jsx(rs,{to:"/directivo/dashboard",replace:!0});case"maestro":return r.jsx(rs,{to:"/maestro/dashboard",replace:!0});case"alumno":return r.jsx(rs,{to:"/alumno/dashboard",replace:!0});default:return r.jsx(rs,{to:"/login",replace:!0})}},wH=()=>r.jsx(PD,{basename:"/EDUPLANMX/",children:r.jsx(XV,{children:r.jsxs(cD,{children:[r.jsx(rn,{path:"/login",element:r.jsx(tz,{})}),r.jsx(rn,{path:"/registro",element:r.jsx(Qq,{})}),r.jsx(rn,{path:"/onboarding",element:r.jsx(Cs,{allowedRoles:["maestro","directivo","superadmin","alumno"],children:r.jsx(TH,{})})}),r.jsx(rn,{path:"/",element:r.jsx(SH,{})}),r.jsx(rn,{path:"/maestro/dashboard",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(Kq,{})})}),r.jsx(rn,{path:"/maestro/guia-curricular",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(cH,{})})}),r.jsx(rn,{path:"/maestro/guia-curricular/:materiaId",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(dH,{})})}),r.jsx(rn,{path:"/maestro/herramientas",element:r.jsx(Cs,{allowedRoles:["maestro","superadmin"],children:r.jsx(pH,{})})}),r.jsx(rn,{path:"/directivo/dashboard",element:r.jsx(Cs,{allowedRoles:["directivo","superadmin"],children:r.jsx(nH,{})})}),r.jsx(rn,{path:"/directivo/alumnos",element:r.jsx(Cs,{allowedRoles:["directivo","superadmin"],children:r.jsx(sH,{})})}),r.jsx(rn,{path:"/admin/dashboard",element:r.jsx(Cs,{allowedRoles:["superadmin"],children:r.jsx(eH,{})})}),r.jsx(rn,{path:"/admin/usuarios",element:r.jsx(Cs,{allowedRoles:["superadmin"],children:r.jsx(lH,{})})}),r.jsx(rn,{path:"/alumno/dashboard",element:r.jsx(Cs,{allowedRoles:["alumno"],children:r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Alumno"}),r.jsx("p",{className:"text-slate-600 mt-2",children:"En construccin..."})]})})}),r.jsx(rn,{path:"*",element:r.jsx(rs,{to:"/",replace:!0})})]})})}),O1=document.getElementById("root");if(!O1)throw new Error("Could not find root element to mount to");const AH=uP.createRoot(O1);AH.render(r.jsx(zc.StrictMode,{children:r.jsx(wH,{})}));
